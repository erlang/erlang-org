<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.38.1">
    <meta name="project" content="mnesia v4.24.1">


<meta name="major-vsn" content="28">
<meta name="exdoc:full-text-search-url" content="/doc/search.html?v=28&q=">
<link rel="canonical" href="https://www.erlang.org/doc/apps/mnesia/mnesia_chap2.html" />
    <title>Getting Started â€” mnesia v4.24.1</title>

    <link rel="stylesheet" href="dist/html-erlang-ZK43ZOAC.css" />

    <script defer src="dist/sidebar_items-5FF8926D.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-DPJLHKSM.js"></script>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="../../index.html" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="mnesia" />
        </a>

      <div>
        <a href="../../index.html" class="sidebar-projectName" translate="no">
mnesia
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v4.24.1
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras=""></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-extra" id="main" data-type="extras">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of mnesia</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search" tabindex="-1">
            <i class="ri-search-2-line ri-lg" aria-hidden="true"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>Getting Started</h1>


      <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/mnesia/doc/guides/mnesia_chap2.md#L1" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

  </div>


<p><a href="" id="getting_started"></a></p><p>This section introduces <code class="inline">Mnesia</code> with an example database. This example is
referenced in the following sections, where the example is modified to
illustrate various program constructs. This section illustrates the following
mandatory procedures through examples:</p><ul><li>Starting the Erlang session.</li><li>Specifying the <code class="inline">Mnesia</code> directory where the database is to be stored.</li><li>Initializing a new database schema with an attribute that specifies on which
node, or nodes, that database is to operate.</li><li>Starting <code class="inline">Mnesia</code>.</li><li>Creating and populating the database tables.</li></ul><h2 id="starting-mnesia-for-the-first-time" class="section-heading"><a href="#starting-mnesia-for-the-first-time" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Starting Mnesia for the First Time</span></h2><p>This section provides a simplified demonstration of a <code class="inline">Mnesia</code> system startup.
The dialogue from the Erlang shell is as follows:</p><pre><code class="makeup erlang" translate="no"><span class="c1">% erl -mnesia dir &#39;&quot;/tmp/funky&quot;&#39;</span><span class="w">
</span><span class="n">Erlang</span><span class="o">/</span><span class="n">OTP</span><span class="w"> </span><span class="mi">27</span><span class="w"> </span><span class="p" data-group-id="6700990882-1">[</span><span class="ss">erts</span><span class="o">-</span><span class="mf">15.1</span><span class="p">.</span><span class="mi">2</span><span class="p" data-group-id="6700990882-1">]</span><span class="w">

</span><span class="n">Eshell</span><span class="w"> </span><span class="n">V15</span><span class="p">.</span><span class="mf">1.2</span><span class="w"> </span><span class="p" data-group-id="6700990882-2">(</span><span class="ss">press</span><span class="w"> </span><span class="n">Ctrl</span><span class="o">+</span><span class="n">G</span><span class="w"> </span><span class="ss">to</span><span class="w"> </span><span class="ss">abort</span><span class="p">,</span><span class="w"> </span><span class="ss">type</span><span class="w"> </span><span class="nf">help</span><span class="p" data-group-id="6700990882-3">(</span><span class="p" data-group-id="6700990882-3">)</span><span class="p">.</span><span class="w"> </span><span class="ss">for</span><span class="w"> </span><span class="ss">help</span><span class="p" data-group-id="6700990882-2">)</span><span class="gp unselectable">
1&gt; </span><span class="nc">mnesia</span><span class="p">:</span><span class="nf">create_schema</span><span class="p" data-group-id="6700990882-4">(</span><span class="p" data-group-id="6700990882-5">[</span><span class="nf">node</span><span class="p" data-group-id="6700990882-6">(</span><span class="p" data-group-id="6700990882-6">)</span><span class="p" data-group-id="6700990882-5">]</span><span class="p" data-group-id="6700990882-4">)</span><span class="p">.</span><span class="w">
</span><span class="ss">ok</span><span class="gp unselectable">
2&gt; </span><span class="nc">mnesia</span><span class="p">:</span><span class="nf">start</span><span class="p" data-group-id="6700990882-7">(</span><span class="p" data-group-id="6700990882-7">)</span><span class="p">.</span><span class="w">
</span><span class="ss">ok</span><span class="gp unselectable">
3&gt; </span><span class="nc">mnesia</span><span class="p">:</span><span class="nf">create_table</span><span class="p" data-group-id="6700990882-8">(</span><span class="ss">funky</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6700990882-9">[</span><span class="p" data-group-id="6700990882-9">]</span><span class="p" data-group-id="6700990882-8">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="6700990882-10">{</span><span class="ss">atomic</span><span class="p">,</span><span class="ss">ok</span><span class="p" data-group-id="6700990882-10">}</span><span class="gp unselectable">
4&gt; </span><span class="nc">mnesia</span><span class="p">:</span><span class="nf">info</span><span class="p" data-group-id="6700990882-11">(</span><span class="p" data-group-id="6700990882-11">)</span><span class="p">.</span><span class="w">
</span><span class="o">--</span><span class="p">-&gt;</span><span class="w"> </span><span class="n">Processes</span><span class="w"> </span><span class="ss">holding</span><span class="w"> </span><span class="ss">locks</span><span class="w"> </span><span class="o">&lt;-</span><span class="o">--</span><span class="w"> 
</span><span class="o">--</span><span class="p">-&gt;</span><span class="w"> </span><span class="n">Processes</span><span class="w"> </span><span class="ss">waiting</span><span class="w"> </span><span class="ss">for</span><span class="w"> </span><span class="ss">locks</span><span class="w"> </span><span class="o">&lt;-</span><span class="o">--</span><span class="w"> 
</span><span class="o">--</span><span class="p">-&gt;</span><span class="w"> </span><span class="n">Participant</span><span class="w"> </span><span class="ss">transactions</span><span class="w"> </span><span class="o">&lt;-</span><span class="o">--</span><span class="w"> 
</span><span class="o">--</span><span class="p">-&gt;</span><span class="w"> </span><span class="n">Coordinator</span><span class="w"> </span><span class="ss">transactions</span><span class="w"> </span><span class="o">&lt;-</span><span class="o">--</span><span class="w">
</span><span class="o">--</span><span class="p">-&gt;</span><span class="w"> </span><span class="n">Uncertain</span><span class="w"> </span><span class="ss">transactions</span><span class="w"> </span><span class="o">&lt;-</span><span class="o">--</span><span class="w"> 
</span><span class="o">--</span><span class="p">-&gt;</span><span class="w"> </span><span class="n">Active</span><span class="w"> </span><span class="ss">tables</span><span class="w"> </span><span class="o">&lt;-</span><span class="o">--</span><span class="w"> 
</span><span class="ss">funky</span><span class="w">          </span><span class="p">:</span><span class="w"> </span><span class="ss">with</span><span class="w"> </span><span class="mi">0</span><span class="w">        </span><span class="ss">records</span><span class="w"> </span><span class="ss">occupying</span><span class="w"> </span><span class="mi">305</span><span class="w">      </span><span class="ss">words</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="ss">mem</span><span class="w">
</span><span class="ss">schema</span><span class="w">         </span><span class="p">:</span><span class="w"> </span><span class="ss">with</span><span class="w"> </span><span class="mi">2</span><span class="w">        </span><span class="ss">records</span><span class="w"> </span><span class="ss">occupying</span><span class="w"> </span><span class="mi">533</span><span class="w">      </span><span class="ss">words</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="ss">mem</span><span class="w">
</span><span class="o">==</span><span class="p">=&gt;</span><span class="w"> </span><span class="n">System</span><span class="w"> </span><span class="ss">info</span><span class="w"> </span><span class="ss">in</span><span class="w"> </span><span class="ss">version</span><span class="w"> </span><span class="s">&quot;4.23.2&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">debug</span><span class="w"> </span><span class="ss">level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">none</span><span class="w"> </span><span class="o">&lt;=</span><span class="o">==</span><span class="w">
</span><span class="ss">opt_disc</span><span class="p">.</span><span class="w"> </span><span class="n">Directory</span><span class="w"> </span><span class="s">&quot;/tmp/funky&quot;</span><span class="w"> </span><span class="ss">is</span><span class="w"> </span><span class="ss">used</span><span class="p">.</span><span class="w">
</span><span class="ss">use</span><span class="w"> </span><span class="ss">fallback</span><span class="w"> </span><span class="ss">at</span><span class="w"> </span><span class="ss">restart</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">false</span><span class="w">
</span><span class="ss">running</span><span class="w"> </span><span class="ss">db</span><span class="w"> </span><span class="nb">nodes</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="6700990882-12">[</span><span class="ss">nonode@nohost</span><span class="p" data-group-id="6700990882-12">]</span><span class="w">
</span><span class="ss">stopped</span><span class="w"> </span><span class="ss">db</span><span class="w"> </span><span class="nb">nodes</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="6700990882-13">[</span><span class="p" data-group-id="6700990882-13">]</span><span class="w">
</span><span class="ss">master</span><span class="w"> </span><span class="nb">node</span><span class="w"> </span><span class="ss">tables</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="6700990882-14">[</span><span class="p" data-group-id="6700990882-14">]</span><span class="w">
</span><span class="ss">remote</span><span class="w">             </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="6700990882-15">[</span><span class="p" data-group-id="6700990882-15">]</span><span class="w">
</span><span class="ss">ram_copies</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="6700990882-16">[</span><span class="ss">funky</span><span class="p" data-group-id="6700990882-16">]</span><span class="w">
</span><span class="ss">disc_copies</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="6700990882-17">[</span><span class="ss">schema</span><span class="p" data-group-id="6700990882-17">]</span><span class="w">
</span><span class="ss">disc_only_copies</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="6700990882-18">[</span><span class="p" data-group-id="6700990882-18">]</span><span class="w">
</span><span class="p" data-group-id="6700990882-19">[</span><span class="p" data-group-id="6700990882-20">{</span><span class="ss">nonode@nohost</span><span class="p">,</span><span class="ss">disc_copies</span><span class="p" data-group-id="6700990882-20">}</span><span class="p" data-group-id="6700990882-19">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="6700990882-21">[</span><span class="ss">schema</span><span class="p" data-group-id="6700990882-21">]</span><span class="w">
</span><span class="p" data-group-id="6700990882-22">[</span><span class="p" data-group-id="6700990882-23">{</span><span class="ss">nonode@nohost</span><span class="p">,</span><span class="ss">ram_copies</span><span class="p" data-group-id="6700990882-23">}</span><span class="p" data-group-id="6700990882-22">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="6700990882-24">[</span><span class="ss">funky</span><span class="p" data-group-id="6700990882-24">]</span><span class="w">
</span><span class="mi">3</span><span class="w"> </span><span class="ss">transactions</span><span class="w"> </span><span class="ss">committed</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="ss">aborted</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="ss">restarted</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="ss">logged</span><span class="w"> </span><span class="ss">to</span><span class="w"> </span><span class="ss">disc</span><span class="w">
</span><span class="mi">0</span><span class="w"> </span><span class="ss">held</span><span class="w"> </span><span class="ss">locks</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="ss">in</span><span class="w"> </span><span class="ss">queue</span><span class="p">;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="ss">local</span><span class="w"> </span><span class="ss">transactions</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="ss">remote</span><span class="w">
</span><span class="mi">0</span><span class="w"> </span><span class="ss">transactions</span><span class="w"> </span><span class="ss">waits</span><span class="w"> </span><span class="ss">for</span><span class="w"> </span><span class="ss">other</span><span class="w"> </span><span class="nc">nodes</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6700990882-25">[</span><span class="p" data-group-id="6700990882-25">]</span><span class="w">
</span><span class="ss">ok</span></code></pre><p>In this example, the following actions are performed:</p><ul><li><em>Step 1:</em> The Erlang system is started from the UNIX prompt with a flag
<code class="inline">-mnesia dir '&quot;/tmp/funky&quot;'</code>, which indicates in which directory to store the
data.</li><li><em>Step 2:</em> A new empty schema is initialized on the local node by evaluating
<a href="mnesia.html#create_schema/1"><code class="inline">mnesia:create_schema([node()])</code></a>. The schema
contains information about the database in general. This is explained in
detail later.</li><li><em>Step 3:</em> The DBMS is started by evaluating
<a href="mnesia.html#start/0"><code class="inline">mnesia:start()</code></a>.</li><li><em>Step 4:</em> A first table is created, called <code class="inline">funky</code>, by evaluating the
expression <a href="mnesia.html#create_table/2"><code class="inline">mnesia:create_table(funky, [])</code></a>. The
table is given default properties.</li><li><em>Step 5:</em> <a href="mnesia.html#info/0"><code class="inline">mnesia:info()</code></a> is evaluated to display information
on the terminal about the status of the database.</li></ul><h2 id="example" class="section-heading"><a href="#example" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Example</span></h2><p>A <code class="inline">Mnesia</code> database is organized as a set of tables. Each table is populated
with instances (Erlang records). A table has also a number of properties, such
as location and persistence.</p><h3 id="database" class="section-heading"><a href="#database" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Database</span></h3><p>This example shows how to create a database called <code class="inline">Company</code> and the
relationships shown in the following diagram:</p><pre><code class="mermaid">---
title: Company Entity-Relation Diagram
---

erDiagram
    Dept {
        atom id
        string name
    }

    Employee {
        int emp_no
        string name
        int salary
        atom sex
        int phone
        tuple room_no

    }

    Project {
        atom name
        int number
    }

    Dept }|--|| Employee: Manager
    Employee }|--|| Dept: At_dep
    Employee }|--|{ Project: in_proj</code></pre><p>The database model is as follows:</p><ul><li>There are three entities: department, employee, and project.</li><li>There are three relationships between these entities:<ol><li>A department is managed by an employee, hence the <code class="inline">manager</code> relationship.</li><li>An employee works at a department, hence the <code class="inline">at_dep</code> relationship.</li><li>Each employee works on a number of projects, hence the <code class="inline">in_proj</code>
relationship.</li></ol></li></ul><h3 id="defining-structure-and-content" class="section-heading"><a href="#defining-structure-and-content" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Defining Structure and Content</span></h3><p>First the record definitions are entered into a text file named <code class="inline">company.hrl</code>.
This file defines the following structure for the example database:</p><pre><code class="makeup erlang" translate="no"><span class="p">-</span><span class="na">record</span><span class="p" data-group-id="3187501284-1">(</span><span class="ss">employee</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3187501284-2">{</span><span class="ss">emp_no</span><span class="p">,</span><span class="w">
                   </span><span class="ss">name</span><span class="p">,</span><span class="w">
                   </span><span class="ss">salary</span><span class="p">,</span><span class="w">
                   </span><span class="ss">sex</span><span class="p">,</span><span class="w">
                   </span><span class="ss">phone</span><span class="p">,</span><span class="w">
                   </span><span class="ss">room_no</span><span class="p" data-group-id="3187501284-2">}</span><span class="p" data-group-id="3187501284-1">)</span><span class="p">.</span><span class="w">
</span><span class="w">
</span><span class="p">-</span><span class="na">record</span><span class="p" data-group-id="3187501284-3">(</span><span class="ss">dept</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3187501284-4">{</span><span class="ss">id</span><span class="p">,</span><span class="w">
               </span><span class="ss">name</span><span class="p" data-group-id="3187501284-4">}</span><span class="p" data-group-id="3187501284-3">)</span><span class="p">.</span><span class="w">
</span><span class="w">
</span><span class="p">-</span><span class="na">record</span><span class="p" data-group-id="3187501284-5">(</span><span class="ss">project</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3187501284-6">{</span><span class="ss">name</span><span class="p">,</span><span class="w">
                  </span><span class="ss">number</span><span class="p" data-group-id="3187501284-6">}</span><span class="p" data-group-id="3187501284-5">)</span><span class="p">.</span><span class="w">
</span><span class="w">

</span><span class="p">-</span><span class="na">record</span><span class="p" data-group-id="3187501284-7">(</span><span class="ss">manager</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3187501284-8">{</span><span class="ss">emp</span><span class="p">,</span><span class="w">
                  </span><span class="ss">dept</span><span class="p" data-group-id="3187501284-8">}</span><span class="p" data-group-id="3187501284-7">)</span><span class="p">.</span><span class="w">
</span><span class="w">
</span><span class="p">-</span><span class="na">record</span><span class="p" data-group-id="3187501284-9">(</span><span class="ss">at_dep</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3187501284-10">{</span><span class="ss">emp</span><span class="p">,</span><span class="w">
                 </span><span class="ss">dept_id</span><span class="p" data-group-id="3187501284-10">}</span><span class="p" data-group-id="3187501284-9">)</span><span class="p">.</span><span class="w">
</span><span class="w">
</span><span class="p">-</span><span class="na">record</span><span class="p" data-group-id="3187501284-11">(</span><span class="ss">in_proj</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3187501284-12">{</span><span class="ss">emp</span><span class="p">,</span><span class="w">
                  </span><span class="ss">proj_name</span><span class="p" data-group-id="3187501284-12">}</span><span class="p" data-group-id="3187501284-11">)</span><span class="p">.</span></code></pre><p>The structure defines six tables in the database. In <code class="inline">Mnesia</code>, the function
<a href="mnesia.html#create_table/2"><code class="inline">mnesia:create_table(Name, Opts)</code></a> creates tables.
<code class="inline">Name</code> is the table name.</p><section role="note" class="admonition info"><h4 class="admonition-title info">Note</h4><p>The current version of <code class="inline">Mnesia</code> does not require that the name of the table is
the same as the record name, see
<a href="mnesia_chap4.html#recordnames_tablenames">Record Names versus Table Names.</a>.</p></section><p>For example, the table for employees is created with the function
<code class="inline">mnesia:create_table(employee, [{attributes, record_info(fields, employee)}])</code>.
The table name <code class="inline">employee</code> matches the name for records specified in <code class="inline">Opts</code>.
The expression <code class="inline">record_info(fields, RecordName)</code> is processed by the Erlang
preprocessor and evaluates to a list containing the names of the different
fields for a record.</p><h3 id="program" class="section-heading"><a href="#program" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Program</span></h3><p>The following shell interaction starts <code class="inline">Mnesia</code> and initializes the schema for
the <code class="inline">Company</code> database:</p><pre><code class="makeup erlang" translate="no"><span class="c1">% erl -mnesia dir &#39;&quot;/ldisc/scratch/Mnesia.Company&quot;&#39;</span><span class="w">
</span><span class="n">Erlang</span><span class="o">/</span><span class="n">OTP</span><span class="w"> </span><span class="mi">27</span><span class="w"> </span><span class="p" data-group-id="1385233495-1">[</span><span class="ss">erts</span><span class="o">-</span><span class="mf">15.1</span><span class="p">.</span><span class="mi">2</span><span class="p" data-group-id="1385233495-1">]</span><span class="w">

</span><span class="n">Eshell</span><span class="w"> </span><span class="n">V15</span><span class="p">.</span><span class="mf">1.2</span><span class="w"> </span><span class="p" data-group-id="1385233495-2">(</span><span class="ss">press</span><span class="w"> </span><span class="n">Ctrl</span><span class="o">+</span><span class="n">G</span><span class="w"> </span><span class="ss">to</span><span class="w"> </span><span class="ss">abort</span><span class="p">,</span><span class="w"> </span><span class="ss">type</span><span class="w"> </span><span class="nf">help</span><span class="p" data-group-id="1385233495-3">(</span><span class="p" data-group-id="1385233495-3">)</span><span class="p">.</span><span class="w"> </span><span class="ss">for</span><span class="w"> </span><span class="ss">help</span><span class="p" data-group-id="1385233495-2">)</span><span class="gp unselectable">
1&gt; </span><span class="nc">mnesia</span><span class="p">:</span><span class="nf">create_schema</span><span class="p" data-group-id="1385233495-4">(</span><span class="p" data-group-id="1385233495-5">[</span><span class="nf">node</span><span class="p" data-group-id="1385233495-6">(</span><span class="p" data-group-id="1385233495-6">)</span><span class="p" data-group-id="1385233495-5">]</span><span class="p" data-group-id="1385233495-4">)</span><span class="p">.</span><span class="w">
</span><span class="ss">ok</span><span class="gp unselectable">
2&gt; </span><span class="nc">mnesia</span><span class="p">:</span><span class="nf">start</span><span class="p" data-group-id="1385233495-7">(</span><span class="p" data-group-id="1385233495-7">)</span><span class="p">.</span><span class="w">
</span><span class="ss">ok</span></code></pre><p>The following program module creates and populates previously defined tables:</p><pre><code class="makeup erlang" translate="no"><span class="p">-</span><span class="na">include_lib</span><span class="p" data-group-id="4859960896-1">(</span><span class="s">&quot;stdlib/include/qlc.hrl&quot;</span><span class="p" data-group-id="4859960896-1">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">include</span><span class="p" data-group-id="4859960896-2">(</span><span class="s">&quot;company.hrl&quot;</span><span class="p" data-group-id="4859960896-2">)</span><span class="p">.</span><span class="w">

</span><span class="nf">init</span><span class="p" data-group-id="4859960896-3">(</span><span class="p" data-group-id="4859960896-3">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nc">mnesia</span><span class="p">:</span><span class="nf">create_table</span><span class="p" data-group-id="4859960896-4">(</span><span class="ss">employee</span><span class="p">,</span><span class="w">
                        </span><span class="p" data-group-id="4859960896-5">[</span><span class="p" data-group-id="4859960896-6">{</span><span class="ss">attributes</span><span class="p">,</span><span class="w"> </span><span class="nf">record_info</span><span class="p" data-group-id="4859960896-7">(</span><span class="ss">fields</span><span class="p">,</span><span class="w"> </span><span class="ss">employee</span><span class="p" data-group-id="4859960896-7">)</span><span class="p" data-group-id="4859960896-6">}</span><span class="p" data-group-id="4859960896-5">]</span><span class="p" data-group-id="4859960896-4">)</span><span class="p">,</span><span class="w">
    </span><span class="nc">mnesia</span><span class="p">:</span><span class="nf">create_table</span><span class="p" data-group-id="4859960896-8">(</span><span class="ss">dept</span><span class="p">,</span><span class="w">
                        </span><span class="p" data-group-id="4859960896-9">[</span><span class="p" data-group-id="4859960896-10">{</span><span class="ss">attributes</span><span class="p">,</span><span class="w"> </span><span class="nf">record_info</span><span class="p" data-group-id="4859960896-11">(</span><span class="ss">fields</span><span class="p">,</span><span class="w"> </span><span class="ss">dept</span><span class="p" data-group-id="4859960896-11">)</span><span class="p" data-group-id="4859960896-10">}</span><span class="p" data-group-id="4859960896-9">]</span><span class="p" data-group-id="4859960896-8">)</span><span class="p">,</span><span class="w">
    </span><span class="nc">mnesia</span><span class="p">:</span><span class="nf">create_table</span><span class="p" data-group-id="4859960896-12">(</span><span class="ss">project</span><span class="p">,</span><span class="w">
                        </span><span class="p" data-group-id="4859960896-13">[</span><span class="p" data-group-id="4859960896-14">{</span><span class="ss">attributes</span><span class="p">,</span><span class="w"> </span><span class="nf">record_info</span><span class="p" data-group-id="4859960896-15">(</span><span class="ss">fields</span><span class="p">,</span><span class="w"> </span><span class="ss">project</span><span class="p" data-group-id="4859960896-15">)</span><span class="p" data-group-id="4859960896-14">}</span><span class="p" data-group-id="4859960896-13">]</span><span class="p" data-group-id="4859960896-12">)</span><span class="p">,</span><span class="w">
    </span><span class="nc">mnesia</span><span class="p">:</span><span class="nf">create_table</span><span class="p" data-group-id="4859960896-16">(</span><span class="ss">manager</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4859960896-17">[</span><span class="p" data-group-id="4859960896-18">{</span><span class="ss">type</span><span class="p">,</span><span class="w"> </span><span class="ss">bag</span><span class="p" data-group-id="4859960896-18">}</span><span class="p">,</span><span class="w">
                                  </span><span class="p" data-group-id="4859960896-19">{</span><span class="ss">attributes</span><span class="p">,</span><span class="w"> </span><span class="nf">record_info</span><span class="p" data-group-id="4859960896-20">(</span><span class="ss">fields</span><span class="p">,</span><span class="w"> </span><span class="ss">manager</span><span class="p" data-group-id="4859960896-20">)</span><span class="p" data-group-id="4859960896-19">}</span><span class="p" data-group-id="4859960896-17">]</span><span class="p" data-group-id="4859960896-16">)</span><span class="p">,</span><span class="w">
    </span><span class="nc">mnesia</span><span class="p">:</span><span class="nf">create_table</span><span class="p" data-group-id="4859960896-21">(</span><span class="ss">at_dep</span><span class="p">,</span><span class="w">
                         </span><span class="p" data-group-id="4859960896-22">[</span><span class="p" data-group-id="4859960896-23">{</span><span class="ss">attributes</span><span class="p">,</span><span class="w"> </span><span class="nf">record_info</span><span class="p" data-group-id="4859960896-24">(</span><span class="ss">fields</span><span class="p">,</span><span class="w"> </span><span class="ss">at_dep</span><span class="p" data-group-id="4859960896-24">)</span><span class="p" data-group-id="4859960896-23">}</span><span class="p" data-group-id="4859960896-22">]</span><span class="p" data-group-id="4859960896-21">)</span><span class="p">,</span><span class="w">
    </span><span class="nc">mnesia</span><span class="p">:</span><span class="nf">create_table</span><span class="p" data-group-id="4859960896-25">(</span><span class="ss">in_proj</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4859960896-26">[</span><span class="p" data-group-id="4859960896-27">{</span><span class="ss">type</span><span class="p">,</span><span class="w"> </span><span class="ss">bag</span><span class="p" data-group-id="4859960896-27">}</span><span class="p">,</span><span class="w">
                                  </span><span class="p" data-group-id="4859960896-28">{</span><span class="ss">attributes</span><span class="p">,</span><span class="w"> </span><span class="nf">record_info</span><span class="p" data-group-id="4859960896-29">(</span><span class="ss">fields</span><span class="p">,</span><span class="w"> </span><span class="ss">in_proj</span><span class="p" data-group-id="4859960896-29">)</span><span class="p" data-group-id="4859960896-28">}</span><span class="p" data-group-id="4859960896-26">]</span><span class="p" data-group-id="4859960896-25">)</span><span class="p">.</span></code></pre><h3 id="program-explained" class="section-heading"><a href="#program-explained" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Program Explained</span></h3><p>The following commands and functions are used to initiate the <code class="inline">Company</code>
database:</p><ul><li><code class="inline">% erl -mnesia dir '&quot;/ldisc/scratch/Mnesia.Company&quot;'</code>. This is a UNIX
command-line entry that starts the Erlang system. The flag <code class="inline">-mnesia dir Dir</code>
specifies the location of the database directory. The system responds and
waits for further input with the prompt <code class="inline">1&gt;</code>.</li><li><a href="mnesia.html#create_schema/1"><code class="inline">mnesia:create_schema([node()])</code></a>. This function has
the format <code class="inline">mnesia:create_schema(DiscNodeList)</code> and initiates a new schema. In
this example, a non-distributed system using only one node is created. Schemas
are fully explained in <a href="mnesia_chap3.html#def_schema">Define a Schema</a>.</li><li><a href="mnesia.html#start/0"><code class="inline">mnesia:start()</code></a>. This function starts <code class="inline">Mnesia</code> and is fully
explained in <a href="mnesia_chap3.html#start_mnesia">Start Mnesia</a>.</li></ul><p>Continuing the dialogue with the Erlang shell produces the following:</p><pre><code class="makeup erlang" translate="no"><span class="gp unselectable">3&gt; </span><span class="nc">company</span><span class="p">:</span><span class="nf">init</span><span class="p" data-group-id="9086502750-1">(</span><span class="p" data-group-id="9086502750-1">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="9086502750-2">{</span><span class="ss">atomic</span><span class="p">,</span><span class="ss">ok</span><span class="p" data-group-id="9086502750-2">}</span><span class="gp unselectable">
4&gt; </span><span class="nc">mnesia</span><span class="p">:</span><span class="nf">info</span><span class="p" data-group-id="9086502750-3">(</span><span class="p" data-group-id="9086502750-3">)</span><span class="p">.</span><span class="w">
</span><span class="o">--</span><span class="p">-&gt;</span><span class="w"> </span><span class="n">Processes</span><span class="w"> </span><span class="ss">holding</span><span class="w"> </span><span class="ss">locks</span><span class="w"> </span><span class="o">&lt;-</span><span class="o">--</span><span class="w"> 
</span><span class="o">--</span><span class="p">-&gt;</span><span class="w"> </span><span class="n">Processes</span><span class="w"> </span><span class="ss">waiting</span><span class="w"> </span><span class="ss">for</span><span class="w"> </span><span class="ss">locks</span><span class="w"> </span><span class="o">&lt;-</span><span class="o">--</span><span class="w"> 
</span><span class="o">--</span><span class="p">-&gt;</span><span class="w"> </span><span class="n">Participant</span><span class="w"> </span><span class="ss">transactions</span><span class="w"> </span><span class="o">&lt;-</span><span class="o">--</span><span class="w"> 
</span><span class="o">--</span><span class="p">-&gt;</span><span class="w"> </span><span class="n">Coordinator</span><span class="w"> </span><span class="ss">transactions</span><span class="w"> </span><span class="o">&lt;-</span><span class="o">--</span><span class="w">
</span><span class="o">--</span><span class="p">-&gt;</span><span class="w"> </span><span class="n">Uncertain</span><span class="w"> </span><span class="ss">transactions</span><span class="w"> </span><span class="o">&lt;-</span><span class="o">--</span><span class="w"> 
</span><span class="o">--</span><span class="p">-&gt;</span><span class="w"> </span><span class="n">Active</span><span class="w"> </span><span class="ss">tables</span><span class="w"> </span><span class="o">&lt;-</span><span class="o">--</span><span class="w"> 
</span><span class="ss">in_proj</span><span class="w">        </span><span class="p">:</span><span class="w"> </span><span class="ss">with</span><span class="w"> </span><span class="mi">0</span><span class="w">        </span><span class="ss">records</span><span class="w"> </span><span class="ss">occupying</span><span class="w"> </span><span class="mi">305</span><span class="w">      </span><span class="ss">words</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="ss">mem</span><span class="w">
</span><span class="ss">at_dep</span><span class="w">         </span><span class="p">:</span><span class="w"> </span><span class="ss">with</span><span class="w"> </span><span class="mi">0</span><span class="w">        </span><span class="ss">records</span><span class="w"> </span><span class="ss">occupying</span><span class="w"> </span><span class="mi">305</span><span class="w">      </span><span class="ss">words</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="ss">mem</span><span class="w">
</span><span class="ss">manager</span><span class="w">        </span><span class="p">:</span><span class="w"> </span><span class="ss">with</span><span class="w"> </span><span class="mi">0</span><span class="w">        </span><span class="ss">records</span><span class="w"> </span><span class="ss">occupying</span><span class="w"> </span><span class="mi">305</span><span class="w">      </span><span class="ss">words</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="ss">mem</span><span class="w">
</span><span class="ss">project</span><span class="w">        </span><span class="p">:</span><span class="w"> </span><span class="ss">with</span><span class="w"> </span><span class="mi">0</span><span class="w">        </span><span class="ss">records</span><span class="w"> </span><span class="ss">occupying</span><span class="w"> </span><span class="mi">305</span><span class="w">      </span><span class="ss">words</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="ss">mem</span><span class="w">
</span><span class="ss">dept</span><span class="w">           </span><span class="p">:</span><span class="w"> </span><span class="ss">with</span><span class="w"> </span><span class="mi">0</span><span class="w">        </span><span class="ss">records</span><span class="w"> </span><span class="ss">occupying</span><span class="w"> </span><span class="mi">305</span><span class="w">      </span><span class="ss">words</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="ss">mem</span><span class="w">
</span><span class="ss">employee</span><span class="w">       </span><span class="p">:</span><span class="w"> </span><span class="ss">with</span><span class="w"> </span><span class="mi">0</span><span class="w">        </span><span class="ss">records</span><span class="w"> </span><span class="ss">occupying</span><span class="w"> </span><span class="mi">305</span><span class="w">      </span><span class="ss">words</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="ss">mem</span><span class="w">
</span><span class="ss">schema</span><span class="w">         </span><span class="p">:</span><span class="w"> </span><span class="ss">with</span><span class="w"> </span><span class="mi">7</span><span class="w">        </span><span class="ss">records</span><span class="w"> </span><span class="ss">occupying</span><span class="w"> </span><span class="mi">1136</span><span class="w">     </span><span class="ss">words</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="ss">mem</span><span class="w">
</span><span class="o">==</span><span class="p">=&gt;</span><span class="w"> </span><span class="n">System</span><span class="w"> </span><span class="ss">info</span><span class="w"> </span><span class="ss">in</span><span class="w"> </span><span class="ss">version</span><span class="w"> </span><span class="s">&quot;4.23.2&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">debug</span><span class="w"> </span><span class="ss">level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">none</span><span class="w"> </span><span class="o">&lt;=</span><span class="o">==</span><span class="w">
</span><span class="ss">opt_disc</span><span class="p">.</span><span class="w"> </span><span class="n">Directory</span><span class="w"> </span><span class="s">&quot;/ldisc/scratch/Mnesia.Company&quot;</span><span class="w"> </span><span class="ss">is</span><span class="w"> </span><span class="ss">used</span><span class="p">.</span><span class="w">
</span><span class="ss">use</span><span class="w"> </span><span class="ss">fallback</span><span class="w"> </span><span class="ss">at</span><span class="w"> </span><span class="ss">restart</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">false</span><span class="w">
</span><span class="ss">running</span><span class="w"> </span><span class="ss">db</span><span class="w"> </span><span class="nb">nodes</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="9086502750-4">[</span><span class="ss">nonode@nohost</span><span class="p" data-group-id="9086502750-4">]</span><span class="w">
</span><span class="ss">stopped</span><span class="w"> </span><span class="ss">db</span><span class="w"> </span><span class="nb">nodes</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="9086502750-5">[</span><span class="p" data-group-id="9086502750-5">]</span><span class="w">
</span><span class="ss">master</span><span class="w"> </span><span class="nb">node</span><span class="w"> </span><span class="ss">tables</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="9086502750-6">[</span><span class="p" data-group-id="9086502750-6">]</span><span class="w">
</span><span class="ss">remote</span><span class="w">             </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="9086502750-7">[</span><span class="p" data-group-id="9086502750-7">]</span><span class="w">
</span><span class="ss">ram_copies</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="9086502750-8">[</span><span class="ss">at_dep</span><span class="p">,</span><span class="ss">dept</span><span class="p">,</span><span class="ss">employee</span><span class="p">,</span><span class="ss">in_proj</span><span class="p">,</span><span class="ss">manager</span><span class="p">,</span><span class="ss">project</span><span class="p" data-group-id="9086502750-8">]</span><span class="w">
</span><span class="ss">disc_copies</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="9086502750-9">[</span><span class="ss">schema</span><span class="p" data-group-id="9086502750-9">]</span><span class="w">
</span><span class="ss">disc_only_copies</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="9086502750-10">[</span><span class="p" data-group-id="9086502750-10">]</span><span class="w">
</span><span class="p" data-group-id="9086502750-11">[</span><span class="p" data-group-id="9086502750-12">{</span><span class="ss">nonode@nohost</span><span class="p">,</span><span class="ss">disc_copies</span><span class="p" data-group-id="9086502750-12">}</span><span class="p" data-group-id="9086502750-11">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="9086502750-13">[</span><span class="ss">schema</span><span class="p" data-group-id="9086502750-13">]</span><span class="w">
</span><span class="p" data-group-id="9086502750-14">[</span><span class="p" data-group-id="9086502750-15">{</span><span class="ss">nonode@nohost</span><span class="p">,</span><span class="ss">ram_copies</span><span class="p" data-group-id="9086502750-15">}</span><span class="p" data-group-id="9086502750-14">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="9086502750-16">[</span><span class="ss">employee</span><span class="p">,</span><span class="ss">dept</span><span class="p">,</span><span class="ss">project</span><span class="p">,</span><span class="ss">manager</span><span class="p">,</span><span class="ss">at_dep</span><span class="p">,</span><span class="ss">in_proj</span><span class="p" data-group-id="9086502750-16">]</span><span class="w">
</span><span class="mi">8</span><span class="w"> </span><span class="ss">transactions</span><span class="w"> </span><span class="ss">committed</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="ss">aborted</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="ss">restarted</span><span class="p">,</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="ss">logged</span><span class="w"> </span><span class="ss">to</span><span class="w"> </span><span class="ss">disc</span><span class="w">
</span><span class="mi">0</span><span class="w"> </span><span class="ss">held</span><span class="w"> </span><span class="ss">locks</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="ss">in</span><span class="w"> </span><span class="ss">queue</span><span class="p">;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="ss">local</span><span class="w"> </span><span class="ss">transactions</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="ss">remote</span><span class="w">
</span><span class="mi">0</span><span class="w"> </span><span class="ss">transactions</span><span class="w"> </span><span class="ss">waits</span><span class="w"> </span><span class="ss">for</span><span class="w"> </span><span class="ss">other</span><span class="w"> </span><span class="nc">nodes</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9086502750-17">[</span><span class="p" data-group-id="9086502750-17">]</span><span class="w">
</span><span class="ss">ok</span></code></pre><p>A set of tables is created. The function
<a href="mnesia.html#create_table/2"><code class="inline">mnesia:create_table(Name, Opts)</code></a> creates the
required database tables. The options available with <code class="inline">Opts</code> are explained in
<a href="mnesia_chap3.html#create_tables">Create New Tables</a>.</p><p>The function <code class="inline">company:init/0</code> creates the tables. Two tables are of type <code class="inline">bag</code>.
This is the <code class="inline">manager</code> relation as well the <code class="inline">in_proj</code> relation. This is
interpreted as: an employee can be manager over several departments, and an
employee can participate in several projects. However, the <code class="inline">at_dep</code> relation is
<code class="inline">set</code>, as an employee can only work in one department. In this data model, there
are examples of relations that are 1-to-1 (<code class="inline">set</code>) and 1-to-many (<code class="inline">bag</code>).</p><p><a href="mnesia.html#info/0"><code class="inline">mnesia:info()</code></a> now indicates that a database has seven local
tables, where six are the user-defined tables and one is the schema. Six
transactions have been committed, as six successful transactions were run when
creating the tables.</p><p>To write a function that inserts an employee record into the database, there
must be an <code class="inline">at_dep</code> record and a set of <code class="inline">in_proj</code> records inserted. Examine the
following code used to complete this action:</p><pre><code class="makeup erlang" translate="no"><span class="nf">insert_emp</span><span class="p" data-group-id="1871808719-1">(</span><span class="n">Emp</span><span class="p">,</span><span class="w"> </span><span class="n">DeptId</span><span class="p">,</span><span class="w"> </span><span class="n">ProjNames</span><span class="p" data-group-id="1871808719-1">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="n">Ename</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Emp</span><span class="o">#</span><span class="ss">employee</span><span class="p">.</span><span class="ss">name</span><span class="p">,</span><span class="w">
    </span><span class="n">Fun</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">fun</span><span class="p" data-group-id="1871808719-2">(</span><span class="p" data-group-id="1871808719-2">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
                  </span><span class="nc">mnesia</span><span class="p">:</span><span class="nf">write</span><span class="p" data-group-id="1871808719-3">(</span><span class="n">Emp</span><span class="p" data-group-id="1871808719-3">)</span><span class="p">,</span><span class="w">
                  </span><span class="n">AtDep</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">#</span><span class="ss">at_dep</span><span class="p" data-group-id="1871808719-4">{</span><span class="ss">emp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Ename</span><span class="p">,</span><span class="w"> </span><span class="ss">dept_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DeptId</span><span class="p" data-group-id="1871808719-4">}</span><span class="p">,</span><span class="w">
                  </span><span class="nc">mnesia</span><span class="p">:</span><span class="nf">write</span><span class="p" data-group-id="1871808719-5">(</span><span class="n">AtDep</span><span class="p" data-group-id="1871808719-5">)</span><span class="p">,</span><span class="w">
                  </span><span class="nf">mk_projs</span><span class="p" data-group-id="1871808719-6">(</span><span class="n">Ename</span><span class="p">,</span><span class="w"> </span><span class="n">ProjNames</span><span class="p" data-group-id="1871808719-6">)</span><span class="w">
          </span><span class="k">end</span><span class="p">,</span><span class="w">
    </span><span class="nc">mnesia</span><span class="p">:</span><span class="nf">transaction</span><span class="p" data-group-id="1871808719-7">(</span><span class="n">Fun</span><span class="p" data-group-id="1871808719-7">)</span><span class="p">.</span><span class="w">


</span><span class="nf">mk_projs</span><span class="p" data-group-id="1871808719-8">(</span><span class="n">Ename</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1871808719-9">[</span><span class="n">ProjName</span><span class="p">|</span><span class="n">Tail</span><span class="p" data-group-id="1871808719-9">]</span><span class="p" data-group-id="1871808719-8">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nc">mnesia</span><span class="p">:</span><span class="nf">write</span><span class="p" data-group-id="1871808719-10">(</span><span class="o">#</span><span class="ss">in_proj</span><span class="p" data-group-id="1871808719-11">{</span><span class="ss">emp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Ename</span><span class="p">,</span><span class="w"> </span><span class="ss">proj_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ProjName</span><span class="p" data-group-id="1871808719-11">}</span><span class="p" data-group-id="1871808719-10">)</span><span class="p">,</span><span class="w">
    </span><span class="nf">mk_projs</span><span class="p" data-group-id="1871808719-12">(</span><span class="n">Ename</span><span class="p">,</span><span class="w"> </span><span class="n">Tail</span><span class="p" data-group-id="1871808719-12">)</span><span class="p">;</span><span class="w">
</span><span class="nf">mk_projs</span><span class="p" data-group-id="1871808719-13">(</span><span class="p">_</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1871808719-14">[</span><span class="p" data-group-id="1871808719-14">]</span><span class="p" data-group-id="1871808719-13">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="ss">ok</span><span class="p">.</span></code></pre><ul><li>The <code class="inline">insert_emp/3</code> arguments are as follows:<ol><li><code class="inline">Emp</code> is an employee record.</li><li><code class="inline">DeptId</code> is the identity of the department where the employee works.</li><li><code class="inline">ProjNames</code> is a list of the names of the projects where the employee
works.</li></ol></li></ul><p>The function <code class="inline">insert_emp/3</code> creates a Functional Object (Fun). <code class="inline">Fun</code> is passed
as a single argument to the function
<a href="mnesia.html#transaction/1"><code class="inline">mnesia:transaction(Fun)</code></a>. This means that <code class="inline">Fun</code> is run
as a transaction with the following properties:</p><ul><li>A <code class="inline">Fun</code> either succeeds or fails.</li><li>Code that manipulates the same data records can be run concurrently without
the different processes interfering with each other.</li></ul><p>The function can be used as follows:</p><pre><code class="makeup erlang" translate="no"><span class="n">Emp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">#</span><span class="ss">employee</span><span class="p" data-group-id="3368577551-1">{</span><span class="ss">emp_no</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">104732</span><span class="p">,</span><span class="w">
                </span><span class="ss">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">klacke</span><span class="p">,</span><span class="w">
                </span><span class="ss">salary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
                </span><span class="ss">sex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">male</span><span class="p">,</span><span class="w">
                </span><span class="ss">phone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">98108</span><span class="p">,</span><span class="w">
                </span><span class="ss">room_no</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="3368577551-2">{</span><span class="mi">221</span><span class="p">,</span><span class="w"> </span><span class="mi">015</span><span class="p" data-group-id="3368577551-2">}</span><span class="p" data-group-id="3368577551-1">}</span><span class="p">,</span><span class="w">
</span><span class="nf">insert_emp</span><span class="p" data-group-id="3368577551-3">(</span><span class="n">Emp</span><span class="p">,</span><span class="w"> </span><span class="ss">&#39;B/SFR&#39;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3368577551-4">[</span><span class="n">Erlang</span><span class="p">,</span><span class="w"> </span><span class="ss">mnesia</span><span class="p">,</span><span class="w"> </span><span class="ss">otp</span><span class="p" data-group-id="3368577551-4">]</span><span class="p" data-group-id="3368577551-3">)</span><span class="p">.</span></code></pre><section role="note" class="admonition info"><h4 class="admonition-title info">Note</h4><p>For information about Funs, see &quot;Fun Expressions&quot; in section
<code class="inline">Erlang Reference Manual</code> in System Documentation..</p></section><h3 id="initial-database-content" class="section-heading"><a href="#initial-database-content" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Initial Database Content</span></h3><p>After the insertion of the employee named <code class="inline">klacke</code>, the database has the
following records:</p><table id="table2_1"><thead><tr><th style="text-align: left;">emp_no</th><th style="text-align: left;">name</th><th style="text-align: left;">salary</th><th style="text-align: left;">sex</th><th style="text-align: left;">phone</th><th style="text-align: left;">room_no</th></tr></thead><tbody><tr><td style="text-align: left;">104732</td><td style="text-align: left;">klacke</td><td style="text-align: left;">7</td><td style="text-align: left;">male</td><td style="text-align: left;">98108</td><td style="text-align: left;">{221, 015}</td></tr></tbody></table><p><em>Table: employee Database Record</em></p><p>This <code class="inline">employee</code> record has the Erlang record/tuple representation
<code class="inline">{employee, 104732, klacke, 7, male, 98108, {221, 015}}</code>.</p><table id="table2_2"><thead><tr><th style="text-align: left;">emp</th><th style="text-align: left;">dept_name</th></tr></thead><tbody><tr><td style="text-align: left;">klacke</td><td style="text-align: left;">B/SFR</td></tr></tbody></table><p><em>Table: at_dep Database Record</em></p><p>This <code class="inline">at_dep</code> record has the Erlang tuple representation
<code class="inline">{at_dep, klacke, 'B/SFR'}</code>.</p><table id="table3_3"><thead><tr><th style="text-align: left;">emp</th><th style="text-align: left;">proj_name</th></tr></thead><tbody><tr><td style="text-align: left;">klacke</td><td style="text-align: left;">Erlang</td></tr><tr><td style="text-align: left;">klacke</td><td style="text-align: left;">otp</td></tr><tr><td style="text-align: left;">klacke</td><td style="text-align: left;">mnesia</td></tr></tbody></table><p><em>Table: in_proj Database Record</em></p><p>This <code class="inline">in_proj</code> record has the Erlang tuple representation
<code class="inline">{in_proj, klacke, 'Erlang', klacke, 'otp', klacke, 'mnesia'}</code>.</p><p>There is no difference between rows in a table and <code class="inline">Mnesia</code> records. Both
concepts are the same and are used interchangeably throughout this User's Guide.</p><p>A <code class="inline">Mnesia</code> table is populated by <code class="inline">Mnesia</code> records. For example, the tuple
<code class="inline">{boss, klacke, bjarne}</code> is a record. The second element in this tuple is the
key. To identify a table uniquely, both the key and the table name is needed.
The term Object Identifier (OID) is sometimes used for the arity two tuple
<code class="inline">{Tab, Key}</code>. The OID for the record <code class="inline">{boss, klacke, bjarne}</code> is the arity two
tuple <code class="inline">{boss, klacke}</code>. The first element of the tuple is the type of the record
and the second element is the key. An OID can lead to zero, one, or more records
depending on whether the table type is <code class="inline">set</code> or <code class="inline">bag</code>.</p><p>The record <code class="inline">{boss, klacke, bjarne}</code> can also be inserted. This record contains
an implicit reference to another employee that does not yet exist in the
database. <code class="inline">Mnesia</code> does not enforce this.</p><h3 id="adding-records-and-relationships-to-database" class="section-heading"><a href="#adding-records-and-relationships-to-database" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Adding Records and Relationships to Database</span></h3><p>After adding more records to the <code class="inline">Company</code> database, the result can be the
following records:</p><p><code class="inline">employees</code>:</p><pre><code class="makeup erlang" translate="no"><span class="p" data-group-id="7322010897-1">{</span><span class="ss">employee</span><span class="p">,</span><span class="w"> </span><span class="mi">104465</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Johnson Torbjorn&quot;</span><span class="p">,</span><span class="w">   </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">male</span><span class="p">,</span><span class="w">  </span><span class="mi">99184</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7322010897-2">{</span><span class="mi">242</span><span class="p">,</span><span class="mi">038</span><span class="p" data-group-id="7322010897-2">}</span><span class="p" data-group-id="7322010897-1">}</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="7322010897-3">{</span><span class="ss">employee</span><span class="p">,</span><span class="w"> </span><span class="mi">107912</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Carlsson Tuula&quot;</span><span class="p">,</span><span class="w">     </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">female</span><span class="p">,</span><span class="mi">94556</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7322010897-4">{</span><span class="mi">242</span><span class="p">,</span><span class="mi">056</span><span class="p" data-group-id="7322010897-4">}</span><span class="p" data-group-id="7322010897-3">}</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="7322010897-5">{</span><span class="ss">employee</span><span class="p">,</span><span class="w"> </span><span class="mi">114872</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Dacker Bjarne&quot;</span><span class="p">,</span><span class="w">      </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="ss">male</span><span class="p">,</span><span class="w">  </span><span class="mi">99415</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7322010897-6">{</span><span class="mi">221</span><span class="p">,</span><span class="mi">035</span><span class="p" data-group-id="7322010897-6">}</span><span class="p" data-group-id="7322010897-5">}</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="7322010897-7">{</span><span class="ss">employee</span><span class="p">,</span><span class="w"> </span><span class="mi">104531</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Nilsson Hans&quot;</span><span class="p">,</span><span class="w">       </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="ss">male</span><span class="p">,</span><span class="w">  </span><span class="mi">99495</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7322010897-8">{</span><span class="mi">222</span><span class="p">,</span><span class="mi">026</span><span class="p" data-group-id="7322010897-8">}</span><span class="p" data-group-id="7322010897-7">}</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="7322010897-9">{</span><span class="ss">employee</span><span class="p">,</span><span class="w"> </span><span class="mi">104659</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Tornkvist Torbjorn&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">male</span><span class="p">,</span><span class="w">  </span><span class="mi">99514</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7322010897-10">{</span><span class="mi">222</span><span class="p">,</span><span class="mi">022</span><span class="p" data-group-id="7322010897-10">}</span><span class="p" data-group-id="7322010897-9">}</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="7322010897-11">{</span><span class="ss">employee</span><span class="p">,</span><span class="w"> </span><span class="mi">104732</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Wikstrom Claes&quot;</span><span class="p">,</span><span class="w">     </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">male</span><span class="p">,</span><span class="w">  </span><span class="mi">99586</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7322010897-12">{</span><span class="mi">221</span><span class="p">,</span><span class="mi">015</span><span class="p" data-group-id="7322010897-12">}</span><span class="p" data-group-id="7322010897-11">}</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="7322010897-13">{</span><span class="ss">employee</span><span class="p">,</span><span class="w"> </span><span class="mi">117716</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Fedoriw Anna&quot;</span><span class="p">,</span><span class="w">       </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">female</span><span class="p">,</span><span class="mi">99143</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7322010897-14">{</span><span class="mi">221</span><span class="p">,</span><span class="mi">031</span><span class="p" data-group-id="7322010897-14">}</span><span class="p" data-group-id="7322010897-13">}</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="7322010897-15">{</span><span class="ss">employee</span><span class="p">,</span><span class="w"> </span><span class="mi">115018</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Mattsson Hakan&quot;</span><span class="p">,</span><span class="w">     </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="ss">male</span><span class="p">,</span><span class="w">  </span><span class="mi">99251</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7322010897-16">{</span><span class="mi">203</span><span class="p">,</span><span class="mi">348</span><span class="p" data-group-id="7322010897-16">}</span><span class="p" data-group-id="7322010897-15">}</span><span class="p">.</span></code></pre><p><code class="inline">dept</code>:</p><pre><code class="makeup erlang" translate="no"><span class="p" data-group-id="9546567151-1">{</span><span class="ss">dept</span><span class="p">,</span><span class="w"> </span><span class="ss">&#39;B/SF&#39;</span><span class="p">,</span><span class="w">  </span><span class="s">&quot;Open Telecom Platform&quot;</span><span class="p" data-group-id="9546567151-1">}</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="9546567151-2">{</span><span class="ss">dept</span><span class="p">,</span><span class="w"> </span><span class="ss">&#39;B/SFP&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;OTP - Product Development&quot;</span><span class="p" data-group-id="9546567151-2">}</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="9546567151-3">{</span><span class="ss">dept</span><span class="p">,</span><span class="w"> </span><span class="ss">&#39;B/SFR&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Computer Science Laboratory&quot;</span><span class="p" data-group-id="9546567151-3">}</span><span class="p">.</span></code></pre><p><code class="inline">projects</code>:</p><pre><code class="makeup erlang" translate="no"><span class="c1">%% projects</span><span class="w">
</span><span class="p" data-group-id="0588701633-1">{</span><span class="ss">project</span><span class="p">,</span><span class="w"> </span><span class="ss">erlang</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="0588701633-1">}</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="0588701633-2">{</span><span class="ss">project</span><span class="p">,</span><span class="w"> </span><span class="ss">otp</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="0588701633-2">}</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="0588701633-3">{</span><span class="ss">project</span><span class="p">,</span><span class="w"> </span><span class="ss">beam</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="0588701633-3">}</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="0588701633-4">{</span><span class="ss">project</span><span class="p">,</span><span class="w"> </span><span class="ss">mnesia</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p" data-group-id="0588701633-4">}</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="0588701633-5">{</span><span class="ss">project</span><span class="p">,</span><span class="w"> </span><span class="ss">wolf</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p" data-group-id="0588701633-5">}</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="0588701633-6">{</span><span class="ss">project</span><span class="p">,</span><span class="w"> </span><span class="ss">documentation</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p" data-group-id="0588701633-6">}</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="0588701633-7">{</span><span class="ss">project</span><span class="p">,</span><span class="w"> </span><span class="ss">www</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p" data-group-id="0588701633-7">}</span><span class="p">.</span></code></pre><p>These three tables, <code class="inline">employees</code>, <code class="inline">dept</code>, and <code class="inline">projects</code>, are made up of real
records. The following database content is stored in the tables and is built on
relationships. These tables are <code class="inline">manager</code>, <code class="inline">at_dep</code>, and <code class="inline">in_proj</code>.</p><p><code class="inline">manager</code>:</p><pre><code class="makeup erlang" translate="no"><span class="p" data-group-id="5012186339-1">{</span><span class="ss">manager</span><span class="p">,</span><span class="w"> </span><span class="mi">104465</span><span class="p">,</span><span class="w"> </span><span class="ss">&#39;B/SF&#39;</span><span class="p" data-group-id="5012186339-1">}</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="5012186339-2">{</span><span class="ss">manager</span><span class="p">,</span><span class="w"> </span><span class="mi">104465</span><span class="p">,</span><span class="w"> </span><span class="ss">&#39;B/SFP&#39;</span><span class="p" data-group-id="5012186339-2">}</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="5012186339-3">{</span><span class="ss">manager</span><span class="p">,</span><span class="w"> </span><span class="mi">114872</span><span class="p">,</span><span class="w"> </span><span class="ss">&#39;B/SFR&#39;</span><span class="p" data-group-id="5012186339-3">}</span><span class="p">.</span></code></pre><p><code class="inline">at_dep</code>:</p><pre><code class="makeup erlang" translate="no"><span class="p" data-group-id="5138056939-1">{</span><span class="ss">at_dep</span><span class="p">,</span><span class="w"> </span><span class="mi">104465</span><span class="p">,</span><span class="w"> </span><span class="ss">&#39;B/SF&#39;</span><span class="p" data-group-id="5138056939-1">}</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="5138056939-2">{</span><span class="ss">at_dep</span><span class="p">,</span><span class="w"> </span><span class="mi">107912</span><span class="p">,</span><span class="w"> </span><span class="ss">&#39;B/SF&#39;</span><span class="p" data-group-id="5138056939-2">}</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="5138056939-3">{</span><span class="ss">at_dep</span><span class="p">,</span><span class="w"> </span><span class="mi">114872</span><span class="p">,</span><span class="w"> </span><span class="ss">&#39;B/SFR&#39;</span><span class="p" data-group-id="5138056939-3">}</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="5138056939-4">{</span><span class="ss">at_dep</span><span class="p">,</span><span class="w"> </span><span class="mi">104531</span><span class="p">,</span><span class="w"> </span><span class="ss">&#39;B/SFR&#39;</span><span class="p" data-group-id="5138056939-4">}</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="5138056939-5">{</span><span class="ss">at_dep</span><span class="p">,</span><span class="w"> </span><span class="mi">104659</span><span class="p">,</span><span class="w"> </span><span class="ss">&#39;B/SFR&#39;</span><span class="p" data-group-id="5138056939-5">}</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="5138056939-6">{</span><span class="ss">at_dep</span><span class="p">,</span><span class="w"> </span><span class="mi">104732</span><span class="p">,</span><span class="w"> </span><span class="ss">&#39;B/SFR&#39;</span><span class="p" data-group-id="5138056939-6">}</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="5138056939-7">{</span><span class="ss">at_dep</span><span class="p">,</span><span class="w"> </span><span class="mi">117716</span><span class="p">,</span><span class="w"> </span><span class="ss">&#39;B/SFP&#39;</span><span class="p" data-group-id="5138056939-7">}</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="5138056939-8">{</span><span class="ss">at_dep</span><span class="p">,</span><span class="w"> </span><span class="mi">115018</span><span class="p">,</span><span class="w"> </span><span class="ss">&#39;B/SFP&#39;</span><span class="p" data-group-id="5138056939-8">}</span><span class="p">.</span></code></pre><p><code class="inline">in_proj</code>:</p><pre><code class="makeup erlang" translate="no"><span class="p" data-group-id="3898968894-1">{</span><span class="ss">in_proj</span><span class="p">,</span><span class="w"> </span><span class="mi">104465</span><span class="p">,</span><span class="w"> </span><span class="ss">otp</span><span class="p" data-group-id="3898968894-1">}</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="3898968894-2">{</span><span class="ss">in_proj</span><span class="p">,</span><span class="w"> </span><span class="mi">107912</span><span class="p">,</span><span class="w"> </span><span class="ss">otp</span><span class="p" data-group-id="3898968894-2">}</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="3898968894-3">{</span><span class="ss">in_proj</span><span class="p">,</span><span class="w"> </span><span class="mi">114872</span><span class="p">,</span><span class="w"> </span><span class="ss">otp</span><span class="p" data-group-id="3898968894-3">}</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="3898968894-4">{</span><span class="ss">in_proj</span><span class="p">,</span><span class="w"> </span><span class="mi">104531</span><span class="p">,</span><span class="w"> </span><span class="ss">otp</span><span class="p" data-group-id="3898968894-4">}</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="3898968894-5">{</span><span class="ss">in_proj</span><span class="p">,</span><span class="w"> </span><span class="mi">104531</span><span class="p">,</span><span class="w"> </span><span class="ss">mnesia</span><span class="p" data-group-id="3898968894-5">}</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="3898968894-6">{</span><span class="ss">in_proj</span><span class="p">,</span><span class="w"> </span><span class="mi">104545</span><span class="p">,</span><span class="w"> </span><span class="ss">wolf</span><span class="p" data-group-id="3898968894-6">}</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="3898968894-7">{</span><span class="ss">in_proj</span><span class="p">,</span><span class="w"> </span><span class="mi">104659</span><span class="p">,</span><span class="w"> </span><span class="ss">otp</span><span class="p" data-group-id="3898968894-7">}</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="3898968894-8">{</span><span class="ss">in_proj</span><span class="p">,</span><span class="w"> </span><span class="mi">104659</span><span class="p">,</span><span class="w"> </span><span class="ss">wolf</span><span class="p" data-group-id="3898968894-8">}</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="3898968894-9">{</span><span class="ss">in_proj</span><span class="p">,</span><span class="w"> </span><span class="mi">104732</span><span class="p">,</span><span class="w"> </span><span class="ss">otp</span><span class="p" data-group-id="3898968894-9">}</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="3898968894-10">{</span><span class="ss">in_proj</span><span class="p">,</span><span class="w"> </span><span class="mi">104732</span><span class="p">,</span><span class="w"> </span><span class="ss">mnesia</span><span class="p" data-group-id="3898968894-10">}</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="3898968894-11">{</span><span class="ss">in_proj</span><span class="p">,</span><span class="w"> </span><span class="mi">104732</span><span class="p">,</span><span class="w"> </span><span class="ss">erlang</span><span class="p" data-group-id="3898968894-11">}</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="3898968894-12">{</span><span class="ss">in_proj</span><span class="p">,</span><span class="w"> </span><span class="mi">117716</span><span class="p">,</span><span class="w"> </span><span class="ss">otp</span><span class="p" data-group-id="3898968894-12">}</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="3898968894-13">{</span><span class="ss">in_proj</span><span class="p">,</span><span class="w"> </span><span class="mi">117716</span><span class="p">,</span><span class="w"> </span><span class="ss">documentation</span><span class="p" data-group-id="3898968894-13">}</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="3898968894-14">{</span><span class="ss">in_proj</span><span class="p">,</span><span class="w"> </span><span class="mi">115018</span><span class="p">,</span><span class="w"> </span><span class="ss">otp</span><span class="p" data-group-id="3898968894-14">}</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="3898968894-15">{</span><span class="ss">in_proj</span><span class="p">,</span><span class="w"> </span><span class="mi">115018</span><span class="p">,</span><span class="w"> </span><span class="ss">mnesia</span><span class="p" data-group-id="3898968894-15">}</span><span class="p">.</span></code></pre><p>The room number is an attribute of the employee record. This is a structured
attribute that consists of a tuple. The first element of the tuple identifies a
corridor, and the second element identifies the room in that corridor. An
alternative is to represent this as a record <code class="inline">-record(room, {corr, no}).</code>
instead of an anonymous tuple representation.</p><p>The <code class="inline">Company</code> database is now initialized and contains data.</p><h3 id="writing-queries" class="section-heading"><a href="#writing-queries" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Writing Queries</span></h3><p>Retrieving data from DBMS is usually to be done with the functions
<a href="mnesia.html#read/3"><code class="inline">mnesia:read/3</code></a> or <a href="mnesia.html#read/2"><code class="inline">mnesia:read/1</code></a>. The following function
raises the salary:</p><pre><code class="makeup erlang" translate="no"><span class="nf">raise</span><span class="p" data-group-id="5022522412-1">(</span><span class="n">Eno</span><span class="p">,</span><span class="w"> </span><span class="n">Raise</span><span class="p" data-group-id="5022522412-1">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="n">F</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">fun</span><span class="p" data-group-id="5022522412-2">(</span><span class="p" data-group-id="5022522412-2">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
                </span><span class="p" data-group-id="5022522412-3">[</span><span class="n">E</span><span class="p" data-group-id="5022522412-3">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">mnesia</span><span class="p">:</span><span class="nf">read</span><span class="p" data-group-id="5022522412-4">(</span><span class="ss">employee</span><span class="p">,</span><span class="w"> </span><span class="n">Eno</span><span class="p">,</span><span class="w"> </span><span class="ss">write</span><span class="p" data-group-id="5022522412-4">)</span><span class="p">,</span><span class="w">
                </span><span class="n">Salary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">E</span><span class="o">#</span><span class="ss">employee</span><span class="p">.</span><span class="ss">salary</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">Raise</span><span class="p">,</span><span class="w">
                </span><span class="n">New</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">E</span><span class="o">#</span><span class="ss">employee</span><span class="p" data-group-id="5022522412-5">{</span><span class="ss">salary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Salary</span><span class="p" data-group-id="5022522412-5">}</span><span class="p">,</span><span class="w">
                </span><span class="nc">mnesia</span><span class="p">:</span><span class="nf">write</span><span class="p" data-group-id="5022522412-6">(</span><span class="n">New</span><span class="p" data-group-id="5022522412-6">)</span><span class="w">
        </span><span class="k">end</span><span class="p">,</span><span class="w">
    </span><span class="nc">mnesia</span><span class="p">:</span><span class="nf">transaction</span><span class="p" data-group-id="5022522412-7">(</span><span class="n">F</span><span class="p" data-group-id="5022522412-7">)</span><span class="p">.</span></code></pre><p>Since it is desired to update the record using the function <a href="mnesia.html#write/1"><code class="inline">mnesia:write/1</code></a>
after the salary has been increased, a write lock (third argument to <code class="inline">read</code>) is
acquired when the record from the table is read.</p><p>To read the values from the table directly is not always possible. It can be
needed to search one or more tables to get the wanted data, and this is done by
writing database queries. Queries are always more expensive operations than
direct lookups done with <a href="mnesia.html#read/1"><code class="inline">mnesia:read/1</code></a>. Therefore, avoid queries in
performance-critical code.</p><p>Two methods are available for writing database queries:</p><ul><li><code class="inline">Mnesia</code> functions</li><li>QLC</li></ul><h4>Using Mnesia Functions</h4><p>The following function extracts the names of the female employees stored in the
database:</p><pre><code class="makeup erlang" translate="no"><span class="nc">mnesia</span><span class="p">:</span><span class="nf">select</span><span class="p" data-group-id="8550055086-1">(</span><span class="ss">employee</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8550055086-2">[</span><span class="p" data-group-id="8550055086-3">{</span><span class="o">#</span><span class="ss">employee</span><span class="p" data-group-id="8550055086-4">{</span><span class="ss">sex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">female</span><span class="p">,</span><span class="w"> </span><span class="ss">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">&#39;$1&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">&#39;_&#39;</span><span class="p" data-group-id="8550055086-4">}</span><span class="p">,</span><span class="p" data-group-id="8550055086-5">[</span><span class="p" data-group-id="8550055086-5">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8550055086-6">[</span><span class="ss">&#39;$1&#39;</span><span class="p" data-group-id="8550055086-6">]</span><span class="p" data-group-id="8550055086-3">}</span><span class="p" data-group-id="8550055086-2">]</span><span class="p" data-group-id="8550055086-1">)</span><span class="p">.</span></code></pre><p><code class="inline">select</code> must always run within an activity, such as a transaction. The
following function can be constructed to call from the shell:</p><pre><code class="makeup erlang" translate="no"><span class="nf">all_females</span><span class="p" data-group-id="5919200860-1">(</span><span class="p" data-group-id="5919200860-1">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="n">F</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">fun</span><span class="p" data-group-id="5919200860-2">(</span><span class="p" data-group-id="5919200860-2">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
                </span><span class="n">Female</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">#</span><span class="ss">employee</span><span class="p" data-group-id="5919200860-3">{</span><span class="ss">sex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">female</span><span class="p">,</span><span class="w"> </span><span class="ss">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">&#39;$1&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">&#39;_&#39;</span><span class="p" data-group-id="5919200860-3">}</span><span class="p">,</span><span class="w">
                </span><span class="nc">mnesia</span><span class="p">:</span><span class="nf">select</span><span class="p" data-group-id="5919200860-4">(</span><span class="ss">employee</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5919200860-5">[</span><span class="p" data-group-id="5919200860-6">{</span><span class="n">Female</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5919200860-7">[</span><span class="p" data-group-id="5919200860-7">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5919200860-8">[</span><span class="ss">&#39;$1&#39;</span><span class="p" data-group-id="5919200860-8">]</span><span class="p" data-group-id="5919200860-6">}</span><span class="p" data-group-id="5919200860-5">]</span><span class="p" data-group-id="5919200860-4">)</span><span class="w">
        </span><span class="k">end</span><span class="p">,</span><span class="w">
    </span><span class="nc">mnesia</span><span class="p">:</span><span class="nf">transaction</span><span class="p" data-group-id="5919200860-9">(</span><span class="n">F</span><span class="p" data-group-id="5919200860-9">)</span><span class="p">.</span></code></pre><p>The <code class="inline">select</code> expression matches all entries in table employee with the field
<code class="inline">sex</code> set to <code class="inline">female</code>.</p><p>This function can be called from the shell as follows:</p><pre><code class="makeup erlang" translate="no"><span class="gp unselectable">(klacke@gin)1&gt; </span><span class="nc">company</span><span class="p">:</span><span class="nf">all_females</span><span class="p" data-group-id="5674052832-1">(</span><span class="p" data-group-id="5674052832-1">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="5674052832-2">{</span><span class="ss">atomic</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5674052832-3">[</span><span class="s">&quot;Carlsson Tuula&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Fedoriw Anna&quot;</span><span class="p" data-group-id="5674052832-3">]</span><span class="p" data-group-id="5674052832-2">}</span></code></pre><p>For a description of <code class="inline">select</code> and its syntax, see
<a href="mnesia_chap4.html#matching">Pattern Matching</a>.</p><h4>Using QLC</h4><p>This section contains simple introductory examples only. For a full description
of the QLC query language, see the <a href="../../apps/stdlib/qlc.html"><code class="inline">qlc</code></a> manual page in <code class="inline">STDLIB</code>.</p><p>Using QLC can be more expensive than using <code class="inline">Mnesia</code> functions directly but
offers a nice syntax.</p><p>The following function extracts a list of female employees from the database:</p><pre><code class="makeup erlang" translate="no"><span class="n">Q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">qlc</span><span class="p">:</span><span class="nf">q</span><span class="p" data-group-id="1273806147-1">(</span><span class="p" data-group-id="1273806147-2">[</span><span class="n">E</span><span class="o">#</span><span class="ss">employee</span><span class="p">.</span><span class="ss">name</span><span class="w"> </span><span class="p">||</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nc">mnesia</span><span class="p">:</span><span class="nf">table</span><span class="p" data-group-id="1273806147-3">(</span><span class="ss">employee</span><span class="p" data-group-id="1273806147-3">)</span><span class="p">,</span><span class="w">
                              </span><span class="n">E</span><span class="o">#</span><span class="ss">employee</span><span class="p">.</span><span class="ss">sex</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="ss">female</span><span class="p" data-group-id="1273806147-2">]</span><span class="p" data-group-id="1273806147-1">)</span><span class="p">,</span><span class="w">
</span><span class="nc">qlc</span><span class="p">:</span><span class="nf">e</span><span class="p" data-group-id="1273806147-4">(</span><span class="n">Q</span><span class="p" data-group-id="1273806147-4">)</span><span class="p">,</span></code></pre><p>Accessing <code class="inline">Mnesia</code> tables from a QLC list comprehension must always be done
within a transaction. Consider the following function:</p><pre><code class="makeup erlang" translate="no"><span class="nf">females</span><span class="p" data-group-id="7571199989-1">(</span><span class="p" data-group-id="7571199989-1">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="n">F</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">fun</span><span class="p" data-group-id="7571199989-2">(</span><span class="p" data-group-id="7571199989-2">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
                </span><span class="n">Q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">qlc</span><span class="p">:</span><span class="nf">q</span><span class="p" data-group-id="7571199989-3">(</span><span class="p" data-group-id="7571199989-4">[</span><span class="n">E</span><span class="o">#</span><span class="ss">employee</span><span class="p">.</span><span class="ss">name</span><span class="w"> </span><span class="p">||</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nc">mnesia</span><span class="p">:</span><span class="nf">table</span><span class="p" data-group-id="7571199989-5">(</span><span class="ss">employee</span><span class="p" data-group-id="7571199989-5">)</span><span class="p">,</span><span class="w">
                                              </span><span class="n">E</span><span class="o">#</span><span class="ss">employee</span><span class="p">.</span><span class="ss">sex</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="ss">female</span><span class="p" data-group-id="7571199989-4">]</span><span class="p" data-group-id="7571199989-3">)</span><span class="p">,</span><span class="w">
                </span><span class="nc">qlc</span><span class="p">:</span><span class="nf">e</span><span class="p" data-group-id="7571199989-6">(</span><span class="n">Q</span><span class="p" data-group-id="7571199989-6">)</span><span class="w">
        </span><span class="k">end</span><span class="p">,</span><span class="w">
    </span><span class="nc">mnesia</span><span class="p">:</span><span class="nf">transaction</span><span class="p" data-group-id="7571199989-7">(</span><span class="n">F</span><span class="p" data-group-id="7571199989-7">)</span><span class="p">.</span></code></pre><p>This function can be called from the shell as follows:</p><pre><code class="makeup erlang" translate="no"><span class="gp unselectable">(klacke@gin)1&gt; </span><span class="nc">company</span><span class="p">:</span><span class="nf">females</span><span class="p" data-group-id="9423293086-1">(</span><span class="p" data-group-id="9423293086-1">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="9423293086-2">{</span><span class="ss">atomic</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9423293086-3">[</span><span class="s">&quot;Carlsson Tuula&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Fedoriw Anna&quot;</span><span class="p" data-group-id="9423293086-3">]</span><span class="p" data-group-id="9423293086-2">}</span></code></pre><p>In traditional relational database terminology, this operation is called a
selection, followed by a projection.</p><p>The previous list comprehension expression contains a number of syntactical
elements:</p><ul><li>The first <code class="inline">[</code> bracket is read as &quot;build the list&quot;.</li><li>The <code class="inline">||</code> &quot;such that&quot; and the arrow <code class="inline">&lt;-</code> is read as &quot;taken from&quot;.</li></ul><p>Hence, the previous list comprehension demonstrates the formation of the list
<code class="inline">E#employee.name</code> such that <code class="inline">E</code> is taken from the table of employees, and
attribute <code class="inline">sex</code> of each record is equal to the atom <code class="inline">female</code>.</p><p>The whole list comprehension must be given to the function <a href="../../apps/stdlib/qlc.html#q/1"><code class="inline">qlc:q/1</code></a>.</p><p>List comprehensions with low-level <code class="inline">Mnesia</code> functions can be combined in the
same transaction. To raise the salary of all female employees, execute the
following:</p><pre><code class="makeup erlang" translate="no"><span class="nf">raise_females</span><span class="p" data-group-id="8322748709-1">(</span><span class="n">Amount</span><span class="p" data-group-id="8322748709-1">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="n">F</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">fun</span><span class="p" data-group-id="8322748709-2">(</span><span class="p" data-group-id="8322748709-2">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
                </span><span class="n">Q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">qlc</span><span class="p">:</span><span class="nf">q</span><span class="p" data-group-id="8322748709-3">(</span><span class="p" data-group-id="8322748709-4">[</span><span class="n">E</span><span class="w"> </span><span class="p">||</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nc">mnesia</span><span class="p">:</span><span class="nf">table</span><span class="p" data-group-id="8322748709-5">(</span><span class="ss">employee</span><span class="p" data-group-id="8322748709-5">)</span><span class="p">,</span><span class="w">
                                </span><span class="n">E</span><span class="o">#</span><span class="ss">employee</span><span class="p">.</span><span class="ss">sex</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="ss">female</span><span class="p" data-group-id="8322748709-4">]</span><span class="p" data-group-id="8322748709-3">)</span><span class="p">,</span><span class="w">
                </span><span class="n">Fs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">qlc</span><span class="p">:</span><span class="nf">e</span><span class="p" data-group-id="8322748709-6">(</span><span class="n">Q</span><span class="p" data-group-id="8322748709-6">)</span><span class="p">,</span><span class="w">
                </span><span class="nf">over_write</span><span class="p" data-group-id="8322748709-7">(</span><span class="n">Fs</span><span class="p">,</span><span class="w"> </span><span class="n">Amount</span><span class="p" data-group-id="8322748709-7">)</span><span class="w">
        </span><span class="k">end</span><span class="p">,</span><span class="w">
    </span><span class="nc">mnesia</span><span class="p">:</span><span class="nf">transaction</span><span class="p" data-group-id="8322748709-8">(</span><span class="n">F</span><span class="p" data-group-id="8322748709-8">)</span><span class="p">.</span><span class="w">

</span><span class="nf">over_write</span><span class="p" data-group-id="8322748709-9">(</span><span class="p" data-group-id="8322748709-10">[</span><span class="n">E</span><span class="p">|</span><span class="n">Tail</span><span class="p" data-group-id="8322748709-10">]</span><span class="p">,</span><span class="w"> </span><span class="n">Amount</span><span class="p" data-group-id="8322748709-9">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="n">Salary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">E</span><span class="o">#</span><span class="ss">employee</span><span class="p">.</span><span class="ss">salary</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">Amount</span><span class="p">,</span><span class="w">
    </span><span class="n">New</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">E</span><span class="o">#</span><span class="ss">employee</span><span class="p" data-group-id="8322748709-11">{</span><span class="ss">salary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Salary</span><span class="p" data-group-id="8322748709-11">}</span><span class="p">,</span><span class="w">
    </span><span class="nc">mnesia</span><span class="p">:</span><span class="nf">write</span><span class="p" data-group-id="8322748709-12">(</span><span class="n">New</span><span class="p" data-group-id="8322748709-12">)</span><span class="p">,</span><span class="w">
    </span><span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nf">over_write</span><span class="p" data-group-id="8322748709-13">(</span><span class="n">Tail</span><span class="p">,</span><span class="w"> </span><span class="n">Amount</span><span class="p" data-group-id="8322748709-13">)</span><span class="p">;</span><span class="w">
</span><span class="nf">over_write</span><span class="p" data-group-id="8322748709-14">(</span><span class="p" data-group-id="8322748709-15">[</span><span class="p" data-group-id="8322748709-15">]</span><span class="p">,</span><span class="w"> </span><span class="p">_</span><span class="p" data-group-id="8322748709-14">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="mi">0</span><span class="p">.</span></code></pre><p>The function <code class="inline">raise_females/1</code> returns the tuple <code class="inline">{atomic, Number}</code>, where
<code class="inline">Number</code> is the number of female employees who received a salary increase. If an
error occurs, the value <code class="inline">{aborted, Reason}</code> is returned, and <code class="inline">Mnesia</code> guarantees
that the salary is not raised for any employee.</p><p><em>Example:</em></p><pre><code class="makeup erlang" translate="no"><span class="gp unselectable">33&gt; </span><span class="nc">company</span><span class="p">:</span><span class="nf">raise_females</span><span class="p" data-group-id="3230701117-1">(</span><span class="mi">33</span><span class="p" data-group-id="3230701117-1">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="3230701117-2">{</span><span class="ss">atomic</span><span class="p">,</span><span class="mi">2</span><span class="p" data-group-id="3230701117-2">}</span></code></pre>

</div>

<div class="bottom-actions" id="bottom-actions">
  <div class="bottom-actions-item">

      <a href="mnesia_overview.html" class="bottom-actions-button" rel="prev">
        <span class="subheader">
          â† Previous Page
        </span>
        <span class="title">
Overview
        </span>
      </a>

  </div>
  <div class="bottom-actions-item">

      <a href="mnesia_chap3.html" class="bottom-actions-button" rel="next">
        <span class="subheader">
          Next Page â†’
        </span>
        <span class="title">
Build a Mnesia Database
        </span>
      </a>

  </div>
</div>
    <footer class="footer">
      <p>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="mnesia.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.38.1) for the

          <a href="https://erlang.org" title="Erlang" target="_blank" translate="no">Erlang programming language</a>

      </p>
<p>Copyright Â© 1996-2025 <a href="https://www.ericsson.com">Ericsson AB</a></p>
    </footer>
  </div>
</main>
</div>
  <script defer src="https://cdn.jsdelivr.net/npm/mermaid@11.4.1/dist/mermaid.min.js"></script>
  <script>
  let initialized = false;

  window.addEventListener("exdoc:loaded", () => {
      if (!initialized) {
      mermaid.initialize({
          startOnLoad: false,
          theme: document.body.className.includes("dark") ? "dark" : "default"
      });
      initialized = true;
      }

      let id = 0;
      for (const codeEl of document.querySelectorAll("pre code.mermaid")) {
      const preEl = codeEl.parentElement;
      const graphDefinition = codeEl.textContent;
      const graphEl = document.createElement("div");
      const graphId = "mermaid-graph-" + id++;
      mermaid.render(graphId, graphDefinition).then(({svg, bindFunctions}) => {
          graphEl.innerHTML = svg;
          bindFunctions?.(graphEl);
          preEl.insertAdjacentElement("afterend", graphEl);
          preEl.remove();
      });
      }
  });
  </script>

  </body>
</html>
