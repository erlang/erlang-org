<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.38.1">
    <meta name="project" content="inets v9.4">


<meta name="exdoc:full-text-search-url" content="/doc/search.html?v=28&q=">
<meta name="major-vsn" content="28">
<link rel="canonical" href="https://www.erlang.org/doc/apps/inets/notes.html" />
    <title>Inets Release Notes â€” inets v9.4</title>

    <link rel="stylesheet" href="dist/html-erlang-ZK43ZOAC.css" />

    <script defer src="dist/sidebar_items-7EC0F3F6.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-DPJLHKSM.js"></script>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="../../index.html" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="inets" />
        </a>

      <div>
        <a href="../../index.html" class="sidebar-projectName" translate="no">
inets
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v9.4
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras=""></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-extra" id="main" data-type="extras">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of inets</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search" tabindex="-1">
            <i class="ri-search-2-line ri-lg" aria-hidden="true"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>Inets Release Notes</h1>


      <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/inets/doc/notes.md#L1" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

  </div>


<h2 id="inets-9-4" class="section-heading"><a href="#inets-9-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 9.4</span></h2><h3 id="fixed-bugs-and-malfunctions" class="section-heading"><a href="#fixed-bugs-and-malfunctions" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Replaced calls to deprecated <code class="inline">crypto:start()</code> with <code class="inline">application:start(crypto)</code>.</p><p>Own Id: OTP-19485 Aux Id: <a href="https://github.com/erlang/otp/pull/8592" title="">PR-8592</a></p></li><li><p>Enhance specs of timeout for improving documentation and dialyzer analysis.</p><p>Own Id: OTP-19604 Aux Id: <a href="https://github.com/erlang/otp/pull/9574" title="">PR-9574</a></p></li></ul><h3 id="improvements-and-new-features" class="section-heading"><a href="#improvements-and-new-features" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Enhanced http client documentation.</p><p>Own Id: OTP-19520 Aux Id: <a href="https://github.com/erlang/otp/pull/9516" title="">PR-9516</a></p></li><li><p>Enhance made to mod_esi documentation</p><p>Own Id: OTP-19521 Aux Id: <a href="https://github.com/erlang/otp/pull/9472" title="">PR-9472</a></p></li><li><p>The license and copyright header has changed format to include an <code class="inline">SPDX-License-Identifier</code>. At the same time, most files have been updated to follow a uniform standard for license headers.</p><p>Own Id: OTP-19575 Aux Id: <a href="https://github.com/erlang/otp/pull/9670" title="">PR-9670</a></p></li><li><p>Inets Makefiles now create and use dependencies files for .erl files</p><p>Own Id: OTP-19624 Aux Id: <a href="https://github.com/erlang/otp/pull/9101" title="">PR-9101</a></p></li></ul><h2 id="inets-9-3-2" class="section-heading"><a href="#inets-9-3-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 9.3.2</span></h2><h3 id="fixed-bugs-and-malfunctions-1" class="section-heading"><a href="#fixed-bugs-and-malfunctions-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Improved robustness of httpd startup procedure.</p><p>Own Id: OTP-19486 Aux Id: ERIERL-1190, <a href="https://github.com/erlang/otp/pull/9408" title="">PR-9408</a></p></li></ul><h2 id="inets-9-3-1" class="section-heading"><a href="#inets-9-3-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 9.3.1</span></h2><h3 id="fixed-bugs-and-malfunctions-2" class="section-heading"><a href="#fixed-bugs-and-malfunctions-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The HTTP client now correctly takes into account the <code class="inline">full_result</code> option when returning an asynchronous request.</p><p><strong><em> POTENTIAL INCOMPATIBILITY </em></strong></p><p>Own Id: OTP-19158</p></li><li><p>A synchronous httpc:request now timeouts after the <code class="inline">Timeout</code> specified in <code class="inline">HttpOption {timeout, Timeout}</code>.</p><p>Own Id: OTP-19221 Aux Id: ERIERL-1091, <a href="https://github.com/erlang/otp/pull/8788" title="">PR-8788</a>, <a href="https://github.com/erlang/otp/pull/8801" title="">PR-8801</a></p></li><li><p>Fixed a bug where calling httpc:set_options/2 when one of keys: <em>ipfamily</em> or <em>unix_socket</em>, was not present, would cause the other value to get overriden by the default value. The validation of these options was also improved.</p><p>Own Id: OTP-19379 Aux Id: <a href="https://github.com/erlang/otp/pull/8878" title="">PR-8878</a>, <a href="https://github.com/erlang/otp/issues/8829" title="">GH-8829</a></p></li></ul><h3 id="improvements-and-new-features-1" class="section-heading"><a href="#improvements-and-new-features-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>The variable <code class="inline">Env</code> in the <code class="inline">mod_esi</code> callback will now have an additional property <code class="inline">{connect_addr, Addr}</code> indicating on which address the server received a connection.</p><p>Own Id: OTP-19377 Aux Id: ERIERL-1152, <a href="https://github.com/erlang/otp/pull/9127" title="">PR-9127</a></p></li></ul><h2 id="inets-9-3" class="section-heading"><a href="#inets-9-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 9.3</span></h2><h3 id="improvements-and-new-features-2" class="section-heading"><a href="#improvements-and-new-features-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>The documentation for the <a href="httpd.html"><code class="inline">httpd</code></a> module has been improved, along with correction of headings and types.</p><p>Own Id: OTP-19171 Aux Id: <a href="https://github.com/erlang/otp/pull/8578" title="">PR-8578</a></p></li><li><p>Userinfo is now properly percent-decoded before usage in headers.</p><p>Own Id: OTP-19172 Aux Id: <a href="https://github.com/erlang/otp/pull/8575" title="">PR-8575</a></p></li></ul><h2 id="inets-9-2" class="section-heading"><a href="#inets-9-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 9.2</span></h2><h3 id="improvements-and-new-features-3" class="section-heading"><a href="#improvements-and-new-features-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Introduced a default value for httpd_server name configuration to improve ease of use.</p><p><strong><em> POTENTIAL INCOMPATIBILITY </em></strong></p><p>Own Id: OTP-18641 Aux Id: <a href="https://github.com/erlang/otp/pull/7316" title="">PR-7316</a></p></li><li><p>The <code class="inline">httpd</code> module has been extended with an API for simple serving directory content over HTTP. With this change, the current working directory can be served like this:</p><pre><code class="text">erl -S httpd</code></pre><p>An arbitrary directory can be served like this:</p><pre><code class="text">erl -S httpd serve path/to/dir</code></pre><p>Own Id: OTP-18727 Aux Id: <a href="https://github.com/erlang/otp/pull/7299" title="">PR-7299</a></p></li><li><p>Added <code class="inline">-callback</code> attributes to <a href="httpd.html"><code class="inline">httpd</code></a>, <a href="mod_esi.html"><code class="inline">mod_esi</code></a>, and <a href="mod_security.html"><code class="inline">mod_security</code></a>.</p><p>Own Id: OTP-18786 Aux Id: <a href="https://github.com/erlang/otp/pull/7700" title="">PR-7700</a></p></li><li><p>Inets now uses a relative redirect with an absolute path to prevent whoever is running Inets from having to configure the <code class="inline">ServerName</code> to match the network-reachable host name of the server.</p><p>Own Id: OTP-18809 Aux Id: <a href="https://github.com/erlang/otp/issues/7617" title="">GH-7617</a>, <a href="https://github.com/erlang/otp/pull/7678" title="">PR-7678</a></p></li><li><p><code class="inline">inets</code> processes now use <a href="../../apps/stdlib/proc_lib.html#set_label/1"><code class="inline">proc_lib:set_label/1</code></a> to improve observeability.</p><p>Own Id: OTP-18927 Aux Id: <a href="https://github.com/erlang/otp/pull/8029" title="">PR-8029</a></p></li><li><p>The documentation has been migrated to use Markdown and ExDoc.</p><p>Own Id: OTP-18955 Aux Id: <a href="https://github.com/erlang/otp/pull/8026" title="">PR-8026</a></p></li><li><p>The implementations of <a href="http_uri.html#encode/1"><code class="inline">http_uri:encode/1</code></a> and <a href="http_uri.html#decode/1"><code class="inline">http_uri:decode/1</code></a> are now replaced with their equivalent, but bug free versions from module <a href="../../apps/stdlib/uri_string.html"><code class="inline">uri_string</code></a>, namely <a href="../../apps/stdlib/uri_string.html#quote/1"><code class="inline">uri_string:quote/1</code></a> and <a href="../../apps/stdlib/uri_string.html#unquote/1"><code class="inline">uri_string:unquote/1</code></a>.</p><p><strong><em> POTENTIAL INCOMPATIBILITY </em></strong></p><p>Own Id: OTP-19022</p></li><li><p>With this change, the API specs are updated.</p><p>Own Id: OTP-19033</p></li></ul><h2 id="inets-9-1-0-2" class="section-heading"><a href="#inets-9-1-0-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 9.1.0.2</span></h2><h3 id="fixed-bugs-and-malfunctions-3" class="section-heading"><a href="#fixed-bugs-and-malfunctions-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed a bug where calling httpc:set_options/2 when one of keys: <em>ipfamily</em> or <em>unix_socket</em>, was not present, would cause the other value to get overriden by the default value. The validation of these options was also improved.</p><p>Own Id: OTP-19379 Aux Id: PR-8878, GH-8829</p></li></ul><h2 id="inets-9-1-0-1" class="section-heading"><a href="#inets-9-1-0-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 9.1.0.1</span></h2><h3 id="fixed-bugs-and-malfunctions-4" class="section-heading"><a href="#fixed-bugs-and-malfunctions-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>With this change, HTTP client, when returning an asynchronous request, now correctly takes into account `OptionRequest - full_result`</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-19158</p></li><li><p>With this change, synchronous httpc:request now timeouts after `Timeout` specified in `HttpOption {timeout, Timeout}`</p><p>Own Id: OTP-19221 Aux Id: ERIERL-1091, PR-8788, PR-8801</p></li></ul><h2 id="inets-9-1" class="section-heading"><a href="#inets-9-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 9.1</span></h2><h3 id="fixed-bugs-and-malfunctions-5" class="section-heading"><a href="#fixed-bugs-and-malfunctions-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Replaced unintentional Erlang Public License 1.1 headers in some files with
the intended Apache License 2.0 header.</p><p>Own Id: OTP-18815 Aux Id: PR-7780</p></li><li><p>Correct IP protocol handling so that redirects always uses correct IP-family
options and not fails.</p><p>Own Id: OTP-18855</p></li></ul><h3 id="improvements-and-new-features-4" class="section-heading"><a href="#improvements-and-new-features-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p><code class="inline">inets</code> app starts <code class="inline">ssl</code> by default</p><p>Own Id: OTP-18735 Aux Id: PR-7596, GH-7580</p></li><li><p>Avoid httpd returning 500 internal server error when unable to open a file.
404 or 503 will be returned instead.</p><p>Own Id: OTP-18882</p></li><li><p>Properly handle documented option mime_type, for backwards compatibility
fallback to undocumented option default_type if mime_type is not set.</p><p>Own Id: OTP-18891 Aux Id: PR-7843, GH-7827</p></li></ul><h2 id="inets-9-0-2" class="section-heading"><a href="#inets-9-0-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 9.0.2</span></h2><h3 id="fixed-bugs-and-malfunctions-6" class="section-heading"><a href="#fixed-bugs-and-malfunctions-6" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>With this change, re_write httpd works as expected and does not return error.</p><p>Own Id: OTP-18582 Aux Id: GH-6074,PR-6892</p></li><li><p>Fixed a bug so <code class="inline">httpd</code> does not crash when stopped at the wrong time during
TLS connection negotiation, or any other theoretically as slow connection
setup.</p><p>Own Id: OTP-18688 Aux Id: ERIERL-962</p></li><li><p>Enhance error handling and avoid that the HTTP client hangs on headers
provided on the wrong format.</p><p>Own Id: OTP-18694 Aux Id: GH-7482</p></li><li><p>With this change, error report generated by httpd during connection setup
contains socket type information.</p><p>Own Id: OTP-18704 Aux Id: ERIERL-962, PR-7513, OTP-18688</p></li><li><p>Stop and restart of the <code class="inline">httpd</code> server in the Inets application has been
refactored to a more synchronous and OTP supervisor friendly approach.</p><p>This should increase stability and for example avoid a supervisor report from
<code class="inline">httpd_connection_sup</code> about killed child process(es) in some cases when
stopping or restarting <code class="inline">httpd</code>.</p><p>Own Id: OTP-18708 Aux Id: ERIERL-962, OTP-18688</p></li></ul><h2 id="inets-9-0-1" class="section-heading"><a href="#inets-9-0-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 9.0.1</span></h2><h3 id="fixed-bugs-and-malfunctions-7" class="section-heading"><a href="#fixed-bugs-and-malfunctions-7" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Do not make the default ssl options by calling
<code class="inline">httpc:ssl_verify_host_options(true)</code> if ssl options are supplied by the user.</p><p>Own Id: OTP-18604 Aux Id: PR-7306 GH-7303</p></li></ul><h2 id="inets-9-0" class="section-heading"><a href="#inets-9-0" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 9.0</span></h2><h3 id="fixed-bugs-and-malfunctions-8" class="section-heading"><a href="#fixed-bugs-and-malfunctions-8" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Correct timing related pipelining/keepalive queue bug, that could result in
unexpected &quot;socket_remotly_closed&quot; errors.</p><p>Own Id: OTP-18476 Aux Id: GH-6380</p></li></ul><h3 id="improvements-and-new-features-5" class="section-heading"><a href="#improvements-and-new-features-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>By default ssl connections will use options from <code class="inline">ssl_default_options(true)</code></p><p>Own Id: OTP-18167</p></li><li><p>Runtime dependencies have been updated.</p><p>Own Id: OTP-18350</p></li><li><p>Deprecates <code class="inline">dbg:stop_clear/0</code> because it is simply a function alias to
<a href="../../apps/runtime_tools/dbg.html#stop/0"><code class="inline">dbg:stop/0</code></a></p><p>Own Id: OTP-18478 Aux Id: GH-6903</p></li><li><p>The implementation has been fixed to use <code class="inline">proc_lib:init_fail/2,3</code> where
appropriate, instead of <code class="inline">proc_lib:init_ack/1,2</code>.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-18490 Aux Id: OTP-18471, GH-6339, PR-6843</p></li><li><p>IP display string will now always be in lower case, effects ipv6 addresses.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-18530</p></li><li><p>Removed deprecated functions</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-18536</p></li><li><p>Update the code in the inets example directory to reflect the latest
implementation</p><p>Own Id: OTP-18544 Aux Id: GH-5276</p></li></ul><h2 id="inets-8-3-1-5" class="section-heading"><a href="#inets-8-3-1-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 8.3.1.5</span></h2><h3 id="fixed-bugs-and-malfunctions-9" class="section-heading"><a href="#fixed-bugs-and-malfunctions-9" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed a bug where calling httpc:set_options/2 when one of keys: <em>ipfamily</em> or <em>unix_socket</em>, was not present, would cause the other value to get overriden by the default value. The validation of these options was also improved.</p><p>Own Id: OTP-19379 Aux Id: PR-8878, GH-8829</p></li></ul><h2 id="inets-8-3-1-4" class="section-heading"><a href="#inets-8-3-1-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 8.3.1.4</span></h2><h3 id="fixed-bugs-and-malfunctions-10" class="section-heading"><a href="#fixed-bugs-and-malfunctions-10" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>With this change, HTTP client, when returning an asynchronous request, now correctly takes into account `OptionRequest - full_result`</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-19158</p></li><li><p>With this change, synchronous httpc:request now timeouts after `Timeout` specified in `HttpOption {timeout, Timeout}`</p><p>Own Id: OTP-19221 Aux Id: ERIERL-1091, PR-8788, PR-8801</p></li></ul><h2 id="inets-8-3-1-3" class="section-heading"><a href="#inets-8-3-1-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 8.3.1.3</span></h2><h3 id="fixed-bugs-and-malfunctions-11" class="section-heading"><a href="#fixed-bugs-and-malfunctions-11" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed runtime dependencies.</p><p>Own Id: OTP-19064</p></li></ul><h2 id="inets-8-3-1-2" class="section-heading"><a href="#inets-8-3-1-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 8.3.1.2</span></h2><h3 id="fixed-bugs-and-malfunctions-12" class="section-heading"><a href="#fixed-bugs-and-malfunctions-12" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>With this change, error report generated by httpd during connection setup
contains socket type information.</p><p>Own Id: OTP-18704 Aux Id: ERIERL-962, PR-7513, OTP-18688</p></li><li><p>Stop and restart of the <code class="inline">httpd</code> server in the Inets application has been
refactored to a more synchronous and OTP supervisor friendly approach.</p><p>This should increase stability and for example avoid a supervisor report from
<code class="inline">httpd_connection_sup</code> about killed child process(es) in some cases when
stopping or restarting <code class="inline">httpd</code>.</p><p>Own Id: OTP-18708 Aux Id: ERIERL-962, OTP-18688</p></li></ul><h2 id="inets-8-3-1-1" class="section-heading"><a href="#inets-8-3-1-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 8.3.1.1</span></h2><h3 id="fixed-bugs-and-malfunctions-13" class="section-heading"><a href="#fixed-bugs-and-malfunctions-13" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed a bug so <code class="inline">httpd</code> does not crash when stopped at the wrong time during
TLS connection negotiation, or any other theoretically as slow connection
setup.</p><p>Own Id: OTP-18688 Aux Id: ERIERL-962</p></li></ul><h2 id="inets-8-3-1" class="section-heading"><a href="#inets-8-3-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 8.3.1</span></h2><h3 id="fixed-bugs-and-malfunctions-14" class="section-heading"><a href="#fixed-bugs-and-malfunctions-14" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Correct timing related pipelining/keepalive queue bug, that could result in
unexpected &quot;socket_remotly_closed&quot; errors.</p><p>Own Id: OTP-18509 Aux Id: OTP-18476</p></li><li><p>With this change, upon remote socket closure current request is added to a
retried queue (either pipeline or keep_alive, but not both).</p><p>Own Id: OTP-18545 Aux Id: OTP-18509, ERIERL-937, ERIERL-928</p></li></ul><h2 id="inets-8-3" class="section-heading"><a href="#inets-8-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 8.3</span></h2><h3 id="fixed-bugs-and-malfunctions-15" class="section-heading"><a href="#fixed-bugs-and-malfunctions-15" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>With this change, handling of URI to a folder, with missing trailing / and a
query component present is fixed.</p><p>Own Id: OTP-18472 Aux Id: DAFH-1592</p></li></ul><h3 id="improvements-and-new-features-6" class="section-heading"><a href="#improvements-and-new-features-6" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Adds more type information to the <code class="inline">inets</code> app, thus improving the errors that
static analysis tools can detect.</p><p>The addition of type information to records and the updates to function heads
help static analysis tools to understand that some values in the records
cannot be <code class="inline">'undefined'</code>, thus making static tools to type check correctly more
modules in the <code class="inline">inets</code> app</p><p>Own Id: OTP-18390 Aux Id: PR-6661</p></li><li><p>Replace size/1 with either tuple_size/1 or byte_size/1</p><p>The <a href="../../apps/erts/erlang.html#size/1"><code class="inline">size/1</code></a> BIF is not optimized by the JIT, and its use can
result in worse types for Dialyzer.</p><p>When one knows that the value being tested must be a tuple,
<a href="../../apps/erts/erlang.html#tuple_size/1"><code class="inline">tuple_size/1</code></a> should always be preferred.</p><p>When one knows that the value being tested must be a binary,
<a href="../../apps/erts/erlang.html#byte_size/1"><code class="inline">byte_size/1</code></a> should be preferred. However,
<a href="../../apps/erts/erlang.html#byte_size/1"><code class="inline">byte_size/1</code></a> also accepts a bitstring (rounding up size to a
whole number of bytes), so one must make sure that the call to <code class="inline">byte_size/</code> is
preceded by a call to <a href="../../apps/erts/erlang.html#is_binary/1"><code class="inline">is_binary/1</code></a> to ensure that bitstrings
are rejected. Note that the compiler removes redundant calls to
<a href="../../apps/erts/erlang.html#is_binary/1"><code class="inline">is_binary/1</code></a>, so if one is not sure whether previous code
had made sure that the argument is a binary, it does not harm to add an
<a href="../../apps/erts/erlang.html#is_binary/1"><code class="inline">is_binary/1</code></a> test immediately before the call to
<a href="../../apps/erts/erlang.html#byte_size/1"><code class="inline">byte_size/1</code></a>.</p><p>Own Id: OTP-18432 Aux Id:
GH-6672,PR-6793,PR-6784,PR-6787,PR-6785,PR-6682,PR-6800,PR-6797,PR-6798,PR-6799,PR-6796,PR-6813,PR-6671,PR-6673,PR-6684,PR-6694,GH-6677,PR-6696,PR-6670,PR-6674</p></li></ul><h2 id="inets-8-2-2" class="section-heading"><a href="#inets-8-2-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 8.2.2</span></h2><h3 id="fixed-bugs-and-malfunctions-16" class="section-heading"><a href="#fixed-bugs-and-malfunctions-16" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Ensure graceful shutdown</p><p>Own Id: OTP-18461 Aux Id: ERIERL-890</p></li><li><p>Return type of the type specification for function
<code class="inline">httpc:cookie_header/{1,2,3}</code> has been fixed from
<code class="inline">-spec cookie_header(url()) -&gt; [{ field(), value() }] | {error, Reason}</code> to
<code class="inline">-spec cookie_header(url()) -&gt; { field(), value() } | {error, Reason}</code></p><p>Own Id: OTP-18462 Aux Id: GH-6846</p></li></ul><h2 id="inets-8-2-1" class="section-heading"><a href="#inets-8-2-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 8.2.1</span></h2><h3 id="fixed-bugs-and-malfunctions-17" class="section-heading"><a href="#fixed-bugs-and-malfunctions-17" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>fixes a missing case of the type specification for httpd:info/2/3/4</p><p>Own Id: OTP-18362 Aux Id: GH-6558, ERIERL-895</p></li></ul><h2 id="inets-8-2" class="section-heading"><a href="#inets-8-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 8.2</span></h2><h3 id="improvements-and-new-features-7" class="section-heading"><a href="#improvements-and-new-features-7" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>This change allows body requests to <a href="httpc.html#request/5"><code class="inline">httpc:request/5</code></a> be an <a href="../../apps/erts/erlang.html#t:iolist/0"><code class="inline">iolist/0</code></a></p><p>Own Id: OTP-18250</p></li><li><p>addition of type specs in <code class="inline">httpc.erl</code></p><p>Own Id: OTP-18251 Aux Id: GH-6245</p></li><li><p>httpc: Add support for HTTP 308 status code</p><p>Own Id: OTP-18280 Aux Id: GH-6290, PR-6291</p></li></ul><h2 id="inets-8-1" class="section-heading"><a href="#inets-8-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 8.1</span></h2><h3 id="improvements-and-new-features-8" class="section-heading"><a href="#improvements-and-new-features-8" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Add <a href="httpc.html#ssl_verify_host_options/1"><code class="inline">httpc:ssl_verify_host_options/1</code></a> to help setting default ssl options for
the https client.</p><p>Own Id: OTP-18118</p></li><li><p>This change fixes dialyzer warnings generated for inets/httpd examples
(includes needed adjustment of spec for ssh_sftp module).</p><p>Own Id: OTP-18178 Aux Id: ERIERL-833, ERIERL-834, ERIERL-835</p></li><li><p>Remove documentation of no longer supported callback.</p><p>Own Id: OTP-18193 Aux Id: GH-6122</p></li></ul><h2 id="inets-8-0" class="section-heading"><a href="#inets-8-0" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 8.0</span></h2><h3 id="fixed-bugs-and-malfunctions-18" class="section-heading"><a href="#fixed-bugs-and-malfunctions-18" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Adjust uri_string:normalize behavior for URIs with undefined port (URI string
with a port colon but no port value or URI map with port =&gt; undefined).</p><p>Remove redundant normalization from http_request module.</p><p>Before this change, normalize would not remove port subcomponent in such cases
and could for example return &quot;<a href="http://localhost:%22">http://localhost:&quot;</a> URI.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-17627</p></li><li><p>Fixed typo in Reason term returned from httpc_handler:handle_http_body.</p><p>After this change, could_not_establish_ssl_tunnel atom is returned within
Reason term.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-17889</p></li><li><p>With this change, inet6fb4 option is documented for inets/httpc. Option can be
used when IP family needs to be discovered by a connection attempt.</p><p>Own Id: OTP-18063 Aux Id: ERIERL-798</p></li></ul><h3 id="improvements-and-new-features-9" class="section-heading"><a href="#improvements-and-new-features-9" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>This change removes deprecated functions: http_uri:parse/1, http_uri:parse/2
and http_uri:scheme_defaults/0.</p><p>This change delays until OTP-26 removal of deprecated functions:
http_uri:encode/1 and http_uri:decode/1.</p><p>This change marks httpd_util:decode_hex/1 and httpd_util:encode_hex/1 as
deprecated.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-17866</p></li><li><p>After this change, connect_timeout value is re-used when upgrading TCP
connection to TLS over a proxy.</p><p>Own Id: OTP-17997 Aux Id: GH-5782</p></li><li><p>Remove reference to unsupported Apache-like config file from httpd manual.</p><p>Own Id: OTP-18088 Aux Id: GH-5276</p></li></ul><h2 id="inets-7-5-3-4" class="section-heading"><a href="#inets-7-5-3-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 7.5.3.4</span></h2><h3 id="fixed-bugs-and-malfunctions-19" class="section-heading"><a href="#fixed-bugs-and-malfunctions-19" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>With this change, upon remote socket closure current request is added to a
retried queue (either pipeline or keep_alive, but not both).</p><p>Own Id: OTP-18545 Aux Id: OTP-18509, ERIERL-937, ERIERL-928</p></li></ul><h2 id="inets-7-5-3-3" class="section-heading"><a href="#inets-7-5-3-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 7.5.3.3</span></h2><h3 id="fixed-bugs-and-malfunctions-20" class="section-heading"><a href="#fixed-bugs-and-malfunctions-20" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Correct timing related pipelining/keepalive queue bug, that could result in
unexpected &quot;socket_remotly_closed&quot; errors.</p><p>Own Id: OTP-18509 Aux Id: OTP-18476</p></li></ul><h2 id="inets-7-5-3-2" class="section-heading"><a href="#inets-7-5-3-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 7.5.3.2</span></h2><h3 id="fixed-bugs-and-malfunctions-21" class="section-heading"><a href="#fixed-bugs-and-malfunctions-21" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>With this change, handling of URI to a folder, with missing trailing / and a
query component present is fixed.</p><p>Own Id: OTP-18472 Aux Id: DAFH-1592</p></li></ul><h2 id="inets-7-5-3-1" class="section-heading"><a href="#inets-7-5-3-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 7.5.3.1</span></h2><h3 id="improvements-and-new-features-10" class="section-heading"><a href="#improvements-and-new-features-10" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Remove documentation of no longer supported callback.</p><p>Own Id: OTP-18193 Aux Id: GH-6122</p></li></ul><h2 id="inets-7-5-3" class="section-heading"><a href="#inets-7-5-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 7.5.3</span></h2><h3 id="fixed-bugs-and-malfunctions-22" class="section-heading"><a href="#fixed-bugs-and-malfunctions-22" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix handling of erl_script_script option in httpd when atom 'all' is used as
AllowedModule.</p><p>Own Id: OTP-18069 Aux Id: ERIERL-805</p></li></ul><h2 id="inets-7-5-2" class="section-heading"><a href="#inets-7-5-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 7.5.2</span></h2><h3 id="fixed-bugs-and-malfunctions-23" class="section-heading"><a href="#fixed-bugs-and-malfunctions-23" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The compilation time is no longer recorded in BEAM files. There remained
several undocumented functions that attempted to retrieve compilation times.
Those have now been removed.</p><p>Own Id: OTP-17962</p></li></ul><h3 id="improvements-and-new-features-11" class="section-heading"><a href="#improvements-and-new-features-11" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Documentation fix for inets:services_info/0, which now describes that Info
might be a Reason term() in case when {error, Reason} is returned as service
info.</p><p>Own Id: OTP-17931 Aux Id: ERIERL-761</p></li></ul><h2 id="inets-7-5-1" class="section-heading"><a href="#inets-7-5-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 7.5.1</span></h2><h3 id="fixed-bugs-and-malfunctions-24" class="section-heading"><a href="#fixed-bugs-and-malfunctions-24" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Avoid intermediate ungraceful shutdown of the HTTP server.</p><p>Own Id: OTP-17922 Aux Id: ERIERL-743</p></li></ul><h2 id="inets-7-5" class="section-heading"><a href="#inets-7-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 7.5</span></h2><h3 id="fixed-bugs-and-malfunctions-25" class="section-heading"><a href="#fixed-bugs-and-malfunctions-25" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Correct HTTP server URI handling to fully rely on uri_string. The server could
mistreat some URI paths that in turn could result in incorrect responses being
generated.</p><p>Own Id: OTP-17818 Aux Id: ERIERL-731</p></li></ul><h3 id="improvements-and-new-features-12" class="section-heading"><a href="#improvements-and-new-features-12" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Extend header values to httpc:request/5 to allow binary() as well. Make error
detection of invalid arguments to httpc:request/5 be more precise so an error
is returned in more cases instead of causing a hang or function_clause. Be
more precise in documentation regarding the types of arguments being accepted.</p><p>Own Id: OTP-17579 Aux Id: GH-5074</p></li></ul><h2 id="inets-7-4-2" class="section-heading"><a href="#inets-7-4-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 7.4.2</span></h2><h3 id="fixed-bugs-and-malfunctions-26" class="section-heading"><a href="#fixed-bugs-and-malfunctions-26" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Before this change hrefs in dir listing page contained percentage encoded
forward slashes which did not work properly with httpd.</p><p>Own Id: OTP-17383 Aux Id: GH-4677</p></li><li><p>Restored HTTP headers handling in inets/mod_esi.</p><p>Own Id: OTP-17600</p></li><li><p>inets/httpd dir listing icons and other improvements</p><p>Own Id: OTP-17624 Aux Id: GH-4855</p></li></ul><h3 id="improvements-and-new-features-13" class="section-heading"><a href="#improvements-and-new-features-13" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>httpc: Improve performance by removing redundant URI handling</p><p>Own Id: OTP-17460</p></li></ul><h2 id="inets-7-4-1" class="section-heading"><a href="#inets-7-4-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 7.4.1</span></h2><h3 id="fixed-bugs-and-malfunctions-27" class="section-heading"><a href="#fixed-bugs-and-malfunctions-27" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Improved user input handling in inets/mod_esi preventing unnecessary atom
creation.</p><p>Own Id: OTP-17490</p></li></ul><h2 id="inets-7-4" class="section-heading"><a href="#inets-7-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 7.4</span></h2><h3 id="improvements-and-new-features-14" class="section-heading"><a href="#improvements-and-new-features-14" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Drop all support for ftp and tftp in inets code.</p><p>Own Id: OTP-16722</p></li><li><p>Deprecate following functions in <code class="inline">httpd_util</code> module: <code class="inline">flatlength/1</code>,
<code class="inline">lhexlist_to_integer/1</code>, <code class="inline">integer_to_hexlist/1</code>, <code class="inline">strip/1</code>, and <code class="inline">suffix/1</code>.</p><p>Own Id: OTP-16723</p></li><li><p>Remove support of HTTP 0.9 in httpd.</p><p>Own Id: OTP-16724</p></li><li><p>Remove support of HTTP 0.9 in httpc.</p><p>Own Id: OTP-16725</p></li><li><p>Fixed warnings in code matching on underscore prefixed variables.</p><p>Own Id: OTP-17385 Aux Id: OTP-17123</p></li></ul><h2 id="inets-7-3-2-3" class="section-heading"><a href="#inets-7-3-2-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 7.3.2.3</span></h2><h3 id="improvements-and-new-features-15" class="section-heading"><a href="#improvements-and-new-features-15" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Remove documentation of no longer supported callback.</p><p>Own Id: OTP-18193 Aux Id: GH-6122</p></li></ul><h2 id="inets-7-3-2-2" class="section-heading"><a href="#inets-7-3-2-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 7.3.2.2</span></h2><h3 id="fixed-bugs-and-malfunctions-28" class="section-heading"><a href="#fixed-bugs-and-malfunctions-28" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Restored HTTP headers handling in inets/mod_esi.</p><p>Own Id: OTP-17600</p></li></ul><h2 id="inets-7-3-2-1" class="section-heading"><a href="#inets-7-3-2-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 7.3.2.1</span></h2><h3 id="fixed-bugs-and-malfunctions-29" class="section-heading"><a href="#fixed-bugs-and-malfunctions-29" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Improved user input handling in inets/mod_esi preventing unnecessary atom
creation.</p><p>Own Id: OTP-17490</p></li></ul><h2 id="inets-7-3-2" class="section-heading"><a href="#inets-7-3-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 7.3.2</span></h2><h3 id="fixed-bugs-and-malfunctions-30" class="section-heading"><a href="#fixed-bugs-and-malfunctions-30" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Solves CVE-2021-27563, that is make sure no form of relative path can be used
to go outside webservers directory.</p><p>Own Id: OTP-17205 Aux Id: ERIERL-608</p></li><li><p>Make sure HEAD requests rejects directory links</p><p>Own Id: OTP-17220</p></li></ul><h2 id="inets-7-3-1" class="section-heading"><a href="#inets-7-3-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 7.3.1</span></h2><h3 id="fixed-bugs-and-malfunctions-31" class="section-heading"><a href="#fixed-bugs-and-malfunctions-31" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix an issue about HTML-escaped filename in inets.</p><p>Own Id: OTP-16873 Aux Id: ERL-330</p></li></ul><h2 id="inets-7-3" class="section-heading"><a href="#inets-7-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 7.3</span></h2><h3 id="fixed-bugs-and-malfunctions-32" class="section-heading"><a href="#fixed-bugs-and-malfunctions-32" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Clarify the handling of percent encoded characters in http client.</p><p>Own Id: OTP-16650 Aux Id: ERL-1215, PR-2629</p></li><li><p>fix crash for undefined port in uri.</p><p>Own Id: OTP-16663 Aux Id: ERL-1241</p></li><li><p>Avoid timing issue when setting active once on a socket that is being closed
by the peer.</p><p>Own Id: OTP-16735 Aux Id: OTP-16697, ERIERL-496</p></li><li><p>Handle message body of response with 1XX status code as next http message.</p><p>Own Id: OTP-16746 Aux Id: ERL-1268</p></li><li><p>Fix a crash in http server when setopts is called on a socket closed by the
peer.</p><p>Own Id: OTP-16775 Aux Id: ERIERL-519</p></li><li><p>A vulnerability in the httpd module (inets application) regarding directory
traversal that was introduced in OTP 22.3.1 and corrected in OTP 22.3.4.6. It
was also introduced in OTP 23.0 and corrected in OTP 23.1 The vulnerability is
registered as CVE-2020-25623</p><p>The vulnerability is only exposed if the http server (httpd) in the inets
application is used. The vulnerability makes it possible to read arbitrary
files which the Erlang system has read access to with for example a specially
prepared http request.</p><p>Own Id: OTP-16790 Aux Id: ERIERL-522</p></li></ul><h3 id="improvements-and-new-features-16" class="section-heading"><a href="#improvements-and-new-features-16" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Add support of PATCH method in mod_esi.</p><p>Own Id: OTP-16591 Aux Id: ERIERL-484</p></li></ul><h2 id="inets-7-2" class="section-heading"><a href="#inets-7-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 7.2</span></h2><h3 id="improvements-and-new-features-17" class="section-heading"><a href="#improvements-and-new-features-17" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Remove support for deprecated functionality. Support for mod_esi eval scheme,
mod_htacess, mod_browser, apache config files and deprecated httpd_conf
functions are dropped. Module http_uri is deprecated.</p><p>Own Id: OTP-16252</p></li><li><p>Refactored the internal handling of deprecated and removed functions.</p><p>Own Id: OTP-16469</p></li></ul><h2 id="inets-7-1-3-3" class="section-heading"><a href="#inets-7-1-3-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 7.1.3.3</span></h2><h3 id="fixed-bugs-and-malfunctions-33" class="section-heading"><a href="#fixed-bugs-and-malfunctions-33" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Corrected an error regarding decode of percent encoded URLs introduced in
inets-7.1.3.</p><p>Own Id: OTP-16790 Aux Id: ERIERL-522</p></li></ul><h2 id="inets-7-1-3-2" class="section-heading"><a href="#inets-7-1-3-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 7.1.3.2</span></h2><h3 id="fixed-bugs-and-malfunctions-34" class="section-heading"><a href="#fixed-bugs-and-malfunctions-34" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix a crash in http server when setopts is called on a socket closed by the
peer.</p><p>Own Id: OTP-16775 Aux Id: ERIERL-519</p></li></ul><h2 id="inets-7-1-3-1" class="section-heading"><a href="#inets-7-1-3-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 7.1.3.1</span></h2><h3 id="fixed-bugs-and-malfunctions-35" class="section-heading"><a href="#fixed-bugs-and-malfunctions-35" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Avoid timing issue when setting active once on a socket that is being closed
by the peer.</p><p>Own Id: OTP-16735 Aux Id: OTP-16697, ERIERL-496</p></li></ul><h2 id="inets-7-1-3" class="section-heading"><a href="#inets-7-1-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 7.1.3</span></h2><h3 id="fixed-bugs-and-malfunctions-36" class="section-heading"><a href="#fixed-bugs-and-malfunctions-36" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Remove use of http_uri and mod_esi eval API.</p><p>This is a backport from OTP 23 that improves the check of URIs to ensure that
invalid URIs does not cause vulnerabilities. This will render the deprecated
mod_esi eval API unusable as it used URI that does not conform to valid URI
syntax.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-16556</p></li></ul><h2 id="inets-7-1-2" class="section-heading"><a href="#inets-7-1-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 7.1.2</span></h2><h3 id="fixed-bugs-and-malfunctions-37" class="section-heading"><a href="#fixed-bugs-and-malfunctions-37" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Inets will honor that valid HTTP headers can not have white space between
field-name and the colon.</p><p>Own Id: OTP-16169 Aux Id: ERL-1053</p></li><li><p>Changed error propagation in httpc:request/1 to return expected error tuple
instead of crashing.</p><p>Own Id: OTP-16290 Aux Id: PR-2437, ERL-1083</p></li><li><p>Fix handling of HEAD request with chunked transfer-encoding (httpc).</p><p>Own Id: OTP-16300 Aux Id: ERL-1090</p></li></ul><h2 id="inets-7-1-1" class="section-heading"><a href="#inets-7-1-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 7.1.1</span></h2><h3 id="improvements-and-new-features-18" class="section-heading"><a href="#improvements-and-new-features-18" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Add HTTP server error logging vi logger</p><p>Own Id: OTP-16019</p></li></ul><h2 id="inets-7-1" class="section-heading"><a href="#inets-7-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 7.1</span></h2><h3 id="improvements-and-new-features-19" class="section-heading"><a href="#improvements-and-new-features-19" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>httpd - Accept single LF as line terminator</p><p>Own Id: OTP-15893 Aux Id: PR-2206</p></li><li><p>mod_esi will now always propagate the actual HTTP status code that it answered
with, to later mod-modules, and not in some cases hardcode 200.</p><p>Own Id: OTP-16049 Aux Id: ERIERL-395</p></li></ul><h2 id="inets-7-0-9" class="section-heading"><a href="#inets-7-0-9" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 7.0.9</span></h2><h3 id="fixed-bugs-and-malfunctions-38" class="section-heading"><a href="#fixed-bugs-and-malfunctions-38" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix a regression in http client that causes a crash when request URI has no
scheme.</p><p>Own Id: OTP-15930 Aux Id: ERL-969</p></li></ul><h2 id="inets-7-0-8" class="section-heading"><a href="#inets-7-0-8" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 7.0.8</span></h2><h3 id="fixed-bugs-and-malfunctions-39" class="section-heading"><a href="#fixed-bugs-and-malfunctions-39" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>All incorrect (that is, all) uses of &quot;can not&quot; has been corrected to &quot;cannot&quot;
in source code comments, documentation, examples, and so on.</p><p>Own Id: OTP-14282 Aux Id: PR-1891</p></li></ul><h2 id="inets-7-0-7-2" class="section-heading"><a href="#inets-7-0-7-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 7.0.7.2</span></h2><h3 id="improvements-and-new-features-20" class="section-heading"><a href="#improvements-and-new-features-20" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Add HTTP server error logging vi logger</p><p>Own Id: OTP-16019</p></li></ul><h2 id="inets-7-0-7-1" class="section-heading"><a href="#inets-7-0-7-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 7.0.7.1</span></h2><h3 id="improvements-and-new-features-21" class="section-heading"><a href="#improvements-and-new-features-21" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>mod_esi will now always propagate the actual HTTP status code that it answered
with, to later mod-modules, and not in some cases hardcode 200.</p><p>Own Id: OTP-16049 Aux Id: ERIERL-395</p></li></ul><h2 id="inets-7-0-7" class="section-heading"><a href="#inets-7-0-7" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 7.0.7</span></h2><h3 id="fixed-bugs-and-malfunctions-40" class="section-heading"><a href="#fixed-bugs-and-malfunctions-40" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix the internal handling of the option erl_script_timeout in httpd. If
explicit erl_script_timeout value was supplied in seconds it was not correctly
converted to millisecond units for internal usage.</p><p>This change fixes the handling of erl_script_timeout in all possible
configuration scenarios.</p><p>Own Id: OTP-15769 Aux Id: ERIERL-345</p></li></ul><h2 id="inets-7-0-6" class="section-heading"><a href="#inets-7-0-6" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 7.0.6</span></h2><h3 id="fixed-bugs-and-malfunctions-41" class="section-heading"><a href="#fixed-bugs-and-malfunctions-41" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix the internal handling of the option erl_script_timeout in httpd. When
httpd was started with explicit erl_script_timeout, the value of the option
was converted to milliseconds before storage. Subsequent calls to httpd:info/1
returned the input value multiplied by 1000.</p><p>This change fixes the handing of erl_script_timeout by storing the timeout in
seconds and converting to milliseconds before usage.</p><p>Own Id: OTP-15669 Aux Id: ERIERL-321</p></li></ul><h3 id="improvements-and-new-features-22" class="section-heading"><a href="#improvements-and-new-features-22" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Enhance documentation</p><p>Own Id: OTP-15508 Aux Id: ERL-816</p></li></ul><h2 id="inets-7-0-5" class="section-heading"><a href="#inets-7-0-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 7.0.5</span></h2><h3 id="fixed-bugs-and-malfunctions-42" class="section-heading"><a href="#fixed-bugs-and-malfunctions-42" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed bug that causes a crash in http client when using hostnames (e.g.
localhost) with the the option ipv6_host_with_brackets set to true.</p><p>This change also fixes a regression: httpc:request fails with connection error
(nxdomain) if option ipv6_host_with_brackets set to true and host component of
the URI is an IPv6 address.</p><p>Own Id: OTP-15554 Aux Id: ERIERL-289</p></li></ul><h2 id="inets-7-0-4" class="section-heading"><a href="#inets-7-0-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 7.0.4</span></h2><h3 id="fixed-bugs-and-malfunctions-43" class="section-heading"><a href="#fixed-bugs-and-malfunctions-43" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Make sure ipv6 addresses with brackets in URIs are converted correctly before
passing to lower level functions like gen_tcp and ssl functions. Could cause
connection to fail.</p><p>Own Id: OTP-15544 Aux Id: ERIERL-289</p></li></ul><h2 id="inets-7-0-3" class="section-heading"><a href="#inets-7-0-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 7.0.3</span></h2><h3 id="fixed-bugs-and-malfunctions-44" class="section-heading"><a href="#fixed-bugs-and-malfunctions-44" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed http client to not send 'content-length' header in chunked encoded
requests.</p><p>Own Id: OTP-15338 Aux Id: ERL-733</p></li><li><p>Fixed http client to not drop explicit 'Content-Type' header in requests
without a body such as requests with the 'Content-Type' of
application/x-www-form-urlencoded.</p><p>Own Id: OTP-15339 Aux Id: ERL-736</p></li></ul><h2 id="inets-7-0-2" class="section-heading"><a href="#inets-7-0-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 7.0.2</span></h2><h3 id="fixed-bugs-and-malfunctions-45" class="section-heading"><a href="#fixed-bugs-and-malfunctions-45" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Enhance error handling, that is mod_get will return 403 if a path is a
directory and not a file.</p><p>Own Id: OTP-15192</p></li><li><p>Do not use chunked-encoding with 1xx, 204 and 304 responses when using
mod_esi. Old behavior was not compliant with HTTP/1.1 RFC and could cause
clients to hang when they received 1xx, 204 or 304 responses that included an
empty chunked-encoded body.</p><p>Own Id: OTP-15241</p></li><li><p>Add robust handling of chunked-encoded HTTP responses with an empty body (1xx,
204, 304). Old behavior could cause the client to hang when connecting to a
faulty server implementation.</p><p>Own Id: OTP-15242</p></li></ul><h2 id="inets-7-0-1" class="section-heading"><a href="#inets-7-0-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 7.0.1</span></h2><h3 id="fixed-bugs-and-malfunctions-46" class="section-heading"><a href="#fixed-bugs-and-malfunctions-46" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Change status code for no mod found to handle request to 501</p><p>Own Id: OTP-15215</p></li></ul><h2 id="inets-7-0" class="section-heading"><a href="#inets-7-0" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 7.0</span></h2><h3 id="fixed-bugs-and-malfunctions-47" class="section-heading"><a href="#fixed-bugs-and-malfunctions-47" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed HTTP content injection bug in httpc (ERL-456).</p><p>Own Id: OTP-14726</p></li><li><p>Fixed support for URI-references in HTTP 'Location' header (ERL-333).</p><p>Own Id: OTP-14729</p></li><li><p>Fix broken 'Content-Type' handling in httpc (ERL-536).</p><p>Own Id: OTP-15006</p></li><li><p>Fix handling of relative paths in the script_alias property of httpd
(ERL-574).</p><p>Own Id: OTP-15021</p></li><li><p>Fix httpd:reload_config/2 with path() as the first argument (ERL-578).</p><p>Own Id: OTP-15025</p></li><li><p>Improved gracefulness.</p><p>Own Id: OTP-15042</p></li></ul><h3 id="improvements-and-new-features-23" class="section-heading"><a href="#improvements-and-new-features-23" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Split inets and create separate ftp and tftp apps.</p><p>Own Id: OTP-14113</p></li></ul><h2 id="inets-6-5-2-4" class="section-heading"><a href="#inets-6-5-2-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 6.5.2.4</span></h2><h3 id="fixed-bugs-and-malfunctions-48" class="section-heading"><a href="#fixed-bugs-and-malfunctions-48" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Do not use chunked-encoding with 1xx, 204 and 304 responses when using
mod_esi. Old behavior was not compliant with HTTP/1.1 RFC and could cause
clients to hang when they received 1xx, 204 or 304 responses that included an
empty chunked-encoded body.</p><p>Own Id: OTP-15241</p></li><li><p>Add robust handling of chunked-encoded HTTP responses with an empty body (1xx,
204, 304). Old behavior could cause the client to hang when connecting to a
faulty server implementation.</p><p>Own Id: OTP-15242</p></li></ul><h2 id="inets-6-5-2-3" class="section-heading"><a href="#inets-6-5-2-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 6.5.2.3</span></h2><h3 id="fixed-bugs-and-malfunctions-49" class="section-heading"><a href="#fixed-bugs-and-malfunctions-49" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Change status code for no mod found to handle request to 501</p><p>Own Id: OTP-15215</p></li></ul><h2 id="inets-6-5-2-2" class="section-heading"><a href="#inets-6-5-2-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 6.5.2.2</span></h2><h3 id="fixed-bugs-and-malfunctions-50" class="section-heading"><a href="#fixed-bugs-and-malfunctions-50" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Enhance error handling, that is mod_get will return 403 if a path is a
directory and not a file.</p><p>Own Id: OTP-15192</p></li></ul><h2 id="inets-6-5-2-1" class="section-heading"><a href="#inets-6-5-2-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 6.5.2.1</span></h2><h3 id="improvements-and-new-features-24" class="section-heading"><a href="#improvements-and-new-features-24" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Options added for setting low-level properties on the underlying TCP
connections. The options are: <code class="inline">sock_ctrl</code>, <code class="inline">sock_data_act</code> and
<code class="inline">sock_data_pass</code>. See the manual for details.</p><p>Own Id: OTP-15120 Aux Id: ERIERL-192</p></li></ul><h2 id="inets-6-5-2" class="section-heading"><a href="#inets-6-5-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 6.5.2</span></h2><h3 id="fixed-bugs-and-malfunctions-51" class="section-heading"><a href="#fixed-bugs-and-malfunctions-51" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>inets: httpd - Gracefully handle bad headers</p><p>The option max_headers operated on the individual header length instead of the
total length of all headers. Also headers with empty keys are now discarded.</p><p>Own Id: OTP-15092</p></li></ul><h2 id="inets-6-5-1" class="section-heading"><a href="#inets-6-5-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 6.5.1</span></h2><h3 id="fixed-bugs-and-malfunctions-52" class="section-heading"><a href="#fixed-bugs-and-malfunctions-52" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix broken options handling in httpc (ERL-441).</p><p>Own Id: OTP-15007</p></li></ul><h2 id="inets-6-5" class="section-heading"><a href="#inets-6-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 6.5</span></h2><h3 id="fixed-bugs-and-malfunctions-53" class="section-heading"><a href="#fixed-bugs-and-malfunctions-53" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>httpc_manager crashes when a long running request is sent on a persistent HTTP
connection (keep-alive). Fixed httpc_manager to use proper timeouts on
keep-alive connections.</p><p>Own Id: OTP-14908</p></li></ul><h3 id="improvements-and-new-features-25" class="section-heading"><a href="#improvements-and-new-features-25" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Add support for unix domain sockets in the http client.</p><p>Own Id: OTP-14854</p></li></ul><h2 id="inets-6-4-5" class="section-heading"><a href="#inets-6-4-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 6.4.5</span></h2><h3 id="fixed-bugs-and-malfunctions-54" class="section-heading"><a href="#fixed-bugs-and-malfunctions-54" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>CGI environment variable CONTENT_LENGTH shall be a string</p><p>Own Id: OTP-14679</p></li><li><p>In relaxed mode disregard Content-Length header if there is also a
Transfer-Encoding header.</p><p>Own Id: OTP-14727</p></li><li><p>Eliminated race condition, that could cause http request to sporadically fail
to complete successfully, when keep-alive connections are used.</p><p>Own Id: OTP-14783</p></li></ul><h2 id="inets-6-4-4" class="section-heading"><a href="#inets-6-4-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 6.4.4</span></h2><h3 id="fixed-bugs-and-malfunctions-55" class="section-heading"><a href="#fixed-bugs-and-malfunctions-55" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Correct the handling of location headers so that the status code is not hard
coded. This should have been fixed by commit
2cc5ba70cbbc6b3ace81a2a0324417c3b65265bb but unfortunately was broken during a
code refactoring and unnoticed due to a faulty placed test case.</p><p>Own Id: OTP-14761</p></li></ul><h2 id="inets-6-4-3" class="section-heading"><a href="#inets-6-4-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 6.4.3</span></h2><h3 id="improvements-and-new-features-26" class="section-heading"><a href="#improvements-and-new-features-26" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Fix broken handling of POST requests</p><p>New chunk mechanism of body data in POST requests added in
5d01c70ca399edf28e99dc760506329689fab6ba broke handling of POST body data not
using the new mechanism.</p><p>Own Id: OTP-14656</p></li><li><p>Make sure ints:stop/2 of the service httpd is synchronous</p><p>Own Id: OTP-14696</p></li><li><p>Honor status code returned by ESI script and modernize &quot;location&quot; header
handling.</p><p>Own Id: OTP-14716</p></li></ul><h2 id="inets-6-4-2" class="section-heading"><a href="#inets-6-4-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 6.4.2</span></h2><h3 id="fixed-bugs-and-malfunctions-56" class="section-heading"><a href="#fixed-bugs-and-malfunctions-56" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Make sure mod_log uses the correct status code</p><p>Own Id: OTP-14510</p></li><li><p>Correct behaviour of mod_disk_log to proparly handle repair options</p><p>Own Id: OTP-14530</p></li></ul><h2 id="inets-6-4-1" class="section-heading"><a href="#inets-6-4-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 6.4.1</span></h2><h3 id="fixed-bugs-and-malfunctions-57" class="section-heading"><a href="#fixed-bugs-and-malfunctions-57" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>http_uri aligned to follow RFC 3986 and not convert &quot;+&quot; to space when decoding
URIs.</p><p>Own Id: OTP-14573</p></li></ul><h3 id="improvements-and-new-features-27" class="section-heading"><a href="#improvements-and-new-features-27" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Added new option max_client_body_chunk to httpd server to allow chunked
delivery of PUT and POST data to mod_esi callback. Note, new mod_esi callback
implementation is required.</p><p>Also correct value provided by server_name environment variable</p><p>Own Id: OTP-14450</p></li></ul><h2 id="inets-6-4" class="section-heading"><a href="#inets-6-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 6.4</span></h2><h3 id="fixed-bugs-and-malfunctions-58" class="section-heading"><a href="#fixed-bugs-and-malfunctions-58" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>httpd_util:rfc1123_date/1 gracefully handle invalid DST dates by returning the
original time in the expected rfc1123 format.</p><p>Own Id: OTP-14394</p></li></ul><h3 id="improvements-and-new-features-28" class="section-heading"><a href="#improvements-and-new-features-28" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Add unicode binary support to http_uri functions</p><p>Own Id: OTP-14404</p></li><li><p>httpc - Change timeout handling so the redirects cause a new timer to be set.
This means that a simple redirected request could return after 2*timeout
milliseconds.</p><p>Own Id: OTP-14429</p></li></ul><h2 id="inets-6-3-9" class="section-heading"><a href="#inets-6-3-9" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 6.3.9</span></h2><h3 id="fixed-bugs-and-malfunctions-59" class="section-heading"><a href="#fixed-bugs-and-malfunctions-59" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The close of a chunked file reception crashed in a certain timing sequence.</p><p>Own Id: OTP-14391 Aux Id: seq13306</p></li></ul><h2 id="inets-6-3-8" class="section-heading"><a href="#inets-6-3-8" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 6.3.8</span></h2><h3 id="improvements-and-new-features-29" class="section-heading"><a href="#improvements-and-new-features-29" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Added missing release note for inets-6.3.7</p><p>Own Id: OTP-14383</p></li></ul><h2 id="inets-6-3-7" class="section-heading"><a href="#inets-6-3-7" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 6.3.7</span></h2><h3 id="fixed-bugs-and-malfunctions-60" class="section-heading"><a href="#fixed-bugs-and-malfunctions-60" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed a bug in ftp that made further operations after a recv_chunk operation
impossible.</p><p>Own Id: OTP-14242</p></li><li><p>Make default port, 80 and 443, implicit in automatic redirection.</p><p>Own Id: OTP-14301</p></li></ul><h2 id="inets-6-3-6" class="section-heading"><a href="#inets-6-3-6" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 6.3.6</span></h2><h3 id="fixed-bugs-and-malfunctions-61" class="section-heading"><a href="#fixed-bugs-and-malfunctions-61" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Chunk size decoding could fail. The symptom was that chunk decoding sometimes
failed depending on timing of the received stream. If chunk size was split
into two different packets decoding would fail.</p><p>Own Id: OTP-13571 Aux Id: ERL-116</p></li><li><p>Prevent httpc user process to hang if httpc_handler process terminates
unexpectedly</p><p>Own Id: OTP-14091</p></li><li><p>Correct Host header, to include port number, when redirecting requests.</p><p>Own Id: OTP-14097</p></li><li><p>Shutdown gracefully on connection or TLS handshake errors</p><p>Own Id: OTP-14173 Aux Id: seq13262</p></li></ul><h2 id="inets-6-3-5" class="section-heading"><a href="#inets-6-3-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 6.3.5</span></h2><h3 id="fixed-bugs-and-malfunctions-62" class="section-heading"><a href="#fixed-bugs-and-malfunctions-62" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Correct mistakes in ftp client introduced in inets-6.3.4</p><p>Own Id: OTP-14203 Aux Id: OTP-13982</p></li></ul><h2 id="inets-6-3-4" class="section-heading"><a href="#inets-6-3-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 6.3.4</span></h2><h3 id="fixed-bugs-and-malfunctions-63" class="section-heading"><a href="#fixed-bugs-and-malfunctions-63" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixes a bug that makes the ftp client end up in bad state if there is a multi
line response from the server and the response number is in the message being
sent.</p><p>Own Id: OTP-13960 Aux Id: PR1196</p></li><li><p>The ftp client could stop consuming messages when the multiline response
handling was corrected.</p><p>Own Id: OTP-13967</p></li><li><p>Fix keep-alive https through proxy connections so that all requests, following
the first one, will run as expected instead of failing.</p><p>Own Id: OTP-14041</p></li><li><p>Fix bug from commit fdfda2fab0921d409789174556582db28141448e that could make
listing of group members in mod_auth callbacks fail.</p><p>Own Id: OTP-14082</p></li></ul><h3 id="improvements-and-new-features-30" class="section-heading"><a href="#improvements-and-new-features-30" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Update behavior of httpc:request to match RFC-7231</p><p>Own Id: OTP-13902</p></li><li><p>Fixed dialyzer warnings as well as some white-space issues. Thanks to Kostis.</p><p>Own Id: OTP-13982 Aux Id: PR-1207</p></li></ul><h2 id="inets-6-3-3" class="section-heading"><a href="#inets-6-3-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 6.3.3</span></h2><h3 id="fixed-bugs-and-malfunctions-64" class="section-heading"><a href="#fixed-bugs-and-malfunctions-64" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The legacy option 'inet6fb4' for inets had stopped working. This bug has now
been corrected. Fix by Edwin Fine in bugs.erlang.org ERL-200 and Github
PR#1132.</p><p>Own Id: OTP-13776 Aux Id: ERL-200 PR-1132</p></li></ul><h2 id="inets-6-3-2" class="section-heading"><a href="#inets-6-3-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 6.3.2</span></h2><h3 id="improvements-and-new-features-31" class="section-heading"><a href="#improvements-and-new-features-31" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>PUT and DELETE support has been added to mod_esi</p><p>Own Id: OTP-13688 Aux Id: seq13149</p></li></ul><h2 id="inets-6-3-1" class="section-heading"><a href="#inets-6-3-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 6.3.1</span></h2><h3 id="fixed-bugs-and-malfunctions-65" class="section-heading"><a href="#fixed-bugs-and-malfunctions-65" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>A debug message was accidentally left enabled in the ftp client.</p><p>Own Id: OTP-13712 Aux Id: seq13143</p></li></ul><h2 id="inets-6-3" class="section-heading"><a href="#inets-6-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 6.3</span></h2><h3 id="fixed-bugs-and-malfunctions-66" class="section-heading"><a href="#fixed-bugs-and-malfunctions-66" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Ftp client fixes: 1) Corrected a bug that the ftp client gen_server crashed if
the listening data socket was closed.</p><ol start="2"><li>Corrections of ftp client error codes so they are as defined in the
reference manual</li></ol><p>Own Id: OTP-13644</p></li></ul><h3 id="improvements-and-new-features-32" class="section-heading"><a href="#improvements-and-new-features-32" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Remove usage of erlang:now().</p><p>Own Id: OTP-12441</p></li><li><p>Add handling of DELETE Body to http client.</p><p>Own Id: OTP-13383 Aux Id: PR-972</p></li><li><p>Removed references to mod_include and webtool from examples and tests.</p><p>Own Id: OTP-13445 Aux Id: PR-988</p></li><li><p>Remove module inets_regexp. Module re should be used instead.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-13561</p></li></ul><h2 id="inets-6-2-4" class="section-heading"><a href="#inets-6-2-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 6.2.4</span></h2><h3 id="improvements-and-new-features-33" class="section-heading"><a href="#improvements-and-new-features-33" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Handle multiple \t in mime types file</p><p>Own Id: OTP-13663 Aux Id: seq13132</p></li></ul><h2 id="inets-6-2-3" class="section-heading"><a href="#inets-6-2-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 6.2.3</span></h2><h3 id="improvements-and-new-features-34" class="section-heading"><a href="#improvements-and-new-features-34" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Put back unused module inets_regexp and remove it in OTP 19 instead as it is
an incompatibility, although it is an undocumented module and should not
affect other applications.</p><p>Own Id: OTP-13533</p></li></ul><h2 id="inets-6-2-2" class="section-heading"><a href="#inets-6-2-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 6.2.2</span></h2><h3 id="improvements-and-new-features-35" class="section-heading"><a href="#improvements-and-new-features-35" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Add environment information item peer_cert to mod_esi</p><p>Own Id: OTP-13510</p></li></ul><h2 id="inets-6-2-1" class="section-heading"><a href="#inets-6-2-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 6.2.1</span></h2><h3 id="fixed-bugs-and-malfunctions-67" class="section-heading"><a href="#fixed-bugs-and-malfunctions-67" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Mend ipv6_host_with_brackets option in httpc</p><p>Own Id: OTP-13417</p></li></ul><h2 id="inets-6-2" class="section-heading"><a href="#inets-6-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 6.2</span></h2><h3 id="fixed-bugs-and-malfunctions-68" class="section-heading"><a href="#fixed-bugs-and-malfunctions-68" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The TFTP client/server has been fixed to allow file sizes larger than 32MB
block by allowing the 16 bit block counter to wrap. Since this is a commonly
accepted behavior we regard it as a bug fix.</p><p>Own Id: OTP-13403</p></li></ul><h3 id="improvements-and-new-features-36" class="section-heading"><a href="#improvements-and-new-features-36" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Handle HTTP PATCH method in client.</p><p>Own Id: OTP-13286</p></li><li><p>Expected termination should not be logged as an application error.</p><p>Own Id: OTP-13389</p></li></ul><h2 id="inets-6-1-1-1" class="section-heading"><a href="#inets-6-1-1-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 6.1.1.1</span></h2><h3 id="fixed-bugs-and-malfunctions-69" class="section-heading"><a href="#fixed-bugs-and-malfunctions-69" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Mend ipv6_host_with_brackets option in httpc</p><p>Own Id: OTP-13417</p></li></ul><h2 id="inets-6-1-1" class="section-heading"><a href="#inets-6-1-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 6.1.1</span></h2><h3 id="fixed-bugs-and-malfunctions-70" class="section-heading"><a href="#fixed-bugs-and-malfunctions-70" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>mod_alias now traverses all aliases picking the longest match and not the
first match.</p><p>Own Id: OTP-13248</p></li></ul><h2 id="inets-6-1" class="section-heading"><a href="#inets-6-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 6.1</span></h2><h3 id="fixed-bugs-and-malfunctions-71" class="section-heading"><a href="#fixed-bugs-and-malfunctions-71" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Replace obs-folds with spaces instead of failing</p><p>Own Id: OTP-13069</p></li><li><p>Add validation fun for URI scheme to http_uri API</p><p>Own Id: OTP-13071</p></li><li><p>Handle stream bodies as documented.</p><p>Own Id: OTP-13093</p></li><li><p>Correct error handling of mod_esi generated chunks. Send warning headers in
chunk trailers instead of generating an unexpected additional 500 request
response, when problems, such as a timeout occurs.</p><p>Own Id: OTP-13110</p></li><li><p>HTTP client terminates gracefully when an invalid chunked length header is
encountered.</p><p>Own Id: OTP-13117</p></li></ul><h3 id="improvements-and-new-features-37" class="section-heading"><a href="#improvements-and-new-features-37" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Add default for SNI (Server Name Indication) when running https using the
inets HTTP-client.</p><p>Own Id: OTP-12985</p></li><li><p>Be forgiving to chunked sizes that have trailing whitespaces as prior
implementation was. Also some legacy embedded devices does actually have
trailing whitespaces even though this in not according to the spec.</p><p>Own Id: OTP-13116</p></li></ul><h2 id="inets-6-0-3" class="section-heading"><a href="#inets-6-0-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 6.0.3</span></h2><h3 id="fixed-bugs-and-malfunctions-72" class="section-heading"><a href="#fixed-bugs-and-malfunctions-72" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Improved error handling and gracfully termination when an invalid chunked
length header is encountered.</p><p>Own Id: OTP-13061</p></li></ul><h3 id="improvements-and-new-features-38" class="section-heading"><a href="#improvements-and-new-features-38" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Add possibility to set socket options, such as nodelay, for httpd. Also phase
out legacy option value inet6bf4 for the ipfamily option. This value will be
translated to the value inet.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-13062</p></li></ul><h2 id="inets-6-0-2" class="section-heading"><a href="#inets-6-0-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 6.0.2</span></h2><h3 id="fixed-bugs-and-malfunctions-73" class="section-heading"><a href="#fixed-bugs-and-malfunctions-73" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Avoid crash in mod_auth_server and mod_security_server due to using an atom
instead of a string when creating a name.</p><p>Own Id: OTP-13022</p></li></ul><h3 id="improvements-and-new-features-39" class="section-heading"><a href="#improvements-and-new-features-39" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Add function response_default_headers/0 to httpd customize API, to allow user
to specify default values for HTTP response headers.</p><p>Own Id: OTP-13013</p></li></ul><h2 id="inets-6-0-1" class="section-heading"><a href="#inets-6-0-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 6.0.1</span></h2><h3 id="fixed-bugs-and-malfunctions-74" class="section-heading"><a href="#fixed-bugs-and-malfunctions-74" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix broken socket feature, that is on Linux systems a socket may be opened
before starting Erlang and then passed to Erlang's httpd daemon. This is
useful as the wrap program can open a privileged port and Erlang does not have
to be run as root.</p><p>Own Id: OTP-12875 Aux Id: seq12878</p></li><li><p>Fix broken socket feature, that is on Linux systems a socket may be opened
before starting Erlang and then passed to Erlangs tftp daemon. This is useful
as the wrap program can open a privileged port and Erlang does not have to be
run as root.</p><p>Own Id: OTP-12898 Aux Id: seq12900</p></li><li><p>httpc_handler should react properly to cancel requests even when the request
to be canceled was already finished but httpc_manager did not get notified
about that yet.</p><p>Own Id: OTP-12922</p></li></ul><h3 id="improvements-and-new-features-40" class="section-heading"><a href="#improvements-and-new-features-40" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Added format_status function to httpd process to avoid sensitive information
to be printed in supervisor logs.</p><p>Own Id: OTP-12976</p></li><li><p>Return meaningful error reason disregarding whether a http proxy is used or
not.</p><p>Own Id: OTP-12984</p></li></ul><h2 id="inets-6-0" class="section-heading"><a href="#inets-6-0" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 6.0</span></h2><h3 id="fixed-bugs-and-malfunctions-75" class="section-heading"><a href="#fixed-bugs-and-malfunctions-75" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix race condition in httpc. If the socket is closed by the peer do not try to
close it again.</p><p>Own Id: OTP-11845</p></li><li><p>Avoid process leak by gracefully terminating httpc request handler process
when send operation fails.</p><p>Own Id: OTP-12362</p></li><li><p>Reject messages with a Content-Length less than 0</p><p>Own Id: OTP-12739 Aux Id: seq12860</p></li><li><p>Let gen_tcp:controlling_process/2 and inet_sctp:connect/[45] propagate
prim_inet:setopt/3 errors instead of having them generate badmatch exceptions.</p><p>Own Id: OTP-12798</p></li></ul><h3 id="improvements-and-new-features-41" class="section-heading"><a href="#improvements-and-new-features-41" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Remove Server Side Include support from inets, as this is an old technique
that has security issues and was not well tested.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-12156</p></li><li><p>New value in <code class="inline">server_tokens</code> config for limiting banner grabbing attempts.</p><p>By setting <code class="inline">{server_tokens, none}</code> in <code class="inline">ServiceConfig</code> for
<code class="inline">inets:start(httpd, ServiceConfig)</code>, the &quot;Server:&quot; header will not be set in
messages from the server.</p><p>Own Id: OTP-12661 Aux Id: seq12840</p></li><li><p>To enable the HTTP server to run in a virtualized environment, where there can
be more that one server that has the same ip-address and port, we add a new
option profile.</p><p>Own Id: OTP-12674</p></li><li><p>httpc: Fix implementation of graceful shudown to work as intended for keep
alive connections not using pipelining.</p><p>Own Id: OTP-12803</p></li><li><p>Correct handling of proxy options when using persistent connections.</p><p>Own Id: OTP-12822</p></li></ul><h2 id="inets-5-10-9" class="section-heading"><a href="#inets-5-10-9" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 5.10.9</span></h2><h3 id="improvements-and-new-features-42" class="section-heading"><a href="#improvements-and-new-features-42" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Add behaviour with optional callbacks to customize the inets HTTP server.</p><p>Own Id: OTP-12776</p></li></ul><h2 id="inets-5-10-8" class="section-heading"><a href="#inets-5-10-8" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 5.10.8</span></h2><h3 id="fixed-bugs-and-malfunctions-76" class="section-heading"><a href="#fixed-bugs-and-malfunctions-76" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Reject messages with a Content-Length less than 0</p><p>Own Id: OTP-12739 Aux Id: seq12860</p></li></ul><h2 id="inets-5-10-7" class="section-heading"><a href="#inets-5-10-7" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 5.10.7</span></h2><h3 id="improvements-and-new-features-43" class="section-heading"><a href="#improvements-and-new-features-43" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>New value in <code class="inline">server_tokens</code> config for limiting banner grabbing attempts.</p><p>By setting <code class="inline">{server_tokens, none}</code> in <code class="inline">ServiceConfig</code> for
<code class="inline">inets:start(httpd, ServiceConfig)</code>, the &quot;Server:&quot; header will not be set in
messages from the server.</p><p>Own Id: OTP-12661 Aux Id: seq12840</p></li></ul><h2 id="inets-5-10-6" class="section-heading"><a href="#inets-5-10-6" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 5.10.6</span></h2><h3 id="fixed-bugs-and-malfunctions-77" class="section-heading"><a href="#fixed-bugs-and-malfunctions-77" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>inets: parse correctly 'Set-Cookie' header with empty value</p><p>httpc_cookie should parse cookies with empty values and no attributes set in
the 'Set-Cookie' headers.</p><p>Own Id: OTP-12455</p></li></ul><h3 id="improvements-and-new-features-44" class="section-heading"><a href="#improvements-and-new-features-44" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Add parsing of URI fragments to http_uri:parse</p><p>This fixes a bug in httpc where redirection URIs could lead to bad requests if
they contained fragments.</p><p>Own Id: OTP-12398</p></li><li><p>httpc: http client now ignores invalid set-cookie headers</p><p>Own Id: OTP-12430</p></li></ul><h2 id="inets-5-10-5" class="section-heading"><a href="#inets-5-10-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 5.10.5</span></h2><h3 id="fixed-bugs-and-malfunctions-78" class="section-heading"><a href="#fixed-bugs-and-malfunctions-78" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>mod_alias now handles https-URIs properly</p><p>Consistent view of configuration parameter keep_alive_timeout, should be
presented in the httpd:info/[1,2] function in the same unit as it is
inputted.</p><p>Own Id: OTP-12436 Aux Id: seq12786</p></li></ul><h3 id="improvements-and-new-features-45" class="section-heading"><a href="#improvements-and-new-features-45" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Gracefully handle invalid content-length headers instead of crashing in
list_to_integer.</p><p>Own Id: OTP-12429</p></li></ul><h2 id="inets-5-10-4" class="section-heading"><a href="#inets-5-10-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 5.10.4</span></h2><h3 id="fixed-bugs-and-malfunctions-79" class="section-heading"><a href="#fixed-bugs-and-malfunctions-79" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed a spelling mistake in httpc documentation.</p><p>Own Id: OTP-12221</p></li></ul><h3 id="improvements-and-new-features-46" class="section-heading"><a href="#improvements-and-new-features-46" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Add option {ftp_extension, boolean} to enable use of extended commands EPSV
and EPRT, as specified in RFC 2428, for IPv4 instead of using the legacy
commands. Ipv6 cannot be supported without the extended commands.</p><p>Own Id: OTP-12255</p></li></ul><h2 id="inets-5-10-3" class="section-heading"><a href="#inets-5-10-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 5.10.3</span></h2><h3 id="fixed-bugs-and-malfunctions-80" class="section-heading"><a href="#fixed-bugs-and-malfunctions-80" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix some spelling mistakes in documentation</p><p>Own Id: OTP-12152</p></li></ul><h3 id="improvements-and-new-features-47" class="section-heading"><a href="#improvements-and-new-features-47" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>httpd: Separate timeout for TLS/SSL handshake from keepalive timeout</p><p>Own Id: OTP-12013</p></li><li><p>Warning: this is experimental and may disappear or change without previous
warning.</p><p>Experimental support for running Quickcheck and PropEr tests from common_test
suites is added to common_test. See the reference manual for the new module
<code class="inline">ct_property_testing</code>.</p><p>Experimental property tests are added under
<code class="inline">lib/{inet,ssh}/test/property_test</code>. They can be run directly or from the
commont_test suites <code class="inline">inet/ftp_property_test_SUITE.erl</code> and
<code class="inline">ssh/test/ssh_property_test_SUITE.erl</code>.</p><p>See the code in the <code class="inline">test</code> directories and the man page for details.</p><p>(Thanks to Tuncer Ayaz for a patch adding Triq)</p><p>Own Id: OTP-12119</p></li></ul><h2 id="inets-5-10-2" class="section-heading"><a href="#inets-5-10-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 5.10.2</span></h2><h3 id="fixed-bugs-and-malfunctions-81" class="section-heading"><a href="#fixed-bugs-and-malfunctions-81" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>httpc: Fix streaming bugs when handling small responses</p><p>Own Id: OTP-11992</p></li></ul><h2 id="inets-5-10-1" class="section-heading"><a href="#inets-5-10-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 5.10.1</span></h2><h3 id="fixed-bugs-and-malfunctions-82" class="section-heading"><a href="#fixed-bugs-and-malfunctions-82" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Correct distirbing mode for httpd:reload_config/2</p><p>Own Id: OTP-11914</p></li></ul><h3 id="improvements-and-new-features-48" class="section-heading"><a href="#improvements-and-new-features-48" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Improved handling of invalid strings in the HTTP request line.</p><p>Impact: May improve memory consumption</p><p>Own Id: OTP-11925 Aux Id: Sequence 12601</p></li></ul><h2 id="inets-5-10" class="section-heading"><a href="#inets-5-10" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 5.10</span></h2><h3 id="fixed-bugs-and-malfunctions-83" class="section-heading"><a href="#fixed-bugs-and-malfunctions-83" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed a spelling mistake in httpc doc (Thanks to Wasif Riaz Malik)</p><p>Own Id: OTP-11538</p></li><li><p>Application upgrade (appup) files are corrected for the following
applications:</p><p><code class="inline">asn1, common_test, compiler, crypto, debugger, dialyzer, edoc, eldap, erl_docgen, et, eunit, gs, hipe, inets, observer, odbc, os_mon, otp_mibs, parsetools, percept, public_key, reltool, runtime_tools, ssh, syntax_tools, test_server, tools, typer, webtool, wx, xmerl</code></p><p>A new test utility for testing appup files is added to test_server. This is
now used by most applications in OTP.</p><p>(Thanks to Tobias Schlager)</p><p>Own Id: OTP-11744</p></li><li><p>ftp now sanitize file name, user name and passwords from &lt;CR&gt; and &lt;LF&gt; tags
(Thanks to Sergei Golovan)</p><p>Own Id: OTP-11750</p></li><li><p>Corrected error handling in the HTTP client, making it behave more graceful.</p><p>Thanks to Kirilll Zaborsky</p><p>Own Id: OTP-11794</p></li><li><p>Support identity transfer-encoding in httpc.</p><p>Thanks to Anthony Ramine</p><p>Own Id: OTP-11802</p></li><li><p>Ignore empty Set-Cookie headers to increase interoperability with servers that
violate the RFC.</p><p>Thanks to Kirilll Zaborsky</p><p>Own Id: OTP-11803</p></li></ul><h3 id="improvements-and-new-features-49" class="section-heading"><a href="#improvements-and-new-features-49" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>The commit 6189bc07 &quot;inets: httpc improve pipelining&quot; has been reverted, as it
turned out to break things rather than improve pipelining utilization. It is
instead up to the user to configure httpc and use it wisely to be able to get
the most out of pipelining.</p><p>Own Id: OTP-11756</p></li><li><p>Handle all response codes in httpd_util:message/3</p><p>Own Id: OTP-11838</p></li></ul><h2 id="inets-5-9-8" class="section-heading"><a href="#inets-5-9-8" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 5.9.8</span></h2><h3 id="improvements-and-new-features-50" class="section-heading"><a href="#improvements-and-new-features-50" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Mend max_clients check that was broken and avoid too extensive logging that
could cause memory problems.</p><p>Own Id: OTP-11557 Aux Id: seq12478</p></li></ul><h2 id="inets-5-9-7" class="section-heading"><a href="#inets-5-9-7" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 5.9.7</span></h2><h3 id="fixed-bugs-and-malfunctions-84" class="section-heading"><a href="#fixed-bugs-and-malfunctions-84" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix httpd config option 'script_timeout' and fixed httpd config option
'keep_alive_timeout'. Thanks to Johannes Weissl.</p><p>Own Id: OTP-11276</p></li><li><p>Make httpc:request_cancel/[1,2] asynchronous. Previously these functions
tried to guarantee request answer would not reach the client, which only
worked for some of the use cases. Now these functions are totally asynchronous
which makes it the clients responsibility to disregard possible answers to
canceled requests.</p><p>Also pipelining implementation has been changed to improve the utilization
factor. Further investigation of possible enhancements in this area are
planned for later.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-11312</p></li><li><p>[httpd] Add handling of new response for mod_head (otherwise causing
case_clause crash). Also updated logging: Removed logging for keep-alive
connections timeout (this is a normal occurrence and not an error) and some
access-log body size corrections.</p><p>Own Id: OTP-11328</p></li></ul><h3 id="improvements-and-new-features-51" class="section-heading"><a href="#improvements-and-new-features-51" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>The ftp client now supports ftp over tls (ftps).</p><p>Own Id: OTP-11037</p></li></ul><h2 id="inets-5-9-6" class="section-heading"><a href="#inets-5-9-6" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 5.9.6</span></h2><h3 id="improvements-and-new-features-52" class="section-heading"><a href="#improvements-and-new-features-52" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>httpc: Allow content body in DELETE requests. Thanks to James Wheare.</p><p>Own Id: OTP-11190</p></li><li><p>Add missing brackets to report formatting on ftp_progress process exit. Thanks
to Artur Wilniewczyc.</p><p>Own Id: OTP-11202</p></li><li><p>Fix some errors in the inets documentation. Thanks to Johannes Weissl.</p><p>Own Id: OTP-11210</p></li><li><p>Fix various typos in httpd, inets. Thanks to Tomohiko Aono.</p><p>Own Id: OTP-11226</p></li><li><p>Fix httpd config option 'erl_script_nocache'. Thanks to Johannes Weissl.</p><p>Own Id: OTP-11260</p></li></ul><h2 id="inets-5-9-5" class="section-heading"><a href="#inets-5-9-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 5.9.5</span></h2><h3 id="fixed-bugs-and-malfunctions-85" class="section-heading"><a href="#fixed-bugs-and-malfunctions-85" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Reverted incorrect commit that broke cookie handling when using
httpc-profiles.</p><p>Own Id: OTP-10956</p></li></ul><h3 id="improvements-and-new-features-53" class="section-heading"><a href="#improvements-and-new-features-53" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Fix http_request:http_headers/1 to send content-length when length is zero.
Thanks to CA Meijer.</p><p>Own Id: OTP-10934</p></li><li><p>Integrate elliptic curve contribution from Andreas Schultz</p><p>In order to be able to support elliptic curve cipher suites in SSL/TLS,
additions to handle elliptic curve infrastructure has been added to public_key
and crypto.</p><p>This also has resulted in a rewrite of the crypto API to gain consistency and
remove unnecessary overhead. All OTP applications using crypto has been
updated to use the new API.</p><p>Impact: Elliptic curve cryptography (ECC) offers equivalent security with
smaller key sizes than other public key algorithms. Smaller key sizes result
in savings for power, memory, bandwidth, and computational cost that make ECC
especially attractive for constrained environments.</p><p>Own Id: OTP-11009</p></li><li><p>Fix {stream, {self, once}} in httpc to work as expected. Thanks to
Masatake Daimon</p><p>Own Id: OTP-11122</p></li></ul><h2 id="inets-5-9-4" class="section-heading"><a href="#inets-5-9-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 5.9.4</span></h2><h3 id="improvements-and-new-features-54" class="section-heading"><a href="#improvements-and-new-features-54" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>httpd: The modules option now defaults to the documented value.</p><p>Own Id: OTP-10844</p></li><li><p>httpc: Fixed persistent connection implementation that was broken by a patch
to R13. The patch made persistent connections behaved the same way as
pipelining.</p><p>Own Id: OTP-10845</p></li><li><p>httpd: Simplified configuration of ssl in httpd, this also enables all ssl
options to be configured. The old and limited way is no longer documented but
will be supported for backwards comatibility for some time.</p><p>Own Id: OTP-10846</p></li><li><p>Handle correctly the &quot;No files found or file unavailable&quot; error code. Thanks
to Serge Aleynikov</p><p>Own Id: OTP-10886</p></li></ul><h2 id="inets-5-9-3" class="section-heading"><a href="#inets-5-9-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 5.9.3</span></h2><h3 id="improvements-and-new-features-55" class="section-heading"><a href="#improvements-and-new-features-55" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>httpc: The HTTP client now supports HTTPS through proxies</p><p>Own Id: OTP-10256 Aux Id: kunagi-2 [ce2e800e-c99f-4050-a1c4-f47023d9c7aa-1]</p></li><li><p>Some examples overflowing the width of PDF pages have been corrected.</p><p>Own Id: OTP-10665</p></li><li><p>Fix autoredirect for POST requests responding 303. Thanks to Hans Svensson.</p><p>Own Id: OTP-10765</p></li></ul><h2 id="inets-5-9-2-2" class="section-heading"><a href="#inets-5-9-2-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 5.9.2.2</span></h2><h3 id="improvements-and-new-features-56" class="section-heading"><a href="#improvements-and-new-features-56" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Make log_alert configurable as option in ssl, SSLLogLevel added as option to
inets conf file</p><p>Own Id: OTP-11259</p></li></ul><h2 id="inets-5-9-2-1" class="section-heading"><a href="#inets-5-9-2-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 5.9.2.1</span></h2><h3 id="improvements-and-new-features-57" class="section-heading"><a href="#improvements-and-new-features-57" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Fixed obsolete error report in inets.</p><p>Own Id: OTP-11185 Aux Id: seq12357</p></li></ul><h2 id="inets-5-9-2" class="section-heading"><a href="#inets-5-9-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 5.9.2</span></h2><h3 id="improvements-and-new-features-58" class="section-heading"><a href="#improvements-and-new-features-58" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Minimum bytes per second</p><p>New option to http server, {minimum_bytes_per_second, integer()}, for a
connection, if it is not reached the socket will close for that specific
connection. Can be used to prevent hanging requests from faulty clients.</p><p>Own Id: OTP-10392</p></li></ul><h2 id="inets-5-9-1" class="section-heading"><a href="#inets-5-9-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 5.9.1</span></h2><h3 id="improvements-and-new-features-59" class="section-heading"><a href="#improvements-and-new-features-59" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Better handling of errorI(s) during update of the session database.</p><p>Also added and updated some debugging functions
<a href="httpc.html#which_sessions/0">which_sessions/0,1</a> and
<a href="httpc.html#info/0">info/0</a>.</p><p>Own Id: OTP-10093</p><p>Aux Id: Seq 12062</p></li><li><p>Removed R14B compatible version of (inets-service and tftp) behaviour
definition.</p><p>Own Id: OTP-10095</p></li><li><p>[httpc] Documentation of KeepAlive and Pipeline timeout options have been
improved.</p><p>Own Id: OTP-10114</p></li></ul><h3 id="fixed-bugs-and-malfunctions-86" class="section-heading"><a href="#fixed-bugs-and-malfunctions-86" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>[httpc] Cancel request does not work due to incorrect handler table creation
(wrong keypos).</p><p>Vyacheslav Vorobyov</p><p>Own Id: OTP-10092</p></li></ul><h3 id="incompatibilities" class="section-heading"><a href="#incompatibilities" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Incompatibilities</span></h3><p>-</p><h2 id="inets-5-9" class="section-heading"><a href="#inets-5-9" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 5.9</span></h2><h3 id="improvements-and-new-features-60" class="section-heading"><a href="#improvements-and-new-features-60" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>[httpd] Make the server header configurable with new config option
<a href="httpd.html#prop_server_tokens">server_tokens</a>. The value of the server header,
which was previously hard-coded (at compile time), is now possible to
manipulate through the means of the
<a href="httpd.html#prop_server_tokens">server_tokens</a> config option.</p><p>Own Id: OTP-9805</p></li><li><p>Improve inets support for inets as an included application.</p><p><code class="inline">inets_app</code> calls <a href="../../apps/stdlib/supervisor.html#start_link/3"><code class="inline">supervisor:start_link/3</code></a> directly rather than calling the
root supervisor function <code class="inline">inets_sup:start_link/0</code>. This precludes using
included_applications to start inets without having a wrapper function.</p><p>Jay Nelson</p><p>Own Id: OTP-9960</p></li><li><p>[httpc] Add function for retrieving current options,
<a href="httpc.html#get_options/1">get_options/1,2</a>.</p><p>Own Id: OTP-9979</p></li><li><p>Utility module <a href="http_uri.html"><code class="inline">http_uri</code></a> now officially supported.</p><p>Also, the <code class="inline">http_uri:parse</code> function has been extended with more scheme support
and a way to provide your own scheme info.</p><p>Own Id: OTP-9983</p><p>Aux Id: Seq 12022</p></li></ul><h3 id="fixed-bugs-and-malfunctions-87" class="section-heading"><a href="#fixed-bugs-and-malfunctions-87" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><p>-</p><h2 id="inets-5-8-1" class="section-heading"><a href="#inets-5-8-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 5.8.1</span></h2><h3 id="improvements-and-new-features-61" class="section-heading"><a href="#improvements-and-new-features-61" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><p>-</p><h3 id="fixed-bugs-and-malfunctions-88" class="section-heading"><a href="#fixed-bugs-and-malfunctions-88" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>[ftp] Fails to open IPv6 connection due to badly formatted IPv6 address in
EPRT command. The address part of the command incorrectly contained decimal
elements instead of hexadecimal.</p><p>Own Id: OTP-9827</p><p>Aux Id: Seq 11970</p></li><li><p>[httpc] Bad Keep Alive Mode. When selecting a session, the &quot;state&quot; of the
session (specifically if the server has responded) was not taken into account.</p><p>Own Id: OTP-9847</p></li><li><p>[httpc] The client incorrectly streams 404 responses. The documentation
specifies that only 200 and 206 responses shall be streamed.</p><p>Shane Evens</p><p>Own Id: OTP-9860</p></li></ul><h2 id="inets-5-8" class="section-heading"><a href="#inets-5-8" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 5.8</span></h2><h3 id="improvements-and-new-features-62" class="section-heading"><a href="#improvements-and-new-features-62" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>[ftpc] Add a config option to specify a
<a href="../../apps/ftp/ftp.html#dtimeout">data connect timeout</a>. That is how long the ftp client will
wait for the server to connect to the data socket. If this timeout occurs, an
error will be returned to the caller and the ftp client process will be
terminated.</p><p>Own Id: OTP-9545</p></li><li><p>[httpc] Wrong Host header in IPv6 HTTP requests. When a URI with a IPv6 host
is parsed, the brackets that encapsulates the address part is removed. This
value is then supplied as the host header. This can cause problems with some
servers. A workaround for this is to use headers_as_is and provide the host
header with the request call. To solve this a new option has been added,
<a href="httpc.html#ipv6_host_with_brackets">ipv6_host_with_brackets</a>. This option
specifies if the host value of the host header shall include the brackets or
not. By default, it does not (as before).</p><p>Own Id: OTP-9628</p></li></ul><h3 id="fixed-bugs-and-malfunctions-89" class="section-heading"><a href="#fixed-bugs-and-malfunctions-89" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>[httpd] Fix logging of content length in mod_log.</p><p>Garrett Smith</p><p>Own Id: OTP-9715</p></li><li><p>[httpd] Sometimes entries in the transfer log was written with the message
size as list of numbers. This list was actually the size as a string, e.g.
&quot;123&quot;, written with the control sequence ~w. This has now been corrected so
that any string is converted to an integer (if possible).</p><p>Own Id: OTP-9733</p></li><li><p>Fixed various problems detected by Dialyzer.</p><p>Own Id: OTP-9736</p></li></ul><h3 id="incompatibilities-1" class="section-heading"><a href="#incompatibilities-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Incompatibilities</span></h3><ul><li><p>[httpc] Deprecated interface module <code class="inline">http</code> has been removed. It has (long)
been replaced by http client interface module <a href="httpc.html"><code class="inline">httpc</code></a>.</p><p>Own Id: OTP-9359</p></li><li><p>[httpc|httpd] The old ssl implementation (based on OpenSSL), has been
deprecated. The config option that specified usage of this version of the ssl
app, <code class="inline">ossl</code>, has been removed.</p><p>Own Id: OTP-9522</p></li></ul><h2 id="inets-5-7-2" class="section-heading"><a href="#inets-5-7-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 5.7.2</span></h2><h3 id="improvements-and-new-features-63" class="section-heading"><a href="#improvements-and-new-features-63" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><p>-</p><h3 id="fixed-bugs-and-malfunctions-90" class="section-heading"><a href="#fixed-bugs-and-malfunctions-90" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>[httpd] XSS prevention did not work for hex-encoded URL's.</p><p>Own Id: OTP-9655</p></li><li><p>[httpd] GET request with malformed header date caused server crash
(non-fatal) with no reply to client. Will now result in a reply with status
code 400.</p><p>Own Id: OTP-9674</p><p>Aux Id: seq11936</p></li></ul><h2 id="inets-5-7-1" class="section-heading"><a href="#inets-5-7-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 5.7.1</span></h2><h3 id="improvements-and-new-features-64" class="section-heading"><a href="#improvements-and-new-features-64" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><p>-</p><h3 id="fixed-bugs-and-malfunctions-91" class="section-heading"><a href="#fixed-bugs-and-malfunctions-91" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>[httpc] Parsing of a cookie expire date should be more forgiving. That is, if
the parsing fails, the date should be ignored. Also added support for (yet
another) date format: &quot;Tue Jan 01 08:00:01 2036 GMT&quot;.</p><p>Own Id: OTP-9433</p></li><li><p>[httpc] Rewrote cookie parsing. Among other things solving cookie processing
from www.expedia.com.</p><p>Own Id: OTP-9434</p></li><li><p>[httpd] Fix httpd directory traversal on Windows. Directory traversal was
possible on Windows where backward slash is used as directory separator.</p><p>AndrÃ¡s Veres-SzentkirÃ¡lyi.</p><p>Own Id: OTP-9561</p></li></ul><h2 id="inets-5-7" class="section-heading"><a href="#inets-5-7" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 5.7</span></h2><h3 id="improvements-and-new-features-65" class="section-heading"><a href="#improvements-and-new-features-65" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>[httpc|httpd] Added support for IPv6 with ssl.</p><p>Own Id: OTP-5566</p></li></ul><h3 id="fixed-bugs-and-malfunctions-92" class="section-heading"><a href="#fixed-bugs-and-malfunctions-92" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>[httpc] Remove unnecessary usage of iolist_to_binary when processing body
(for PUT and POST).</p><p>Filipe David Manana</p><p>Own Id: OTP-9317</p></li><li><p>[ftp] FTP client doesn't work with IPv6 host.</p><p>Attila Rajmund Nohl</p><p>Own Id: OTP-9342 Aux Id: seq11853</p></li><li><p>[httpd] Peer/sockname resolv doesn't work with IPv6 addrs in HTTP.</p><p>Attila Rajmund Nohl.</p><p>Own Id: OTP-9343</p></li><li><p>[httpc] Clients started stand-alone not properly handled. Also it was not
documented how to use them, that is that once started, they are represented by
a <a href="../../apps/erts/erlang.html#t:pid/0"><code class="inline">pid/0</code></a> and not by their <code class="inline">profile()</code>.</p><p>Own Id: OTP-9365</p></li></ul><h2 id="inets-5-6" class="section-heading"><a href="#inets-5-6" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 5.6</span></h2><h3 id="improvements-and-new-features-66" class="section-heading"><a href="#improvements-and-new-features-66" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>[httpc] Add support for upload body streaming (PUT and POST).</p><p>For more info, see the definition of the <code class="inline">Body</code> argument of the
<a href="httpc.html#request/4">request/4,5</a> function.</p><p>Filipe David Manana</p><p>Own Id: OTP-9094</p></li><li><p>[ftp] Added (type) spec for all exported functions.</p><p>Own Id: OTP-9114 Aux Id: seq11799</p></li><li><p>[httpd] <a href="mod_esi.html#deliver/2"><code class="inline">mod_esi:deliver/2</code></a> made to accept binary data.</p><p>Bernard Duggan</p><p>Own Id: OTP-9123</p></li><li><p>[httpd] Prevent XSS in error pages. Prevent user controlled input from being
interpreted as HTML in error pages by encoding the reserved HTML characters.</p><p>Michael Santos</p><p>Own Id: OTP-9124</p></li><li><p>[httpd] Improved error messages.</p><p>Ricardo Catalinas JimÃ©nez</p><p>Own Id: OTP-9157</p></li><li><p>[httpd] Extended support for file descriptors. In order to be able to bind to
a privileged port without running the erlang VM as root, the support for using
file descriptors has been improved. It is now possible to add the file
descriptor to the config (option fd) when calling the
<a href="inets.html#start/2">inets:start(httpd, ...)</a> function.</p><p>Attila Rajmund Nohl</p><p>Own Id: OTP-9202</p><p>Aux Id: seq11819</p></li><li><p>The default ssl kind has now been changed to <code class="inline">essl</code>.</p><p><code class="inline">ossl</code> will work for as long as the ssl application supports it.</p><p>See the httpd <a href="httpd.html#props_comm">socket_type</a> communication property or
the httpc <a href="httpc.html#request/4">request/4,5</a> function for more info.</p><p>Own Id: OTP-9230</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p></li></ul><h3 id="fixed-bugs-and-malfunctions-93" class="section-heading"><a href="#fixed-bugs-and-malfunctions-93" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>[httpd] Wrong <a href="httpd.html#props_sec">security property</a> names used in
documentation.</p><p><code class="inline">security_data_file</code> used instead of <code class="inline">data_file</code>.</p><p><code class="inline">security_max_retries</code> used instead of <code class="inline">max_retries</code>.</p><p><code class="inline">security_block_time</code> used instead of <code class="inline">block_time</code>.</p><p><code class="inline">security_fail_expire_time</code> used instead of <code class="inline">fail_expire_time</code>.</p><p><code class="inline">security_auth_timeout</code> used instead of <code class="inline">auth_timeout</code>.</p><p>Garrett Smith</p><p>Own Id: OTP-9131</p></li><li><p>[httpd] Fix timeout message generated by mod_esi. When a mod_esi request
times out, the code to send a timeout response was incorrect and generated an
internal server error as well as an invalid response line.</p><p>Bernard Duggan</p><p>Own Id: OTP-9158</p></li><li><p>[httpc] httpc manager crashes. When a request results in a retry, the request
id will be &quot;reused&quot; in the previous implementation a race condition could
occur causing the manager to crash.</p><p>This is now avoided by using proc_lib:init_ack and gen_server:enter_loop to
allow more advanced initialization of httpc_handlers without blocking the
httpc_manger and eliminating extra processes that can cause race conditions.</p><p>Own Id: OTP-9246</p></li><li><p>[httpc] Issuing a request (<code class="inline">httpc:request</code>) to an host with the ssl option
<code class="inline">{ip, {127,0,0,1}}</code> results in an handler crash. The reason was that the
connect call resulted in an exit with reason <code class="inline">badarg</code> (this was the same for
both <code class="inline">ssl</code> and <code class="inline">gen_tcp</code>).</p><p>Exits was not caught. This has now been improved.</p><p>Own Id: OTP-9289</p><p>Aux Id: seq11845</p></li></ul><h2 id="inets-5-5-2" class="section-heading"><a href="#inets-5-5-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 5.5.2</span></h2><h3 id="improvements-and-new-features-67" class="section-heading"><a href="#improvements-and-new-features-67" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><p>-</p><h3 id="fixed-bugs-and-malfunctions-94" class="section-heading"><a href="#fixed-bugs-and-malfunctions-94" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>[httpd] httpd_response:send_chunk handles empty list and empty binary - i.e.
no chunk is sent, but it does not handle a list with an empty binary [&lt;&lt;&gt;&gt;].
This will be sent as an empty chunk - which in turn will be encoded by
http_chunk to the same as a final chunk, which will make the http client
believe that the end of the page is reached.</p><p>Own Id: OTP-8906</p></li></ul><h2 id="inets-5-5-1" class="section-heading"><a href="#inets-5-5-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 5.5.1</span></h2><h3 id="improvements-and-new-features-68" class="section-heading"><a href="#improvements-and-new-features-68" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Miscellaneous inet6 related problems.</p><p>Own Id: OTP-8927</p></li><li><p>Updated http-server to make sure URLs in error-messages are URL-encoded. Added
support in http-client to use URL-encoding. Also added the missing include
directory for the inets application.</p><p>Own Id: OTP-8940</p><p>Aux Id: seq11735</p></li></ul><h3 id="fixed-bugs-and-malfunctions-95" class="section-heading"><a href="#fixed-bugs-and-malfunctions-95" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix format_man_pages so it handles all man sections and remove warnings/errors
in various man pages.</p><p>Own Id: OTP-8600</p></li><li><p>[httpc] Pipelined and queued requests not processed when connection closed
remotelly.</p><p>Own Id: OTP-8906</p></li></ul><h2 id="inets-5-5" class="section-heading"><a href="#inets-5-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 5.5</span></h2><h3 id="fixed-bugs-and-malfunctions-96" class="section-heading"><a href="#fixed-bugs-and-malfunctions-96" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>[httpc] If a request times out (not connect timeout), the handler process
exited (normal) but neglected to inform the manager process. For this reason,
the manager did not clean up the request table., resulting in a memory leak.
Also the manager did not create a monitor for the handler, so in an unforeseen
handler crash, this could also create a memory leak.</p><p>Own Id: OTP-8739</p></li><li><p>The service tftp was spelled wrong in documentation and in some parts of the
code. It should be tftp.</p><p>Own Id: OTP-8741 Aux Id: seq11635</p></li><li><p>[httpc] Replaced the old http client api module (http) with the new, httpc in
the users guide.</p><p>Own Id: OTP-8742</p></li></ul><h3 id="improvements-and-new-features-69" class="section-heading"><a href="#improvements-and-new-features-69" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Eliminated warnings for auto-imported BIF clashes.</p><p>Own Id: OTP-8840</p></li></ul><h2 id="inets-5-4" class="section-heading"><a href="#inets-5-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 5.4</span></h2><h3 id="improvements-and-new-features-70" class="section-heading"><a href="#improvements-and-new-features-70" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>[httpc|httpd] - Now allow the use of the &quot;new&quot; ssl, by using the <code class="inline">essl</code> tag
instead.</p><p>See the <code class="inline">http_option</code> option in the <a href="httpc.html#request/4">request/4,5</a> or the
<a href="httpd.html#props_comm">socket-type</a> section of the Communication properties
chapter for more info,</p><p>Own Id: OTP-7907</p></li><li><p>Deprecated functions designated to be removed in R14 has been removed. Also,
some new functions has been marked as deprecated (the old http client api
module).</p><p>Own Id: OTP-8564</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p></li><li><p>[httpd] - Improved mod_alias. Now able to do better URL rewrites.</p><p>See <a href="httpd.html#props_alias">URL aliasing properties</a> and the
<a href="httpd.html#props_cgi">CGI properties</a> section(s) for more info,</p><p>Own Id: OTP-8573</p></li></ul><h3 id="fixed-bugs-and-malfunctions-97" class="section-heading"><a href="#fixed-bugs-and-malfunctions-97" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><p>-</p><h2 id="inets-5-3-3" class="section-heading"><a href="#inets-5-3-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 5.3.3</span></h2><h3 id="improvements-and-new-features-71" class="section-heading"><a href="#improvements-and-new-features-71" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><p>-</p><h3 id="fixed-bugs-and-malfunctions-98" class="section-heading"><a href="#fixed-bugs-and-malfunctions-98" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>[httpc] - Made cookie handling more case insensitive.</p><p>Own Id: OTP-8609</p><p>Nicolas Thauvin</p></li><li><p>[httpc|httpd] - Netscape cookie dates can also be given with a 2-digit year
(e.g. 06 = 2006).</p><p>Own Id: OTP-8610</p><p>Nicolas Thauvin</p></li><li><p>[httpd] - Added support (again) for the documented debugging features. See
the User's Guide <a href="http_server.html#config">Configuration</a> chapter for more info.</p><p>Own Id: OTP-8624</p></li></ul><h2 id="inets-5-3-2" class="section-heading"><a href="#inets-5-3-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 5.3.2</span></h2><h3 id="improvements-and-new-features-72" class="section-heading"><a href="#improvements-and-new-features-72" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><p>-</p><h3 id="fixed-bugs-and-malfunctions-99" class="section-heading"><a href="#fixed-bugs-and-malfunctions-99" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>[httpc] - Memory leak plugged. The profile manager never cleaned up in its
handler database. This meant that with each new request handler, another entry
was created that was never deleted. Eventually the request id counter (used as
a key) would wrap, but the machine would most likely run out of memory before
that happened.</p><p>Own Id: OTP-8542</p><p>Lev Walkin</p></li><li><p>[httpc] - https requests with default port (443) not handled properly.</p><p>Own Id: OTP-8607</p><p>jebu ittiachen</p></li></ul><h2 id="inets-5-3-1" class="section-heading"><a href="#inets-5-3-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 5.3.1</span></h2><h3 id="improvements-and-new-features-73" class="section-heading"><a href="#improvements-and-new-features-73" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><p>-</p><h3 id="fixed-bugs-and-malfunctions-100" class="section-heading"><a href="#fixed-bugs-and-malfunctions-100" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>[httpc] - Badly formatted error reason for errors occurring during initial
connect to a server. Also, the possible error reasons was not properly
documented.</p><p>Own Id: OTP-8508</p><p>Aux Id: seq11407</p></li><li><p>[httpd] - Issues with ESI erl_script_timeout.</p><ul><li>The <code class="inline">erl_script_timeout</code> config option is ducumented as a number of seconds.
But when parsing the config, in the new format (not a config file), it was
handled as if in number of milliseconds.</li><li>When the erl-script-timeout time was exceeded, the server incorrectly marked
the answer as sent, thereby leaving client hanging (with an incomplete
answer). This has been changed, so that now the socket will be closed.</li></ul><p>Own Id: OTP-8509</p></li></ul><h2 id="inets-5-3" class="section-heading"><a href="#inets-5-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 5.3</span></h2><h3 id="improvements-and-new-features-74" class="section-heading"><a href="#improvements-and-new-features-74" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>[httpc] - Allow users to pass socket options to the transport module when
making requests.</p><p>See the <code class="inline">socket_opts</code> option in the <a href="httpc.html#request/4">request/4</a> or
<a href="httpc.html#set_options/1">set_options/1,2</a> for more info,</p><p>Own Id: OTP-8352</p></li><li><p>[httpc] Fix bug crafting Host header when port is not 80.</p><p>The host header should include the port number as well as the host name when
making a request to a server listening on a port other than the HTTP default
of 80. Currently, only the host name is included. This is important to make
the http client more compliant with the HTTP specification.</p><p>Own Id: OTP-8371</p><p>Kelly McLaughlin</p></li><li><p>[httpc|httpd] http_chunk data handling/passing improvement.</p><p>This is a modification to the http_chunk module to forward any full chunk
received, regardless of whether the size field for the following chunk has
been received yet. This allows http_chunk to be used in situations where a
long term HTTP connection is used to send periodic status updates as
individual chunks. Previously a given chunk would not be forwarded to the
client process until the size for the next chunk had been read which rendered
the module difficult to use for the scenario described.</p><p>Bernard Duggan</p><p>Own Id: OTP-8351</p></li><li><p>Include the inets test suite in the release of the application.</p><p>Own Id: OTP-8349</p></li><li><p>[httpc] - It is now possible to configure the client to deliver an async
reply to more receivers then the calling process.</p><p>See the <a href="httpc.html#request/2">receiver</a> option for more info,</p><p>Own Id: OTP-8106</p></li><li><p>[httpd] - Methods &quot;PUT&quot; and &quot;DELETE&quot; now allowed.</p><p>huntermorris@gmail.com</p><p>Own Id: OTP-8103</p></li><li><p>[httpc] Several more or less critical fixes:</p><ul><li><p>Initial call between the httpc manager and request handler was synchronous.</p><p>When the manager starts a new request handler, this is no longer a
synchronous operation. Previously, the new request handler made the
connection to the server and issuing of the first request (the reason for
starting it) in the gen_server init function. If the connection for some
reason &quot;took some time&quot;, the manager hanged, leaving all other activities by
that manager also hanging.</p></li></ul><p>As a side-effect of these changes, some modules was also renamed, and a new
api module, <a href="httpc.html"><code class="inline">httpc</code></a>, has been introduced (the old module <code class="inline">http</code> is <em>not</em>
removed, but is now just wrapper for <code class="inline">httpc</code>).</p><p>Own Id: OTP-8016</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p></li></ul><h3 id="fixed-bugs-and-malfunctions-101" class="section-heading"><a href="#fixed-bugs-and-malfunctions-101" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>[httpd] The server did not fully support the documented module callback api.
Specifically, the load function should be able to return the atom <code class="inline">ok</code>, but
this was not accepted.</p><p>Own Id: OTP-8359</p></li><li><p>Fixing various documentation-related bugs (bad quotes).</p><p>Own Id: OTP-8327</p></li><li><p>Fixing minor Dialyzer and copyright problem(s).</p><p>Own Id: OTP-8315</p></li><li><p>[httpc] - Added basic sanity check of option value combinations.</p><p>adam.kocoloski@gmail.com</p><p>Own Id: OTP-8056</p></li></ul><h2 id="inets-5-2" class="section-heading"><a href="#inets-5-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 5.2</span></h2><h3 id="improvements-and-new-features-75" class="section-heading"><a href="#improvements-and-new-features-75" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>[ftpc] - Start of the FTP client has been changed in the following way:</p><ul><li><p>It is now also possible to start a standalone FTP client process using the
re-introduced <a href="../../apps/ftp/ftp.html#open/2"><code class="inline">ftp:open/2</code></a> function.</p><p>This is an alternative to starting the client using the
inets service framework.</p><p>The old <a href="../../apps/ftp/ftp.html#open/1"><code class="inline">ftp:open/1</code></a>, undocumented, function, caused the client to be hooken
into the inets service supervision framework. This is <em>no</em> longer the case.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p></li><li><p>Previously, the FTP client attempted to use IPv6, unless otherwise
instructed (the <code class="inline">ip_v6_disabled</code> flag), and only used IPv4 if this did not
work. This has now been <em>changed</em>.</p><p>A new option, <a href="../../apps/ftp/ftp.html#ipfamily">ipfamily</a>, has been introduced, with the
default value <code class="inline">inet</code> (IPv4).</p><p>See <a href="../../apps/ftp/ftp.html#open/2"><code class="inline">ftp:open/2</code></a> for more info.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p></li></ul><p>Own Id: OTP-8258</p></li><li><p>The documentation is now built with open source tools (<em>xsltproc</em> and <em>fop</em>)
that exists on most platforms. One visible change is that the frames are
removed.</p><p>Own Id: OTP-8249</p></li></ul><h3 id="fixed-bugs-and-malfunctions-102" class="section-heading"><a href="#fixed-bugs-and-malfunctions-102" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>[httpc] - Streaming to file did not work.</p><p>dizzyd@gmail.com</p><p>Own Id: OTP-8204</p></li><li><p>[ftpc] - The <a href="../../apps/ftp/ftp.html#ls/2"><code class="inline">ftp:ls/2</code></a> function (LIST command) and the
<a href="../../apps/ftp/ftp.html#nlist/2"><code class="inline">ftp:nlist/2</code></a> function (NLST command) with wildcards did not work
properly.</p><p>These functions is documented as working on directories, but this is actually
not according the standard. The LIST and NLST commands are specified to
operate on a directory or other group of files, or a file.</p><p>Previously, an attempt was made to check if the listing returned by the server
was actually an error message. This was done by changing remote directory (cd)
into the (assumed) &quot;directory&quot;. This may work if Pathname was actually a
directory, but as this is not always the case, this test does not work.
Instead, we now return the actual server result and leave the interpretation
to the caller.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-8247</p><p>Aux Id: seq11407</p></li><li><p>[httpc] - Fixes various bugs in timeout and keep-alive queue handling.</p><ul><li>When a queued request times, out the error mssage is sent the owner of the
active request.</li><li>Requests in the keep-alive queue is forgotten when handler terminates.</li><li>Timeout out requests are retried.</li></ul><p>Jean-SÃ©bastien PÃ©dron</p><p>Own Id: OTP-8248</p></li><li><p>[httpd] - Unnecessarily strict matching when handling closing sockets.</p><p>Own Id: OTP-8280</p></li></ul><h2 id="inets-5-1-3" class="section-heading"><a href="#inets-5-1-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 5.1.3</span></h2><h3 id="improvements-and-new-features-76" class="section-heading"><a href="#improvements-and-new-features-76" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><p>-</p><h3 id="fixed-bugs-and-malfunctions-103" class="section-heading"><a href="#fixed-bugs-and-malfunctions-103" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>[httpc] - Raise condition. When http:request is called and httpc_manager
selects a session where there's already a pending request, then the connection
handler for that session effectively resets its parser, readying it for the
response to the second request. But if there are still some inbound packets
for the response to the first request, things get confused.</p><p>tomas.abrahamsson@gmail.com</p><p>Own Id: OTP-8154</p></li></ul><h2 id="inets-5-1-2" class="section-heading"><a href="#inets-5-1-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 5.1.2</span></h2><h3 id="improvements-and-new-features-77" class="section-heading"><a href="#improvements-and-new-features-77" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>[httpc] - Added http option <code class="inline">connect_timeout</code> for http client request. The
<code class="inline">connect_timeout</code> option is used for the initial request, when the client
connects to the server. Default value is that of the <code class="inline">timeout</code> option.</p><p>See the <a href="httpc.html#request/4">request/4,5</a> function for more info.</p><p>Own Id: OTP-7298</p></li></ul><h3 id="fixed-bugs-and-malfunctions-104" class="section-heading"><a href="#fixed-bugs-and-malfunctions-104" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>[httpd] - Failed to create listen socket with invalid option combo. The
http-server failed to create its listen socket when the bind-address was an
IPv4-address (a tuple of size 4) and the ipfamily option was inet6fb4.</p><p>Own Id: OTP-8118</p><p>Aux Id: seq11321</p></li><li><p>[httpd] - Removed documentation for non-existing function
(httpd_util:header/2,3,4).</p><p>Own Id: OTP-8101</p></li></ul><h2 id="inets-5-1-1" class="section-heading"><a href="#inets-5-1-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 5.1.1</span></h2><h3 id="improvements-and-new-features-78" class="section-heading"><a href="#improvements-and-new-features-78" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>[httpd] - When starting inets (the web-server) and supplying a descriptor on
the command line (example: erl -httpd_8888 &lt;descriptor&gt;) it is now possible to
specify which ip-family to use: <code class="inline">inet | inet6 | inet6fb4</code>.</p><p>Example: erl -httpd_8888 10|inet6</p><p>When starting the web-server either using a file with property list (the
proplist_file) or a an property list, using the ipfamily option:
<code class="inline">{ipfamily, inet | inet6 | inet6fb4}</code>.</p><p>Finally, when starting the web-server using the classical apache-style config
file, the <code class="inline">BindAddress</code> directive has been augmented to allow the
specification of the IpFamily: <code class="inline">BindAddress blirk.ericsson.se|inet</code></p><p>Default is <code class="inline">inet6fb4</code> which emulates the behaviour of the previous version.</p><p>See the <a href="httpd.html#props_comm">Communication properties</a> section for more
info.</p><p>Own Id: OTP-8069</p><p>Aux Id: seq11086</p></li></ul><h3 id="fixed-bugs-and-malfunctions-105" class="section-heading"><a href="#fixed-bugs-and-malfunctions-105" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>[httpc] - Reception of unexpected data causes handler crash.</p><p>Own Id: OTP-8052</p></li></ul><h2 id="inets-5-1" class="section-heading"><a href="#inets-5-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Inets 5.1</span></h2><h3 id="improvements-and-new-features-79" class="section-heading"><a href="#improvements-and-new-features-79" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>[httpc] Added support for web services using only basic auth, with a token as
the user part and no password part.</p><p>twoggle@gmail.com</p><p>Own Id: OTP-7998</p></li><li><p>[httpc] - Bind HTTP client to IP-addr. It is now possible to specify an
alternate ip-address and port to be used when the client connects to the
server.</p><p>As a side-effect of this, the option <code class="inline">ipv6</code> has been removed and replaced by
the <code class="inline">ipfamily</code> option.</p><p>See <a href="httpc.html#set_options/1">http:set_options/1,2</a> for more info.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-8004</p></li></ul><h3 id="fixed-bugs-and-malfunctions-106" class="section-heading"><a href="#fixed-bugs-and-malfunctions-106" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Updated guard tests (i.e. is_list(L) instead of list(L) and possibly
andalso/orelse instead of &quot;,&quot;/&quot;;&quot;).</p><p>Own Id: OTP-7994</p></li><li><p>[httpc] - Remove use of the deprecated regexp module.</p><p>Own Id: OTP-8001</p></li><li><p>[httpc] - The option <code class="inline">max_keep_alive_length</code> was not handled properly.</p><p>Own Id: OTP-8005</p></li></ul>

</div>

<div class="bottom-actions" id="bottom-actions">
  <div class="bottom-actions-item">

  </div>
  <div class="bottom-actions-item">

      <a href="introduction.html" class="bottom-actions-button" rel="next">
        <span class="subheader">
          Next Page â†’
        </span>
        <span class="title">
Introduction
        </span>
      </a>

  </div>
</div>
    <footer class="footer">
      <p>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="inets.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.38.1) for the

          <a href="https://erlang.org" title="Erlang" target="_blank" translate="no">Erlang programming language</a>

      </p>
<p>Copyright Â© 1996-2025 <a href="https://www.ericsson.com">Ericsson AB</a></p>
    </footer>
  </div>
</main>
</div>
  <script defer src="https://cdn.jsdelivr.net/npm/mermaid@11.4.1/dist/mermaid.min.js"></script>
  <script>
  let initialized = false;

  window.addEventListener("exdoc:loaded", () => {
      if (!initialized) {
      mermaid.initialize({
          startOnLoad: false,
          theme: document.body.className.includes("dark") ? "dark" : "default"
      });
      initialized = true;
      }

      let id = 0;
      for (const codeEl of document.querySelectorAll("pre code.mermaid")) {
      const preEl = codeEl.parentElement;
      const graphDefinition = codeEl.textContent;
      const graphEl = document.createElement("div");
      const graphId = "mermaid-graph-" + id++;
      mermaid.render(graphId, graphDefinition).then(({svg, bindFunctions}) => {
          graphEl.innerHTML = svg;
          bindFunctions?.(graphEl);
          preEl.insertAdjacentElement("afterend", graphEl);
          preEl.remove();
      });
      }
  });
  </script>

  </body>
</html>
