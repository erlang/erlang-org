<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.38.1">
    <meta name="project" content="syntax_tools v4.0">


<meta name="exdoc:full-text-search-url" content="/doc/search.html?v=28&q=">
<meta name="major-vsn" content="28">
<link rel="canonical" href="https://www.erlang.org/doc/apps/syntax_tools/merl.html" />
    <title>merl â€” syntax_tools v4.0</title>

    <link rel="stylesheet" href="dist/html-erlang-ZK43ZOAC.css" />

    <script defer src="dist/sidebar_items-80F5ECE3.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-DPJLHKSM.js"></script>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="../../index.html" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="syntax_tools" />
        </a>

      <div>
        <a href="../../index.html" class="sidebar-projectName" translate="no">
syntax_tools
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v4.0
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras=""></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-module" id="main" data-type="modules">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of syntax_tools</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search" tabindex="-1">
            <i class="ri-search-2-line ri-lg" aria-hidden="true"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>
      <span translate="no">merl</span> 
      <small class="app-vsn" translate="no">(syntax_tools v4.0)</small>

    </h1>

      <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/syntax_tools/src/merl.erl#L36" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

  </div>


    <section id="moduledoc">
<p>Metaprogramming in Erlang.</p><p>Merl is a user-friendly interface to the <code class="inline">erl_syntax</code> module,
making it easy both to build new ASTs from scratch and to match and
decompose existing ASTs. For details that are outside the scope of
Merl itself, see the documentation of <a href="erl_syntax.html"><code class="inline">erl_syntax</code></a>.</p><h3 id="module-quick-start" class="section-heading"><a href="#module-quick-start" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Quick start</span></h3><p>To enable the full power of Merl, your module needs to include the Merl header
file:</p><pre><code class="makeup erlang" translate="no"><span class="p">-</span><span class="na">include_lib</span><span class="p" data-group-id="4168816450-1">(</span><span class="s">&quot;syntax_tools/include/merl.hrl&quot;</span><span class="p" data-group-id="4168816450-1">)</span><span class="p">.</span></code></pre><p>Then, you can use the <code class="inline">?Q(Text)</code> macros in your code to create ASTs or match on
existing ASTs. For example:</p><pre><code class="makeup erlang" translate="no"><span class="n">Tuple</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">?</span><span class="n">Q</span><span class="p" data-group-id="4259927948-1">(</span><span class="s">&quot;{foo, 42}&quot;</span><span class="p" data-group-id="4259927948-1">)</span><span class="p">,</span><span class="w">
</span><span class="o">?</span><span class="n">Q</span><span class="p" data-group-id="4259927948-2">(</span><span class="s">&quot;{foo, _@Number}&quot;</span><span class="p" data-group-id="4259927948-2">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Tuple</span><span class="p">,</span><span class="w">
</span><span class="n">Call</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">?</span><span class="n">Q</span><span class="p" data-group-id="4259927948-3">(</span><span class="s">&quot;foo:bar(_@Number)&quot;</span><span class="p" data-group-id="4259927948-3">)</span></code></pre><p>Calling <code class="inline">merl:print(Call)</code> will then print the following code:</p><pre><code class="makeup erlang" translate="no"><span class="nc">foo</span><span class="p">:</span><span class="nf">bar</span><span class="p" data-group-id="7972120980-1">(</span><span class="mi">42</span><span class="p" data-group-id="7972120980-1">)</span></code></pre><p>The <code class="inline">?Q</code> macros turn the quoted code fragments into ASTs, and lifts
metavariables such as <code class="inline">_@Tuple</code> and <code class="inline">_@Number</code> to the level of your Erlang code,
so you can use the corresponding Erlang variables <code class="inline">Tuple</code> and <code class="inline">Number</code> directly.
This is the most straightforward way to use Merl, and in many cases it's all you
need.</p><p>You can even write case switches using <code class="inline">?Q</code> macros as patterns. For example:</p><pre><code class="makeup erlang" translate="no"><span class="k">case</span><span class="w"> </span><span class="n">AST</span><span class="w"> </span><span class="k">of</span><span class="w">
    </span><span class="o">?</span><span class="n">Q</span><span class="p" data-group-id="8878744638-1">(</span><span class="s">&quot;{foo, _@Foo}&quot;</span><span class="p" data-group-id="8878744638-1">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nf">handle</span><span class="p" data-group-id="8878744638-2">(</span><span class="n">Foo</span><span class="p" data-group-id="8878744638-2">)</span><span class="p">;</span><span class="w">
    </span><span class="o">?</span><span class="n">Q</span><span class="p" data-group-id="8878744638-3">(</span><span class="s">&quot;{bar, _@Bar}&quot;</span><span class="p" data-group-id="8878744638-3">)</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="nc">erl_syntax</span><span class="p">:</span><span class="nf">is_integer</span><span class="p" data-group-id="8878744638-4">(</span><span class="n">Bar</span><span class="p" data-group-id="8878744638-4">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nf">handle</span><span class="p" data-group-id="8878744638-5">(</span><span class="n">Bar</span><span class="p" data-group-id="8878744638-5">)</span><span class="p">;</span><span class="w">
    </span><span class="p">_</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nf">handle_default</span><span class="p" data-group-id="8878744638-6">(</span><span class="p" data-group-id="8878744638-6">)</span><span class="w">
</span><span class="k">end</span></code></pre><p>These case switches only allow <code class="inline">?Q(...)</code> or <code class="inline">_</code> as clause patterns, and the
guards may contain any expressions, not just Erlang guard expressions.</p><p>If the macro <code class="inline">MERL_NO_TRANSFORM</code> is defined before the <code class="inline">merl.hrl</code> header file is
included, the parse transform used by Merl will be disabled, and in that case,
the match expressions <code class="inline">?Q(...) = ...</code>, case switches using <code class="inline">?Q(...)</code> patterns,
and automatic metavariables like <code class="inline">_@Tuple</code> cannot be used in your code, but the
Merl macros and functions still work. To do metavariable substitution, you need
to use the <code class="inline">?Q(Text, Map)</code> macro. For example:</p><pre><code class="makeup erlang" translate="no"><span class="n">Tuple</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">?</span><span class="n">Q</span><span class="p" data-group-id="9272539162-1">(</span><span class="s">&quot;{foo, _@bar, _@baz}&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9272539162-2">[</span><span class="p" data-group-id="9272539162-3">{</span><span class="ss">bar</span><span class="p">,</span><span class="w"> </span><span class="n">Bar</span><span class="p" data-group-id="9272539162-3">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9272539162-4">{</span><span class="ss">baz</span><span class="p">,</span><span class="n">Baz</span><span class="p" data-group-id="9272539162-4">}</span><span class="p" data-group-id="9272539162-2">]</span><span class="p" data-group-id="9272539162-1">)</span></code></pre><p>The text given to a <code class="inline">?Q(Text)</code> macro can be either a single string or a list of
strings. The latter is useful when you need to split a long expression over
multiple lines. For example:</p><pre><code class="makeup erlang" translate="no"><span class="o">?</span><span class="n">Q</span><span class="p" data-group-id="0433320167-1">(</span><span class="p" data-group-id="0433320167-2">[</span><span class="s">&quot;case _@Expr of&quot;</span><span class="p">,</span><span class="w">
    </span><span class="s">&quot;  {foo, X} -&gt; f(X);&quot;</span><span class="p">,</span><span class="w">
    </span><span class="s">&quot;  {bar, X} -&gt; g(X)&quot;</span><span class="p">,</span><span class="w">
    </span><span class="s">&quot;  _ -&gt; h(X)&quot;</span><span class="w">
</span><span class="s">&quot;end&quot;</span><span class="p" data-group-id="0433320167-2">]</span><span class="p" data-group-id="0433320167-1">)</span></code></pre><p>If there is a syntax error somewhere in the text (like the missing semicolon in
the second clause above) this allows Merl to generate an error message pointing
to the exact line in your source code. (Just remember to comma-separate the
strings in the list, otherwise Erlang will concatenate the string fragments as
if they were a single string.)</p><h3 id="module-metavariable-syntax" class="section-heading"><a href="#module-metavariable-syntax" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Metavariable syntax</span></h3><p>There are several ways to write a metavariable in your quoted code:</p><ul><li>Atoms starting with <code class="inline">@</code>, for example <code class="inline">'@foo'</code> or <code class="inline">'@Foo'</code></li><li>Variables starting with <code class="inline">_@</code>, for example <code class="inline">_@bar</code> or <code class="inline">_@Bar</code></li><li>Strings starting with <code class="inline">&quot;'@</code>, for example <code class="inline">&quot;'@File&quot;</code></li><li>Integers starting with 909, for example <code class="inline">9091</code> or <code class="inline">909123</code></li></ul><p>Following the prefix, one or more <code class="inline">_</code> or <code class="inline">0</code> characters may be used to indicate
&quot;lifting&quot; of the variable one or more levels, and after that, a <code class="inline">@</code> or <code class="inline">9</code>
character indicates a glob metavariable (matching zero or more elements in a
sequence) rather than a normal metavariable. For example:</p><ul><li><code class="inline">'@_foo'</code> is lifted one level, and <code class="inline">_@__foo</code> is lifted two levels</li><li><code class="inline">_@@bar</code> is a glob variable, and <code class="inline">_@_@bar</code> is a lifted glob variable</li><li><code class="inline">90901</code> is a lifted variable,<code class="inline">90991</code> is a glob variable, and <code class="inline">9090091</code> is a
glob variable lifted two levels</li></ul><p>(Note that the last character in the name is never considered to be a lift or
glob marker, hence, <code class="inline">_@__</code> and <code class="inline">90900</code> are only lifted one level, not two. Also
note that globs only matter for matching; when doing substitutions, a non-glob
variable can be used to inject a sequence of elements, and vice versa.)</p><p>If the name after the prefix and any lift and glob markers is <code class="inline">_</code> or <code class="inline">0</code>, the
variable is treated as an anonymous catch-all pattern in matches. For example,
<code class="inline">_@_</code>, <code class="inline">_@@_</code>, <code class="inline">_@__</code>, or even <code class="inline">_@__@_</code>.</p><p>Finally, if the name without any prefixes or lift/glob markers begins with an
uppercase character, as in <code class="inline">_@Foo</code> or <code class="inline">_@_@Foo</code>, it will become a variable on
the Erlang level, and can be used to easily deconstruct and construct syntax
trees:</p><pre><code class="makeup erlang" translate="no"><span class="k">case</span><span class="w"> </span><span class="n">Input</span><span class="w"> </span><span class="k">of</span><span class="w">
    </span><span class="o">?</span><span class="n">Q</span><span class="p" data-group-id="0479711949-1">(</span><span class="s">&quot;{foo, _@Number}&quot;</span><span class="p" data-group-id="0479711949-1">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">Q</span><span class="p" data-group-id="0479711949-2">(</span><span class="s">&quot;foo:bar(_@Number)&quot;</span><span class="p" data-group-id="0479711949-2">)</span><span class="p">;</span><span class="w">
    </span><span class="p">.</span><span class="p">.</span><span class="p">.</span></code></pre><p>We refer to these as &quot;automatic metavariables&quot;. If in addition the name ends
with <code class="inline">@</code>, as in <code class="inline">_@Foo@</code>, the value of the variable as an Erlang term will be
automatically converted to the corresponding abstract syntax tree when used to
construct a larger tree. For example, in:</p><pre><code class="makeup erlang" translate="no"><span class="n">Bar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="2131317432-1">{</span><span class="ss">bar</span><span class="p">,</span><span class="w"> </span><span class="mi">42</span><span class="p" data-group-id="2131317432-1">}</span><span class="p">,</span><span class="w">
</span><span class="n">Foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">?</span><span class="n">Q</span><span class="p" data-group-id="2131317432-2">(</span><span class="s">&quot;{foo, _@Bar@}&quot;</span><span class="p" data-group-id="2131317432-2">)</span></code></pre><p>(where Bar is just some term, not a syntax tree) the result <code class="inline">Foo</code> will be a
syntax tree representing <code class="inline">{foo, {bar, 42}}</code>. This avoids the need for temporary
variables in order to inject data, as in</p><pre><code class="makeup erlang" translate="no"><span class="n">TmpBar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">erl_syntax</span><span class="p">:</span><span class="nf">abstract</span><span class="p" data-group-id="3588428726-1">(</span><span class="n">Bar</span><span class="p" data-group-id="3588428726-1">)</span><span class="p">,</span><span class="w">
</span><span class="n">Foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">?</span><span class="n">Q</span><span class="p" data-group-id="3588428726-2">(</span><span class="s">&quot;{foo, _@TmpBar}&quot;</span><span class="p" data-group-id="3588428726-2">)</span></code></pre><p>If the context requires an integer rather than a variable, an atom, or a string,
you cannot use the uppercase convention to mark an automatic metavariable.
Instead, if the integer (without the <code class="inline">909</code>-prefix and lift/glob markers) ends
in a <code class="inline">9</code>, the integer will become an Erlang-level variable prefixed with <code class="inline">Q</code>,
and if it ends with <code class="inline">99</code> it will also be automatically abstracted. For example,
the following will increment the arity of the exported function f:</p><pre><code class="makeup erlang" translate="no"><span class="k">case</span><span class="w"> </span><span class="n">Form</span><span class="w"> </span><span class="k">of</span><span class="w">
    </span><span class="o">?</span><span class="n">Q</span><span class="p" data-group-id="4096837513-1">(</span><span class="s">&quot;-export([f/90919]).&quot;</span><span class="p" data-group-id="4096837513-1">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
        </span><span class="n">Q2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">erl_syntax</span><span class="p">:</span><span class="nf">concrete</span><span class="p" data-group-id="4096837513-2">(</span><span class="n">Q1</span><span class="p" data-group-id="4096837513-2">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="o">?</span><span class="n">Q</span><span class="p" data-group-id="4096837513-3">(</span><span class="s">&quot;-export([f/909299]).&quot;</span><span class="p" data-group-id="4096837513-3">)</span><span class="p">;</span><span class="w">
    </span><span class="p">.</span><span class="p">.</span><span class="p">.</span></code></pre><h3 id="module-when-to-use-the-various-forms-of-metavariables" class="section-heading"><a href="#module-when-to-use-the-various-forms-of-metavariables" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">When to use the various forms of metavariables</span></h3><p>Merl can only parse a fragment of text if it follows the basic syntactical rules
of Erlang. In most places, a normal Erlang variable can be used as metavariable,
for example:</p><pre><code class="makeup erlang" translate="no"><span class="o">?</span><span class="n">Q</span><span class="p" data-group-id="8226291221-1">(</span><span class="s">&quot;f(_@Arg)&quot;</span><span class="p" data-group-id="8226291221-1">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Expr</span></code></pre><p>but if you want to match on something like the name of a function, you have to
use an atom as metavariable:</p><pre><code class="makeup erlang" translate="no"><span class="o">?</span><span class="n">Q</span><span class="p" data-group-id="3903531216-1">(</span><span class="s">&quot;&#39;@Name&#39;() -&gt; _@@_.&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Function</span></code></pre><p>(note the anonymous glob variable <code class="inline">_@@_</code> to ignore the function body).</p><p>In some contexts, only a string or an integer is allowed. For example, the
directive <code class="inline">-file(Name, Line)</code> requires that <code class="inline">Name</code> is a string literal and
<code class="inline">Line</code> an integer literal:</p><pre><code class="makeup erlang" translate="no"><span class="o">?</span><span class="n">Q</span><span class="p" data-group-id="1563826807-1">(</span><span class="s">&quot;-file(\&quot;&#39;@File\&quot;, 9090).&quot;</span><span class="p" data-group-id="1563826807-1">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">?</span><span class="n">Q</span><span class="p" data-group-id="1563826807-2">(</span><span class="s">&quot;-file(\&quot;foo.erl\&quot;, 42).&quot;</span><span class="p" data-group-id="1563826807-2">)</span><span class="p">)</span><span class="p">.</span></code></pre><p>This will extract the string literal <code class="inline">&quot;foo.erl&quot;</code> into the variable <code class="inline">Foo</code>. Note
the use of the anonymous variable <code class="inline">9090</code> to ignore the line number. To match and
also bind a metavariable that must be an integer literal, we can use the
convention of ending the integer with a 9, turning it into a Q-prefixed variable
on the Erlang level (see the previous section).</p><h4>Globs</h4><p>Whenever you want to match out a number of elements in a sequence (zero or more)
rather than a fixed set of elements, you need to use a glob. For example:</p><pre><code class="makeup erlang" translate="no"><span class="o">?</span><span class="n">Q</span><span class="p" data-group-id="3799320028-1">(</span><span class="s">&quot;{_@@Elements}&quot;</span><span class="p" data-group-id="3799320028-1">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">?</span><span class="n">Q</span><span class="p" data-group-id="3799320028-2">(</span><span class="p" data-group-id="3799320028-3">{</span><span class="ss">a</span><span class="p">,</span><span class="w"> </span><span class="ss">b</span><span class="p">,</span><span class="w"> </span><span class="ss">c</span><span class="p" data-group-id="3799320028-3">}</span><span class="p" data-group-id="3799320028-2">)</span></code></pre><p>will bind Elements to the list of individual syntax trees representing the atoms
<code class="inline">a</code>, <code class="inline">b</code>, and <code class="inline">c</code>. This can also be used with static prefix and suffix elements
in the sequence. For example:</p><pre><code class="makeup erlang" translate="no"><span class="o">?</span><span class="n">Q</span><span class="p" data-group-id="1356857354-1">(</span><span class="s">&quot;{a, b, _@@Elements}&quot;</span><span class="p" data-group-id="1356857354-1">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">?</span><span class="n">Q</span><span class="p" data-group-id="1356857354-2">(</span><span class="p" data-group-id="1356857354-3">{</span><span class="ss">a</span><span class="p">,</span><span class="w"> </span><span class="ss">b</span><span class="p">,</span><span class="w"> </span><span class="ss">c</span><span class="p">,</span><span class="w"> </span><span class="ss">d</span><span class="p" data-group-id="1356857354-3">}</span><span class="p" data-group-id="1356857354-2">)</span></code></pre><p>will bind Elements to the list of the <code class="inline">c</code> and <code class="inline">d</code> subtrees, and</p><pre><code class="makeup erlang" translate="no"><span class="o">?</span><span class="n">Q</span><span class="p" data-group-id="0227233742-1">(</span><span class="s">&quot;{_@@Elements, c, d}&quot;</span><span class="p" data-group-id="0227233742-1">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">?</span><span class="n">Q</span><span class="p" data-group-id="0227233742-2">(</span><span class="p" data-group-id="0227233742-3">{</span><span class="ss">a</span><span class="p">,</span><span class="w"> </span><span class="ss">b</span><span class="p">,</span><span class="w"> </span><span class="ss">c</span><span class="p">,</span><span class="w"> </span><span class="ss">d</span><span class="p" data-group-id="0227233742-3">}</span><span class="p" data-group-id="0227233742-2">)</span></code></pre><p>will bind Elements to the list of the <code class="inline">a</code> and <code class="inline">b</code> subtrees. You can even use
plain metavariables in the prefix or suffix:</p><pre><code class="makeup erlang" translate="no"><span class="o">?</span><span class="n">Q</span><span class="p" data-group-id="2020770896-1">(</span><span class="s">&quot;{_@First, _@@Rest}&quot;</span><span class="p" data-group-id="2020770896-1">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">?</span><span class="n">Q</span><span class="p" data-group-id="2020770896-2">(</span><span class="p" data-group-id="2020770896-3">{</span><span class="ss">a</span><span class="p">,</span><span class="w"> </span><span class="ss">b</span><span class="p">,</span><span class="w"> </span><span class="ss">c</span><span class="p" data-group-id="2020770896-3">}</span><span class="p" data-group-id="2020770896-2">)</span></code></pre><p>or</p><pre><code class="makeup erlang" translate="no"><span class="o">?</span><span class="n">Q</span><span class="p" data-group-id="9146894725-1">(</span><span class="s">&quot;{_@@_, _@Last}&quot;</span><span class="p" data-group-id="9146894725-1">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">?</span><span class="n">Q</span><span class="p" data-group-id="9146894725-2">(</span><span class="p" data-group-id="9146894725-3">{</span><span class="ss">a</span><span class="p">,</span><span class="w"> </span><span class="ss">b</span><span class="p">,</span><span class="w"> </span><span class="ss">c</span><span class="p" data-group-id="9146894725-3">}</span><span class="p" data-group-id="9146894725-2">)</span></code></pre><p>(ignoring all but the last element). However, you cannot have two globs as part
of the same sequence.</p><h4>Lifted metavariables</h4><p>In some cases, the Erlang syntax rules make it impossible to place a
metavariable directly where you would like it. For example, you cannot write:</p><pre><code class="makeup erlang" translate="no"><span class="o">?</span><span class="n">Q</span><span class="p" data-group-id="6061903772-1">(</span><span class="s">&quot;-export([_@@Name]).&quot;</span><span class="p" data-group-id="6061903772-1">)</span></code></pre><p>to match out all name/arity pairs in the export list, or to insert a list of
exports in a declaration, because the Erlang parser only allows elements on the
form <code class="inline">A/I</code> (where <code class="inline">A</code> is an atom and <code class="inline">I</code> an integer) in the export list. A
variable like the above is not allowed, but neither is a single atom or integer,
so <code class="inline">'@@Name'</code> or <code class="inline">909919</code> would not work either.</p><p>What you have to do in such cases is to write your metavariable in a
syntactically valid position, and use lifting markers to denote where it should
really apply, as in:</p><pre><code class="makeup erlang" translate="no"><span class="o">?</span><span class="n">Q</span><span class="p" data-group-id="0569222577-1">(</span><span class="s">&quot;-export([&#39;@_@Name&#39;/0]).&quot;</span><span class="p" data-group-id="0569222577-1">)</span></code></pre><p>This causes the variable to be lifted (after parsing) to the next higher level
in the syntax tree, replacing that entire subtree. In this case, the
<code class="inline">'@_@Name'/0</code> will be replaced with <code class="inline">'@@Name'</code>, and the <code class="inline">/0</code> part was just used
as dummy notation and will be discarded.</p><p>You may even need to apply lifting more than once. To match the entire export
list as a single syntax tree, you can write:</p><pre><code class="makeup erlang" translate="no"><span class="o">?</span><span class="n">Q</span><span class="p" data-group-id="5805694299-1">(</span><span class="s">&quot;-export([&#39;@__Name&#39;/0]).&quot;</span><span class="p" data-group-id="5805694299-1">)</span></code></pre><p>using two underscores, but with no glob marker this time. This will make the
entire <code class="inline">['@__Name'/0]</code> part be replaced with <code class="inline">'@Name'</code>.</p><p>Sometimes, the tree structure of a code fragment is not very obvious, and parts
of the structure may be invisible when printed as source code. For instance, a
simple function definition like the following:</p><pre><code class="makeup erlang" translate="no"><span class="nf">zero</span><span class="p" data-group-id="4158580990-1">(</span><span class="p" data-group-id="4158580990-1">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span></code></pre><p>consists of the name (the atom <code class="inline">zero</code>), and a list of clauses containing the
single clause <code class="inline">() -&gt; 0</code>. The clause consists of an argument list (empty), a
guard (empty), and a body (which is always a list of expressions) containing the
single expression <code class="inline">0</code>. This means that to match out the name and the list of
clauses of any function, you'll need to use a pattern like
<code class="inline">?Q(&quot;'@Name'() -&gt; _@_@Body.&quot;)</code>, using a dummy clause whose body is a glob lifted
one level.</p><p>To visualize the structure of a syntax tree, you can use the function
<code class="inline">merl:show(T)</code>, which prints a summary. For example, entering</p><pre><code class="makeup erlang" translate="no"><span class="nc">merl</span><span class="p">:</span><span class="nf">show</span><span class="p" data-group-id="2384150773-1">(</span><span class="nc">merl</span><span class="p">:</span><span class="nf">quote</span><span class="p" data-group-id="2384150773-2">(</span><span class="s">&quot;inc(X, Y) when Y &gt; 0 -&gt; X + Y.&quot;</span><span class="p" data-group-id="2384150773-2">)</span><span class="p" data-group-id="2384150773-1">)</span></code></pre><p>in the Erlang shell will print the following (where the <code class="inline">+</code> signs separate
groups of subtrees on the same level):</p><pre><code class="text">function: inc(X, Y) when ... -&gt; X + Y.
  atom: inc
  +
  clause: (X, Y) when ... -&gt; X + Y
    variable: X
    variable: Y
    +
    disjunction: Y &gt; 0
      conjunction: Y &gt; 0
        infix_expr: Y &gt; 0
          variable: Y
          +
          operator: &gt;
          +
          integer: 0
    +
    infix_expr: X + Y
      variable: X
      +
      operator: +
      +
      variable: Y</code></pre><p>This shows another important non-obvious case: a clause guard, even if it's as
simple as <code class="inline">Y &gt; 0</code>, always consists of a single disjunction of one or more
conjunctions of tests, much like a tuple of tuples. Thus:</p><ul><li><code class="inline">&quot;when _@Guard -&gt;&quot;</code> will only match a guard with exactly one test</li><li><code class="inline">&quot;when _@@Guard -&gt;&quot;</code> will match a guard with one or more comma-separated tests
(but no semicolons), binding <code class="inline">Guard</code> to the list of tests</li><li><code class="inline">&quot;when _@_Guard -&gt;&quot;</code> will match just like the previous pattern, but binds
<code class="inline">Guard</code> to the conjunction subtree</li><li><code class="inline">&quot;when _@_@Guard -&gt;&quot;</code> will match an arbitrary nonempty guard, binding <code class="inline">Guard</code>
to the list of conjunction subtrees</li><li><code class="inline">&quot;when _@__Guard -&gt;&quot;</code> will match like the previous pattern, but binds <code class="inline">Guard</code>
to the whole disjunction subtree</li><li>and finally, <code class="inline">&quot;when _@__@Guard -&gt;&quot;</code> will match any clause, binding <code class="inline">Guard</code> to
<code class="inline">[]</code> if the guard is empty and to <code class="inline">[Disjunction]</code> otherwise</li></ul><p>Thus, the following pattern matches all possible clauses:</p><pre><code class="makeup erlang" translate="no"><span class="w">     </span><span class="s">&quot;(_@Args) when _@__@Guard -&gt; _@Body&quot;</span></code></pre>
    </section>

</div>

  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Summary</span>
    </h1>
<div class="summary-types summary">
  <h2>
    <a href="#types">Types</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:default_action/0" data-no-tooltip="" translate="no">default_action()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:env/0" data-no-tooltip="" translate="no">env()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:guard_test/0" data-no-tooltip="" translate="no">guard_test()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:guarded_action/0" data-no-tooltip="" translate="no">guarded_action()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:guarded_actions/0" data-no-tooltip="" translate="no">guarded_actions()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:id/0" data-no-tooltip="" translate="no">id()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:location/0" data-no-tooltip="" translate="no">location()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:pattern/0" data-no-tooltip="" translate="no">pattern()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:pattern_or_patterns/0" data-no-tooltip="" translate="no">pattern_or_patterns()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:switch_action/0" data-no-tooltip="" translate="no">switch_action()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:switch_clause/0" data-no-tooltip="" translate="no">switch_clause()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:template/0" data-no-tooltip="" translate="no">template()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:template_or_templates/0" data-no-tooltip="" translate="no">template_or_templates()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:text/0" data-no-tooltip="" translate="no">text()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:tree/0" data-no-tooltip="" translate="no">tree()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:tree_or_trees/0" data-no-tooltip="" translate="no">tree_or_trees()</a>

      </div>

    </div>

</div>
<div class="summary-functions summary">
  <h2>
    <a href="#functions">Functions</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#alpha/2" data-no-tooltip="" translate="no">alpha(TreeOrTrees, Env)</a>

      </div>

        <div class="summary-synopsis"><p>Alpha converts a pattern (renames variables).</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#compile/1" data-no-tooltip="" translate="no">compile(Code)</a>

      </div>

        <div class="summary-synopsis"><p>Equivalent to <a><code class="inline">compile(Code, [])</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#compile/2" data-no-tooltip="" translate="no">compile(Code, Options)</a>

      </div>

        <div class="summary-synopsis"><p>Compile a syntax tree or list of syntax trees representing a module into a
binary BEAM object.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#compile_and_load/1" data-no-tooltip="" translate="no">compile_and_load(Code)</a>

      </div>

        <div class="summary-synopsis"><p>Equivalent to <a><code class="inline">compile_and_load(Code, [])</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#compile_and_load/2" data-no-tooltip="" translate="no">compile_and_load(Code, Options)</a>

      </div>

        <div class="summary-synopsis"><p>Compile a syntax tree or list of syntax trees representing a module and load the
resulting module into memory.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#match/2" data-no-tooltip="" translate="no">match(P, T)</a>

      </div>

        <div class="summary-synopsis"><p>Match a pattern against a syntax tree (or patterns against syntax trees)
returning an environment mapping variable names to subtrees; the environment is
always sorted on keys.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#meta_template/1" data-no-tooltip="" translate="no">meta_template(TemplateOrTemplates)</a>

      </div>

        <div class="summary-synopsis"><p>Turn a template into a syntax tree representing the template.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#print/1" data-no-tooltip="" translate="no">print(TreeOrTrees)</a>

      </div>

        <div class="summary-synopsis"><p>Pretty-print a syntax tree or template to the standard output.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#qquote/2" data-no-tooltip="" translate="no">qquote(Text, Env)</a>

      </div>

        <div class="summary-synopsis"><p>Equivalent to <a><code class="inline">qquote(1, Text, Env)</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#qquote/3" data-no-tooltip="" translate="no">qquote(StartPos, Text, Env)</a>

      </div>

        <div class="summary-synopsis"><p>Parse text and substitute meta-variables.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#quote/1" data-no-tooltip="" translate="no">quote(Text)</a>

      </div>

        <div class="summary-synopsis"><p>Equivalent to <a><code class="inline">quote(1, Text)</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#quote/2" data-no-tooltip="" translate="no">quote(StartPos, Text)</a>

      </div>

        <div class="summary-synopsis"><p>Parse text.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#show/1" data-no-tooltip="" translate="no">show(TreeOrTrees)</a>

      </div>

        <div class="summary-synopsis"><p>Print the structure of a syntax tree or template to the standard output.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#subst/2" data-no-tooltip="" translate="no">subst(TreeOrTrees, Env)</a>

      </div>

        <div class="summary-synopsis"><p>Substitute metavariables in a pattern or list of patterns, yielding a syntax
tree or list of trees as result.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#switch/2" data-no-tooltip="" translate="no">switch(Trees, Clauses)</a>

      </div>

        <div class="summary-synopsis"><p>Match against one or more clauses with patterns and optional guards.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#template/1" data-no-tooltip="" translate="no">template(TreeOrTrees)</a>

      </div>

        <div class="summary-synopsis"><p>Turn a syntax tree or list of trees into a template or templates.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#template_vars/1" data-no-tooltip="" translate="no">template_vars(Template)</a>

      </div>

        <div class="summary-synopsis"><p>Return an ordered list of the metavariables in the template.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#term/1" data-no-tooltip="" translate="no">term(Term)</a>

      </div>

        <div class="summary-synopsis"><p>Create a syntax tree for a constant term.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#tree/1" data-no-tooltip="" translate="no">tree(TemplateOrTemplates)</a>

      </div>

        <div class="summary-synopsis"><p>Revert a template to a normal syntax tree.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#tsubst/2" data-no-tooltip="" translate="no">tsubst(TreeOrTrees, Env)</a>

      </div>

        <div class="summary-synopsis"><p>Like <a><code class="inline">subst/2</code></a>, but does not convert the result from a template back to a tree.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#var/1" data-no-tooltip="" translate="no">var(Name)</a>

      </div>

        <div class="summary-synopsis"><p>Create a variable.</p></div>

    </div>

</div>

  </section>


  <section id="types" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#types">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Types</span>
    </h1>
    <div class="types-list">
<section class="detail" id="t:default_action/0">

  <div class="detail-header">
    <a href="#t:default_action/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">default_action()</h1>

        <span class="note">(not exported)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/syntax_tools/src/merl.erl#L1166" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> default_action() :: fun(() -> <a href="../../apps/erts/erlang.html#t:any/0">any</a>()).</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:env/0">

  <div class="detail-header">
    <a href="#t:env/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">env()</h1>

        <span class="note">(not exported)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/syntax_tools/src/merl.erl#L394" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> env() :: [{Key :: <a href="#t:id/0">id</a>(), <a href="#t:pattern_or_patterns/0">pattern_or_patterns</a>()}].</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:guard_test/0">

  <div class="detail-header">
    <a href="#t:guard_test/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">guard_test()</h1>

        <span class="note">(not exported)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/syntax_tools/src/merl.erl#L1164" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> guard_test() :: fun((<a href="#t:env/0">env</a>()) -> <a href="../../apps/erts/erlang.html#t:boolean/0">boolean</a>()).</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:guarded_action/0">

  <div class="detail-header">
    <a href="#t:guarded_action/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">guarded_action()</h1>

        <span class="note">(not exported)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/syntax_tools/src/merl.erl#L1160" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> guarded_action() :: <a href="#t:switch_action/0">switch_action</a>() | {<a href="#t:guard_test/0">guard_test</a>(), <a href="#t:switch_action/0">switch_action</a>()}.</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:guarded_actions/0">

  <div class="detail-header">
    <a href="#t:guarded_actions/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">guarded_actions()</h1>

        <span class="note">(not exported)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/syntax_tools/src/merl.erl#L1158" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> guarded_actions() :: <a href="#t:guarded_action/0">guarded_action</a>() | [<a href="#t:guarded_action/0">guarded_action</a>()].</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:id/0">

  <div class="detail-header">
    <a href="#t:id/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">id()</h1>

        <span class="note">(not exported)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/syntax_tools/src/merl.erl#L396" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> id() :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>() | <a href="../../apps/erts/erlang.html#t:integer/0">integer</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:location/0">

  <div class="detail-header">
    <a href="#t:location/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">location()</h1>

        <span class="note">(not exported)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/syntax_tools/src/merl.erl#L402" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> location() :: <a href="../../apps/stdlib/erl_anno.html#t:location/0">erl_anno:location</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:pattern/0">

  <div class="detail-header">
    <a href="#t:pattern/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">pattern()</h1>

        <span class="note">(not exported)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/syntax_tools/src/merl.erl#L390" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> pattern() :: <a href="#t:tree/0">tree</a>() | <a href="#t:template/0">template</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:pattern_or_patterns/0">

  <div class="detail-header">
    <a href="#t:pattern_or_patterns/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">pattern_or_patterns()</h1>

        <span class="note">(not exported)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/syntax_tools/src/merl.erl#L392" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> pattern_or_patterns() :: <a href="#t:pattern/0">pattern</a>() | [<a href="#t:pattern/0">pattern</a>()].</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:switch_action/0">

  <div class="detail-header">
    <a href="#t:switch_action/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">switch_action()</h1>

        <span class="note">(not exported)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/syntax_tools/src/merl.erl#L1162" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> switch_action() :: fun((<a href="#t:env/0">env</a>()) -> <a href="../../apps/erts/erlang.html#t:any/0">any</a>()).</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:switch_clause/0">

  <div class="detail-header">
    <a href="#t:switch_clause/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">switch_clause()</h1>

        <span class="note">(not exported)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/syntax_tools/src/merl.erl#L1153" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> switch_clause() ::
          {<a href="#t:pattern_or_patterns/0">pattern_or_patterns</a>(), <a href="#t:guarded_actions/0">guarded_actions</a>()} |
          {<a href="#t:pattern_or_patterns/0">pattern_or_patterns</a>(), <a href="#t:guard_test/0">guard_test</a>(), <a href="#t:switch_action/0">switch_action</a>()} |
          <a href="#t:default_action/0">default_action</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:template/0">

  <div class="detail-header">
    <a href="#t:template/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">template()</h1>

        <span class="note">(not exported)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/syntax_tools/src/merl.erl#L699" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> template() :: <a href="#t:tree/0">tree</a>() | {<a href="#t:id/0">id</a>()} | {'*', <a href="#t:id/0">id</a>()} | {template, <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(), <a href="../../apps/erts/erlang.html#t:term/0">term</a>(), [[<a href="#t:template/0">template</a>()]]}.</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:template_or_templates/0">

  <div class="detail-header">
    <a href="#t:template_or_templates/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">template_or_templates()</h1>

        <span class="note">(not exported)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/syntax_tools/src/merl.erl#L704" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> template_or_templates() :: <a href="#t:template/0">template</a>() | [<a href="#t:template/0">template</a>()].</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:text/0">

  <div class="detail-header">
    <a href="#t:text/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">text()</h1>

        <span class="note">(not exported)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/syntax_tools/src/merl.erl#L400" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> text() :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>() | <a href="../../apps/erts/erlang.html#t:binary/0">binary</a>() | [<a href="../../apps/erts/erlang.html#t:string/0">string</a>()] | [<a href="../../apps/erts/erlang.html#t:binary/0">binary</a>()].</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:tree/0">

  <div class="detail-header">
    <a href="#t:tree/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">tree()</h1>

        <span class="note">(not exported)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/syntax_tools/src/merl.erl#L386" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> tree() :: <a href="erl_syntax.html#t:syntaxTree/0">erl_syntax:syntaxTree</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:tree_or_trees/0">

  <div class="detail-header">
    <a href="#t:tree_or_trees/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">tree_or_trees()</h1>

        <span class="note">(not exported)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/syntax_tools/src/merl.erl#L388" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> tree_or_trees() :: <a href="#t:tree/0">tree</a>() | [<a href="#t:tree/0">tree</a>()].</pre>

      </div>


  </section>
</section>

    </div>
  </section>

  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Functions</span>
    </h1>
    <div class="functions-list">
<section class="detail" id="alpha/2">

  <div class="detail-header">
    <a href="#alpha/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">alpha(TreeOrTrees, Env)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/syntax_tools/src/merl.erl#L976" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> alpha(<a href="#t:pattern_or_patterns/0">pattern_or_patterns</a>(), [{<a href="#t:id/0">id</a>(), <a href="#t:id/0">id</a>()}]) -> <a href="#t:template_or_templates/0">template_or_templates</a>().</pre>

      </div>

<p>Alpha converts a pattern (renames variables).</p><p>Similar to tsubst/1, but only renames variables (including globs).</p><p><em>See also: </em><a href="#tsubst/2"><code class="inline">tsubst/2</code></a>.</p>
  </section>
</section>
<section class="detail" id="compile/1">

  <div class="detail-header">
    <a href="#compile/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">compile(Code)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/syntax_tools/src/merl.erl#L413" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> compile(<a href="#t:tree_or_trees/0">tree_or_trees</a>()) -> <a href="../../apps/compiler/compile.html#t:comp_ret/0">compile:comp_ret</a>().</pre>

      </div>

<p>Equivalent to <a href="#compile/2"><code class="inline">compile(Code, [])</code></a>.</p>
  </section>
</section>
<section class="detail" id="compile/2">

  <div class="detail-header">
    <a href="#compile/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">compile(Code, Options)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/syntax_tools/src/merl.erl#L426" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> compile(<a href="#t:tree_or_trees/0">tree_or_trees</a>(), [<a href="../../apps/compiler/compile.html#t:option/0">compile:option</a>()]) -> <a href="../../apps/compiler/compile.html#t:comp_ret/0">compile:comp_ret</a>().</pre>

      </div>

<p>Compile a syntax tree or list of syntax trees representing a module into a
binary BEAM object.</p><p><em>See also: </em><a href="#compile/1"><code class="inline">compile/1</code></a>, <a href="#compile_and_load/2"><code class="inline">compile_and_load/2</code></a>.</p>
  </section>
</section>
<section class="detail" id="compile_and_load/1">

  <div class="detail-header">
    <a href="#compile_and_load/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">compile_and_load(Code)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/syntax_tools/src/merl.erl#L440" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> compile_and_load(<a href="#t:tree_or_trees/0">tree_or_trees</a>()) ->
                          {ok, <a href="../../apps/erts/erlang.html#t:binary/0">binary</a>()} | error | {error, Errors :: <a href="../../apps/erts/erlang.html#t:list/0">list</a>(), Warnings :: <a href="../../apps/erts/erlang.html#t:list/0">list</a>()}.</pre>

      </div>

<p>Equivalent to <a href="#compile_and_load/2"><code class="inline">compile_and_load(Code, [])</code></a>.</p>
  </section>
</section>
<section class="detail" id="compile_and_load/2">

  <div class="detail-header">
    <a href="#compile_and_load/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">compile_and_load(Code, Options)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/syntax_tools/src/merl.erl#L451" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> compile_and_load(<a href="#t:tree_or_trees/0">tree_or_trees</a>(), [<a href="../../apps/compiler/compile.html#t:option/0">compile:option</a>()]) ->
                          {ok, <a href="../../apps/erts/erlang.html#t:binary/0">binary</a>()} | error | {error, Errors :: <a href="../../apps/erts/erlang.html#t:list/0">list</a>(), Warnings :: <a href="../../apps/erts/erlang.html#t:list/0">list</a>()}.</pre>

      </div>

<p>Compile a syntax tree or list of syntax trees representing a module and load the
resulting module into memory.</p><p><em>See also: </em><a href="#compile/2"><code class="inline">compile/2</code></a>, <a href="#compile_and_load/1"><code class="inline">compile_and_load/1</code></a>.</p>
  </section>
</section>
<section class="detail" id="match/2">

  <div class="detail-header">
    <a href="#match/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">match(P, T)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/syntax_tools/src/merl.erl#L1015" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> match(<a href="#t:pattern_or_patterns/0">pattern_or_patterns</a>(), <a href="#t:tree_or_trees/0">tree_or_trees</a>()) -> {ok, <a href="#t:env/0">env</a>()} | error.</pre>

      </div>

<p>Match a pattern against a syntax tree (or patterns against syntax trees)
returning an environment mapping variable names to subtrees; the environment is
always sorted on keys.</p><section role="note" class="admonition info"><h4 class="admonition-title info">Note</h4><p>Multiple occurrences of metavariables in the pattern is not
allowed, but is not checked.</p></section><p><em>See also: </em><a href="#switch/2"><code class="inline">switch/2</code></a>, <a href="#template/1"><code class="inline">template/1</code></a>.</p>
  </section>
</section>
<section class="detail" id="meta_template/1">

  <div class="detail-header">
    <a href="#meta_template/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">meta_template(TemplateOrTemplates)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/syntax_tools/src/merl.erl#L799" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> meta_template(<a href="#t:template_or_templates/0">template_or_templates</a>()) -> <a href="#t:tree_or_trees/0">tree_or_trees</a>().</pre>

      </div>

<p>Turn a template into a syntax tree representing the template.</p><p>Meta-variables in the template are turned into normal Erlang variables
if their names (after the metavariable prefix characters) begin with
an uppercase character. For example, <code class="inline">_@Foo</code> in the template becomes the
variable <code class="inline">Foo</code> in the meta-template. Furthermore, variables ending
with <code class="inline">@</code> are automatically wrapped in a call to merl:term/1, so
<code class="inline">_@Foo@</code> in the template becomes <code class="inline">merl:term(Foo)</code> in the
meta-template.</p>
  </section>
</section>
<section class="detail" id="print/1">

  <div class="detail-header">
    <a href="#print/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">print(TreeOrTrees)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/syntax_tools/src/merl.erl#L484" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> print(<a href="#t:tree_or_trees/0">tree_or_trees</a>()) -> ok.</pre>

      </div>

<p>Pretty-print a syntax tree or template to the standard output.</p><p>This is a utility function for development and debugging.</p>
  </section>
</section>
<section class="detail" id="qquote/2">

  <div class="detail-header">
    <a href="#qquote/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">qquote(Text, Env)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/syntax_tools/src/merl.erl#L546" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> qquote(Text :: <a href="#t:text/0">text</a>(), Env :: <a href="#t:env/0">env</a>()) -> <a href="#t:tree_or_trees/0">tree_or_trees</a>().</pre>

      </div>

<p>Equivalent to <a href="#qquote/3"><code class="inline">qquote(1, Text, Env)</code></a>.</p>
  </section>
</section>
<section class="detail" id="qquote/3">

  <div class="detail-header">
    <a href="#qquote/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">qquote(StartPos, Text, Env)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/syntax_tools/src/merl.erl#L561" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> qquote(StartPos :: <a href="#t:location/0">location</a>(), Text :: <a href="#t:text/0">text</a>(), Env :: <a href="#t:env/0">env</a>()) -> <a href="#t:tree_or_trees/0">tree_or_trees</a>().</pre>

      </div>

<p>Parse text and substitute meta-variables.</p><p>Takes an initial scanner starting position as first argument.</p><p>The macro <code class="inline">?Q(Text, Env)</code> expands to <code class="inline">merl:qquote(?LINE, Text, Env)</code>.</p><p><em>See also: </em><a href="#quote/2"><code class="inline">quote/2</code></a>.</p>
  </section>
</section>
<section class="detail" id="quote/1">

  <div class="detail-header">
    <a href="#quote/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">quote(Text)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/syntax_tools/src/merl.erl#L568" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> quote(Text :: <a href="#t:text/0">text</a>()) -> <a href="#t:tree_or_trees/0">tree_or_trees</a>().</pre>

      </div>

<p>Equivalent to <a href="#quote/2"><code class="inline">quote(1, Text)</code></a>.</p>
  </section>
</section>
<section class="detail" id="quote/2">

  <div class="detail-header">
    <a href="#quote/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">quote(StartPos, Text)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/syntax_tools/src/merl.erl#L583" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> quote(StartPos :: <a href="#t:location/0">location</a>(), Text :: <a href="#t:text/0">text</a>()) -> <a href="#t:tree_or_trees/0">tree_or_trees</a>().</pre>

      </div>

<p>Parse text.</p><p>Takes an initial scanner starting position as first argument.</p><p>The macro <code class="inline">?Q(Text)</code> expands to <code class="inline">merl:quote(?LINE, Text)</code>.</p><p><em>See also: </em><a href="#quote/1"><code class="inline">quote/1</code></a>.</p>
  </section>
</section>
<section class="detail" id="show/1">

  <div class="detail-header">
    <a href="#show/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">show(TreeOrTrees)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/syntax_tools/src/merl.erl#L498" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> show(<a href="#t:tree_or_trees/0">tree_or_trees</a>()) -> ok.</pre>

      </div>

<p>Print the structure of a syntax tree or template to the standard output.</p><p>This is a utility function for development and debugging.</p>
  </section>
</section>
<section class="detail" id="subst/2">

  <div class="detail-header">
    <a href="#subst/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">subst(TreeOrTrees, Env)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/syntax_tools/src/merl.erl#L923" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> subst(<a href="#t:pattern_or_patterns/0">pattern_or_patterns</a>(), <a href="#t:env/0">env</a>()) -> <a href="#t:tree_or_trees/0">tree_or_trees</a>().</pre>

      </div>

<p>Substitute metavariables in a pattern or list of patterns, yielding a syntax
tree or list of trees as result.</p><p>Both for normal metavariables and glob metavariables, the substituted
value may be a single element or a list of elements. For example, if a
list representing <code class="inline">1, 2, 3</code> is substituted for <code class="inline">var</code> in either of
<code class="inline">[foo, _@var, bar]</code> or <code class="inline">[foo, _@var, bar]</code>, the result represents
<code class="inline">[foo, 1, 2, 3, bar]</code>.</p>
  </section>
</section>
<section class="detail" id="switch/2">

  <div class="detail-header">
    <a href="#switch/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">switch(Trees, Clauses)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/syntax_tools/src/merl.erl#L1180" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> switch(<a href="#t:tree_or_trees/0">tree_or_trees</a>(), [<a href="#t:switch_clause/0">switch_clause</a>()]) -> <a href="../../apps/erts/erlang.html#t:any/0">any</a>().</pre>

      </div>

<p>Match against one or more clauses with patterns and optional guards.</p><p>Note that clauses following a default action will be ignored.</p><p><em>See also: </em><a href="#match/2"><code class="inline">match/2</code></a>.</p>
  </section>
</section>
<section class="detail" id="template/1">

  <div class="detail-header">
    <a href="#template/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">template(TreeOrTrees)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/syntax_tools/src/merl.erl#L719" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> template(<a href="#t:pattern_or_patterns/0">pattern_or_patterns</a>()) -> <a href="#t:template_or_templates/0">template_or_templates</a>().</pre>

      </div>

<p>Turn a syntax tree or list of trees into a template or templates.</p><p>Templates can be instantiated or matched against, and reverted back to
normal syntax trees using <a href="#tree/1"><code class="inline">tree/1</code></a>. If the input is already a
template, it is not modified further.</p><p><em>See also: </em><a href="#match/2"><code class="inline">match/2</code></a>, <a href="#subst/2"><code class="inline">subst/2</code></a>, <a href="#tree/1"><code class="inline">tree/1</code></a>.</p>
  </section>
</section>
<section class="detail" id="template_vars/1">

  <div class="detail-header">
    <a href="#template_vars/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">template_vars(Template)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/syntax_tools/src/merl.erl#L857" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> template_vars(<a href="#t:template_or_templates/0">template_or_templates</a>()) -> [<a href="#t:id/0">id</a>()].</pre>

      </div>

<p>Return an ordered list of the metavariables in the template.</p>
  </section>
</section>
<section class="detail" id="term/1">

  <div class="detail-header">
    <a href="#term/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">term(Term)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/syntax_tools/src/merl.erl#L472" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> term(<a href="../../apps/erts/erlang.html#t:term/0">term</a>()) -> <a href="#t:tree/0">tree</a>().</pre>

      </div>

<p>Create a syntax tree for a constant term.</p>
  </section>
</section>
<section class="detail" id="tree/1">

  <div class="detail-header">
    <a href="#tree/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">tree(TemplateOrTemplates)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/syntax_tools/src/merl.erl#L888" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> tree(<a href="#t:template_or_templates/0">template_or_templates</a>()) -> <a href="#t:tree_or_trees/0">tree_or_trees</a>().</pre>

      </div>

<p>Revert a template to a normal syntax tree.</p><p>Any remaining metavariables are turned into <code class="inline">@</code>-prefixed atoms or
<code class="inline">909</code>-prefixed integers.</p><p><em>See also: </em><a href="#template/1"><code class="inline">template/1</code></a>.</p>
  </section>
</section>
<section class="detail" id="tsubst/2">

  <div class="detail-header">
    <a href="#tsubst/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">tsubst(TreeOrTrees, Env)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/syntax_tools/src/merl.erl#L943" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> tsubst(<a href="#t:pattern_or_patterns/0">pattern_or_patterns</a>(), <a href="#t:env/0">env</a>()) -> <a href="#t:template_or_templates/0">template_or_templates</a>().</pre>

      </div>

<p>Like <a href="#subst/2"><code class="inline">subst/2</code></a>, but does not convert the result from a template back to a tree.</p><p>Useful if you want to do multiple separate substitutions.</p><p><em>See also: </em><a href="#subst/2"><code class="inline">subst/2</code></a>, <a href="#tree/1"><code class="inline">tree/1</code></a>.</p>
  </section>
</section>
<section class="detail" id="var/1">

  <div class="detail-header">
    <a href="#var/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">var(Name)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/syntax_tools/src/merl.erl#L466" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> var(<a href="../../apps/erts/erlang.html#t:atom/0">atom</a>()) -> <a href="#t:tree/0">tree</a>().</pre>

      </div>

<p>Create a variable.</p>
  </section>
</section>

    </div>
  </section>

    <footer class="footer">
      <p>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.38.1) for the

          <a href="https://erlang.org" title="Erlang" target="_blank" translate="no">Erlang programming language</a>

      </p>
<p>Copyright Â© 1996-2025 <a href="https://www.ericsson.com">Ericsson AB</a></p>
    </footer>
  </div>
</main>
</div>
  <script defer src="https://cdn.jsdelivr.net/npm/mermaid@11.4.1/dist/mermaid.min.js"></script>
  <script>
  let initialized = false;

  window.addEventListener("exdoc:loaded", () => {
      if (!initialized) {
      mermaid.initialize({
          startOnLoad: false,
          theme: document.body.className.includes("dark") ? "dark" : "default"
      });
      initialized = true;
      }

      let id = 0;
      for (const codeEl of document.querySelectorAll("pre code.mermaid")) {
      const preEl = codeEl.parentElement;
      const graphDefinition = codeEl.textContent;
      const graphEl = document.createElement("div");
      const graphId = "mermaid-graph-" + id++;
      mermaid.render(graphId, graphDefinition).then(({svg, bindFunctions}) => {
          graphEl.innerHTML = svg;
          bindFunctions?.(graphEl);
          preEl.insertAdjacentElement("afterend", graphEl);
          preEl.remove();
      });
      }
  });
  </script>

  </body>
</html>
