<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.38.1">
    <meta name="project" content="syntax_tools v4.0">


<meta name="exdoc:full-text-search-url" content="/doc/search.html?v=28&q=">
<meta name="major-vsn" content="28">
<link rel="canonical" href="https://www.erlang.org/doc/apps/syntax_tools/erl_recomment.html" />
    <title>erl_recomment â€” syntax_tools v4.0</title>

    <link rel="stylesheet" href="dist/html-erlang-ZK43ZOAC.css" />

    <script defer src="dist/sidebar_items-80F5ECE3.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-DPJLHKSM.js"></script>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="../../index.html" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="syntax_tools" />
        </a>

      <div>
        <a href="../../index.html" class="sidebar-projectName" translate="no">
syntax_tools
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v4.0
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras=""></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-module" id="main" data-type="modules">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of syntax_tools</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search" tabindex="-1">
            <i class="ri-search-2-line ri-lg" aria-hidden="true"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>
      <span translate="no">erl_recomment</span> 
      <small class="app-vsn" translate="no">(syntax_tools v4.0)</small>

    </h1>

      <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/syntax_tools/src/erl_recomment.erl#L37" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

  </div>


    <section id="moduledoc">
<p>Inserting comments into abstract Erlang syntax trees</p><p>This module contains functions for inserting comments, described by position,
indentation and text, as attachments on an abstract syntax tree, at the correct
places.</p>
    </section>

</div>

  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Summary</span>
    </h1>
<div class="summary-types summary">
  <h2>
    <a href="#types">Types</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:syntaxTree/0" data-no-tooltip="" translate="no">syntaxTree()</a>

      </div>

        <div class="summary-synopsis"><p>An abstract syntax tree. See the <a><code class="inline">erl_syntax</code></a> module for details.</p></div>

    </div>

</div>
<div class="summary-functions summary">
  <h2>
    <a href="#functions">Functions</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#quick_recomment_forms/2" data-no-tooltip="" translate="no">quick_recomment_forms(Tree, Cs)</a>

      </div>

        <div class="summary-synopsis"><p>Like <a><code class="inline">recomment_forms/2</code></a>, but only inserts top-level comments.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#recomment_forms/2" data-no-tooltip="" translate="no">recomment_forms(Tree, Cs)</a>

      </div>

        <div class="summary-synopsis"><p>Attaches comments to the syntax tree/trees representing a program.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#recomment_tree/2" data-no-tooltip="" translate="no">recomment_tree(Tree, Cs)</a>

      </div>

        <div class="summary-synopsis"><p>Attaches comments to a syntax tree.</p></div>

    </div>

</div>

  </section>


  <section id="types" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#types">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Types</span>
    </h1>
    <div class="types-list">
<section class="detail" id="t:syntaxTree/0">

  <div class="detail-header">
    <a href="#t:syntaxTree/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">syntaxTree()</h1>

        <span class="note">(not exported)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/syntax_tools/src/erl_recomment.erl#L53" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> syntaxTree() :: <a href="erl_syntax.html#t:syntaxTree/0">erl_syntax:syntaxTree</a>().</pre>

      </div>

<p>An abstract syntax tree. See the <a href="erl_syntax.html"><code class="inline">erl_syntax</code></a> module for details.</p>
  </section>
</section>

    </div>
  </section>

  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Functions</span>
    </h1>
    <div class="functions-list">
<section class="detail" id="quick_recomment_forms/2">

  <div class="detail-header">
    <a href="#quick_recomment_forms/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">quick_recomment_forms(Tree, Cs)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/syntax_tools/src/erl_recomment.erl#L64" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> quick_recomment_forms(<a href="erl_syntax.html#t:forms/0">erl_syntax:forms</a>(), [<a href="erl_comment_scan.html#t:comment/0">erl_comment_scan:comment</a>()]) -> <a href="#t:syntaxTree/0">syntaxTree</a>().</pre>

      </div>

<p>Like <a href="#recomment_forms/2"><code class="inline">recomment_forms/2</code></a>, but only inserts top-level comments.</p><p>Comments within function definitions or declarations (&quot;forms&quot;) are
simply ignored.</p>
  </section>
</section>
<section class="detail" id="recomment_forms/2">

  <div class="detail-header">
    <a href="#recomment_forms/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">recomment_forms(Tree, Cs)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/syntax_tools/src/erl_recomment.erl#L111" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> recomment_forms(<a href="erl_syntax.html#t:forms/0">erl_syntax:forms</a>(), [<a href="erl_comment_scan.html#t:comment/0">erl_comment_scan:comment</a>()]) -> <a href="#t:syntaxTree/0">syntaxTree</a>().</pre>

      </div>

<p>Attaches comments to the syntax tree/trees representing a program.</p><p>The given <code class="inline">Forms</code> should be a single syntax tree of type <code class="inline">form_list</code>,
or a list of syntax trees representing &quot;program forms&quot;. The syntax
trees must contain valid position information (for details, see
<a href="#recomment_tree/2"><code class="inline">recomment_tree/2</code></a>). The result is a
corresponding syntax tree of type <code class="inline">form_list</code> in which all comments in
the list <code class="inline">Comments</code> have been attached at the proper places.</p><p>Assuming <code class="inline">Forms</code> represents a program (or any sequence of &quot;program forms&quot;), any
comments whose first lines are not directly associated with a specific program
form will become standalone comments inserted between the neighbouring program
forms. Furthermore, comments whose column position is less than or equal to one
will not be attached to a program form that begins at a conflicting line number
(this can happen with preprocessor-generated <code class="inline">line</code>-attributes).</p><p>If <code class="inline">Forms</code> is a syntax tree of some other type than <code class="inline">form_list</code>, the comments
will be inserted directly using <a href="#recomment_tree/2"><code class="inline">recomment_tree/2</code></a>, and
any comments left over from that process are added as postcomments on the
result.</p><p>Entries in <code class="inline">Comments</code> represent multi-line comments. For each entry, <code class="inline">Line</code> is
the line number and <code class="inline">Column</code> the left column of the comment (the column of the
first comment-introducing &quot;<code class="inline">%</code>&quot; character). <code class="inline">Indentation</code> is the number of
character positions between the last non-whitespace character before the comment
(or the left margin) and the left column of the comment. <code class="inline">Text</code> is a list of
strings representing the consecutive comment lines in top-down order, where each
string contains all characters following (but not including) the
comment-introducing &quot;<code class="inline">%</code>&quot; and up to (but not including) the terminating newline.
(see module <a href="erl_comment_scan.html"><code class="inline">erl_comment_scan</code></a>.)</p><p>Evaluation exits with reason <code class="inline">{bad_position, Pos}</code> if the associated position
information <code class="inline">Pos</code> of some subtree in the input does not have a recognizable
format, or with reason <code class="inline">{bad_tree, L, C}</code> if insertion of a comment at line <code class="inline">L</code>,
column <code class="inline">C</code>, fails because the tree structure is ill-formed.</p><p><em>See also: </em><a href="erl_comment_scan.html"><code class="inline">erl_comment_scan</code></a>, <a href="#quick_recomment_forms/2"><code class="inline">quick_recomment_forms/2</code></a>, <a href="#recomment_tree/2"><code class="inline">recomment_tree/2</code></a>.</p>
  </section>
</section>
<section class="detail" id="recomment_tree/2">

  <div class="detail-header">
    <a href="#recomment_tree/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">recomment_tree(Tree, Cs)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/syntax_tools/src/erl_recomment.erl#L322" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> recomment_tree(<a href="#t:syntaxTree/0">syntaxTree</a>(), [<a href="erl_comment_scan.html#t:comment/0">erl_comment_scan:comment</a>()]) ->
                        {<a href="#t:syntaxTree/0">syntaxTree</a>(), [<a href="erl_comment_scan.html#t:comment/0">erl_comment_scan:comment</a>()]}.</pre>

      </div>

<p>Attaches comments to a syntax tree.</p><p>The result is a pair <code class="inline">{NewTree, Remainder}</code> where <code class="inline">NewTree</code> is the
given <code class="inline">Tree</code> where comments from the list <code class="inline">Comments</code> have been
attached at the proper places. <code class="inline">Remainder</code> is the list of entries in
<code class="inline">Comments</code> which have not been inserted, because their line numbers
are greater than those of any node in the tree. The entries in
<code class="inline">Comments</code> are inserted in order; if two comments become attached to
the same node, they will appear in the same order in the program text.</p><p>The nodes of the syntax tree must contain valid position information. This can
be single integers, assumed to represent a line number, or 2- or 3-tuples where
the first or second element is an integer, in which case the leftmost integer
element is assumed to represent the line number. Line numbers less than one are
ignored (usually, the default line number for newly created nodes is zero).</p><p>For details on the <code class="inline">Line</code>, <code class="inline">Column</code> and <code class="inline">Indentation</code> fields, and the behaviour
in case of errors, see <a href="#recomment_forms/2"><code class="inline">recomment_forms/2</code></a>.</p><p><em>See also: </em><a href="#recomment_forms/2"><code class="inline">recomment_forms/2</code></a>.</p>
  </section>
</section>

    </div>
  </section>

    <footer class="footer">
      <p>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.38.1) for the

          <a href="https://erlang.org" title="Erlang" target="_blank" translate="no">Erlang programming language</a>

      </p>
<p>Copyright Â© 1996-2025 <a href="https://www.ericsson.com">Ericsson AB</a></p>
    </footer>
  </div>
</main>
</div>
  <script defer src="https://cdn.jsdelivr.net/npm/mermaid@11.4.1/dist/mermaid.min.js"></script>
  <script>
  let initialized = false;

  window.addEventListener("exdoc:loaded", () => {
      if (!initialized) {
      mermaid.initialize({
          startOnLoad: false,
          theme: document.body.className.includes("dark") ? "dark" : "default"
      });
      initialized = true;
      }

      let id = 0;
      for (const codeEl of document.querySelectorAll("pre code.mermaid")) {
      const preEl = codeEl.parentElement;
      const graphDefinition = codeEl.textContent;
      const graphEl = document.createElement("div");
      const graphId = "mermaid-graph-" + id++;
      mermaid.render(graphId, graphDefinition).then(({svg, bindFunctions}) => {
          graphEl.innerHTML = svg;
          bindFunctions?.(graphEl);
          preEl.insertAdjacentElement("afterend", graphEl);
          preEl.remove();
      });
      }
  });
  </script>

  </body>
</html>
