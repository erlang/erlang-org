<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.38.1">
    <meta name="project" content="kernel v10.3.1">


<meta name="exdoc:full-text-search-url" content="/doc/search.html?v=28&q=">
<meta name="major-vsn" content="28">
<link rel="canonical" href="https://www.erlang.org/doc/apps/kernel/notes.html" />
    <title>Kernel Release Notes — kernel v10.3.1</title>

    <link rel="stylesheet" href="dist/html-erlang-ZK43ZOAC.css" />

    <script defer src="dist/sidebar_items-A9B1EE9A.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-DPJLHKSM.js"></script>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="../../index.html" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="kernel" />
        </a>

      <div>
        <a href="../../index.html" class="sidebar-projectName" translate="no">
kernel
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v10.3.1
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras=""></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-extra" id="main" data-type="extras">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of kernel</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search" tabindex="-1">
            <i class="ri-search-2-line ri-lg" aria-hidden="true"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>Kernel Release Notes</h1>


      <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/kernel/doc/notes.md#L1" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

  </div>


<p>This document describes the changes made to the Kernel application.</p><h2 id="kernel-10-3-1" class="section-heading"><a href="#kernel-10-3-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 10.3.1</span></h2><h3 id="fixed-bugs-and-malfunctions" class="section-heading"><a href="#fixed-bugs-and-malfunctions" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix bug where calling <a href="../../apps/stdlib/io.html#setopts/1"><code class="inline">io:setopts/1</code></a> in a shell without the <code class="inline">line_history</code> option would always disable <code class="inline">line_history</code>. This bug was introduced in Erlang/OTP 28.0.</p><p>Own Id: OTP-19645 Aux Id: <a href="https://github.com/erlang/otp/issues/9863" title="">GH-9863</a>, <a href="https://github.com/erlang/otp/pull/9870" title="">PR-9870</a></p></li></ul><h2 id="kernel-10-3" class="section-heading"><a href="#kernel-10-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 10.3</span></h2><h3 id="fixed-bugs-and-malfunctions-1" class="section-heading"><a href="#fixed-bugs-and-malfunctions-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed an issue where output to the shell would not print the prompt on a new line.</p><p>Own Id: OTP-19228 Aux Id: <a href="https://github.com/erlang/otp/pull/8820" title="">PR-8820</a></p></li><li><p>When in <a href="../../apps/stdlib/shell.html"><code class="inline">shell</code></a> is in <code class="inline">-noshell</code> mode, and in <code class="inline">latin1</code> encoding mode, io requests in latin1 encoding will not be translated to unicode and back to latin1.</p><p>Own Id: OTP-19296 Aux Id: <a href="https://github.com/erlang/otp/pull/9013" title="">PR-9013</a></p></li><li><p>Fixed a bug where a composing unicode character would bind to a character not available to the user and deleting that character would cause a crash.</p><p>Own Id: OTP-19297 Aux Id: <a href="https://github.com/erlang/otp/pull/9005" title="">PR-9005</a></p></li><li><p>The <a href="../../apps/erts/erl_cmd.html#noshell"><code class="inline">-noshell</code></a> mode has been updated to read data lazily from standard input. Before this fix any data would be read greedily which meant that Erlang could consume data not meant for it. It also meant that in order for <a href="../../apps/stdlib/shell.html#start_interactive/0"><code class="inline">shell:start_interactive/0</code></a> to work on Windows an API that did not support reading of Unicode characters had to be used.</p><p>Own Id: OTP-19313 Aux Id: <a href="https://github.com/erlang/otp/pull/8962" title="">PR-8962</a>, <a href="https://github.com/erlang/otp/issues/8113" title="">GH-8113</a></p></li><li><p>The Erlang shell no longer crashes when a shell prompt ends with an escape sequence.</p><p>Own Id: OTP-19414 Aux Id: <a href="https://github.com/erlang/otp/pull/9272" title="">PR-9272</a></p></li><li><p><a href="code.html#get_doc/1"><code class="inline">code:get_doc/1</code></a> now works for cover-compiled modules.</p><p>Own Id: OTP-19513 Aux Id: <a href="https://github.com/erlang/otp/pull/9433" title="">PR-9433</a></p></li><li><p>An infinite loop in CNAME loop detection that can cause Out Of Memory has been fixed.  This affected CNAME lookup with the internal DNS resolver.</p><p>Own Id: OTP-19544 Aux Id: <a href="https://github.com/erlang/otp/pull/9587" title="">PR-9587</a>, OTP-19545</p></li><li><p>The internal resolver framework has been fixed to wait with the first resolver lookup until the ERL_INETRC environment variable has been applied.</p><p>Previously, on some platform(s) (Linux) a first lookup when figuring out the domain name was always placed on the <code class="inline">native</code> resolver even if ERL_INETRC was used to disable it.</p><p>Own Id: OTP-19555 Aux Id: <a href="https://github.com/erlang/otp/pull/9543" title="">PR-9543</a></p></li><li><p>Fix <a href="logger.html#add_handler/3"><code class="inline">logger:add_handler(default, ...)</code></a> to correctly replay events generated during startup when the default logger is set to <code class="inline">undefined</code> in <a href="logger_chapter.html#kernel-configuration-parameters">logger's configuration parameters</a>.</p><p>Own Id: OTP-19588 Aux Id: <a href="https://github.com/erlang/otp/pull/9595" title="">PR-9595</a>, <a href="https://github.com/erlang/otp/issues/9436" title="">GH-9436</a></p></li><li><p>Enhance specs of timeout for improving documentation and dialyzer analysis.</p><p>Own Id: OTP-19604 Aux Id: <a href="https://github.com/erlang/otp/pull/9574" title="">PR-9574</a></p></li><li><p>Removed the default values for SCTP send (sndbuf) and receive (recbuf) buffers.</p><p>Own Id: OTP-19627 Aux Id: OTP-19576, <a href="https://github.com/erlang/otp/issues/9722" title="">GH-9722</a></p></li></ul><h3 id="improvements-and-new-features" class="section-heading"><a href="#improvements-and-new-features" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p><a href="application.html#load/1"><code class="inline">application:load/1</code></a> slows down as the number of directories in the code path increases because the call to <a href="code.html#where_is_file/1"><code class="inline">code:where_is_file/1</code></a> for the '.app' file must scan each directory for the app. </p><p><code class="inline">code_server</code> maintains a cache of the contents of directories in the path. Re-using that cache when searching for '.app' files in <a href="application.html#load/1"><code class="inline">application:load/1</code></a> may improve its runtime, especially when loading multiple applications.</p><p>Own Id: OTP-19194 Aux Id: <a href="https://github.com/erlang/otp/pull/8078" title="">PR-8078</a></p></li><li><p>The <a href="../../apps/ssh/using_ssh.html#running-an-erlang-ssh-daemon"><code class="inline">Erlang SSH daemon</code></a> now uses the same backend to handle multiline functionality as the Erlang shell.</p><p>Own Id: OTP-19226 Aux Id: <a href="https://github.com/erlang/otp/pull/8805" title="">PR-8805</a></p></li><li><p>Added support for <code class="inline">SIGWINCH</code>, <code class="inline">SIGCONT</code>, and <code class="inline">SIGINFO</code> signals to <a href="os.html#set_signal/2"><code class="inline">os:set_signal/2</code></a> where available.</p><p>Own Id: OTP-19278 Aux Id: <a href="https://github.com/erlang/otp/pull/8887" title="">PR-8887</a>, <a href="https://github.com/erlang/otp/pull/8938" title="">PR-8938</a></p></li><li><p>Add <a href="net_kernel.html#allowed/0"><code class="inline">net_kernel:allowed/0</code></a>, it returns a list of nodes that are explicitly allowed to connect to the node by calling
<a href="net_kernel.html#allow/1"><code class="inline">net_kernel:allow/1</code></a></p><p>Own Id: OTP-19287 Aux Id: <a href="https://github.com/erlang/otp/pull/8207" title="">PR-8207</a></p></li><li><p>Documentation chunks (EEP-48) has been updated to include the following reserved metadata fields: <code class="inline">behaviours</code>, <code class="inline">group</code>, <code class="inline">source_path</code>, and <code class="inline">source_annos</code>. The compiler has also been updated to emit this metadata. See the <a href="eep48_chapter.html">EEP-48 documentation</a> for more details.</p><p>Own Id: OTP-19306 Aux Id: <a href="https://github.com/erlang/otp/pull/8945" title="">PR-8945</a>, <a href="https://github.com/erlang/otp/pull/8975" title="">PR-8975</a></p></li><li><p>The <a href="erpc.html#call/3"><code class="inline">erpc:call/3</code></a>, <a href="erpc.html#call/5"><code class="inline">erpc:call/5</code></a>, <a href="erpc.html#multicall/3"><code class="inline">erpc:multicall/3</code></a>, and <a href="erpc.html#multicall/5"><code class="inline">erpc:multicall/5</code></a> functions now also accept an option map as last argument containing the <code class="inline">timeout</code> and <code class="inline">always_spawn</code> options. The <code class="inline">always_spawn</code> option can be used in order to ensure that the call operation will use a newly spawned process when executing the remote call.</p><p>Own Id: OTP-19343 Aux Id: <a href="https://github.com/erlang/otp/pull/8642" title="">PR-8642</a></p></li><li><p><a href="https://www.erlang.org/eeps/eep-0069">EEP-69: Nominal Types</a> has been implemented. As a side effect, nominal types can encode opaque types. We changed all opaque-handling logic and improved opaque warnings in Dialyzer.</p><p>All existing Erlang type systems are structural: two types are seen as equivalent if their structures are the same. Type comparisons are based on the structures of the types, not on how the user explicitly defines them. For example, in the following example, <code class="inline">meter()</code> and <code class="inline">foot()</code> are equivalent. The two types can be used interchangeably. Neither of them differ from the basic type <code class="inline">integer()</code>.</p><pre><code class="makeup erlang" translate="no"><span class="p">-</span><span class="na">type</span><span class="w"> </span><span class="nf">meter</span><span class="p" data-group-id="6050217540-1">(</span><span class="p" data-group-id="6050217540-1">)</span><span class="w"> </span><span class="p">:</span><span class="p">:</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="6050217540-2">(</span><span class="p" data-group-id="6050217540-2">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">type</span><span class="w"> </span><span class="nf">foot</span><span class="p" data-group-id="6050217540-3">(</span><span class="p" data-group-id="6050217540-3">)</span><span class="w"> </span><span class="p">:</span><span class="p">:</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="6050217540-4">(</span><span class="p" data-group-id="6050217540-4">)</span><span class="p">.</span></code></pre><p>Nominal typing is an alternative type system, where two types are equivalent if and only if they are declared with the same type name. The EEP proposes one new syntax -nominal for declaring nominal types. Under nominal typing, <code class="inline">meter()</code> and <code class="inline">foot()</code> are no longer compatible. Whenever a function expects type <code class="inline">meter()</code>, passing in type <code class="inline">foot()</code> would result in a Dialyzer error.</p><pre><code class="makeup erlang" translate="no"><span class="p">-</span><span class="na">nominal</span><span class="w"> </span><span class="nf">meter</span><span class="p" data-group-id="9336018929-1">(</span><span class="p" data-group-id="9336018929-1">)</span><span class="w"> </span><span class="p">:</span><span class="p">:</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="9336018929-2">(</span><span class="p" data-group-id="9336018929-2">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">nominal</span><span class="w"> </span><span class="nf">foot</span><span class="p" data-group-id="9336018929-3">(</span><span class="p" data-group-id="9336018929-3">)</span><span class="w"> </span><span class="p">:</span><span class="p">:</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="9336018929-4">(</span><span class="p" data-group-id="9336018929-4">)</span><span class="p">.</span></code></pre><p>More nominal type-checking rules can be found in the EEP. It is worth noting that most work for adding nominal types and type-checking is in <code class="inline">erl_types.erl</code>. The rest are changes that removed the previous opaque type-checking, and added an improved version of it using nominal type-checking with reworked warnings.</p><p>Backwards compatibility for opaque type-checking is not preserved by this PR. Previous opaque warnings can appear with slightly different wordings. A new kind of opaque warning <code class="inline">opaque_union</code> is added, together with a Dialyzer option <code class="inline">no_opaque_union</code> to turn this kind of warnings off.</p><p>Own Id: OTP-19364 Aux Id: <a href="https://github.com/erlang/otp/pull/9079" title="">PR-9079</a></p></li><li><p>Improved open debug for gen_tcp_socket (connect and listen) and gen_udp_socket (open).</p><p>Own Id: OTP-19386</p></li><li><p><a href="../../apps/stdlib/io.html#t:standard_error/0"><code class="inline">io:standard_error/0</code></a> has been updated to write via a NIF API instead of a port. This allows it to access the dirty-scheduler pool and make sure that writes have been written to the OSs <code class="inline">stderr</code> when <a href="../../apps/stdlib/io.html#format/3"><code class="inline">io:format/3</code></a> and equivalent return.</p><p>Own Id: OTP-19401 Aux Id: <a href="https://github.com/erlang/otp/pull/9116" title="">PR-9116</a></p></li><li><p>Added the option <code class="inline">exception_on_failure</code> to <a href="os.html#cmd/2"><code class="inline">os:cmd/2</code></a> to make <a href="os.html#cmd/2"><code class="inline">os:cmd/2</code></a> raise an exception if the command fails to execute.</p><p>Own Id: OTP-19404 Aux Id: <a href="https://github.com/erlang/otp/pull/9082" title="">PR-9082</a></p></li><li><p>A <code class="inline">socket</code> option <code class="inline">{otp,select_read}</code> has been added that enables keeping a socket in the VM select/poll set between calls to recv functions.</p><p>This increases throughput by reducing the number of calls to said functions.</p><p>Own Id: OTP-19451 Aux Id: <a href="https://github.com/erlang/otp/pull/9344" title="">PR-9344</a></p></li><li><p>Add a configure chapter to the socket usage guide</p><p>Own Id: OTP-19522 Aux Id: <a href="https://github.com/erlang/otp/pull/9508" title="">PR-9508</a></p></li><li><p>The license and copyright header has changed format to include an <code class="inline">SPDX-License-Identifier</code>. At the same time, most files have been updated to follow a uniform standard for license headers.</p><p>Own Id: OTP-19575 Aux Id: <a href="https://github.com/erlang/otp/pull/9670" title="">PR-9670</a></p></li><li><p>Increase the default inet-driver buffer size(s). Also introduce kernel parameters for UDP and SCTP to change the sizes when creating (those) sockets.</p><p>Own Id: OTP-19576</p></li><li><p>An  <strong>experimental</strong> API for a native debugger has been added. The main components are the following:</p><ul><li><p>A new compiler option <code class="inline">beam_debug_info</code> for the Erlang compiler. When given, most optimizations are disabled and debug information suitable for the native debugger are added to generated BEAM files.</p></li><li><p>A new <code class="inline">+D</code> emulator flag. When given, the VM becomes &quot;debuggable&quot;, which means that when modules that been compiled with the <code class="inline">beam_debug_info</code> option are loaded, the code is instrumented so that one can enable and disable breakpoints on executable lines.</p></li><li><p>An experimental <code class="inline">erl_debugger</code> module with a new debugging API. Essentially, it allows a single, local, process to be registered as the &quot;debugger&quot; process for the node. This process is the one that will receive messages notifying that a process hit a breakpoint. This way, the front-end implementation of a debugger (such as <a href="https://github.com/WhatsApp/edb">edb from WhatApp</a>) can be decoupled from OTP.</p></li><li><p>The <code class="inline">erl_debugger</code> module also exposes new BIFs to inspect <code class="inline">X</code> and <code class="inline">Y</code> registers of a suspended process. Together with new code-information BIFs, this let's a debugger show the values of variables in scope for a suspended process.</p></li></ul><p>Own Id: OTP-19609 Aux Id: <a href="https://github.com/erlang/otp/pull/8670" title="">PR-8670</a>, <a href="https://github.com/erlang/otp/pull/9334" title="">PR-9334</a>, <a href="https://github.com/erlang/otp/pull/9604" title="">PR-9604</a></p></li></ul><h2 id="kernel-10-2-7" class="section-heading"><a href="#kernel-10-2-7" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 10.2.7</span></h2><h3 id="fixed-bugs-and-malfunctions-2" class="section-heading"><a href="#fixed-bugs-and-malfunctions-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>With this change, disk_log will not crash when using chunk_step/3 after log size was decreased.</p><p>Own Id: OTP-19605 Aux Id: <a href="https://github.com/erlang/otp/issues/9720" title="">GH-9720</a>, <a href="https://github.com/erlang/otp/pull/9765" title="">PR-9765</a></p></li><li><p>With this change, disk_log will not run into infinite loop when using chunk/2,3 after log size was decreased.</p><p>Own Id: OTP-19608 Aux Id: <a href="https://github.com/erlang/otp/issues/9707" title="">GH-9707</a>, <a href="https://github.com/erlang/otp/pull/9767" title="">PR-9767</a></p></li></ul><h2 id="kernel-10-2-6" class="section-heading"><a href="#kernel-10-2-6" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 10.2.6</span></h2><h3 id="fixed-bugs-and-malfunctions-3" class="section-heading"><a href="#fixed-bugs-and-malfunctions-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed bug in <code class="inline">call_memory</code> tracing that could cause wildly incorrect reported memory values. Bug exists since OTP 27.1.</p><p>Also fixed return type spec of <a href="trace.html#info/3"><code class="inline">trace:info/3</code></a>.</p><p>Own Id: OTP-19581 Aux Id: ERIERL-1219, <a href="https://github.com/erlang/otp/pull/9706" title="">PR-9706</a></p></li></ul><h2 id="kernel-10-2-5" class="section-heading"><a href="#kernel-10-2-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 10.2.5</span></h2><h3 id="fixed-bugs-and-malfunctions-4" class="section-heading"><a href="#fixed-bugs-and-malfunctions-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>On Windows, using socket:sendv, a large IOV (size &gt; MAX), the tail was not sent.</p><p>Own Id: OTP-19482</p></li><li><p>gen_tcp connect with a sockaddr with loopback address failed.</p><p>Own Id: OTP-19560 Aux Id: <a href="https://github.com/erlang/otp/issues/9541" title="">GH-9541</a></p></li><li><p>Remove debug printouts from gen_tcp_socket</p><p>Own Id: OTP-19564</p></li></ul><h2 id="kernel-10-2-4" class="section-heading"><a href="#kernel-10-2-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 10.2.4</span></h2><h3 id="fixed-bugs-and-malfunctions-5" class="section-heading"><a href="#fixed-bugs-and-malfunctions-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Behavior for socket:recv/3 has been improved. The behavior has also been clarified in the documentation.</p><p>Own Id: OTP-19469 Aux Id: <a href="https://github.com/erlang/otp/issues/9172" title="">#9172</a></p></li><li><p>An infinite loop in CNAME loop detection that can cause Out Of Memory has been fixed. This affected CNAME lookup with the internal DNS resolver.</p><p>Own Id: OTP-19545 Aux Id: <a href="https://github.com/erlang/otp/pull/9587" title="">PR-9587</a>, OTP-19544</p></li></ul><h2 id="kernel-10-2-3" class="section-heading"><a href="#kernel-10-2-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 10.2.3</span></h2><h3 id="fixed-bugs-and-malfunctions-6" class="section-heading"><a href="#fixed-bugs-and-malfunctions-6" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Clarify inet:setopts documentation</p><p>Own Id: OTP-19416 Aux Id: <a href="https://github.com/erlang/otp/pull/9248" title="">PR-9248</a></p></li><li><p>Fix bug where log printouts would go missing when <code class="inline">application_controller</code> is stopping while log messages are being sent.</p><p>This bug was introduced by OTP-19078 in Erlang/OTP 26.2.5.</p><p>Own Id: OTP-19418 Aux Id: <a href="https://github.com/erlang/otp/issues/9163" title="">GH-9163</a>, <a href="https://github.com/erlang/otp/pull/9274" title="">PR-9274</a></p></li><li><p>Fixes a bug in the socket type spec, which caused Dialyzer to reject some valid programs.</p><p>Own Id: OTP-19429 Aux Id: <a href="https://github.com/erlang/otp/pull/9295" title="">PR-9295</a>, <a href="https://github.com/erlang/otp/pull/9379" title="">PR-9379</a></p></li></ul><h2 id="kernel-10-2-2" class="section-heading"><a href="#kernel-10-2-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 10.2.2</span></h2><h3 id="fixed-bugs-and-malfunctions-7" class="section-heading"><a href="#fixed-bugs-and-malfunctions-7" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed a couple of bugs that could make <code class="inline">global</code>'s internal state inconsistent when a connection was reconnected.</p><p>Own Id: OTP-19381 Aux Id: <a href="https://github.com/erlang/otp/pull/9377" title="">PR-9377</a>, <a href="https://github.com/erlang/otp/issues/9112" title="">GH-9112</a>, <a href="https://github.com/erlang/otp/issues/9117" title="">GH-9117</a></p></li></ul><h2 id="kernel-10-2-1" class="section-heading"><a href="#kernel-10-2-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 10.2.1</span></h2><h3 id="fixed-bugs-and-malfunctions-8" class="section-heading"><a href="#fixed-bugs-and-malfunctions-8" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix the default group_leader to reply <code class="inline">{error,request}</code> on invalid I/O requests instead of crashing.</p><p>This bug was introduced in Erlang/OTP 27.2.</p><p>Own Id: OTP-19444 Aux Id: <a href="https://github.com/erlang/otp/issues/9237" title="">GH-9237</a>, <a href="https://github.com/erlang/otp/pull/9318" title="">PR-9318</a></p></li></ul><h2 id="kernel-10-2" class="section-heading"><a href="#kernel-10-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 10.2</span></h2><h3 id="fixed-bugs-and-malfunctions-9" class="section-heading"><a href="#fixed-bugs-and-malfunctions-9" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p><a href="gen_sctp.html#peeloff/2"><code class="inline">gen_sctp:peeloff/2</code></a> has been fixed to inherit socket options to the peeled off socket more like <a href="gen_tcp.html#accept/1"><code class="inline">gen_tcp:accept/1</code></a>, for example the options <code class="inline">tos</code> or <code class="inline">tclass</code>.</p><p>When setting SCTP options that are unsupported on the platform, some should be silently ignored, but a bug caused the option parsing to derail so the options after could bail out and cause an error instead.  This has been fixed.</p><p>Own Id: OTP-19225 Aux Id: <a href="https://github.com/erlang/otp/pull/8789" title="">PR-8789</a></p></li><li><p>Made it possible to expand help text displayed by pressing ^[h by pressing ^[h again.</p><p>Own Id: OTP-19260 Aux Id: <a href="https://github.com/erlang/otp/pull/8884" title="">PR-8884</a></p></li><li><p><a href="inet.html#getifaddrs/1"><code class="inline">inet:getifaddrs/0,1</code></a> is improved when using
inet_backend = socket.</p><p>Own Id: OTP-19264</p></li><li><p>Fixed <a href="logger.html#t:report/0"><code class="inline">logger:report/0</code></a> to mandate at least one element in the report. This fixes an issue with overlapping <code class="inline">spec</code> domains in all <a href="logger.html"><code class="inline">logger</code></a> functions that use <a href="logger.html#t:report/0"><code class="inline">logger:report/0</code></a>.</p><p>Own Id: OTP-19302 Aux Id: <a href="https://github.com/erlang/otp/pull/8959" title="">PR-8959</a></p></li><li><p>Fixed deadlock on <code class="inline">code_server</code>. Multiple calls loading the same module with an <code class="inline">on_load</code> function loading call would create a deadlock.</p><p>Own Id: OTP-19305 Aux Id: <a href="https://github.com/erlang/otp/pull/8744" title="">PR-8744</a>, <a href="https://github.com/erlang/otp/issues/7466" title="">GH-7466</a>, <a href="https://github.com/erlang/otp/issues/8510" title="">GH-8510</a></p></li></ul><h3 id="improvements-and-new-features-1" class="section-heading"><a href="#improvements-and-new-features-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>The Kernel application now recognizes the <code class="inline">epmd_module</code> and <code class="inline">erl_epmd_listen_port</code> parameters, similar to <code class="inline">-kernel:connect_all</code>.</p><p>Own Id: OTP-19253 Aux Id: <a href="https://github.com/erlang/otp/pull/8671" title="">PR-8671</a></p></li><li><p>The <code class="inline">inetrc</code> kernel argument will now tolerate atoms again to improve compatibility with old configurations that relied on atoms working by accident.</p><p>The expected type always was, and still remains, a string.</p><p>Own Id: OTP-19280 Aux Id: <a href="https://github.com/erlang/otp/issues/8899" title="">GH-8899</a>, <a href="https://github.com/erlang/otp/pull/8902" title="">PR-8902</a></p></li><li><p>The <a href="file.html#t:io_device/0"><code class="inline">file:io_device/0</code></a> type has been updated to clearly show the difference between a <code class="inline">raw</code> and <code class="inline">cooked</code> IoDevice.</p><p>Own Id: OTP-19301 Aux Id: <a href="https://github.com/erlang/otp/pull/8956" title="">PR-8956</a></p></li><li><p>Erlang/OTP type specifications has been updated to eliminate overlapping domains.</p><p>Own Id: OTP-19310 Aux Id: <a href="https://github.com/erlang/otp/issues/8810" title="">GH-8810</a>, <a href="https://github.com/erlang/otp/issues/8821" title="">GH-8821</a>, <a href="https://github.com/erlang/otp/pull/8986" title="">PR-8986</a></p></li><li><p>Added the kernel parameter <a href="kernel_app.html#os_cmd_shell"><code class="inline">os_cmd_shell</code></a> that controls which shell should be used by <a href="os.html#cmd/1"><code class="inline">os:cmd/1</code></a>.</p><p>Own Id: OTP-19342 Aux Id: <a href="https://github.com/erlang/otp/pull/8972" title="">PR-8972</a></p></li><li><p>Added logging support to <a href="../../apps/stdlib/io.html#t:user/0"><code class="inline">io:user/0</code></a>, <a href="../../apps/stdlib/io.html#t:standard_io/0"><code class="inline">io:standard_io/0</code></a> and <a href="../../apps/stdlib/io.html#t:standard_error/0"><code class="inline">io:standard_error/0</code></a>. See <a href="../../apps/stdlib/io.html#setopts/2"><code class="inline">io:setopts/2</code></a> for more details.</p><p>Own Id: OTP-19372 Aux Id: <a href="https://github.com/erlang/otp/pull/8947" title="">PR-8947</a></p></li></ul><h2 id="kernel-10-1-2" class="section-heading"><a href="#kernel-10-1-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 10.1.2</span></h2><h3 id="fixed-bugs-and-malfunctions-10" class="section-heading"><a href="#fixed-bugs-and-malfunctions-10" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>On windows the socket:recv could return with success ({ok, Data}) even though not all data had been read.</p><p>Own Id: OTP-19328</p></li><li><p>gen_udp:send on domain local can leak inet_reply messages.</p><p>Own Id: OTP-19332 Aux Id: <a href="https://github.com/erlang/otp/issues/8989" title="">#8989</a></p></li><li><p>Failure to create an UDP IPv6 socket when inet_backend = socket with certain IPv6 socket options.</p><p>Own Id: OTP-19357</p></li><li><p>net:getifaddrs does not properly report the running flag on windows.</p><p>Own Id: OTP-19366 Aux Id: OTP-19061, ERIERL-1134</p></li></ul><h2 id="kernel-10-1-1" class="section-heading"><a href="#kernel-10-1-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 10.1.1</span></h2><h3 id="fixed-bugs-and-malfunctions-11" class="section-heading"><a href="#fixed-bugs-and-malfunctions-11" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>A bug has been fixed where receiving an SCTP message with <code class="inline">gen_sctp</code> could waste the first fragments of a message and only deliver the last fragment.</p><p>This happened with low probability when the OS signaled that the socket was ready for reading in combination with an internal time-out retry.</p><p>A bug has been fixed with a lingering time-out from after an SCTP connect that could stop the flow of incoming messages on an active <code class="inline">gen_tcp</code> socket.</p><p>Own Id: OTP-19235 Aux Id: ERIERL-1133, <a href="https://github.com/erlang/otp/pull/8837" title="">PR-8837</a></p></li><li><p>An boolean option <code class="inline">non_block_send</code> for SCTP, has ben added to be able to achieve the old behaviour to avoid blocking send operations by passing the OS network stack error message (<code class="inline">{error,eagain}</code> through.</p><p>Own Id: OTP-19258 Aux Id: OTP-19061, ERIERL-1134</p></li></ul><h2 id="kernel-10-1" class="section-heading"><a href="#kernel-10-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 10.1</span></h2><h3 id="fixed-bugs-and-malfunctions-12" class="section-heading"><a href="#fixed-bugs-and-malfunctions-12" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>A faulty assertion was corrected in the <code class="inline">prim_tty</code> module. This assertion could trigger when invalid UTF-8 was read from stdin just as the mode was changed from unicode to latin1.</p><p>Own Id: OTP-19097 Aux Id: <a href="https://github.com/erlang/otp/pull/8503" title="">PR-8503</a></p></li><li><p>Opening a <code class="inline">disk_log</code> file and combining <code class="inline">head_func</code> with <code class="inline">rotate</code> options did not work.</p><p>Own Id: OTP-19104 Aux Id: ERIERL-870</p></li><li><p>Fixed an error info printout for <a href="../../apps/erts/erlang.html#is_process_alive/1"><code class="inline">erlang:is_process_alive/1</code></a> on non-local pids.</p><p>Own Id: OTP-19134 Aux Id: <a href="https://github.com/erlang/otp/pull/8560" title="">PR-8560</a></p></li><li><p>A race in the kTLS flavour of SSL distribution has been fixed so that <code class="inline">inet_drv.c</code> doesn't read ahead too much data, which could cause the kTLS encryption to be activated too late when some encrypted data had already been read into the <code class="inline">inet_drv.c</code> buffer as unencrypted.</p><p>Own Id: OTP-19175 Aux Id: <a href="https://github.com/erlang/otp/issues/8561" title="">GH-8561</a>, <a href="https://github.com/erlang/otp/pull/8690" title="">PR-8690</a></p></li><li><p>Fixed a deadlock when an application crashes during startup and log messages were sent to standard out. Logger would fail to print the messages to standard out and instead print them to standard error.</p><p>Own Id: OTP-19205</p></li><li><p>The <code class="inline">-proto_dist</code> init parameter will no longer be ignored when specified multiple times. It will now log a warning and use the first specified value.</p><p>Own Id: OTP-19208 Aux Id: <a href="https://github.com/erlang/otp/pull/8672" title="">PR-8672</a></p></li><li><p>Corrected socket:ioctl for genaddr (SIOCGENADDR).</p><p>Own Id: OTP-19216</p></li></ul><h3 id="improvements-and-new-features-2" class="section-heading"><a href="#improvements-and-new-features-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Added functions <code class="inline">getservbyname</code> and <code class="inline">getservbyport</code> to the <code class="inline">net</code> module.</p><p>Own Id: OTP-19101 Aux Id: OTP-18835</p></li><li><p>Introduced enet | esock variants of <a href="inet.html"><code class="inline">inet</code></a> functions, either when called with sockets,
with explicit inet_backend config or with the e inet_backend kernel config option.</p><p>Own Id: OTP-19132 Aux Id: OTP-19101</p></li><li><p>The function <a href="socket.html#i/0"><code class="inline">socket:i/0</code></a> now uses the <a href="net.html"><code class="inline">net</code></a> module (instead of the <a href="inet.html"><code class="inline">inet</code></a> module) for service translation.</p><p>Own Id: OTP-19138 Aux Id: OTP-19101</p></li><li><p>A boolean option <code class="inline">read_ahead</code> has been implemented for <code class="inline">gen_tcp</code>, default <code class="inline">true</code>, to facilitate not reading past (caching data) the end of a packet.  In particular, for kTLS, caching data could read in data that was supposed to be decrypted by the platform's network stack, before crypto parameters could be activated.</p><p>Own Id: OTP-19199 Aux Id: OTP-19175, <a href="https://github.com/erlang/otp/issues/8561" title="">GH-8561</a>, <a href="https://github.com/erlang/otp/issues/8690" title="">GH-8690</a>, <a href="https://github.com/erlang/otp/issues/8785" title="">GH-8785</a></p></li></ul><h2 id="kernel-10-0-1" class="section-heading"><a href="#kernel-10-0-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 10.0.1</span></h2><h3 id="improvements-and-new-features-3" class="section-heading"><a href="#improvements-and-new-features-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Polish the <a href="logger.html"><code class="inline">logger</code></a> documentation.</p><p>Own Id: OTP-19118 Aux Id: <a href="https://github.com/erlang/otp/pull/8534" title="">PR-8534</a></p></li></ul><h2 id="kernel-10-0" class="section-heading"><a href="#kernel-10-0" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 10.0</span></h2><h3 id="fixed-bugs-and-malfunctions-13" class="section-heading"><a href="#fixed-bugs-and-malfunctions-13" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed a crash when calling <a href="file.html#delete/2"><code class="inline">file:delete/2</code></a> with an empty option list.</p><p>Own Id: OTP-18590 Aux Id: <a href="https://github.com/erlang/otp/pull/7220" title="">PR-7220</a></p></li><li><p>New functions have been added to the undocumented module <code class="inline">m:inet_dns</code> that take a flag to specify if encode/decode is for mDNS.  This affects how CLASS values in the private range, with the top bit set, are handled.</p><p>Own Id: OTP-18878 Aux Id: <a href="https://github.com/erlang/otp/issues/7718" title="">GH-7718</a>, OTP-17734</p></li><li><p>The error information for <a href="../../apps/erts/erlang.html#phash/2"><code class="inline">erlang:phash/2</code></a> has been corrected.</p><p>Own Id: OTP-18904 Aux Id: <a href="https://github.com/erlang/otp/pull/7960" title="">PR-7960</a></p></li><li><p><code class="inline">get_until</code> requests using the I/O protocol now correctly return a binary or list when <code class="inline">eof</code> is the last item returned by the callback.</p><p>Own Id: OTP-18930 Aux Id: <a href="https://github.com/erlang/otp/pull/7993" title="">PR-7993</a>, <a href="https://github.com/erlang/otp/issues/4992" title="">GH-4992</a></p></li><li><p>Calling <a href="logger.html#add_handlers/1"><code class="inline">logger:add_handlers/1</code></a> with config option now works.</p><p>Own Id: OTP-18954 Aux Id: <a href="https://github.com/erlang/otp/issues/8061" title="">GH-8061</a>, <a href="https://github.com/erlang/otp/pull/8076" title="">PR-8076</a></p></li><li><p>The <a href="code.html#del_path/1"><code class="inline">code:del_path/1</code></a> function now also works on paths added through <code class="inline">-pa</code>, <code class="inline">-pz</code> , <code class="inline">-path</code> and the boot script.</p><p>Own Id: OTP-18959 Aux Id: <a href="https://github.com/erlang/otp/issues/6692" title="">GH-6692</a>, <a href="https://github.com/erlang/otp/pull/7697" title="">PR-7697</a></p></li><li><p>A  call to <code class="inline">socket:[recv|recvfrom|recvmsg]/*</code> with Timeout = 0 on Windows could cause a (case clause) crash if data is immediately available.</p><p>Own Id: OTP-19063 Aux Id: OTP-18835</p></li><li><p>Improve heuristic for when a characters is wide in the shell for systems with old libc versions.</p><p>Own Id: OTP-19087 Aux Id: <a href="https://github.com/erlang/otp/pull/8382" title="">PR-8382</a></p></li><li><p>Fix reading a line when reading from <a href="../../apps/stdlib/io.html#t:user/0"><code class="inline">io:user/0</code></a> to not consider <code class="inline">\r</code> without <code class="inline">\n</code> to be a new line when <code class="inline">erl</code> is started with <code class="inline">-noshell</code>.</p><p>Own Id: OTP-19088 Aux Id: <a href="https://github.com/erlang/otp/pull/8396" title="">PR-8396</a>, <a href="https://github.com/erlang/otp/issues/8360" title="">GH-8360</a></p></li></ul><h3 id="improvements-and-new-features-4" class="section-heading"><a href="#improvements-and-new-features-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Added <a href="file.html#read_file/2"><code class="inline">file:read_file/2</code></a> with a <code class="inline">raw</code> option for reading files without going through the file server.</p><p>Own Id: OTP-18589 Aux Id: <a href="https://github.com/erlang/otp/pull/7220" title="">PR-7220</a></p></li><li><p>The undocumented Erlang DNS resolver library (<code class="inline">inet_dns</code> and <code class="inline">inet_res</code>) has been augmented to handle IXFR, NOTIFY, UPDATE and TSIG records.  With this some bug fixes and code cleanup has been done, and the resolver used in the test suite has been changed to Knot DNS.  See the source code. </p><p>Kudos to Alexander Clouter that did almost all the work!</p><p>Own Id: OTP-18713 Aux Id: <a href="https://github.com/erlang/otp/pull/6985" title="">PR-6985</a>, <a href="https://github.com/erlang/otp/issues/6985" title="">GH-6985</a></p></li><li><p>The <code class="inline">ebin</code> directories for escripts are now cached.</p><p>Own Id: OTP-18778 Aux Id: <a href="https://github.com/erlang/otp/pull/7556" title="">PR-7556</a></p></li><li><p><code class="inline">-callback</code> attributes haven been added to <a href="application.html"><code class="inline">application</code></a>, <a href="logger_handler.html"><code class="inline">logger_handler</code></a>, and <a href="logger_formatter.html"><code class="inline">logger_formatter</code></a>.</p><p>Own Id: OTP-18795 Aux Id: <a href="https://github.com/erlang/otp/pull/7703" title="">PR-7703</a></p></li><li><p>Progress reports from before logger is started are now logged when log level is set to debug.</p><p>Own Id: OTP-18807 Aux Id: <a href="https://github.com/erlang/otp/pull/7732" title="">PR-7732</a> ERIERL-985</p></li><li><p>The <code class="inline">code:where_is_file/2</code> and
<a href="code.html#which/1"><code class="inline">code:which/1</code></a> functions now check for existence of the file directly instead of listing the content of each directory in the code path.</p><p>Own Id: OTP-18816 Aux Id: <a href="https://github.com/erlang/otp/pull/7711" title="">PR-7711</a></p></li><li><p>Type specs has been added to the <a href="logger.html"><code class="inline">logger:Level/1,2,3</code></a> functions.</p><p>Own Id: OTP-18820 Aux Id: <a href="https://github.com/erlang/otp/pull/7779" title="">PR-7779</a></p></li><li><p>For <code class="inline">inet_backend = socket</code>, setting the <code class="inline">active</code> socket option alone, to <code class="inline">once</code>, <code class="inline">true</code> or <code class="inline">N</code> has been optimized, as well as the corresponding data delivery.</p><p>Own Id: OTP-18835</p></li><li><p>New functions <code class="inline">socket:sendv/*</code> for sending I/O vectors have been added.</p><p>Own Id: OTP-18845</p></li><li><p>The shell now pages long output from the documentation help command (<code class="inline">h(Module)</code>), auto completions and the search command.</p><p>Own Id: OTP-18846 Aux Id: <a href="https://github.com/erlang/otp/pull/7845" title="">PR-7845</a></p></li><li><p>Native coverage support has been implemented in the JIT. It will  automatically be used by the <a href="../../apps/tools/cover.html"><code class="inline">cover</code></a> tool to reduce the execution overhead when running cover-compiled code.</p><p>There are also new APIs to support native coverage without using the <code class="inline">cover</code> tool.</p><p>To instrument code for native coverage it must be compiled with the <a href="../../apps/compiler/compile.html#line_coverage"><code class="inline">line_coverage</code></a> option.</p><p>To enable native coverage in the runtime system, start it like so:</p><pre><code class="text">$ erl +JPcover true</code></pre><p>There are also the following new functions for supporting native coverage:</p><ul><li><a href="code.html#coverage_support/0"><code class="inline">code:coverage_support/0</code></a></li><li><a href="code.html#get_coverage/2"><code class="inline">code:get_coverage/2</code></a></li><li><a href="code.html#reset_coverage/1"><code class="inline">code:reset_coverage/1</code></a></li><li><a href="code.html#get_coverage_mode/0"><code class="inline">code:get_coverage_mode/0</code></a></li><li><a href="code.html#get_coverage_mode/1"><code class="inline">code:get_coverage_mode/1</code></a></li><li><a href="code.html#set_coverage_mode/1"><code class="inline">code:set_coverage_mode/1</code></a></li></ul><p>Own Id: OTP-18856 Aux Id: <a href="https://github.com/erlang/otp/pull/7856" title="">PR-7856</a></p></li><li><p>Optimized code loading by moving certain operations from the code server to the caller.</p><p>Own Id: OTP-18941 Aux Id: <a href="https://github.com/erlang/otp/pull/7981" title="">PR-7981</a></p></li><li><p>The documentation has been migrated to use Markdown and ExDoc.</p><p>Own Id: OTP-18955 Aux Id: <a href="https://github.com/erlang/otp/pull/8026" title="">PR-8026</a></p></li><li><p>Application startup has been optimized by removing an intermediary process.</p><p>Own Id: OTP-18963 Aux Id: <a href="https://github.com/erlang/otp/pull/8042" title="">PR-8042</a></p></li><li><p>The existing experimental support for archive files will be changed in a future release. The support for having an archive in an escript will remain, but the support for using archives in a release will either become more limited or completely removed.</p><p>As of Erlang/OTP 27, the function <a href="code.html#lib_dir/2"><code class="inline">code:lib_dir/2</code></a>, the <code class="inline">-code_path_choice</code> flag, and using <a href="../../apps/erts/erl_prim_loader.html"><code class="inline">erl_prim_loader</code></a> for reading members of an archive are deprecated.</p><p>To remain compatible with future version of Erlang/OTP <code class="inline">escript</code> scripts that need to retrieve data files from its archive should use <a href="../../apps/stdlib/escript.html#extract/2"><code class="inline">escript:extract/2</code></a> instead of <code class="inline">erl_prim_loader</code> and <a href="code.html#lib_dir/2"><code class="inline">code:lib_dir/2</code></a>.</p><p><strong><em> POTENTIAL INCOMPATIBILITY </em></strong></p><p>Own Id: OTP-18966 Aux Id: <a href="https://github.com/erlang/otp/pull/8091" title="">PR-8091</a></p></li><li><p>The undocumented and deprecated <code class="inline">file:pid2name</code> function has been removed.</p><p>Own Id: OTP-18967 Aux Id: <a href="https://github.com/erlang/otp/pull/8092" title="">PR-8092</a></p></li><li><p>There is a new module <a href="trace.html"><code class="inline">trace</code></a> in Kernel providing the same trace functionality as <a href="../../apps/erts/erlang.html#trace/3"><code class="inline">erlang:trace/3</code></a> and <a href="../../apps/erts/erlang.html#trace_pattern/3"><code class="inline">erlang:trace_pattern/3</code></a>, but with the addition of <strong>dynamic isolated trace sessions</strong>.</p><p>Own Id: OTP-18980</p></li><li><p>Error logging has been improved when the <a href="../../apps/stdlib/io.html#t:standard_io/0"><code class="inline">io:standard_io/0</code></a> reader and/or writer terminates with an error.</p><p>Own Id: OTP-18989 Aux Id: <a href="https://github.com/erlang/otp/pull/8103" title="">PR-8103</a></p></li><li><p><code class="inline">inet_backend = socket</code> has been optimized and reworked to be more compatible with the original <code class="inline">inet_backend = inet</code>.</p><p>Own Id: OTP-19004 Aux Id: OTP-18835</p></li><li><p>Add an simple example (echo server) )to the socket users guide.</p><p>Own Id: OTP-19042</p></li><li><p><code class="inline">inet:i/0,1,2</code> has been improved to allow port numbers to be shown explicitly.</p><p>Own Id: OTP-19053 Aux Id: <a href="https://github.com/erlang/otp/issues/6724" title="">#6724</a></p></li><li><p>The <code class="inline">socket</code> documentation has been reworked, and due to
that a few details were fixed:</p><ul><li><a href="socket.html#is_supported/1"><code class="inline">socket:is_supported/1</code></a> now returns <code class="inline">true</code> for example for <code class="inline">protocols</code>
that is a &quot;category&quot;, not an item.</li><li><a href="socket.html#cancel_monitor/1"><code class="inline">socket:cancel_monitor/1</code></a> no longer badargs for a monitor that was set by
another process, instead it returns <code class="inline">false</code> as for other unknown
<code class="inline">reference()</code>s.</li></ul><p>Own Id: OTP-19054</p></li><li><p>Add <code class="inline">stdin</code>, <code class="inline">stdout</code> and <code class="inline">stderr</code> keys to <a href="../../apps/stdlib/io.html#getopts/1"><code class="inline">io:getopts/1</code></a> on <a href="../../apps/stdlib/io.html#t:standard_io/0"><code class="inline">io:standard_io/0</code></a> to indicate if the respective I/O device is backed by a terminal.</p><p>Own Id: OTP-19089 Aux Id: <a href="https://github.com/erlang/otp/pull/8396" title="">PR-8396</a></p></li></ul><h2 id="kernel-9-2-4-8" class="section-heading"><a href="#kernel-9-2-4-8" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 9.2.4.8</span></h2><h3 id="fixed-bugs-and-malfunctions-14" class="section-heading"><a href="#fixed-bugs-and-malfunctions-14" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>With this change, disk_log will not crash when using chunk_step/3 after log size was decreased.</p><p>Own Id: OTP-19605 Aux Id: GH-9720, PR-9765</p></li><li><p>With this change, disk_log will not run into infinite loop when using chunk/2,3 after log size was decreased.</p><p>Own Id: OTP-19608 Aux Id: GH-9707, PR-9767</p></li></ul><h2 id="kernel-9-2-4-7" class="section-heading"><a href="#kernel-9-2-4-7" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 9.2.4.7</span></h2><h3 id="fixed-bugs-and-malfunctions-15" class="section-heading"><a href="#fixed-bugs-and-malfunctions-15" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Behavior for socket:recv/3 has been improved. The behavior has also been clarified in the documentation.</p><p>Own Id: OTP-19469 Aux Id: #9172</p></li><li><p>An infinite loop in CNAME loop detection that can cause Out Of Memory has been fixed. This affected CNAME lookup with the internal DNS resolver.</p><p>Own Id: OTP-19545 Aux Id: PR-9587, OTP-19544</p></li></ul><h2 id="kernel-9-2-4-6" class="section-heading"><a href="#kernel-9-2-4-6" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 9.2.4.6</span></h2><h3 id="fixed-bugs-and-malfunctions-16" class="section-heading"><a href="#fixed-bugs-and-malfunctions-16" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed a couple of bugs that could make <code class="inline">global</code>'s internal state inconsistent when a connection was reconnected.</p><p>Own Id: OTP-19381 Aux Id: PR-9377, GH-9112, GH-9117</p></li></ul><h2 id="kernel-9-2-4-5" class="section-heading"><a href="#kernel-9-2-4-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 9.2.4.5</span></h2><h3 id="fixed-bugs-and-malfunctions-17" class="section-heading"><a href="#fixed-bugs-and-malfunctions-17" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix bug where log printouts would go missing when <code class="inline">application_controller</code> is stopping while log messages are being sent.</p><p>This bug was introduced by OTP-19078 in Erlang/OTP 26.2.5.</p><p>Own Id: OTP-19418 Aux Id: GH-9163 PR-9274</p></li></ul><h2 id="kernel-9-2-4-4" class="section-heading"><a href="#kernel-9-2-4-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 9.2.4.4</span></h2><h3 id="fixed-bugs-and-malfunctions-18" class="section-heading"><a href="#fixed-bugs-and-malfunctions-18" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>gen_udp:send on domain local can leak inet_reply messages.</p><p>Own Id: OTP-19332 Aux Id: #8989</p></li><li><p>Failure to create an UDP IPv6 socket when inet_backend = socket with certain IPv6 socket options.</p><p>Own Id: OTP-19357</p></li><li><p>net:getifaddrs does not properly report the running flag on windows.</p><p>Own Id: OTP-19366 Aux Id: OTP-19061, ERIERL-1134</p></li></ul><h2 id="kernel-9-2-4-3" class="section-heading"><a href="#kernel-9-2-4-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 9.2.4.3</span></h2><h3 id="fixed-bugs-and-malfunctions-19" class="section-heading"><a href="#fixed-bugs-and-malfunctions-19" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>A bug has been fixed where receiving an SCTP message with `gen_sctp` could waste the first fragments of a message and only deliver the last fragment.</p><p>This happened with low probability when the OS signaled that the socket was ready for reading in combination with an internal time-out retry.</p><p>A bug has been fixed with a lingering time-out from after an SCTP connect that could stop the flow of incoming messages on an active `gen_tcp` socket.</p><p>Own Id: OTP-19235 Aux Id: ERIERL-1133, PR-8837</p></li><li><p>An boolean option `non_block_send` for SCTP, has ben added to be able to achieve the old behaviour to avoid blocking send operations by passing the OS network stack error message (`{error,eagain}` through.</p><p>Own Id: OTP-19258 Aux Id: OTP-19061, ERIERL-1134</p></li></ul><h2 id="kernel-9-2-4-2" class="section-heading"><a href="#kernel-9-2-4-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 9.2.4.2</span></h2><h3 id="fixed-bugs-and-malfunctions-20" class="section-heading"><a href="#fixed-bugs-and-malfunctions-20" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>A race in the kTLS flavour of SSL distribution has been fixed so inet_drv.c doesn't read ahead too much data which could cause the kTLS encryption to be activated too late when some encrypted data had already been read into the inet_drv.c buffer as unencrypted.</p><p>Own Id: OTP-19175 Aux Id: GH-8561, PR-8690</p></li><li><p>Fix a deadlock when an application crashes during startup and log messages were sent to standard out. Logger would fail to print the messages to standard out and instead print them to standard error.</p><p>Own Id: OTP-19205</p></li><li><p>Add the stdlib application parameters <code class="inline">shell_redraw_prompt_on_output</code> which when set to <code class="inline">false</code> disables redrawing of the shell prompt if any other output is done.</p><p>Own Id: OTP-19213 Aux Id: PR-8763 ERIERL-1108</p></li></ul><h2 id="kernel-9-2-4-1" class="section-heading"><a href="#kernel-9-2-4-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 9.2.4.1</span></h2><h3 id="fixed-bugs-and-malfunctions-21" class="section-heading"><a href="#fixed-bugs-and-malfunctions-21" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>A call to socket:[recv|recvfrom|recvmsg]/* with Timeout = 0 on Windows could cause a (case clause) crash if data is immediately available.</p><p>Own Id: OTP-19063 Aux Id: OTP-18835</p></li><li><p>Open a <code class="inline">disk_log</code> file and combining <code class="inline">head_func</code> with <code class="inline">rotate</code> options did not work.</p><p>Own Id: OTP-19104 Aux Id: ERIERL-870</p></li></ul><h2 id="kernel-9-2-4" class="section-heading"><a href="#kernel-9-2-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 9.2.4</span></h2><h3 id="fixed-bugs-and-malfunctions-22" class="section-heading"><a href="#fixed-bugs-and-malfunctions-22" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix the shell Job Control Mode to not crash when typing <code class="inline">TAB</code> or <code class="inline">CTRL+R</code>.</p><p>Own Id: OTP-19072 Aux Id: PR-8391</p></li><li><p>Fix calls to blocking <a href="application.html"><code class="inline">application</code></a> APIs to throw an exception with reason <code class="inline">terminating</code> if called when the system is terminating.</p><p>This is done in order to avoid deadlocks during shutdown or restart.</p><p>Own Id: OTP-19078 Aux Id: PR-8422</p></li></ul><h2 id="kernel-9-2-3" class="section-heading"><a href="#kernel-9-2-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 9.2.3</span></h2><h3 id="fixed-bugs-and-malfunctions-23" class="section-heading"><a href="#fixed-bugs-and-malfunctions-23" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>When using IPv6, classic gen_udp failed to add (group) membership (drop was used instead).</p><p>Own Id: OTP-19049 Aux Id: #8176</p></li><li><p>The check in inet_res of the RD bit has been relaxed slightly.</p><p>Own Id: OTP-19056 Aux Id: PR-8312, OTP-17323</p></li></ul><h2 id="kernel-9-2-2" class="section-heading"><a href="#kernel-9-2-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 9.2.2</span></h2><h3 id="fixed-bugs-and-malfunctions-24" class="section-heading"><a href="#fixed-bugs-and-malfunctions-24" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix performance bug when using <code class="inline">io:fread</code> to read from <code class="inline">standard_io</code>. This regression was introduced in OTP 26.0.</p><p>Own Id: OTP-18910 Aux Id: PR-7933 GH-7924</p></li><li><p>A bug in the code server could cause it to crash in some concurrent scenarios. This bug was introduced in 26.1.</p><p>Own Id: OTP-18948 Aux Id: PR-8046</p></li><li><p>Fixed gen_udp:open/2 type spec to include already supported module socket address types.</p><p>Own Id: OTP-18990 Aux Id: GH-8158</p></li><li><p>Fix reading of password for ssh client when in <code class="inline">user_interactive</code> mode.</p><p>Own Id: OTP-19007 Aux Id: ERIERL-1049</p></li></ul><h2 id="kernel-9-2-1" class="section-heading"><a href="#kernel-9-2-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 9.2.1</span></h2><h3 id="fixed-bugs-and-malfunctions-25" class="section-heading"><a href="#fixed-bugs-and-malfunctions-25" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix <code class="inline">group</code> (that is the shell) to properly handle when an <code class="inline">get_until</code> callback function returned <code class="inline">{done, eof, []}</code> when an <code class="inline">eof</code> was detected.</p><p>Own Id: OTP-18901</p></li></ul><h2 id="kernel-9-2" class="section-heading"><a href="#kernel-9-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 9.2</span></h2><h3 id="fixed-bugs-and-malfunctions-26" class="section-heading"><a href="#fixed-bugs-and-malfunctions-26" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>For <code class="inline">inet_backend = socket</code>, an unexpected receive error such as <code class="inline">etimedout</code>
caused the receiving state machine server to crash. This bug has now been
fixed.</p><p>Own Id: OTP-18749 Aux Id: GH-7608</p></li><li><p>Fix bug where reading using <code class="inline">file</code> from a unicode enabled <code class="inline">standard_io</code>,
<code class="inline">standard_error</code> or any other <code class="inline">group</code> backed device would result in incorrect
values being returned or a crash.</p><p>Now instead a no_translation error is returned to the caller when unicode data
is read using <code class="inline">file</code>. See
<a href="../../apps/stdlib/unicode_usage.html#escripts-and-non-interactive-i-o">Using Unicode</a>
in the STDLIB User's Guide for more details on how to correctly read from
<code class="inline">standard_io</code>.</p><p>Own Id: OTP-18800 Aux Id: PR-7714 GH-7591</p></li><li><p>The native resolver interface module has gotten a rewrite of its ETS table
handling to minimize term copying, and also to move the handling of client
time-outs to the clients, which helps the native resolver name server from
digging itself into a tar pit when heavily loaded.</p><p>Own Id: OTP-18812 Aux Id: ERIERL-997</p></li><li><p>Replaced unintentional Erlang Public License 1.1 headers in some files with
the intended Apache License 2.0 header.</p><p>Own Id: OTP-18815 Aux Id: PR-7780</p></li><li><p>Fix bug in <code class="inline">pg</code> if a client process both monitored a group/scope and joined a
group. The termination of such process resulted in crash of the <code class="inline">pg</code> server
process.</p><p>Own Id: OTP-18833 Aux Id: GH-7625, PR-7659</p></li><li><p>Fix crash when using <code class="inline">file:consult</code> and the underlying file read returns an
error while reading.</p><p>Own Id: OTP-18873 Aux Id: PR-7831</p></li><li><p>Corrected gen_tcp_socket listen option handling.</p><p>Own Id: OTP-18883 Aux Id: #7764</p></li></ul><h3 id="improvements-and-new-features-5" class="section-heading"><a href="#improvements-and-new-features-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Add Windows support for DGRAM socket connect.</p><p>Own Id: OTP-18762</p></li><li><p>Document the, previously opaque, types select_tag() and completion_tag().</p><p>Own Id: OTP-18818 Aux Id: #7337</p></li></ul><h2 id="kernel-9-1" class="section-heading"><a href="#kernel-9-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 9.1</span></h2><h3 id="fixed-bugs-and-malfunctions-27" class="section-heading"><a href="#fixed-bugs-and-malfunctions-27" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed an issue with truncated crash slogans on failed emulator start.</p><p>Own Id: OTP-18623 Aux Id: GH-7344</p></li><li><p>Fix shell:start_interactive function specification.</p><p>Own Id: OTP-18628 Aux Id: GH-7280</p></li><li><p>Fix code:get_doc/1 to return missing, when it can't find erts instead of
crashing.</p><p>Own Id: OTP-18654 Aux Id: PR-7404</p></li><li><p>Function socket:close/1 could cause a VM crash on Windows.</p><p>Own Id: OTP-18669 Aux Id: OTP-18029</p></li><li><p>Fix deadlock when <code class="inline">erl.exe</code> is used as part of a pipe on Windows and trying to
set the encoding of the <code class="inline">standard_io</code> device.</p><p>Own Id: OTP-18675 Aux Id: PR-7473 GH-7459</p></li><li><p>Expanded the documentation about how to use the <code class="inline">standard_io</code>,
<code class="inline">standard_error</code> and <code class="inline">user</code> I/O devices.</p><p>Added the types <a href="../../apps/stdlib/io.html#t:standard_io/0"><code class="inline">io:standard_io/0</code></a>,
<code class="inline">io:standard:error/0</code> and <a href="../../apps/stdlib/io.html#t:user/0"><code class="inline">io:user/0</code></a>.</p><p>Own Id: OTP-18676 Aux Id: PR-7473 GH-7459</p></li><li><p>Fix logger's overload protection mechanism to only fetch memory used by
messages when needed.</p><p>Own Id: OTP-18677 Aux Id: PR-7418 GH-7417</p></li><li><p>Fixed a number of socket-related issues causing incompatibilities with gen_tcp
and gen_udp respectively.</p><p>Own Id: OTP-18685</p></li><li><p>gen_tcp:connect with socket address and socket (inet-) backend fails because
of missing callback function.</p><p>Own Id: OTP-18707 Aux Id: #7530</p></li><li><p>The DNS RR cache used by `inet_res` has been fixed to preserve insert order,
which is beneficial when the DNS server returns RRs in some specific order for
e.g load balancing purposes.</p><p>Own Id: OTP-18731 Aux Id: GH-7577, PR-7578</p></li><li><p>The options `reuseport`, `reuseport_lb` and `exclusiveaddruse` were
accidentally not allowed for e.g `gen_udp:open/1,2`, which has now been
corrected.</p><p>Own Id: OTP-18734 Aux Id: OTP-18344, PR-6522, GH-6461, GH-7569</p></li><li><p><code class="inline">gen_udp:recv/*</code> for Unix Domain Socket in binary mode and passive mode has
been fixed to not crash.</p><p>Own Id: OTP-18747 Aux Id: GH-7605</p></li><li><p>Fixed issue where cursor would not be placed at the end of the expression when
navigating shell history.</p><p>Own Id: OTP-18757 Aux Id: PR-7631</p></li></ul><h3 id="improvements-and-new-features-6" class="section-heading"><a href="#improvements-and-new-features-6" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Update gen_tcp_socket and gen_udp_socket to handle 'completion' (socket on
Windows).</p><p>Own Id: OTP-18586 Aux Id: OTP-18029</p></li><li><p>Add support for Unix Domain Sockets (only for STREAM sockets) on Windows for
'socket'.</p><p>Own Id: OTP-18611 Aux Id: OTP-18029, #5024</p></li><li><p>Add basic support for socket ioctl on Windows.</p><p>Own Id: OTP-18660</p></li><li><p>The <a href="file.html#t:location/0"><code class="inline">file:location/0</code></a> type is now exported.</p><p>Own Id: OTP-18681</p></li><li><p>Add support for (Windows) socket option exclusiveaddruse.</p><p>Own Id: OTP-18686</p></li><li><p>[socket] Add support for the 'nopush' option.</p><p>Own Id: OTP-18687</p></li><li><p>Add support for socket option 'BSP STATE'.</p><p>Own Id: OTP-18693</p></li><li><p>Add tcp socket options 'keepcnt', 'keepidle' and 'keepintvl'.</p><p>Own Id: OTP-18698</p></li><li><p>Add support for misc (Windows) socket options ('max_msg_size' and 'maxdg').</p><p>Own Id: OTP-18710</p></li><li><p>The keyboard shortcuts for the shell are now configurable.</p><p>Own Id: OTP-18754 Aux Id: PR-7604 PR-7647</p></li><li><p>Optimized code_server to reduce repeated work when loading the same module
concurrently.</p><p>Own Id: OTP-18755 Aux Id: PR-7503</p></li></ul><h2 id="kernel-9-0-2" class="section-heading"><a href="#kernel-9-0-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 9.0.2</span></h2><h3 id="fixed-bugs-and-malfunctions-28" class="section-heading"><a href="#fixed-bugs-and-malfunctions-28" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix bug where when you entered Alt+Enter in the terminal, the cursor would
move to the last line, instead of moving to the next line.</p><p>Own Id: OTP-18580 Aux Id: PR-7242</p></li><li><p>Fix so that the shell does not crash on startup when termcap is not available.</p><p>Own Id: OTP-18624 Aux Id: GH-7296</p></li><li><p>Multiple socket:accept calls issue. When making multiple accept calls, only
the last call is active.</p><p>Own Id: OTP-18635 Aux Id: #7328</p></li><li><p>Fix the shell to ignore terminal delay when the terminal capabilities report
that they should be used.</p><p>Own Id: OTP-18636 Aux Id: PR-7352 GH-7308</p></li><li><p>Fix &quot;oldshell&quot; to echo characters while typing on Windows.</p><p>Own Id: OTP-18637 Aux Id: PR-7359 GH-7324</p></li><li><p>Fix eof handling when reading from stdin when erlang is started using
<code class="inline">-noshell</code>.</p><p>Own Id: OTP-18640 Aux Id: PR-7384 GH-7368 GH-7286 GH-6881</p></li><li><p>On Windows, a call to the function socket:close, when there are waiting active
calls to read, write or accept functions, could hang.</p><p>Own Id: OTP-18646</p></li><li><p>Fix issues when reading or configuring <code class="inline">standard_io</code> on Windows when erl.exe
is started using <code class="inline">-noshell</code> flag.</p><p>Own Id: OTP-18649 Aux Id: GH-7261 PR-7400</p></li><li><p>gen_udp:connect with inet_backend = socket fails when the Address is a
hostname (string or atom).</p><p>Own Id: OTP-18650</p></li><li><p>Fixed problem which would cause shell to crash if particular escape sequence
was written to stdout.</p><p>Own Id: OTP-18651 Aux Id: PR-7242</p></li><li><p>Fixed problem where output would disappear if it was received after a prompt
was written in the shell.</p><p>Own Id: OTP-18652 Aux Id: PR-7242</p></li><li><p>Fix a crash where the location of erts could not be found in rebar3 dev
builds.</p><p>Own Id: OTP-18656 Aux Id: PR-7404 GH-7390</p></li><li><p>Introduce the KERNEL application parameter <code class="inline">standard_io_encoding</code> that can be
used to set the default encoding for standard_io. This option needs to be set
to <code class="inline">latin1</code> if the application wants to treat all input data as bytes rather
than utf-8 encoded characters.</p><p>Own Id: OTP-18657 Aux Id: GH-7230 PR-7384</p></li></ul><h2 id="kernel-9-0-1" class="section-heading"><a href="#kernel-9-0-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 9.0.1</span></h2><h3 id="fixed-bugs-and-malfunctions-29" class="section-heading"><a href="#fixed-bugs-and-malfunctions-29" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The POSIX error <code class="inline">exdev</code> was sometimes incorrectly described as &quot;cross domain
link&quot; in some error messages.</p><p>Own Id: OTP-18578 Aux Id: GH-7213</p></li><li><p>Corrected the socket send function description (send with Timeout = nowait).
The send function(s) could not return {ok, {RestData, SelectInfo}}</p><p>Own Id: OTP-18584 Aux Id: #7238</p></li></ul><h2 id="kernel-9-0" class="section-heading"><a href="#kernel-9-0" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 9.0</span></h2><h3 id="fixed-bugs-and-malfunctions-30" class="section-heading"><a href="#fixed-bugs-and-malfunctions-30" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed a bug where duplicate keys were allowed in the .app file of an
application. Duplicate keys are now rejected and the application will not
start if they exist.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-18210 Aux Id: GH-5877 PR-5878</p></li><li><p>Fix inconsistent handling in logger_formatter of the branched values in
conditional branches. For example using <code class="inline">msg</code> in a conditional branch would
not be formatted as it should before this fix.</p><p>Own Id: OTP-18225 Aux Id: PR-6036</p></li><li><p>Fix the logger_std_h handler to log to standard_error if logging to
standard_io fails for any reason.</p><p>Own Id: OTP-18226 Aux Id: PR-6253</p></li><li><p>Fix the TLS distribution to work when starting Erlang in embedded mode and a
connection is done before kernel is fully started.</p><p>Own Id: OTP-18248 Aux Id: PR-6227 GH-6085</p></li><li><p>erl <code class="inline">-remsh</code> has been improved to provide better error reasons and work when
using a shell without terminal support (that is an &quot;oldshell&quot;).</p><p>Own Id: OTP-18271 Aux Id: PR-6279</p></li><li><p>Fix logging of log events generated before kernel is started to not fail if
the code for formatting those log messaged have not yet been loaded.</p><p>Own Id: OTP-18286 Aux Id: PR-5955</p></li><li><p><code class="inline">proc_lib:start*/*</code> has become synchronous when the started process fails.
This requires that a failing process use a new function
<code class="inline">proc_lib:init_fail/2,3</code>, or exits, to indicate failure. All OTP behaviours
have been fixed to do this.</p><p>All these start functions now consume the <code class="inline">'EXIT'</code> message from a process link
for all error returns. Previously it was only the <code class="inline">start_link/*</code> functions
that did this, and only when the started function exited, not when it used
<code class="inline">init_ack/1,2</code> or <code class="inline">init_fail/2,3</code> to create the return value.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-18471 Aux Id: GH-6339, PR-6843</p></li><li><p>Fixed a bug where <code class="inline">file:read(standard_io, ...)</code> unexpectedly returned <code class="inline">eof</code> in
binary mode.</p><p>Own Id: OTP-18486 Aux Id: PR-6881</p></li><li><p>Return type for <a href="seq_trace.html#get_token/1"><code class="inline">seq_trace:get_token/1</code></a> fixed.</p><p>Own Id: OTP-18528 Aux Id: PR-7009</p></li><li><p>Looking up, connecting to and sending to a host with an empty name is now
handled by trying to look up the address of the root domain, which fails.
Previously some of these operations caused an internal exception, which
contradicted type specifications.</p><p>Own Id: OTP-18543 Aux Id: GH-6353</p></li><li><p>Replaced a regex with a special case handling of ANSI Select Graphic Rendition
escape characters, to speed up io output that make use of these escape
sequences.</p><p>Own Id: OTP-18547 Aux Id: PR-7092</p></li></ul><h3 id="improvements-and-new-features-7" class="section-heading"><a href="#improvements-and-new-features-7" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>The Erlang shell has been improved to support the following features:</p><ul><li>Auto-complete variables, record names, record field names, map keys,
function parameter types and filenames.</li><li>Open external editor in the shell (with C-o) to edit the current expression
in an editor.</li><li>Support defining records (with types), functions and function typespecs, and
custom types in the shell.</li><li>Do not save pager commands, and input to io:getline in history.</li></ul><p>Own Id: OTP-14835 Aux Id: PR-5924</p></li><li><p>The TTY/terminal subsystem has been rewritten by moving more code to Erlang
from the old linked-in driver and implementing all the I/O primitives needed
in a NIF instead.</p><p>On Unix platforms the user should not notice a lot of difference, besides
better handling of unicode characters and fixing of some long standing bugs.</p><p>Windows users will notice that erl.exe has the same functionality as a normal
Unix shell and that werl.exe has been removed and replaced with a symlink to
erl.exe. This makes the Windows Erlang terminal experience identical to that
of Unix.</p><p>The re-write brings with it a number of bug fixes and feature additions:</p><ul><li>The TTY is now reset when Erlang exits, fixing zsh to not break when
terminating an Erlang session.</li><li><code class="inline">standard_error</code> now uses the same unicode mode as <code class="inline">standard_io</code>.</li><li>Hitting backspace when searching the shell history with an empty search
string no longer breaks the shell.</li><li>Tab expansion now works on remote nodes started using the JCL interface.</li><li>It is now possible to configure the shell slogan and the session slogans
(that is the texts that appear when you start an Erlang shell). See the
kernel documentation for more details.</li><li>Added shell:start_interactive for starting the interactive shell from a
non-interactive Erlang session (for example an escript).</li><li>On Windows, when starting in detached mode the standard handler are now set
to <code class="inline">nul</code> devices instead of being unset.</li><li>Standard I/O now always defaults to <code class="inline">unicode</code> mode if supported. Previously
the default was <code class="inline">latin1</code> if the runtime system had been started with
<code class="inline">-oldshell</code> or <code class="inline">-noshell</code> (for example in an <code class="inline">escript</code>). To send raw bytes
over standard out, one now explicitly has to specify
<code class="inline">io:setopts(standard_io, [{encoding, latin1}]).</code></li></ul><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-17932 Aux Id: PR-6144 GH-3150 GH-3390 GH-4343 GH-4225</p></li><li><p>Add support for socket on Windows.</p><ul><li>Pre release status.</li><li>Error codes not finalized.</li><li>No explicit support for Windows specific options (socket options, flags for
read and write).</li><li>New async api for Windows (completion). See the <code class="inline">Asynchronous calls</code> chapter
in the (Socket Usage) Users Guide.</li><li>To ensure platform independence, gen<em>tcp and gen_udp is _intended</em> to be
used (not yet updated).</li></ul><p>Own Id: OTP-18029</p></li><li><p>As announced since the release of OTP 24, support for:</p><ul><li>version 4 node container types in the external term format are now
mandatory. That is, references supporting up to 5 32-bit integer
identifiers, and process and port identifiers with support for 64-bit data
storage. The distribution flag
<a href="../../apps/erts/erl_dist_protocol.html#DFLAG_V4_NC"><code class="inline">DFLAG_V4_NC</code></a> is therefor now
also mandatory. OTP has since OTP 24 supported this. Also note that the
external format produced by <code class="inline">term_to_binary()</code> and <code class="inline">term_to_iovec()</code> will
unconditionally produce pids, ports, and references supporting this larger
format.</li><li>the <a href="../../apps/erts/erl_dist_protocol.html#new_link_protocol">new link protocol</a>
introduced in OTP 23.3 is now mandatory. The distribution flag
<a href="../../apps/erts/erl_dist_protocol.html#DFLAG_UNLINK_ID"><code class="inline">DFLAG_UNLINK_ID</code></a> is
therefor now also mandatory.</li></ul><p>Due to the above, OTP 26 nodes will refuse to connect to OTP nodes from
releases prior to OTP 24.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-18140 Aux Id: PR-6072</p></li><li><p>Support for Kernel TLS (kTLS), has been added to the SSL application, for TLS
distribution (<code class="inline">-proto_dist inet_tls</code>), the SSL option <code class="inline">{ktls, true}</code>. Using
this for general SSL sockets is uncomfortable, undocumented and not
recommended since it requires very platform dependent raw options.</p><p>This, for now, only works for some not too old Linux distributions. Roughly, a
kernel 5.2.0 or later with support for UserLand Protocols and the kernel
module <code class="inline">tls</code> is required.</p><p>Own Id: OTP-18235 Aux Id: PR-6104, PR-5840</p></li><li><p>Add code:get_doc/2 which adds support to fetch documentation skeletons of
functions using debug_info chunks instead of eep48 doc chunks.</p><p>Own Id: OTP-18261 Aux Id: PR-5924</p></li><li><p>The Erlang shell's auto-completion when typing <code class="inline">tab</code> has been changed to
happen after the editing current line instead of before it.</p><p>This behaviour can be configured using a the <code class="inline">shell_expand_location</code> STDLIB
configuration parameter.</p><p>Own Id: OTP-18278 Aux Id: PR-6260</p></li><li><p>Typing <code class="inline">Ctrl+L</code> in a shell now clears the screen and redraws the current line
instead of only redrawing the current line. To only redraw the current line,
you must now type <code class="inline">Alt+L</code>. This brings the behaviour of <code class="inline">Ctrl+L</code> closer to how
bash and other shells work.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-18285 Aux Id: PR-6262</p></li><li><p>gen_server optimized by caching callback functions</p><p>Own Id: OTP-18305 Aux Id: PR-5831</p></li><li><p>Prepare the <code class="inline">pg</code> communication protocol for upgrade. The plan is for OTP-28
nodes to be able to use an upgraded <code class="inline">pg</code> protocol while still being able to
talk with OTP 26 nodes.</p><p>Own Id: OTP-18327 Aux Id: PR-6433</p></li><li><p>New <code class="inline">disk_log</code> log type <code class="inline">rotate</code>, where the log files are compressed upon
rotation.</p><p>Own Id: OTP-18331 Aux Id: ERIERL-870</p></li><li><p>The following <a href="inet.html#setopts/2"><code class="inline">inet:setopts/2</code></a> options have been introduced:</p><ul><li><p><strong><a href="inet.html#option-reuseport"><code class="inline">reuseport</code></a></strong> - Reuse of local port. Load
balancing may or may not be provided depending on underlying OS.</p></li><li><p><strong><a href="inet.html#option-reuseport_lb"><code class="inline">reuseport_lb</code></a></strong> - Reuse of local port.
Load balancing provided.</p></li><li><p><strong><a href="inet.html#option-exclusiveaddruse"><code class="inline">exclusiveaddruse</code></a></strong> - Exclusive
address/port usage on Windows. This socket option is Windows specific and
will silently be ignored on other systems.</p></li></ul><p>The behavior of setting <a href="inet.html#option-reuseaddr"><code class="inline">reuseaddr</code></a> on Windows
have changed in a <em>backwards incompatible</em> way. The underlying <code class="inline">SO_REUSEADDR</code>
socket option is now only set if both the <code class="inline">reusaddr</code> and the <code class="inline">reuseport</code>
<code class="inline">inet</code> options have been set. This since the underlying <code class="inline">SO_REUSEADDR</code> socket
option on Windows behaves similar to how BSD behaves if both the underlying
socket options <code class="inline">SO_REUSEADDR</code> and <code class="inline">SO_REUSEPORT</code> have been set. See the
documentation of the <code class="inline">reuseaddr</code> option for more information.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-18344 Aux Id: PR-6522, PR-6944, OTP-18324, PR-6481, GH-6461</p></li><li><p>Replace size/1 with either tuple_size/1 or byte_size/1</p><p>The <a href="../../apps/erts/erlang.html#size/1"><code class="inline">size/1</code></a> BIF is not optimized by the JIT, and its use can
result in worse types for Dialyzer.</p><p>When one knows that the value being tested must be a tuple,
<a href="../../apps/erts/erlang.html#tuple_size/1"><code class="inline">tuple_size/1</code></a> should always be preferred.</p><p>When one knows that the value being tested must be a binary,
<a href="../../apps/erts/erlang.html#byte_size/1"><code class="inline">byte_size/1</code></a> should be preferred. However,
<a href="../../apps/erts/erlang.html#byte_size/1"><code class="inline">byte_size/1</code></a> also accepts a bitstring (rounding up size to a
whole number of bytes), so one must make sure that the call to <code class="inline">byte_size/</code> is
preceded by a call to <a href="../../apps/erts/erlang.html#is_binary/1"><code class="inline">is_binary/1</code></a> to ensure that bitstrings
are rejected. Note that the compiler removes redundant calls to
<a href="../../apps/erts/erlang.html#is_binary/1"><code class="inline">is_binary/1</code></a>, so if one is not sure whether previous code
had made sure that the argument is a binary, it does not harm to add an
<a href="../../apps/erts/erlang.html#is_binary/1"><code class="inline">is_binary/1</code></a> test immediately before the call to
<a href="../../apps/erts/erlang.html#byte_size/1"><code class="inline">byte_size/1</code></a>.</p><p>Own Id: OTP-18405 Aux Id:
GH-6672,PR-6702,PR-6768,PR-6700,PR-6769,PR-6812,PR-6814</p></li><li><p>The function <code class="inline">file:pid2name/1</code> is deprecated and will be removed in
Erlang/OTP 27.</p><p>Own Id: OTP-18419</p></li><li><p>The modules Erlang DNS resolver <code class="inline">inet_res</code> and helper modules have been
updated for RFC6891; to handle OPT RR with DNSSEC OK (DO) bit.</p><p>Own Id: OTP-18442 Aux Id: PR-6786, GH-6606</p></li><li><p>Introduced <a href="application.html#get_supervisor/1"><code class="inline">application:get_supervisor/1</code></a>.</p><p>Own Id: OTP-18444 Aux Id: PR-6035</p></li><li><p>Handling of <code class="inline">on_load</code> modules during boot has been improved by adding an extra
step in the boot order for embedded mode that runs all <code class="inline">on_load</code> handlers,
instead of relying on explicit invocation of them, later, when the kernel
supervision tree starts.</p><p>This is mostly a code improvement and OTP internal simplification to avoid
future bugs and to simplify code maintenance.</p><p>Own Id: OTP-18447</p></li><li><p>Reduce contention on the code_server by doing the code preparation on the
client.</p><p>Own Id: OTP-18448 Aux Id: PR-6736</p></li><li><p>Added a mode to ensure_all_loaded, to start children application and their
dependencies concurrently.</p><p>Own Id: OTP-18451 Aux Id: PR-6737</p></li><li><p>Cache OTP boot code paths, to limit how many folders that are being accessed
during a module lookup. Can be disabled with -cache_boot_path false. OTP boot
code paths consists of ERL_LIB environment variables. The various otp/*/ebin
folders. And the {path, ...} clauses in the init script.</p><p>Own Id: OTP-18452 Aux Id: PR-6729</p></li><li><p>Erlang distribution code in Kernel and SSL has been refactored a bit to
facilitate debugging and re-usability, which shouldn't have any noticeable
effects on behaviour or performance.</p><p>Own Id: OTP-18456</p></li><li><p>Add cache attribute to code path apis.</p><p>Added an optional cache/nocache argument to all code:add_path<em>,
code:set_path</em>, and code:replace_path* functions. These functions will then
avoid doing file-accesses if they are cached. Cache can be cleared with
code:clear_cache/0. Added code:del_paths/1 to make it easier to clear multiple
paths.</p><p>Own Id: OTP-18466 Aux Id: PR-6832</p></li><li><p>Deprecates <code class="inline">dbg:stop_clear/0</code> because it is simply a function alias to
<a href="../../apps/runtime_tools/dbg.html#stop/0"><code class="inline">dbg:stop/0</code></a></p><p>Own Id: OTP-18478 Aux Id: GH-6903</p></li><li><p>Improvements to code:ensure_modules_loaded/1: Previously it would prepare
modules and then abandon references to said modules if they had on_load
callbacks. This pull request makes it so they keep the references around and
then serially load them without having to fetch the object code and prepare
them again.</p><p>Own Id: OTP-18484 Aux Id: PR-6844</p></li><li><p>The internal DNS resolver has been updated to handle DNS LOC RR:s (RFC 1876).
This is an undocumented module, although still used by power users. See the
source code.</p><p>Own Id: OTP-18510 Aux Id: GH-6098, PR-6982</p></li><li><p>Reduced memory consumption in <code class="inline">global</code> when informing other nodes about lost
connections.</p><p>Own Id: OTP-18521 Aux Id: PR-7025</p></li><li><p>The <code class="inline">net_kernel</code>, <code class="inline">global</code>, and <code class="inline">global_group</code> servers now have
<a href="../../apps/erts/erlang.html#process_flag_async_dist"><em>fully asynchronous distributed signaling</em></a>
enabled all the time which prevents them from ever getting blocked on send of
distributed signals.</p><p>Documentation about blocking distributed signals has also been improved.</p><p>Own Id: OTP-18533 Aux Id: PR-7061</p></li><li><p>Allow IPv6 addresses as host in <code class="inline">http</code> packets decoded by
<a href="../../apps/erts/erlang.html#decode_packet/3"><code class="inline">erlang:decode_packet/3</code></a> and <code class="inline">gen_tcp</code> packet option. The IPv6 address should
be enclosed within <code class="inline">[]</code> according to RFC2732.</p><p>Own Id: OTP-18540 Aux Id: PR-6900</p></li><li><p>Remove deprecated functions in OTP-26</p><p>Own Id: OTP-18542</p></li><li><p>Removed <code class="inline">code:is_module_native/1</code> since HiPE has been removed. It has since
OTP 24 been deprecated and scheduled for removal in OTP 26.</p><p>Removed <code class="inline">code:rehash/0</code> since the code path feature no longer is present. It
has since OTP 19 been deprecated and has since OTP 24 been scheduled for
removal in OTP 26.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-18551 Aux Id: PR-7106</p></li><li><p>Added support for multiple line expressions and navigation in the shell. Added
new keybindings:</p><ul><li>navigate up (ctrl+up)/(alt+up)</li><li>navigate down (ctrl+down)/(alt+down)</li><li>insert newline in middle of line (alt+enter)</li><li>navigate top (alt+&lt;)/(alt+shift+up)</li><li>navigate bottom (alt+&gt;)/(alt+shift+down)</li><li>clear current expression (alt+c)</li><li>cancel search (alt+c)</li><li>opening editor on mac (option+o)/(alt+o)</li></ul><p>Modifies the prompt for new lines to make it clearer that the prompt has
entered multi-line mode. Supports terminal with small window size, recommend
not go lower than 7 rows and 40 columns. Modifies the search prompt to support
multi-line statements. Redraw the prompt after continuing from JCL menu.</p><p>Own Id: OTP-18575 Aux Id: PR-7169</p></li></ul><h2 id="kernel-8-5-4-6" class="section-heading"><a href="#kernel-8-5-4-6" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 8.5.4.6</span></h2><h3 id="fixed-bugs-and-malfunctions-31" class="section-heading"><a href="#fixed-bugs-and-malfunctions-31" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>With this change, disk_log will not crash when using chunk_step/3 after log size was decreased.</p><p>Own Id: OTP-19605 Aux Id: GH-9720, PR-9765</p></li><li><p>With this change, disk_log will not run into infinite loop when using chunk/2,3 after log size was decreased.</p><p>Own Id: OTP-19608 Aux Id: GH-9707, PR-9767</p></li></ul><h2 id="kernel-8-5-4-5" class="section-heading"><a href="#kernel-8-5-4-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 8.5.4.5</span></h2><h3 id="fixed-bugs-and-malfunctions-32" class="section-heading"><a href="#fixed-bugs-and-malfunctions-32" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>An infinite loop in CNAME loop detection that can cause Out Of Memory has been fixed. This affected CNAME lookup with the internal DNS resolver.</p><p>Own Id: OTP-19545 Aux Id: PR-9587, OTP-19544</p></li></ul><h2 id="kernel-8-5-4-4" class="section-heading"><a href="#kernel-8-5-4-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 8.5.4.4</span></h2><h3 id="fixed-bugs-and-malfunctions-33" class="section-heading"><a href="#fixed-bugs-and-malfunctions-33" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed a couple of bugs that could make <code class="inline">global</code>'s internal state inconsistent when a connection was reconnected.</p><p>Own Id: OTP-19381 Aux Id: PR-9377, GH-9112, GH-9117</p></li></ul><h2 id="kernel-8-5-4-3" class="section-heading"><a href="#kernel-8-5-4-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 8.5.4.3</span></h2><h3 id="fixed-bugs-and-malfunctions-34" class="section-heading"><a href="#fixed-bugs-and-malfunctions-34" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed gen_udp:open/2 type spec to include already supported module socket address types.</p><p>Own Id: OTP-19050 Aux Id: OTP-18990</p></li></ul><h2 id="kernel-8-5-4-2" class="section-heading"><a href="#kernel-8-5-4-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 8.5.4.2</span></h2><h3 id="fixed-bugs-and-malfunctions-35" class="section-heading"><a href="#fixed-bugs-and-malfunctions-35" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>gen_tcp:connect with socket address and socket (inet-) backend fails because
of missing callback function.</p><p>Own Id: OTP-18707 Aux Id: #7530</p></li></ul><h2 id="kernel-8-5-4-1" class="section-heading"><a href="#kernel-8-5-4-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 8.5.4.1</span></h2><h3 id="fixed-bugs-and-malfunctions-36" class="section-heading"><a href="#fixed-bugs-and-malfunctions-36" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Multiple socket:accept calls issue. When making multiple accept calls, only
the last call is active.</p><p>Own Id: OTP-18635 Aux Id: #7328</p></li><li><p>gen_udp:connect with inet_backend = socket fails when the Address is a
hostname (string or atom).</p><p>Own Id: OTP-18650</p></li></ul><h2 id="kernel-8-5-4" class="section-heading"><a href="#kernel-8-5-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 8.5.4</span></h2><h3 id="fixed-bugs-and-malfunctions-37" class="section-heading"><a href="#fixed-bugs-and-malfunctions-37" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed a bug on Windows where <a href="file.html#read_file_info/1"><code class="inline">file:read_file_info/1</code></a> would fail for files with
corrupt metadata.</p><p>Own Id: OTP-18348 Aux Id: GH-6356</p></li><li><p>Accept connection setup from OTP 23 and 24 nodes that are not using epmd.</p><p>Own Id: OTP-18404 Aux Id: GH-6595, PR-6625</p></li></ul><h2 id="kernel-8-5-3" class="section-heading"><a href="#kernel-8-5-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 8.5.3</span></h2><h3 id="fixed-bugs-and-malfunctions-38" class="section-heading"><a href="#fixed-bugs-and-malfunctions-38" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The tcp connect option 'bind_to_device' could not be used with inet_backend =
'socket'. 'inet' requires value type binarry() and 'socket' requires value
type 'string()'.</p><p>Own Id: OTP-18357 Aux Id: #6509</p></li><li><p>Minor issue processing options when calling gen_tcp:connect with a sockaddr()
and inet_backend = socket.</p><p>Own Id: OTP-18358 Aux Id: #6528</p></li></ul><h2 id="kernel-8-5-2" class="section-heading"><a href="#kernel-8-5-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 8.5.2</span></h2><h3 id="fixed-bugs-and-malfunctions-39" class="section-heading"><a href="#fixed-bugs-and-malfunctions-39" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed shutdown crash in gen_tcp socket backend, when the other end closed the
socket.</p><p>Own Id: OTP-18270 Aux Id: #6331</p></li><li><p><code class="inline">erl_tar</code> can now read gzip-compressed tar files that are padded. There is a
new option <code class="inline">compressed_one</code> for <a href="file.html#open/2"><code class="inline">file:open/2</code></a> that will read a single member
from a gzip file,</p><p>Own Id: OTP-18289 Aux Id: PR-6343</p></li><li><p>Fix <code class="inline">os:cmd</code> to not translate all exceptions thrown to <code class="inline">badarg</code>. For example
<code class="inline">emfile</code> from <code class="inline">erlang:open_port</code> was translated to <code class="inline">badarg</code>.</p><p>This bug has existed since Erlang/OTP 24.</p><p>Own Id: OTP-18291 Aux Id: PR-6382</p></li><li><p>Spec for function net:if_names/0 incorrect</p><p>Own Id: OTP-18296 Aux Id: OTP-16464</p></li><li><p>Missing ctrl option name transation for TOS and TTL (on FreeBSD) when using
gen_udp with the 'socket' inet_backend.</p><p>Own Id: OTP-18315</p></li><li><p>gen_udp:open/2 with option(s) add_membership or drop_membership would drop
earlier options.</p><p>Own Id: OTP-18323 Aux Id: #6476</p></li><li><p>The <a href="inet.html#setopts/2"><code class="inline">inet:setopts/2</code></a> <code class="inline">{reuseaddr, true}</code> option will now be ignored on Windows
unless the socket is an UDP socket. For more information see the documentation
of the <code class="inline">reuseaddr</code> option part of the documentation of <a href="inet.html#setopts/2"><code class="inline">inet:setopts/2</code></a>.</p><p>Prior to OTP 25 the <code class="inline">{reuseaddr, true}</code> option was ignored for all sockets on
Windows, but as of OTP 25.0 this was changed so that it was not ignored for
any sockets.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-18324 Aux Id: GH-6461, PR-6481</p></li></ul><h3 id="improvements-and-new-features-8" class="section-heading"><a href="#improvements-and-new-features-8" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>The distribution socket option handling in <code class="inline">inet_tcp_dist</code> has been cleaned up
to clarify which were mandatory and which just had default values.</p><p>Own Id: OTP-18293</p></li><li><p>Improve warning message format for gen_tcp_socket.</p><p>Own Id: OTP-18317</p></li></ul><h2 id="kernel-8-5-1" class="section-heading"><a href="#kernel-8-5-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 8.5.1</span></h2><h3 id="fixed-bugs-and-malfunctions-40" class="section-heading"><a href="#fixed-bugs-and-malfunctions-40" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Listen sockets created with the socket module, leaked (erlang-) monitors.</p><p>Own Id: OTP-18240 Aux Id: #6285</p></li><li><p><a href="../../apps/stdlib/peer.html"><code class="inline">peer</code></a> nodes failed to halt when the process supervising the control
connection crashed. When an alternative control connection was used, this
supervision process also quite frequently crashed when the <code class="inline">peer</code> node was
stopped by the node that started it which caused the <code class="inline">peer</code> node to linger
without ever halting.</p><p>Own Id: OTP-18249 Aux Id: PR-6301</p></li></ul><h2 id="kernel-8-5" class="section-heading"><a href="#kernel-8-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 8.5</span></h2><h3 id="fixed-bugs-and-malfunctions-41" class="section-heading"><a href="#fixed-bugs-and-malfunctions-41" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed inconsistency bugs in <a href="global.html"><code class="inline">global</code></a> due to <code class="inline">nodeup</code>/<code class="inline">nodedown</code> messages not
being delivered before/after traffic over connections. Also fixed various
other inconsistency bugs and deadlocks in both <a href="global_group.html"><code class="inline">global_group</code></a> and <code class="inline">global</code>.</p><p>As building blocks for these fixes, a new BIF <a href="../../apps/erts/erlang.html#nodes/2"><code class="inline">erlang:nodes/2</code></a> has been
introduced and <a href="net_kernel.html#monitor_nodes/2"><code class="inline">net_kernel:monitor_nodes/2</code></a> has been extended.</p><p>The <a href="../../apps/erts/erl_cmd.html#hidden"><code class="inline">-hidden</code></a> and
<a href="../../apps/erts/erl_cmd.html#connect_all"><code class="inline">-connect_all</code></a> command line arguments did
not work if multiple instances were present on the command line which has been
fixed. The new kernel parameter <a href="kernel_app.html#connect_all"><code class="inline">connect_all</code></a> has
also been introduced in order to replace the <code class="inline">-connect_all</code> command line
argument.</p><p>Own Id: OTP-17934 Aux Id: PR-6007</p></li><li><p>Fixed IPv6 multicast_if and membership socket options.</p><p>Own Id: OTP-18091 Aux Id: #5789</p></li><li><p>Fixed issue with inet:getifaddrs hanging on pure IPv6 Windows</p><p>Own Id: OTP-18102 Aux Id: #5904</p></li><li><p>The type specifications for <a href="inet.html#getopts/2"><code class="inline">inet:getopts/2</code></a> and <a href="inet.html#setopts/2"><code class="inline">inet:setopts/2</code></a> have been
corrected regarding SCTP options.</p><p>Own Id: OTP-18115 Aux Id: PR-5939</p></li><li><p>The type specifications for <code class="inline">inet:parse_*</code> have been tightened.</p><p>Own Id: OTP-18121 Aux Id: PR-5972</p></li><li><p>Fix gen_tcp:connect/3 spec to include the inet_backend option.</p><p>Own Id: OTP-18171 Aux Id: PR-6131</p></li><li><p>Fix bug where using a binary as the format when calling
<code class="inline">logger:log(Level, Format, Args)</code> (or any other logging function) would cause
a crash or incorrect logging.</p><p>Own Id: OTP-18229 Aux Id: PR-6212</p></li></ul><h3 id="improvements-and-new-features-9" class="section-heading"><a href="#improvements-and-new-features-9" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Add rudimentary debug feature (option) for the inet-driver based sockets, such
as gen_tcp and gen_udp.</p><p>Own Id: OTP-18032</p></li><li><p>Introduced the <code class="inline">hidden</code> and <code class="inline">dist_listen</code> options to <a href="net_kernel.html#start/2"><code class="inline">net_kernel:start/2</code></a>.</p><p>Also documented the <a href="../../apps/erts/erl_cmd.html#dist_listen"><code class="inline">-dist_listen</code></a> command
line argument which was erroneously documented as a <code class="inline">kernel</code> parameter and not
as a command line argument.</p><p>Own Id: OTP-18107 Aux Id: PR-6009</p></li><li><p>Scope and group monitoring have been introduced in <a href="pg.html"><code class="inline">pg</code></a>. For more
information see the documentation of
<a href="pg.html#monitor_scope/0"><code class="inline">pg:monitor_scope()</code></a>,
<a href="pg.html#monitor/1"><code class="inline">pg:monitor()</code></a>, and <a href="pg.html#demonitor/1"><code class="inline">pg:demonitor()</code></a>.</p><p>Own Id: OTP-18163 Aux Id: PR-6058, PR-6275</p></li><li><p>A new function <a href="global.html#disconnect/0"><code class="inline">global:disconnect/0</code></a> has been introduced with which one can
cleanly disconnect a node from all other nodes in a cluster of <code class="inline">global</code> nodes.</p><p>Own Id: OTP-18232 Aux Id: OTP-17843, PR-6264</p></li></ul><h2 id="kernel-8-4-2" class="section-heading"><a href="#kernel-8-4-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 8.4.2</span></h2><h3 id="fixed-bugs-and-malfunctions-42" class="section-heading"><a href="#fixed-bugs-and-malfunctions-42" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>A call to <a href="net_kernel.html#setopts/2"><code class="inline">net_kernel:setopts(new, Opts)</code></a> at the
same time as a connection was being set up could cause a deadlock between the
<code class="inline">net_kernel</code> process and the process setting up the connection.</p><p>Own Id: OTP-18198 Aux Id: GH-6129, PR-6216</p></li></ul><h2 id="kernel-8-4-1" class="section-heading"><a href="#kernel-8-4-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 8.4.1</span></h2><h3 id="fixed-bugs-and-malfunctions-43" class="section-heading"><a href="#fixed-bugs-and-malfunctions-43" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The DNS resolver <code class="inline">inet_res</code> has been fixed to ignore trailing dot difference
in the request domain between the sent request and the received response, when
validating a response.</p><p>Own Id: OTP-18112 Aux Id: ERIERL-811</p></li><li><p>A bug in <code class="inline">inet_res</code> has been fixed where a missing internal <code class="inline">{ok,_}</code> wrapper
caused <code class="inline">inet_res:resolve/*</code> to return a calculated host name instead of an
<code class="inline">{ok,Msg}</code> tuple, when resolving an IP address or a host name that is an IP
address string.</p><p>Own Id: OTP-18122 Aux Id: GH-6015, PR-6020</p></li><li><p>The <code class="inline">erlang:is_alive()</code> BIF could return <code class="inline">true</code> before configured distribution
service was available. This bug was introduced in OTP 25.0 ERTS version 13.0.</p><p>The <code class="inline">erlang:monitor_node()</code> and <code class="inline">erlang:monitor()</code> BIFs could erroneously fail
even though configured distribution service was available. This occurred if
these BIFs were called after the distribution had been started using dynamic
node name assignment but before the name had been assigned.</p><p>Own Id: OTP-18124 Aux Id: OTP-17558, PR-6032</p></li><li><p>Added the missing mandatory <code class="inline">address/0</code> callback in the <code class="inline">gen_tcp_dist</code>
example.</p><p>Own Id: OTP-18136</p></li></ul><h2 id="kernel-8-4" class="section-heading"><a href="#kernel-8-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 8.4</span></h2><h3 id="fixed-bugs-and-malfunctions-44" class="section-heading"><a href="#fixed-bugs-and-malfunctions-44" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The DNS resolver implementation has been rewritten to validate replies more
thoroughly, and a bit optimized to create less garbage.</p><p>Own Id: OTP-17323</p></li><li><p>The socket option 'reuseaddr' is <em>no longer</em> ignored on Windows.</p><p>Own Id: OTP-17447 Aux Id: GH-4819</p></li><li><p>Fix bug where using the atoms <code class="inline">string</code> or <code class="inline">report</code> as the format when calling
<code class="inline">logger:log(Level, Format, Args)</code> (or any other logging function) would cause
a crash or incorrect logging.</p><p>Own Id: OTP-17551 Aux Id: GH-5071 PR-5075</p></li><li><p>As of OTP 25, <code class="inline">global</code> will by default prevent overlapping partitions due to
network issues by actively disconnecting from nodes that reports that they
have lost connections to other nodes. This will cause fully connected
partitions to form instead of leaving the network in a state with overlapping
partitions.</p><p>Prevention of overlapping partitions can be disabled using the
<a href="kernel_app.html#prevent_overlapping_partitions"><code class="inline">prevent_overlapping_partitions</code></a>
<code class="inline">kernel(6)</code> parameter, making <code class="inline">global</code> behave like it used to do. This is,
however, problematic for all applications expecting a fully connected network
to be provided, such as for example <code class="inline">mnesia</code>, but also for <code class="inline">global</code> itself. A
network of overlapping partitions might cause the internal state of <code class="inline">global</code>
to become inconsistent. Such an inconsistency can remain even after such
partitions have been brought together to form a fully connected network again.
The effect on other applications that expects that a fully connected network
is maintained may vary, but they might misbehave in very subtle hard to detect
ways during such a partitioning. Since you might get hard to detect issues
without this fix, you are <em>strongly</em> advised <em>not</em> to disable this fix. Also
note that this fix <em>has</em> to be enabled on <em>all</em> nodes in the network in order
to work properly.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-17911 Aux Id: PR-5687, PR-5611, OTP-17843</p></li><li><p>Starting the helper program for name resolving; <code class="inline">inet_gethost</code>, has been
improved to use an absolute file system path to ensure that the right program
is started.</p><p>If the helper program can not be started - the system now halts, to avoid
running with a silently broken name resolver.</p><p>Own Id: OTP-17958 Aux Id: OTP-17978</p></li><li><p>The type specification for <code class="inline">inet_res:getbyname/2,3</code> has been corrected to
reflect that it can return peculiar <code class="inline">#hostent{}</code> records.</p><p>Own Id: OTP-17986 Aux Id: PR-5412, PR-5803</p></li><li><p><a href="code.html#module_status/1"><code class="inline">code:module_status/1</code></a> would always report BEAM files loaded from an archive
as <code class="inline">modified</code>, and <a href="code.html#modified_modules/0"><code class="inline">code:modified_modules/0</code></a> would always return the name of
all modules loaded from archives.</p><p>Own Id: OTP-17990 Aux Id: GH-5801</p></li><li><p>In logger fix file handler shutdown delay by using erlang timers instead of
the timer module's timers.</p><p>Own Id: OTP-18001 Aux Id: GH-5780 PR-5829</p></li><li><p>Fix the meta data in log events generated by logger on failure to not contain
the original log event's meta data.</p><p>Own Id: OTP-18003 Aux Id: PR-5771</p></li><li><p>Fix logger file backend to re-create the log folder if it has been deleted.</p><p>Own Id: OTP-18015 Aux Id: GH-5828 PR-5845</p></li><li><p>[socket] Encode of sockaddr has been improved.</p><p>Own Id: OTP-18020</p></li><li><p>Fix <code class="inline">put_chars</code> requests to the io server with incomplete unicode data to exit
with <code class="inline">no_translation</code> error.</p><p>Own Id: OTP-18070 Aux Id: PR-5885</p></li></ul><h3 id="improvements-and-new-features-10" class="section-heading"><a href="#improvements-and-new-features-10" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>The net module now works on Windows.</p><p>Own Id: OTP-16464</p></li><li><p>An Erlang installation directory is now relocatable on the file system given
that the paths in the installation's <code class="inline">RELEASES</code> file are paths that are
relative to the installations root directory. The
<code class="inline">`release_handler:create_RELEASES/4</code> function can generate a <code class="inline">RELEASES</code>
file with relative paths if its <code class="inline">RootDir</code> parameter is set to the empty
string.</p><p>Own Id: OTP-17304</p></li><li><p>The following distribution flags are now mandatory: <code class="inline">DFLAG_BIT_BINARIES</code>,
<code class="inline">DFLAG_EXPORT_PTR_TAG</code>, <code class="inline">DFLAG_MAP_TAGS</code>, <code class="inline">DFLAG_NEW_FLOATS</code>, and
<code class="inline">DFLAG_FUN_TAGS</code>. This mainly concerns libraries or application that implement
the distribution protocol themselves.</p><p>Own Id: OTP-17318 Aux Id: PR-4972</p></li><li><p>Fix <code class="inline">os:cmd</code> to work on Android OS.</p><p>Own Id: OTP-17479 Aux Id: PR-4917</p></li><li><p>The configuration files <a href="../../apps/erts/erl_cmd.html"><code class="inline">.erlang</code></a>,
<a href="../../system/distributed.html"><code class="inline">.erlang.cookie</code></a> and
<a href="../../apps/stdlib/beam_lib.html#module-erlang-crypt"><code class="inline">.erlang.crypt</code></a> can now be located in the XDG
Config Home directory.</p><p>See the documentation for each file and <a href="../../apps/stdlib/filename.html#basedir/2"><code class="inline">filename:basedir/2</code></a> for more details.</p><p>Own Id: OTP-17554 Aux Id: GH-5016 PR-5408 OTP-17821</p></li><li><p>Dynamic node name improvements: <a href="../../apps/erts/erlang.html#is_alive/0"><code class="inline">erlang:is_alive/0</code></a> changed to return true for
pending dynamic node name and new function <a href="net_kernel.html#get_state/0"><code class="inline">net_kernel:get_state/0</code></a>.</p><p>Own Id: OTP-17558 Aux Id: OTP-17538, PR-5111, GH-5402</p></li><li><p>The types for callback result types in <code class="inline">gen_statem</code> has bee augmented with
arity 2 types where it is possible for a callback module to specify the type
of the callback data, so the callback module can get type validation of it.</p><p>Own Id: OTP-17589 Aux Id: PR-4926</p></li><li><p>The tagged tuple tests and fun-calls have been optimized and are now a little
bit cheaper than previously.</p><p>These optimizations become possible after making sure that all boxed terms
have at least one word allocated after the arity word. This has been
accomplished by letting all empty tuples refer to the same empty tuple literal
which also reduces memory usage for empty tuples.</p><p>Own Id: OTP-17608</p></li><li><p>A <a href="kernel_app.html#net_ticker_spawn_options"><code class="inline">net_ticker_spawn_options</code></a>
<code class="inline">kernel</code> configuration parameter with which one can set spawn options for the
distribution channel ticker processes has been introduced.</p><p>Own Id: OTP-17617 Aux Id: PR-5069</p></li><li><p>The most, or at least the most used, <a href="rpc.html"><code class="inline">rpc</code></a> operations now require <a href="erpc.html"><code class="inline">erpc</code></a>
support in order to communicate with other Erlang nodes. <code class="inline">erpc</code> was introduced
in OTP 23. That is, <code class="inline">rpc</code> operations against Erlang nodes of releases prior to
OTP 23 will fail.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-17681 Aux Id: PR-5307</p></li><li><p>The new module <code class="inline">peer</code> supersedes the <code class="inline">slave</code> module. The <code class="inline">slave</code> module is now
deprecated and will be removed in OTP 27.</p><p><code class="inline">peer</code> contains an extended and more robust API for starting erlang nodes.</p><p>Own Id: OTP-17720 Aux Id: PR-5162</p></li><li><p>In order to make it easier for the user to manage multiple outstanding
asynchronous <code class="inline">call</code> requests, new functionality utilizing request identifier
collections have been introduced in
<a href="erpc.html#t:request_id_collection/0"><code class="inline">erpc</code></a>,
<a href="../../apps/stdlib/gen_server.html#t:request_id_collection/0"><code class="inline">gen_server</code></a>,
<a href="../../apps/stdlib/gen_statem.html#t:request_id_collection/0"><code class="inline">gen_statem</code></a>, and
<a href="../../apps/stdlib/gen_event.html#t:request_id_collection/0"><code class="inline">gen_event</code></a>.</p><p>Own Id: OTP-17784 Aux Id: PR-5792</p></li><li><p>Type specifications have been added to the <code class="inline">gen_server</code>, and the documentation
has been updated to utilize this.</p><p>This surfaced a few type violations that has been corrected in <code class="inline">global</code>,
<code class="inline">logger_olp</code> and <code class="inline">rpc</code>.</p><p>Own Id: OTP-17915 Aux Id: PR-5751, GH-2375, GH-2690</p></li><li><p>IP address validation functions <code class="inline">is_ipv4_address/1</code>, <code class="inline">is_ipv6_address/1</code> and
<code class="inline">is_ip_address/1</code> have been added to the module <code class="inline">inet</code> in Kernel.</p><p>Own Id: OTP-17923 Aux Id: PR-5646</p></li><li><p>An API for multihomed SCTP connect has been added in the guise of
<code class="inline">gen_sctp:connectx_init/*</code></p><p>Own Id: OTP-17951 Aux Id: PR-5656</p></li><li><p>[socket] Add encoding of the field hatype of the type sockaddr_ll (family
'packet').</p><p>Own Id: OTP-17968 Aux Id: OTP-16464</p></li><li><p>Added support for configurable features as described in EEP-60. Features can
be enabled/disabled during compilation with options
(<code class="inline">-enable-feature Feature</code>, <code class="inline">-disable-feature Feature</code> and
<code class="inline">+{feature, Feature, enable|disable}</code>) to <code class="inline">erlc</code> as well as with directives
(<code class="inline">-feature(Feature, enable|disable).</code>) in the file. Similar options can be
used to <code class="inline">erl</code> for enabling/disabling features allowed at runtime. The new
<code class="inline">maybe</code> expression (EEP-49) is fully supported as the feature <code class="inline">maybe_expr</code>.
The features support is documented in the reference manual.</p><p>Own Id: OTP-17988</p></li></ul><h2 id="kernel-8-3-2-4" class="section-heading"><a href="#kernel-8-3-2-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 8.3.2.4</span></h2><h3 id="fixed-bugs-and-malfunctions-45" class="section-heading"><a href="#fixed-bugs-and-malfunctions-45" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>gen_tcp:connect with socket address and socket (inet-) backend fails because
of missing callback function.</p><p>Own Id: OTP-18707 Aux Id: #7530</p></li></ul><h2 id="kernel-8-3-2-3" class="section-heading"><a href="#kernel-8-3-2-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 8.3.2.3</span></h2><h3 id="fixed-bugs-and-malfunctions-46" class="section-heading"><a href="#fixed-bugs-and-malfunctions-46" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Spec for function net:if_names/0 incorrect</p><p>Own Id: OTP-18296 Aux Id: OTP-16464</p></li><li><p>Missing ctrl option name transation for TOS and TTL (on FreeBSD) when using
gen_udp with the 'socket' inet_backend.</p><p>Own Id: OTP-18315</p></li><li><p>The tcp connect option 'bind_to_device' could not be used with inet_backend =
'socket'. 'inet' requires value type binarry() and 'socket' requires value
type 'string()'.</p><p>Own Id: OTP-18357 Aux Id: #6509</p></li><li><p>Minor issue processing options when calling gen_tcp:connect with a sockaddr()
and inet_backend = socket.</p><p>Own Id: OTP-18358 Aux Id: #6528</p></li></ul><h3 id="improvements-and-new-features-11" class="section-heading"><a href="#improvements-and-new-features-11" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Improve warning message format for gen_tcp_socket.</p><p>Own Id: OTP-18317</p></li></ul><h2 id="kernel-8-3-2-2" class="section-heading"><a href="#kernel-8-3-2-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 8.3.2.2</span></h2><h3 id="improvements-and-new-features-12" class="section-heading"><a href="#improvements-and-new-features-12" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>A new function <a href="global.html#disconnect/0"><code class="inline">global:disconnect/0</code></a> has been introduced with which one can
cleanly disconnect a node from all other nodes in a cluster of <code class="inline">global</code> nodes.</p><p>Own Id: OTP-18232 Aux Id: OTP-17843, PR-6264</p></li></ul><h2 id="kernel-8-3-2-1" class="section-heading"><a href="#kernel-8-3-2-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 8.3.2.1</span></h2><h3 id="fixed-bugs-and-malfunctions-47" class="section-heading"><a href="#fixed-bugs-and-malfunctions-47" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>A call to <a href="net_kernel.html#setopts/2"><code class="inline">net_kernel:setopts(new, Opts)</code></a> at the
same time as a connection was being set up could cause a deadlock between the
<code class="inline">net_kernel</code> process and the process setting up the connection.</p><p>Own Id: OTP-18198 Aux Id: GH-6129, PR-6216</p></li></ul><h2 id="kernel-8-3-2" class="section-heading"><a href="#kernel-8-3-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 8.3.2</span></h2><h3 id="fixed-bugs-and-malfunctions-48" class="section-heading"><a href="#fixed-bugs-and-malfunctions-48" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>inet:getopts/2 for the 'raw' option for a socket created with inet-backend
'socket' failed.</p><p>Own Id: OTP-18078 Aux Id: GH-5930</p></li><li><p>Corrected the behaviour of the shutdown function when using with the
inet_backend = socket. It was not sufficiently compatible with the &quot;old&quot;
gen_tcp.</p><p>Own Id: OTP-18080 Aux Id: GH-5930</p></li></ul><h2 id="kernel-8-3-1" class="section-heading"><a href="#kernel-8-3-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 8.3.1</span></h2><h3 id="fixed-bugs-and-malfunctions-49" class="section-heading"><a href="#fixed-bugs-and-malfunctions-49" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix failed accepted connection setup after previous established connection
from same node closed down silently.</p><p>Own Id: OTP-17979 Aux Id: ERIERL-780</p></li><li><p>Fixed a problem where typing Ctrl-R in the shell could hang if there were some
problem with the history log file.</p><p>Own Id: OTP-17981 Aux Id: PR-5791</p></li></ul><h2 id="kernel-8-3" class="section-heading"><a href="#kernel-8-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 8.3</span></h2><h3 id="fixed-bugs-and-malfunctions-50" class="section-heading"><a href="#fixed-bugs-and-malfunctions-50" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Handling of <code class="inline">send_timeout</code> for <code class="inline">gen_tcp</code> has been corrected so that the
timeout is honored also when sending 0 bytes.</p><p>Own Id: OTP-17840</p></li><li><p>By default <code class="inline">global</code> does <em>not</em> take any actions to restore a fully connected
network when connections are lost due to network issues. This is problematic
for all applications expecting a fully connected network to be provided, such
as for example <code class="inline">mnesia</code>, but also for <code class="inline">global</code> itself. A network of
overlapping partitions might cause the internal state of <code class="inline">global</code> to become
inconsistent. Such an inconsistency can remain even after such partitions have
been brought together to form a fully connected network again. The effect on
other applications that expects that a fully connected network is maintained
may vary, but they might misbehave in very subtle hard to detect ways during
such a partitioning.</p><p>In order to prevent such issues, we have introduced a <em>prevent overlapping
partitions</em> fix which can be enabled using the
<a href="kernel_app.html#prevent_overlapping_partitions"><code class="inline">prevent_overlapping_partitions</code></a>
<code class="inline">kernel(6)</code> parameter. When this fix has been enabled, <code class="inline">global</code> will actively
disconnect from nodes that reports that they have lost connections to other
nodes. This will cause fully connected partitions to form instead of leaving
the network in a state with overlapping partitions. Note that this fix <em>has</em>
to be enabled on <em>all</em> nodes in the network in order to work properly. Since
this quite substantially changes the behavior, this fix is currently disabled
by default. Since you might get hard to detect issues without this fix you
are, however, <em>strongly</em> advised to enable this fix in order to avoid issues
such as the ones described above. As of OTP 25 this fix will become enabled by
default.</p><p>Own Id: OTP-17843 Aux Id: ERIERL-732, PR-5611</p></li><li><p>Fix bug where <code class="inline">logger</code> would crash when logging a report including improper
lists.</p><p>Own Id: OTP-17851</p></li><li><p>Make <code class="inline">erlang:set_cookie</code> work for dynamic node names.</p><p>Own Id: OTP-17902 Aux Id: GH-5402, PR-5670</p></li></ul><h3 id="improvements-and-new-features-13" class="section-heading"><a href="#improvements-and-new-features-13" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Add support for using socket:sockaddr_in() and socket:sockaddr_in6() when
using gen_sctp, gen_tcp and gen_udp. This will make it possible to use Link
Local IPv6 addresses.</p><p>Own Id: OTP-17455 Aux Id: GH-4852</p></li><li><p>A <a href="kernel_app.html#net_tickintensity"><code class="inline">net_tickintensity</code></a> <code class="inline">kernel</code> parameter
has been introduced. It can be used to control the amount of ticks during a
<a href="kernel_app.html#net_ticktime"><code class="inline">net_ticktime</code></a> period.</p><p>A new <a href="net_kernel.html#start/2"><code class="inline">net_kernel:start/2</code></a> function has also been introduced in order to make
it easier to add new options. The use of <a href="net_kernel.html#start/1"><code class="inline">net_kernel:start/1</code></a> has been
deprecated.</p><p>Own Id: OTP-17905 Aux Id: ERIERL-732, PR-5740</p></li><li><p>Improve documentation for the dynamic node name feature.</p><p>Own Id: OTP-17918</p></li></ul><h2 id="kernel-8-2" class="section-heading"><a href="#kernel-8-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 8.2</span></h2><h3 id="fixed-bugs-and-malfunctions-51" class="section-heading"><a href="#fixed-bugs-and-malfunctions-51" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>socket:which_sockets( pid() ) uses wrong keyword when looking up socket owner
('ctrl' instead of 'owner').</p><p>Own Id: OTP-17716</p></li><li><p>In epmd_ntop, the #if defined(EPMD6) conditional was inverted and it was only
including the IPv6-specific code when EPMD6 was undefined. This was causing
IPv6 addrs to be interpreted as IPv4 addrs and generating nonsense IPv4
addresses as output.</p><p>Several places were incorrectly using 'num_sockets' instead of 'i' to index
into the iserv_addr array during error logging. This would result in a read
into uninitialized data in the iserv_addr array.</p><p>Thanks to John Eckersberg for providing this fix.</p><p>Own Id: OTP-17730</p></li><li><p>Minor fix of the <code class="inline">erl_uds_dist</code> distribution module example.</p><p>Own Id: OTP-17765 Aux Id: PR-5289</p></li><li><p>A bug has been fixed for the legacy TCP socket adaption module
<code class="inline">gen_tcp_socket</code> where it did bind to a socket address when given a file
descriptor, but should not.</p><p>Own Id: OTP-17793 Aux Id: PR-5348, OTP-17451, PR-4787, GH-4680, PR-2989,
OTP-17216</p></li><li><p>Improve the error printout when <a href="../../apps/erts/erlang.html#open_port/2"><code class="inline">open_port/2</code></a> fails because
of invalid arguments.</p><p>Own Id: OTP-17805 Aux Id: PR-5406</p></li><li><p>Calling socket:monitor/1 on an already closed socket should succeed and result
in an immediate DOWN message. This has now been fixed.</p><p>Own Id: OTP-17806</p></li><li><p>Fix the configuration option <code class="inline">logger_metadata</code> to work.</p><p>Own Id: OTP-17807 Aux Id: PR-5418</p></li><li><p>Fix tls and non-tls distribution to use erl_epmd:address_please to figure out
if IPv4 or IPv6 addresses should be used when connecting to the remote node.</p><p>Before this fix, a dns lookup of the remote node hostname determined which IP
version was to be used which meant that the hostname had to resolve to a valid
ip address.</p><p>Own Id: OTP-17809 Aux Id: PR-5337 GH-5334</p></li></ul><h3 id="improvements-and-new-features-14" class="section-heading"><a href="#improvements-and-new-features-14" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Add <a href="logger.html#reconfigure/0"><code class="inline">logger:reconfigure/0</code></a>.</p><p>Own Id: OTP-17375 Aux Id: PR-4663 PR-5186</p></li><li><p>Add socket function ioctl/2,3,4 for socket device control.</p><p>Own Id: OTP-17528</p></li><li><p>Add simple support for socknames/1 for gen_tcp_socket and gen_udp_socket.</p><p>Own Id: OTP-17531</p></li><li><p>The types for callback result types in <code class="inline">gen_statem</code> has bee augmented with
arity 2 types where it is possible for a callback module to specify the type
of the callback data, so the callback module can get type validation of it.</p><p>Own Id: OTP-17738 Aux Id: PR-4926, OTP-17589</p></li></ul><h2 id="kernel-8-1-3" class="section-heading"><a href="#kernel-8-1-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 8.1.3</span></h2><h3 id="fixed-bugs-and-malfunctions-52" class="section-heading"><a href="#fixed-bugs-and-malfunctions-52" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The internal, undocumented, but used, module <code class="inline">inet_dns</code> has been fixed to
handle mDNS high bit usage of the Class field.</p><p>Code that uses the previously obsolete, undocumented and unused record field
<code class="inline">#dns_rr.func</code> will need to be updated since that field is now used as a
boolean flag for the mDNS high Class bit. Code that uses the also undocumented
record <code class="inline">#dns_query</code> will need to be recompiled since a boolean field
<code class="inline">#dns_query.unicast_response</code> has been added for the mDNS high Class bit.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-17734 Aux Id: GH-5327, OTP-17659</p></li><li><p>The fix for Linux's behaviour when reconnecting an UDP socket in PR-5120
released in OTP-24.1.2 has been refined to only dissolve the socket's
connection before a connect if the socket is already connected, that is: only
for a reconnect.</p><p>This allows code to open a socket with an ephemeral port, get the port number
and connect; without the port number changing (on Linux). This turned out to
have at least one valid use case (besides test cases).</p><p>Should one reconnect the socket then the port number may change, on Linux; it
is a known quirk, which can be worked around by binding to a specific port
number when opening the socket. If you can do without an ephemeral port, that
is...</p><p>Own Id: OTP-17736 Aux Id: GH-5279, PR-5120, OTP-17559</p></li></ul><h2 id="kernel-8-1-2" class="section-heading"><a href="#kernel-8-1-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 8.1.2</span></h2><h3 id="fixed-bugs-and-malfunctions-53" class="section-heading"><a href="#fixed-bugs-and-malfunctions-53" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The undocumented DNS encode/decode module <code class="inline">inet_dns</code> has been cleaned up to
handle the difference between &quot;symbolic&quot; and &quot;raw&quot; records in a more
consistent manner.</p><p>PR-5145/OTP-17584 introduced a change that contributed to an already existing
confusion, which this correction should remedy.</p><p>Own Id: OTP-17659 Aux Id: ERIERL-702</p></li></ul><h2 id="kernel-8-1-1" class="section-heading"><a href="#kernel-8-1-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 8.1.1</span></h2><h3 id="fixed-bugs-and-malfunctions-54" class="section-heading"><a href="#fixed-bugs-and-malfunctions-54" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Add more info about the socket 'type' ('socket' or 'port') for the DOWN
message when monitoring sockets.</p><p>Own Id: OTP-17640</p></li></ul><h2 id="kernel-8-1" class="section-heading"><a href="#kernel-8-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 8.1</span></h2><h3 id="fixed-bugs-and-malfunctions-55" class="section-heading"><a href="#fixed-bugs-and-malfunctions-55" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The extended error information has been corrected and improved for the
following BIFs: <a href="../../apps/erts/erlang.html#binary_to_existing_atom/2"><code class="inline">binary_to_existing_atom/2</code></a>,
<a href="../../apps/erts/erlang.html#list_to_existing_atom/1"><code class="inline">list_to_existing_atom/1</code></a>,
<code class="inline">erlang:send_after/{3,4}</code>, and <code class="inline">erlang:start_timer/{3,4}</code>.</p><p>Own Id: OTP-17449 Aux Id: GH-4900</p></li><li><p>Fixed rare bug that could cause net_kernel process to hang for ever. Have seen
to happen with massive number of TLS connections while remote nodes are
restarting. Bug exists since OTP-22.0.</p><p>Own Id: OTP-17476 Aux Id: GH-4931, PR-4934</p></li><li><p>Improve handling of closed sockets for inet:info/1.</p><p>Own Id: OTP-17492</p></li><li><p>This change fixes a performance problem introduced in pull-request #2675.
Pull-request #2675 made so the system tried to start children of already
started applications which is unnecessary. This change fixes this performance
problem.</p><p>Own Id: OTP-17519</p></li><li><p>Fix code:get_doc/1 to not crash when module is located in an escript.</p><p>Own Id: OTP-17570 Aux Id: PR-5139 GH-4256 ERL-1261</p></li><li><p>Parsing of the result value in the native DNS resolver has been made more
defensive against incorrect results.</p><p>Own Id: OTP-17578 Aux Id: ERIERL-683</p></li><li><p>A bug in the option handling for the legacy socket adaptor, that is; when
using <code class="inline">inet_backend = socket</code>, has been fixed. Now socket options are set
before the bind() call so options regarding, for example address reuse have
the desired effect.</p><p>Own Id: OTP-17580 Aux Id: GH-5122</p></li><li><p><a href="inet.html#ntoa/1"><code class="inline">inet:ntoa/1</code></a> has been fixed to not accept invalid numerical addresses.</p><p>Own Id: OTP-17583 Aux Id: GH-5136</p></li><li><p>Parsing of DNS records has been improved for records of known types to not
accept and present malformed ones in raw format.</p><p>Own Id: OTP-17584 Aux Id: PR-5145</p></li><li><p>The <code class="inline">ip_mreq()</code> type for the <code class="inline">{ip,add_membership}</code> and <code class="inline">{ip,drop_membership}</code>
socket options has been corrected to have an <code class="inline">interface</code> field instead of,
incorrectly, an <code class="inline">address</code> field.</p><p>Own Id: OTP-17590 Aux Id: PR-5170</p></li></ul><h3 id="improvements-and-new-features-15" class="section-heading"><a href="#improvements-and-new-features-15" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Add simple utility function to display existing sockets i the erlang shell
(socket:i/0).</p><p>Own Id: OTP-17376 Aux Id: OTP-17157</p></li><li><p>gen_udp can now be configured to use the socket inet-backend (in the same way
as gen_tcp).</p><p>Own Id: OTP-17410</p></li><li><p>Functions <code class="inline">erlang:set_cookie(Cookie)</code> and <code class="inline">erlang:get_cookie(Node)</code> have been
added for completeness and to facilitate configuring distributed nodes with
different cookies.</p><p>The documentation regarding distribution cookies has been improved to be less
vague.</p><p>Own Id: OTP-17538 Aux Id: GH-5063, PR-5111</p></li><li><p>A workaround has been implemented for Linux's quirky behaviour to not adjust
the source IP address when connecting a connected (reconnecing) UDP socket.</p><p>The workaround is to, on Linux, always dissolve any connection before
connecting an UDP socket.</p><p>Own Id: OTP-17559 Aux Id: GH-5092, PR-5120</p></li><li><p>Documented our recommendation against opening NFS-mounted files, FIFOs,
devices, and similar using <a href="file.html#open/2"><code class="inline">file:open/2</code></a>.</p><p>Own Id: OTP-17576 Aux Id: ERIERL-685</p></li></ul><h2 id="kernel-8-0-2" class="section-heading"><a href="#kernel-8-0-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 8.0.2</span></h2><h3 id="fixed-bugs-and-malfunctions-56" class="section-heading"><a href="#fixed-bugs-and-malfunctions-56" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>For <code class="inline">gen_tcp:connect/3,4</code> it is possible to specify a specific source port,
which should be enough to bind the socket to an address with that port before
connecting.</p><p>Unfortunately that feature was lost in OTP-17216 that made it mandatory to
specify the source address to get an address binding, and ignored a specified
source port if no source address was specified.</p><p>That bug has now been corrected.</p><p>Own Id: OTP-17536 Aux Id: OTP-17216, ERIERL-677</p></li></ul><h2 id="kernel-8-0-1" class="section-heading"><a href="#kernel-8-0-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 8.0.1</span></h2><h3 id="fixed-bugs-and-malfunctions-57" class="section-heading"><a href="#fixed-bugs-and-malfunctions-57" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix a race condition in Global.</p><p>Own Id: OTP-16033 Aux Id: ERIERL-329, ERL-1414, GH-4448, ERL-885, GH-3923</p></li><li><p>After a node restart with <code class="inline">init:restart/0,1</code>, the module <code class="inline">socket</code> was not
usable because supporting tables had been cleared and not re-initialized. This
has now been fixed.</p><p>Handling of the &quot;.&quot; domain as a search domain was incorrect and caused a crash
in the DNS resolver <code class="inline">inet_res</code>, which has now been fixed.</p><p>Own Id: OTP-17439 Aux Id: GH-4827, PR-4888, GH-4838</p></li><li><p>Handling of combinations of the <code class="inline">fd</code> option and binding to an address has been
corrected, especially for the <code class="inline">local</code> address family.</p><p>Own Id: OTP-17451 Aux Id: OTP-17374</p></li><li><p>Bug fixes and code cleanup for the new <code class="inline">socket</code> implementation, such as:</p><p>Assertions on the result of demonitoring has been added in the NIF code, where
appropriate.</p><p>Internal state handling for socket close in the NIF code has been reviewed.</p><p>Looping over <code class="inline">close()</code> for <code class="inline">EINTR</code> in the NIF code has been removed, since it
is strongly discouraged on Linux and Posix is not clear about if it is
allowed.</p><p>The <code class="inline">inet_backend</code> temporary socket option for legacy <code class="inline">gen_tcp</code> sockets has
been documented.</p><p>The return value from <a href="net.html#getaddrinfo/2"><code class="inline">net:getaddrinfo/2</code></a> has been corrected: the <code class="inline">protocol</code>
field is now an <a href="../../apps/erts/erlang.html#t:atom/0"><code class="inline">atom/0</code></a>, instead of, incorrectly,
<a href="../../apps/erts/erlang.html#t:list/1"><code class="inline">list(atom())</code></a>. The documentation has also been corrected about
this return type.</p><p>Deferred close of a <code class="inline">socket:sendfile/*</code> file was broken and has been
corrected.</p><p>Some debug code, not enabled by default, in the socket NIF has been corrected
to not accidentally core dump for debug printouts of more or less innocent
events.</p><p>Own Id: OTP-17452</p></li></ul><h2 id="kernel-8-0" class="section-heading"><a href="#kernel-8-0" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 8.0</span></h2><h3 id="fixed-bugs-and-malfunctions-58" class="section-heading"><a href="#fixed-bugs-and-malfunctions-58" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>A bug has been fixed for the internal <code class="inline">inet_res</code> resolver cache that handled a
resolver configuration file status timer incorrectly and caused performance
problems due to many unnecessary file system accesses.</p><p>Own Id: OTP-14700 Aux Id: PR-2848</p></li><li><p>Change the value of the tag <code class="inline">head</code> returned by <a href="disk_log.html#info/1"><code class="inline">disk_log:info/1</code></a> from
<code class="inline">{ok, Head}</code> to just <code class="inline">Head</code>.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-16809 Aux Id: ERL-1313</p></li><li><p>Two options have been added to <code class="inline">erl_call</code>. The <code class="inline">-fetch_stdout</code> option fetches
stdout data resulting from the code invoked by <code class="inline">erl_call</code>. The <code class="inline">-fetch_stdout</code>
option disables printing of the result term. In order to implement the first
of these two options a new function called <code class="inline">ei_xrpc_from</code> has been added to
erl_interface. For details see the <code class="inline">erl_call</code> documentation and
<code class="inline">erl_interface</code> documentation.</p><p>Own Id: OTP-17132</p></li><li><p>Missing runtime dependencies has been added to this application.</p><p>Own Id: OTP-17243 Aux Id: PR-4557</p></li><li><p><a href="inet.html#get_rc/0"><code class="inline">inet:get_rc/0</code></a> has been corrected to return host entries as separate entries
instead of (incorrectly) in a list within the list. This bug was introduced by
OTP-16487 in OTP-23.0-rc1.</p><p>Own Id: OTP-17262 Aux Id: GH-4588, PR-4604, OTP-16487</p></li><li><p>The type gen_tcp:option_name() had a duplicate pktoptions value.</p><p>Own Id: OTP-17277</p></li><li><p>Fixed removal of empty groups from internal state in <code class="inline">pg</code>.</p><p>Own Id: OTP-17286 Aux Id: PR-4619</p></li><li><p><code class="inline">erl -remsh</code> now prints an error message when it fails to connect to the
remote node.</p><p>Own Id: OTP-17287 Aux Id: PR-4581</p></li><li><p>Fix bugs related to corrupt shell history files.</p><p>Error messages printed by shell history are now logged as logger error reports
instead of written to standard error.</p><p>Own Id: OTP-17288 Aux Id: PR-4581</p></li><li><p>A logger warning is now issues when too many arguments are given to <code class="inline">-name</code> or
<code class="inline">-sname</code>. Example: <code class="inline">erl -name a b</code>.</p><p>Own Id: OTP-17315 Aux Id: GH-4626</p></li><li><p>The cache used by <code class="inline">inet_res</code> now, again, can handle multiple IP addresses per
domain name, and thus fixes a bug introduced in PR-3041 (OTP-13126) and
PR-2891 (OTP-14485).</p><p>Own Id: OTP-17344 Aux Id: PR-4633, GH-4631, OTP-14485, OTP-12136</p></li><li><p>Sockets created with socket:accept not counted (socket:info/0).</p><p>Own Id: OTP-17372</p></li><li><p>The <code class="inline">{fd, Fd}</code> option to <a href="gen_tcp.html#listen/2"><code class="inline">gen_tcp:listen/2</code></a> did not work for <code class="inline">inet_backend</code>
<code class="inline">socket</code>, which has been fixed.</p><p>Own Id: OTP-17374 Aux Id: PR-4787, GH-4680, PR-2989, OTP-17216</p></li></ul><h3 id="improvements-and-new-features-16" class="section-heading"><a href="#improvements-and-new-features-16" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>The cache used by the DNS resolver <code class="inline">inet_res</code> has been improved to use ETS
lookups instead of server calls. This is a considerable speed improvement for
cache hits.</p><p>Own Id: OTP-13126 Aux Id: PR-3041</p></li><li><p>The cache ETS table type for the internal DNS resolver <code class="inline">inet_res</code> has changed
type (internally) to get better speed and atomicity.</p><p>Own Id: OTP-14485 Aux Id: PR-2891</p></li><li><p>The experimental <code class="inline">socket</code> module can now use any protocol (by name) the OS
supports. Suggested in PR-2641, implemented in PR-2670.</p><p>Own Id: OTP-14601 Aux Id: PR-2641, PR-2670, OTP-16749</p></li><li><p>The DNS resolver <code class="inline">inet_res</code> has been updated to support CAA (RFC 6844) and URI
(RFC 7553) records.</p><p>Own Id: OTP-16517 Aux Id: PR-2827</p></li><li><p>A compatibility adaptor for <code class="inline">gen_tcp</code> to use the new <code class="inline">socket</code> API has been
implemented (<code class="inline">gen_tcp_socket</code>). Used when setting the kernel application
variable <code class="inline">inet_backend = socket</code>.</p><p>Own Id: OTP-16611 Aux Id: OTP-16749</p></li><li><p>Extended error information for failing BIF calls as proposed in
<a href="https://github.com/erlang/eep/blob/master/eeps/eep-0054.md">EEP 54</a> has been
implemented.</p><p>When a BIF call from the Erlang shell fails, more information about which
argument or arguments that were in error will be printed. The same extended
error information will by <code class="inline">proc_lib</code>, <code class="inline">common_test</code>, and <code class="inline">qlc</code> when BIF calls
fail.</p><p>For applications that wish to provide the same extended error information,
there are new functions <a href="../../apps/stdlib/erl_error.html#format_exception/3"><code class="inline">erl_error:format_exception/3</code></a> and
<a href="../../apps/stdlib/erl_error.html#format_exception/4"><code class="inline">erl_error:format_exception/4</code></a>.</p><p>There is a new <a href="../../apps/erts/erlang.html#error/3"><code class="inline">error/3</code></a> BIF that allows applications or
libraries to provide extended error information in the same way for their own
exceptions.</p><p>Own Id: OTP-16686</p></li><li><p>The file server can now be bypassed in <code class="inline">file:delete/1,2</code> with the <code class="inline">raw</code>
option.</p><p>Own Id: OTP-16698 Aux Id: PR-2634</p></li><li><p>An example implementation of Erlang distribution over UDS using distribution
processes has been introduced.</p><p>Thanks to Jérôme de Bretagne</p><p>Own Id: OTP-16703 Aux Id: PR-2620</p></li><li><p>The <a href="../../system/ref_man_processes.html#process-aliases"><em>process alias</em></a> feature
as outlined by
<a href="https://github.com/erlang/eep/blob/master/eeps/eep-0053.md">EEP 53</a> has been
introduced. It is introduced in order to provide a lightweight mechanism that
can prevent late replies after timeout or connection loss. For more
information, see EEP 53 and the documentation of the new
<a href="../../apps/erts/erlang.html#alias/1"><code class="inline">alias/1</code></a> BIF and the new options to the
<a href="../../apps/erts/erlang.html#monitor/3"><code class="inline">monitor/3</code></a> BIF.</p><p>The <code class="inline">call</code> operation in the framework used by <code class="inline">gen_server</code>, <code class="inline">gen_statem</code>, and
<code class="inline">gen_event</code> has been updated to utilize alias in order to prevent late
responses. The <code class="inline">gen_statem</code> behavior still use a proxy process in the
distributed case, since it has always prevented late replies and aliases won't
work against pre OTP 24 nodes. The proxy process can be removed in OTP 26.</p><p>The alias feature also made it possible to introduce new functions similar to
the <a href="erpc.html#receive_response/2"><code class="inline">erpc:receive_response()</code></a> function in the gen
behaviors, so the new functions
<a href="../../apps/stdlib/gen_server.html#receive_response/2"><code class="inline">gen_server:receive_response()</code></a>,
<a href="../../apps/stdlib/gen_statem.html#receive_response/2"><code class="inline">gen_statem:receive_response()</code></a>,
<a href="../../apps/stdlib/gen_event.html#receive_response/2"><code class="inline">gen_event:receive_response()</code></a> have also
been introduced.</p><p>Own Id: OTP-16718 Aux Id: PR-2735</p></li><li><p>The experimental new socket API has been further developed. Some backwards
incompatible changes with respect to OTP 23 have been made.</p><p>The control message format has been changed so a decoded value is now in the
'value' field instead of in the 'data' field. The 'data' field now always
contains binary data.</p><p>Some type names have been changed regarding message headers and control
message headers.</p><p><a href="socket.html#bind/2"><code class="inline">socket:bind/2</code></a> now returns plain <code class="inline">ok</code> instead of <code class="inline">{ok, Port}</code> which was only
relevant for the <code class="inline">inet</code> and <code class="inline">inet6</code> address families and often not
interesting. To find out which port was chosen use <a href="socket.html#sockname/1"><code class="inline">socket:sockname/1</code></a>.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-16749 Aux Id: OTP-14601</p></li><li><p>New function <a href="os.html#env/0"><code class="inline">os:env/0</code></a> returns all OS environment variables as a list of
2-tuples.</p><p>Own Id: OTP-16793 Aux Id: ERL-1332, PR-2740</p></li><li><p>Remove the support for distributed disk logs. The new function
<a href="disk_log.html#all/0"><code class="inline">disk_log:all/0</code></a> is to be used instead of <code class="inline">disk_log:accessible_logs/0</code>. The
function <a href="disk_log.html#close/1"><code class="inline">disk_log:close/1</code></a> is to be used instead of <code class="inline">disk_log:lclose/1,2</code>.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-16811</p></li><li><p>Expand the spec for <a href="erl_epmd.html#listen_port_please/2"><code class="inline">erl_epmd:listen_port_please/2</code></a> to mirror
<a href="erl_epmd.html#port_please/2"><code class="inline">erl_epmd:port_please/2</code></a>.</p><p>Own Id: OTP-16947 Aux Id: PR-2781</p></li><li><p>A new erl parameter for specifying a file descriptor with configuration data
has been added. This makes it possible to pass the parameter &quot;-configfd FD&quot;
when executing the erl command. When this option is given, the system will try
to read and parse configuration parameters from the file descriptor.</p><p>Own Id: OTP-16952</p></li><li><p>The experimental HiPE application has been removed, together with all related
functionality in other applications.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-16963</p></li><li><p>The <code class="inline">pg2</code> module has been removed.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-16968</p></li><li><p>Accept references up to a size of 160-bits from remote nodes. This is the
first step in an upgrade path toward using references up to 160-bits in a
future OTP release.</p><p>Own Id: OTP-17005 Aux Id: OTP-16718</p></li><li><p>Allow utf-8 binaries as parts of logger_formatter template.</p><p>Own Id: OTP-17015</p></li><li><p>Let <a href="disk_log.html#open/1"><code class="inline">disk_log:open/1</code></a> change the size if a wrap log is opened for the first
time, that is, the disk log process does not exist, and the value of option
<code class="inline">size</code> does not match the current size of the disk log.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-17062 Aux Id: ERL-1418, GH-4469, ERIERL-537</p></li><li><p>Allow the shell history of an erlang node to be fetched and stores using a
custom callback module. See <code class="inline">shell_history</code> configuration parameter in the
<a href="kernel_app.html">kernel documentation</a> for more details.</p><p>Own Id: OTP-17103 Aux Id: PR-2949</p></li><li><p>The simple logger (used to log events that happen before kernel has been
started) has been improved to print prettier error messages.</p><p>Own Id: OTP-17106 Aux Id: PR-2885</p></li><li><p><code class="inline">socket:sendfile/2,3,4,5</code> has been implemented, for platforms that support the
underlying socket library call.</p><p>Own Id: OTP-17154 Aux Id: OTP-16749</p></li><li><p>Add socket monitor(s) for all types sockets.</p><p>Own Id: OTP-17155</p></li><li><p>Fix various issues with the gen_tcp_socket. Including documenting some
incompatibilities.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-17156</p></li><li><p>inet:i/0 now also shows existing gen_tcp compatibility sockets (based on
'socket').</p><p>Own Id: OTP-17157</p></li><li><p>Added support in logger for setting primary metadata. The primary metadata is
passed as a base metadata to all log events in the system. See
<a href="logger_chapter.html#metadata">Metadata</a> in the Logger chapter of the Kernel
User's Guide for more details.</p><p>Own Id: OTP-17181 Aux Id: PR-2457</p></li><li><p>Recognize new key 'optional_applications' in application resource files.</p><p>Own Id: OTP-17189 Aux Id: PR-2675</p></li><li><p>The <code class="inline">Fun</code>'s passed to logger:log/2,3,4 can now return metadata that will only
be fetched when needed. See <a href="logger.html#log/2"><code class="inline">logger:log/2,3,4</code></a> for more
details.</p><p>Own Id: OTP-17198 Aux Id: PR-2721</p></li><li><p><code class="inline">erpc:multicall()</code> has been rewritten to be able to utilize the newly
introduced and improved selective receive optimization.</p><p>Own Id: OTP-17201 Aux Id: PR-4534</p></li><li><p>Add utility fiunction inet:info/1 to provide miscellaneous info about a
socket.</p><p>Own Id: OTP-17203 Aux Id: OTP-17156</p></li><li><p>The behaviour for <code class="inline">gen_tcp:connect/3,4</code> has been changed to not per default
bind to an address, which allows the network stack to delay the address and
port selection to when the remote address is known. This allows better port
re-use, and thus enables far more outgoing connections, since the ephemeral
port range no longer has to be a hard limit.</p><p>There is a theoretical possibility that this behaviour change can affect the
set of possible error values, or have other small implications on some
platforms.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-17216 Aux Id: PR-2989</p></li><li><p>An option <code class="inline">{nxdomain_reply, boolean()}</code> has been implemented in the DNS
resolver <code class="inline">inet_res</code>. It is useful since an <code class="inline">nxdomain</code> error from a name server
does contain the SOA record if the domain exists at all. This record is useful
to determine a TTL for negative caching of the failed entry.</p><p>Own Id: OTP-17266 Aux Id: PR-4564</p></li><li><p>Optimized lookup of local processes part of groups in <code class="inline">pg</code>.</p><p>Own Id: OTP-17284 Aux Id: PR-4615</p></li><li><p>The return values from module <code class="inline">socket</code> functions <code class="inline">send()</code>, <code class="inline">sendto()</code>,
<code class="inline">sendmsg()</code>, <code class="inline">sendfile()</code> and <code class="inline">recv()</code> has been changed to return a tuple
tagged with <code class="inline">select</code> when a <code class="inline">SelectInfo</code> was returned, and not sometimes
tagged with <code class="inline">ok</code>.</p><p>This is a backwards incompatible change that improves usability for code using
asynchronous operations.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-17355 Aux Id: OTP-17154</p></li><li><p>Fixed warnings in code matching on underscore prefixed variables.</p><p>Own Id: OTP-17385 Aux Id: OTP-17123</p></li></ul><h2 id="kernel-7-3-1-7" class="section-heading"><a href="#kernel-7-3-1-7" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 7.3.1.7</span></h2><h3 id="improvements-and-new-features-17" class="section-heading"><a href="#improvements-and-new-features-17" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>A new function <a href="global.html#disconnect/0"><code class="inline">global:disconnect/0</code></a> has been introduced with which one can
cleanly disconnect a node from all other nodes in a cluster of <code class="inline">global</code> nodes.</p><p>Own Id: OTP-18232 Aux Id: OTP-17843, PR-6264</p></li></ul><h2 id="kernel-7-3-1-6" class="section-heading"><a href="#kernel-7-3-1-6" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 7.3.1.6</span></h2><h3 id="fixed-bugs-and-malfunctions-59" class="section-heading"><a href="#fixed-bugs-and-malfunctions-59" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>A call to <a href="net_kernel.html#setopts/2"><code class="inline">net_kernel:setopts(new, Opts)</code></a> at the
same time as a connection was being set up could cause a deadlock between the
<code class="inline">net_kernel</code> process and the process setting up the connection.</p><p>Own Id: OTP-18198 Aux Id: GH-6129, PR-6216</p></li></ul><h2 id="kernel-7-3-1-5" class="section-heading"><a href="#kernel-7-3-1-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 7.3.1.5</span></h2><h3 id="fixed-bugs-and-malfunctions-60" class="section-heading"><a href="#fixed-bugs-and-malfunctions-60" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>By default <code class="inline">global</code> does <em>not</em> take any actions to restore a fully connected
network when connections are lost due to network issues. This is problematic
for all applications expecting a fully connected network to be provided, such
as for example <code class="inline">mnesia</code>, but also for <code class="inline">global</code> itself. A network of
overlapping partitions might cause the internal state of <code class="inline">global</code> to become
inconsistent. Such an inconsistency can remain even after such partitions have
been brought together to form a fully connected network again. The effect on
other applications that expects that a fully connected network is maintained
may vary, but they might misbehave in very subtle hard to detect ways during
such a partitioning.</p><p>In order to prevent such issues, we have introduced a <em>prevent overlapping
partitions</em> fix which can be enabled using the
<a href="kernel_app.html#prevent_overlapping_partitions"><code class="inline">prevent_overlapping_partitions</code></a>
<code class="inline">kernel(6)</code> parameter. When this fix has been enabled, <code class="inline">global</code> will actively
disconnect from nodes that reports that they have lost connections to other
nodes. This will cause fully connected partitions to form instead of leaving
the network in a state with overlapping partitions. Note that this fix <em>has</em>
to be enabled on <em>all</em> nodes in the network in order to work properly. Since
this quite substantially changes the behavior, this fix is currently disabled
by default. Since you might get hard to detect issues without this fix you
are, however, <em>strongly</em> advised to enable this fix in order to avoid issues
such as the ones described above. As of OTP 25 this fix will become enabled by
default.</p><p>Own Id: OTP-17843 Aux Id: ERIERL-732, PR-5611</p></li><li><p>Fix failed accepted connection setup after previous established connection
from same node closed down silently.</p><p>Own Id: OTP-17979 Aux Id: ERIERL-780</p></li></ul><h3 id="improvements-and-new-features-18" class="section-heading"><a href="#improvements-and-new-features-18" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>A <a href="kernel_app.html#net_tickintensity"><code class="inline">net_tickintensity</code></a> <code class="inline">kernel</code> parameter
has been introduced. It can be used to control the amount of ticks during a
<a href="kernel_app.html#net_ticktime"><code class="inline">net_ticktime</code></a> period.</p><p>A new <a href="net_kernel.html#start/2"><code class="inline">net_kernel:start/2</code></a> function has also been introduced in order to make
it easier to add new options. The use of <a href="net_kernel.html#start/1"><code class="inline">net_kernel:start/1</code></a> has been
deprecated.</p><p>Own Id: OTP-17905 Aux Id: ERIERL-732, PR-5740</p></li></ul><h2 id="kernel-7-3-1-4" class="section-heading"><a href="#kernel-7-3-1-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 7.3.1.4</span></h2><h3 id="fixed-bugs-and-malfunctions-61" class="section-heading"><a href="#fixed-bugs-and-malfunctions-61" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Parsing of the result value in the native DNS resolver has been made more
defensive against incorrect results.</p><p>Own Id: OTP-17578 Aux Id: ERIERL-683</p></li></ul><h2 id="kernel-7-3-1-3" class="section-heading"><a href="#kernel-7-3-1-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 7.3.1.3</span></h2><h3 id="fixed-bugs-and-malfunctions-62" class="section-heading"><a href="#fixed-bugs-and-malfunctions-62" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix code:get_doc/1 to not crash when module is located in an escript.</p><p>Own Id: OTP-17570 Aux Id: PR-5139 GH-4256 ERL-1261</p></li></ul><h2 id="kernel-7-3-1-2" class="section-heading"><a href="#kernel-7-3-1-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 7.3.1.2</span></h2><h3 id="fixed-bugs-and-malfunctions-63" class="section-heading"><a href="#fixed-bugs-and-malfunctions-63" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Handling of the &quot;.&quot; domain as a search domain was incorrect and caused a crash
in the DNS resolver <code class="inline">inet_res</code>, which has now been fixed.</p><p>Own Id: OTP-17473 Aux Id: GH-4838, OTP-17439</p></li><li><p>Fixed rare bug that could cause net_kernel process to hang for ever. Have seen
to happen with massive number of TLS connections while remote nodes are
restarting. Bug exists since OTP-22.0.</p><p>Own Id: OTP-17476 Aux Id: GH-4931, PR-4934</p></li></ul><h2 id="kernel-7-3-1-1" class="section-heading"><a href="#kernel-7-3-1-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 7.3.1.1</span></h2><h3 id="fixed-bugs-and-malfunctions-64" class="section-heading"><a href="#fixed-bugs-and-malfunctions-64" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix a race condition in Global.</p><p>Own Id: OTP-16033 Aux Id: ERIERL-329, ERL-1414, GH-4448, ERL-885, GH-3923</p></li></ul><h2 id="kernel-7-3-1" class="section-heading"><a href="#kernel-7-3-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 7.3.1</span></h2><h3 id="fixed-bugs-and-malfunctions-65" class="section-heading"><a href="#fixed-bugs-and-malfunctions-65" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>A bug in the Erlang DNS resolver has been fixed, where it could be made to
bring down the kernel supervisor and thereby the whole node, when getting an
incorrect (IN A reply to an IN CNAME query) reply from the DNS server and used
the reply record's value without verifying its type.</p><p>Own Id: OTP-17361</p></li></ul><h2 id="kernel-7-3" class="section-heading"><a href="#kernel-7-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 7.3</span></h2><h3 id="fixed-bugs-and-malfunctions-66" class="section-heading"><a href="#fixed-bugs-and-malfunctions-66" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The range check for compression pointers in DNS encoding was faulty, which
caused incorrect label compression encoding for very large DNS messages;
larger than about 16 kBytes, such as AXFR responses. This more than 11 year
old bug has now been corrected.</p><p>Own Id: OTP-13641 Aux Id: PR-2959</p></li><li><p>Fix of internal links in the <code class="inline">erpc</code> documentation.</p><p>Own Id: OTP-17202 Aux Id: PR-4516</p></li><li><p>Fix bug where complex seq_trace tokens (that is lists, tuples, maps etc) could
becomes corrupted by the GC. The bug was introduced in OTP-21.</p><p>Own Id: OTP-17209 Aux Id: PR-3039</p></li><li><p>When running Xref in the <code class="inline">modules</code> mode, the Debugger application would show
up as a dependency for the Kernel applications.</p><p>Own Id: OTP-17223 Aux Id: GH-4546, PR-4554</p></li></ul><h3 id="improvements-and-new-features-19" class="section-heading"><a href="#improvements-and-new-features-19" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p><a href="erl_epmd.html"><code class="inline">erl_epmd</code></a> (the epmd client) will now try to reconnect to the local EPMD if
the connection is broken.</p><p>Own Id: OTP-17178 Aux Id: PR-3003</p></li></ul><h2 id="kernel-7-2-1" class="section-heading"><a href="#kernel-7-2-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 7.2.1</span></h2><h3 id="fixed-bugs-and-malfunctions-67" class="section-heading"><a href="#fixed-bugs-and-malfunctions-67" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>When using the DNS resolver option <code class="inline">servfail_retry_timeout</code> it did not honour
the overall call time-out in e.g <a href="inet_res.html#getbyname/3"><code class="inline">inet_res:getbyname/3</code></a>. This misbehaviour has
now been fixed. Also, the <code class="inline">servfail_retry_timeout</code> behaviour has been improved
to only be enforced for servers that gives a servfail answer.</p><p>Own Id: OTP-12960 Aux Id: ERIERL-598, PR-4509</p></li></ul><h2 id="kernel-7-2" class="section-heading"><a href="#kernel-7-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 7.2</span></h2><h3 id="fixed-bugs-and-malfunctions-68" class="section-heading"><a href="#fixed-bugs-and-malfunctions-68" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The <code class="inline">apply</code> call's in <code class="inline">logger.hrl</code> are now called with <code class="inline">erlang</code> prefix to
avoid clashed with local <a href="../../apps/erts/erlang.html#apply/3"><code class="inline">apply/3</code></a> functions.</p><p>Own Id: OTP-16976 Aux Id: PR-2807</p></li><li><p>Fix memory leak in <code class="inline">pg</code>.</p><p>Own Id: OTP-17034 Aux Id: PR-2866</p></li><li><p>Fix crash in <code class="inline">logger_proxy</code> due to stray <code class="inline">gen_server:call</code> replies not being
handled. The stray replies come when logger is under heavy load and the flow
control mechanism is reaching its limit.</p><p>Own Id: OTP-17038</p></li><li><p>Fixed a bug in <code class="inline">erl_epmd:names()</code> that caused it to return the illegal return
value <code class="inline">noport</code> instead of <code class="inline">{error, Reason}</code> where <code class="inline">Reason</code> is the actual error
reason. This bug also propagated to <code class="inline">net_adm:names()</code>.</p><p>This bug was introduced in <code class="inline">kernel</code> version 7.1 (OTP 23.1).</p><p>Own Id: OTP-17054 Aux Id: ERL-1424</p></li></ul><h3 id="improvements-and-new-features-20" class="section-heading"><a href="#improvements-and-new-features-20" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Add export of some resolver documented types.</p><p>Own Id: OTP-16954 Aux Id: ERIERL-544</p></li><li><p>Add configurable retry timeout for resolver lookups.</p><p>Own Id: OTP-16956 Aux Id: ERIERL-547</p></li><li><p><code class="inline">gen_server:multi_call()</code> has been optimized in the special case of only
calling the local node with timeout set to <code class="inline">infinity</code>.</p><p>Own Id: OTP-17058 Aux Id: PR-2887</p></li></ul><h2 id="kernel-7-1" class="section-heading"><a href="#kernel-7-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 7.1</span></h2><h3 id="fixed-bugs-and-malfunctions-69" class="section-heading"><a href="#fixed-bugs-and-malfunctions-69" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>A fallback has been implemented for file:sendfile when using inet_backend
socket</p><p>Own Id: OTP-15187 Aux Id: ERL-1293</p></li><li><p>Make default TCP distribution honour option <code class="inline">backlog</code> in
<code class="inline">inet_dist_listen_options</code>.</p><p>Own Id: OTP-16694 Aux Id: PR-2625</p></li><li><p>Raw option handling for the experimental <code class="inline">gen_tcp_socket</code> backend was broken
so that all raw options were ignored by for example <a href="gen_tcp.html#listen/2"><code class="inline">gen_tcp:listen/2</code></a>, a bug
that now has been fixed. Reported by Jan Uhlig.</p><p>Own Id: OTP-16743 Aux Id: ERL-1287</p></li><li><p>Accept fails with inet-backend socket.</p><p>Own Id: OTP-16748 Aux Id: ERL-1284</p></li><li><p>Fixed various minor errors in the socket backend of gen_tcp.</p><p>Own Id: OTP-16754</p></li><li><p>Correct <a href="disk_log.html#truncate/1"><code class="inline">disk_log:truncate/1</code></a> to count the header. Also correct the
documentation to state that <a href="disk_log.html#truncate/1"><code class="inline">disk_log:truncate/1</code></a> can be used with external
disk logs.</p><p>Own Id: OTP-16768 Aux Id: ERL-1312</p></li><li><p>Fix erl_epmd:port_please/2,3 type specs to include all possible error values.</p><p>Own Id: OTP-16783</p></li><li><p>Fix <code class="inline">erl -erl_epmd_port</code> to work properly. Before this fix it did not work at
all.</p><p>Own Id: OTP-16785</p></li><li><p>Fix typespec for internal function <code class="inline">erlang:seq_trace_info/1</code> to allow
<a href="../../apps/erts/erlang.html#t:term/0"><code class="inline">term/0</code></a> as returned label. This in turn fixes so that calls to
<a href="seq_trace.html#get_token/1"><code class="inline">seq_trace:get_token/1</code></a> can be correctly analyzer by dialyzer.</p><p>Own Id: OTP-16823 Aux Id: PR-2722</p></li><li><p>Fix erroneous double registration of processes in <code class="inline">pg</code> when distribution is
dynamically started.</p><p>Own Id: OTP-16832 Aux Id: PR-2738</p></li></ul><h3 id="improvements-and-new-features-21" class="section-heading"><a href="#improvements-and-new-features-21" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Make (use of) the socket registry optional (still enabled by default). Its now
possible to build OTP with the socket registry turned off, turn it off by
setting an environment variable and controlling in runtime (via function calls
and arguments when creating sockets).</p><p>Own Id: OTP-16763</p></li><li><p><code class="inline">erl -remsh nodename</code> no longer requires the hostname to be given when used
together with dynamic nodenames.</p><p>Own Id: OTP-16784</p></li></ul><h2 id="kernel-7-0" class="section-heading"><a href="#kernel-7-0" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 7.0</span></h2><h3 id="fixed-bugs-and-malfunctions-70" class="section-heading"><a href="#fixed-bugs-and-malfunctions-70" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix race condition during shutdown when <code class="inline">shell_history</code> is enabled. The race
condition would trigger crashes in <code class="inline">disk_log</code>.</p><p>Own Id: OTP-16008 Aux Id: PR-2302</p></li><li><p>Fix the Erlang distribution to handle the scenario when a node connects that
can handle message fragmentation but can not handle the atom cache. This bug
only affects users that have implemented a custom distribution carrier. It has
been present since OTP-21.</p><p>The <code class="inline">DFLAG_FRAGMENT</code> distribution flag was added to the set of flags that can
be rejected by a distribution implementation.</p><p>Own Id: OTP-16284</p></li><li><p>Fix bug where a binary was not allowed to be the format string in calls to
<code class="inline">logger:log</code>.</p><p>Own Id: OTP-16395 Aux Id: PR-2444</p></li><li><p>Fix bug where <code class="inline">logger</code> would end up in an infinite loop when trying to log the
crash of a handler or formatter.</p><p>Own Id: OTP-16489 Aux Id: ERL-1134</p></li><li><p><a href="code.html#lib_dir/1"><code class="inline">code:lib_dir/1</code></a> has been fixed to also return the lib dir for <code class="inline">erts</code>.</p><p>This is been marked as an incompatibility for any application that depended on
<code class="inline">{error,bad_name}</code> to be returned for <code class="inline">erts</code>.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-16502</p></li><li><p>The application <code class="inline">stop/1</code> callback was not called if the application master of
the application terminated.</p><p>Own Id: OTP-16504 Aux Id: PR-2328</p></li><li><p>Fix bug in <a href="application.html#loaded_applications/0"><code class="inline">application:loaded_applications/0</code></a> that could cause it to fail
with <code class="inline">badarg</code> if for example a concurrent upgrade/downgrade is running.</p><p>Own Id: OTP-16627 Aux Id: PR-2601</p></li></ul><h3 id="improvements-and-new-features-22" class="section-heading"><a href="#improvements-and-new-features-22" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>A new module <a href="erpc.html"><code class="inline">erpc</code></a> has been introduced in the <code class="inline">kernel</code> application. The
<code class="inline">erpc</code> module implements an enhanced subset of the operations provided by the
<a href="rpc.html"><code class="inline">rpc</code></a> module. Enhanced in the sense that it makes it possible to distinguish
between returned value, raised exceptions, and other errors. <code class="inline">erpc</code> also has
better performance and scalability than the original <code class="inline">rpc</code> implementation.
This by utilizing the newly introduced
<a href="../../apps/erts/erlang.html#spawn_request/5"><code class="inline">spawn_request()</code></a> BIF. Also the <code class="inline">rpc</code> module
benefits from these improvements by utilizing <code class="inline">erpc</code> when it is possible.</p><p>This change has been marked as a potential incompatibility since
<a href="rpc.html#block_call/5"><code class="inline">rpc:block_call()</code></a> now only is guaranteed to block other
<code class="inline">block_call()</code> operations. The documentation previously claimed that it would
block all <code class="inline">rpc</code> operations. This has however never been the case. It
previously did not block node-local <code class="inline">block_call()</code> operations.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-13450 Aux Id: OTP-15251</p></li><li><p>A client node can receive its node name dynamically from the node that it
first connects to. This featured can by used by</p><ul><li>starting with <code class="inline">erl -sname undefined</code></li><li>erl_interface functions <code class="inline">ei_connect_init</code> and friends</li><li><code class="inline">erl_call -R</code></li></ul><p>Own Id: OTP-13812</p></li><li><p>Improved the printout of single line logger events for most of the OTP
behaviours in STDLIB and Kernel. This includes <code class="inline">proc_lib</code>, <code class="inline">gen_server</code>,
<code class="inline">gen_event</code>, <code class="inline">gen_statem</code>, <code class="inline">gen_fsm</code>, <code class="inline">supervisor</code>, <code class="inline">supervisor_bridge</code> and
<code class="inline">application</code>.</p><p>Improved the <a href="logger_formatter.html#chars_limit"><code class="inline">chars_limit</code></a> and
<a href="logger_formatter.html#depth"><code class="inline">depth</code></a> handling in <code class="inline">proc_lib</code> and when
formatting of exceptions.</p><p>Own Id: OTP-15299</p></li><li><p>Remove usage and documentation of old requests of the I/O-protocol.</p><p>Own Id: OTP-15695</p></li><li><p>Directories can now be opened by <a href="file.html#open/2"><code class="inline">file:open/2</code></a> when passing the <code class="inline">directory</code>
option.</p><p>Own Id: OTP-15835 Aux Id: PR-2212</p></li><li><p>The check of whether to log or not based on the log level in <code class="inline">logger</code> has been
optimized by using <code class="inline">persistent_term</code> to store the log level.</p><p>Own Id: OTP-15948 Aux Id: PR-2356</p></li><li><p><a href="file.html#read_file_info/2"><code class="inline">file:read_file_info/2</code></a> can now be used on opened files and directories.</p><p>Own Id: OTP-15956 Aux Id: PR-2231</p></li><li><p>The <code class="inline">-config</code> option to <code class="inline">erl</code> now can take multiple config files without
repeating the <code class="inline">-config</code> option. Example:</p><p>erl -config sys local</p><p>Own Id: OTP-16148 Aux Id: PR-2373</p></li><li><p>Improved node connection setup handshake protocol. Made possible to agree on
protocol version without dependence on <code class="inline">epmd</code> or other prior knowledge of peer
node version. Also added exchange of node incarnation (&quot;creation&quot;) values and
expanded the distribution capability flag field from 32 to 64 bits.</p><p>Own Id: OTP-16229</p></li><li><p>The possibility to run Erlang distribution without relying on EPMD has been
extended. To achieve this a couple of new options to the inet distribution has
been added.</p><ul><li><p><strong>-dist_listen false</strong> - Setup the distribution channel, but do not listen
for incoming connection. This is useful when you want to use the current
node to interact with another node on the same machine without it joining
the entire cluster.</p></li><li><p><strong>-erl_epmd_port Port</strong> - Configure a default port that the built-in EPMD
client should return. This allows the local node to know the port to connect
to for any other node in the cluster.</p></li></ul><p>The <code class="inline">erl_epmd</code> callback API has also been extended to allow returning <code class="inline">-1</code> as
the creation which means that a random creation will be created by the node.</p><p>In addition a new callback function called <code class="inline">listen_port_please</code> has been added
that allows the callback to return which listen port the distribution should
use. This can be used instead of <code class="inline">inet_dist_listen_min/max</code> if the listen port
is to be fetched from an external service.</p><p>Own Id: OTP-16250</p></li><li><p>A first EXPERIMENTAL module that is a <code class="inline">socket</code> backend to <code class="inline">gen_tcp</code> and <code class="inline">inet</code>
has been implemented. Others will follow. Feedback will be appreciated.</p><p>Own Id: OTP-16260 Aux Id: OTP-15403</p></li><li><p>The new experimental <code class="inline">socket</code> module has been moved to the Kernel application.</p><p>Own Id: OTP-16312</p></li><li><p>Replace usage of deprecated function in the <code class="inline">group</code> module.</p><p>Own Id: OTP-16345</p></li><li><p>Minor updates due to the new spawn improvements made.</p><p>Own Id: OTP-16368 Aux Id: OTP-15251</p></li><li><p>Update of <a href="seq_trace.html#whatis">sequential tracing</a> to also support other
information transfers than message passing.</p><p>Own Id: OTP-16370 Aux Id: OTP-15251, OTP-15232</p></li><li><p><a href="code.html#module_status/1"><code class="inline">code:module_status/1</code></a> now accepts a list of modules. <a href="code.html#module_status/0"><code class="inline">code:module_status/0</code></a>,
which returns the statuses for all loaded modules, has been added.</p><p>Own Id: OTP-16402</p></li><li><p><code class="inline">filelib:wildcard/1,2</code> is now twice as fast when a double star (<code class="inline">**</code>) is part
of the pattern.</p><p>Own Id: OTP-16419</p></li><li><p>A new implementation of distributed named process groups has been introduced.
It is available in the <a href="pg.html"><code class="inline">pg</code></a> module.</p><p>Note that this <code class="inline">pg</code> module only has the name in common with the experimental
<code class="inline">pg</code> module that was present in <code class="inline">stdlib</code> up until OTP 17.</p><p>Thanks to Maxim Fedorov for the implementation.</p><p>Own Id: OTP-16453 Aux Id: PR-2524</p></li><li><p>The <code class="inline">pg2</code> module has been deprecated. It has also been scheduled for removal
in OTP 24.</p><p>You are advised to replace the usage of <code class="inline">pg2</code> with the newly introduced <a href="pg.html"><code class="inline">pg</code></a>
module. <code class="inline">pg</code> has a similar API, but with a more scalable implementation.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-16455</p></li><li><p>Refactored the internal handling of deprecated and removed functions.</p><p>Own Id: OTP-16469</p></li><li><p>The internal hosts file resolver cache <code class="inline">inet_hosts</code> has been rewritten to
behave better when the hosts file changes. For example the cache is updated
per entry instead of cleared and reloaded so lookups do not temporarily fail
during reloading, and; when multiple processes simultaneously request reload
these are now folded into one instead of all done in sequence. Reported and
first solution suggestion by Maxim Fedorov.</p><p>Own Id: OTP-16487 Aux Id: PR-2516</p></li><li><p>Add <a href="code.html#all_available/0"><code class="inline">code:all_available/0</code></a> that can be used to get all available modules.</p><p>Own Id: OTP-16494</p></li><li><p>As of OTP 23, the distributed <a href="disk_log.html"><code class="inline">disk_log</code></a> feature has been deprecated. It has
also been scheduled for removal in OTP 24.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-16495</p></li><li><p>Add the function <code class="inline">code:fetch_docs/1</code> for fetching embedded documentation for
aa Erlang module.</p><p>Own Id: OTP-16499</p></li><li><p>Improve configure for the net nif, which should increase portability.</p><p>Own Id: OTP-16530 Aux Id: OTP-16464</p></li><li><p>socket: Socket counters and socket global counters are now represented as maps
(instead of property lists).</p><p>Own Id: OTP-16535</p></li><li><p>The experimental socket module has gotten restrictions removed so now the
'seqpacket' socket type should work for any communication domain (protocol
family) where the OS supports it, typically the Unix Domain.</p><p>Own Id: OTP-16550 Aux Id: ERIERL-476</p></li><li><p>Allow using custom IO devices in <code class="inline">logger_std_h</code>.</p><p>Own Id: OTP-16563 Aux Id: PR-2523</p></li><li><p>Added <a href="file.html#del_dir_r/1"><code class="inline">file:del_dir_r/1</code></a> which deletes a directory together with all of its
contents, similar to <code class="inline">rm -rf</code> on Unix systems.</p><p>Own Id: OTP-16570 Aux Id: PR-2565</p></li><li><p>socket: By default the socket options rcvtimeo and sndtimeo are now disabled.
To enable these, OTP now has to be built with the configure option
--enable-esock-rcvsndtimeo</p><p>Own Id: OTP-16620</p></li><li><p>The experimental gen_tcp compatibility code utilizing the socket module could
loose buffered data when receiving a specified number of bytes. This bug has
been fixed. Reported by Maksim Lapshin on bugs.erlang.org ERL-1234</p><p>Own Id: OTP-16632 Aux Id: ERL-1234</p></li></ul><h2 id="kernel-6-5-2-5" class="section-heading"><a href="#kernel-6-5-2-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 6.5.2.5</span></h2><h3 id="fixed-bugs-and-malfunctions-71" class="section-heading"><a href="#fixed-bugs-and-malfunctions-71" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>By default <code class="inline">global</code> does <em>not</em> take any actions to restore a fully connected
network when connections are lost due to network issues. This is problematic
for all applications expecting a fully connected network to be provided, such
as for example <code class="inline">mnesia</code>, but also for <code class="inline">global</code> itself. A network of
overlapping partitions might cause the internal state of <code class="inline">global</code> to become
inconsistent. Such an inconsistency can remain even after such partitions have
been brought together to form a fully connected network again. The effect on
other applications that expects that a fully connected network is maintained
may vary, but they might misbehave in very subtle hard to detect ways during
such a partitioning.</p><p>In order to prevent such issues, we have introduced a <em>prevent overlapping
partitions</em> fix which can be enabled using the
<code class="inline">prevent_overlapping_partitions</code> <code class="inline">kernel(6)</code> parameter. When this fix has been
enabled, <code class="inline">global</code> will actively disconnect from nodes that reports that they
have lost connections to other nodes. This will cause fully connected
partitions to form instead of leaving the network in a state with overlapping
partitions. Note that this fix <em>has</em> to be enabled on <em>all</em> nodes in the
network in order to work properly. Since this quite substantially changes the
behavior, this fix is currently disabled by default. Since you might get hard
to detect issues without this fix you are, however, <em>strongly</em> advised to
enable this fix in order to avoid issues such as the ones described above. As
of OTP 25 this fix will become enabled by default.</p><p>Own Id: OTP-17843 Aux Id: ERIERL-732, PR-5611</p></li></ul><h3 id="improvements-and-new-features-23" class="section-heading"><a href="#improvements-and-new-features-23" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>A <code class="inline">net_tickintensity</code> <code class="inline">kernel</code> parameter has been introduced. It can be used
to control the amount of ticks during a <code class="inline">net_ticktime</code> period.</p><p>A new <a href="net_kernel.html#start/2"><code class="inline">net_kernel:start/2</code></a> function has also been introduced in order to make
it easier to add new options. The use of <a href="net_kernel.html#start/1"><code class="inline">net_kernel:start/1</code></a> has been
deprecated.</p><p>Own Id: OTP-17905 Aux Id: ERIERL-732, PR-5740</p></li></ul><h2 id="kernel-6-5-2-4" class="section-heading"><a href="#kernel-6-5-2-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 6.5.2.4</span></h2><h3 id="fixed-bugs-and-malfunctions-72" class="section-heading"><a href="#fixed-bugs-and-malfunctions-72" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed rare bug that could cause net_kernel process to hang for ever. Have seen
to happen with massive number of TLS connections while remote nodes are
restarting. Bug exists since OTP-22.0.</p><p>Own Id: OTP-17476 Aux Id: GH-4931, PR-4934</p></li></ul><h2 id="kernel-6-5-2-3" class="section-heading"><a href="#kernel-6-5-2-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 6.5.2.3</span></h2><h3 id="fixed-bugs-and-malfunctions-73" class="section-heading"><a href="#fixed-bugs-and-malfunctions-73" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix a race condition in Global.</p><p>Own Id: OTP-16033 Aux Id: ERIERL-329, ERL-1414, GH-4448, ERL-885, GH-3923</p></li></ul><h2 id="kernel-6-5-2-2" class="section-heading"><a href="#kernel-6-5-2-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 6.5.2.2</span></h2><h3 id="fixed-bugs-and-malfunctions-74" class="section-heading"><a href="#fixed-bugs-and-malfunctions-74" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>When running Xref in the <code class="inline">modules</code> mode, the Debugger application would show
up as a dependency for the Kernel applications.</p><p>Own Id: OTP-17223 Aux Id: GH-4546, PR-4554</p></li></ul><h2 id="kernel-6-5-2-1" class="section-heading"><a href="#kernel-6-5-2-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 6.5.2.1</span></h2><h3 id="fixed-bugs-and-malfunctions-75" class="section-heading"><a href="#fixed-bugs-and-malfunctions-75" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix bug in <a href="application.html#loaded_applications/0"><code class="inline">application:loaded_applications/0</code></a> that could cause it to fail
with <code class="inline">badarg</code> if for example a concurrent upgrade/downgrade is running.</p><p>Own Id: OTP-16627 Aux Id: PR-2601</p></li></ul><h2 id="kernel-6-5-2" class="section-heading"><a href="#kernel-6-5-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 6.5.2</span></h2><h3 id="fixed-bugs-and-malfunctions-76" class="section-heading"><a href="#fixed-bugs-and-malfunctions-76" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The DNS resolver `inet_res` has been fixed to return the last intermediate
error when subsequent requests times out.</p><p>Own Id: OTP-16414 Aux Id: ERIERL-452</p></li><li><p>The prim_net nif (net/kernel) made use of an undefined atom, notsup. This has
now been corrected.</p><p>Own Id: OTP-16440</p></li><li><p>Fix a crash when attempting to log faults when loading files during early
boot.</p><p>Own Id: OTP-16491</p></li><li><p>Fix crash in logger when logging to a remote node during boot.</p><p>Own Id: OTP-16493 Aux Id: ERIERL-459</p></li></ul><h3 id="improvements-and-new-features-24" class="section-heading"><a href="#improvements-and-new-features-24" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Improved <code class="inline">net_kernel</code> debug functionality.</p><p>Own Id: OTP-16458 Aux Id: PR-2525</p></li></ul><h2 id="kernel-6-5-1" class="section-heading"><a href="#kernel-6-5-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 6.5.1</span></h2><h3 id="fixed-bugs-and-malfunctions-77" class="section-heading"><a href="#fixed-bugs-and-malfunctions-77" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The 'socket state' info provided by the inet info function has been improved</p><p>Own Id: OTP-16043 Aux Id: ERL-1036</p></li><li><p>Fix bug where <code class="inline">logger</code> would crash when starting when a very large log file
needed to be rotated and compressed.</p><p>Own Id: OTP-16145 Aux Id: ERL-1034</p></li><li><p>Fixed a bug causing actual nodedown reason reported by
<a href="net_kernel.html#monitor_nodes/2"><code class="inline">net_kernel:monitor_nodes(true, [nodedown_reason])</code></a>
to be lost and replaced by the reason <code class="inline">killed</code>.</p><p>Own Id: OTP-16216</p></li><li><p>The documentation for <code class="inline">rpc:call/4,5/</code> has been updated to describe what
happens when the called function throws or return an <code class="inline">'EXIT'</code> tuple.</p><p>Own Id: OTP-16279 Aux Id: ERL-1066</p></li></ul><h2 id="kernel-6-5" class="section-heading"><a href="#kernel-6-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 6.5</span></h2><h3 id="fixed-bugs-and-malfunctions-78" class="section-heading"><a href="#fixed-bugs-and-malfunctions-78" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The type specification for <code class="inline">gen_sctp:connect/4,5</code> has been corrected.</p><p>Own Id: OTP-15344 Aux Id: ERL-947</p></li><li><p>Extra <code class="inline">-mode</code> flags given to <code class="inline">erl</code> are ignored with a warning.</p><p>Own Id: OTP-15852</p></li><li><p>Fix type spec for <a href="seq_trace.html#set_token/2"><code class="inline">seq_trace:set_token/2</code></a>.</p><p>Own Id: OTP-15858 Aux Id: ERL-700</p></li><li><p><a href="logger.html#compare_levels/2"><code class="inline">logger:compare_levels/2</code></a> would fail with a <code class="inline">badarg</code> exception if given the
values <code class="inline">all</code> or <code class="inline">none</code> as any of the parameters. This is now corrected.</p><p>Own Id: OTP-15942 Aux Id: PR-2301</p></li><li><p>Fix bug where the log file in <code class="inline">logger_std_h</code> would not be closed when the
inode of the file changed. This would in turn cause a file descriptor leak
when tools like logrotate are used.</p><p>Own Id: OTP-15997 Aux Id: PR-2331</p></li><li><p>Fix a race condition in the debugging function <code class="inline">net_kernel:nodes_info/0</code>.</p><p>Own Id: OTP-16022</p></li><li><p>Fix race condition when closing a file opened in <code class="inline">compressed</code> or
<code class="inline">delayed_write</code> mode.</p><p>Own Id: OTP-16023</p></li></ul><h3 id="improvements-and-new-features-25" class="section-heading"><a href="#improvements-and-new-features-25" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>The possibility to send ancillary data, in particular the TOS field, has been
added to <code class="inline">gen_udp:send/4,5</code>.</p><p>Own Id: OTP-15747 Aux Id: ERIERL-294</p></li><li><p>If the log file was given with relative path, the standard logger handler
(<code class="inline">logger_std_h</code>) would store the file name with relative path. If the current
directory of the node was later changed, a new file would be created relative
the new current directory, potentially failing with an <code class="inline">enoent</code> if the new
directory did not exist. This is now corrected and <code class="inline">logger_std_h</code> always
stores the log file name as an absolute path, calculated from the current
directory at the time of the handler startup.</p><p>Own Id: OTP-15850</p></li><li><p>Support local sockets with inet:i/0.</p><p>Own Id: OTP-15935 Aux Id: PR-2299</p></li></ul><h2 id="kernel-6-4-1" class="section-heading"><a href="#kernel-6-4-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 6.4.1</span></h2><h3 id="fixed-bugs-and-malfunctions-79" class="section-heading"><a href="#fixed-bugs-and-malfunctions-79" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p><code class="inline">user</code>/<code class="inline">user_drv</code> could respond to io requests before they had been processed,
which could cause data to be dropped if the emulator was halted soon after a
call to <a href="../../apps/stdlib/io.html#format/2"><code class="inline">io:format/2</code></a>, such as in an escript.</p><p>Own Id: OTP-15805</p></li></ul><h2 id="kernel-6-4" class="section-heading"><a href="#kernel-6-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 6.4</span></h2><h3 id="fixed-bugs-and-malfunctions-80" class="section-heading"><a href="#fixed-bugs-and-malfunctions-80" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix so that when multiple <code class="inline">-sname</code> or <code class="inline">-name</code> are given to <code class="inline">erl</code> the first one
is chosen. Before this fix distribution was not started at all when multiple
name options were given.</p><p>Own Id: OTP-15786 Aux Id: ERL-918</p></li><li><p>Fix <code class="inline">inet_res</code> configuration pointing to non-existing files to work again.
This was broken in KERNEL-6.3 (OTP-21.3).</p><p>Own Id: OTP-15806</p></li></ul><h3 id="improvements-and-new-features-26" class="section-heading"><a href="#improvements-and-new-features-26" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>A simple socket API is provided through the socket module. This is a low level
API that does <em>not</em> replace gen_[tcp|udp|sctp]. It is intended to
<em>eventually</em> replace the inet driver, but not the high level gen-modules
(gen_tcp, gen_udp and gen_sctp). It also provides a basic API that facilitates
the implementation of other protocols, that is TCP, UDP and SCTP.</p><p>Known issues are; No support for the Windows OS (currently).</p><p>Own Id: OTP-14831</p></li><li><p>Improved the documentation for the linger option.</p><p>Own Id: OTP-15491 Aux Id: PR-2019</p></li><li><p>Global no longer tries more than once when connecting to other nodes.</p><p>Own Id: OTP-15607 Aux Id: ERIERL-280</p></li><li><p>The dist messages EXIT, EXIT2 and MONITOR_DOWN have been updated with new
versions that send the reason term as part of the payload of the message
instead of as part of the control message.</p><p>The old versions are still present and can be used when communicating with
nodes that don't support the new versions.</p><p>Own Id: OTP-15611</p></li><li><p>Kernel configuration parameter <code class="inline">start_distribution = boolean()</code> is added. If
set to <code class="inline">false</code>, the system is started with all distribution functionality
disabled. Defaults to <code class="inline">true</code>.</p><p>Own Id: OTP-15668 Aux Id: PR-2088</p></li><li><p>In OTP-21.3, a warning was introduced for duplicated applications/keys in
configuration. This warning would be displayed both when the configuration was
given as a file on system start, and during runtime via
<code class="inline">application:set_env/1,2</code>.</p><p>The warning is now changed to a <code class="inline">badarg</code> exception in
<code class="inline">application:set_env/1,2</code>. If the faulty configuration is given in a
configuration file on system start, the startup will fail.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-15692 Aux Id: PR-2170</p></li></ul><h2 id="kernel-6-3-1-3" class="section-heading"><a href="#kernel-6-3-1-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 6.3.1.3</span></h2><h3 id="fixed-bugs-and-malfunctions-81" class="section-heading"><a href="#fixed-bugs-and-malfunctions-81" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix bug where the log file in <code class="inline">logger_std_h</code> would not be closed when the
inode of the file changed. This would in turn cause a file descriptor leak
when tools like logrotate are used.</p><p>Own Id: OTP-15997 Aux Id: PR-2331</p></li></ul><h2 id="kernel-6-3-1-2" class="section-heading"><a href="#kernel-6-3-1-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 6.3.1.2</span></h2><h3 id="improvements-and-new-features-27" class="section-heading"><a href="#improvements-and-new-features-27" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>The possibility to send ancillary data, in particular the TOS field, has been
added to <code class="inline">gen_udp:send/4,5</code>.</p><p>Own Id: OTP-15747 Aux Id: ERIERL-294</p></li></ul><h2 id="kernel-6-3-1-1" class="section-heading"><a href="#kernel-6-3-1-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 6.3.1.1</span></h2><h3 id="fixed-bugs-and-malfunctions-82" class="section-heading"><a href="#fixed-bugs-and-malfunctions-82" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix type spec for <a href="seq_trace.html#set_token/2"><code class="inline">seq_trace:set_token/2</code></a>.</p><p>Own Id: OTP-15858 Aux Id: ERL-700</p></li></ul><h2 id="kernel-6-3-1" class="section-heading"><a href="#kernel-6-3-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 6.3.1</span></h2><h3 id="fixed-bugs-and-malfunctions-83" class="section-heading"><a href="#fixed-bugs-and-malfunctions-83" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed a performance regression when reading files opened with the <code class="inline">compressed</code>
flag.</p><p>Own Id: OTP-15706 Aux Id: ERIERL-336</p></li></ul><h2 id="kernel-6-3" class="section-heading"><a href="#kernel-6-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 6.3</span></h2><h3 id="fixed-bugs-and-malfunctions-84" class="section-heading"><a href="#fixed-bugs-and-malfunctions-84" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>If for example the <code class="inline">/etc/hosts</code> did not come into existence until after the
kernel application had started, its content was never read. This bug has now
been corrected.</p><p>Own Id: OTP-14702 Aux Id: PR-2066</p></li><li><p>Fix bug where doing <code class="inline">seq_trace:reset_trace()</code> while another process was doing
a garbage collection could cause the run-time system to segfault.</p><p>Own Id: OTP-15490</p></li><li><p>Fix <code class="inline">erl_epmd:port_please</code> spec to include <a href="../../apps/erts/erlang.html#t:atom/0"><code class="inline">atom/0</code></a> and <a href="../../apps/erts/erlang.html#t:string/0"><code class="inline">string/0</code></a>.</p><p>Own Id: OTP-15557 Aux Id: PR-2117</p></li><li><p>The Logger handler logger_std_h now keeps track of the inode of its log file
in order to re-open the file if the inode changes. This may happen, for
instance, if the log file is opened and saved by an editor.</p><p>Own Id: OTP-15578 Aux Id: ERL-850</p></li><li><p>When user specific file modes are given to the logger handler <code class="inline">logger_std_h</code>,
they were earlier accepted without any control. This is now changes, so Logger
will adjust the file modes as follows:</p><p>- If <code class="inline">raw</code> is not found in the list, it is added.<br/>- If none of <code class="inline">write</code>, <code class="inline">append</code> or <code class="inline">exclusive</code> are found in the list, <code class="inline">append</code>
is added.<br/>- If none of <code class="inline">delayed_write</code> or <code class="inline">{delayed_write,Size,Delay}</code> are found in the
list, <code class="inline">delayed_write</code> is added.</p><p>Own Id: OTP-15602</p></li></ul><h3 id="improvements-and-new-features-28" class="section-heading"><a href="#improvements-and-new-features-28" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>The standard logger handler, <code class="inline">logger_std_h</code>, now has a new internal feature
for log rotation. The rotation scheme is as follows:</p><p>The log file to which the handler currently writes always has the same name,
i.e. the name which is configured for the handler. The archived files have the
same name, but with extension &quot;.N&quot;, where N is an integer. The newest archive
has extension &quot;.0&quot;, and the oldest archive has the highest number.</p><p>The size at which the log file is rotated, and the number of archive files
that are kept, is specified with the handler specific configuration parameters
<code class="inline">max_no_bytes</code> and <code class="inline">max_no_files</code> respectively.</p><p>Archives can be compressed, in which case they get a &quot;.gz&quot; file extension
after the integer. Compression is specified with the handler specific
configuration parameter <code class="inline">compress_on_rotate</code>.</p><p>Own Id: OTP-15479</p></li><li><p>The new functions <a href="logger.html#i/0"><code class="inline">logger:i/0</code></a> and <a href="logger.html#i/1"><code class="inline">logger:i/1</code></a> are added. These provide the
same information as <a href="logger.html#get_config/0"><code class="inline">logger:get_config/0</code></a> and other <code class="inline">logger:get_*_config</code>
functions, but the information is more logically sorted and more readable.</p><p>Own Id: OTP-15600</p></li><li><p>Logger is now protected against overload due to massive amounts of log events
from the emulator or from remote nodes.</p><p>Own Id: OTP-15601</p></li><li><p>Logger now uses os:system_time/1 instead of erlang:system_time/1 to generate
log event timestamps.</p><p>Own Id: OTP-15625</p></li><li><p>Add functions <code class="inline">application:set_env/1,2</code> and <a href="application.html#set_env/2"><code class="inline">application:set_env/2</code></a>. These
take a list of application configuration parameters, and the behaviour is
equivalent to calling <a href="application.html#set_env/4"><code class="inline">application:set_env/4</code></a> individually for each
application/key combination, except it is more efficient.</p><p><code class="inline">set_env/1,2</code> warns about duplicated applications or keys. The warning is also
emitted during boot, if applications or keys are duplicated within one
configuration file, e.g. sys.config.</p><p>Own Id: OTP-15642 Aux Id: PR-2164</p></li><li><p>Handler specific configuration parameters for the standard handler
<code class="inline">logger_std_h</code> are changed to be more intuitive and more similar to the
disk_log handler.</p><p>Earlier there was only one parameter, <code class="inline">type</code>, which could have the values
<code class="inline">standard_io</code>, <code class="inline">standard_error</code>, <code class="inline">{file,FileName}</code> or <code class="inline">{file,FileName,Modes}</code>.</p><p>This is now changed, so the following parameters are allowed:</p><p><code class="inline">type = standard_io | standard_error | file</code><br/><code class="inline">file = file:filename()</code><br/><code class="inline">modes = [file:mode()]</code></p><p>All parameters are optional. <code class="inline">type</code> defaults to <code class="inline">standard_io</code>, unless a file
name is given, in which case it defaults to <code class="inline">file</code>. If <code class="inline">type</code> is set to
<code class="inline">file</code>, the file name defaults to the same as the handler id.</p><p>The potential incompatibility is that <a href="logger.html#get_config/0"><code class="inline">logger:get_config/0</code></a> and
<a href="logger.html#get_handler_config/1"><code class="inline">logger:get_handler_config/1</code></a> now returns the new parameters, even if the
configuration was set with the old variant, e.g. <code class="inline">#{type=&gt;{file,FileName}}</code>.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-15662</p></li><li><p>The new configuration parameter <code class="inline">file_check</code> is added to the Logger handler
<code class="inline">logger_std_h</code>. This parameter specifies how long (in milliseconds) the
handler may wait before checking if the log file still exists and the inode is
the same as when it was opened.</p><p>The default value is 0, which means that this check is done prior to each
write operation. Setting a higher number may improve performance, but adds the
risk of losing log events.</p><p>Own Id: OTP-15663</p></li></ul><h2 id="kernel-6-2-1" class="section-heading"><a href="#kernel-6-2-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 6.2.1</span></h2><h3 id="fixed-bugs-and-malfunctions-85" class="section-heading"><a href="#fixed-bugs-and-malfunctions-85" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Setting the <code class="inline">recbuf</code> size of an inet socket the <code class="inline">buffer</code> is also automatically
increased. Fix a bug where the auto adjustment of inet buffer size would be
triggered even if an explicit inet buffer size had already been set.</p><p>Own Id: OTP-15651 Aux Id: ERIERL-304</p></li></ul><h2 id="kernel-6-2" class="section-heading"><a href="#kernel-6-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 6.2</span></h2><h3 id="fixed-bugs-and-malfunctions-86" class="section-heading"><a href="#fixed-bugs-and-malfunctions-86" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>A new function, <a href="logger.html#update_handler_config/3"><code class="inline">logger:update_handler_config/3</code></a> is added, and the handler
callback <code class="inline">changing_config</code> now has a new argument, <code class="inline">SetOrUpdate</code>, which
indicates if the configuration change comes from <code class="inline">set_handler_config/2,3</code> or
<code class="inline">update_handler_config/2,3</code>.</p><p>This allows the handler to consistently merge the new configuration with the
old (if the change comes from <code class="inline">update_handler_config/2,3</code>) or with the default
(if the change comes from <code class="inline">set_handler_config/2,3</code>).</p><p>The built-in handlers <code class="inline">logger_std_h</code> and <code class="inline">logger_disk_log_h</code> are updated
accordingly. A bug which could cause inconsistency between the handlers'
internal state and the stored configuration is also corrected.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-15364</p></li><li><p>Fix fallback when custom erl_epmd client does not implement address_please.</p><p>Own Id: OTP-15388 Aux Id: PR-1983</p></li><li><p>The logger ets table did not have the <code class="inline">read_concurrency</code> option. This is now
added.</p><p>Own Id: OTP-15453 Aux Id: ERL-782</p></li><li><p>During system start, logger has a simple handler which prints to stdout. After
the kernel supervision is started, this handler is removed and replaced by the
default handler. Due to a bug, logger earlier issued a debug printout saying
it received an unexpected message, which was the EXIT message from the simple
handler's process. This is now corrected. The simple handler's process now
unlinks from the logger process before terminating.</p><p>Own Id: OTP-15466 Aux Id: ERL-788</p></li><li><p>The logger handler <code class="inline">logger_std_h</code> would not re-create it's log file if it was
removed. Due to this it could not be used with tools like 'logrotate'. This is
now corrected.</p><p>Own Id: OTP-15469</p></li></ul><h3 id="improvements-and-new-features-29" class="section-heading"><a href="#improvements-and-new-features-29" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>A function <a href="inet.html#getifaddrs/1"><code class="inline">inet:getifaddrs/1</code></a> that takes a list with a namespace option has
been added, for platforms that support that feature, for example Linux
(only?).</p><p>Own Id: OTP-15121 Aux Id: ERIERL-189, PR-1974</p></li><li><p>Added the <code class="inline">nopush</code> option for TCP sockets, which corresponds to <code class="inline">TCP_NOPUSH</code>
on *BSD and <code class="inline">TCP_CORK</code> on Linux.</p><p>This is also used internally in <code class="inline">file:sendfile</code> to reduce latency on
subsequent send operations.</p><p>Own Id: OTP-15357 Aux Id: ERL-698</p></li><li><p>Optimize handling of send_delay for tcp sockes to better work with the new
pollthread implementation introduced in OTP-21.</p><p>Own Id: OTP-15471 Aux Id: ERIERL-229</p></li></ul><h2 id="kernel-6-1-1" class="section-heading"><a href="#kernel-6-1-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 6.1.1</span></h2><h3 id="fixed-bugs-and-malfunctions-87" class="section-heading"><a href="#fixed-bugs-and-malfunctions-87" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix bug causing net_kernel process crash on connection attempt from node with
name identical to local node.</p><p>Own Id: OTP-15438 Aux Id: ERL-781</p></li></ul><h2 id="kernel-6-1" class="section-heading"><a href="#kernel-6-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 6.1</span></h2><h3 id="fixed-bugs-and-malfunctions-88" class="section-heading"><a href="#fixed-bugs-and-malfunctions-88" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The values <code class="inline">all</code> and <code class="inline">none</code> are documented as valid value for the Kernel
configuration parameter <code class="inline">logger_level</code>, but would cause a crash during node
start. This is now corrected.</p><p>Own Id: OTP-15143</p></li><li><p>Fix some potential buggy behavior in how ticks are sent on inter node
distribution connections. Tick is now sent to c-node even if there are unsent
buffered data, as c-nodes need ticks in order to send reply ticks. The amount
of sent data was also calculated wrongly when ticks were suppressed due to
unsent buffered data.</p><p>Own Id: OTP-15162 Aux Id: ERIERL-191</p></li><li><p>Non semantic change in dist_util.erl to silence dialyzer warning.</p><p>Own Id: OTP-15170</p></li><li><p>Fixed <code class="inline">net_kernel:connect_node(node())</code> to return <code class="inline">true</code> (and do nothing) as
it always has before OTP-21.0. Also documented this successful &quot;self connect&quot;
as the expected behavior.</p><p>Own Id: OTP-15182 Aux Id: ERL-643</p></li><li><p>The single_line option on logger_formatter would in some cases add an unwanted
comma after the association arrows in a map. This is now corrected.</p><p>Own Id: OTP-15228</p></li><li><p>Improved robustness of distribution connection setup. In OTP-21.0 a truly
asynchronous connection setup was introduced. This is further improvement on
that work to make the emulator more robust and also be able to recover in
cases when involved Erlang processes misbehave.</p><p>Own Id: OTP-15297 Aux Id: OTP-15279, OTP-15280</p></li></ul><h3 id="improvements-and-new-features-30" class="section-heading"><a href="#improvements-and-new-features-30" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>A new macro, <code class="inline">?LOG(Level,...)</code>, is added. This is equivalent to the existing
<code class="inline">?LOG_&lt;LEVEL&gt;(...)</code> macros.</p><p>A new variant of Logger report callback is added, which takes an extra
argument containing options for size limiting and line breaks. Module
<code class="inline">proc_lib</code> in <code class="inline">STDLIB</code> uses this for crash reports.</p><p>Logger configuration is now checked a bit more for errors.</p><p>Own Id: OTP-15132</p></li><li><p>The socket options <code class="inline">recvtos</code>, <code class="inline">recvttl</code>, <code class="inline">recvtclass</code> and <code class="inline">pktoptions</code> have
been implemented in the socket modules. See the documentation for the
<code class="inline">gen_tcp</code>, <code class="inline">gen_udp</code> and <code class="inline">inet</code> modules. Note that support for these in the
runtime system is platform dependent. Especially for <code class="inline">pktoptions</code> which is
very Linux specific and obsoleted by the RFCs that defined it.</p><p>Own Id: OTP-15145 Aux Id: ERIERL-187</p></li><li><p>Add <a href="logger.html#set_application_level/2"><code class="inline">logger:set_application_level/2</code></a> for setting the logger level of all
modules in one application.</p><p>Own Id: OTP-15146</p></li></ul><h2 id="kernel-6-0-1" class="section-heading"><a href="#kernel-6-0-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 6.0.1</span></h2><h3 id="fixed-bugs-and-malfunctions-89" class="section-heading"><a href="#fixed-bugs-and-malfunctions-89" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed bug in <code class="inline">net_kernel</code> that could cause an emulator crash if certain
connection attempts failed. Bug exists since kernel-6.0 (OTP-21.0).</p><p>Own Id: OTP-15280 Aux Id: ERIERL-226, OTP-15279</p></li></ul><h2 id="kernel-6-0" class="section-heading"><a href="#kernel-6-0" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 6.0</span></h2><h3 id="fixed-bugs-and-malfunctions-90" class="section-heading"><a href="#fixed-bugs-and-malfunctions-90" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Clarify the documentation of <a href="rpc.html#multicall/5"><code class="inline">rpc:multicall/5</code></a>.</p><p>Own Id: OTP-10551</p></li><li><p>The DNS resolver when getting econnrefused from a server retained an invalid
socket so look up towards the next server(s) also failed.</p><p>Own Id: OTP-13133 Aux Id: PR-1557</p></li><li><p>No resolver backend returns V4Mapped IPv6 addresses any more. This was
inconsistent before, some did, some did not. To facilitate working with such
addresses a new function <a href="inet.html#ipv4_mapped_ipv6_address/1"><code class="inline">inet:ipv4_mapped_ipv6_address/1</code></a> has been added.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-13761 Aux Id: ERL-503</p></li><li><p>The type specifications for <a href="file.html#t:posix/0"><code class="inline">file:posix/0</code></a> and
<a href="inet.html#t:posix/0"><code class="inline">inet:posix/0</code></a> have been updated according to which errors
file and socket operations should be able to return.</p><p>Own Id: OTP-14019 Aux Id: ERL-550</p></li><li><p>Fix name resolving in IPv6 only environments when doing the initial
distributed connection.</p><p>Own Id: OTP-14501</p></li><li><p>File operations used to accept <a href="file.html#t:name_all/0">filenames</a> containing
null characters (integer value zero). This caused the name to be truncated and
in some cases arguments to primitive operations to be mixed up. Filenames
containing null characters inside the filename are now <em>rejected</em> and will
cause primitive file operations to fail.</p><p>Also environment variable operations used to accept
<a href="os.html#t:env_var_name/0">names</a> and <a href="os.html#t:env_var_value/0">values</a> of
environment variables containing null characters (integer value zero). This
caused operations to silently produce erroneous results. Environment variable
names and values containing null characters inside the name or value are now
<em>rejected</em> and will cause environment variable operations to fail.</p><p>Primitive environment variable operations also used to accept the <code class="inline">$=</code>
character in environment variable names causing various problems. <code class="inline">$=</code>
characters in environment variable names are now also <em>rejected</em>.</p><p>Also <a href="os.html#cmd/1"><code class="inline">os:cmd/1</code></a> now reject null characters inside its
<a href="os.html#t:os_command/0">command</a>.</p><p><a href="../../apps/erts/erlang.html#open_port/2"><code class="inline">erlang:open_port/2</code></a> will also reject null characters inside the port name
from now on.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-14543 Aux Id: ERL-370</p></li><li><p><code class="inline">os:putenv</code> and <code class="inline">os:getenv</code> no longer access the process environment directly
and instead work on a thread-safe emulation. The only observable difference is
that it's <em>not</em> kept in sync with libc <code class="inline">getenv(3)</code> / <code class="inline">putenv(3)</code>, so those who
relied on that behavior in drivers or NIFs will need to add manual
synchronization.</p><p>On Windows this means that you can no longer resolve DLL dependencies by
modifying the <code class="inline">PATH</code> just before loading the driver/NIF. To make this less of
a problem, the emulator now adds the target DLL's folder to the DLL search
path.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-14666</p></li><li><p>Fixed connection tick toward primitive hidden nodes (erl_interface) that could
cause faulty tick timeout in rare cases when payload data is sent to hidden
node but not received.</p><p>Own Id: OTP-14681</p></li><li><p>Make group react immediately on an EXIT-signal from shell in e.g ssh.</p><p>Own Id: OTP-14991 Aux Id: PR1705</p></li><li><p>Calls to <a href="gen_tcp.html#send/2"><code class="inline">gen_tcp:send/2</code></a> on closed sockets now returns <code class="inline">{error, closed}</code>
instead of <code class="inline">{error,enotconn}</code>.</p><p>Own Id: OTP-15001</p></li><li><p>The <code class="inline">included_applications</code> key are no longer duplicated as application
environment variable. Earlier, the included applications could be read both
with <code class="inline">application:get[_all]_env(...)</code> and <code class="inline">application:get[_all]_key(...)</code>
functions. Now, it can only be read with <code class="inline">application:get[_all]_key(...)</code>.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-15071</p></li><li><p>Owner and group changes through <code class="inline">file:write_file_info</code>, <code class="inline">file:change_owner</code>,
and <code class="inline">file:change_group</code> will no longer report success on permission errors.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-15118</p></li></ul><h3 id="improvements-and-new-features-31" class="section-heading"><a href="#improvements-and-new-features-31" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>A new logging API is added to Erlang/OTP, see the <a href="logger.html"><code class="inline">logger</code></a> manual page, and
section <a href="logger_chapter.html">Logging</a> in the Kernel User's Guide.</p><p>Calls to <code class="inline">error_logger</code> are automatically redirected to the new API, and
legacy error logger event handlers can still be used. It is, however,
recommended to use the Logger API directly when writing new code.</p><p>Notice the following potential incompatibilities:</p><ul><li><p>Kernel configuration parameters <code class="inline">error_logger</code> still works, but is overruled
if the default handler's output destination is configured with Kernel
configuration parameter <code class="inline">logger</code>.</p><p>In general, parameters for configuring error logger are overwritten by new
parameters for configuring Logger.</p></li><li><p>The concept of SASL error logging is deprecated, meaning that by default the
SASL application does not affect which log events are logged.</p><p>By default, supervisor reports and crash reports are logged by the default
Logger handler started by Kernel, and end up at the same destination
(terminal or file) as other standard log event from Erlang/OTP.</p><p>Progress reports are not logged by default, but can be enabled by setting
the primary log level to info, for example with the Kernel configuration
parameter <code class="inline">logger_level</code>.</p><p>To obtain backwards compatibility with the SASL error logging functionality
from earlier releases, set Kernel configuration parameter
<code class="inline">logger_sasl_compatible</code> to <code class="inline">true</code>. This prevents the default Logger handler
from logging any supervisor-, crash-, or progress reports. Instead, SASL
adds a separate Logger handler during application start, which takes care of
these log events. The SASL configuration parameters <code class="inline">sasl_error_logger</code> and
<code class="inline">sasl_errlog_type</code> specify the destination (terminal or file) and severity
level to log for these events.</p></li></ul><p>Since Logger is new in Erlang/OTP 21.0, we do reserve the right to introduce
changes to the Logger API and functionality in patches following this release.
These changes might or might not be backwards compatible with the initial
version.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-13295</p></li><li><p>The function <a href="inet.html#i/0"><code class="inline">inet:i/0</code></a> has been documented.</p><p>Own Id: OTP-13713 Aux Id: PR-1645</p></li><li><p>Typespecs for <code class="inline">netns</code> and <code class="inline">bind_to_device</code> options have been added to
<code class="inline">gen_tcp</code>, <code class="inline">gen_udp</code> and <code class="inline">gen_sctp</code> functions.</p><p>Own Id: OTP-14359 Aux Id: PR-1816</p></li><li><p>New functionality for implementation of alternative carriers for the Erlang
distribution has been introduced. This mainly consists of support for usage of
distribution controller processes (previously only ports could be used as
distribution controllers). For more information see
<a href="../../apps/erts/alt_dist.html#distribution-module">ERTS User's Guide ➜ How to implement an Alternative Carrier for the Erlang Distribution ➜ Distribution Module</a>.</p><p>Own Id: OTP-14459</p></li><li><p><code class="inline">seq_trace</code> labels may now be any erlang term.</p><p>Own Id: OTP-14899</p></li><li><p>The SSL distribution protocol <code class="inline">-proto inet_tls</code> has stopped setting the SSL
option <code class="inline">server_name_indication</code>. New verify funs for client and server in
<code class="inline">inet_tls_dist</code> has been added, not documented yet, that checks node name if
present in peer certificate. Usage is still also yet to be documented.</p><p>Own Id: OTP-14969 Aux Id: OTP-14465, ERL-598</p></li><li><p>Changed timeout of <code class="inline">gen_server</code> calls to <code class="inline">auth</code> server from default 5 seconds
to <code class="inline">infinity</code>.</p><p>Own Id: OTP-15009 Aux Id: ERL-601</p></li><li><p>The callback module passed as <code class="inline">-epmd_module</code> to erl has been expanded to be
able to do name and port resolving.</p><p>Documentation has also been added in the <a href="erl_epmd.html"><code class="inline">erl_epmd</code></a> reference manual and
ERTS User's Guide
<a href="../../apps/erts/alt_disco.html">How to Implement an Alternative Node Discovery for Erlang Distribution</a>.</p><p>Own Id: OTP-15086 Aux Id: PR-1694</p></li><li><p>Included config file specified with relative path in sys.config are now first
searched for relative to the directory of sys.config itself. If not found, it
is also searched for relative to the current working directory. The latter is
for backwards compatibility.</p><p>Own Id: OTP-15137 Aux Id: PR-1838</p></li></ul><h2 id="kernel-5-4-3-2" class="section-heading"><a href="#kernel-5-4-3-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 5.4.3.2</span></h2><h3 id="fixed-bugs-and-malfunctions-91" class="section-heading"><a href="#fixed-bugs-and-malfunctions-91" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Non semantic change in dist_util.erl to silence dialyzer warning.</p><p>Own Id: OTP-15170</p></li></ul><h2 id="kernel-5-4-3-1" class="section-heading"><a href="#kernel-5-4-3-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 5.4.3.1</span></h2><h3 id="fixed-bugs-and-malfunctions-92" class="section-heading"><a href="#fixed-bugs-and-malfunctions-92" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix some potential buggy behavior in how ticks are sent on inter node
distribution connections. Tick is now sent to c-node even if there are unsent
buffered data, as c-nodes need ticks in order to send reply ticks. The amount
of sent data was calculated wrongly when ticks where suppressed due to unsent
buffered data.</p><p>Own Id: OTP-15162 Aux Id: ERIERL-191</p></li></ul><h2 id="kernel-5-4-3" class="section-heading"><a href="#kernel-5-4-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 5.4.3</span></h2><h3 id="fixed-bugs-and-malfunctions-93" class="section-heading"><a href="#fixed-bugs-and-malfunctions-93" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Correct a few contracts.</p><p>Own Id: OTP-14889</p></li><li><p>Reject loading modules with names containing directory separators ('/' or '\'
on Windows).</p><p>Own Id: OTP-14933 Aux Id: ERL-564, PR-1716</p></li><li><p>Fix bug in handling of os:cmd/2 option max_size on windows.</p><p>Own Id: OTP-14940</p></li></ul><h2 id="kernel-5-4-2" class="section-heading"><a href="#kernel-5-4-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 5.4.2</span></h2><h3 id="fixed-bugs-and-malfunctions-94" class="section-heading"><a href="#fixed-bugs-and-malfunctions-94" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Add <a href="os.html#cmd/2"><code class="inline">os:cmd/2</code></a> that takes an options map as the second argument.</p><p>Add <code class="inline">max_size</code> as an option to <a href="os.html#cmd/2"><code class="inline">os:cmd/2</code></a> that control the maximum size of the
result that <a href="os.html#cmd/2"><code class="inline">os:cmd/2</code></a> will return.</p><p>Own Id: OTP-14823</p></li></ul><h2 id="kernel-5-4-1" class="section-heading"><a href="#kernel-5-4-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 5.4.1</span></h2><h3 id="fixed-bugs-and-malfunctions-95" class="section-heading"><a href="#fixed-bugs-and-malfunctions-95" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Refactored an internal API.</p><p>Own Id: OTP-14784</p></li></ul><h2 id="kernel-5-4" class="section-heading"><a href="#kernel-5-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 5.4</span></h2><h3 id="fixed-bugs-and-malfunctions-96" class="section-heading"><a href="#fixed-bugs-and-malfunctions-96" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Processes which did output after switching jobs (Ctrl+G) could be left forever
stuck in the io request.</p><p>Own Id: OTP-14571 Aux Id: ERL-472</p></li></ul><h3 id="improvements-and-new-features-32" class="section-heading"><a href="#improvements-and-new-features-32" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Lock counting can now be fully toggled at runtime in the lock counting
emulator (<code class="inline">-emu_type lcnt</code>). Everything is enabled by default to match the old
behavior, but specific categories can be toggled at will with minimal runtime
overhead when disabled. Refer to the documentation on <a href="../../apps/tools/lcnt.html#rt_mask/1"><code class="inline">lcnt:rt_mask/1</code></a> for
details.</p><p>Own Id: OTP-13170</p></li><li><p><code class="inline">lcnt:collect</code> and <code class="inline">lcnt:clear</code> will no longer block all other threads in the
runtime system.</p><p>Own Id: OTP-14412</p></li><li><p>General Unicode improvements.</p><p>Own Id: OTP-14462</p></li></ul><h2 id="kernel-5-3-1" class="section-heading"><a href="#kernel-5-3-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 5.3.1</span></h2><h3 id="fixed-bugs-and-malfunctions-97" class="section-heading"><a href="#fixed-bugs-and-malfunctions-97" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The documentation for the 'quiet' option in disk_log:open/1 had an incorrect
default value.</p><p>Own Id: OTP-14498</p></li></ul><h2 id="kernel-5-3" class="section-heading"><a href="#kernel-5-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 5.3</span></h2><h3 id="fixed-bugs-and-malfunctions-98" class="section-heading"><a href="#fixed-bugs-and-malfunctions-98" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Function <a href="inet.html#ntoa/1"><code class="inline">inet:ntoa/1</code></a> has been fixed to return lowercase letters according to
RFC 5935 that has been approved after this function was written. Previously
uppercase letters were returned so this may be a backwards incompatible change
depending on how the returned address string is used.</p><p>Function <a href="inet.html#parse_address/1"><code class="inline">inet:parse_address/1</code></a> has been fixed to accept %-suffixes on scoped
addresses. The addresses does not work yet, but gives no parse errors.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-13006 Aux Id: ERIERL-20, ERL-429</p></li><li><p>Fix bug where gethostname would incorrectly fail with enametoolong on Linux.</p><p>Own Id: OTP-14310</p></li><li><p>Fix bug causing <code class="inline">code:is_module_native</code> to falsely return true when <code class="inline">local</code>
call trace is enabled for the module.</p><p>Own Id: OTP-14390</p></li><li><p>Add early reject of invalid node names from distributed nodes.</p><p>Own Id: OTP-14426</p></li></ul><h3 id="improvements-and-new-features-33" class="section-heading"><a href="#improvements-and-new-features-33" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Since Unicode is now allowed in atoms an extra check is needed for node names,
which are restricted to Latin-1.</p><p>Own Id: OTP-13805</p></li><li><p>Replaced usage of deprecated symbolic <a href="../../apps/erts/erlang.html#t:time_unit/0"><code class="inline">time unit</code></a>
representations.</p><p>Own Id: OTP-13831 Aux Id: OTP-13735</p></li><li><p><code class="inline">file:write_file(Name, Data, [raw])</code> would turn <code class="inline">Data</code> into a single binary
before writing. This meant it could not take advantage of the <code class="inline">writev()</code>
system call if it was given a list of binaries and told to write with <code class="inline">raw</code>
mode.</p><p>Own Id: OTP-13909</p></li><li><p>The performance of the <code class="inline">disk_log</code> has been somewhat improved in some corner
cases (big items), and the documentation has been clarified.</p><p>Own Id: OTP-14057 Aux Id: PR-1245</p></li><li><p>Functions for detecting changed code has been added. <a href="code.html#modified_modules/0"><code class="inline">code:modified_modules/0</code></a>
returns all currently loaded modules that have changed on disk.
<a href="code.html#module_status/1"><code class="inline">code:module_status/1</code></a> returns the status for a module. In the shell and in
<code class="inline">c</code> module, <code class="inline">mm/0</code> is short for <a href="code.html#modified_modules/0"><code class="inline">code:modified_modules/0</code></a>, and <code class="inline">lm/0</code> reloads
all currently loaded modules that have changed on disk.</p><p>Own Id: OTP-14059</p></li><li><p>Introduce an event manager in Erlang to handle OS signals. A subset of OS
signals may be subscribed to and those are described in the Kernel
application.</p><p>Own Id: OTP-14186</p></li><li><p>Sockets can now be bound to device (SO_BINDTODEVICE) on platforms where it is
supported.</p><p>This has been implemented e.g to support VRF-Lite under Linux; see
<a href="https://www.kernel.org/doc/Documentation/networking/vrf.txt">VRF </a>, and
GitHub pull request <a href="https://github.com/erlang/otp/pull/1326">#1326</a>.</p><p>Own Id: OTP-14357 Aux Id: PR-1326</p></li><li><p>Added option to store shell_history on disk so that the history can be reused
between sessions.</p><p>Own Id: OTP-14409 Aux Id: PR-1420</p></li><li><p>The size of crash reports created by <code class="inline">gen_server</code>, <code class="inline">gen_statem</code> and <code class="inline">proc_lib</code>
is limited with aid of the Kernel application variable
<code class="inline">error_logger_format_depth</code>. The purpose is to limit the size of the messages
sent to the <code class="inline">error_logger</code> process when processes with huge message queues or
states crash.</p><p>The crash report generated by <code class="inline">proc_lib</code> includes the new tag
<code class="inline">message_queue_len</code>. The neighbour report also includes the new tag
<code class="inline">current_stacktrace</code>. Finally, the neighbour report no longer includes the
tags <code class="inline">messages</code> and <code class="inline">dictionary</code>.</p><p>The new function <a href="error_logger.html#get_format_depth/0"><code class="inline">error_logger:get_format_depth/0</code></a> can be used to retrieve the
value of the Kernel application variable <code class="inline">error_logger_format_depth</code>.</p><p>Own Id: OTP-14417</p></li><li><p>One of the ETS tables used by the <code class="inline">global</code> module is created with
<code class="inline">{read_concurrency, true}</code> in order to reduce contention.</p><p>Own Id: OTP-14419</p></li><li><p>Warnings have been added to the relevant documentation about not using
un-secure distributed nodes in exposed environments.</p><p>Own Id: OTP-14425</p></li></ul><h2 id="kernel-5-2" class="section-heading"><a href="#kernel-5-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 5.2</span></h2><h3 id="fixed-bugs-and-malfunctions-99" class="section-heading"><a href="#fixed-bugs-and-malfunctions-99" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix a race during cleanup of os:cmd that would cause os:cmd to hang
indefinitely.</p><p>Own Id: OTP-14232 Aux Id: seq13275</p></li></ul><h3 id="improvements-and-new-features-34" class="section-heading"><a href="#improvements-and-new-features-34" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>The functions in the '<code class="inline">file</code>' module that take a list of paths (e.g.
<a href="file.html#path_consult/2"><code class="inline">file:path_consult/2</code></a>) will now continue to search in the path if the path
contains something that is not a directory.</p><p>Own Id: OTP-14191</p></li><li><p>Two OTP processes that are known to receive many messages are 'rex' (used by
'rpc') and 'error_logger'. Those processes will now store unprocessed messages
outside the process heap, which will potentially decrease the cost of garbage
collections.</p><p>Own Id: OTP-14192</p></li></ul><h2 id="kernel-5-1-1" class="section-heading"><a href="#kernel-5-1-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 5.1.1</span></h2><h3 id="fixed-bugs-and-malfunctions-100" class="section-heading"><a href="#fixed-bugs-and-malfunctions-100" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p><a href="code.html#add_pathsa/1"><code class="inline">code:add_pathsa/1</code></a> and command line option <code class="inline">-pa</code> both revert the given list
of directories when adding it at the beginning of the code path. This is now
documented.</p><p>Own Id: OTP-13920 Aux Id: ERL-267</p></li><li><p>Add lost runtime dependency to erts-8.1. This should have been done in
kernel-5.1 (OTP-19.1) as it cannot run without at least erts-8.1 (OTP-19.1).</p><p>Own Id: OTP-14003</p></li><li><p>Type and doc for gen_{tcp,udp,sctp}:controlling_process/2 has been
improved.</p><p>Own Id: OTP-14022 Aux Id: PR-1208</p></li></ul><h2 id="kernel-5-1" class="section-heading"><a href="#kernel-5-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 5.1</span></h2><h3 id="fixed-bugs-and-malfunctions-101" class="section-heading"><a href="#fixed-bugs-and-malfunctions-101" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix a memory leak when calling seq_trace:get_system_tracer().</p><p>Own Id: OTP-13742</p></li><li><p>Fix for the problem that when adding the ebin directory of an application to
the code path, the <a href="code.html#priv_dir/1"><code class="inline">code:priv_dir/1</code></a> function returns an incorrect path to the
priv directory of the same application.</p><p>Own Id: OTP-13758 Aux Id: ERL-195</p></li><li><p>Fix code_server crash when adding code paths of two levels.</p><p>Own Id: OTP-13765 Aux Id: ERL-194</p></li><li><p>Respect -proto_dist switch while connection to EPMD</p><p>Own Id: OTP-13770 Aux Id: PR-1129</p></li><li><p>Fixed a bug where init:stop could deadlock if a process with infinite shutdown
timeout (e.g. a supervisor) attempted to load code while terminating.</p><p>Own Id: OTP-13802</p></li><li><p>Close stdin of commands run in os:cmd. This is a backwards compatibility fix
that restores the behaviour of pre 19.0 os:cmd.</p><p>Own Id: OTP-13867 Aux Id: seq13178</p></li></ul><h3 id="improvements-and-new-features-35" class="section-heading"><a href="#improvements-and-new-features-35" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Add <a href="net_kernel.html#setopts/2"><code class="inline">net_kernel:setopts/2</code></a> and <a href="net_kernel.html#getopts/2"><code class="inline">net_kernel:getopts/2</code></a> to control options for
distribution sockets in runtime.</p><p>Own Id: OTP-13564</p></li><li><p>Rudimentary support for DSCP has been implemented in the guise of a <code class="inline">tclass</code>
socket option for IPv6 sockets.</p><p>Own Id: OTP-13582</p></li></ul><h2 id="kernel-5-0-2" class="section-heading"><a href="#kernel-5-0-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 5.0.2</span></h2><h3 id="fixed-bugs-and-malfunctions-102" class="section-heading"><a href="#fixed-bugs-and-malfunctions-102" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>When calling os:cmd from a process that has set trap_exit to true an 'EXIT'
message would be left in the message queue. This bug was introduced in kernel
vsn 5.0.1.</p><p>Own Id: OTP-13813</p></li></ul><h2 id="kernel-5-0-1" class="section-heading"><a href="#kernel-5-0-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 5.0.1</span></h2><h3 id="fixed-bugs-and-malfunctions-103" class="section-heading"><a href="#fixed-bugs-and-malfunctions-103" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix a os:cmd bug where creating a background job using &amp; would cause os:cmd to
hang until the background job terminated or closed its stdout and stderr file
descriptors. This bug has existed from kernel 5.0.</p><p>Own Id: OTP-13741</p></li></ul><h2 id="kernel-5-0" class="section-heading"><a href="#kernel-5-0" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 5.0</span></h2><h3 id="fixed-bugs-and-malfunctions-104" class="section-heading"><a href="#fixed-bugs-and-malfunctions-104" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The handling of <code class="inline">on_load</code> functions has been improved. The major improvement
is that if a code upgrade fails because the <code class="inline">on_load</code> function fails, the
previous version of the module will now be retained.</p><p>Own Id: OTP-12593</p></li><li><p><code class="inline">rpc:call()</code> and <code class="inline">rpc:block_call()</code> would sometimes cause an exception (which
was not mentioned in the documentation). This has been corrected so that
<code class="inline">{badrpc,Reason}</code> will be returned instead.</p><p>Own Id: OTP-13409</p></li><li><p>On Windows, for modules that were loaded early (such as the <code class="inline">lists</code> module),
<a href="code.html#which/1"><code class="inline">code:which/1</code></a> would return the path with mixed slashes and backslashes, for
example: <code class="inline">&quot;C:\\Program Files\\erl8.0/lib/stdlib-2.7/ebin/lists.beam&quot;</code>. This
has been corrected.</p><p>Own Id: OTP-13410</p></li><li><p>Make file:datasync use fsync instead of fdatasync on Mac OSX.</p><p>Own Id: OTP-13411</p></li><li><p>The default chunk size for the fallback sendfile implementation, used on
platforms that do not have a native sendfile, has been decreased in order to
reduce connectivity issues.</p><p>Own Id: OTP-13444</p></li><li><p>Large file writes (2Gb or more) could fail on some Unix platforms (for
example, OS X and FreeBSD).</p><p>Own Id: OTP-13461</p></li><li><p>A bug has been fixed where the DNS resolver inet_res did not refresh its view
of the contents of for example resolv.conf immediately after start and hence
then failed name resolution. Reported and fix suggested by Michal Ptaszek in
GitHUB pull req #949.</p><p>Own Id: OTP-13470 Aux Id: Pull #969</p></li><li><p>Fix process leak from global_group.</p><p>Own Id: OTP-13516 Aux Id: PR-1008</p></li><li><p>The function <a href="inet.html#gethostbyname/1"><code class="inline">inet:gethostbyname/1</code></a> now honors the resolver option <code class="inline">inet6</code>
instead of always looking up IPv4 addresses.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-13622 Aux Id: PR-1065</p></li><li><p>The <code class="inline">Status</code> argument to <a href="../../apps/erts/init.html#stop/1"><code class="inline">init:stop/1</code></a> is now sanity checked to make sure
<code class="inline">erlang:halt</code> does not fail.</p><p>Own Id: OTP-13631 Aux Id: PR-911</p></li></ul><h3 id="improvements-and-new-features-36" class="section-heading"><a href="#improvements-and-new-features-36" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Add {line_delim, byte()} option to inet:setopts/2 and decode_packet/3</p><p>Own Id: OTP-12837</p></li><li><p>Added <a href="os.html#perf_counter/1"><code class="inline">os:perf_counter/1</code></a>.</p><p>The perf_counter is a very very cheap and high resolution timer that can be
used to timestamp system events. It does not have monoticity guarantees, but
should on most OS's expose a monotonous time.</p><p>Own Id: OTP-12908</p></li><li><p>The os:cmd call has been optimized on unix platforms to be scale better with
the number of schedulers.</p><p>Own Id: OTP-13089</p></li><li><p>New functions that can load multiple modules at once have been added to the
'<code class="inline">code</code>' module. The functions are <a href="code.html#atomic_load/1"><code class="inline">code:atomic_load/1</code></a>,
<a href="code.html#prepare_loading/1"><code class="inline">code:prepare_loading/1</code></a>, <a href="code.html#finish_loading/1"><code class="inline">code:finish_loading/1</code></a>, and
<a href="code.html#ensure_modules_loaded/1"><code class="inline">code:ensure_modules_loaded/1</code></a>.</p><p>Own Id: OTP-13111</p></li><li><p>The code path cache feature turned out not to be very useful in practice and
has been removed. If an attempt is made to enable the code path cache, there
will be a warning report informing the user that the feature has been removed.</p><p>Own Id: OTP-13191</p></li><li><p>When an attempt is made to start a distributed Erlang node with the same name
as an existing node, the error message will be much shorter and easier to read
than before. Example:</p><p><code class="inline">Protocol 'inet_tcp': the name somename@somehost seems to be in use by another Erlang node</code></p><p>Own Id: OTP-13294</p></li><li><p>The output of the default error logger is somewhat prettier and easier to
read. The default error logger is used during start-up of the OTP system. If
the start-up fails, the output will be easier to read.</p><p>Own Id: OTP-13325</p></li><li><p>The functions <code class="inline">rpc:safe_multi_server_call/2,3</code> that were deprecated in R12B
have been removed.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-13449</p></li><li><p>Update the error reasons in dist_util, and show them in the logs if
net_kernel:verbose(1) has been called.</p><p>Own Id: OTP-13458</p></li><li><p>Experimental support for Unix Domain Sockets has been implemented. Read the
sources if you want to try it out. Example:
<code class="inline">gen_udp:open(0, [{ifaddr,{local,&quot;/tmp/socket&quot;}}])</code>. Documentation will be
written after user feedback on the experimental API.</p><p>Own Id: OTP-13572 Aux Id: PR-612</p></li><li><p>Allow heart to be configured to not kill the previous emulator before calling
the HEART_COMMAND. This is done by setting the environment variable
HEART_NO_KILL to TRUE.</p><p>Own Id: OTP-13650</p></li></ul><h2 id="kernel-4-2" class="section-heading"><a href="#kernel-4-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 4.2</span></h2><h3 id="fixed-bugs-and-malfunctions-105" class="section-heading"><a href="#fixed-bugs-and-malfunctions-105" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p><code class="inline">code:load_abs([10100])</code> would bring down the entire runtime system and create
a crash dump. Corrected to generate an error exception in the calling process.</p><p>Also corrected specs for code loading functions and added more information in
the documentation about the error reasons returned by code-loading functions.</p><p>Own Id: OTP-9375</p></li><li><p><a href="gen_tcp.html#accept/2"><code class="inline">gen_tcp:accept/2</code></a> was not
<a href="../../apps/erts/time_correction.html#time-warp-safe-code">time warp safe</a>. This since
it used the same time as returned by <a href="../../apps/erts/erlang.html#now/0"><code class="inline">erlang:now/0</code></a> when calculating timeout.
This has now been fixed.</p><p>Own Id: OTP-13254 Aux Id: OTP-11997, OTP-13222</p></li><li><p>Correct the contract for <a href="inet.html#getifaddrs/1"><code class="inline">inet:getifaddrs/1</code></a>.</p><p>Own Id: OTP-13335 Aux Id: ERL-95</p></li></ul><h3 id="improvements-and-new-features-37" class="section-heading"><a href="#improvements-and-new-features-37" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Time warp safety improvements.</p><p>Introduced the options <code class="inline">monotonic_timestamp</code>, and <code class="inline">strict_monotonic_timestamp</code>
to the trace, sequential trace, and system profile functionality. This since
the already existing <code class="inline">timestamp</code> option is not time warp safe.</p><p>Introduced the option <code class="inline">safe_fixed_monotonic_time</code> to <a href="../../apps/stdlib/ets.html#info/2"><code class="inline">ets:info/2</code></a> and
<a href="../../apps/stdlib/dets.html#info/2"><code class="inline">dets:info/2</code></a>. This since the already existing <code class="inline">safe_fixed</code> option is not time
warp safe.</p><p>Own Id: OTP-13222 Aux Id: OTP-11997</p></li><li><p>Add validation callback for heart</p><p>The erlang heart process may now have a validation callback installed. The
validation callback will be executed, if present, before any heartbeat to
heart port program. If the validation fails, or stalls, no heartbeat will be
sent and the node will go down.</p><p>With the option <code class="inline">'check_schedulers'</code> heart executes a responsiveness check of
the schedulers before a heartbeat is sent to the port program. If the
responsiveness check fails, the heartbeat will not be performed (as intended).</p><p>Own Id: OTP-13250</p></li><li><p>Clarify documentation of <a href="net_kernel.html#allow/1"><code class="inline">net_kernel:allow/1</code></a></p><p>Own Id: OTP-13299</p></li><li><p>EPMD supports both IPv4 and IPv6</p><p>Also affects oldest supported windows version.</p><p>Own Id: OTP-13364</p></li></ul><h2 id="kernel-4-1-1" class="section-heading"><a href="#kernel-4-1-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 4.1.1</span></h2><h3 id="fixed-bugs-and-malfunctions-106" class="section-heading"><a href="#fixed-bugs-and-malfunctions-106" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Host name lookups though inet_res, the Erlang DNS resolver, are now done case
insensitively according to RFC 4343. Patch by Holger Weiß.</p><p>Own Id: OTP-12836</p></li><li><p>IPv6 distribution handler has been updated to share code with IPv4 so that all
features are supported in IPv6 as well. A bug when using an IPv4 address as
hostname has been fixed.</p><p>Own Id: OTP-13040</p></li><li><p>Caching of host names in the internal DNS resolver inet_res has been made
character case insensitive for host names according to RFC 4343.</p><p>Own Id: OTP-13083</p></li><li><p>Cooked file mode buffering has been fixed so file:position/2 now works
according to Posix on Posix systems i.e. when file:position/2 returns an error
the file pointer is unaffected.</p><p>The Windows system documentation, however, is unclear on this point so the
documentation of file:position/2 still does not promise anything.</p><p>Cooked file mode file:pread/2,3 and file:pwrite/2,3 have been corrected to
honor character encoding like the combination of file:position/2 and
file:read/2 or file:write/2 already does. This is probably not very useful
since the character representation on the caller's side is latin1, period.</p><p>Own Id: OTP-13155 Aux Id: PR#646</p></li></ul><h3 id="improvements-and-new-features-38" class="section-heading"><a href="#improvements-and-new-features-38" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Add {line_delim, byte()} option to inet:setopts/2 and decode_packet/3</p><p>Own Id: OTP-12837</p></li></ul><h2 id="kernel-4-1" class="section-heading"><a href="#kernel-4-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 4.1</span></h2><h3 id="improvements-and-new-features-39" class="section-heading"><a href="#improvements-and-new-features-39" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>A mechanism for limiting the amount of text that the built-in error logger
events will produce has been introduced. It is useful for limiting both the
size of log files and the CPU time used to produce them.</p><p>This mechanism is experimental in the sense that it may be changed if it turns
out that it does not solve the problem it is supposed to solve. In that case,
there may be backward incompatible improvements to this mechanism.</p><p>See the documentation for the config parameter <code class="inline">error_logger_format_depth</code> in
the Kernel application for information about how to turn on this feature.</p><p>Own Id: OTP-12864</p></li></ul><h2 id="kernel-4-0" class="section-heading"><a href="#kernel-4-0" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 4.0</span></h2><h3 id="fixed-bugs-and-malfunctions-107" class="section-heading"><a href="#fixed-bugs-and-malfunctions-107" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix error handling in <a href="file.html#read_line/1"><code class="inline">file:read_line/1</code></a> for Unicode contents.</p><p>Own Id: OTP-12144</p></li><li><p>Introduce <a href="os.html#getenv/2"><code class="inline">os:getenv/2</code></a> which is similar to <a href="os.html#getenv/1"><code class="inline">os:getenv/1</code></a> but returns the
passed default value if the required environment variable is undefined.</p><p>Own Id: OTP-12342</p></li><li><p>It is now possible to paste text in JCL mode (using Ctrl-Y) that has been
copied in the previous shell session. Also a bug that caused the JCL mode to
crash when pasting text has been fixed.</p><p>Own Id: OTP-12673</p></li><li><p>Ensure that each segment of an IPv6 address when parsed from a string has a
maximum of 4 hex digits</p><p>Own Id: OTP-12773</p></li></ul><h3 id="improvements-and-new-features-40" class="section-heading"><a href="#improvements-and-new-features-40" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>New BIF: <a href="../../apps/erts/erlang.html#get_keys/0"><code class="inline">erlang:get_keys/0</code></a>, lists all keys associated with the process
dictionary. Note: <a href="../../apps/erts/erlang.html#get_keys/0"><code class="inline">erlang:get_keys/0</code></a> is auto-imported.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-12151 Aux Id: seq12521</p></li><li><p>The internal group to user_drv protocol has been changed to be synchronous in
order to guarantee that output sent to a process implementing the user_drv
protocol is printed before replying. This protocol is used by the
standard_output device and the ssh application when acting as a client.</p><p>This change changes the previous unlimited buffer when printing to standard_io
and other devices that end up in user_drv to 1KB.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-12240</p></li><li><p>The <code class="inline">inflateInit/2</code> and <code class="inline">deflateInit/6</code> functions now accepts a WindowBits
argument equal to 8 and -8.</p><p>Own Id: OTP-12564</p></li><li><p>Map error logger warnings to warning messages by default.</p><p>Own Id: OTP-12755</p></li><li><p>Map beam error logger warnings to warning messages by default. Previously
these messages were mapped to the error channel by default.</p><p>Own Id: OTP-12781</p></li><li><p>gen_tcp:shutdown/2 is now asynchronous</p><p>This solves the following problems with the old implementation:</p><p>It doesn't block when the TCP peer is idle or slow. This is the expected
behaviour when shutdown() is called: the caller needs to be able to continue
reading from the socket, not be prevented from doing so.</p><p>It doesn't truncate the output. The current version of gen_tcp:shutdown/2 will
truncate any outbound data in the driver queue after about 10 seconds if the
TCP peer is idle of slow. Worse yet, it doesn't even inform anyone that the
data has been truncated: 'ok' is returned to the caller; and a FIN rather than
an RST is sent to the TCP peer.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-12797</p></li><li><p>There are many cases where user code needs to be able to distinguish between a
socket that was closed normally and one that was aborted. Setting the option
{show_econnreset, true} enables the user to receive ECONNRESET errors on
both active and passive sockets.</p><p>Own Id: OTP-12843</p></li></ul><h2 id="kernel-3-2-0-1" class="section-heading"><a href="#kernel-3-2-0-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 3.2.0.1</span></h2><h3 id="fixed-bugs-and-malfunctions-108" class="section-heading"><a href="#fixed-bugs-and-malfunctions-108" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The 'raw' socket option could not be used multiple times in one call to any
e.g gen_tcp function because only one of the occurrences were used. This bug
has been fixed, and also a small bug concerning propagating error codes from
within inet:setopts/2.</p><p>Own Id: OTP-11482 Aux Id: seq12872</p></li></ul><h2 id="kernel-3-2" class="section-heading"><a href="#kernel-3-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 3.2</span></h2><h3 id="fixed-bugs-and-malfunctions-109" class="section-heading"><a href="#fixed-bugs-and-malfunctions-109" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>A bug causing an infinite loop in hostname resolving has been corrected. To
trigger this bug you would have to enter an bogus search method from a
configuration file e.g .inetrc.</p><p>Bug pinpointed by Emil Holmström</p><p>Own Id: OTP-12133</p></li><li><p>The standard_error process now handles the getopts I/O protocol request
correctly and stores its encoding in the same way as standard_io.</p><p>Also, io:put_chars(standard_error, [oops]) could previously crash the
standard_error process. This is now corrected.</p><p>Own Id: OTP-12424</p></li></ul><h3 id="improvements-and-new-features-41" class="section-heading"><a href="#improvements-and-new-features-41" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Configuration parameters for the Kernel application that allows setting socket
options for the distribution sockets have been added. See the application
Kernel documentation; parameters 'inet_dist_listen_options' and
'inet_dist_connect_options'.</p><p>Own Id: OTP-12476 Aux Id: OTP-12476</p></li></ul><h2 id="kernel-3-1" class="section-heading"><a href="#kernel-3-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 3.1</span></h2><h3 id="fixed-bugs-and-malfunctions-110" class="section-heading"><a href="#fixed-bugs-and-malfunctions-110" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Make sure to install .hrl files when needed</p><p>Own Id: OTP-12197</p></li><li><p>Removed the undocumented application environment variable 'raw_files' from the
kernel application. This variable was checked (by call to
application:get_env/2) each time a raw file was to be opened in the file
module.</p><p>Own Id: OTP-12276</p></li><li><p>A bug has been fixed when using the netns option to gen_udp, which
accidentally only worked if it was the last option.</p><p>Own Id: OTP-12314</p></li></ul><h3 id="improvements-and-new-features-42" class="section-heading"><a href="#improvements-and-new-features-42" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Updated documentation for inet buffer size options.</p><p>Own Id: OTP-12296</p></li><li><p>Introduce new option 'raw' in file_info and link_info functions. This option
allows the caller not to go through the file server for information about
files guaranteed to be local.</p><p>Own Id: OTP-12325</p></li></ul><h2 id="kernel-3-0-3" class="section-heading"><a href="#kernel-3-0-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 3.0.3</span></h2><h3 id="fixed-bugs-and-malfunctions-111" class="section-heading"><a href="#fixed-bugs-and-malfunctions-111" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Accept inet:ip_address() in net_adm:names/1</p><p>Own Id: OTP-12154</p></li></ul><h2 id="kernel-3-0-2" class="section-heading"><a href="#kernel-3-0-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 3.0.2</span></h2><h3 id="fixed-bugs-and-malfunctions-112" class="section-heading"><a href="#fixed-bugs-and-malfunctions-112" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>OTP-11850 fixed filelib:wildcard/1 to work with broken symlinks. This
correction, however, introduced problems since symlinks were no longer
followed for functions like filelib:ensure_dir/1, filelib:is_dir/1,
filelib:file_size/1, etc. This is now corrected.</p><p>Own Id: OTP-12054 Aux Id: seq12660</p></li></ul><h2 id="kernel-3-0-1" class="section-heading"><a href="#kernel-3-0-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 3.0.1</span></h2><h3 id="fixed-bugs-and-malfunctions-113" class="section-heading"><a href="#fixed-bugs-and-malfunctions-113" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>If the Config given to application_controller:change_application_data included
other config files, it was only expanded for already existing (loaded)
applications. If an upgrade added a new application which had config data in
an included config file, the new application did not get correct config data.</p><p>This is now changed so config data will be expanded for all applications.</p><p>Own Id: OTP-11864</p></li><li><p>It was allowed to re-load pre-loaded modules such as <code class="inline">erlang</code>, but that could
cause strange and unwanted things to happen, such as call
<a href="../../apps/erts/erlang.html#apply/3"><code class="inline">apply/3</code></a> to loop. Pre-loaded modules are now sticky by default.
(Thanks to Loïc Hoguin for reporting this bug.)</p><p><code class="inline">code:add_path(&quot;/ending/in/slash/&quot;)</code> removes the trailing slash, adding
<code class="inline">/ending/in/slash</code> to the code path. However,
<code class="inline">code:del_path(&quot;/ending/in/slash/&quot;)</code> would fail to remove the path since it
did not remove the trailing slash. This has been fixed.</p><p>Own Id: OTP-11913</p></li><li><p>Fix erts_debug:size/1 to handle Map sizes</p><p>Own Id: OTP-11923</p></li><li><p>The documentation for <code class="inline">file:file_info/1</code> has been removed. The function itself
was removed a long time ago.</p><p>Own Id: OTP-11982</p></li></ul><h2 id="kernel-3-0" class="section-heading"><a href="#kernel-3-0" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 3.0</span></h2><h3 id="fixed-bugs-and-malfunctions-114" class="section-heading"><a href="#fixed-bugs-and-malfunctions-114" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed a deadlock possibility in terminate application</p><p>Own Id: OTP-11171</p></li><li><p>Fixed bug where sendfile would return the wrong error code for a remotely
closed socket if the socket was in passive mode. (Thanks to Vincent Siliakus
for reporting the bug.)</p><p>Own Id: OTP-11614</p></li><li><p>The new option <code class="inline">persistent</code> is added to <a href="application.html#set_env/4"><code class="inline">application:set_env/4</code></a> and
<a href="application.html#unset_env/3"><code class="inline">application:unset_env/3</code></a>. An environment key set with the <code class="inline">persistent</code> option
will not be overridden by the ones configured in the application resource file
on load. This means persistent values will stick after the application is
loaded and also on application reload. (Thanks to José Valim)</p><p>Own Id: OTP-11708</p></li><li><p>The spec for file:set_cwd/1 is modified to also accept binaries as arguments.
This has always been allowed in the code, but it was not reflected in the spec
since binaries are mostly used for raw file names. Raw file names are names
that are not encoded according to file:native_name_encoding(), and these are
not allowed in file:set_cwd/1. The spec is now, however, more allowing in
order to avoid unnecessary dialyzer warnings. Raw file names will still fail
in runtime with reason 'no_translation'. (Thanks to José Valim)</p><p>Own Id: OTP-11787</p></li></ul><h3 id="improvements-and-new-features-43" class="section-heading"><a href="#improvements-and-new-features-43" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>heart:set_cmd/1 is updated to allow unicode code points &gt; 255 in the given
heart command</p><p>Own Id: OTP-10843</p></li><li><p>Dialyzer's <code class="inline">unmatched_return</code> warnings have been corrected.</p><p>Own Id: OTP-10908</p></li><li><p>Make erlang:open_port/2 spawn and spawn_executable handle unicode.</p><p>Own Id: OTP-11105</p></li><li><p>Erlang/OTP has been ported to the realtime operating system OSE. The port
supports both smp and non-smp emulator. For details around the port and how to
started see the User's Guide in the ose application.</p><p>Note that not all parts of Erlang/OTP has been ported.</p><p>Notable things that work are: non-smp and smp emulators, OSE signal
interaction, crypto, asn1, run_erl/to_erl, tcp, epmd, distribution and most if
not all non-os specific functionality of Erlang.</p><p>Notable things that does not work are: udp/sctp, os_mon, erl_interface,
binding of schedulers.</p><p>Own Id: OTP-11334</p></li><li><p>Add the {active,N} socket option for TCP, UDP, and SCTP, where N is an
integer in the range -32768..32767, to allow a caller to specify the number of
data messages to be delivered to the controlling process. Once the socket's
delivered message count either reaches 0 or is explicitly set to 0 with
inet:setopts/2 or by including {active,0} as an option when the socket is
created, the socket transitions to passive ({active, false}) mode and the
socket's controlling process receives a message to inform it of the
transition. TCP sockets receive {tcp_passive,Socket}, UDP sockets receive
{udp_passive,Socket} and SCTP sockets receive {sctp_passive,Socket}.</p><p>The socket's delivered message counter defaults to 0, but it can be set using
{active,N} via any gen_tcp, gen_udp, or gen_sctp function that takes socket
options as arguments, or via inet:setopts/2. New N values are added to the
socket's current counter value, and negative numbers can be used to reduce the
counter value. Specifying a number that would cause the socket's counter value
to go above 32767 causes an einval error. If a negative number is specified
such that the counter value would become negative, the socket's counter value
is set to 0 and the socket transitions to passive mode. If the counter value
is already 0 and inet:setopts(Socket, [{active,0}]) is specified, the
counter value remains at 0 but the appropriate passive mode transition message
is generated for the socket.</p><p>Thanks to Steve Vinoski</p><p>Own Id: OTP-11368</p></li><li><p>A call to either the <a href="../../apps/erts/erlang.html#garbage_collect/1"><code class="inline">garbage_collect/1</code></a> BIF or the
<a href="../../apps/erts/erlang.html#check_process_code/2"><code class="inline">check_process_code/2</code></a> BIF may trigger garbage
collection of another processes than the process calling the BIF. The previous
implementations performed these kinds of garbage collections without
considering the internal state of the process being garbage collected. In
order to be able to more easily and more efficiently implement yielding native
code, these types of garbage collections have been rewritten. A garbage
collection like this is now triggered by an asynchronous request signal, the
actual garbage collection is performed by the process being garbage collected
itself, and finalized by a reply signal to the process issuing the request.
Using this approach processes can disable garbage collection and yield without
having to set up the heap in a state that can be garbage collected.</p><p>The <a href="../../apps/erts/erlang.html#garbage_collect/2"><code class="inline">garbage_collect/2</code></a>, and
<a href="../../apps/erts/erlang.html#check_process_code/3"><code class="inline">check_process_code/3</code></a> BIFs have been
introduced. Both taking an option list as last argument. Using these, one can
issue asynchronous requests.</p><p><a href="code.html#purge/1"><code class="inline">code:purge/1</code></a> and <a href="code.html#soft_purge/1"><code class="inline">code:soft_purge/1</code></a> have been rewritten to utilize
asynchronous <code class="inline">check_process_code</code> requests in order to parallelize work.</p><p>Characteristics impact: A call to the
<a href="../../apps/erts/erlang.html#garbage_collect/1"><code class="inline">garbage_collect/1</code></a> BIF or the
<a href="../../apps/erts/erlang.html#check_process_code/2"><code class="inline">check_process_code/2</code></a> BIF will normally take longer
time to complete while the system as a whole won't be as much negatively
effected by the operation as before. A call to <a href="code.html#purge/1"><code class="inline">code:purge/1</code></a> and
<a href="code.html#soft_purge/1"><code class="inline">code:soft_purge/1</code></a> may complete faster or slower depending on the state of
the system while the system as a whole won't be as much negatively effected by
the operation as before.</p><p>Own Id: OTP-11388 Aux Id: OTP-11535, OTP-11648</p></li><li><p>Add sync option to file:open/2.</p><p>The sync option adds the POSIX O_SYNC flag to the open system call on
platforms that support the flag or its equivalent, e.g.,
FILE_FLAG_WRITE_THROUGH on Windows. For platforms that don't support it,
file:open/2 returns {error, enotsup} if the sync option is passed in. Thank
to Steve Vinoski and Joseph Blomstedt</p><p>Own Id: OTP-11498</p></li><li><p>The contract of <a href="inet.html#ntoa/1"><code class="inline">inet:ntoa/1</code></a> has been corrected.</p><p>Thanks to Max Treskin.</p><p>Own Id: OTP-11730</p></li></ul><h2 id="kernel-2-16-4-1" class="section-heading"><a href="#kernel-2-16-4-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.16.4.1</span></h2><h3 id="known-bugs-and-problems" class="section-heading"><a href="#known-bugs-and-problems" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Known Bugs and Problems</span></h3><ul><li><p>When using gen_tcp:connect and the <code class="inline">fd</code> option with <code class="inline">port</code> and/or <code class="inline">ip</code>, the
<code class="inline">port</code> and <code class="inline">ip</code> options were ignored. This has been fixed so that if <code class="inline">port</code>
and/or <code class="inline">ip</code> is specified together with <code class="inline">fd</code> a bind is requested for that <code class="inline">fd</code>.
If <code class="inline">port</code> and/or <code class="inline">ip</code> is not specified bind will not be called.</p><p>Own Id: OTP-12061</p></li></ul><h2 id="kernel-2-16-4" class="section-heading"><a href="#kernel-2-16-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.16.4</span></h2><h3 id="fixed-bugs-and-malfunctions-115" class="section-heading"><a href="#fixed-bugs-and-malfunctions-115" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix the typespec for the inet:ifget/2 and inet:ifget/3 return value. Thanks to
Ali Sabil.</p><p>Own Id: OTP-11377</p></li><li><p>Fix various typos in erts, kernel and ssh. Thanks to Martin Hässler.</p><p>Own Id: OTP-11414</p></li><li><p>Fix rpc multicall sample code. Thanks to Edwin Fine.</p><p>Own Id: OTP-11471</p></li><li><p>Under rare circumstances a process calling <a href="inet.html#close/1"><code class="inline">inet:close/1</code></a>, <a href="gen_tcp.html#close/1"><code class="inline">gen_tcp:close/1</code></a>,
<a href="gen_udp.html#close/1"><code class="inline">gen_udp:close/1</code></a>, or <a href="gen_sctp.html#close/1"><code class="inline">gen_sctp:close/1</code></a> could hang in the call indefinitely.</p><p>Own Id: OTP-11491</p></li></ul><h3 id="improvements-and-new-features-44" class="section-heading"><a href="#improvements-and-new-features-44" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Add more SCTP errors as described in RFC 4960. Thanks to Artem Teslenko.</p><p>Own Id: OTP-11379</p></li><li><p>Add new BIF os:unsetenv/1 which deletes an environment variable. Thanks to
Martin Hässler.</p><p>Own Id: OTP-11446</p></li></ul><h2 id="kernel-2-16-3" class="section-heading"><a href="#kernel-2-16-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.16.3</span></h2><h3 id="fixed-bugs-and-malfunctions-116" class="section-heading"><a href="#fixed-bugs-and-malfunctions-116" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix indentation of User switch command help in Erlang shell. Thanks to Sylvain
Benner.</p><p>Own Id: OTP-11209</p></li></ul><h3 id="improvements-and-new-features-45" class="section-heading"><a href="#improvements-and-new-features-45" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>The previous undocumented function ntoa/1 has been added to inet docs and
exported in the inet module.</p><p>Own Id: OTP-10676 Aux Id: OTP-10314</p></li><li><p>Fix typo in abcast() function comment. Thanks to Johannes Weissl.</p><p>Own Id: OTP-11219</p></li><li><p>Add application:ensure_all_started/1-2. Thanks to Fred Hebert.</p><p>Own Id: OTP-11250</p></li><li><p>Make edlin understand a few important control keys. Thanks to Stefan
Zegenhagen.</p><p>Own Id: OTP-11251</p></li><li><p>Cleanup of hipe_unified_loader, eliminating uses of is_subtype/2 in specs,
change module-local void functions to return 'ok' instead of [] and made sure
there are no dialyzer warnings with --Wunmatched_returns. Thanks to Kostis
Sagonas.</p><p>Own Id: OTP-11301</p></li></ul><h2 id="kernel-2-16-2" class="section-heading"><a href="#kernel-2-16-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.16.2</span></h2><h3 id="fixed-bugs-and-malfunctions-117" class="section-heading"><a href="#fixed-bugs-and-malfunctions-117" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>A bug in prim_inet has been corrected. If the port owner was killed at a bad
time while closing the socket port the port could become orphaned hence
causing port and socket leaking. Reported by Fred Herbert, Dmitry Belyaev and
others.</p><p>Own Id: OTP-10497 Aux Id: OTP-10562</p></li><li><p>A few bugs regarding case sensitivity for hostname resolution while using e.g
the internal lookup types 'file' and 'dns' has been corrected. When looking up
hostnames ASCII letters a-z are to be regarded as the same as A-Z according to
RFC 4343 &quot;Domain Name System (DNS) Case Insensitivity Clarification&quot;, and this
was not always the case.</p><p>Own Id: OTP-10689 Aux Id: seq12227</p></li></ul><h3 id="improvements-and-new-features-46" class="section-heading"><a href="#improvements-and-new-features-46" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Add <code class="inline">application:ensure_started/1,2</code>. It is equivavlent to
<code class="inline">application:start/1,2</code> except it returns <code class="inline">ok</code> for already started
applications.</p><p>Own Id: OTP-10910</p></li><li><p>Optimize communication with file io server. Thanks to Anthony Ramine.</p><p>Own Id: OTP-11040</p></li><li><p>Erlang source files with non-ASCII characters are now encoded in UTF-8
(instead of latin1).</p><p>Own Id: OTP-11041 Aux Id: OTP-10907</p></li><li><p>Optimization of simultaneous <code class="inline">inet_db</code> operations on the same socket by using
a lock free implementation.</p><p>Impact on the characteristics of the system: Improved performance.</p><p>Own Id: OTP-11074</p></li><li><p>The <code class="inline">high_msgq_watermark</code> and <code class="inline">low_msgq_watermark</code> <code class="inline">inet</code> socket options
introduced in OTP-R16A could only be set on TCP sockets. These options are now
generic and can be set on all types of sockets.</p><p>Own Id: OTP-11075 Aux Id: OTP-10336</p></li><li><p>Fix deep list argument error under Windows in os:cmd/1. Thanks to Aleksandr
Vinokurov .</p><p>Own Id: OTP-11104</p></li></ul><h2 id="kernel-2-16-1" class="section-heading"><a href="#kernel-2-16-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.16.1</span></h2><h3 id="fixed-bugs-and-malfunctions-118" class="section-heading"><a href="#fixed-bugs-and-malfunctions-118" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>A bug that could cause a crash with wrong reason has been corrected in the
<code class="inline">application_controller</code> module.</p><p>Own Id: OTP-10754</p></li><li><p>Fix <code class="inline">code:is_module_native/1</code> that sometimes in R16A returned false for hipe
compiled modules containing BIFs such as <code class="inline">lists</code>.</p><p>Own Id: OTP-10870</p></li><li><p>Respect <code class="inline">{exit_on_close,false}</code> option on tcp socket in non-passive mode when
receiving fails (due to an ill-formed packet for example) by only doing a half
close and still allow sending on the socket. (Thanks to Anthony Molinaro and
Steve Vinoski for reporting the problem)</p><p>Own Id: OTP-10879</p></li></ul><h3 id="improvements-and-new-features-47" class="section-heading"><a href="#improvements-and-new-features-47" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Slightly nicer error message when node start fails due to duplicate name.
Thanks to Magnus Henoch.</p><p>Own Id: OTP-10797</p></li><li><p>Miscellaneous updates due to Unicode support.</p><p>Own Id: OTP-10820</p></li><li><p>Add a new function code:get_mode() can be used to detect how the code servers
behaves. Thanks to Vlad Dumitrescu</p><p>Own Id: OTP-10823</p></li><li><p>Fix type of error Reason on gen_tcp:send/2. Thanks to Sean Cribbs.</p><p>Own Id: OTP-10839</p></li><li><p><a href="file.html#list_dir_all/1"><code class="inline">file:list_dir_all/1</code></a> and <a href="file.html#read_link_all/1"><code class="inline">file:read_link_all/1</code></a> that can handle raw file
names have been added. See the User Guide for STDLIB for information about raw
file names.</p><p>Own Id: OTP-10852</p></li></ul><h2 id="kernel-2-16" class="section-heading"><a href="#kernel-2-16" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.16</span></h2><h3 id="fixed-bugs-and-malfunctions-119" class="section-heading"><a href="#fixed-bugs-and-malfunctions-119" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>It is no longer possible to have <code class="inline">{Mod,Vsn}</code> in the 'modules' list in a .app
file.</p><p>This was earlier possible, although never documented in the .app file
reference manual. It was however visible in the documentation of
<code class="inline">application:load/[1,2]</code>, where the same term as in a .app file can be used as
the first argument.</p><p>The possibility has been removed since the <code class="inline">Vsn</code> part was never used.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-10417</p></li><li><p>The contract of <a href="erl_ddll.html#format_error/1"><code class="inline">erl_ddll:format_error/1</code></a> has been corrected. (Thanks to
Joseph Wayne Norton.)</p><p>Own Id: OTP-10473</p></li><li><p>Change printout of application crash message on startup to formatted strings
(Thanks to Serge Aleynikov)</p><p>Own Id: OTP-10620</p></li><li><p>The type <code class="inline">ascii_string()</code> in the <code class="inline">base64</code> module has been corrected. The type
<a href="file.html#t:file_info/0"><code class="inline">file:file_info()</code></a> has been cleaned up. The type
<a href="file.html#t:fd/0"><code class="inline">file:fd()</code></a> has been made opaque in the documentation.</p><p>Own Id: OTP-10624 Aux Id: kunagi-352 [263]</p></li></ul><h3 id="improvements-and-new-features-48" class="section-heading"><a href="#improvements-and-new-features-48" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Inet exported functionality</p><p>inet:parse_ipv4_address/1, inet:parse_ipv4strict_address/1,
inet:parse_ipv6_address/1, inet:parse_ipv6strict_address/1,
inet:parse_address/1 and inet:parse_strict_address is now exported from the
inet module.</p><p>Own Id: OTP-8067 Aux Id: kunagi-274 [185]</p></li><li><p>A boolean socket option 'ipv6_v6only' for IPv6 sockets has been added. The
default value of the option is OS dependent, so applications aiming to be
portable should consider using <code class="inline">{ipv6_v6only,true}</code> when creating an <code class="inline">inet6</code>
listening/destination socket, and if necessary also create an <code class="inline">inet</code> socket on
the same port for IPv4 traffic. See the documentation.</p><p>Own Id: OTP-8928 Aux Id: kunagi-193 [104]</p></li><li><p>Support for Unicode has been implemented.</p><p>Own Id: OTP-10302</p></li><li><p>The documentation for <a href="global.html#register_name/3"><code class="inline">global:register_name/3</code></a> has been updated to mention
that the use of <code class="inline">{Module,Function}</code> as the method argument (resolve function)
is deprecated.</p><p>Own Id: OTP-10419</p></li><li><p>Fixed bug where sendfile on oracle solaris would return an error when a
partial send was done.</p><p>Own Id: OTP-10549</p></li><li><p>The <code class="inline">error_handler</code> module will now call <code class="inline">'$handle_undefined_function'/2</code> if
an attempt is made to call a non-existing function in a module that exists.
See the documentation for <code class="inline">error_handler</code> module for details.</p><p>Own Id: OTP-10617 Aux Id: kunagi-340 [251]</p></li><li><p>Where necessary a comment stating encoding has been added to Erlang files. The
comment is meant to be removed in Erlang/OTP R17B when UTF-8 becomes the
default encoding.</p><p>Own Id: OTP-10630</p></li><li><p>Do not return wrong terms unnecessarily. (Thanks to Kostis Sagonas.)</p><p>Own Id: OTP-10662</p></li><li><p>Some examples overflowing the width of PDF pages have been corrected.</p><p>Own Id: OTP-10665</p></li><li><p>Add file:allocate/3 operation</p><p>This operation allows pre-allocation of space for files. It succeeds only on
systems that support such operation. (Thanks to Filipe David Manana)</p><p>Own Id: OTP-10680</p></li><li><p>Add application:get_key/3. The new function provides a default value for a
configuration parameter. Thanks to Serge Aleynikov.</p><p>Own Id: OTP-10694</p></li><li><p>Add search to Erlang shell's history. Thanks to Fred Herbert.</p><p>Own Id: OTP-10739</p></li></ul><h2 id="kernel-2-15-3" class="section-heading"><a href="#kernel-2-15-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.15.3</span></h2><h3 id="fixed-bugs-and-malfunctions-120" class="section-heading"><a href="#fixed-bugs-and-malfunctions-120" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Ensure 'erl_crash.dump' when asked for it. This will change erl_crash.dump
behaviour.</p><p>* Not setting ERL_CRASH_DUMP_SECONDS will now terminate beam immediately on a
crash without writing a crash dump file.</p><p>* Setting ERL_CRASH_DUMP_SECONDS to 0 will also terminate beam immediately on
a crash without writing a crash dump file, i.e. same as not setting
ERL_CRASH_DUMP_SECONDS environment variable.</p><p>* Setting ERL_CRASH_DUMP_SECONDS to a negative value will let the beam wait
indefinitely on the crash dump file being written.</p><p>* Setting ERL_CRASH_DUMP_SECONDS to a positive value will let the beam wait
that many seconds on the crash dump file being written.</p><p>A positive value will set an alarm/timeout for restart both in beam and in
heart if heart is running.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-10422 Aux Id: kunagi-250 [161]</p></li></ul><h2 id="kernel-2-15-2" class="section-heading"><a href="#kernel-2-15-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.15.2</span></h2><h3 id="fixed-bugs-and-malfunctions-121" class="section-heading"><a href="#fixed-bugs-and-malfunctions-121" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed issue where using controlling_process/2 with self() as the second
argument caused the port to leak if self() crashes. (Thanks to Ricardo
Catalinas Jiménez)</p><p>Own Id: OTP-10094</p></li><li><p>When sending large files using the file:sendfile fallback file:sendfile would
crash. This is now fixed.</p><p>Own Id: OTP-10098</p></li><li><p>Fix rpc:call/5 for local calls with a finite Timeout (Thanks to Tomer
Chachamu)</p><p>Own Id: OTP-10149</p></li><li><p>fix escript/primary archive reloading</p><p>If the mtime of an escript/primary archive file changes after being added to
the code path, correctly reload the archive and update the cache. (Thanks to
Tuncer Ayaz)</p><p>Own Id: OTP-10151</p></li><li><p>Support added for home directories named with non-ASCII characters (codepoints
above 127) on a system running in Unicode file mode (e.g. on MacOSX or Linux
with startup arguments +fnu or +fna with the right LOCALE). Also environment
variables with Unicode content are supported in applicable environments.</p><p>Own Id: OTP-10160</p></li><li><p>Allow mixed IPv4 and IPv6 addresses to sctp_bindx</p><p>Also allow mixed address families to bind, since the first address on a
multihomed sctp socket must be bound with bind, while the rest are to be bound
using sctp_bindx. At least Linux supports adding address of mixing families.
Make inet_set_faddress function available also when HAVE_SCTP is not defined,
since we use it to find an address for bind to be able to mix ipv4 and ipv6
addresses. Thanks to Tomas Abrahamsson</p><p>Own Id: OTP-10217</p></li></ul><h3 id="improvements-and-new-features-49" class="section-heading"><a href="#improvements-and-new-features-49" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Document inet options: high_watermark, priority, linger and a some other
options that previously was undocumented.</p><p>Own Id: OTP-10053</p></li><li><p>Remove bit8 option support from inet</p><p>Own Id: OTP-10056</p></li><li><p>The type of the disk log header has been corrected. (Thanks to Niclas Eklund.)</p><p>Own Id: OTP-10131</p></li></ul><h2 id="kernel-2-15-1" class="section-heading"><a href="#kernel-2-15-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.15.1</span></h2><h3 id="fixed-bugs-and-malfunctions-122" class="section-heading"><a href="#fixed-bugs-and-malfunctions-122" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Driver output has been corrected so output of large binaries (&gt; 4 GiB) now
does not silently fail or crash the emulator, but either outputs the binary or
fails the call. This means that writing a binary &gt; 4 Gib to file now works but
on e.g 64-bit Windows (that has scatter/gather I/O buffer segment lengths of
32 bits) fails. The behaviour may change in the future to always write the
binary, in parts if necessary.</p><p>Own Id: OTP-9820 Aux Id: OTP-9795</p></li><li><p>erts: minor fix for unnecessary condition erts: change SENDFILE_CHUNK_SIZE
from signed to unsigned (Thanks to jovi zhang)</p><p>Own Id: OTP-9872</p></li><li><p>Two contracts in <code class="inline">gen_sctp</code> have been corrected.</p><p>Own Id: OTP-9874</p></li><li><p>If a process calls a module with an running on_load handler, the process is
supposed to be suspended. But if the module with the on_load handler was
loading used <a href="code.html#load_binary/3"><code class="inline">code:load_binary/3</code></a>, the call would instead fail with an <code class="inline">undef</code>
exception.</p><p>Own Id: OTP-9875</p></li><li><p>File name and error reason is now returned if creation of a cookie fails.
(Thanks to Magnus Henoch)</p><p>Own Id: OTP-9954</p></li><li><p>Fix port leak in <code class="inline">zlib</code> when passing invalid data to
<code class="inline">compress,uncompress,zip,unzip,gzip,gunzip</code>.</p><p>Own Id: OTP-9981</p></li><li><p>Various typographical errors corrected in documentation for the global,
error_logger, etop, lists, ets and supervisor modules and in the c_portdriver
and kernel_app documentation. (Thanks to Ricardo Catalinas Jiménez)</p><p>Own Id: OTP-9987</p></li><li><p>Fix returned error from gen_tcp:accept/1,2 when running out of ports.</p><p>The {error, enfile} return value is badly misleading and confusing for this
case, since the Posix ENFILE errno value has a well-defined meaning that has
nothing to do with Erlang ports. The fix changes the return value to {error,
system_limit}, which is consistent with e.g. various file(3) functions.
inet:format_error/1 has also been updated to support system_limit in the same
manner as file:format_error/1. (Thanks to Per Hedeland)</p><p>Own Id: OTP-9990</p></li><li><p><code class="inline">erts_debug:size/1</code> has been corrected to take sharing in the environment of
funs into account. For funs it used to always give the same result as
<code class="inline">erts_debug:flat_size/1</code>.</p><p>Own Id: OTP-9991</p></li><li><p>In some cases when the process doing file:sendfile crashes while sending the
file the efile_drv code would not clean up after itself correctly. This has
now been fixed.</p><p>Own Id: OTP-9993</p></li><li><p>On BSD based platforms file:sendfile would sometime go into an infinite loop
when sending big files. This has now been fixed.</p><p>Own Id: OTP-9994</p></li><li><p>While <code class="inline">disk_log</code> eagerly collects logged terms for better performance,
collecting too much data may choke the system and cause huge binaries to be
written.</p><p>The problem was addressed in OTP-9764, but the situation was not improved in
all cases.</p><p>(Thanks to Richard Carlsson.)</p><p>Own Id: OTP-9999 Aux Id: OTP-9764</p></li><li><p>The documentation of .app files incorrectly said that the default value for
the <code class="inline">mod</code> parameter is <code class="inline">undefined</code>. This is now corrected to <code class="inline">[]</code>.</p><p>Own Id: OTP-10002</p></li></ul><h2 id="kernel-2-15" class="section-heading"><a href="#kernel-2-15" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.15</span></h2><h3 id="fixed-bugs-and-malfunctions-123" class="section-heading"><a href="#fixed-bugs-and-malfunctions-123" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Calls to <a href="global.html#whereis_name/1"><code class="inline">global:whereis_name/1</code></a> have been substituted for calls to
<code class="inline">global:safe_whereis_name/1</code> since the latter is not safe at all.</p><p>The reason for not doing this earlier is that setting a global lock masked out
a bug concerning the restart of supervised children. The bug has now been
fixed by a modification of <a href="global.html#whereis_name/1"><code class="inline">global:whereis_name/1</code></a>. (Thanks to Ulf Wiger for
code contribution.)</p><p>A minor race conditions in <code class="inline">gen_fsm:start*</code> has been fixed: if one of these
functions returned <code class="inline">{error, Reason}</code> or ignore, the name could still be
registered (either locally or in <code class="inline">global</code>. (This is the same modification as
was done for gen_server in OTP-7669.)</p><p>The undocumented function <code class="inline">global:safe_whereis_name/1</code> has been removed.</p><p>Own Id: OTP-9212 Aux Id: seq7117, OTP-4174</p></li><li><p>Honor option <code class="inline">packet_size</code> for http packet parsing by both TCP socket and
<code class="inline">erlang:decode_packet</code>. This gives the ability to accept HTTP headers larger
than the default setting, but also avoid DoS attacks by accepting lines only
up to whatever length you wish to allow. For consistency, packet type <code class="inline">line</code>
also honor option <code class="inline">packet_size</code>. (Thanks to Steve Vinoski)</p><p>Own Id: OTP-9389</p></li><li><p><code class="inline">disk_log:reopen/2,3</code> and <a href="disk_log.html#breopen/3"><code class="inline">disk_log:breopen/3</code></a> could return the error reason
from <a href="file.html#rename/2"><code class="inline">file:rename/2</code></a> rather than the reason <code class="inline">{file_error, Filename, Reason}</code>.
This bug has been fixed.</p><p>The message <code class="inline">{disk_log, Node, {error, disk_log_stopped}}</code> which according the
documentation is sent upon failure to truncate or reopen a disk log was
sometimes turned into a reply. This bug has been fixed.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-9508</p></li><li><p>Environment variable 'shutdown_timeout' is added to kernel application.
Earlier, application_controller would hang forever if an application top
supervisor did not terminate upon a shutdown request. If this new environment
variable is set to a positive integer T, then application controller will now
give up after T milliseconds and instead brutally kill the application. For
backwards compatibility, the default value for shutdown_timeout is 'infinity'.</p><p>Own Id: OTP-9540</p></li><li><p>Add '-callback' attributes in stdlib's behaviours</p><p>Replace the behaviour_info(callbacks) export in stdlib's behaviours with
-callback' attributes for all the callbacks. Update the documentation with
information on the callback attribute Automatically generate 'behaviour_info'
function from '-callback' attributes</p><p>'behaviour_info(callbacks)' is a special function that is defined in a module
which describes a behaviour and returns a list of its callbacks.</p><p>This function is now automatically generated using the '-callback' specs. An
error is returned by lint if user defines both '-callback' attributes and the
behaviour_info/1 function. If no type info is needed for a callback use a
generic spec for it. Add '-callback' attribute to language syntax</p><p>Behaviours may define specs for their callbacks using the familiar spec
syntax, replacing the '-spec' keyword with '-callback'. Simple lint checks are
performed to ensure that no callbacks are defined twice and all types referred
are declared.</p><p>These attributes can be then used by tools to provide documentation to the
behaviour or find discrepancies in the callback definitions in the callback
module.</p><p>Add callback specs into 'application' module in kernel Add callback specs to
tftp module following internet documentation Add callback specs to
inets_service module following possibly deprecated comments</p><p>Own Id: OTP-9621</p></li><li><p>make tab completion work in remote shells (Thanks to Mats Cronqvist)</p><p>Own Id: OTP-9673</p></li><li><p>Add missing parenthesis in heart doc.</p><p>Add missing spaces in the Reference Manual distributed section.</p><p>In the HTML version of the doc those spaces are necessary to separate those
words.</p><p>Own Id: OTP-9693</p></li><li><p>Fixes net_kernel:get_net_ticktime() doc</p><p>Adds missing description when `ignored' is returned. (Thanks to Ricardo
Catalinas Jiménez )</p><p>Own Id: OTP-9713</p></li><li><p>While <code class="inline">disk_log</code> eagerly collects logged terms for better performance,
collecting too much data may choke the system and cause huge binaries to be
written. In order to remedy the situation a (small) limit on the amount of
data that is collected before writing to disk has been introduced.</p><p>Own Id: OTP-9764</p></li><li><ul><li>Correct callback spec in application module</li><li>Refine warning about callback specs with extra ranges</li><li>Cleanup autoimport compiler directives</li><li>Fix Dialyzer's warnings in typer</li><li>Fix Dialyzer's warning for its own code</li><li>Fix bug in Dialyzer's behaviours analysis</li><li>Fix crash in Dialyzer</li><li>Variable substitution was not generalizing any unknown variables.</li></ul><p>Own Id: OTP-9776</p></li><li><p>Fix a crash when file:change_time/2,3 are called with invalid dates</p><p>Calling file:change_time/2,3 with an invalid date tuple (e.g
file:change_time(&quot;file.txt&quot;, {undefined, undefined})) will cause
file_server_2 to crash. error_logger will shutdown and the whole VM will stop.
Change behavior to validate given dates on system boundaries. (i.e before
issuing a server call).(Thanks to Ahmed Omar)</p><p>Own Id: OTP-9785</p></li></ul><h3 id="improvements-and-new-features-50" class="section-heading"><a href="#improvements-and-new-features-50" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>An option list argument can now be passed to
<code class="inline">file:read_file_info/2, file:read_link_info/2</code> and <a href="file.html#write_file_info/3"><code class="inline">file:write_file_info/3</code></a>
and set time type information in the call. Valid options are
<code class="inline">{time, local}, {time, universal}</code> and <code class="inline">{time, posix}</code>. In the case of <code class="inline">posix</code>
time no conversions are made which makes the operation a bit faster.</p><p>Own Id: OTP-7687</p></li><li><p><code class="inline">file:list_dir/1,2</code> will now fill an buffer entire with filenames from the
efile driver before sending it to an erlang process. This will speed up this
file operation in most cases.</p><p>Own Id: OTP-9023</p></li><li><p>gen_sctp:open/0-2 may now return {error,eprotonosupport} if SCTP is not
supported</p><p>gen_sctp:peeloff/1 has been implemented and creates a one-to-one socket which
also are supported now</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-9239</p></li><li><p>Sendfile has been added to the file module's API. sendfile/2 is used to read
data from a file and send it to a tcp socket using a zero copying mechanism if
available on that OS.</p><p>Thanks to Tuncer Ayaz and Steve Vinovski for original implementation</p><p>Own Id: OTP-9240</p></li><li><p>Tuple funs (a two-element tuple with a module name and a function) are now
officially deprecated and will be removed in R16. Use '<code class="inline">fun M:F/A</code>' instead.
To make you aware that your system uses tuple funs, the very first time a
tuple fun is applied, a warning will be sent to the error logger.</p><p>Own Id: OTP-9649</p></li></ul><h2 id="kernel-2-14-5" class="section-heading"><a href="#kernel-2-14-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.14.5</span></h2><h3 id="fixed-bugs-and-malfunctions-124" class="section-heading"><a href="#fixed-bugs-and-malfunctions-124" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix type of Packet arg of gen_tcp:send/2 and gen_udp:send/4</p><p>The type is marked as a binary() or a string() but in practice it can be an
iodata(). The test suite was updated to confirm the gen_tcp/2 and
gen_udp:send/4 functions accept iodata() (iolists) packets. (Thanks to Filipe
David Manana)</p><p>Own Id: OTP-9514</p></li><li><p>XML files have been corrected.</p><p>Own Id: OTP-9550 Aux Id: OTP-9541</p></li></ul><h3 id="improvements-and-new-features-51" class="section-heading"><a href="#improvements-and-new-features-51" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>The types and specifications of the inet modules have been improved.</p><p>Own Id: OTP-9260</p></li><li><p>Types and specifications have been added.</p><p>Own Id: OTP-9356</p></li><li><p>Contracts in STDLIB and Kernel have been improved and type errors have been
corrected.</p><p>Own Id: OTP-9485</p></li><li><p>Update documentation and specifications of some of the zlib functions.</p><p>Own Id: OTP-9506</p></li></ul><h2 id="kernel-2-14-4" class="section-heading"><a href="#kernel-2-14-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.14.4</span></h2><h3 id="fixed-bugs-and-malfunctions-125" class="section-heading"><a href="#fixed-bugs-and-malfunctions-125" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The send_timeout option in gen_tcp did not work properly in active mode or
with {active,once} options. This is now corrected.</p><p>Own Id: OTP-9145</p></li><li><p>Fixed various typos across the documentation (Thanks to Tuncer Ayaz)</p><p>Own Id: OTP-9154</p></li><li><p>Fix typo in doc of rpc:pmap/3 (Thanks to Ricardo Catalinas Jiménez)</p><p>Own Id: OTP-9168</p></li><li><p>A bug in inet_res, the specialized DNS resolver, has been corrected. A late
answer with unfortunate timing could cause a runtime exception. Some code
cleanup and improvements also tagged along. Thanks to Evegeniy Khramtsov for a
pinpointing bug report and bug fix testing.</p><p>Own Id: OTP-9221 Aux Id: OTP-8712</p></li></ul><h3 id="improvements-and-new-features-52" class="section-heading"><a href="#improvements-and-new-features-52" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Types and specifications have been added.</p><p>Own Id: OTP-9268</p></li><li><p>Erlang types and specifications are used for documentation.</p><p>Own Id: OTP-9272</p></li><li><p>Two opaque types that could cause warnings when running Dialyzer have been
modified.</p><p>Own Id: OTP-9337</p></li></ul><h2 id="kernel-2-14-3" class="section-heading"><a href="#kernel-2-14-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.14.3</span></h2><h3 id="fixed-bugs-and-malfunctions-126" class="section-heading"><a href="#fixed-bugs-and-malfunctions-126" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p><code class="inline">os:find_executable/{1,2}</code> will no longer return the path of a directory that
happens to be in the PATH.</p><p>Own Id: OTP-8983 Aux Id: seq11749</p></li><li><p>Fix -spec for file:write_file/3</p><p>Change type for second parameter from binary() to iodata(), since the function
explicitly takes steps to accept lists as well as binaries. (thanks to Magnus
Henoch).</p><p>Own Id: OTP-9067</p></li><li><p>Sanitize the specs of the code module</p><p>After the addition of unicode_binary() to the file:filename() type, dialyzer
started complaining about erroneous or incomplete specs in some functions of
the 'code' module. The culprit was hard-coded information in erl_bif_types for
functions of this module, which were not updated. Since these functions have
proper specs these days and code duplication (pun intended) is never a good
idea, their type information was removed from erl_bif_types.</p><p>While doing this, some erroneous comments were fixed in the code module and
also made sure that the code now runs without dialyzer warnings even when the
-Wunmatched_returns option is used.</p><p>Some cleanups were applied to erl_bif_types too.</p><p>Own Id: OTP-9100</p></li><li><p>- Add spec for function that does not return - Strengthen spec - Introduce
types to avoid duplication in specs - Add specs for functions that do not
return - Add specs for behaviour callbacks - Simplify two specs</p><p>Own Id: OTP-9127</p></li></ul><h2 id="kernel-2-14-2" class="section-heading"><a href="#kernel-2-14-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.14.2</span></h2><h3 id="improvements-and-new-features-53" class="section-heading"><a href="#improvements-and-new-features-53" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>The Erlang VM now supports Unicode filenames. The feature is turned on by
default on systems where Unicode filenames are mandatory (Windows and MacOSX),
but can be enabled on other systems with the '+fnu' emulator option. Enabling
the Unicode filename feature on systems where it is not default is however
considered experimental and not to be used for production. Together with the
Unicode file name support, the concept of &quot;raw filenames&quot; is introduced, which
means filenames provided without implicit unicode encoding translation. Raw
filenames are provided as binaries, not lists. For further information, see
stdlib users guide and the chapter about using Unicode in Erlang. Also see the
file module manual page.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-8887</p></li><li><p>There is now a new function inet:getifaddrs/0 modeled after C library function
getifaddrs() on BSD and LInux that reports existing interfaces and their
addresses on the host. This replaces the undocumented and unsupported
inet:getiflist/0 and inet:ifget/2.</p><p>Own Id: OTP-8926</p></li></ul><h2 id="kernel-2-14-1-1" class="section-heading"><a href="#kernel-2-14-1-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.14.1.1</span></h2><h3 id="fixed-bugs-and-malfunctions-127" class="section-heading"><a href="#fixed-bugs-and-malfunctions-127" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>In embedded mode, on_load handlers that called <a href="code.html#priv_dir/1"><code class="inline">code:priv_dir/1</code></a> or other
functions in <code class="inline">code</code> would hang the system. Since the <code class="inline">crypto</code> application now
contains an on_loader handler that calls <a href="code.html#priv_dir/1"><code class="inline">code:priv_dir/1</code></a>, including the
<code class="inline">crypto</code> application in the boot file would prevent the system from starting.</p><p>Also extended the <code class="inline">-init_debug</code> option to print information about on_load
handlers being run to facilitate debugging.</p><p>Own Id: OTP-8902 Aux Id: seq11703</p></li></ul><h2 id="kernel-2-14-1" class="section-heading"><a href="#kernel-2-14-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.14.1</span></h2><h3 id="fixed-bugs-and-malfunctions-128" class="section-heading"><a href="#fixed-bugs-and-malfunctions-128" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed: inet:setopts(S, [{linger,{true,2}}]) returned {error,einval} for
SCTP sockets. The inet_drv had a bug when checking the option size.</p><p>Own Id: OTP-8726 Aux Id: seq11617</p></li><li><p>gen_udp:connect/3 was broken for SCTP enabled builds. It did not detect remote
end errors as it should.</p><p>Own Id: OTP-8729</p></li><li><p>reference() has been substituted for ref() in the documentation.</p><p>Own Id: OTP-8733</p></li><li><p>A bug introduced in kernel-2.13.5.3 has been fixed. If running
<a href="net_kernel.html#set_net_ticktime/1"><code class="inline">net_kernel:set_net_ticktime/1</code></a> twice within the <code class="inline">TransitionPerod</code> the second
call caused the net_kernel process to crash with a <code class="inline">badmatch</code>.</p><p>Own Id: OTP-8787 Aux Id: seq11657, OTP-8643</p></li><li><p>inet:getsockopt for SCTP sctp_default_send_param had a bug to not initialize
required feilds causing random answers. It is now corrected.</p><p>Own Id: OTP-8795 Aux Id: seq11655</p></li><li><p>For a socket in the HTTP packet mode, the return value from <code class="inline">gen_tcp:recv/2,3</code>
if there is an error in the header will be <code class="inline">{ok,{http_error,String}}</code> instead
of <code class="inline">{error,{http_error,String}}</code> to be consistent with <code class="inline">ssl:recv/2,3</code>.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-8831</p></li></ul><h3 id="improvements-and-new-features-54" class="section-heading"><a href="#improvements-and-new-features-54" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Even when configuring erlang with --enable-native-libs, the native code for
modules loaded very early (such as lists) would not get loaded. This has been
corrected. (Thanks to Paul Guyot.)</p><p>Own Id: OTP-8750</p></li><li><p>The undocumented function inet:ifget/2 has been improved to return interface
hardware address (MAC) on platforms supporting getaddrinfo() (such as BSD
unixes). Note it still does not work on all platforms for example not Windows
nor Solaris, so the function is still undocumented.</p><p>Buffer overflow and field init bugs for inet:ifget/2 and inet:getservbyname/2
has also been fixed.</p><p>Thanks to Michael Santos.</p><p>Own Id: OTP-8816</p></li><li><p>As a usability improvement the 'inet6' option to functions gen_tcp:listen/2,
gen_tcp:connect/3-4, gen_udp:open/2 and gen_sctp:open/1-2 is now implicit if
the address argument or the 'ip' option contain an IPv6 address (8-tuple).</p><p>Own Id: OTP-8822</p></li></ul><h2 id="kernel-2-14" class="section-heading"><a href="#kernel-2-14" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.14</span></h2><h3 id="fixed-bugs-and-malfunctions-129" class="section-heading"><a href="#fixed-bugs-and-malfunctions-129" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>os:find_executable can now be fed with the complete name of the executable on
Windows and still find it. I.e os:find_executable(&quot;werl.exe&quot;) will work as
os:find_executable(&quot;werl&quot;).</p><p>Own Id: OTP-3626</p></li><li><p>The shell's line editing has been improved to more resemble the behaviour of
readline and other shells. (Thanks to Dave Peticolas)</p><p>Own Id: OTP-8635</p></li><li><p>Under certain circumstances the net kernel could hang. (Thanks to Scott Lystig
Fritchie.)</p><p>Own Id: OTP-8643 Aux Id: seq11584</p></li><li><p>The kernel DNS resolver was leaking one or two ports if the DNS reply could
not be parsed or if the resolver(s) caused noconnection type errors. Bug now
fixed. A DNS specification borderline truncated reply triggering the port
leakage bug has also been fixed.</p><p>Own Id: OTP-8652</p></li></ul><h3 id="improvements-and-new-features-55" class="section-heading"><a href="#improvements-and-new-features-55" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>As of this version, the global name server no longer supports nodes running
Erlang/OTP R11B.</p><p>Own Id: OTP-8527</p></li><li><p>The file module's functions write,read and read_line now handles named
io_servers like 'standard_io' and 'standard_error' correctly.</p><p>Own Id: OTP-8611</p></li><li><p>The functions file:advise/4 and file:datasync/1 have been added. (Thanks to
Filipe David Manana.)</p><p>Own Id: OTP-8637</p></li><li><p>When exchanging groups between nodes <code class="inline">pg2</code> did not remove duplicated members.
This bug was introduced in R13B03 (kernel-2.13.4).</p><p>Own Id: OTP-8653</p></li><li><p>There is a new option 'exclusive' to file:open/2 that uses the OS O_EXCL flag
where supported to open the file in exclusive mode.</p><p>Own Id: OTP-8670</p></li></ul><h2 id="kernel-2-13-5-3" class="section-heading"><a href="#kernel-2-13-5-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.13.5.3</span></h2><h3 id="fixed-bugs-and-malfunctions-130" class="section-heading"><a href="#fixed-bugs-and-malfunctions-130" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>A bug introduced in Kernel 2.13.5.2 has been fixed.</p><p>Own Id: OTP-8686 Aux Id: OTP-8643</p></li></ul><h2 id="kernel-2-13-5-2" class="section-heading"><a href="#kernel-2-13-5-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.13.5.2</span></h2><h3 id="fixed-bugs-and-malfunctions-131" class="section-heading"><a href="#fixed-bugs-and-malfunctions-131" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Under certain circumstances the net kernel could hang. (Thanks to Scott Lystig
Fritchie.)</p><p>Own Id: OTP-8643 Aux Id: seq11584</p></li></ul><h2 id="kernel-2-13-5-1" class="section-heading"><a href="#kernel-2-13-5-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.13.5.1</span></h2><h3 id="fixed-bugs-and-malfunctions-132" class="section-heading"><a href="#fixed-bugs-and-malfunctions-132" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>A race condition in <a href="os.html#cmd/1"><code class="inline">os:cmd/1</code></a> could cause the caller to get stuck in
<a href="os.html#cmd/1"><code class="inline">os:cmd/1</code></a> forever.</p><p>Own Id: OTP-8502</p></li></ul><h2 id="kernel-2-13-5" class="section-heading"><a href="#kernel-2-13-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.13.5</span></h2><h3 id="fixed-bugs-and-malfunctions-133" class="section-heading"><a href="#fixed-bugs-and-malfunctions-133" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>A race bug affecting <code class="inline">pg2:get_local_members/1</code> has been fixed. The bug was
introduced in R13B03.</p><p>Own Id: OTP-8358</p></li><li><p>The loading of native code was not properly atomic in the SMP emulator, which
could cause crashes. Also a per-MFA information table for the native code has
now been protected with a lock since it turns that it could be accessed
concurrently in the SMP emulator. (Thanks to Mikael Pettersson.)</p><p>Own Id: OTP-8397</p></li><li><p>user.erl (used in oldshell) is updated to handle unicode in prompt strings
(io:get_line/{1,2}). io_lib is also updated to format prompts with the 't'
modifier (i.e. ~ts instead of ~s).</p><p>Own Id: OTP-8418 Aux Id: OTP-8393</p></li><li><p>The resolver routines failed to look up the own node name as hostname, if the
OS native resolver was erroneously configured, bug reported by Yogish Baliga,
now fixed.</p><p>The resolver routines now tries to parse the hostname as an IP string as most
OS resolvers do, unless the native resolver is used.</p><p>The DNS resolver inet_res and file resolver inet_hosts now do not read OS
configuration files until they are needed. Since the native resolver is
default, in most cases they are never needed.</p><p>The DNS resolver's automatic updating of OS configuration file data
(/etc/resolv.conf) now uses the 'domain' keyword as default search domain if
there is no 'search' keyword.</p><p>Own Id: OTP-8426 Aux Id: OTP-8381</p></li></ul><h3 id="improvements-and-new-features-56" class="section-heading"><a href="#improvements-and-new-features-56" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>The expected return value for an on_load function has been changed. (See the
section about code loading in the Reference manual.)</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-8339</p></li><li><p>Explicit top directories in archive files are now optional.</p><p>For example, if an archive (app-vsn.ez) just contains an app-vsn/ebin/mod.beam
file, the file info for the app-vsn and app-vsn/ebin directories are faked
using the file info from the archive file as origin. The virtual directories
can also be listed. For short, the top directories are virtual if they does
not exist.</p><p>Own Id: OTP-8387</p></li><li><p><a href="code.html#clash/0"><code class="inline">code:clash/0</code></a> now looks inside archives (.ez files). (Thanks to Tuncer Ayaz.)</p><p>Own Id: OTP-8413</p></li><li><p>There are new <code class="inline">gen_sctp:connect_init/*</code> functions that initiate an SCTP
connection without blocking for the result. The result is delivered
asynchronously as an sctp_assoc_change event. (Thanks to Simon Cornish.)</p><p>Own Id: OTP-8414</p></li></ul><h2 id="kernel-2-13-4" class="section-heading"><a href="#kernel-2-13-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.13.4</span></h2><h3 id="fixed-bugs-and-malfunctions-134" class="section-heading"><a href="#fixed-bugs-and-malfunctions-134" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>A link in <code class="inline">m:pg2</code> has been fixed. (Thanks to Christophe Romain.)</p><p>Own Id: OTP-8198</p></li><li><p>A ticker process could potentially be blocked indefinitely trying to send a
tick to a node not responding. If this happened, the connection would not be
brought down as it should.</p><p>Own Id: OTP-8218</p></li><li><p>A bug in <code class="inline">pg2</code> when members who died did not leave process groups has been
fixed. (Thanks to Matthew Dempsky.)</p><p>Own Id: OTP-8259</p></li></ul><h3 id="improvements-and-new-features-57" class="section-heading"><a href="#improvements-and-new-features-57" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>The documentation is now built with open source tools (xsltproc and fop) that
exists on most platforms. One visible change is that the frames are removed.</p><p>Own Id: OTP-8201</p></li><li><p>The top directory in archive files does not need to have a <code class="inline">-vsn</code> suffix
anymore. For example if the archive file has the name like <code class="inline">mnesia-4.4.7.ez</code>
the top directory in the archive can either be named <code class="inline">mnesia</code> or
<code class="inline">mnesia-4.4.7</code>. If the archive file has a name like <code class="inline">mnesia.ez</code> the top
directory in the archive must be named <code class="inline">mnesia</code> as earlier.</p><p>Own Id: OTP-8266</p></li><li><p>The -on_load() directive can be used to run a function when a module is
loaded. It is documented in the section about code loading in the Reference
Manual.</p><p>Own Id: OTP-8295</p></li></ul><h2 id="kernel-2-13-3" class="section-heading"><a href="#kernel-2-13-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.13.3</span></h2><h3 id="improvements-and-new-features-58" class="section-heading"><a href="#improvements-and-new-features-58" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>The DNS resolver client inet_res has been rewritten, documented and released.
See inet_res(3) and Erts User's Guide: Inet configuration.</p><p>It can formally not be incompatible with respect to earlier versions since
there was no earlier official version. However it was used before and some
details have changed.</p><p>Configuration now initializes from /etc/resolv.conf and /etc/hosts on all unix
platforms regardless of which distribution mode the node is started in. The
directory (/etc) these files are supposed to reside in can be changed via an
environment variable. These configuration file locations can also be changed
in the inet configuration. The files are monitored for change and re-read,
which makes a few resolver configuration variables out of application control.
The /etc/hosts entries have now their own cache table that is shadowed (with
lookup method 'file' is used) by the application configured host entries. This
problem (that inet_res configuration only worked for distribution mode long
names) was among other reported by Matthew O'Gorman many moons ago.</p><p>The lookup methods are still 'native' only per default. Resolver configuration
is done on all Unix platforms just to get a usable configuration for direct
calls to inet_res.</p><p>The functions <code class="inline">inet_res:nslookup/3..5</code> and <code class="inline">inet_res:nnslookup/4..4</code> are no
longer recommended to use, instead use <code class="inline">inet_res:lookup/3..5</code> and
<code class="inline">inet_res:resolve/3..5</code> which provide clearer argument types and the
possibility to override options in the call.</p><p>Users of previous unsupported versions of inet_res have included internal
header files to get to the internal record definitions in order to examine DNS
replies. This is still unsupported and there are access functions in inet_dns
to use instead. These are documented in inet_res(3).</p><p>Bug fix: a compression reference loop would make DNS message decoding loop
forever. Problem reported by Florian Weimer.</p><p>Bug fix and patch suggestion by Sergei Golovan: configuring IPv6 nameservers
did not work. His patch (as he warned) created many UDP sockets; one per
nameserver. This has been fixed in the released version.</p><p>Improvement: <code class="inline">inet_res</code> is now EDNS0 capable. The current implementation is
simple and does not probe and cache EDNS info for nameservers, which a fully
capable implementation probably should do. EDNS has to be enabled via resolver
configuration, and if a nameserver replies that it does not support EDNS,
<code class="inline">inet_res</code> falls back to a regular DNS query.</p><p>Improvement: now <code class="inline">inet_res</code> automatically falls back to TCP if it gets a
truncated answer from a nameserver.</p><p>Warning: some of the ancient and exotic record types handled by <code class="inline">inet_res</code> and
<code class="inline">inet_dns</code> are not supported by current versions of BIND, so they could not be
tested after the rewrite, with reasonable effort, e.g MD, MF, NULL, and SPF.
The risk for bugs in these particular records is still low since their code is
mostly shared with other tested record types.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-7955 Aux Id: OTP-7107 OTP-6852</p></li><li><p>A TCP socket with option <code class="inline">{packet,4}</code> could crash the emulator if it received
a packet header with a very large size value (&gt;2Gb). The same bug caused
<a href="../../apps/erts/erlang.html#decode_packet/3"><code class="inline">erlang:decode_packet/3</code></a> to return faulty values. (Thanks to Georgos Seganos.)</p><p>Own Id: OTP-8102</p></li><li><p>The file module has now a read_line/1 function similar to the io:get_line/2,
but with byte oriented semantics. The function file:read_line/1 works for raw
files as well, but for good performance it is recommended to use it together
with the 'read_ahead' option for raw file access.</p><p>Own Id: OTP-8108</p></li></ul><h2 id="kernel-2-13-2" class="section-heading"><a href="#kernel-2-13-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.13.2</span></h2><h3 id="fixed-bugs-and-malfunctions-135" class="section-heading"><a href="#fixed-bugs-and-malfunctions-135" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>A bug when doing io:get_line (among other calls) from a file opened with
encoding other than latin1, causing false unicode errors to occur, is now
corrected.</p><p>Own Id: OTP-7974</p></li></ul><h3 id="improvements-and-new-features-59" class="section-heading"><a href="#improvements-and-new-features-59" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Added functionality to get higher resolution timestamp from system. The
erlang:now function returns a timestamp that's not always consistent with the
actual operating system time (due to resilience against large time changes in
the operating system). The function os:timestamp/0 is added to get a similar
timestamp as the one being returned by erlang:now, but untouched by Erlangs
time correcting and smoothing algorithms. The timestamp returned by
os:timestamp is always consistent with the operating systems view of time,
like the calendar functions for getting wall clock time, but with higher
resolution. Example of usage can be found in the os manual page.</p><p>Own Id: OTP-7971</p></li></ul><h2 id="kernel-2-13-1" class="section-heading"><a href="#kernel-2-13-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.13.1</span></h2><h3 id="fixed-bugs-and-malfunctions-136" class="section-heading"><a href="#fixed-bugs-and-malfunctions-136" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Many concurrent calls to <a href="os.html#cmd/1"><code class="inline">os:cmd/1</code></a> will only block one scheduler thread at a
time, making an smp emulator more responsive if the OS is slow forking
processes.</p><p>Own Id: OTP-7890 Aux Id: seq11219</p></li><li><p>Fixed hanging early RPC that did IO operation during node start.</p><p>Own Id: OTP-7903 Aux Id: seq11224</p></li><li><p>The error behavior of gen_tcp and gen_udp has been corrected.
gen_tcp:connect/3,4 and gen_udp:send/4 now returns {error,eafnosupport} for
conflicting destination address versus socket address family. Other corner
cases for IP address string host names combined with not using the native (OS)
resolver (which is not default) has also been changed to return
{error,nxdomain} instead of {error,einval}. Those changes just may
surprise old existing code. gen_tcp:listen/2 and gen_udp:open/2 now fails for
conflicting local address versus socket address family instead of trying to
use an erroneous address. Problem reported by Per Hedeland.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-7929</p></li></ul><h3 id="improvements-and-new-features-60" class="section-heading"><a href="#improvements-and-new-features-60" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Several glitches and performance issues in the Unicode and I/O-system
implementation of R13A have been corrected.</p><p>Own Id: OTP-7896 Aux Id: OTP-7648 OTP-7887</p></li><li><p>The unsupported DNS resolver client inet_res has now been improved to handle
NAPTR queries.</p><p>Own Id: OTP-7925 Aux Id: seq11231</p></li></ul><h2 id="kernel-2-13" class="section-heading"><a href="#kernel-2-13" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.13</span></h2><h3 id="fixed-bugs-and-malfunctions-137" class="section-heading"><a href="#fixed-bugs-and-malfunctions-137" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The old Erlang DNS resolver inet_res has been corrected to handle TXT records
with more than one character string. Patch courtesy of Geoff Cant.</p><p>Own Id: OTP-7588</p></li><li><p>When chunk reading a disk log opened in read_only mode, bad terms could crash
the disk log process.</p><p>Own Id: OTP-7641 Aux Id: seq11090</p></li><li><p><code class="inline">gen_tcp:send()</code> did sometimes (only observed on Solaris) return
<code class="inline">{error,enotconn}</code> instead of the expected <code class="inline">{error,closed}</code> as the peer socket
had been explicitly closed.</p><p>Own Id: OTP-7647</p></li><li><p>The gen_sctp option sctp_peer_addr_params,
#sctp_paddrparams{address={IP,Port} was erroneously decoded in the inet
driver. This bug has now been corrected.</p><p>Own Id: OTP-7755</p></li></ul><h3 id="improvements-and-new-features-61" class="section-heading"><a href="#improvements-and-new-features-61" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Erlang programs can now access STDERR on platforms where such a file
descriptor is available by using the io_server 'standard_error', i.e.
io:format(standard_error,&quot;~s~n&quot;,[ErrorMessage]),</p><p>Own Id: OTP-6688</p></li><li><p>The format of the string returned by <code class="inline">erlang:system_info(system_version)</code> (as
well as the first message when Erlang is started) has changed. The string now
contains the both the OTP version number as well as the erts version number.</p><p>Own Id: OTP-7649</p></li><li><p>As of this version, the global name server no longer supports nodes running
Erlang/OTP R10B.</p><p>Own Id: OTP-7661</p></li><li><p>A <code class="inline">{nodedown, Node}</code> message passed by the <code class="inline">net_kernel:monitor_nodes/X</code>
functionality is now guaranteed to be sent after <code class="inline">Node</code> has been removed from
the result returned by <code class="inline">erlang:nodes/Y</code>.</p><p>Own Id: OTP-7725</p></li><li><p>The deprecated functions <code class="inline">erlang:fault/1</code>, <code class="inline">erlang:fault/2</code>, and
<code class="inline">file:rawopen/2</code> have been removed.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-7812</p></li><li><p>Nodes belonging to different independent clusters can now co-exist on the same
host with the help of a new environment variable setting ERL_EPMD_PORT.</p><p>Own Id: OTP-7826</p></li><li><p>The copyright notices have been updated.</p><p>Own Id: OTP-7851</p></li></ul><h2 id="kernel-2-12-5-1" class="section-heading"><a href="#kernel-2-12-5-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.12.5.1</span></h2><h3 id="fixed-bugs-and-malfunctions-138" class="section-heading"><a href="#fixed-bugs-and-malfunctions-138" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>When chunk reading a disk log opened in read_only mode, bad terms could crash
the disk log process.</p><p>Own Id: OTP-7641 Aux Id: seq11090</p></li><li><p>Calling <code class="inline">gen_tcp:send()</code> from several processes on socket with option
<code class="inline">send_timeout</code> could lead to much longer timeout than specified. The solution
is a new socket option <code class="inline">{send_timeout_close,true}</code> that will do automatic
close on timeout. Subsequent calls to send will then immediately fail due to
the closed connection.</p><p>Own Id: OTP-7731 Aux Id: seq11161</p></li></ul><h2 id="kernel-2-12-5" class="section-heading"><a href="#kernel-2-12-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.12.5</span></h2><h3 id="fixed-bugs-and-malfunctions-139" class="section-heading"><a href="#fixed-bugs-and-malfunctions-139" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The documentation of <a href="rpc.html#pmap/3"><code class="inline">rpc:pmap/3</code></a> has been corrected. (Thanks to Kirill
Zaborski.)</p><p>Own Id: OTP-7537</p></li><li><p>The listen socket used for the distributed Erlang protocol now uses the socket
option 'reuseaddr', which is useful when you force the listen port number
using kernel options 'inet_dist_listen_min' and 'inet_dist_listen_max' and
restarts a node with open connections.</p><p>Own Id: OTP-7563</p></li><li><p>Fixed memory leak of unclosed TCP-ports. A gen_tcp:send() followed by a
failing gen_tcp:recv() could in some cases cause the port to linger after
being closed.</p><p>Own Id: OTP-7615</p></li></ul><h3 id="improvements-and-new-features-62" class="section-heading"><a href="#improvements-and-new-features-62" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Processes spawned using <code class="inline">proc_lib</code> (including <code class="inline">gen_server</code> and other library
modules that use <code class="inline">proc_lib</code>) no longer keep the entire argument list for the
initial call, but only the arity.</p><p>Also, if <a href="../../apps/stdlib/proc_lib.html#spawn/1"><code class="inline">proc_lib:spawn/1</code></a> is used to spawn a fun, the actual fun is not
kept, but only module, function name, and arity of the function that
implements the fun.</p><p>The reason for the change is that keeping the initial fun (or a fun in an
argument list), would prevent upgrading the code for the module. A secondary
reason is that keeping the fun and function arguments could waste a
significant amount of memory.</p><p>The drawback with the change is that the crash reports will provide less
precise information about the initial call (only <code class="inline">Module:Function/Arity</code>
instead of <code class="inline">Module:Function(Arguments)</code>). The function
<a href="../../apps/stdlib/proc_lib.html#initial_call/1"><code class="inline">proc_lib:initial_call/1</code></a> still returns a list, but each argument has been
replaced with a dummy atom.</p><p>Own Id: OTP-7531 Aux Id: seq11036</p></li><li><p><a href="../../apps/stdlib/io.html#get_line/1"><code class="inline">io:get_line/1</code></a> when reading from standard input is now substantially faster.
There are also some minor performance improvements in <a href="../../apps/stdlib/io.html#get_line/1"><code class="inline">io:get_line/1</code></a> when
reading from any file opened in binary mode. (Thanks to Fredrik Svahn.)</p><p>Own Id: OTP-7542</p></li><li><p>There is now experimental support for loading of code from archive files. See
the documentation of <code class="inline">code</code>, <code class="inline">init</code>, <code class="inline">erl_prim_loader</code>and <code class="inline">escript</code> for more
info.</p><p>The error handling of <code class="inline">escripts</code> has been improved.</p><p>An <code class="inline">escript</code> may now set explicit arguments to the emulator, such as
<code class="inline">-smp enabled</code>.</p><p>An <code class="inline">escript</code> may now contain a precompiled beam file.</p><p>An <code class="inline">escript</code> may now contain an archive file containing one or more
applications (experimental).</p><p>The internal module <code class="inline">code_aux</code> has been removed.</p><p>Own Id: OTP-7548 Aux Id: otp-6622</p></li><li><p><a href="code.html#is_sticky/1"><code class="inline">code:is_sticky/1</code></a> is now documented. (Thanks to Vlad Dumitrescu.)</p><p>Own Id: OTP-7561</p></li><li><p>In the job control mode, the &quot;s&quot; and &quot;r&quot; commands now take an optional
argument to specify which shell to start. (Thanks to Robert Virding.)</p><p>Own Id: OTP-7617</p></li><li><p><code class="inline">net_adm:world/0,1</code> could crash if called in an emulator that has not been
started with either the <code class="inline">-sname</code> or <code class="inline">-name</code> option; now it will return an
empty list. (Thanks to Edwin Fine.)</p><p>Own Id: OTP-7618</p></li></ul><h2 id="kernel-2-12-4" class="section-heading"><a href="#kernel-2-12-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.12.4</span></h2><h3 id="fixed-bugs-and-malfunctions-140" class="section-heading"><a href="#fixed-bugs-and-malfunctions-140" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Large files are now handled on Windows, where the filesystem supports it.</p><p>Own Id: OTP-7410</p></li></ul><h3 id="improvements-and-new-features-63" class="section-heading"><a href="#improvements-and-new-features-63" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>New BIF <a href="../../apps/erts/erlang.html#decode_packet/3"><code class="inline">erlang:decode_packet/3</code></a> that extracts a protocol packet from a
binary. Similar to the socket option <code class="inline">{packet, Type}</code>. Also documented the
socket packet type <code class="inline">http</code> and made it official. <em>NOTE</em>: The tuple format for
<code class="inline">http</code> packets sent from an active socket has been changed in an incompatible
way.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-7404</p></li><li><p>Setting the <code class="inline">{active,once}</code> for a socket (using inets:setopts/2) is now
specially optimized (because the <code class="inline">{active,once}</code> option is typically used much
more frequently than other options).</p><p>Own Id: OTP-7520</p></li></ul><h2 id="kernel-2-12-3" class="section-heading"><a href="#kernel-2-12-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.12.3</span></h2><h3 id="fixed-bugs-and-malfunctions-141" class="section-heading"><a href="#fixed-bugs-and-malfunctions-141" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>SCTP_ADDR_CONFIRMED events are now handled by gen_sctp.</p><p>Own Id: OTP-7276</p></li><li><p>When leaving a process group with <code class="inline">pg2:leave/2</code> the process was falsely
assumed to be a member of the group. This bug has been fixed.</p><p>Own Id: OTP-7277</p></li><li><p>In the Erlang shell, using up and down arrow keys, the wrong previous command
could sometimes be retrieved.</p><p>Own Id: OTP-7278</p></li><li><p>The documentation for <a href="../../apps/erts/erlang.html#trace/3"><code class="inline">erlang:trace/3</code></a> has been corrected.</p><p>Own Id: OTP-7279 Aux Id: seq10927</p></li><li><p>In the SMP emulator, there was small risk that <code class="inline">code:purge(Mod)</code> would kill a
process that was running code in <code class="inline">Mod</code> and unload the module <code class="inline">Mod</code> before the
process had terminated. <code class="inline">code:purge(Mod)</code> now waits for confirmation (using
<a href="../../apps/erts/erlang.html#monitor/2"><code class="inline">erlang:monitor/2</code></a>) that the process has been killed before proceeding.</p><p>Own Id: OTP-7282</p></li><li><p><code class="inline">zlib:inflate</code> failed when the size of the inflated data was an exact multiple
of the internal buffer size (4000 bytes by default).</p><p>Own Id: OTP-7359</p></li></ul><h3 id="improvements-and-new-features-64" class="section-heading"><a href="#improvements-and-new-features-64" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Additional library directories can now be specified in the environment
variable ERL_LIBS. See the manual page for the <code class="inline">code</code> module. (Thanks to Serge
Aleynikov.)</p><p>Own Id: OTP-6940</p></li><li><p>crypto and zlib drivers improved to allow concurrent smp access.</p><p>Own Id: OTP-7262</p></li><li><p>There is a new function <a href="../../apps/erts/init.html#stop/1"><code class="inline">init:stop/1</code></a> which can be used to shutdown the system
cleanly AND generate a non-zero exit status or crash dump. (Thanks to Magnus
Froberg.)</p><p>Own Id: OTP-7308</p></li><li><p>The <code class="inline">hide</code> option for <a href="../../apps/erts/erlang.html#open_port/2"><code class="inline">open_port/2</code></a> is now documented.
(Thanks to Richard Carlsson.)</p><p>Own Id: OTP-7358</p></li></ul><h2 id="kernel-2-12-2-1" class="section-heading"><a href="#kernel-2-12-2-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.12.2.1</span></h2><h3 id="improvements-and-new-features-65" class="section-heading"><a href="#improvements-and-new-features-65" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p><a href="os.html#cmd/1"><code class="inline">os:cmd/1</code></a> on unix platforms now use <code class="inline">/bin/sh</code> as shell instead of looking for
<code class="inline">sh</code> in the <code class="inline">PATH</code> environment.</p><p>Own Id: OTP-7283</p></li></ul><h2 id="kernel-2-12-2" class="section-heading"><a href="#kernel-2-12-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.12.2</span></h2><h3 id="fixed-bugs-and-malfunctions-142" class="section-heading"><a href="#fixed-bugs-and-malfunctions-142" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>A bug caused by a race condition involving <code class="inline">disk_log</code> and <code class="inline">pg2</code> has been
fixed.</p><p>Own Id: OTP-7209 Aux Id: seq10890</p></li><li><p>The beta testing module <code class="inline">gen_sctp</code> now supports active mode as stated in the
documentation. Active mode is still rather untested, and there are some issues
about what should be the right semantics for <a href="gen_sctp.html#connect/5"><code class="inline">gen_sctp:connect/5</code></a>. In
particular: should it be blocking or non-blocking or choosable. There is a
high probability it will change semantics in a (near) future patch.</p><p>Try it, give comments and send in bug reports!</p><p>Own Id: OTP-7225</p></li></ul><h3 id="improvements-and-new-features-66" class="section-heading"><a href="#improvements-and-new-features-66" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p><a href="../../apps/erts/erlang.html#system_info/1"><code class="inline">erlang:system_info/1</code></a> now accepts the <code class="inline">logical_processors</code>, and
<code class="inline">debug_compiled</code> arguments. For more info see the, <a href="../../apps/erts/erlang.html"><code class="inline">erlang</code></a> documentation.</p><p>The scale factor returned by <code class="inline">test_server:timetrap_scale_factor/0</code> is now also
effected if the emulator uses a larger amount of scheduler threads than the
amount of logical processors on the system.</p><p>Own Id: OTP-7175</p></li><li><p>Updated the documentation for <a href="../../apps/erts/erlang.html#function_exported/3"><code class="inline">erlang:function_exported/3</code></a> and <a href="../../apps/stdlib/io.html#format/2"><code class="inline">io:format/2</code></a>
functions to no longer state that those functions are kept mainly for
backwards compatibility.</p><p>Own Id: OTP-7186</p></li><li><p>A process executing the <a href="../../apps/erts/erlang.html#processes/0"><code class="inline">processes/0</code></a> BIF can now be preempted by other
processes during its execution. This in order to disturb the rest of the
system as little as possible. The returned result is, of course, still a
consistent snapshot of existing processes at a time during the call to
<a href="../../apps/erts/erlang.html#processes/0"><code class="inline">processes/0</code></a>.</p><p>The documentation of the <a href="../../apps/erts/erlang.html#processes/0"><code class="inline">processes/0</code></a> BIF and the
<a href="../../apps/erts/erlang.html#is_process_alive/1"><code class="inline">is_process_alive/1</code></a> BIF have been updated in order to
clarify the difference between an existing process and a process that is
alive.</p><p>Own Id: OTP-7213</p></li><li><p><a href="../../apps/erts/erlang.html#tuple_size/1"><code class="inline">tuple_size/1</code></a> and <a href="../../apps/erts/erlang.html#byte_size/1"><code class="inline">byte_size/1</code></a> have been
substituted for <a href="../../apps/erts/erlang.html#size/1"><code class="inline">size/1</code></a> in the documentation.</p><p>Own Id: OTP-7244</p></li></ul><h2 id="kernel-2-12-1-2" class="section-heading"><a href="#kernel-2-12-1-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.12.1.2</span></h2><h3 id="improvements-and-new-features-67" class="section-heading"><a href="#improvements-and-new-features-67" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>The <code class="inline">{allocator_sizes, Alloc}</code> and <code class="inline">alloc_util_allocators</code> arguments are now
accepted by <a href="../../apps/erts/erlang.html#system_info/1"><code class="inline">erlang:system_info/1</code></a>. For more information see the <a href="../../apps/erts/erlang.html"><code class="inline">erlang</code></a>
documentation.</p><p>Own Id: OTP-7167</p></li></ul><h2 id="kernel-2-12-1-1" class="section-heading"><a href="#kernel-2-12-1-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.12.1.1</span></h2><h3 id="fixed-bugs-and-malfunctions-143" class="section-heading"><a href="#fixed-bugs-and-malfunctions-143" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed a problem in group that could cause the ssh server to lose answers or
hang.</p><p>Own Id: OTP-7185 Aux Id: seq10871</p></li></ul><h2 id="kernel-2-12-1" class="section-heading"><a href="#kernel-2-12-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.12.1</span></h2><h3 id="fixed-bugs-and-malfunctions-144" class="section-heading"><a href="#fixed-bugs-and-malfunctions-144" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>file:read/2 and file:consult_stream/1,3 did not use an empty prompt on I/O
devices. This bug has now been corrected.</p><p>Own Id: OTP-7013</p></li><li><p>The sctp driver has been updated to work against newer lksctp packages e.g
1.0.7 that uses the API spelling change adaption -&gt; adaptation. Older lksctp
(1.0.6) still work. The erlang API in gen_sctp.erl and inet_sctp.hrl now
spells 'adaptation' regardless of the underlying C API.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-7120</p></li></ul><h3 id="improvements-and-new-features-68" class="section-heading"><a href="#improvements-and-new-features-68" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>The documentation has been updated so as to reflect the last updates of the
Erlang shell as well as the minor modifications of the control sequence <code class="inline">p</code> of
the <code class="inline">io_lib</code> module.</p><p>Superfluous empty lines have been removed from code examples and from Erlang
shell examples.</p><p>Own Id: OTP-6944 Aux Id: OTP-6554, OTP-6911</p></li><li><p><a href="../../apps/erts/erlang.html#tuple_size/1"><code class="inline">tuple_size/1</code></a> and <a href="../../apps/erts/erlang.html#byte_size/1"><code class="inline">byte_size/1</code></a> have been
substituted for <a href="../../apps/erts/erlang.html#size/1"><code class="inline">size/1</code></a>.</p><p>Own Id: OTP-7009</p></li></ul><h2 id="kernel-2-12" class="section-heading"><a href="#kernel-2-12" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.12</span></h2><h3 id="fixed-bugs-and-malfunctions-145" class="section-heading"><a href="#fixed-bugs-and-malfunctions-145" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>A bug for raw files when reading 0 bytes returning 'eof' instead of empty data
has been corrected.</p><p>Own Id: OTP-6291 Aux Id: OTP-6967</p></li><li><p>A bug in gen_udp:fdopen reported by David Baird and also found by Dialyzer has
been fixed.</p><p>Own Id: OTP-6836 Aux Id: OTP-6594</p></li><li><p>Calling <code class="inline">error_logger:tty(true)</code> multiple times does not give multiple error
log printouts.</p><p>Own Id: OTP-6884 Aux Id: seq10767</p></li><li><p>The global name server now ignores <code class="inline">nodeup</code> messages when the command line
flag <code class="inline">-connect_all false</code> has been used. (Thanks to Trevor Woollacott.)</p><p>Own Id: OTP-6931</p></li><li><p>file:write_file/3, file:write/2 and file:read/2 could crash (contrary to
documentation) for odd enough file system problems, e.g write to full file
system. This bug has now been corrected.</p><p>In this process the file module has been rewritten to produce better error
codes. Posix error codes now originate from the OS file system calls or are
generated only for very similar causes (for example 'enomem' is generated if a
memory allocation fails, and 'einval' is generated if the file handle in
Erlang is a file handle but currently invalid).</p><p>More Erlang-ish error codes are now generated. For example <code class="inline">{error,badarg}</code> is
now returned from <a href="file.html#close/1"><code class="inline">file:close/1</code></a> if the argument is not of a file handle type.
See file(3).</p><p>The possibility to write a single byte using <a href="file.html#write/2"><code class="inline">file:write/2</code></a> instead of a list
or binary of one byte, contradictory to the documentation, has been removed.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-6967 Aux Id: OTP-6597 OTP-6291</p></li><li><p>Monitor messages produced by the system monitor functionality, and garbage
collect trace messages could contain erroneous heap and/or stack sizes when
the actual heaps and/or stacks were huge.</p><p>As of erts version 5.6 the <code class="inline">large_heap</code> option to
<code class="inline">erlang:system_monitor/[1,2]</code> has been modified. The monitor message is sent
if the sum of the sizes of all memory blocks allocated for all heap
generations is equal to or larger than the specified size. Previously the
monitor message was sent if the memory block allocated for the youngest
generation was equal to or larger than the specified size.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-6974 Aux Id: seq10796</p></li><li><p><a href="inet.html#getopts/2"><code class="inline">inet:getopts/2</code></a> returned random values on Windows Vista.</p><p>Own Id: OTP-7003</p></li></ul><h3 id="improvements-and-new-features-69" class="section-heading"><a href="#improvements-and-new-features-69" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Minor documentation corrections for file:pread/2 and file:pread/3.</p><p>Own Id: OTP-6853</p></li><li><p>The deprecated functions <code class="inline">file:file_info/1</code>, <code class="inline">init:get_flag/1</code>,
<code class="inline">init:get_flags/0</code>, and <code class="inline">init:get_args/0</code> have been removed.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-6886</p></li><li><p>Contract directives for modules in Kernel and STDLIB.</p><p>Own Id: OTP-6895</p></li><li><p>The functions io:columns/0, io:columns/1, io:rows/0 and io:rows/1 are added to
allow the user to get information about the terminal geometry. The shell takes
some advantage of this when formatting output. For regular files and other
io-devices where height and width are not applicable, the functions return
{error,enotsup}.</p><p>Potential incompatibility: If one has written a custom io-handler, the handler
has to either return an error or take care of io-requests regarding terminal
height and width. Usually that is no problem as io-handlers, as a rule of
thumb, should give an error reply when receiving unknown io-requests, instead
of crashing.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-6933</p></li><li><p>The undocumented and unsupported functions <code class="inline">inet:ip_to_bytes/1</code>,
<code class="inline">inet:ip4_to_bytes/1</code>, <code class="inline">inet:ip6_to_bytes/1</code>, and <code class="inline">inet:bytes_to_ip6/16</code> have
been removed.</p><p>Own Id: OTP-6938</p></li><li><p>Added new checksum combine functions to <code class="inline">zlib</code>. And fixed a bug in
<code class="inline">zlib:deflate</code>. Thanks Matthew Dempsky.</p><p>Own Id: OTP-6970</p></li><li><p>The <a href="../../apps/erts/erlang.html#spawn_monitor/1"><code class="inline">spawn_monitor/1</code></a> and
<a href="../../apps/erts/erlang.html#spawn_monitor/3"><code class="inline">spawn_monitor/3</code></a> BIFs are now auto-imported (i.e. they
no longer need an <code class="inline">erlang:</code> prefix).</p><p>Own Id: OTP-6975</p></li><li><p>All functions in the <code class="inline">code</code> module now fail with an exception if they are
called with obviously bad arguments, such as a tuple when an atom was
expected. Some functions now also fail for undocumented argument types (for
instance, <code class="inline">ensure_loaded/1</code> now only accepts an atom as documented; it used to
accept a string too).</p><p>Dialyzer will generally emit warnings for any calls that use undocumented
argument types. Even if the call happens to still work in R12B, you should
correct your code. A future release will adhere to the documentation.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-6983</p></li></ul><h2 id="kernel-2-11-5-2" class="section-heading"><a href="#kernel-2-11-5-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.11.5.2</span></h2><h3 id="fixed-bugs-and-malfunctions-146" class="section-heading"><a href="#fixed-bugs-and-malfunctions-146" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The kernel parameter dist_auto_connect once could fail to block a node if
massive parallel sends were issued during a transient failure of network
communication</p><p>Own Id: OTP-6893 Aux Id: seq10753</p></li></ul><h2 id="kernel-2-11-5-1" class="section-heading"><a href="#kernel-2-11-5-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.11.5.1</span></h2><h3 id="fixed-bugs-and-malfunctions-147" class="section-heading"><a href="#fixed-bugs-and-malfunctions-147" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The internal (rarely used) DNS resolver has been modified to not use the
domain search list when asked to resolve an absolute name; a name with a
terminating dot. There was also a bug causing it to create malformed DNS
queries for absolute names that has been corrected, correction suggested by
Scott Lystig Fritchie. The code has also been corrected to look up cached RRs
in the same search order as non-cached, now allows having the root domain
among the search domains, and can now actually do a zone transfer request.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-6806 Aux Id: seq10714 EABln35459</p></li><li><p>zlib:close/1 would leave an EXIT message in the message queue if the calling
process had the trap_exit flag enabled.</p><p>Own Id: OTP-6811</p></li></ul><h3 id="improvements-and-new-features-70" class="section-heading"><a href="#improvements-and-new-features-70" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>The documentation of <a href="../../apps/erts/erlang.html#process_flag/2"><code class="inline">process_flag(priority, Level)</code></a> has
been updated, see the <a href="../../apps/erts/erlang.html"><code class="inline">erlang</code></a> documentation.</p><p>Own Id: OTP-6745 Aux Id: OTP-6715</p></li></ul><h2 id="kernel-2-11-5" class="section-heading"><a href="#kernel-2-11-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.11.5</span></h2><h3 id="fixed-bugs-and-malfunctions-148" class="section-heading"><a href="#fixed-bugs-and-malfunctions-148" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The shell has been updated to fix the following flaws: Shell process exit left
you with an unresponsive initial shell if not using oldshell. Starting a
restricted shell with a nonexisting callback module resulted in a shell where
no commands could be used, not even init:stop/0. Fun's could not be used as
parameters to local shell functions (in shell_default or user_default) when
restricted_shell was active.</p><p>Own Id: OTP-6537</p></li><li><p>The undocumented feature gen_tcp:fdopen/2 was broken in R11B-4. It is now
fixed again.</p><p>Own Id: OTP-6615</p></li><li><p>Corrected cancellation of timers in three places in the inet_res module.
(Problem found by Dialyzer.)</p><p>Own Id: OTP-6676</p></li></ul><h3 id="improvements-and-new-features-71" class="section-heading"><a href="#improvements-and-new-features-71" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Corrected protocol layer flue for socket options SO_LINGER, SO_SNDBUF and
SO_RCVBUF, for SCTP.</p><p>Own Id: OTP-6625 Aux Id: OTP-6336</p></li><li><p>The behaviour of the inet option {active,once} on peer close is improved and
documented.</p><p>Own Id: OTP-6681</p></li><li><p>The inet option send_timeout for connection oriented sockets is added to allow
for timeouts in communicating send requests to the underlying TCP stack.</p><p>Own Id: OTP-6684 Aux Id: seq10637 OTP-6681</p></li><li><p>Minor Makefile changes.</p><p>Own Id: OTP-6689 Aux Id: OTP-6742</p></li><li><p>The documentation of <a href="../../apps/erts/erlang.html#process_flag/2"><code class="inline">process_flag(priority, Level)</code></a> has
been updated, see the <a href="../../apps/erts/erlang.html"><code class="inline">erlang</code></a> documentation.</p><p>Own Id: OTP-6715</p></li></ul><h2 id="kernel-2-11-4-2" class="section-heading"><a href="#kernel-2-11-4-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.11.4.2</span></h2><h3 id="improvements-and-new-features-72" class="section-heading"><a href="#improvements-and-new-features-72" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>process_flag/2 accepts the new flag <code class="inline">sensitive</code>.</p><p>Own Id: OTP-6592 Aux Id: seq10555</p></li></ul><h2 id="kernel-2-11-4-1" class="section-heading"><a href="#kernel-2-11-4-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.11.4.1</span></h2><h3 id="fixed-bugs-and-malfunctions-149" class="section-heading"><a href="#fixed-bugs-and-malfunctions-149" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>A bug in gen_udp:open that broke the 'fd' option has been fixed.</p><p>Own Id: OTP-6594 Aux Id: seq10619</p></li></ul><h2 id="kernel-2-11-4" class="section-heading"><a href="#kernel-2-11-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.11.4</span></h2><h3 id="fixed-bugs-and-malfunctions-150" class="section-heading"><a href="#fixed-bugs-and-malfunctions-150" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Added a warning to the documentation for the <code class="inline">error_logger</code> functions
<code class="inline">error_msg/1,2</code>, <code class="inline">warning_msg/1,2</code> and <code class="inline">info_msg/1,2</code> that calling these
function with bad arguments can crash the standard event handler.</p><p>Own Id: OTP-4575 Aux Id: seq7693</p></li><li><p>A bug in <code class="inline">inet_db</code> concerning getting the resolver option <code class="inline">retry</code> has been
corrected.</p><p>Own Id: OTP-6380 Aux Id: seq10534</p></li><li><p>Names registered by calling <code class="inline">global:register_name()</code> or
<code class="inline">global:re_register_name()</code> were not always unregistered when the registering
or registered process died. This bug has been fixed.</p><p>Own Id: OTP-6428</p></li><li><p>When setting the kernel configuration parameter <code class="inline">error_logger</code> to <code class="inline">false</code>, the
documentation stated that &quot;No error logger handler is installed&quot;. This is
true, but error logging is not turned off, as the initial, primitive error
logger event handler is kept, printing raw event messages to tty.</p><p>Changing this behavior can be viewed as a backward incompatible change.
Instead a new value <code class="inline">silent</code> for the configuration parameter has been added,
which ensures that error logging is completely turned off.</p><p>Own Id: OTP-6445</p></li><li><p>Clarified the documentation for <a href="code.html#lib_dir/1"><code class="inline">code:lib_dir/1</code></a> and <a href="code.html#priv_dir/1"><code class="inline">code:priv_dir/1</code></a>. The
functions traverse the names of the code path, they do not search the actual
directories.</p><p>Own Id: OTP-6466</p></li><li><p><code class="inline">io:setopts</code> returned <code class="inline">{error,badarg}</code>, when called with only an <code class="inline">expand_fun</code>
argument. (Thanks to igwan.)</p><p>Own Id: OTP-6508</p></li></ul><h3 id="improvements-and-new-features-73" class="section-heading"><a href="#improvements-and-new-features-73" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>An interface towards the SCTP Socket API Extensions has been implemented.It is
an Open Source patch courtesy of Serge Aleynikov and Leonid Timochouk. The
Erlang code parts has been adapted by the OTP team, changing the Erlang API
somewhat.</p><p>The Erlang interface consists of the module <code class="inline">gen_sctp</code> and an include file
<code class="inline">-include_lib(&quot;kernel/include/inet_sctp.hrl&quot;).</code> for option record definitions.
The <code class="inline">gen_sctp</code> module is documented.</p><p>The delivered Open Source patch, before the OTP team rewrites, was written
according to
<a href="http://tools.ietf.org/html/draft-ietf-tsvwg-sctpsocket-13">http://tools.ietf.org/html/draft-ietf-tsvwg-sctpsocket-13</a>
and was claimed to work fine, tested on Linux Fedora Core 5.0 (kernel
2.6.15-2054 or later) and on Solaris 10 and 11. The OTP team rewrites used the
same standard document but might have accidentally broken some functionality.
If so, it will soon be patched to working state. The tricky parts in C and the
general design has essentially not changed. During the rewrites the code was
hand tested on SuSE Linux Enterprise Server 10, and briefly on Solaris 10.
Feedbach on code and docs is very much appreciated.</p><p>The SCTP interface is in beta state. It has only been hand tested and has no
automatic test suites in OTP meaning everything is most certainly not tested.
Socket active mode is broken. IPv6 is not tested. The documentation has been
reworked due to the API changes, but has not been proofread after this.</p><p>Thank you from the OTP team to Serge Aleynikov and Leonid Timochouk for a
valuable contribution. We hope we have not messed it up too much.</p><p>Own Id: OTP-6336</p></li><li><p>A <code class="inline">{minor_version,Version}</code> option is now recognized by
<a href="../../apps/erts/erlang.html#term_to_binary/2"><code class="inline">term_to_binary/2</code></a>. {minor_version,1} will cause
floats to be encoded in an exact and more space-efficient way compared to the
previous encoding.</p><p>Own Id: OTP-6434</p></li><li><p>Monitoring of nodes has been improved. Now the following properties apply to
<code class="inline">net_kernel:monitor_nodes/[1,2]</code>:</p><ul><li><code class="inline">nodeup</code> messages will be delivered before delivery of any message from the
remote node passed through the newly established connection.</li><li><code class="inline">nodedown</code> messages will not be delivered until all messages from the remote
node that have been passed through the connection have been delivered.</li><li>Subscriptions can also be made before the <code class="inline">net_kernel</code> server has been
started.</li></ul><p>Own Id: OTP-6481</p></li><li><p>Setting and getting socket options in a &quot;raw&quot; fashion is now allowed. Using
this feature will inevitably produce non portable code, but will allow setting
ang getting arbitrary uncommon options on TCP stacks that do have them.</p><p>Own Id: OTP-6519</p></li><li><p>Dialyzer warnings have been eliminated.</p><p>Own Id: OTP-6523</p></li><li><p>The documentation for <a href="file.html#delete/1"><code class="inline">file:delete/1</code></a> and <a href="file.html#set_cwd/1"><code class="inline">file:set_cwd/1</code></a> has been updated to
clarify what happens if the input arguments are of an incorrect type.</p><p>Own Id: OTP-6535</p></li></ul><h2 id="kernel-2-11-3-1" class="section-heading"><a href="#kernel-2-11-3-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.11.3.1</span></h2><h3 id="fixed-bugs-and-malfunctions-151" class="section-heading"><a href="#fixed-bugs-and-malfunctions-151" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>An erroneous packet size could be used for the first messages passed through a
newly established connection between two Erlang nodes. This could cause
messages to be discarded, or termination of the connection.</p><p>Own Id: OTP-6473</p></li></ul><h2 id="kernel-2-11-3" class="section-heading"><a href="#kernel-2-11-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.11.3</span></h2><h3 id="fixed-bugs-and-malfunctions-152" class="section-heading"><a href="#fixed-bugs-and-malfunctions-152" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>On Unix, the <code class="inline">unix:cmd/1</code> function could leave an 'EXIT' message in the
message queue for the calling process That problem was more likely to happen
in an SMP emulator.</p><p>Own Id: OTP-6368</p></li></ul><h3 id="improvements-and-new-features-74" class="section-heading"><a href="#improvements-and-new-features-74" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>More interfaces are added in erl_ddll, to support different usage scenarios.</p><p>Own Id: OTP-6307 Aux Id: OTP-6234</p></li><li><p>Locks set by calling <code class="inline">global:set_lock()</code> were not always deleted when the
locking process died. This bug has been fixed.</p><p>Own Id: OTP-6341 Aux Id: seq10445</p></li></ul><h2 id="kernel-2-11-2" class="section-heading"><a href="#kernel-2-11-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.11.2</span></h2><h3 id="fixed-bugs-and-malfunctions-153" class="section-heading"><a href="#fixed-bugs-and-malfunctions-153" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Behavior in case of disappeared nodes when using he dist_auto_connect once got
changed in R11B-1. The timeouts regarding normal distributed operations is now
reverted to the old (pre R11B-1).</p><p>Own Id: OTP-6258 Aux Id: OTP-6200, seq10449</p></li><li><p>Start-up problems for the internal process used by the <code class="inline">inet:gethostbyname()</code>
functions were eliminated. If the internal process (<code class="inline">inet_gethost_native</code>) had
not previously been started, and if several processes at the same time called
one of the <code class="inline">inet:gethostbyname()</code> functions, the calls could fail.</p><p>Own Id: OTP-6286</p></li></ul><h3 id="improvements-and-new-features-75" class="section-heading"><a href="#improvements-and-new-features-75" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Code cleanup: the old internal obsolete file_server has been removed. It was
only used when communicating with R7 and older nodes.</p><p>Own Id: OTP-6245</p></li><li><p>Trying to open a non-existent or badly formed disk log no longer results in a
crash report. In particular, <a href="../../apps/stdlib/ets.html#file2tab/1"><code class="inline">ets:file2tab/1</code></a> reports no error when the
argument is not a well-formed disk log file. (The return value has not been
changed, it is still an error tuple.)</p><p>Own Id: OTP-6278 Aux Id: seq10421</p></li><li><p>There are new BIFs <code class="inline">erlang:spawn_monitor/1,3</code>, and the new option <code class="inline">monitor</code>
for <code class="inline">spawn_opt/2,3,4,5</code>.</p><p>The <code class="inline">observer_backend</code> module has been updated to handle the new BIFs.</p><p>Own Id: OTP-6281</p></li><li><p>To help Dialyzer find more bugs, many functions in the Kernel and STDLIB
applications now only accept arguments of the type that is documented.</p><p>For instance, the functions <a href="../../apps/stdlib/lists.html#prefix/2"><code class="inline">lists:prefix/2</code></a> and <a href="../../apps/stdlib/lists.html#suffix/2"><code class="inline">lists:suffix/2</code></a> are
documented to only accept lists as their arguments, but they actually accepted
anything and returned <code class="inline">false</code>. That has been changed so that the functions
cause an exception if one or both arguments are not lists.</p><p>Also, the <a href="../../apps/stdlib/string.html#strip/3"><code class="inline">string:strip/3</code></a> function is documented to take a character argument
that is a character to strip from one or both ends of the string. Given a list
instead of a character, it used to do nothing, but will now cause an
exception.</p><p>Dialyzer will find most cases where those functions are passed arguments of
the wrong type.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-6295</p></li></ul><h2 id="kernel-2-11-1-1" class="section-heading"><a href="#kernel-2-11-1-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.11.1.1</span></h2><h3 id="improvements-and-new-features-76" class="section-heading"><a href="#improvements-and-new-features-76" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>There is now an option read_packets for UDP sockets that sets the maximum
number of UDP packets that will be read for each invocation of the socket
driver.</p><p>Own Id: OTP-6249 Aux Id: seq10452</p></li></ul><h2 id="kernel-2-11-1" class="section-heading"><a href="#kernel-2-11-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.11.1</span></h2><h3 id="fixed-bugs-and-malfunctions-154" class="section-heading"><a href="#fixed-bugs-and-malfunctions-154" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>In R11B-0, the erl_ddll server process is always started. Despite that, the
configuration parameter <code class="inline">start_ddll</code> for the Kernel application was still
obeyed, which would cause the erl_ddll server to be started TWICE (and the
system shutting down as a result). In this release, <code class="inline">start_ddll</code> is no longer
used and its documentation has been removed.</p><p>Own Id: OTP-6163</p></li><li><p>The kernel option {dist_auto_connect,once} could block out nodes that had
never been connected, causing persistent partitioning of networks.
Furthermore, partial restarts of networks could cause inconsistent global name
databases. Both problems are now solved.</p><p>Own Id: OTP-6200 Aux Id: seq10377</p></li></ul><h3 id="improvements-and-new-features-77" class="section-heading"><a href="#improvements-and-new-features-77" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Late arriving tcp_closed and udp_closed messages are now removed from the
message queue of a process calling gen_tcp:close/1, gen_udp:close/1, and
inet:close/1.</p><p>Own Id: OTP-6197</p></li></ul><h2 id="kernel-2-11" class="section-heading"><a href="#kernel-2-11" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.11</span></h2><h3 id="fixed-bugs-and-malfunctions-155" class="section-heading"><a href="#fixed-bugs-and-malfunctions-155" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>When repairing a disk log with a corrupt index file (caused by for instance a
hard disk failure) the old contents of the index file is kept unmodified. This
will make repeated attempts to open the disk log fail every time.</p><p>Own Id: OTP-5558 Aux Id: seq9823</p></li><li><p>Previously <a href="../../apps/erts/erlang.html#unlink/1"><code class="inline">unlink/1</code></a> and <a href="../../apps/erts/erlang.html#demonitor/2"><code class="inline">erlang:demonitor/2</code></a> behaved
completely asynchronous. This had one undesirable effect, though. You could
never know when you were guaranteed <em>not</em> to be affected by a link that you
had unlinked or a monitor that you had demonitored.</p><p>The new behavior of <a href="../../apps/erts/erlang.html#unlink/1"><code class="inline">unlink/1</code></a> and <a href="../../apps/erts/erlang.html#demonitor/2"><code class="inline">erlang:demonitor/2</code></a> can be
viewed as two operations performed atomically. Asynchronously send an unlink
signal or a demonitor signal, and ignore any future results of the link or
monitor.</p><p><em>NOTE</em>: This change can cause some obscure code to fail which previously did
not. For example, the following code might hang:</p><pre><code class="makeup erlang" translate="no"><span class="w">            </span><span class="n">Mon</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">erlang</span><span class="p">:</span><span class="nf">monitor</span><span class="p" data-group-id="0907743787-1">(</span><span class="ss">process</span><span class="p">,</span><span class="w"> </span><span class="n">Pid</span><span class="p" data-group-id="0907743787-1">)</span><span class="p">,</span><span class="w">
            </span><span class="c1">%% ...</span><span class="w">
            </span><span class="nf">exit</span><span class="p" data-group-id="0907743787-2">(</span><span class="n">Pid</span><span class="p">,</span><span class="w"> </span><span class="ss">bang</span><span class="p" data-group-id="0907743787-2">)</span><span class="p">,</span><span class="w">
            </span><span class="nc">erlang</span><span class="p">:</span><span class="nf">demonitor</span><span class="p" data-group-id="0907743787-3">(</span><span class="n">Mon</span><span class="p" data-group-id="0907743787-3">)</span><span class="p">,</span><span class="w">
            </span><span class="k">receive</span><span class="w">
                </span><span class="p" data-group-id="0907743787-4">{</span><span class="ss">&#39;DOWN&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">Mon</span><span class="p">,</span><span class="w"> </span><span class="ss">process</span><span class="p">,</span><span class="w"> </span><span class="n">Pid</span><span class="p">,</span><span class="w"> </span><span class="p">_</span><span class="p" data-group-id="0907743787-4">}</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="ss">ok</span><span class="w">
            </span><span class="c1">%% We were previously guaranteed to get a down message</span><span class="w">
            </span><span class="c1">%% (since we exited the process ourself), so we could</span><span class="w">
            </span><span class="c1">%% in this case leave out:</span><span class="w">
            </span><span class="c1">%% after 0 -&gt; ok</span><span class="w">
            </span><span class="k">end</span><span class="p">,</span></code></pre><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-5772</p></li><li><p>The behavior when an application fails to start and possibly causes the
runtime system to halt has been cleaned up, including fixing some minor bugs.</p><p><code class="inline">application_controller</code> should now always terminate with a non-nested string,
meaning the slogan in an <code class="inline">erl_crash.dump</code> should always be easy to read.</p><p><code class="inline">init</code> now makes sure that the slogan passed to <a href="../../apps/erts/erlang.html#halt/1"><code class="inline">erlang:halt/1</code></a> does not
exceed the maximum allowed length.</p><p>Redundant calls to <a href="../../apps/erts/erlang.html#list_to_atom/1"><code class="inline">list_to_atom/1</code></a> has been removed from
the primitive <code class="inline">error_logger</code> event handler. (Thanks Serge Aleynikov for
pointing this out).</p><p>The changes only affects the contents of the error messages and crashdump file
slogan.</p><p>Own Id: OTP-5964</p></li><li><p>The <code class="inline">erl_ddll</code> server is now started when OTP is started and placed under the
Kernel supervisor. This fixes several minor issues. It used to be started on
demand.</p><p>The documentation for the <code class="inline">start</code> and <code class="inline">stop</code> functions in the <code class="inline">erl_ddll</code>
module has been removed, as those functions are not meant to be used by other
applications.</p><p>Furthermore, the <code class="inline">erl_ddll:stop/1</code> function no longer terminates the
<code class="inline">erl_ddll</code> server, as that would terminate the entire runtime system.</p><p>Own Id: OTP-6033</p></li></ul><h3 id="improvements-and-new-features-78" class="section-heading"><a href="#improvements-and-new-features-78" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Removed some unused functions from <code class="inline">application_master</code>.</p><p>Own Id: OTP-3889</p></li><li><p>Global no longer allows the registration of a process under more than one
name. If the old (buggy) behavior is desired the Kernel application variable
<code class="inline">global_multi_name_action</code> can be given the value <code class="inline">allow</code>.</p><p>Own Id: OTP-5640 Aux Id: OTP-5603</p></li><li><p>The (slightly misleading) warnings that was shown when the <code class="inline">erlang.erl</code> file
was compiled has been eliminated.</p><p>Own Id: OTP-5947</p></li><li><p>The <code class="inline">auth</code> module API is deprecated.</p><p>Own Id: OTP-6037</p></li><li><p>Added <a href="../../apps/erts/erlang.html#demonitor/2"><code class="inline">erlang:demonitor/2</code></a>, making it possible to at the same time flush a
received <code class="inline">'DOWN'</code> message, if there is one. See <a href="../../apps/erts/erlang.html"><code class="inline">erlang</code></a>.</p><p>Own Id: OTP-6100 Aux Id: OTP-5772</p></li></ul><h2 id="kernel-2-10-13" class="section-heading"><a href="#kernel-2-10-13" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.10.13</span></h2><h3 id="fixed-bugs-and-malfunctions-156" class="section-heading"><a href="#fixed-bugs-and-malfunctions-156" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Large files (more than 2 GBytes) are now handled on Solaris 8.</p><p>Own Id: OTP-5849 Aux Id: seq10157</p></li><li><p>During startup, a garbage <code class="inline">{'DOWN', ...}</code> message was left by
<code class="inline">inet_gethost_native</code>, that caused problems for the starting code server.</p><p>Own Id: OTP-5978 Aux Id: OTP-5974</p></li></ul><h3 id="improvements-and-new-features-79" class="section-heading"><a href="#improvements-and-new-features-79" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p><code class="inline">global</code> now makes several attempts to connect nodes when maintaining the
fully connected network. More than one attempt is sometimes needed under very
heavy load.</p><p>Own Id: OTP-5889</p></li><li><p><code class="inline">erl_epmd</code> now explicitly sets the timeout to <code class="inline">infinity</code> when calling
<code class="inline">gen_server:call</code>. The old timeout of 15 seconds could time out under very
heavy load.</p><p>Own Id: OTP-5959</p></li><li><p>Corrected the start of code server to use reference-tagged tuples to ensure
that an unexpected message sent to the parent process does not cause a halt of
the system. Also removed the useless <code class="inline">start/*</code> functions in both <code class="inline">code.erl</code>
and <code class="inline">code_server.erl</code> and no longer exports the <code class="inline">init</code> function from
<code class="inline">code_server.erl</code>.</p><p>Own Id: OTP-5974 Aux Id: seq10243, OTP-5978</p></li></ul><h2 id="kernel-2-10-12" class="section-heading"><a href="#kernel-2-10-12" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.10.12</span></h2><h3 id="fixed-bugs-and-malfunctions-157" class="section-heading"><a href="#fixed-bugs-and-malfunctions-157" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>A bug in <code class="inline">global</code> has been fixed: the locker process added <code class="inline">nonode@nohost</code> to
the list of nodes to lock. This could happen before any nodes got known to the
global name server. Depending on net configuration the symptom was a delay.</p><p>Own Id: OTP-5792 Aux Id: OTP-5563</p></li><li><p>If an <code class="inline">.app</code> file is missing, the error reason returned by
<a href="application.html#load/1"><code class="inline">application:load/1</code></a> has been corrected to
<code class="inline">{&quot;no such file or directory&quot;, &quot;FILE.app&quot;}</code>, instead of the less informative
<code class="inline">{&quot;unknown POSIX error&quot;,&quot;FILE.app&quot;}</code>.</p><p>Own Id: OTP-5809</p></li><li><p>Bug fixes: <code class="inline">disk_log:accessible_logs/0</code> no longer reports all <code class="inline">pg2</code> process
groups as distributed disk logs; <a href="disk_log.html#pid2name/1"><code class="inline">disk_log:pid2name/1</code></a> did not recognize
processes of distributed disk logs.</p><p>Own Id: OTP-5810</p></li><li><p>The functions <a href="file.html#consult/1"><code class="inline">file:consult/1</code></a>, <a href="file.html#path_consult/2"><code class="inline">file:path_consult/2</code></a>, <code class="inline">file:eval/1,2</code>,
<code class="inline">file:path_eval/2,3</code>, <code class="inline">file:script/1,2</code>, <code class="inline">file:path_script/2,3</code> now return
correct line numbers in error tuples.</p><p>Own Id: OTP-5814</p></li><li><p>If there were user-defined variables in the boot script, and their values were
not provided using the <code class="inline">-boot_var</code> option, the emulator would refuse to start
with a confusing error message. Corrected to show a clear, understandable
message.</p><p>The <code class="inline">prim_file</code> module was modified to not depend on the <code class="inline">lists</code> module, to
make it possible to start the emulator using a user-defined loader. (Thanks to
Martin Bjorklund.)</p><p>Own Id: OTP-5828 Aux Id: seq10151</p></li><li><p>Minor corrections in the description of open modes. (Thanks to Richard
Carlsson.)</p><p>Own Id: OTP-5856</p></li></ul><h3 id="improvements-and-new-features-80" class="section-heading"><a href="#improvements-and-new-features-80" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p><code class="inline">application_controller</code> now terminates with the actual error reason, instead
of <code class="inline">shutdown</code>. This means that the crash dump now should be somewhat more
informative, in the case where the runtime system is terminated due to an
error in an application.</p><p>Example: If the (permanent) application <code class="inline">app1</code> fails to start, the slogan now
will be:
&quot;<code class="inline">Kernel pid terminated (application_controller) ({application_start_failure,app1,{shutdown, {app1,start,[normal,[]]}}})</code>&quot;</p><p>rather than the previous
&quot;<code class="inline">Kernel pid terminated (application_controller) (shutdown)</code>&quot;.</p><p>Own Id: OTP-5811</p></li></ul><h2 id="kernel-2-10-11-1" class="section-heading"><a href="#kernel-2-10-11-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.10.11.1</span></h2><h3 id="fixed-bugs-and-malfunctions-158" class="section-heading"><a href="#fixed-bugs-and-malfunctions-158" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Timers could sometimes timeout too early. This bug has now been fixed.</p><p>Automatic cancellation of timers created by <code class="inline">erlang:send_after(Time,</code> pid(),
Msg), and <code class="inline">erlang:start_timer(Time,</code> pid(), Msg) has been introduced. Timers
created with the receiver specified by a pid, will automatically be cancelled
when the receiver exits. For more information see the <a href="../../apps/erts/erlang.html"><code class="inline">erlang</code></a> man page.</p><p>In order to be able to maintain a larger amount of timers without increasing
the maintenance cost, the internal timer wheel and bif timer table have been
enlarged.</p><p>Also a number of minor bif timer optimizations have been implemented.</p><p>Own Id: OTP-5795 Aux Id: OTP-5090, seq8913, seq10139, OTP-5782</p></li></ul><h3 id="improvements-and-new-features-81" class="section-heading"><a href="#improvements-and-new-features-81" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Documentation improvements:</p><p>- documentation for <a href="../../apps/erts/erlang.html#link/1"><code class="inline">erlang:link/1</code></a> corrected</p><p>- command line flag <code class="inline">-code_path_cache</code> added</p><p>- <code class="inline">erl</code> command line flags clarifications</p><p>- <a href="net_kernel.html"><code class="inline">net_kernel</code></a> clarifications</p><p>Own Id: OTP-5847</p></li></ul><h2 id="kernel-2-10-11" class="section-heading"><a href="#kernel-2-10-11" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.10.11</span></h2><h3 id="fixed-bugs-and-malfunctions-159" class="section-heading"><a href="#fixed-bugs-and-malfunctions-159" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Several bug fixes and improvements in the global name registration facility
(see <a href="global.html"><code class="inline">global</code></a>):</p><ul><li>the name resolving procedure did not always unlink no longer registered
processes;</li><li>the global name could sometimes hang when a <code class="inline">nodedown</code> was immediately
followed by a <code class="inline">nodeup</code>;</li><li>global names were not always unregistered when a node went down;</li><li>it is now possible to set and delete locks at the same time as the global
name server is resolving names--the handling of global locks has been
separated from registration of global names;</li></ul><p>As of this version, <code class="inline">global</code> no longer supports nodes running Erlang/OTP R7B
or earlier.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-5563</p></li><li><p>The functions <a href="global.html#set_lock/3"><code class="inline">global:set_lock/3</code></a> and <a href="global.html#trans/4"><code class="inline">global:trans/4</code></a> now accept the value
<code class="inline">0</code> (zero) of the <code class="inline">Retries</code> argument.</p><p>Own Id: OTP-5737</p></li><li><p>The <code class="inline">inet:getaddr(Addr, Family)</code> no longer validates the <code class="inline">Addr</code> argument if it
is a 4 or 8 tuple containing the IP address, except for the size of the tuple
and that it contains integers in the correct range.</p><p>The reason for the change is that validation could cause the following
sequence of calls to fail:</p><p><code class="inline">{ok,Addr} = inet:getaddr(localhost, inet6), gen_tcp:connect(Addr, 7, [inet6])</code></p><p>Own Id: OTP-5743</p></li></ul><h3 id="improvements-and-new-features-82" class="section-heading"><a href="#improvements-and-new-features-82" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>The previously undocumented and UNSUPPORTED <code class="inline">zlib</code> module has been updated in
an incompatible way and many bugs have been corrected. It is now also
documented.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-5715</p></li><li><p>Added <code class="inline">application</code> interface functions <code class="inline">which_applications/1</code>, <code class="inline">set_env/4</code>
and <code class="inline">unset_env/3</code>, which take an additional <code class="inline">Timeout</code> argument. To be used in
situations where the standard gen_server timeout (5000ms) is not adequate.</p><p>Own Id: OTP-5724 Aux Id: seq10083</p></li><li><p>Improved documentation regarding synchronized start of applications with
included applications (using start phases and <code class="inline">application_starter</code>).</p><p>Own Id: OTP-5754</p></li><li><p>New socket options <code class="inline">priority</code> and <code class="inline">tos</code> for platforms that support them
(currently only Linux).</p><p>Own Id: OTP-5756</p></li><li><p>The global name server has been optimized when it comes to maintaining a fully
connected network.</p><p>Own Id: OTP-5770</p></li></ul><h2 id="kernel-2-10-10-1" class="section-heading"><a href="#kernel-2-10-10-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.10.10.1</span></h2><h3 id="fixed-bugs-and-malfunctions-160" class="section-heading"><a href="#fixed-bugs-and-malfunctions-160" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The native resolver has gotten an control API for extended debugging and soft
restart. It is: <code class="inline">inet_gethost_native:control(Control)</code><br/><code class="inline">Control = {debug_level,Level} | soft_restart</code><br/><code class="inline">Level = integer() in the range 0-4</code>.</p><p>Own Id: OTP-5751 Aux Id: EABln25013</p></li></ul><h2 id="kernel-2-10-10" class="section-heading"><a href="#kernel-2-10-10" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.10.10</span></h2><h3 id="fixed-bugs-and-malfunctions-161" class="section-heading"><a href="#fixed-bugs-and-malfunctions-161" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>If several processes (at the same node) simultaneously tried to start the same
distributed application, this could lead to <code class="inline">application:start</code> returning an
erroneous value, or even hang.</p><p>Own Id: OTP-5606 Aux Id: seq9838</p></li></ul><h3 id="improvements-and-new-features-83" class="section-heading"><a href="#improvements-and-new-features-83" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>The manual pages for most of the Kernel and some of the STDLIB modules have
been updated, in particular regarding type definitions.</p><p>The documentation of the return value for <code class="inline">erts:info/1</code> has been corrected.</p><p>The documentation for <a href="../../apps/erts/erlang.html#statistics/1"><code class="inline">erlang:statistics/1</code></a> now lists all possible arguments.</p><p>Own Id: OTP-5360</p></li><li><p>When the native resolver fails a <code class="inline">gethostbyaddr</code> lookup, <code class="inline">nxdomain</code> should be
returned. There should be no attempt to fallback on a routine that succeeds if
only the syntax of the IP address is valid. This has been fixed.</p><p>Own Id: OTP-5598 Aux Id: OTP-5576</p></li><li><p>Replaced some tuple funs with the new <code class="inline">fun M:F/A</code> construct.</p><p>The high-order functions in the <code class="inline">lists</code> module no longer accept bad funs under
any circumstances. '<code class="inline">lists:map(bad_fun, [])</code>' used to return '<code class="inline">[]</code>' but now
causes an exception.</p><p>Unused, broken compatibility code in the <code class="inline">ets</code> module was removed. (Thanks to
Dialyzer.)</p><p>Eliminated 5 discrepancies found by Dialyzer in the Appmon application.</p><p>Own Id: OTP-5633</p></li><li><p>The possibility to have comments following the list of tuples in a config file
(file specified with the <code class="inline">-config</code> flag) has been added.</p><p>Own Id: OTP-5661 Aux Id: seq10003</p></li></ul><h2 id="kernel-2-10-9" class="section-heading"><a href="#kernel-2-10-9" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.10.9</span></h2><h3 id="fixed-bugs-and-malfunctions-162" class="section-heading"><a href="#fixed-bugs-and-malfunctions-162" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>'<code class="inline">erl -config sys.config</code>' would fail to start if the <code class="inline">sys.config</code> file did
not contain any whitespace at all after the dot. (Thanks to Anders Nygren.)</p><p>Own Id: OTP-5543</p></li><li><p>A bug regarding tcp sockets which results in hanging <a href="gen_tcp.html#send/2"><code class="inline">gen_tcp:send/2</code></a> has been
corrected. To encounter this bug you needed one process that read from a
socket, one that wrote more date than the reader read out so the sender got
suspended, and then the reader closed the socket. (Reported and diagnosed by
Alexey Shchepin.)</p><p>Corrected a bug in the (undocumented and unsupported) option <code class="inline">{packet,http}</code>
for <code class="inline">gen_tcp.</code> (Thanks to Claes Wikstrom and Luke Gorrie.)</p><p>Updated the documentation regarding the second argument to <a href="gen_tcp.html#recv/2"><code class="inline">gen_tcp:recv/2</code></a>,
the <code class="inline">Length</code> to receive.</p><p>Own Id: OTP-5582 Aux Id: seq9839</p></li></ul><h3 id="improvements-and-new-features-84" class="section-heading"><a href="#improvements-and-new-features-84" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>At startup, the Erlang resolver hosts table was used to look up the name of
the local (and possibly stand alone) host. This was incorrect. The configured
resolver method is now used for this purpose.</p><p>Own Id: OTP-5393</p></li><li><p>The <a href="../../apps/erts/erlang.html#port_info/1"><code class="inline">erlang:port_info/1</code></a> BIF is now documented. Minor corrections of the
documentation for <a href="../../apps/erts/erlang.html#port_info/2"><code class="inline">erlang:port_info/2</code></a>.</p><p>Added a note to the documentation of the <code class="inline">math</code> module that all functions are
not available on all platforms.</p><p>Added more information about the <code class="inline">+c</code> option in the <code class="inline">erl</code> man page in the ERTS
documentation.</p><p>Own Id: OTP-5555</p></li><li><p>The new <code class="inline">fun M:F/A</code> construct creates a fun that refers to the latest version
of <code class="inline">M:F/A.</code> This syntax is meant to replace tuple funs <code class="inline">{M,F}</code> which have many
problems.</p><p>The new type test <a href="../../apps/erts/erlang.html#is_function/2"><code class="inline">is_function(Fun,A)</code></a> (which may be used
in guards) test whether <code class="inline">Fun</code> is a fun that can be applied with <code class="inline">A</code> arguments.
(Currently, <code class="inline">Fun</code> can also be a tuple fun.)</p><p>Own Id: OTP-5584</p></li><li><p>According to the documentation <code class="inline">global</code> implements the equivalent of
<a href="../../apps/erts/erlang.html#register/2"><code class="inline">register/2</code></a>, which returns <code class="inline">badarg</code> if a process is already
registered. As it turns out there is no check in <code class="inline">global</code> if a process is
registered under more than one name. If some process is accidentally or by
design given several names, it is possible that the name registry becomes
inconsistent due to the way the resolve function is called when name clashes
are discovered (see <code class="inline">register_name/3</code> in <a href="global.html"><code class="inline">global</code></a>).</p><p>In OTP R11B <code class="inline">global</code> will not allow the registration of a process under more
than one name. To help finding code where <code class="inline">no</code> will be returned, a Kernel
application variable, <code class="inline">global_multi_name_action</code>, is hereby introduced.
Depending on its value (<code class="inline">info</code>, <code class="inline">warning</code>, or <code class="inline">error</code>), messages are sent to
the error logger when <code class="inline">global</code> discovers that some process is given more than
one name. The variable only affects the node where it is defined.</p><p>Own Id: OTP-5603</p></li></ul><h2 id="kernel-2-10-8" class="section-heading"><a href="#kernel-2-10-8" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.10.8</span></h2><h3 id="improvements-and-new-features-85" class="section-heading"><a href="#improvements-and-new-features-85" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>In case of a DNS lookup loop, <code class="inline">inet_db:getbyname</code> ends up building an infinite
list. This has been fixed.</p><p>Own Id: OTP-5449</p></li><li><p>When doing an <code class="inline">inet6</code> name lookup on an IPv4 address it was possible to get an
address on IPv4 format back. This has been corrected. Some other minor
inconsistencies regarding IPv6 name lookup have also been corrected.</p><p>Own Id: OTP-5576</p></li></ul><h2 id="kernel-2-10-7" class="section-heading"><a href="#kernel-2-10-7" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.10.7</span></h2><h3 id="fixed-bugs-and-malfunctions-163" class="section-heading"><a href="#fixed-bugs-and-malfunctions-163" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Under certain circumstances the <code class="inline">net_kernel</code> could emit spurious nodedown
messages. This bug has been fixed.</p><p>Own Id: OTP-5396</p></li><li><p>Removed description of the <code class="inline">keep_zombies</code> configuration parameter in the
<code class="inline">kernel</code> man page.</p><p>Own Id: OTP-5497</p></li></ul><h3 id="improvements-and-new-features-86" class="section-heading"><a href="#improvements-and-new-features-86" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Eliminated Dialyzer warnings (caused by dead code) in the <code class="inline">init</code> and
<code class="inline">prim_file</code> modules.</p><p>Own Id: OTP-5496</p></li><li><p><code class="inline">inet_config</code> now also checks the environment variable <code class="inline">ERL_INETRC</code> for a
possible user configuration file. See the ERTS User's Guide for details.</p><p>Own Id: OTP-5512</p></li></ul><h2 id="kernel-2-10-6" class="section-heading"><a href="#kernel-2-10-6" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.10.6</span></h2><h3 id="improvements-and-new-features-87" class="section-heading"><a href="#improvements-and-new-features-87" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>The <code class="inline">c</code> option for the <code class="inline">+B</code> flag has been introduced which makes it possible
to use Ctrl-C (Ctrl-Break on Windows) to interrupt the shell process rather
than to invoke the emulator break handler. All new <code class="inline">+B</code> options are also
supported on Windows (werl) as of now. Furthermore, Ctrl-C on Windows has now
been reserved for copying text (what Ctrl-Ins was used for previously).
Ctrl-Break should be used for break handling. Lastly, the documentation of the
system flags has been updated.</p><p>Own Id: OTP-5388</p></li><li><p>The possibility to start the Erlang shell in parallel with the rest of the
system was reintroduced for backwards compatibility in STDLIB 1.13.1. The flag
to be used for this is now called <code class="inline">async_shell_start</code> and has been documented.
New shells started from the JCL menu are not synchronized with <code class="inline">init</code> anymore.
This makes it possible to start a new shell (e.g. for debugging purposes) even
if the initial shell has not come up.</p><p>Own Id: OTP-5406 Aux Id: OTP-5218</p></li></ul><h2 id="kernel-2-10-5" class="section-heading"><a href="#kernel-2-10-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.10.5</span></h2><h3 id="fixed-bugs-and-malfunctions-164" class="section-heading"><a href="#fixed-bugs-and-malfunctions-164" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Documentation for <a href="../../apps/erts/erlang.html#binary_to_float/1"><code class="inline">erlang:binary_to_float/1</code></a> deleted. The BIF itself was
removed several releases ago.</p><p>Updated documentation for <a href="../../apps/erts/erlang.html#apply/2"><code class="inline">apply/2</code></a> and <a href="../../apps/erts/erlang.html#apply/3"><code class="inline">apply/3</code></a>.</p><p>Own Id: OTP-5391</p></li></ul><h3 id="improvements-and-new-features-88" class="section-heading"><a href="#improvements-and-new-features-88" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p><a href="net_kernel.html#monitor_nodes/2"><code class="inline">net_kernel:monitor_nodes/2</code></a> which takes a flag and an option list has been
added. By use of <a href="net_kernel.html#monitor_nodes/2"><code class="inline">net_kernel:monitor_nodes/2</code></a> one can subscribe for
<code class="inline">nodeup/nodedown</code> messages with extra information. It is now possible to
monitor hidden nodes, and get <code class="inline">nodedown</code> reason. See the <a href="net_kernel.html"><code class="inline">net_kernel</code></a>
documentation for more information.</p><p>Own Id: OTP-5374</p></li></ul><h2 id="kernel-2-10-4" class="section-heading"><a href="#kernel-2-10-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.10.4</span></h2><h3 id="fixed-bugs-and-malfunctions-165" class="section-heading"><a href="#fixed-bugs-and-malfunctions-165" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The application master for an application now terminates the application
faster, which reduces the risk for timeouts in other parts of the system.</p><p>Own Id: OTP-5363 Aux Id: EABln19084</p></li><li><p>A BIF <a href="../../apps/erts/erlang.html#raise/3"><code class="inline">erlang:raise/3</code></a> has been added. See the manual for details. It is
intended for internal system programming only, advanced error handling.</p><p>Own Id: OTP-5376 Aux Id: OTP-5257</p></li></ul><h2 id="kernel-2-10-3" class="section-heading"><a href="#kernel-2-10-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.10.3</span></h2><h3 id="improvements-and-new-features-89" class="section-heading"><a href="#improvements-and-new-features-89" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>With the <code class="inline">-eval</code> flag (<code class="inline">erl -eval Expr</code>), an arbitrary expression can be
evaluated during system initialization. This is documented in <a href="../../apps/erts/init.html"><code class="inline">init</code></a>.</p><p>Own Id: OTP-5260</p></li><li><p>The unsupported and undocumented modules <code class="inline">socks5</code>, <code class="inline">socks5_auth</code>,
<code class="inline">socks5_tcp</code>, and <code class="inline">socks5_udp</code> have been removed.</p><p>Own Id: OTP-5266</p></li></ul><h2 id="kernel-2-10-1" class="section-heading"><a href="#kernel-2-10-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kernel 2.10.1</span></h2><h3 id="fixed-bugs-and-malfunctions-166" class="section-heading"><a href="#fixed-bugs-and-malfunctions-166" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The Pman 'trace shell' functionality was broken and has now been fixed.
Furthermore, Pman could not correctly find the pid of the active shell if more
than one shell process was running on the node. This has also been corrected.</p><p>Own Id: OTP-5191</p></li><li><p>The documentation for the <code class="inline">auth:open/1</code> function which no longer exists has
been removed. (Thanks to Miguel Barreiro.)</p><p>Own Id: OTP-5208</p></li><li><p>Corrected the <code class="inline">crc32/3</code> function in the undocumented and unsupported <code class="inline">zlib</code>
module.</p><p>Own Id: OTP-5227</p></li></ul><h3 id="improvements-and-new-features-90" class="section-heading"><a href="#improvements-and-new-features-90" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>You can now start Erlang with the <code class="inline">-rsh</code> flag which gives you a remote initial
shell instead of a local one. Example:</p><pre><code class="text">            erl -sname this_node -rsh other_node@other_host</code></pre><p>Own Id: OTP-5210</p></li><li><p>If <code class="inline">/etc/hosts</code> specified two hosts with the same IP address (on separate
lines), only the last host would be registered by inet_db during inet
configuration. This has been corrected now so that both aliases are registered
with the same IP address.</p><p>Own Id: OTP-5212 Aux Id: seq7128</p></li><li><p>The documentation for BIFs that take I/O lists have been clarified. Those are
<a href="../../apps/erts/erlang.html#list_to_binary/1"><code class="inline">list_to_binary/1</code></a>,
<a href="../../apps/erts/erlang.html#port_command/2"><code class="inline">port_command/2</code></a>, <a href="../../apps/erts/erlang.html#port_control/3"><code class="inline">port_control/3</code></a>.</p><p>Documentation for all <code class="inline">is_*</code> BIFs (such as <a href="../../apps/erts/erlang.html#is_atom/1"><code class="inline">is_atom/1</code></a>) has
been added.</p><p>Removed the documentation for <a href="../../apps/erts/erlang.html#float_to_binary/2"><code class="inline">erlang:float_to_binary/2</code></a> which was removed
from the run-time system several releases ago.</p><p>Own Id: OTP-5222</p></li></ul>

</div>

<div class="bottom-actions" id="bottom-actions">
  <div class="bottom-actions-item">

      <a href="kernel_app.html" class="bottom-actions-button" rel="prev">
        <span class="subheader">
          ← Previous Page
        </span>
        <span class="title">
Kernel Application
        </span>
      </a>

  </div>
  <div class="bottom-actions-item">

      <a href="introduction_chapter.html" class="bottom-actions-button" rel="next">
        <span class="subheader">
          Next Page →
        </span>
        <span class="title">
Introduction
        </span>
      </a>

  </div>
</div>
    <footer class="footer">
      <p>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="kernel.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.38.1) for the

          <a href="https://erlang.org" title="Erlang" target="_blank" translate="no">Erlang programming language</a>

      </p>
<p>Copyright © 1996-2025 <a href="https://www.ericsson.com">Ericsson AB</a></p>
    </footer>
  </div>
</main>
</div>
  <script defer src="https://cdn.jsdelivr.net/npm/mermaid@11.4.1/dist/mermaid.min.js"></script>
  <script>
  let initialized = false;

  window.addEventListener("exdoc:loaded", () => {
      if (!initialized) {
      mermaid.initialize({
          startOnLoad: false,
          theme: document.body.className.includes("dark") ? "dark" : "default"
      });
      initialized = true;
      }

      let id = 0;
      for (const codeEl of document.querySelectorAll("pre code.mermaid")) {
      const preEl = codeEl.parentElement;
      const graphDefinition = codeEl.textContent;
      const graphEl = document.createElement("div");
      const graphId = "mermaid-graph-" + id++;
      mermaid.render(graphId, graphDefinition).then(({svg, bindFunctions}) => {
          graphEl.innerHTML = svg;
          bindFunctions?.(graphEl);
          preEl.insertAdjacentElement("afterend", graphEl);
          preEl.remove();
      });
      }
  });
  </script>

  </body>
</html>
