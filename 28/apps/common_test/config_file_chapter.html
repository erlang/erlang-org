<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.38.1">
    <meta name="project" content="common_test v1.28">


<meta name="exdoc:full-text-search-url" content="/doc/search.html?v=28&q=">
<meta name="major-vsn" content="28">
<link rel="canonical" href="https://www.erlang.org/doc/apps/common_test/config_file_chapter.html" />
    <title>External Configuration Data — common_test v1.28</title>

    <link rel="stylesheet" href="dist/html-erlang-ZK43ZOAC.css" />

    <script defer src="dist/sidebar_items-39261B45.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-DPJLHKSM.js"></script>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="../../index.html" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="common_test" />
        </a>

      <div>
        <a href="../../index.html" class="sidebar-projectName" translate="no">
common_test
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v1.28
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras=""></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-extra" id="main" data-type="extras">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of common_test</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search" tabindex="-1">
            <i class="ri-search-2-line ri-lg" aria-hidden="true"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>External Configuration Data</h1>


      <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/common_test/doc/guides/config_file_chapter.md#L1" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

  </div>


<p><a href="" id="top"></a></p><h2 id="general" class="section-heading"><a href="#general" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">General</span></h2><p>To avoid hard-coding data values related to the test and/or System Under Test
(SUT) in the test suites, the data can instead be specified through
configuration files or strings that <code class="inline">Common Test</code> reads before the start of a
test run. External configuration data makes it possible to change test
properties without modifying the test suites using the data. Examples of
configuration data follows:</p><ul><li>Addresses to the test plant or other instruments</li><li>User login information</li><li>Names of files needed by the test</li><li>Names of programs to be executed during the test</li><li>Any other variable needed by the test</li></ul><h2 id="syntax" class="section-heading"><a href="#syntax" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Syntax</span></h2><p>A configuration file can contain any number of elements of the type:</p><pre><code class="makeup erlang" translate="no"><span class="p" data-group-id="8436475696-1">{</span><span class="n">CfgVarName</span><span class="p">,</span><span class="n">Value</span><span class="p" data-group-id="8436475696-1">}</span><span class="p">.</span></code></pre><p>where</p><pre><code class="makeup erlang" translate="no"><span class="n">CfgVarName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">atom</span><span class="p" data-group-id="9090895244-1">(</span><span class="p" data-group-id="9090895244-1">)</span><span class="w">
</span><span class="n">Value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">term</span><span class="p" data-group-id="9090895244-2">(</span><span class="p" data-group-id="9090895244-2">)</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="p" data-group-id="9090895244-3">[</span><span class="p" data-group-id="9090895244-4">{</span><span class="n">CfgVarName</span><span class="p">,</span><span class="n">Value</span><span class="p" data-group-id="9090895244-4">}</span><span class="p" data-group-id="9090895244-3">]</span></code></pre><h2 id="requiring-and-reading-configuration-data" class="section-heading"><a href="#requiring-and-reading-configuration-data" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Requiring and Reading Configuration Data</span></h2><p><a href="" id="require_config_data"></a></p><p>In a test suite, one must <em>require</em> that a configuration variable (<code class="inline">CfgVarName</code>
in the previous definition) exists before attempting to read the associated
value in a test case or configuration function.</p><p><code class="inline">require</code> is an assert statement, which can be part of the
<a href="write_test_chapter.html#suite">Test Suite Information Function</a> or
<a href="write_test_chapter.html#info_function">Test Case Information Function</a>. If the
required variable is unavailable, the test is skipped (unless a default value
has been specified, see section
<a href="write_test_chapter.html#info_function">Test Case Information Function</a> for
details). Also, function <a href="ct.html#require/1"><code class="inline">ct:require/1/2</code></a> can be called from a
test case to check if a specific variable is available. The return value from
this function must be checked explicitly and appropriate action be taken
depending on the result (for example, to skip the test case if the variable in
question does not exist).</p><p>A <code class="inline">require</code> statement in the test suite information case or test case
information-list is to look like <code class="inline">{require,CfgVarName}</code> or
<code class="inline">{require,AliasName,CfgVarName}</code>. The arguments <code class="inline">AliasName</code> and <code class="inline">CfgVarName</code> are
the same as the arguments to <a href="ct.html#require/1"><code class="inline">ct:require/1,2</code></a>. <code class="inline">AliasName</code>
becomes an alias for the configuration variable, and can be used as reference to
the configuration data value. The configuration variable can be associated with
any number of alias names, but each name must be unique within the same test
suite. The two main uses for alias names follows:</p><ul><li>To identify connections (described later).</li><li>To help adapt configuration data to a test suite (or test case) and improve
readability.</li></ul><p>To read the value of a configuration variable, use function
<a href="ct.html#get_config/1"><code class="inline">get_config/1,2,3</code></a>.</p><p><em>Example:</em></p><pre><code class="makeup erlang" translate="no"><span class="nf">suite</span><span class="p" data-group-id="4247082489-1">(</span><span class="p" data-group-id="4247082489-1">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="p" data-group-id="4247082489-2">[</span><span class="p" data-group-id="4247082489-3">{</span><span class="ss">require</span><span class="p">,</span><span class="w"> </span><span class="ss">domain</span><span class="p">,</span><span class="w"> </span><span class="ss">&#39;CONN_SPEC_DNS_SUFFIX&#39;</span><span class="p" data-group-id="4247082489-3">}</span><span class="p" data-group-id="4247082489-2">]</span><span class="p">.</span><span class="w">

</span><span class="p">.</span><span class="p">.</span><span class="p">.</span><span class="w">

</span><span class="nf">testcase</span><span class="p" data-group-id="4247082489-4">(</span><span class="n">Config</span><span class="p" data-group-id="4247082489-4">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="n">Domain</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">ct</span><span class="p">:</span><span class="nf">get_config</span><span class="p" data-group-id="4247082489-5">(</span><span class="ss">domain</span><span class="p" data-group-id="4247082489-5">)</span><span class="p">,</span><span class="w">
    </span><span class="p">.</span><span class="p">.</span><span class="p">.</span></code></pre><h2 id="using-configuration-variables-defined-in-multiple-files" class="section-heading"><a href="#using-configuration-variables-defined-in-multiple-files" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Using Configuration Variables Defined in Multiple Files</span></h2><p>If a configuration variable is defined in multiple files and you want to access
all possible values, use function <a href="ct.html#get_config/3"><code class="inline">ct:get_config/3</code></a> and specify <code class="inline">all</code> in the
options list. The values are then returned in a list and the order of the
elements corresponds to the order that the configuration files were specified at
startup.</p><h2 id="encrypted-configuration-files" class="section-heading"><a href="#encrypted-configuration-files" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Encrypted Configuration Files</span></h2><p><a href="" id="encrypted_config_files"></a></p><p>Configuration files containing sensitive data can be encrypted if they must be
stored in open and shared directories.</p><p>To have <code class="inline">Common Test</code> encrypt a specified file using function <code class="inline">DES3</code> in
application <code class="inline">Crypto</code>, call
<a href="ct.html#encrypt_config_file/2"><code class="inline">ct:encrypt_config_file/2,3</code></a> The encrypted file
can then be used as a regular configuration file in combination with other
encrypted files or normal text files. However, the key for decrypting the
configuration file must be provided when running the test. This can be done with
flag/option <code class="inline">decrypt_key</code> or <code class="inline">decrypt_file</code>, or a key file in a predefined
location.</p><p><code class="inline">Common Test</code> also provides decryption functions,
<a href="ct.html#decrypt_config_file/2"><code class="inline">ct:decrypt_config_file/2,3</code></a>, for recreating the
original text files.</p><h2 id="opening-connections-using-configuration-data" class="section-heading"><a href="#opening-connections-using-configuration-data" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Opening Connections Using Configuration Data</span></h2><p>Two different methods for opening a connection using the support functions in,
for example, <a href="ct_ssh.html"><code class="inline">ct_ssh</code></a>, <a href="ct_ftp.html"><code class="inline">ct_ftp</code></a>, and <a href="ct_telnet.html"><code class="inline">ct_telnet</code></a> follows:</p><ul><li>Using a configuration target name (an alias) as reference.</li><li>Using the configuration variable as reference.</li></ul><p>When a target name is used for referencing the configuration data (that
specifies the connection to be opened), the same name can be used as connection
identity in all subsequent calls related to the connection (also for closing
it). Only one open connection per target name is possible. If you attempt to
open a new connection using a name already associated with an open connection,
<code class="inline">Common Test</code> returns the already existing handle so the previously opened
connection is used. This feature makes it possible to call the function for
opening a particular connection whenever useful. An action like this does not
necessarily open any new connections unless it is required (which could be the
case if, for example, the previous connection has been closed unexpectedly by
the server). Using named connections also removes the need to pass handle
references around in the suite for these connections.</p><p>When a configuration variable name is used as reference to the data specifying
the connection, the handle returned as a result of opening the connection must
be used in all subsequent calls (also for closing the connection). Repeated
calls to the open function with the same variable name as reference results in
multiple connections being opened. This can be useful, for example, if a test
case needs to open multiple connections to the same server on the target node
(using the same configuration data for each connection).</p><h2 id="user-specific-configuration-data-formats" class="section-heading"><a href="#user-specific-configuration-data-formats" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">User-Specific Configuration Data Formats</span></h2><p>The user can specify configuration data on a different format than key-value
tuples in a text file, as described so far. The data can, for example, be read
from any files, fetched from the web over HTTP, or requested from a
user-specific process. To support this, <code class="inline">Common Test</code> provides a callback module
plugin mechanism to handle configuration data.</p><h3 id="default-callback-modules-for-handling-configuration-data" class="section-heading"><a href="#default-callback-modules-for-handling-configuration-data" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Default Callback Modules for Handling Configuration Data</span></h3><p><code class="inline">Common Test</code> includes default callback modules for handling configuration data
specified in standard configuration files (described earlier) and in XML files
as follows:</p><ul><li><code class="inline">ct_config_plain</code> - for reading configuration files with key-value tuples
(standard format). This handler is used to parse configuration files if no
user callback is specified.</li><li><code class="inline">ct_config_xml</code> - for reading configuration data from XML files.</li></ul><h3 id="using-xml-configuration-files" class="section-heading"><a href="#using-xml-configuration-files" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Using XML Configuration Files</span></h3><p>An example of an XML configuration file follows:</p><pre><code class="xml">&lt;config&gt;
   &lt;ftp_host&gt;
       &lt;ftp&gt;&quot;targethost&quot;&lt;/ftp&gt;
       &lt;username&gt;&quot;tester&quot;&lt;/username&gt;
       &lt;password&gt;&quot;letmein&quot;&lt;/password&gt;
   &lt;/ftp_host&gt;
   &lt;lm_directory&gt;&quot;/test/loadmodules&quot;&lt;/lm_directory&gt;
&lt;/config&gt;</code></pre><p>Once read, this file produces the same configuration variables as the following
text file:</p><pre><code class="makeup erlang" translate="no"><span class="p" data-group-id="8269339481-1">{</span><span class="ss">ftp_host</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8269339481-2">[</span><span class="p" data-group-id="8269339481-3">{</span><span class="ss">ftp</span><span class="p">,</span><span class="s">&quot;targethost&quot;</span><span class="p" data-group-id="8269339481-3">}</span><span class="p">,</span><span class="w">
            </span><span class="p" data-group-id="8269339481-4">{</span><span class="ss">username</span><span class="p">,</span><span class="s">&quot;tester&quot;</span><span class="p" data-group-id="8269339481-4">}</span><span class="p">,</span><span class="w">
            </span><span class="p" data-group-id="8269339481-5">{</span><span class="ss">password</span><span class="p">,</span><span class="s">&quot;letmein&quot;</span><span class="p" data-group-id="8269339481-5">}</span><span class="p" data-group-id="8269339481-2">]</span><span class="p" data-group-id="8269339481-1">}</span><span class="p">.</span><span class="w">

</span><span class="p" data-group-id="8269339481-6">{</span><span class="ss">lm_directory</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/test/loadmodules&quot;</span><span class="p" data-group-id="8269339481-6">}</span><span class="p">.</span></code></pre><h3 id="implement-a-user-specific-handler" class="section-heading"><a href="#implement-a-user-specific-handler" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Implement a User-Specific Handler</span></h3><p>The user-specific handler can be written to handle special configuration file
formats. The parameter can be either file names or configuration strings (the
empty list is valid).</p><p>The callback module implementing the handler is responsible for checking the
correctness of configuration strings.</p><p>To validate the configuration strings, the callback module is to have function
<code class="inline">Callback:check_parameter/1</code> exported.</p><p>The input argument is passed from <code class="inline">Common Test</code>, as defined in the test
specification, or specified as an option to <code class="inline">ct_run</code> or <code class="inline">ct:run_test</code>.</p><p>The return value is to be any of the following values, indicating if the
specified configuration parameter is valid:</p><ul><li><code class="inline">{ok, {file, FileName}}</code> - the parameter is a file name and the file exists.</li><li><code class="inline">{ok, {config, ConfigString}}</code> - the parameter is a configuration string and
it is correct.</li><li><code class="inline">{error, {nofile, FileName}}</code> - there is no file with the specified name in
the current directory.</li><li><code class="inline">{error, {wrong_config, ConfigString}}</code> - the configuration string is wrong.</li></ul><p>The function <code class="inline">Callback:read_config/1</code> is to be exported from the callback module
to read configuration data, initially before the tests start, or as a result of
data being reloaded during test execution. The input argument is the same as for
function <code class="inline">check_parameter/1</code>.</p><p>The return value is to be either of the following:</p><ul><li><code class="inline">{ok, Config}</code> - if the configuration variables are read successfully.</li><li><code class="inline">{error, {Error, ErrorDetails}}</code> - if the callback module fails to proceed
with the specified configuration parameters.</li></ul><p><code class="inline">Config</code> is the proper Erlang key-value list, with possible key-value sublists
as values, like the earlier configuration file example:</p><pre><code class="makeup erlang" translate="no"><span class="p" data-group-id="4063123883-1">[</span><span class="p" data-group-id="4063123883-2">{</span><span class="ss">ftp_host</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4063123883-3">[</span><span class="p" data-group-id="4063123883-4">{</span><span class="ss">ftp</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;targethost&quot;</span><span class="p" data-group-id="4063123883-4">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4063123883-5">{</span><span class="ss">username</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;tester&quot;</span><span class="p" data-group-id="4063123883-5">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4063123883-6">{</span><span class="ss">password</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;letmein&quot;</span><span class="p" data-group-id="4063123883-6">}</span><span class="p" data-group-id="4063123883-3">]</span><span class="p" data-group-id="4063123883-2">}</span><span class="p">,</span><span class="w">
 </span><span class="p" data-group-id="4063123883-7">{</span><span class="ss">lm_directory</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/test/loadmodules&quot;</span><span class="p" data-group-id="4063123883-7">}</span><span class="p" data-group-id="4063123883-1">]</span></code></pre><h2 id="examples-of-configuration-data-handling" class="section-heading"><a href="#examples-of-configuration-data-handling" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples of Configuration Data Handling</span></h2><p>A configuration file for using the FTP client to access files on a remote host
can look as follows:</p><pre><code class="makeup erlang" translate="no"><span class="p" data-group-id="1530414763-1">{</span><span class="ss">ftp_host</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1530414763-2">[</span><span class="p" data-group-id="1530414763-3">{</span><span class="ss">ftp</span><span class="p">,</span><span class="s">&quot;targethost&quot;</span><span class="p" data-group-id="1530414763-3">}</span><span class="p">,</span><span class="w">
            </span><span class="p" data-group-id="1530414763-4">{</span><span class="ss">username</span><span class="p">,</span><span class="s">&quot;tester&quot;</span><span class="p" data-group-id="1530414763-4">}</span><span class="p">,</span><span class="w">
            </span><span class="p" data-group-id="1530414763-5">{</span><span class="ss">password</span><span class="p">,</span><span class="s">&quot;letmein&quot;</span><span class="p" data-group-id="1530414763-5">}</span><span class="p" data-group-id="1530414763-2">]</span><span class="p" data-group-id="1530414763-1">}</span><span class="p">.</span><span class="w">

</span><span class="p" data-group-id="1530414763-6">{</span><span class="ss">lm_directory</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/test/loadmodules&quot;</span><span class="p" data-group-id="1530414763-6">}</span><span class="p">.</span></code></pre><p>The XML version shown earlier can also be used, but it is to be explicitly
specified that the <code class="inline">ct_config_xml</code> callback module is to be used by
<code class="inline">Common Test</code>.</p><p>The following is an example of how to assert that the configuration data is
available and can be used for an FTP session:</p><pre><code class="makeup erlang" translate="no"><span class="nf">init_per_testcase</span><span class="p" data-group-id="5816932116-1">(</span><span class="ss">ftptest</span><span class="p">,</span><span class="w"> </span><span class="n">Config</span><span class="p" data-group-id="5816932116-1">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="p" data-group-id="5816932116-2">{</span><span class="ss">ok</span><span class="p">,</span><span class="p">_</span><span class="p" data-group-id="5816932116-2">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">ct_ftp</span><span class="p">:</span><span class="nf">open</span><span class="p" data-group-id="5816932116-3">(</span><span class="ss">ftp</span><span class="p" data-group-id="5816932116-3">)</span><span class="p">,</span><span class="w">
    </span><span class="n">Config</span><span class="p">.</span><span class="w">

</span><span class="nf">end_per_testcase</span><span class="p" data-group-id="5816932116-4">(</span><span class="ss">ftptest</span><span class="p">,</span><span class="w"> </span><span class="p">_</span><span class="n">Config</span><span class="p" data-group-id="5816932116-4">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nc">ct_ftp</span><span class="p">:</span><span class="nf">close</span><span class="p" data-group-id="5816932116-5">(</span><span class="ss">ftp</span><span class="p" data-group-id="5816932116-5">)</span><span class="p">.</span><span class="w">

</span><span class="nf">ftptest</span><span class="p" data-group-id="5816932116-6">(</span><span class="p" data-group-id="5816932116-6">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="p" data-group-id="5816932116-7">[</span><span class="p" data-group-id="5816932116-8">{</span><span class="ss">require</span><span class="p">,</span><span class="ss">ftp</span><span class="p">,</span><span class="ss">ftp_host</span><span class="p" data-group-id="5816932116-8">}</span><span class="p">,</span><span class="w">
     </span><span class="p" data-group-id="5816932116-9">{</span><span class="ss">require</span><span class="p">,</span><span class="ss">lm_directory</span><span class="p" data-group-id="5816932116-9">}</span><span class="p" data-group-id="5816932116-7">]</span><span class="p">.</span><span class="w">

</span><span class="nf">ftptest</span><span class="p" data-group-id="5816932116-10">(</span><span class="n">Config</span><span class="p" data-group-id="5816932116-10">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="n">Remote</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">filename</span><span class="p">:</span><span class="nf">join</span><span class="p" data-group-id="5816932116-11">(</span><span class="nc">ct</span><span class="p">:</span><span class="nf">get_config</span><span class="p" data-group-id="5816932116-12">(</span><span class="ss">lm_directory</span><span class="p" data-group-id="5816932116-12">)</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;loadmodX&quot;</span><span class="p" data-group-id="5816932116-11">)</span><span class="p">,</span><span class="w">
    </span><span class="n">Local</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">filename</span><span class="p">:</span><span class="nf">join</span><span class="p" data-group-id="5816932116-13">(</span><span class="nc">proplists</span><span class="p">:</span><span class="nf">get_value</span><span class="p" data-group-id="5816932116-14">(</span><span class="ss">priv_dir</span><span class="p">,</span><span class="n">Config</span><span class="p" data-group-id="5816932116-14">)</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;loadmodule&quot;</span><span class="p" data-group-id="5816932116-13">)</span><span class="p">,</span><span class="w">
    </span><span class="ss">ok</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">ct_ftp</span><span class="p">:</span><span class="nf">recv</span><span class="p" data-group-id="5816932116-15">(</span><span class="ss">ftp</span><span class="p">,</span><span class="w"> </span><span class="n">Remote</span><span class="p">,</span><span class="w"> </span><span class="n">Local</span><span class="p" data-group-id="5816932116-15">)</span><span class="p">,</span><span class="w">
    </span><span class="p">.</span><span class="p">.</span><span class="p">.</span></code></pre><p>The following is an example of how the functions in the previous example can be
rewritten if it is necessary to open multiple connections to the FTP server:</p><pre><code class="makeup erlang" translate="no"><span class="nf">init_per_testcase</span><span class="p" data-group-id="4137735896-1">(</span><span class="ss">ftptest</span><span class="p">,</span><span class="w"> </span><span class="n">Config</span><span class="p" data-group-id="4137735896-1">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="p" data-group-id="4137735896-2">{</span><span class="ss">ok</span><span class="p">,</span><span class="n">Handle1</span><span class="p" data-group-id="4137735896-2">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">ct_ftp</span><span class="p">:</span><span class="nf">open</span><span class="p" data-group-id="4137735896-3">(</span><span class="ss">ftp_host</span><span class="p" data-group-id="4137735896-3">)</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="4137735896-4">{</span><span class="ss">ok</span><span class="p">,</span><span class="n">Handle2</span><span class="p" data-group-id="4137735896-4">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">ct_ftp</span><span class="p">:</span><span class="nf">open</span><span class="p" data-group-id="4137735896-5">(</span><span class="ss">ftp_host</span><span class="p" data-group-id="4137735896-5">)</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="4137735896-6">[</span><span class="p" data-group-id="4137735896-7">{</span><span class="ss">ftp_handles</span><span class="p">,</span><span class="p" data-group-id="4137735896-8">[</span><span class="n">Handle1</span><span class="p">,</span><span class="n">Handle2</span><span class="p" data-group-id="4137735896-8">]</span><span class="p" data-group-id="4137735896-7">}</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="n">Config</span><span class="p" data-group-id="4137735896-6">]</span><span class="p">.</span><span class="w">

</span><span class="nf">end_per_testcase</span><span class="p" data-group-id="4137735896-9">(</span><span class="ss">ftptest</span><span class="p">,</span><span class="w"> </span><span class="n">Config</span><span class="p" data-group-id="4137735896-9">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nc">lists</span><span class="p">:</span><span class="nf">foreach</span><span class="p" data-group-id="4137735896-10">(</span><span class="nf">fun</span><span class="p" data-group-id="4137735896-11">(</span><span class="n">Handle</span><span class="p" data-group-id="4137735896-11">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">ct_ftp</span><span class="p">:</span><span class="nf">close</span><span class="p" data-group-id="4137735896-12">(</span><span class="n">Handle</span><span class="p" data-group-id="4137735896-12">)</span><span class="w"> </span><span class="k">end</span><span class="p">,</span><span class="w">
                  </span><span class="nc">proplists</span><span class="p">:</span><span class="nf">get_value</span><span class="p" data-group-id="4137735896-13">(</span><span class="ss">ftp_handles</span><span class="p">,</span><span class="n">Config</span><span class="p" data-group-id="4137735896-13">)</span><span class="p" data-group-id="4137735896-10">)</span><span class="p">.</span><span class="w">

</span><span class="nf">ftptest</span><span class="p" data-group-id="4137735896-14">(</span><span class="p" data-group-id="4137735896-14">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="p" data-group-id="4137735896-15">[</span><span class="p" data-group-id="4137735896-16">{</span><span class="ss">require</span><span class="p">,</span><span class="ss">ftp_host</span><span class="p" data-group-id="4137735896-16">}</span><span class="p">,</span><span class="w">
     </span><span class="p" data-group-id="4137735896-17">{</span><span class="ss">require</span><span class="p">,</span><span class="ss">lm_directory</span><span class="p" data-group-id="4137735896-17">}</span><span class="p" data-group-id="4137735896-15">]</span><span class="p">.</span><span class="w">

</span><span class="nf">ftptest</span><span class="p" data-group-id="4137735896-18">(</span><span class="n">Config</span><span class="p" data-group-id="4137735896-18">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="n">Remote</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">filename</span><span class="p">:</span><span class="nf">join</span><span class="p" data-group-id="4137735896-19">(</span><span class="nc">ct</span><span class="p">:</span><span class="nf">get_config</span><span class="p" data-group-id="4137735896-20">(</span><span class="ss">lm_directory</span><span class="p" data-group-id="4137735896-20">)</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;loadmodX&quot;</span><span class="p" data-group-id="4137735896-19">)</span><span class="p">,</span><span class="w">
    </span><span class="n">Local</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">filename</span><span class="p">:</span><span class="nf">join</span><span class="p" data-group-id="4137735896-21">(</span><span class="nc">proplists</span><span class="p">:</span><span class="nf">get_value</span><span class="p" data-group-id="4137735896-22">(</span><span class="ss">priv_dir</span><span class="p">,</span><span class="n">Config</span><span class="p" data-group-id="4137735896-22">)</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;loadmodule&quot;</span><span class="p" data-group-id="4137735896-21">)</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="4137735896-23">[</span><span class="n">Handle</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="n">MoreHandles</span><span class="p" data-group-id="4137735896-23">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">proplists</span><span class="p">:</span><span class="nf">get_value</span><span class="p" data-group-id="4137735896-24">(</span><span class="ss">ftp_handles</span><span class="p">,</span><span class="n">Config</span><span class="p" data-group-id="4137735896-24">)</span><span class="p">,</span><span class="w">
    </span><span class="ss">ok</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">ct_ftp</span><span class="p">:</span><span class="nf">recv</span><span class="p" data-group-id="4137735896-25">(</span><span class="n">Handle</span><span class="p">,</span><span class="w"> </span><span class="n">Remote</span><span class="p">,</span><span class="w"> </span><span class="n">Local</span><span class="p" data-group-id="4137735896-25">)</span><span class="p">,</span><span class="w">
    </span><span class="p">.</span><span class="p">.</span><span class="p">.</span></code></pre><h2 id="example-of-user-specific-configuration-handler" class="section-heading"><a href="#example-of-user-specific-configuration-handler" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Example of User-Specific Configuration Handler</span></h2><p>A simple configuration handling driver, asking an external server for
configuration data, can be implemented as follows:</p><pre><code class="makeup erlang" translate="no"><span class="p">-</span><span class="na">module</span><span class="p" data-group-id="4354365975-1">(</span><span class="ss">config_driver</span><span class="p" data-group-id="4354365975-1">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">export</span><span class="p" data-group-id="4354365975-2">(</span><span class="p" data-group-id="4354365975-3">[</span><span class="ss">read_config</span><span class="p">/</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">check_parameter</span><span class="p">/</span><span class="mi">1</span><span class="p" data-group-id="4354365975-3">]</span><span class="p" data-group-id="4354365975-2">)</span><span class="p">.</span><span class="w">

</span><span class="nf">read_config</span><span class="p" data-group-id="4354365975-4">(</span><span class="n">ServerName</span><span class="p" data-group-id="4354365975-4">)</span><span class="p">-&gt;</span><span class="w">
    </span><span class="n">ServerModule</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list_to_atom</span><span class="p" data-group-id="4354365975-5">(</span><span class="n">ServerName</span><span class="p" data-group-id="4354365975-5">)</span><span class="p">,</span><span class="w">
    </span><span class="n">ServerModule</span><span class="p">:</span><span class="nf">start</span><span class="p" data-group-id="4354365975-6">(</span><span class="p" data-group-id="4354365975-6">)</span><span class="p">,</span><span class="w">
    </span><span class="n">ServerModule</span><span class="p">:</span><span class="nf">get_config</span><span class="p" data-group-id="4354365975-7">(</span><span class="p" data-group-id="4354365975-7">)</span><span class="p">.</span><span class="w">

</span><span class="nf">check_parameter</span><span class="p" data-group-id="4354365975-8">(</span><span class="n">ServerName</span><span class="p" data-group-id="4354365975-8">)</span><span class="p">-&gt;</span><span class="w">
    </span><span class="n">ServerModule</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list_to_atom</span><span class="p" data-group-id="4354365975-9">(</span><span class="n">ServerName</span><span class="p" data-group-id="4354365975-9">)</span><span class="p">,</span><span class="w">
    </span><span class="k">case</span><span class="w"> </span><span class="nc">code</span><span class="p">:</span><span class="nf">is_loaded</span><span class="p" data-group-id="4354365975-10">(</span><span class="n">ServerModule</span><span class="p" data-group-id="4354365975-10">)</span><span class="w"> </span><span class="k">of</span><span class="w">
        </span><span class="p" data-group-id="4354365975-11">{</span><span class="ss">file</span><span class="p">,</span><span class="w"> </span><span class="p">_</span><span class="p" data-group-id="4354365975-11">}</span><span class="p">-&gt;</span><span class="w">
            </span><span class="p" data-group-id="4354365975-12">{</span><span class="ss">ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4354365975-13">{</span><span class="ss">config</span><span class="p">,</span><span class="w"> </span><span class="n">ServerName</span><span class="p" data-group-id="4354365975-13">}</span><span class="p" data-group-id="4354365975-12">}</span><span class="p">;</span><span class="w">
        </span><span class="ss">false</span><span class="p">-&gt;</span><span class="w">
            </span><span class="k">case</span><span class="w"> </span><span class="nc">code</span><span class="p">:</span><span class="nf">load_file</span><span class="p" data-group-id="4354365975-14">(</span><span class="n">ServerModule</span><span class="p" data-group-id="4354365975-14">)</span><span class="w"> </span><span class="k">of</span><span class="w">
                </span><span class="p" data-group-id="4354365975-15">{</span><span class="ss">module</span><span class="p">,</span><span class="w"> </span><span class="n">ServerModule</span><span class="p" data-group-id="4354365975-15">}</span><span class="p">-&gt;</span><span class="w">
                    </span><span class="p" data-group-id="4354365975-16">{</span><span class="ss">ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4354365975-17">{</span><span class="ss">config</span><span class="p">,</span><span class="w"> </span><span class="n">ServerName</span><span class="p" data-group-id="4354365975-17">}</span><span class="p" data-group-id="4354365975-16">}</span><span class="p">;</span><span class="w">
                </span><span class="p" data-group-id="4354365975-18">{</span><span class="ss">error</span><span class="p">,</span><span class="w"> </span><span class="ss">nofile</span><span class="p" data-group-id="4354365975-18">}</span><span class="p">-&gt;</span><span class="w">
                    </span><span class="p" data-group-id="4354365975-19">{</span><span class="ss">error</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4354365975-20">{</span><span class="ss">wrong_config</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;File not found: &quot;</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="n">ServerName</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="s">&quot;.beam&quot;</span><span class="p" data-group-id="4354365975-20">}</span><span class="p" data-group-id="4354365975-19">}</span><span class="w">
            </span><span class="k">end</span><span class="w">
    </span><span class="k">end</span><span class="p">.</span></code></pre><p>The configuration string for this driver can be <code class="inline">config_server</code>, if the
<code class="inline">config_server.erl</code> module that follows is compiled and exists in the code path
during test execution:</p><pre><code class="makeup erlang" translate="no"><span class="p">-</span><span class="na">module</span><span class="p" data-group-id="0169448388-1">(</span><span class="ss">config_server</span><span class="p" data-group-id="0169448388-1">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">export</span><span class="p" data-group-id="0169448388-2">(</span><span class="p" data-group-id="0169448388-3">[</span><span class="ss">start</span><span class="p">/</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">stop</span><span class="p">/</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">init</span><span class="p">/</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">get_config</span><span class="p">/</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">loop</span><span class="p">/</span><span class="mi">0</span><span class="p" data-group-id="0169448388-3">]</span><span class="p" data-group-id="0169448388-2">)</span><span class="p">.</span><span class="w">
</span><span class="w">
</span><span class="p">-</span><span class="na">define</span><span class="p" data-group-id="0169448388-4">(</span><span class="n">REGISTERED_NAME</span><span class="p">,</span><span class="w"> </span><span class="ss">ct_test_config_server</span><span class="p" data-group-id="0169448388-4">)</span><span class="p">.</span><span class="w">

</span><span class="nf">start</span><span class="p" data-group-id="0169448388-5">(</span><span class="p" data-group-id="0169448388-5">)</span><span class="p">-&gt;</span><span class="w">
    </span><span class="k">case</span><span class="w"> </span><span class="nf">whereis</span><span class="p" data-group-id="0169448388-6">(</span><span class="o">?</span><span class="n">REGISTERED_NAME</span><span class="p" data-group-id="0169448388-6">)</span><span class="w"> </span><span class="k">of</span><span class="w">
        </span><span class="ss">undefined</span><span class="p">-&gt;</span><span class="w">
            </span><span class="nf">spawn</span><span class="p" data-group-id="0169448388-7">(</span><span class="o">?</span><span class="n">MODULE</span><span class="p">,</span><span class="w"> </span><span class="ss">init</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0169448388-8">[</span><span class="o">?</span><span class="n">REGISTERED_NAME</span><span class="p" data-group-id="0169448388-8">]</span><span class="p" data-group-id="0169448388-7">)</span><span class="p">,</span><span class="w">
            </span><span class="nf">wait</span><span class="p" data-group-id="0169448388-9">(</span><span class="p" data-group-id="0169448388-9">)</span><span class="p">;</span><span class="w">
        </span><span class="p">_</span><span class="n">Pid</span><span class="p">-&gt;</span><span class="w">
        </span><span class="ss">ok</span><span class="w">
    </span><span class="k">end</span><span class="p">,</span><span class="w">
    </span><span class="o">?</span><span class="n">REGISTERED_NAME</span><span class="p">.</span><span class="w">

</span><span class="nf">init</span><span class="p" data-group-id="0169448388-10">(</span><span class="n">Name</span><span class="p" data-group-id="0169448388-10">)</span><span class="p">-&gt;</span><span class="w">
    </span><span class="nf">register</span><span class="p" data-group-id="0169448388-11">(</span><span class="n">Name</span><span class="p">,</span><span class="w"> </span><span class="nf">self</span><span class="p" data-group-id="0169448388-12">(</span><span class="p" data-group-id="0169448388-12">)</span><span class="p" data-group-id="0169448388-11">)</span><span class="p">,</span><span class="w">
    </span><span class="nf">loop</span><span class="p" data-group-id="0169448388-13">(</span><span class="p" data-group-id="0169448388-13">)</span><span class="p">.</span><span class="w">

</span><span class="nf">get_config</span><span class="p" data-group-id="0169448388-14">(</span><span class="p" data-group-id="0169448388-14">)</span><span class="p">-&gt;</span><span class="w">
    </span><span class="nf">call</span><span class="p" data-group-id="0169448388-15">(</span><span class="nf">self</span><span class="p" data-group-id="0169448388-16">(</span><span class="p" data-group-id="0169448388-16">)</span><span class="p">,</span><span class="w"> </span><span class="ss">get_config</span><span class="p" data-group-id="0169448388-15">)</span><span class="p">.</span><span class="w">

</span><span class="nf">stop</span><span class="p" data-group-id="0169448388-17">(</span><span class="p" data-group-id="0169448388-17">)</span><span class="p">-&gt;</span><span class="w">
    </span><span class="nf">call</span><span class="p" data-group-id="0169448388-18">(</span><span class="nf">self</span><span class="p" data-group-id="0169448388-19">(</span><span class="p" data-group-id="0169448388-19">)</span><span class="p">,</span><span class="w"> </span><span class="ss">stop</span><span class="p" data-group-id="0169448388-18">)</span><span class="p">.</span><span class="w">

</span><span class="nf">call</span><span class="p" data-group-id="0169448388-20">(</span><span class="n">Client</span><span class="p">,</span><span class="w"> </span><span class="n">Request</span><span class="p" data-group-id="0169448388-20">)</span><span class="p">-&gt;</span><span class="w">
    </span><span class="k">case</span><span class="w"> </span><span class="nf">whereis</span><span class="p" data-group-id="0169448388-21">(</span><span class="o">?</span><span class="n">REGISTERED_NAME</span><span class="p" data-group-id="0169448388-21">)</span><span class="w"> </span><span class="k">of</span><span class="w">
        </span><span class="ss">undefined</span><span class="p">-&gt;</span><span class="w">
            </span><span class="p" data-group-id="0169448388-22">{</span><span class="ss">error</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0169448388-23">{</span><span class="ss">not_started</span><span class="p">,</span><span class="w"> </span><span class="n">Request</span><span class="p" data-group-id="0169448388-23">}</span><span class="p" data-group-id="0169448388-22">}</span><span class="p">;</span><span class="w">
        </span><span class="n">Pid</span><span class="p">-&gt;</span><span class="w">
            </span><span class="n">Pid</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="p" data-group-id="0169448388-24">{</span><span class="n">Client</span><span class="p">,</span><span class="w"> </span><span class="n">Request</span><span class="p" data-group-id="0169448388-24">}</span><span class="p">,</span><span class="w">
            </span><span class="k">receive</span><span class="w">
                </span><span class="n">Reply</span><span class="p">-&gt;</span><span class="w">
                    </span><span class="p" data-group-id="0169448388-25">{</span><span class="ss">ok</span><span class="p">,</span><span class="w"> </span><span class="n">Reply</span><span class="p" data-group-id="0169448388-25">}</span><span class="w">
            </span><span class="k">after</span><span class="w"> </span><span class="mi">4000</span><span class="p">-&gt;</span><span class="w">
                </span><span class="p" data-group-id="0169448388-26">{</span><span class="ss">error</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0169448388-27">{</span><span class="ss">timeout</span><span class="p">,</span><span class="w"> </span><span class="n">Request</span><span class="p" data-group-id="0169448388-27">}</span><span class="p" data-group-id="0169448388-26">}</span><span class="w">
            </span><span class="k">end</span><span class="w">
    </span><span class="k">end</span><span class="p">.</span><span class="w">

</span><span class="nf">loop</span><span class="p" data-group-id="0169448388-28">(</span><span class="p" data-group-id="0169448388-28">)</span><span class="p">-&gt;</span><span class="w">
    </span><span class="k">receive</span><span class="w">
        </span><span class="p" data-group-id="0169448388-29">{</span><span class="n">Pid</span><span class="p">,</span><span class="w"> </span><span class="ss">stop</span><span class="p" data-group-id="0169448388-29">}</span><span class="p">-&gt;</span><span class="w">
            </span><span class="n">Pid</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="ss">ok</span><span class="p">;</span><span class="w">
        </span><span class="p" data-group-id="0169448388-30">{</span><span class="n">Pid</span><span class="p">,</span><span class="w"> </span><span class="ss">get_config</span><span class="p" data-group-id="0169448388-30">}</span><span class="p">-&gt;</span><span class="w">
            </span><span class="p" data-group-id="0169448388-31">{</span><span class="n">D</span><span class="p">,</span><span class="n">T</span><span class="p" data-group-id="0169448388-31">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">erlang</span><span class="p">:</span><span class="nf">localtime</span><span class="p" data-group-id="0169448388-32">(</span><span class="p" data-group-id="0169448388-32">)</span><span class="p">,</span><span class="w">
            </span><span class="n">Pid</span><span class="w"> </span><span class="o">!</span><span class="w">
                </span><span class="p" data-group-id="0169448388-33">[</span><span class="p" data-group-id="0169448388-34">{</span><span class="ss">localtime</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0169448388-35">[</span><span class="p" data-group-id="0169448388-36">{</span><span class="ss">date</span><span class="p">,</span><span class="w"> </span><span class="n">D</span><span class="p" data-group-id="0169448388-36">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0169448388-37">{</span><span class="ss">time</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="p" data-group-id="0169448388-37">}</span><span class="p" data-group-id="0169448388-35">]</span><span class="p" data-group-id="0169448388-34">}</span><span class="p">,</span><span class="w">
                 </span><span class="p" data-group-id="0169448388-38">{</span><span class="nb">node</span><span class="p">,</span><span class="w"> </span><span class="nc">erlang</span><span class="p">:</span><span class="nf">node</span><span class="p" data-group-id="0169448388-39">(</span><span class="p" data-group-id="0169448388-39">)</span><span class="p" data-group-id="0169448388-38">}</span><span class="p">,</span><span class="w">
                 </span><span class="p" data-group-id="0169448388-40">{</span><span class="ss">now</span><span class="p">,</span><span class="w"> </span><span class="nc">erlang</span><span class="p">:</span><span class="nf">now</span><span class="p" data-group-id="0169448388-41">(</span><span class="p" data-group-id="0169448388-41">)</span><span class="p" data-group-id="0169448388-40">}</span><span class="p">,</span><span class="w">
                 </span><span class="p" data-group-id="0169448388-42">{</span><span class="ss">config_server_pid</span><span class="p">,</span><span class="w"> </span><span class="nf">self</span><span class="p" data-group-id="0169448388-43">(</span><span class="p" data-group-id="0169448388-43">)</span><span class="p" data-group-id="0169448388-42">}</span><span class="p">,</span><span class="w">
                 </span><span class="p" data-group-id="0169448388-44">{</span><span class="ss">config_server_vsn</span><span class="p">,</span><span class="w"> </span><span class="o">?</span><span class="ss">vsn</span><span class="p" data-group-id="0169448388-44">}</span><span class="p" data-group-id="0169448388-33">]</span><span class="p">,</span><span class="w">
            </span><span class="o">?</span><span class="n">MODULE</span><span class="p">:</span><span class="nf">loop</span><span class="p" data-group-id="0169448388-45">(</span><span class="p" data-group-id="0169448388-45">)</span><span class="w">
    </span><span class="k">end</span><span class="p">.</span><span class="w">

</span><span class="nf">wait</span><span class="p" data-group-id="0169448388-46">(</span><span class="p" data-group-id="0169448388-46">)</span><span class="p">-&gt;</span><span class="w">
    </span><span class="k">case</span><span class="w"> </span><span class="nf">whereis</span><span class="p" data-group-id="0169448388-47">(</span><span class="o">?</span><span class="n">REGISTERED_NAME</span><span class="p" data-group-id="0169448388-47">)</span><span class="w"> </span><span class="k">of</span><span class="w">
        </span><span class="ss">undefined</span><span class="p">-&gt;</span><span class="w">
            </span><span class="nf">wait</span><span class="p" data-group-id="0169448388-48">(</span><span class="p" data-group-id="0169448388-48">)</span><span class="p">;</span><span class="w">
        </span><span class="p">_</span><span class="n">Pid</span><span class="p">-&gt;</span><span class="w">
            </span><span class="ss">ok</span><span class="w">
    </span><span class="k">end</span><span class="p">.</span></code></pre><p>Here, the handler also provides for dynamically reloading of configuration
variables. If <a href="ct.html#reload_config/1"><code class="inline">ct:reload_config(localtime)</code></a> is called
from the test case function, all variables loaded with
<code class="inline">config_driver:read_config/1</code> are updated with their latest values, and the new
value for variable <code class="inline">localtime</code> is returned.</p>

</div>

<div class="bottom-actions" id="bottom-actions">
  <div class="bottom-actions-item">

      <a href="run_test_chapter.html" class="bottom-actions-button" rel="prev">
        <span class="subheader">
          ← Previous Page
        </span>
        <span class="title">
Running Tests and Analyzing Results
        </span>
      </a>

  </div>
  <div class="bottom-actions-item">

      <a href="cover_chapter.html" class="bottom-actions-button" rel="next">
        <span class="subheader">
          Next Page →
        </span>
        <span class="title">
Code Coverage Analysis
        </span>
      </a>

  </div>
</div>
    <footer class="footer">
      <p>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="common_test.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.38.1) for the

          <a href="https://erlang.org" title="Erlang" target="_blank" translate="no">Erlang programming language</a>

      </p>
<p>Copyright © 1996-2025 <a href="https://www.ericsson.com">Ericsson AB</a></p>
    </footer>
  </div>
</main>
</div>
  <script defer src="https://cdn.jsdelivr.net/npm/mermaid@11.4.1/dist/mermaid.min.js"></script>
  <script>
  let initialized = false;

  window.addEventListener("exdoc:loaded", () => {
      if (!initialized) {
      mermaid.initialize({
          startOnLoad: false,
          theme: document.body.className.includes("dark") ? "dark" : "default"
      });
      initialized = true;
      }

      let id = 0;
      for (const codeEl of document.querySelectorAll("pre code.mermaid")) {
      const preEl = codeEl.parentElement;
      const graphDefinition = codeEl.textContent;
      const graphEl = document.createElement("div");
      const graphId = "mermaid-graph-" + id++;
      mermaid.render(graphId, graphDefinition).then(({svg, bindFunctions}) => {
          graphEl.innerHTML = svg;
          bindFunctions?.(graphEl);
          preEl.insertAdjacentElement("afterend", graphEl);
          preEl.remove();
      });
      }
  });
  </script>

  </body>
</html>
