<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.38.1">
    <meta name="project" content="ssh v5.3.1">


<meta name="exdoc:full-text-search-url" content="/doc/search.html?v=28&q=">
<meta name="major-vsn" content="28">
<link rel="canonical" href="https://www.erlang.org/doc/apps/ssh/ssh_file.html" />
    <title>ssh_file â€” ssh v5.3.1</title>

    <link rel="stylesheet" href="dist/html-erlang-ZK43ZOAC.css" />

    <script defer src="dist/sidebar_items-02FA5E5B.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-DPJLHKSM.js"></script>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="../../index.html" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="ssh" />
        </a>

      <div>
        <a href="../../index.html" class="sidebar-projectName" translate="no">
ssh
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v5.3.1
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras=""></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-module" id="main" data-type="modules">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of ssh</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search" tabindex="-1">
            <i class="ri-search-2-line ri-lg" aria-hidden="true"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>
      <span translate="no">ssh_file</span> 
      <small class="app-vsn" translate="no">(ssh v5.3.1)</small>

    </h1>

      <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/ssh/src/ssh_file.erl#L27" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

  </div>


    <section id="moduledoc">
<p>Default callback module for the client's and server's database operations in the
ssh application</p><p>This module is the default callback handler for the client's and the server's
user and host &quot;database&quot; operations. All data, for instance key pairs, are
stored in files in the normal file system. This page documents the files, where
they are stored and configuration options for this callback module.</p><p>The intention is to be compatible with the <a href="http://www.openssh.com">OpenSSH</a>
storage in files. Therefore it mimics directories and filenames of
<a href="http://www.openssh.com">OpenSSH</a>.</p><p>Ssh_file implements the <a href="ssh_server_key_api.html"><code class="inline">ssh_server_key_api</code></a> and the <a href="ssh_client_key_api.html"><code class="inline">ssh_client_key_api</code></a>.
This enables the user to make an own interface using for example a database
handler.</p><p>Such another callback module could be used by setting the option
<a href="ssh.html#t:key_cb_common_option/0"><code class="inline">key_cb</code></a> when starting a client or a server
(with for example <a href="ssh.html#connect/3">ssh:connect</a>, <a href="ssh.html#daemon/2">ssh:daemon</a>
of <a href="ssh.html#shell/1">ssh:shell</a> ).</p><section role="note" class="admonition info"><h4 class="admonition-title info">Note</h4><p>The functions are <em>Callbacks</em> for the SSH app. They are not intended to be
called from the user's code!</p></section><h2 id="module-files-directories-and-who-uses-them" class="section-heading"><a href="#module-files-directories-and-who-uses-them" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Files, directories and who uses them</span></h2><h3 id="module-daemons" class="section-heading"><a href="#module-daemons" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Daemons</span></h3><p>Daemons uses all files stored in the <a href="ssh_file.html#SYSDIR">SYSDIR</a> directory.</p><p>Optionally, in case of <code class="inline">publickey</code> authorization, one or more of the remote
user's public keys in the <a href="ssh_file.html#USERDIR">USERDIR</a> directory are used.
See the files <a href="ssh_file.html#FILE-authorized_keys"><code class="inline">USERDIR/authorized_keys</code></a> and
<a href="ssh_file.html#FILE-authorized_keys2"><code class="inline">USERDIR/authorized_keys2</code></a>.</p><h3 id="module-clients" class="section-heading"><a href="#module-clients" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Clients</span></h3><p>Clients uses all files stored in the <a href="ssh_file.html#USERDIR">USERDIR</a> directory.</p><h3 id="module-directory-contents" class="section-heading"><a href="#module-directory-contents" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Directory contents</span></h3><ul><li><p><strong><a href="" id="LOCALUSER"></a> LOCALUSER</strong><br/>The user name of the OS process running the Erlang virtual machine (emulator).</p></li><li><p><strong><a href="" id="SYSDIR"></a> SYSDIR</strong><br/>This is the directory holding the server's files:</p><ul><li><a href="" id="FILE-ssh_host_STAR_key"></a> <code class="inline" id="FILE-ssh_host_dsa_key">ssh_host_dsa_key</code> - private dss host key (optional)</li><li><code class="inline" id="FILE-ssh_host_rsa_key">ssh_host_rsa_key</code> - private rsa host key
(optional)</li><li><code class="inline" id="FILE-ssh_host_ecdsa_key">ssh_host_ecdsa_key</code> - private ecdsa host key
(optional)</li><li><code class="inline" id="FILE-ssh_host_ed25519_key">ssh_host_ed25519_key</code> - private eddsa host
key for curve 25519 (optional)</li><li><code class="inline" id="FILE-ssh_host_ed448_key">ssh_host_ed448_key</code> - private eddsa host key
for curve 448 (optional)</li></ul><p>The key files could be generated with OpenSSH's ssh-keygen command.</p><p>At least one host key must be defined. The default value of SYSDIR is
<code class="inline" id="#/etc/ssh">/etc/ssh</code>.</p><p>For security reasons, this directory is normally accessible only to the root
user.</p><p>To change the SYSDIR, see the <a href="#t:system_dir_daemon_option/0">system_dir</a>
option.</p></li><li><p><strong><a href="" id="USERDIR"></a> USERDIR</strong><br/>This is the directory holding the files:</p><ul><li><p><code class="inline" id="FILE-authorized_keys">authorized_keys</code> and, as second alternative
<code class="inline" id="FILE-authorized_keys2">authorized_keys2</code> - the user's public keys are
stored concatenated in one of those files.</p><p>It is composed of lines as for
<a href="https://man.openbsd.org/sshd#AUTHORIZED_KEYS_FILE_FORMAT">OpenSSH</a>:</p><pre><code class="text">(options)? keytype base64-encoded-key comment</code></pre><p>where</p><pre><code class="text">options :: option(,option)*
option :: % All options are skipped
keytype :: 'ssh-dsa'
         | 'ssh-rsa'
         | 'ssh-ecdsa-nistp256'
     | 'ssh-ecdsa-nistp384'
         | 'ssh-ecdsa-nistp521'
         | 'ssh-ed25519'
     | 'ssh-ed448'
base64-encoded-key :: % The user's public key
comment :: % Comments are skipped</code></pre></li><li><p><code class="inline" id="FILE-known_hosts">known_hosts</code> - host keys from hosts visited
concatenated. The file is created and used by the client.</p><p>It is composed of lines as for
<a href="https://man.openbsd.org/sshd#SSH_KNOWN_HOSTS_FILE_FORMAT">OpenSSH</a>:</p><pre><code class="text">(option)? pattern(,pattern)* keytype key (comment)?</code></pre><p>where</p><pre><code class="text">option :: '@revoked'
pattern :: host | '[' host ']:' port
host :: ip-address | hostname | '*'
port :: portnumber | '*'
keytype :: 'ssh-dsa'
         | 'ssh-rsa'
         | 'ssh-ecdsa-nistp256'
     | 'ssh-ecdsa-nistp384'
         | 'ssh-ecdsa-nistp521'
         | 'ssh-ed25519'
     | 'ssh-ed448'
key :: % encoded key from eg ssh_host_*.pub</code></pre></li><li><p><a href="" id="FILE-id_STAR"></a> <code class="inline" id="FILE-id_dsa">id_dsa</code> - private dss user key
(optional)</p></li><li><p><code class="inline" id="FILE-id_rsa">id_rsa</code> - private rsa user key (optional)</p></li><li><p><code class="inline" id="FILE-id_ecdsa">id_ecdsa</code> - private ecdsa user key (optional)</p></li><li><p><code class="inline" id="FILE-id_ed25519">id_ed25519</code> - private eddsa user key for curve 25519
(optional)</p></li><li><p><code class="inline" id="FILE-id_ed448">id_ed448</code> - private eddsa user key for curve 448
(optional)</p></li></ul><p>The key files could be generated with OpenSSH's ssh-keygen command.</p><p>The default value of USERDIR is
<code class="inline">/home/</code><a href="ssh_file.html#LOCALUSER"><code class="inline">LOCALUSER</code></a><code class="inline">/.ssh</code>.</p><p>To change the USERDIR, see the <a href="#t:user_dir_common_option/0">user_dir</a> option</p></li></ul>
    </section>

</div>

  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Summary</span>
    </h1>
<div class="summary-types-options summary">
  <h2>
    <a href="#types-options">Types: Options</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:experimental_openssh_key_v1/0" data-no-tooltip="" translate="no">experimental_openssh_key_v1()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:key/0" data-no-tooltip="" translate="no">key()</a>

      </div>

        <div class="summary-synopsis"><p>The key representation</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:openssh_key_v1_attributes/0" data-no-tooltip="" translate="no">openssh_key_v1_attributes()</a>

      </div>

        <div class="summary-synopsis"><p>Types for the experimental implementaition of the <code class="inline">openssh_key_v1</code> format.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:optimize_key_lookup/0" data-no-tooltip="" translate="no">optimize_key_lookup()</a>

      </div>

        <div class="summary-synopsis"><p>Make the handling of large files fast by setting <code class="inline">time</code>, but this will use more
memory. The <code class="inline">space</code> variant shrinks the memory requirements, but with a higher
time consumption.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:pubkey_passphrase_client_options/0" data-no-tooltip="" translate="no">pubkey_passphrase_client_options()</a>

      </div>

        <div class="summary-synopsis"><p>If the user's DSA, RSA or ECDSA key is protected by a passphrase, it can be
supplied with thoose options.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:system_dir_daemon_option/0" data-no-tooltip="" translate="no">system_dir_daemon_option()</a>

      </div>

        <div class="summary-synopsis"><p>Sets the <a>system directory</a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:user2dir/0" data-no-tooltip="" translate="no">user2dir()</a>

      </div>

        <div class="summary-synopsis"><p>Sets the <a>user directory</a> dynamically by evaluating the
<code class="inline">user2dir</code> function.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:user_dir_common_option/0" data-no-tooltip="" translate="no">user_dir_common_option()</a>

      </div>

        <div class="summary-synopsis"><p>Sets the <a>user directory</a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:user_dir_fun_common_option/0" data-no-tooltip="" translate="no">user_dir_fun_common_option()</a>

      </div>

    </div>

</div>
<div class="summary-functions summary">
  <h2>
    <a href="#functions">Functions</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#add_host_key/4" data-no-tooltip="" translate="no">add_host_key(Host, Port, Key, Options)</a>

      </div>

        <div class="summary-synopsis"><p><strong>Types and description</strong></p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#decode/2" data-no-tooltip="" translate="no">decode(SshBin, Type)</a>

      </div>

        <div class="summary-synopsis"><p>Decodes an SSH file-binary.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#encode/2" data-no-tooltip="" translate="no">encode(InData, Type)</a>

      </div>

        <div class="summary-synopsis"><p>Encodes a list of SSH file entries (public keys and attributes) to a binary.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#extract_public_key/1" data-no-tooltip="" translate="no">extract_public_key(PrivKey)</a>

      </div>

        <div class="summary-synopsis"><p>Fetches the public key from a private key.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#host_key/2" data-no-tooltip="" translate="no">host_key(Algorithm, Options)</a>

      </div>

        <div class="summary-synopsis"><p><strong>Types and description</strong></p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#is_auth_key/3" data-no-tooltip="" translate="no">is_auth_key(Key, User, Options)</a>

      </div>

        <div class="summary-synopsis"><p><strong>Types and description</strong></p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#is_host_key/5" data-no-tooltip="" translate="no">is_host_key(Key, Host, Port, Algorithm, Options)</a>

      </div>

        <div class="summary-synopsis"><p><strong>Types and description</strong></p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#user_key/2" data-no-tooltip="" translate="no">user_key(Algorithm, Options)</a>

      </div>

        <div class="summary-synopsis"><p><strong>Types and description</strong></p></div>

    </div>

</div>

  </section>


  <section id="types-options" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#types-options">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Types: Options</span>
    </h1>
    <div class="types-options-list">
<section class="detail" id="t:experimental_openssh_key_v1/0">

  <div class="detail-header">
    <a href="#t:experimental_openssh_key_v1/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">experimental_openssh_key_v1()</h1>

        <span class="note">(since OTP 21.2)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/ssh/src/ssh_file.erl#L248" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> experimental_openssh_key_v1() :: [{<a href="#t:key/0">key</a>(), <a href="#t:openssh_key_v1_attributes/0">openssh_key_v1_attributes</a>()}].</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:key/0">

  <div class="detail-header">
    <a href="#t:key/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">key()</h1>

        <span class="note">(since OTP 21.2)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/ssh/src/ssh_file.erl#L246" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> key() :: <a href="../../apps/public_key/public_key.html#t:public_key/0">public_key:public_key</a>() | <a href="../../apps/public_key/public_key.html#t:private_key/0">public_key:private_key</a>().</pre>

      </div>

<p>The key representation</p>
  </section>
</section>
<section class="detail" id="t:openssh_key_v1_attributes/0">

  <div class="detail-header">
    <a href="#t:openssh_key_v1_attributes/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">openssh_key_v1_attributes()</h1>

        <span class="note">(since OTP 21.2)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/ssh/src/ssh_file.erl#L251" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> openssh_key_v1_attributes() :: [{<a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(), <a href="../../apps/erts/erlang.html#t:term/0">term</a>()}].</pre>

      </div>

<p>Types for the experimental implementaition of the <code class="inline">openssh_key_v1</code> format.</p>
  </section>
</section>
<section class="detail" id="t:optimize_key_lookup/0">

  <div class="detail-header">
    <a href="#t:optimize_key_lookup/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">optimize_key_lookup()</h1>

        <span class="note">(since OTP 21.2)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/ssh/src/ssh_file.erl#L242" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> optimize_key_lookup() :: {optimize, time | space}.</pre>

      </div>

<p>Make the handling of large files fast by setting <code class="inline">time</code>, but this will use more
memory. The <code class="inline">space</code> variant shrinks the memory requirements, but with a higher
time consumption.</p><p>To set it, set the option <code class="inline">{key_cb, {ssh_file, [{optimize,TimeOrSpace}]}</code> in the
call of <a href="ssh.html#connect/3">&quot;ssh:connect/3</a>, <a href="ssh.html#daemon/2"><code class="inline">ssh:daemon/2</code></a> or similar function
call that initiates an ssh connection.</p>
  </section>
</section>
<section class="detail" id="t:pubkey_passphrase_client_options/0">

  <div class="detail-header">
    <a href="#t:pubkey_passphrase_client_options/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">pubkey_passphrase_client_options()</h1>

        <span class="note">(since OTP 21.2)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/ssh/src/ssh_file.erl#L203" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> pubkey_passphrase_client_options() ::
          {dsa_pass_phrase, <a href="../../apps/erts/erlang.html#t:string/0">string</a>()} | {rsa_pass_phrase, <a href="../../apps/erts/erlang.html#t:string/0">string</a>()} | {ecdsa_pass_phrase, <a href="../../apps/erts/erlang.html#t:string/0">string</a>()}.</pre>

      </div>

<p>If the user's DSA, RSA or ECDSA key is protected by a passphrase, it can be
supplied with thoose options.</p><p>Note that EdDSA passhrases (Curves 25519 and 448) are not implemented.</p>
  </section>
</section>
<section class="detail" id="t:system_dir_daemon_option/0">

  <div class="detail-header">
    <a href="#t:system_dir_daemon_option/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">system_dir_daemon_option()</h1>

        <span class="note">(since OTP 21.2)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/ssh/src/ssh_file.erl#L190" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> system_dir_daemon_option() :: {system_dir, <a href="../../apps/erts/erlang.html#t:string/0">string</a>()}.</pre>

      </div>

<p>Sets the <a href="ssh_file.html#SYSDIR">system directory</a>.</p>
  </section>
</section>
<section class="detail" id="t:user2dir/0">

  <div class="detail-header">
    <a href="#t:user2dir/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">user2dir()</h1>

        <span class="note">(since OTP 21.2)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/ssh/src/ssh_file.erl#L230" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> user2dir() :: fun((RemoteUserName :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>()) -> UserDir :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>()).</pre>

      </div>

<p>Sets the <a href="ssh_file.html#USERDIR">user directory</a> dynamically by evaluating the
<code class="inline">user2dir</code> function.</p>
  </section>
</section>
<section class="detail" id="t:user_dir_common_option/0">

  <div class="detail-header">
    <a href="#t:user_dir_common_option/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">user_dir_common_option()</h1>

        <span class="note">(since OTP 21.2)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/ssh/src/ssh_file.erl#L222" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> user_dir_common_option() :: {user_dir, <a href="../../apps/erts/erlang.html#t:string/0">string</a>()}.</pre>

      </div>

<p>Sets the <a href="ssh_file.html#USERDIR">user directory</a>.</p>
  </section>
</section>
<section class="detail" id="t:user_dir_fun_common_option/0">

  <div class="detail-header">
    <a href="#t:user_dir_fun_common_option/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">user_dir_fun_common_option()</h1>

        <span class="note">(since OTP 21.2)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/ssh/src/ssh_file.erl#L224" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> user_dir_fun_common_option() :: {user_dir_fun, <a href="#t:user2dir/0">user2dir</a>()}.</pre>

      </div>


  </section>
</section>

    </div>
  </section>

  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Functions</span>
    </h1>
    <div class="functions-list">
<section class="detail" id="add_host_key/4">

  <div class="detail-header">
    <a href="#add_host_key/4" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">add_host_key(Host, Port, Key, Options)</h1>

        <span class="note">(since OTP 23.0)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/ssh/src/ssh_file.erl#L426" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> add_host_key(Host, Port, Key, Options) -> Result
                      when
                          Host ::
                              <a href="../../apps/kernel/inet.html#t:ip_address/0">inet:ip_address</a>() |
                              <a href="../../apps/kernel/inet.html#t:hostname/0">inet:hostname</a>() |
                              [<a href="../../apps/kernel/inet.html#t:ip_address/0">inet:ip_address</a>() | <a href="../../apps/kernel/inet.html#t:hostname/0">inet:hostname</a>()],
                          Port :: <a href="../../apps/kernel/inet.html#t:port_number/0">inet:port_number</a>(),
                          Key :: <a href="../../apps/public_key/public_key.html#t:public_key/0">public_key:public_key</a>(),
                          Options :: <a href="ssh_client_key_api.html#t:client_key_cb_options/1">ssh_client_key_api:client_key_cb_options</a>(<a href="../../apps/erts/erlang.html#t:none/0">none</a>()),
                          Result :: ok | {error, <a href="../../apps/erts/erlang.html#t:term/0">term</a>()}.</pre>

      </div>

<p><strong>Types and description</strong></p><p>See the api description in
<a href="ssh_client_key_api.html#c:add_host_key/4">ssh_client_key_api, Module:add_host_key/4</a>.</p><p><a href="" id="add_host_key-3"></a></p><p>Note that the alternative, the old
<a href="ssh_client_key_api.html#c:add_host_key/3">Module:add_host_key/3</a> is no longer
supported by <code class="inline">ssh_file</code>.</p><p><strong>Option</strong></p><ul><li><a href="#t:user_dir_common_option/0">user_dir</a></li></ul><p><strong>File</strong></p><ul><li><a href="ssh_file.html#FILE-known_hosts"><code class="inline">USERDIR/known_hosts</code></a></li></ul>
  </section>
</section>
<section class="detail" id="decode/2">

  <div class="detail-header">
    <a href="#decode/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">decode(SshBin, Type)</h1>

        <span class="note">(since OTP 24.0)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/ssh/src/ssh_file.erl#L489" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> decode(SshBin, Type) -> Decoded | {error, <a href="../../apps/erts/erlang.html#t:term/0">term</a>()}
                when
                    SshBin :: <a href="../../apps/erts/erlang.html#t:binary/0">binary</a>(),
                    Type ::
                        ssh2_pubkey | public_key | openssh_key | rfc4716_key | openssh_key_v1 |
                        known_hosts | auth_keys,
                    Decoded ::
                        Decoded_ssh2_pubkey | Decoded_public | Decoded_openssh | Decoded_rfc4716 |
                        Decoded_openssh_key_v1 | Decoded_known_hosts | Decoded_auth_keys,
                    Decoded_ssh2_pubkey :: <a href="../../apps/public_key/public_key.html#t:public_key/0">public_key:public_key</a>(),
                    Decoded_public :: Decoded_rfc4716 | Decoded_openssh_key_v1 | Decoded_openssh,
                    Decoded_openssh :: [{<a href="../../apps/public_key/public_key.html#t:public_key/0">public_key:public_key</a>(), [{comment, <a href="../../apps/erts/erlang.html#t:string/0">string</a>()}]}],
                    Decoded_rfc4716 :: [{<a href="#t:key/0">key</a>(), [{headers, Attrs}]}],
                    Decoded_openssh_key_v1 :: <a href="#t:experimental_openssh_key_v1/0">experimental_openssh_key_v1</a>(),
                    Decoded_known_hosts ::
                        [{<a href="../../apps/public_key/public_key.html#t:public_key/0">public_key:public_key</a>(), [{comment, <a href="../../apps/erts/erlang.html#t:string/0">string</a>()} | {hostnames, [<a href="../../apps/erts/erlang.html#t:string/0">string</a>()]}]}],
                    Decoded_auth_keys ::
                        [{<a href="../../apps/public_key/public_key.html#t:public_key/0">public_key:public_key</a>(), [{comment, <a href="../../apps/erts/erlang.html#t:string/0">string</a>()} | {options, [<a href="../../apps/erts/erlang.html#t:string/0">string</a>()]}]}],
                    Attrs :: {Key :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(), Value :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>()}.</pre>

      </div>

<p>Decodes an SSH file-binary.</p><p>If <code class="inline">Type</code> is <code class="inline">public_key</code> the binary can be either an RFC4716 public key or an
OpenSSH public key.</p><section role="note" class="admonition info"><h4 class="admonition-title info">Note</h4><p>The implementation of the <code class="inline">openssh_key_v1</code> format is still experimental.</p></section>
  </section>
</section>
<section class="detail" id="encode/2">

  <div class="detail-header">
    <a href="#encode/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">encode(InData, Type)</h1>

        <span class="note">(since OTP 24.0)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/ssh/src/ssh_file.erl#L629" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> encode(InData, Type) -> <a href="../../apps/erts/erlang.html#t:binary/0">binary</a>() | {error, <a href="../../apps/erts/erlang.html#t:term/0">term</a>()}
                when
                    Type ::
                        ssh2_pubkey | openssh_key | rfc4716_key | openssh_key_v1 | known_hosts |
                        auth_keys,
                    InData ::
                        InData_ssh2_pubkey | InData_openssh | InData_rfc4716 | InData_openssh_key_v1 |
                        InData_known_hosts | InData_auth_keys,
                    InData_ssh2_pubkey :: <a href="../../apps/public_key/public_key.html#t:public_key/0">public_key:public_key</a>(),
                    InData_openssh :: [{<a href="../../apps/public_key/public_key.html#t:public_key/0">public_key:public_key</a>(), [{comment, <a href="../../apps/erts/erlang.html#t:string/0">string</a>()}]}],
                    InData_rfc4716 :: [{<a href="#t:key/0">key</a>(), [{headers, Attrs}]}],
                    InData_openssh_key_v1 :: <a href="#t:experimental_openssh_key_v1/0">experimental_openssh_key_v1</a>(),
                    InData_known_hosts ::
                        [{<a href="../../apps/public_key/public_key.html#t:public_key/0">public_key:public_key</a>(), [{comment, <a href="../../apps/erts/erlang.html#t:string/0">string</a>()} | {hostnames, [<a href="../../apps/erts/erlang.html#t:string/0">string</a>()]}]}],
                    InData_auth_keys ::
                        [{<a href="../../apps/public_key/public_key.html#t:public_key/0">public_key:public_key</a>(), [{comment, <a href="../../apps/erts/erlang.html#t:string/0">string</a>()} | {options, [<a href="../../apps/erts/erlang.html#t:string/0">string</a>()]}]}],
                    Attrs :: {Key :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(), Value :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>()}.</pre>

      </div>

<p>Encodes a list of SSH file entries (public keys and attributes) to a binary.</p><section role="note" class="admonition info"><h4 class="admonition-title info">Note</h4><p>The implementation of the <code class="inline">openssh_key_v1</code> format is still experimental.</p></section>
  </section>
</section>
<section class="detail" id="extract_public_key/1">

  <div class="detail-header">
    <a href="#extract_public_key/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">extract_public_key(PrivKey)</h1>

        <span class="note">(since OTP 25.0)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/ssh/src/ssh_file.erl#L699" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> extract_public_key(PrivKey) -> PubKey
                            when PrivKey :: <a href="../../apps/public_key/public_key.html#t:private_key/0">public_key:private_key</a>(), PubKey :: <a href="../../apps/public_key/public_key.html#t:public_key/0">public_key:public_key</a>().</pre>

      </div>

<p>Fetches the public key from a private key.</p>
  </section>
</section>
<section class="detail" id="host_key/2">

  <div class="detail-header">
    <a href="#host_key/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">host_key(Algorithm, Options)</h1>

        <span class="note">(since OTP 21.2)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/ssh/src/ssh_file.erl#L283" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> host_key(Algorithm, Options) -> Result
                  when
                      Algorithm :: <a href="ssh.html#t:pubkey_alg/0">ssh:pubkey_alg</a>(),
                      Result :: {ok, <a href="../../apps/public_key/public_key.html#t:private_key/0">public_key:private_key</a>()} | {error, <a href="../../apps/erts/erlang.html#t:term/0">term</a>()},
                      Options :: <a href="ssh_server_key_api.html#t:daemon_key_cb_options/1">ssh_server_key_api:daemon_key_cb_options</a>(<a href="../../apps/erts/erlang.html#t:none/0">none</a>()).</pre>

      </div>

<p><strong>Types and description</strong></p><p>See the api description in
<a href="ssh_server_key_api.html#c:host_key/2">ssh_server_key_api, Module:host_key/2</a>.</p><p><strong>Options</strong></p><ul><li><a href="#t:system_dir_daemon_option/0">system_dir</a></li></ul><p><strong>Files</strong></p><ul><li><a href="ssh_file.html#FILE-ssh_host_rsa_key"><code class="inline">SYSDIR/ssh_host_rsa_key</code></a></li><li><a href="ssh_file.html#FILE-ssh_host_dsa_key"><code class="inline">SYSDIR/ssh_host_dsa_key</code></a></li><li><a href="ssh_file.html#FILE-ssh_host_ecdsa_key"><code class="inline">SYSDIR/ssh_host_ecdsa_key</code></a></li><li><a href="ssh_file.html#FILE-ssh_host_ed25519_key"><code class="inline">SYSDIR/ssh_host_ed25519_key</code></a></li><li><a href="ssh_file.html#FILE-ssh_host_ed448_key"><code class="inline">SYSDIR/ssh_host_ed448_key</code></a></li></ul>
  </section>
</section>
<section class="detail" id="is_auth_key/3">

  <div class="detail-header">
    <a href="#is_auth_key/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">is_auth_key(Key, User, Options)</h1>

        <span class="note">(since OTP 21.2)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/ssh/src/ssh_file.erl#L312" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> is_auth_key(Key, User, Options) -> <a href="../../apps/erts/erlang.html#t:boolean/0">boolean</a>()
                     when
                         Key :: <a href="../../apps/public_key/public_key.html#t:public_key/0">public_key:public_key</a>(),
                         User :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(),
                         Options :: <a href="ssh_server_key_api.html#t:daemon_key_cb_options/1">ssh_server_key_api:daemon_key_cb_options</a>(<a href="#t:optimize_key_lookup/0">optimize_key_lookup</a>()).</pre>

      </div>

<p><strong>Types and description</strong></p><p>See the api description in
<a href="ssh_server_key_api.html#c:is_auth_key/3">ssh_server_key_api: Module:is_auth_key/3</a>.</p><p><strong>Options</strong></p><ul><li><a href="#t:user_dir_fun_common_option/0">user_dir_fun</a></li><li><a href="#t:user_dir_common_option/0">user_dir</a></li></ul><p><strong>Files</strong></p><ul><li><a href="ssh_file.html#FILE-authorized_keys"><code class="inline">USERDIR/authorized_keys</code></a></li><li><a href="ssh_file.html#FILE-authorized_keys2"><code class="inline">USERDIR/authorized_keys2</code></a></li></ul><p>This functions discards all options in the beginning of the lines of thoose
files when reading them.</p>
  </section>
</section>
<section class="detail" id="is_host_key/5">

  <div class="detail-header">
    <a href="#is_host_key/5" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">is_host_key(Key, Host, Port, Algorithm, Options)</h1>

        <span class="note">(since OTP 23.0)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/ssh/src/ssh_file.erl#L387" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> is_host_key(Key, Host, Port, Algorithm, Options) -> Result
                     when
                         Key :: <a href="../../apps/public_key/public_key.html#t:public_key/0">public_key:public_key</a>(),
                         Host ::
                             <a href="../../apps/kernel/inet.html#t:ip_address/0">inet:ip_address</a>() | <a href="../../apps/kernel/inet.html#t:hostname/0">inet:hostname</a>() | [<a href="../../apps/kernel/inet.html#t:ip_address/0">inet:ip_address</a>() | <a href="../../apps/kernel/inet.html#t:hostname/0">inet:hostname</a>()],
                         Port :: <a href="../../apps/kernel/inet.html#t:port_number/0">inet:port_number</a>(),
                         Algorithm :: <a href="ssh.html#t:pubkey_alg/0">ssh:pubkey_alg</a>(),
                         Options :: <a href="ssh_client_key_api.html#t:client_key_cb_options/1">ssh_client_key_api:client_key_cb_options</a>(<a href="#t:optimize_key_lookup/0">optimize_key_lookup</a>()),
                         Result :: <a href="../../apps/erts/erlang.html#t:boolean/0">boolean</a>() | {error, <a href="../../apps/erts/erlang.html#t:term/0">term</a>()}.</pre>

      </div>

<p><strong>Types and description</strong></p><p>See the api description in
<a href="ssh_client_key_api.html#c:is_host_key/5">ssh_client_key_api, Module:is_host_key/5</a>.</p><p><a href="" id="is_host_key-4"></a></p><p>Note that the alternative, the old
<a href="ssh_client_key_api.html#c:is_host_key/4">Module:is_host_key/4</a> is no longer
supported by <code class="inline">ssh_file</code>.</p><p><strong>Option</strong></p><ul><li><a href="#t:user_dir_common_option/0">user_dir</a></li></ul><p><strong>File</strong></p><ul><li><a href="ssh_file.html#FILE-known_hosts"><code class="inline">USERDIR/known_hosts</code></a></li></ul>
  </section>
</section>
<section class="detail" id="user_key/2">

  <div class="detail-header">
    <a href="#user_key/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">user_key(Algorithm, Options)</h1>

        <span class="note">(since OTP 21.2)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/lib/ssh/src/ssh_file.erl#L353" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> user_key(Algorithm, Options) -> Result
                  when
                      Algorithm :: <a href="ssh.html#t:pubkey_alg/0">ssh:pubkey_alg</a>(),
                      Result :: {ok, <a href="../../apps/public_key/public_key.html#t:private_key/0">public_key:private_key</a>()} | {error, <a href="../../apps/erts/erlang.html#t:string/0">string</a>()},
                      Options :: <a href="ssh_client_key_api.html#t:client_key_cb_options/1">ssh_client_key_api:client_key_cb_options</a>(<a href="../../apps/erts/erlang.html#t:none/0">none</a>()).</pre>

      </div>

<p><strong>Types and description</strong></p><p>See the api description in
<a href="ssh_client_key_api.html#c:user_key/2">ssh_client_key_api, Module:user_key/2</a>.</p><p><strong>Options</strong></p><ul><li><a href="#t:user_dir_common_option/0">user_dir</a></li><li><a href="#t:pubkey_passphrase_client_options/0">dsa_pass_phrase</a></li><li><a href="#t:pubkey_passphrase_client_options/0">rsa_pass_phrase</a></li><li><a href="#t:pubkey_passphrase_client_options/0">ecdsa_pass_phrase</a></li></ul><p>Note that EdDSA passhrases (Curves 25519 and 448) are not implemented.</p><p><strong>Files</strong></p><ul><li><a href="ssh_file.html#FILE-id_dsa"><code class="inline">USERDIR/id_dsa</code></a></li><li><a href="ssh_file.html#FILE-id_rsa"><code class="inline">USERDIR/id_rsa</code></a></li><li><a href="ssh_file.html#FILE-id_ecdsa"><code class="inline">USERDIR/id_ecdsa</code></a></li><li><a href="ssh_file.html#FILE-id_ed25519"><code class="inline">USERDIR/id_ed25519</code></a></li><li><a href="ssh_file.html#FILE-id_ed448"><code class="inline">USERDIR/id_ed448</code></a></li></ul>
  </section>
</section>

    </div>
  </section>

    <footer class="footer">
      <p>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="ssh.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.38.1) for the

          <a href="https://erlang.org" title="Erlang" target="_blank" translate="no">Erlang programming language</a>

      </p>
<p>Copyright Â© 1996-2025 <a href="https://www.ericsson.com">Ericsson AB</a></p>
    </footer>
  </div>
</main>
</div>
  <script defer src="https://cdn.jsdelivr.net/npm/mermaid@11.4.1/dist/mermaid.min.js"></script>
  <script>
  let initialized = false;

  window.addEventListener("exdoc:loaded", () => {
      if (!initialized) {
      mermaid.initialize({
          startOnLoad: false,
          theme: document.body.className.includes("dark") ? "dark" : "default"
      });
      initialized = true;
      }

      let id = 0;
      for (const codeEl of document.querySelectorAll("pre code.mermaid")) {
      const preEl = codeEl.parentElement;
      const graphDefinition = codeEl.textContent;
      const graphEl = document.createElement("div");
      const graphId = "mermaid-graph-" + id++;
      mermaid.render(graphId, graphDefinition).then(({svg, bindFunctions}) => {
          graphEl.innerHTML = svg;
          bindFunctions?.(graphEl);
          preEl.insertAdjacentElement("afterend", graphEl);
          preEl.remove();
      });
      }
  });
  </script>

  </body>
</html>
