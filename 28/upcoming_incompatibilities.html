<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.38.1">
    <meta name="project" content="Erlang/OTP v28.0.1">


<meta name="exdoc:full-text-search-url" content="/doc/search.html?v=28&q=">
<meta name="major-vsn" content="28">
<link rel="canonical" href="https://www.erlang.org/doc/upcoming_incompatibilities.html" />
<meta name="exdoc:autocomplete" content="off">
    <title>Upcoming Potential Incompatibilities — Erlang/OTP v28.0.1</title>

    <link rel="stylesheet" href="dist/html-erlang-ZK43ZOAC.css" />

    <script defer src="dist/sidebar_items-18D07CB1.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-DPJLHKSM.js"></script>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="./index.html" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="Erlang/OTP" />
        </a>

      <div>
        <a href="./index.html" class="sidebar-projectName" translate="no">
Erlang/OTP
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v28.0.1
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras=""></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-extra" id="main" data-type="extras">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of Erlang/OTP</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search" tabindex="-1">
            <i class="ri-search-2-line ri-lg" aria-hidden="true"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>Upcoming Potential Incompatibilities</h1>


      <a href="https://github.com/erlang/otp/blob/OTP-28.0.1/system/doc/top//buildroot/otp/system/doc/general_info/upcoming_incompatibilities.md#L1" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

  </div>


<h2 id="introduction" class="section-heading"><a href="#introduction" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Introduction</span></h2><p>This document lists planned upcoming potential incompatibilities in Erlang/OTP.</p><h2 id="otp-27" class="section-heading"><a href="#otp-27" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">OTP 27</span></h2><h3 id="fun-creator-pid-will-always-be-local-init-process" class="section-heading"><a href="#fun-creator-pid-will-always-be-local-init-process" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fun creator pid will always be local init process</span></h3><p>As of OTP 27, the functions <a href="apps/erts/erlang.html#fun_info/1"><code class="inline">erlang:fun_info/1,2</code></a> will
always say that the local <code class="inline">init</code> process created all funs, regardless of which
process or node the fun was originally created on.</p><p>In OTP 28, the <code class="inline">{pid,_}</code>element will be removed altogether.</p><p><a href="" id="maybe_expr"></a></p><h3 id="feature-maybe_expr-will-be-enabled-by-default" class="section-heading"><a href="#feature-maybe_expr-will-be-enabled-by-default" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Feature maybe_expr will be enabled by default</span></h3><p>As of OTP 27, the <code class="inline">maybe_expr</code> feature will be approved and enabled by default.
That means that code that uses the unquoted atom <code class="inline">maybe</code> will fail to compile.
All uses of <code class="inline">maybe</code> as an atom will need to be quoted. Alternatively, as a
short-term solution, the <code class="inline">maybe_expr</code> feature can be disabled.</p><p>It is recommend to quote all uses of the atom <code class="inline">maybe</code> as soon as possible. The
compiler option <code class="inline">warn_keywords</code> can be used to emit warnings about all
occurrences of <code class="inline">maybe</code> without quotes.</p><p><a href="" id="float_matching"></a></p><h3 id="0-0-and-0-0-will-no-longer-be-exactly-equal" class="section-heading"><a href="#0-0-and-0-0-will-no-longer-be-exactly-equal" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">0.0 and -0.0 will no longer be exactly equal</span></h3><p>Currently, the floating point numbers <code class="inline">0.0</code> and <code class="inline">-0.0</code> have distinct internal
representations. That can be seen if they are converted to binaries:</p><pre><code class="makeup erlang" translate="no"><span class="gp unselectable">1&gt; </span><span class="p" data-group-id="8241023528-1">&lt;&lt;</span><span class="mf">0.0</span><span class="o">/</span><span class="nb">float</span><span class="p" data-group-id="8241023528-1">&gt;&gt;</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="8241023528-2">&lt;&lt;</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p" data-group-id="8241023528-2">&gt;&gt;</span><span class="gp unselectable">
2&gt; </span><span class="p" data-group-id="8241023528-3">&lt;&lt;</span><span class="o">-</span><span class="mf">0.0</span><span class="o">/</span><span class="nb">float</span><span class="p" data-group-id="8241023528-3">&gt;&gt;</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="8241023528-4">&lt;&lt;</span><span class="mi">128</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p" data-group-id="8241023528-4">&gt;&gt;</span></code></pre><p>However, when they are matched against each other or compared using the <code class="inline">=:=</code>
operator, they are considered to be equal. Thus, <code class="inline">0.0 =:= -0.0</code> currently
returns <code class="inline">true</code>.</p><p>In Erlang/OTP 27, <code class="inline">0.0 =:= -0.0</code> will return <code class="inline">false</code>, and matching <code class="inline">0.0</code> against
<code class="inline">-0.0</code> will fail. When used as map keys, <code class="inline">0.0</code> and <code class="inline">-0.0</code> will be considered to
be distinct.</p><p>The <code class="inline">==</code> operator will continue to return <code class="inline">true</code> for <code class="inline">0.0 == -0.0</code>.</p><p>To help to find code that might need to be revised, in OTP 27 there will be a
new compiler warning when matching against <code class="inline">0.0</code> or comparing to that value
using the <code class="inline">=:=</code> operator. The warning can be suppressed by matching against
<code class="inline">+0.0</code> instead of <code class="inline">0.0</code>.</p><p>We plan to introduce the same warning in OTP 26.1, but by default it will be
disabled.</p><p><a href="" id="singleton_typevars"></a></p><h3 id="singleton-type-variables-will-become-a-compile-time-error" class="section-heading"><a href="#singleton-type-variables-will-become-a-compile-time-error" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Singleton type variables will become a compile-time error</span></h3><p>Before Erlang/OTP 26, the compiler would silenty accept the following spec:</p><pre><code class="makeup erlang" translate="no"><span class="p">-</span><span class="na">spec</span><span class="w"> </span><span class="nf">f</span><span class="p" data-group-id="6688009810-1">(</span><span class="n">Opts</span><span class="p" data-group-id="6688009810-1">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nf">term</span><span class="p" data-group-id="6688009810-2">(</span><span class="p" data-group-id="6688009810-2">)</span><span class="w"> </span><span class="k">when</span><span class="w">
    </span><span class="n">Opts</span><span class="w"> </span><span class="p">:</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6688009810-3">{</span><span class="ss">ok</span><span class="p">,</span><span class="w"> </span><span class="n">Unknown</span><span class="p" data-group-id="6688009810-3">}</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="p" data-group-id="6688009810-4">{</span><span class="ss">error</span><span class="p">,</span><span class="w"> </span><span class="n">Unknown</span><span class="p" data-group-id="6688009810-4">}</span><span class="p">.</span><span class="w">
</span><span class="nf">f</span><span class="p" data-group-id="6688009810-5">(</span><span class="p">_</span><span class="p" data-group-id="6688009810-5">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="ss">error</span><span class="p">.</span></code></pre><p>In OTP 26, the compiler emits a warning pointing out that the type variable
<code class="inline">Unknown</code> is unbound:</p><pre><code class="makeup erlang" translate="no"><span class="ss">t</span><span class="p">.</span><span class="nc">erl</span><span class="p">:</span><span class="mi">6</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="w"> </span><span class="n">Warning</span><span class="p">:</span><span class="w"> </span><span class="ss">type</span><span class="w"> </span><span class="ss">variable</span><span class="w"> </span><span class="ss">&#39;Unknown&#39;</span><span class="w"> </span><span class="ss">is</span><span class="w"> </span><span class="ss">only</span><span class="w"> </span><span class="ss">used</span><span class="w"> </span><span class="nf">once</span><span class="w"> </span><span class="p" data-group-id="7807794793-1">(</span><span class="ss">is</span><span class="w"> </span><span class="ss">unbound</span><span class="p" data-group-id="7807794793-1">)</span><span class="w">
</span><span class="c1">%    6|     Opts :: {ok, Unknown} | {error, Unknown}.</span><span class="w">
</span><span class="c1">%     |                  ^</span></code></pre><p>In OTP 27, that warning will become an error.</p><p><a href="" id="escripts_will_be_compiled"></a></p><h3 id="escripts-will-be-compiled-by-default" class="section-heading"><a href="#escripts-will-be-compiled-by-default" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Escripts will be compiled by default</span></h3><p>Escripts will be compiled by default instead of interpreted. That means that the
<code class="inline">compiler</code> application must be available.</p><p>The old behavior of interpreting escripts can be restored by adding the
following line to the script file:</p><pre><code class="makeup erlang" translate="no"><span class="p">-</span><span class="na">mode</span><span class="p" data-group-id="8199463766-1">(</span><span class="ss">interpret</span><span class="p" data-group-id="8199463766-1">)</span><span class="p">.</span></code></pre><p>In OTP 28, support for interpreting an escript will be removed.</p><h3 id="code_path_choice-will-default-to-strict" class="section-heading"><a href="#code_path_choice-will-default-to-strict" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">-code_path_choice will default to strict</span></h3><p>This command line option controls if paths given in the command line, boot
scripts, and the code server should be interpreted as is strict or relaxed.</p><p>OTP 26 and earlier defaults to <code class="inline">relaxed</code>, which means <code class="inline">-pa myapp/ebin</code> would
attempt to load <code class="inline">-pa myapp/ebin</code> and <code class="inline">-pa myapp/myapp/ebin</code>. The option will
default to strict in OTP 27.</p><h3 id="archive-fallbacks-will-be-removed" class="section-heading"><a href="#archive-fallbacks-will-be-removed" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Archive fallbacks will be removed</span></h3><p>OTP 26 and earlier allows an application to have part of its directories as
regular folders and others as archives. This functionality was previously used
by reltool but it is no longer the case from OTP 26. Support for archive
fallbacks will be removed from the code server in OTP 27.</p><p><a href="" id="triple_quoted_strings"></a></p><h3 id="triple-quoted-strings" class="section-heading"><a href="#triple-quoted-strings" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Triple-Quoted Strings</span></h3><p>Before Erlang/OTP 27 a sequence of 3 or more double-quote characters was grouped
in pairs each meaning the empty string and if there was an odd number the last
character was the start of a string. The empty strings were then concatenated
and effectively disappeared.</p><p>In Erlang/OTP 27; 3 or more double-quote characters are interpreted as the start
of a &quot;Triple-Quoted String&quot;. See <a href="https://www.erlang.org/eeps/eep-0064">EEP 64</a>.</p><p>Here follows some examples of code that would change meaning. Note that all
these examples before Erlang/OTP 27.0 was strange since there was no sensible
reason to write like that.</p><pre><code class="makeup erlang" translate="no"><span class="s">&quot;&quot;</span><span class="s">&quot;String Content&quot;</span><span class="s">&quot;&quot;</span><span class="w">
</span><span class="c1">%% Was interpreted as</span><span class="w">
</span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="s">&quot;String Content&quot;</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w">
</span><span class="c1">%% Which becomes</span><span class="w">
</span><span class="s">&quot;String Content&quot;</span><span class="w">
</span><span class="c1">%%</span><span class="w">
</span><span class="c1">%% In OTP 27 it is instead a syntax error since no text is allowed</span><span class="w">
</span><span class="c1">%% on the line after an opening triple-quote</span></code></pre><pre><code class="text">&quot;&quot;&quot;
String Content
&quot;&quot;&quot;
%% Was interpreted as
&quot;&quot; &quot;
String Content
&quot; &quot;&quot;
%% Which becomes
&quot;
String Content
&quot;
%%
%% In OTP 27 it is instead interpreted as a
%% Triple-Quoted String equivalent to
&quot;String Content&quot;</code></pre><pre><code class="makeup erlang" translate="no"><span class="s">&quot;&quot;</span><span class="s">&quot;&quot;</span><span class="w">
</span><span class="o">++</span><span class="w"> </span><span class="nf">foo</span><span class="p" data-group-id="1685040295-1">(</span><span class="p" data-group-id="1685040295-1">)</span><span class="w"> </span><span class="o">++</span><span class="w">
</span><span class="s">&quot;&quot;</span><span class="s">&quot;&quot;</span><span class="w">
</span><span class="c1">%% Became</span><span class="w">
</span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="nf">foo</span><span class="p" data-group-id="1685040295-2">(</span><span class="p" data-group-id="1685040295-2">)</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w">
</span><span class="c1">%%</span><span class="w">
</span><span class="c1">%% In OTP 27 it is instead interpreted as a</span><span class="w">
</span><span class="c1">%% Triple-Quoted String (triple-or-more) equivalent to</span><span class="w">
</span><span class="s">&quot;++ foo() ++&quot;</span></code></pre><p>From Erlang/OTP 26.1 up to 27.0 the compiler issues a warning for a sequence of
3 or more double-quote characters since that is almost certainly a mistake or
something like a result of bad automatic code generation. If a users gets that
warning, the code should be corrected for example by inserting appropriate
spaces between the empty strings, or removing the redundant ones alltogether,
which will have the same meaning before and after Erlang/OTP 27.</p><h2 id="otp-28" class="section-heading"><a href="#otp-28" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">OTP 28</span></h2><p><a href="" id="new_re_engine"></a></p><h3 id="the-re-module-will-use-a-different-regular-expression-engine" class="section-heading"><a href="#the-re-module-will-use-a-different-regular-expression-engine" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">The re module will use a different regular expression engine</span></h3><p>The functionality of module <a href="apps/stdlib/re.html"><code class="inline">re</code></a> is currently provided by the PCRE library,
which is no longer actively maintained. Therefore, in OTP 28, we will switch to
a different regular expression library.</p><p>The source code for PCRE used by the <code class="inline">re</code> module has been modified by the OTP
team to ensure that a regular expression match would yield when matching huge
input binaries and/or when using demanding (back-tracking) regular expressions.
Because of the those modifications, moving to a new version of PCRE has always
been a time-consuming process because all of the modifications had to be applied
by hand again to the updated PCRE source code.</p><p>Most likely, the new regular expression library will be
<a href="https://github.com/google/re2">RE2</a>. RE2 guarantees that the match time is
linear in the length of input string, and it also eschews recursion to avoid
stack overflow. That should make it possible to use RE2 without modifying its
source code. For more information about why RE2 is a good choice, see
<a href="https://github.com/google/re2/wiki/WhyRE2">WhyRE2</a>.</p><p>Some of implications of this change are:</p><ul><li>We expect that the functions in the <code class="inline">re</code> module will continue to be supported,
although some of the options are likely to be dis-continued.</li><li>It is likely that only pattern matching of UTF8-encoded binaries will be
supported (not Latin1-encoded binaries).</li><li>In order to guarantee the linear-time performance, RE2 does not support all
the constructs in regular expression patterns that PCRE do. For example,
backreferences and look-around assertions are not supported. See
<a href="https://github.com/google/re2/wiki/Syntax">Syntax</a> for a description of what
RE2 supports.</li><li>Compiling a regular expression is likely to be slower, and thus more can be
gained by explicitly compiling the regular expression before matching with it.</li></ul><p><a href="" id="fun_creator_pid"></a></p><h3 id="fun-creator-pid-will-be-removed" class="section-heading"><a href="#fun-creator-pid-will-be-removed" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fun creator pid will be removed</span></h3><p>As of OTP 28, the function <a href="apps/erts/erlang.html#fun_info/1"><code class="inline">erlang:fun_info/1</code></a> will not include the <code class="inline">{pid,_}</code>
element and the function <a href="apps/erts/erlang.html#fun_info/2"><code class="inline">erlang:fun_info/2</code></a> will no longer accept <code class="inline">pid</code> as the
second argument.</p><p><a href="" id="escript_interpret_mode_removed"></a></p><h3 id="support-for-interpreting-escripts-will-be-removed" class="section-heading"><a href="#support-for-interpreting-escripts-will-be-removed" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Support for interpreting escripts will be removed</span></h3><p>Escripts will be compiled, and it will no longer be possible to force an escript
to be interpreted by using the directive <code class="inline">-mode(interpret)</code>.</p><h2 id="otp-29" class="section-heading"><a href="#otp-29" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">OTP 29</span></h2><h3 id="it-will-no-longer-be-possible-to-disable-feature-maybe_expr" class="section-heading"><a href="#it-will-no-longer-be-possible-to-disable-feature-maybe_expr" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">It will no longer be possible to disable feature maybe_expr</span></h3><p>As of OTP 29, the <code class="inline">maybe_expr</code> feature will become permanent and no longer
possible to disable. All uses of <code class="inline">maybe</code> as an atom will need to be quoted.</p><p>It is recommend to quote all uses of the atom <code class="inline">maybe</code> as soon as possible. The
compiler option <code class="inline">warn_keywords</code> can be used to emit warnings about all
occurrences of <code class="inline">maybe</code> without quotes.</p><h3 id="cprof-and-eprof-will-be-replaced-by-tprof" class="section-heading"><a href="#cprof-and-eprof-will-be-replaced-by-tprof" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">cprof and eprof will be replaced by tprof</span></h3><p>As of OTP 29, the <code class="inline">cprof</code> and <code class="inline">eprof</code> will be removed in favor of <a href="apps/tools/tprof.html"><code class="inline">tprof</code></a>
added in OTP 27.</p>

</div>

<div class="bottom-actions" id="bottom-actions">
  <div class="bottom-actions-item">

      <a href="scheduled_for_removal.html" class="bottom-actions-button" rel="prev">
        <span class="subheader">
          ← Previous Page
        </span>
        <span class="title">
Scheduled for Removal
        </span>
      </a>

  </div>
  <div class="bottom-actions-item">

      <a href="installation_guide.html" class="bottom-actions-button" rel="next">
        <span class="subheader">
          Next Page →
        </span>
        <span class="title">
Installation Guide
        </span>
      </a>

  </div>
</div>
    <footer class="footer">
      <p>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.38.1) for the

          <a href="https://erlang.org" title="Erlang" target="_blank" translate="no">Erlang programming language</a>

      </p>
<p>Copyright © 1996-2025 <a href="https://www.ericsson.com">Ericsson AB</a></p>
    </footer>
  </div>
</main>
</div>
  <script defer src="https://cdn.jsdelivr.net/npm/mermaid@11.4.1/dist/mermaid.min.js"></script>
  <script>
  let initialized = false;

  window.addEventListener("exdoc:loaded", () => {
      if (!initialized) {
      mermaid.initialize({
          startOnLoad: false,
          theme: document.body.className.includes("dark") ? "dark" : "default"
      });
      initialized = true;
      }

      let id = 0;
      for (const codeEl of document.querySelectorAll("pre code.mermaid")) {
      const preEl = codeEl.parentElement;
      const graphDefinition = codeEl.textContent;
      const graphEl = document.createElement("div");
      const graphId = "mermaid-graph-" + id++;
      mermaid.render(graphId, graphDefinition).then(({svg, bindFunctions}) => {
          graphEl.innerHTML = svg;
          bindFunctions?.(graphEl);
          preEl.insertAdjacentElement("afterend", graphEl);
          preEl.remove();
      });
      }
  });
  </script>

  </body>
</html>
