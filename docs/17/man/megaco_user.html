<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html xmlns:fn="http://www.w3.org/2005/02/xpath-functions">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" href="../otp_doc.css" type="text/css">
<title>Erlang -- megaco_user</title>
</head>
<body bgcolor="white" text="#000000" link="#0000ff" vlink="#ff00ff" alink="#ff0000"><div id="container">
<script id="js" type="text/javascript" language="JavaScript" src="../js/flipmenu/flipmenu.js"></script><script id="js2" type="text/javascript" src="../js/erlresolvelinks.js"></script><script language="JavaScript" type="text/javascript">
            <!--
              function getWinHeight() {
                var myHeight = 0;
                if( typeof( window.innerHeight ) == 'number' ) {
                  //Non-IE
                  myHeight = window.innerHeight;
                } else if( document.documentElement && ( document.documentElement.clientWidth ||
                                                         document.documentElement.clientHeight ) ) {
                  //IE 6+ in 'standards compliant mode'
                  myHeight = document.documentElement.clientHeight;
                } else if( document.body && ( document.body.clientWidth || document.body.clientHeight ) ) {
                  //IE 4 compatible
                  myHeight = document.body.clientHeight;
                }
                return myHeight;
              }

              function setscrollpos() {
                var objf=document.getElementById('loadscrollpos');
                 document.getElementById("leftnav").scrollTop = objf.offsetTop - getWinHeight()/2;
              }

              function addEvent(obj, evType, fn){
                if (obj.addEventListener){
                obj.addEventListener(evType, fn, true);
                return true;
              } else if (obj.attachEvent){
                var r = obj.attachEvent("on"+evType, fn);
                return r;
              } else {
                return false;
              }
             }

             addEvent(window, 'load', setscrollpos);

             //--></script><div id="leftnav"><div class="innertube">
<img alt="Erlang logo" src="../erlang-logo.png"><br><small><a href="../apps/megaco/users_guide.html">User's Guide</a><br><a href="../apps/megaco/index.html">Reference Manual</a><br><a href="../apps/megaco/release_notes.html">Release Notes</a><br><a href="../apps/megaco/megaco.pdf">PDF</a><br><a href="../index.html">Top</a></small><p><strong>Megaco/H.248</strong><br><strong>Reference Manual</strong><br><small>Version 3.17.3</small></p>
<br><a href="javascript:openAllFlips()">Expand All</a><br><a href="javascript:closeAllFlips()">Contract All</a><p><small><strong>Table of Contents</strong></small></p>
<ul class="flipMenu">
<li id="no" title="megaco " expanded="false">megaco<ul>
<li><a href="megaco.html">
                  Top of manual page
                </a></li>
<li title="start-0"><a href="megaco.html#start-0">start/0</a></li>
<li title="stop-0"><a href="megaco.html#stop-0">stop/0</a></li>
<li title="start_user-2"><a href="megaco.html#start_user-2">start_user/2</a></li>
<li title="stop_user-1"><a href="megaco.html#stop_user-1">stop_user/1</a></li>
<li title="user_info-1"><a href="megaco.html#user_info-1">user_info/1</a></li>
<li title="user_info-2"><a href="megaco.html#user_info-2">user_info/2</a></li>
<li title="update_user_info-3"><a href="megaco.html#update_user_info-3">update_user_info/3</a></li>
<li title="conn_info-1"><a href="megaco.html#conn_info-1">conn_info/1</a></li>
<li title="conn_info-2"><a href="megaco.html#conn_info-2">conn_info/2</a></li>
<li title="update_conn_info-3"><a href="megaco.html#update_conn_info-3">update_conn_info/3</a></li>
<li title="system_info-0"><a href="megaco.html#system_info-0">system_info/0</a></li>
<li title="system_info-1"><a href="megaco.html#system_info-1">system_info/1</a></li>
<li title="info-0"><a href="megaco.html#info-0">info/0</a></li>
<li title="connect-4"><a href="megaco.html#connect-4">connect/4</a></li>
<li title="connect-5"><a href="megaco.html#connect-5">connect/5</a></li>
<li title="disconnect-2"><a href="megaco.html#disconnect-2">disconnect/2</a></li>
<li title="call-3"><a href="megaco.html#call-3">call/3</a></li>
<li title="cast-3"><a href="megaco.html#cast-3">cast/3</a></li>
<li title="encode_actions-3"><a href="megaco.html#encode_actions-3">encode_actions/3</a></li>
<li title="token_tag2string-1"><a href="megaco.html#token_tag2string-1">token_tag2string/1</a></li>
<li title="token_tag2string-2"><a href="megaco.html#token_tag2string-2">token_tag2string/2</a></li>
<li title="token_tag2string-3"><a href="megaco.html#token_tag2string-3">token_tag2string/3</a></li>
<li title="cancel-2"><a href="megaco.html#cancel-2">cancel/2</a></li>
<li title="process_received_message-4"><a href="megaco.html#process_received_message-4">process_received_message/4</a></li>
<li title="process_received_message-5"><a href="megaco.html#process_received_message-5">process_received_message/5</a></li>
<li title="receive_message-4"><a href="megaco.html#receive_message-4">receive_message/4</a></li>
<li title="receive_message-5"><a href="megaco.html#receive_message-5">receive_message/5</a></li>
<li title="parse_digit_map-1"><a href="megaco.html#parse_digit_map-1">parse_digit_map/1</a></li>
<li title="eval_digit_map-1"><a href="megaco.html#eval_digit_map-1">eval_digit_map/1</a></li>
<li title="eval_digit_map-2"><a href="megaco.html#eval_digit_map-2">eval_digit_map/2</a></li>
<li title="report_digit_event-2"><a href="megaco.html#report_digit_event-2">report_digit_event/2</a></li>
<li title="test_digit_event-2"><a href="megaco.html#test_digit_event-2">test_digit_event/2</a></li>
<li title="encode_sdp-1"><a href="megaco.html#encode_sdp-1">encode_sdp/1</a></li>
<li title="decode_sdp-1"><a href="megaco.html#decode_sdp-1">decode_sdp/1</a></li>
<li title="get_sdp_record_from_PropertGroup-2"><a href="megaco.html#get_sdp_record_from_PropertGroup-2">get_sdp_record_from_PropertGroup/2</a></li>
<li title="versions1-0"><a href="megaco.html#versions1-0">versions1/0</a></li>
<li title="versions2-0"><a href="megaco.html#versions2-0">versions2/0</a></li>
<li title="print_version_info-0"><a href="megaco.html#print_version_info-0">print_version_info/0</a></li>
<li title="print_version_info-1"><a href="megaco.html#print_version_info-1">print_version_info/1</a></li>
<li title="enable_trace-2"><a href="megaco.html#enable_trace-2">enable_trace/2</a></li>
<li title="disable_trace-0"><a href="megaco.html#disable_trace-0">disable_trace/0</a></li>
<li title="set_trace-1"><a href="megaco.html#set_trace-1">set_trace/1</a></li>
<li title="get_stats-0"><a href="megaco.html#get_stats-0">get_stats/0</a></li>
<li title="get_stats-1"><a href="megaco.html#get_stats-1">get_stats/1</a></li>
<li title="get_stats-1"><a href="megaco.html#get_stats-1">get_stats/1</a></li>
<li title="get_stats-2"><a href="megaco.html#get_stats-2">get_stats/2</a></li>
<li title="reset_stats-0"><a href="megaco.html#reset_stats-0">reset_stats/0</a></li>
<li title="reset_stats-1"><a href="megaco.html#reset_stats-1">reset_stats/1</a></li>
<li title="test_request-5"><a href="megaco.html#test_request-5">test_request/5</a></li>
<li title="test_reply-5"><a href="megaco.html#test_reply-5">test_reply/5</a></li>
</ul>
</li>
<li id="no" title="megaco_edist_compress " expanded="false">megaco_edist_compress<ul>
<li><a href="megaco_edist_compress.html">
                  Top of manual page
                </a></li>
<li title="Module:encode-2"><a href="megaco_edist_compress.html#Module:encode-2">Module:encode/2</a></li>
<li title="Module:decode-2"><a href="megaco_edist_compress.html#Module:decode-2">Module:decode/2</a></li>
</ul>
</li>
<li id="no" title="megaco_encoder " expanded="false">megaco_encoder<ul>
<li><a href="megaco_encoder.html">
                  Top of manual page
                </a></li>
<li title="Module:encode_message-3"><a href="megaco_encoder.html#Module:encode_message-3">Module:encode_message/3</a></li>
<li title="Module:decode_message-3"><a href="megaco_encoder.html#Module:decode_message-3">Module:decode_message/3</a></li>
<li title="Module:decode_mini_message-3"><a href="megaco_encoder.html#Module:decode_mini_message-3">Module:decode_mini_message/3</a></li>
<li title="Module:encode_transaction-3"><a href="megaco_encoder.html#Module:encode_transaction-3">Module:encode_transaction/3</a></li>
<li title="Module:encode_action_requests-3"><a href="megaco_encoder.html#Module:encode_action_requests-3">Module:encode_action_requests/3</a></li>
<li title="Module:encode_action_reply-3"><a href="megaco_encoder.html#Module:encode_action_reply-3">Module:encode_action_reply/3</a></li>
</ul>
</li>
<li id="no" title="megaco_transport " expanded="false">megaco_transport<ul>
<li><a href="megaco_transport.html">
                  Top of manual page
                </a></li>
<li title="Module:send_message-2"><a href="megaco_transport.html#Module:send_message-2">Module:send_message/2</a></li>
<li title="Module:send_message-3"><a href="megaco_transport.html#Module:send_message-3">Module:send_message/3</a></li>
<li title="Module:resend_message-2"><a href="megaco_transport.html#Module:resend_message-2">Module:resend_message/2</a></li>
</ul>
</li>
<li id="no" title="megaco_tcp " expanded="false">megaco_tcp<ul>
<li><a href="megaco_tcp.html">
                  Top of manual page
                </a></li>
<li title="start_transport-0"><a href="megaco_tcp.html#start_transport-0">start_transport/0</a></li>
<li title="listen-2"><a href="megaco_tcp.html#listen-2">listen/2</a></li>
<li title="connect-2"><a href="megaco_tcp.html#connect-2">connect/2</a></li>
<li title="close-1"><a href="megaco_tcp.html#close-1">close/1</a></li>
<li title="socket-1"><a href="megaco_tcp.html#socket-1">socket/1</a></li>
<li title="send_message-2"><a href="megaco_tcp.html#send_message-2">send_message/2</a></li>
<li title="block-1"><a href="megaco_tcp.html#block-1">block/1</a></li>
<li title="unblock-1"><a href="megaco_tcp.html#unblock-1">unblock/1</a></li>
<li title="upgrade_receive_handle-1"><a href="megaco_tcp.html#upgrade_receive_handle-1">upgrade_receive_handle/1</a></li>
<li title="get_stats-0"><a href="megaco_tcp.html#get_stats-0">get_stats/0</a></li>
<li title="get_stats-1"><a href="megaco_tcp.html#get_stats-1">get_stats/1</a></li>
<li title="get_stats-2"><a href="megaco_tcp.html#get_stats-2">get_stats/2</a></li>
<li title="reset_stats-0"><a href="megaco_tcp.html#reset_stats-0">reset_stats/0</a></li>
<li title="reset_stats-1"><a href="megaco_tcp.html#reset_stats-1">reset_stats/1</a></li>
</ul>
</li>
<li id="no" title="megaco_udp " expanded="false">megaco_udp<ul>
<li><a href="megaco_udp.html">
                  Top of manual page
                </a></li>
<li title="start_transport-0"><a href="megaco_udp.html#start_transport-0">start_transport/0</a></li>
<li title="open-2"><a href="megaco_udp.html#open-2">open/2</a></li>
<li title="close-2"><a href="megaco_udp.html#close-2">close/2</a></li>
<li title="socket-1"><a href="megaco_udp.html#socket-1">socket/1</a></li>
<li title="create_send_handle-3"><a href="megaco_udp.html#create_send_handle-3">create_send_handle/3</a></li>
<li title="send_message-2"><a href="megaco_udp.html#send_message-2">send_message/2</a></li>
<li title="block-1"><a href="megaco_udp.html#block-1">block/1</a></li>
<li title="unblock-1"><a href="megaco_udp.html#unblock-1">unblock/1</a></li>
<li title="upgrade_receive_handle-2"><a href="megaco_udp.html#upgrade_receive_handle-2">upgrade_receive_handle/2</a></li>
<li title="get_stats-0"><a href="megaco_udp.html#get_stats-0">get_stats/0</a></li>
<li title="get_stats-1"><a href="megaco_udp.html#get_stats-1">get_stats/1</a></li>
<li title="get_stats-2"><a href="megaco_udp.html#get_stats-2">get_stats/2</a></li>
<li title="reset_stats-0"><a href="megaco_udp.html#reset_stats-0">reset_stats/0</a></li>
<li title="reset_stats-1"><a href="megaco_udp.html#reset_stats-1">reset_stats/1</a></li>
</ul>
</li>
<li id="loadscrollpos" title="megaco_user " expanded="true">megaco_user<ul>
<li><a href="megaco_user.html">
                  Top of manual page
                </a></li>
<li title="handle_connect-2"><a href="megaco_user.html#handle_connect-2">handle_connect/2</a></li>
<li title="handle_connect-3"><a href="megaco_user.html#handle_connect-3">handle_connect/3</a></li>
<li title="handle_disconnect-3"><a href="megaco_user.html#handle_disconnect-3">handle_disconnect/3</a></li>
<li title="handle_syntax_error-3"><a href="megaco_user.html#handle_syntax_error-3">handle_syntax_error/3</a></li>
<li title="handle_syntax_error-4"><a href="megaco_user.html#handle_syntax_error-4">handle_syntax_error/4</a></li>
<li title="handle_message_error-3"><a href="megaco_user.html#handle_message_error-3">handle_message_error/3</a></li>
<li title="handle_message_error-4"><a href="megaco_user.html#handle_message_error-4">handle_message_error/4</a></li>
<li title="handle_trans_request-3"><a href="megaco_user.html#handle_trans_request-3">handle_trans_request/3</a></li>
<li title="handle_trans_request-4"><a href="megaco_user.html#handle_trans_request-4">handle_trans_request/4</a></li>
<li title="handle_trans_long_request-3"><a href="megaco_user.html#handle_trans_long_request-3">handle_trans_long_request/3</a></li>
<li title="handle_trans_long_request-4"><a href="megaco_user.html#handle_trans_long_request-4">handle_trans_long_request/4</a></li>
<li title="handle_trans_reply-4"><a href="megaco_user.html#handle_trans_reply-4">handle_trans_reply/4</a></li>
<li title="handle_trans_reply-5"><a href="megaco_user.html#handle_trans_reply-5">handle_trans_reply/5</a></li>
<li title="handle_trans_ack-4"><a href="megaco_user.html#handle_trans_ack-4">handle_trans_ack/4</a></li>
<li title="handle_trans_ack-5"><a href="megaco_user.html#handle_trans_ack-5">handle_trans_ack/5</a></li>
<li title="handle_unexpected_trans-3"><a href="megaco_user.html#handle_unexpected_trans-3">handle_unexpected_trans/3</a></li>
<li title="handle_unexpected_trans-4"><a href="megaco_user.html#handle_unexpected_trans-4">handle_unexpected_trans/4</a></li>
<li title="handle_trans_request_abort-4"><a href="megaco_user.html#handle_trans_request_abort-4">handle_trans_request_abort/4</a></li>
<li title="handle_trans_request_abort-5"><a href="megaco_user.html#handle_trans_request_abort-5">handle_trans_request_abort/5</a></li>
<li title="handle_segment_reply-5"><a href="megaco_user.html#handle_segment_reply-5">handle_segment_reply/5</a></li>
<li title="handle_segment_reply-6"><a href="megaco_user.html#handle_segment_reply-6">handle_segment_reply/6</a></li>
</ul>
</li>
<li id="no" title="megaco_flex_scanner " expanded="false">megaco_flex_scanner<ul>
<li><a href="megaco_flex_scanner.html">
                  Top of manual page
                </a></li>
<li title="start-0"><a href="megaco_flex_scanner.html#start-0">start/0</a></li>
<li title="stop-1"><a href="megaco_flex_scanner.html#stop-1">stop/1</a></li>
<li title="is_reentrant_enabled-0"><a href="megaco_flex_scanner.html#is_reentrant_enabled-0">is_reentrant_enabled/0</a></li>
<li title="is_scanner_port-2"><a href="megaco_flex_scanner.html#is_scanner_port-2">is_scanner_port/2</a></li>
<li title="scan-2"><a href="megaco_flex_scanner.html#scan-2">scan/2</a></li>
</ul>
</li>
<li id="no" title="megaco_codec_meas " expanded="false">megaco_codec_meas<ul>
<li><a href="megaco_codec_meas.html">
                  Top of manual page
                </a></li>
<li title="start-0"><a href="megaco_codec_meas.html#start-0">start/0</a></li>
<li title="start-1"><a href="megaco_codec_meas.html#start-1">start/1</a></li>
</ul>
</li>
<li id="no" title="megaco_codec_mstone1 " expanded="false">megaco_codec_mstone1<ul>
<li><a href="megaco_codec_mstone1.html">
                  Top of manual page
                </a></li>
<li title="start-0"><a href="megaco_codec_mstone1.html#start-0">start/0</a></li>
<li title="start-1"><a href="megaco_codec_mstone1.html#start-1">start/1</a></li>
<li title="start-2"><a href="megaco_codec_mstone1.html#start-2">start/2</a></li>
<li title="start_flex-0"><a href="megaco_codec_mstone1.html#start_flex-0">start_flex/0</a></li>
<li title="start_flex-1"><a href="megaco_codec_mstone1.html#start_flex-1">start_flex/1</a></li>
<li title="start_flex-2"><a href="megaco_codec_mstone1.html#start_flex-2">start_flex/2</a></li>
<li title="start_only_drv-0"><a href="megaco_codec_mstone1.html#start_only_drv-0">start_only_drv/0</a></li>
<li title="start_only_drv-1"><a href="megaco_codec_mstone1.html#start_only_drv-1">start_only_drv/1</a></li>
<li title="start_only_drv-2"><a href="megaco_codec_mstone1.html#start_only_drv-2">start_only_drv/2</a></li>
<li title="start_no_drv-0"><a href="megaco_codec_mstone1.html#start_no_drv-0">start_no_drv/0</a></li>
<li title="start_no_drv-1"><a href="megaco_codec_mstone1.html#start_no_drv-1">start_no_drv/1</a></li>
<li title="start_no_drv-2"><a href="megaco_codec_mstone1.html#start_no_drv-2">start_no_drv/2</a></li>
</ul>
</li>
<li id="no" title="megaco_codec_mstone2 " expanded="false">megaco_codec_mstone2<ul>
<li><a href="megaco_codec_mstone2.html">
                  Top of manual page
                </a></li>
<li title="start-0"><a href="megaco_codec_mstone2.html#start-0">start/0</a></li>
<li title="start-1"><a href="megaco_codec_mstone2.html#start-1">start/1</a></li>
</ul>
</li>
<li id="no" title="megaco_codec_transform " expanded="false">megaco_codec_transform<ul>
<li><a href="megaco_codec_transform.html">
                  Top of manual page
                </a></li>
<li title="export_messages-0"><a href="megaco_codec_transform.html#export_messages-0">export_messages/0</a></li>
<li title="export_messages-1"><a href="megaco_codec_transform.html#export_messages-1">export_messages/1</a></li>
</ul>
</li>
</ul>
</div></div>
<div id="content">
<div class="innertube">
<!-- refpage --><center><h1>megaco_user</h1></center>
  
  <h3>MODULE</h3>
<div class="REFBODY">megaco_user</div>
  <h3>MODULE SUMMARY</h3>
<div class="REFBODY">Callback module for users of the Megaco application</div>
  <h3>DESCRIPTION</h3>
<div class="REFBODY"><p>
    <p>This module defines the callback behaviour of Megaco users.  A
      megaco_user compliant callback module must export the following
      functions: </p>
    <ul>
      <li>
        <p><span class="bold_code"><a href="#connect">handle_connect/2,3</a></span></p>
      </li>

      <li>
        <p><span class="bold_code"><a href="#disconnect">handle_disconnect/3</a></span></p>
      </li>

      <li>
        <p><span class="bold_code"><a href="#syntax_error">handle_syntax_error/3,4</a></span></p>
      </li>

      <li>
        <p><span class="bold_code"><a href="#message_error">handle_message_error/3,4</a></span></p>
      </li>



      <li>
        <p><span class="bold_code"><a href="#trans_request">handle_trans_request/3,4</a></span></p>
      </li>

      <li>
        <p><span class="bold_code"><a href="#trans_long_request">handle_trans_long_request/3,4</a></span></p>
      </li>

      <li>
        <p><span class="bold_code"><a href="#trans_reply">handle_trans_reply/4,5</a></span></p>
      </li>

      <li>
        <p><span class="bold_code"><a href="#trans_ack">handle_trans_ack/4,5</a></span></p>
      </li>

      <li>
        <p><span class="bold_code"><a href="#unexpected_trans">handle_unexpected_trans/3,4</a></span></p>
      </li>

      <li>
        <p><span class="bold_code"><a href="#request_abort">handle_trans_request_abort/4,5</a></span></p>
      </li>

      <li>
        <p><span class="bold_code"><a href="#segment_reply">handle_segment_reply/5,6</a></span></p>
      </li>
    </ul>

    <p>The semantics of them and their exact signatures are explained 
      below. </p>
    <p>The <span class="code">user_args</span> configuration parameter which may be used to
      extend the argument list of the callback functions. For example,
      the handle_connect function takes by default two arguments:</p>
    <div class="example"><pre>
        handle_connect(Handle, Version)
    </pre></div>
    <p>but if the <span class="code">user_args</span> parameter is set to a longer
      list, such as <span class="code">[SomePid,SomeTableRef]</span>, the callback
      function is expected to have these (in this case two) extra
      arguments last in the argument list:</p>
    <div class="example"><pre>
        handle_connect(Handle, Version, SomePid, SomeTableRef)
    </pre></div>

    <a name="extra_argument"></a>
    <div class="note">
<div class="label">Note</div>
<div class="content"><p>
      <p>Must of the functions  below has an optional <span class="code">Extra</span> argument (e.g. 
        <span class="bold_code"><a href="#unexpected_trans">handle_unexpected_trans/4</a></span>). 
        The functions which takes this argument will be called if and only if one 
        of the functions 
        <span class="bold_code"><a href="megaco.html#receive_message">receive_message/5</a></span> or 
        <span class="bold_code"><a href="megaco.html#process_received_message">process_received_message/5</a></span> 
        was called with the <span class="code">Extra</span> argument different than 
        <span class="code">ignore_extra</span>. </p>
    </p></div>
</div>

  </p></div>

  <h3><a name="id83419">DATA TYPES</a></h3>
<div class="REFBODY">
    
    <div class="example"><pre>
action_request() = #'ActionRequest'{}
action_reply() = #'ActionReply'{}
error_desc() = #'ErrorDescriptor'{}
segment_no() = integer()
    </pre></div>
    <div class="example"><pre>
conn_handle() = #megaco_conn_handle{}    </pre></div>
    <p>The record initially returned by <span class="code">megaco:connect/4,5</span>. 
      It identifies a "virtual" connection and may be reused after a 
      reconnect (disconnect + connect).</p>
    <div class="example"><pre>
protocol_version() = integer()    </pre></div>
    <p>Is the actual protocol version. In most cases the protocol
      version is retrieved from the processed message, but there
      are exceptions:</p>
    <p></p>
    <ul>
      <li>
        <p>When <span class="code">handle_connect/2,3</span> is triggered by an 
          explicit call to <span class="code">megaco:connect/4,5</span>.</p>
      </li>
      <li>
        <p><span class="code">handle_disconnect/3</span></p>
      </li>
      <li>
        <p><span class="code">handle_syntax_error/3</span></p>
      </li>
    </ul>
    <p>In these cases, the ProtocolVersion default
      version is obtained from the static connection
      configuration:</p>
    <ul>
      <li>
        <p><span class="code">megaco:conn_info(ConnHandle, protocol_version)</span>.</p>
      </li>
    </ul>
    <a name="connect"></a>
  </div>

  <h3>EXPORTS</h3>
    <p><a name="handle_connect-2"><span class="bold_code">handle_connect(ConnHandle, ProtocolVersion) -&gt; ok | error | {error,ErrorDescr}</span></a><br><a name="handle_connect-3"><span class="bold_code">handle_connect(ConnHandle, ProtocolVersion, Extra]) -&gt; ok | error | {error,ErrorDescr}</span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
        <div class="REFTYPES">
<span class="bold_code">ConnHandle      = conn_handle()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">ProtocolVersion = protocol_version()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">ErrorDescr      = error_desc()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">Extra           = term()</span><br>
</div>
      </div>
<div class="REFBODY"><p>
        <p>Invoked when a new connection is established</p>
        <p>Connections may either be established by an explicit call to
          megaco:connect/4 or implicitly at the first invocation of
          megaco:receive_message/3.</p>
        <p>Normally a Media Gateway (MG) connects explicitly while a Media
          Gateway Controller (MGC) connects implicitly.</p>
        <p>At the Media Gateway Controller (MGC) side it is possible to reject
          a connection request (and send a message error reply to the gateway)
          by returning <span class="code">{error, ErrorDescr}</span> or simply <span class="code">error</span> which
          generates an error descriptor with code 402 (unauthorized) and 
          reason "Connection refused by user" (this is also the case for all 
          unknown results, such as exit signals or throw).</p>

	<p>See <span class="bold_code"><a href="#extra_argument">note</a></span> 
          above about the <span class="code">Extra</span> argument in 
          <span class="code">handle_message_error/4</span>. </p>

	<p><span class="code">handle_connect/3</span> (with <span class="code">Extra</span>) 
          can also be called as a result of a call to the 
          <span class="bold_code"><a href="megaco.html#connect">megaco:connect/5</a></span> function
          (if that function is called with the 
          <span class="code">Extra</span> argument different than <span class="code">ignore_extra</span>. </p>

        <a name="disconnect"></a>
      </p></div>

    <p><a name="handle_disconnect-3"><span class="bold_code">handle_disconnect(ConnHandle, ProtocolVersion, Reason) -&gt; ok</span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
        <div class="REFTYPES">
<span class="bold_code">ConnHandle      = conn_handle()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">ProtocolVersion = protocol_version()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">Reason = term()</span><br>
</div>
      </div>
<div class="REFBODY"><p>
        <p>Invoked when a connection is teared down</p>
        <p>The disconnect may either be made explicitly by a call to
          megaco:disconnect/2 or implicitly when the control process
          of the connection dies.</p>

        <a name="syntax_error"></a>
      </p></div>

    <p><a name="handle_syntax_error-3"><span class="bold_code">handle_syntax_error(ReceiveHandle, ProtocolVersion, DefaultED) -&gt; reply | {reply, ED} | no_reply | {no_reply, ED} </span></a><br><a name="handle_syntax_error-4"><span class="bold_code">handle_syntax_error(ReceiveHandle, ProtocolVersion, DefaultED, Extra) -&gt; reply | {reply, ED} | no_reply | {no_reply, ED} </span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
        <div class="REFTYPES">
<span class="bold_code">ReceiveHandle    = receive_handle()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">ProtocolVersion  = protocol_version()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">DefaultED        = error_desc()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">ED               = error_desc()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">Extra            = term()</span><br>
</div>
      </div>
<div class="REFBODY"><p>
        <p>Invoked when a received message had syntax errors</p>
        <p>Incoming messages is delivered by megaco:receive_message/4
          and normally decoded successfully. But if the decoding
          failed this function is called in order to decide if the
          originator should get a reply message (reply) or if the reply
          silently should be discarded (no_reply).</p>
        <p>Syntax errors are detected locally on this side of the
          protocol and may have many causes, e.g. a malfunctioning
          transport layer, wrong encoder/decoder selected, bad
          configuration of the selected encoder/decoder etc.</p>
        <p>The error descriptor defaults to <span class="code">DefaultED</span>,
          but can be overridden with an alternate one by
          returning <span class="code">{reply,ED}</span> or <span class="code">{no_reply,ED}</span>
          instead of <span class="code">reply</span> and <span class="code">no_reply</span> respectively.
          </p>
        <p>Any other return values (including exit signals or throw) and the
          <span class="code">DefaultED</span> will be used. </p>

	<p>See <span class="bold_code"><a href="#extra_argument">note</a></span> 
          above about the <span class="code">Extra</span> argument in 
          <span class="code">handle_syntax_error/4</span>. </p>

        <a name="message_error"></a>
      </p></div>

    <p><a name="handle_message_error-3"><span class="bold_code">handle_message_error(ConnHandle, ProtocolVersion, ErrorDescr) -&gt; ok</span></a><br><a name="handle_message_error-4"><span class="bold_code">handle_message_error(ConnHandle, ProtocolVersion, ErrorDescr, Extra) -&gt; ok</span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
        <div class="REFTYPES">
<span class="bold_code">ConnHandle      = conn_handle()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">ProtocolVersion = protocol_version()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">ErrorDescr      = error_desc()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">Extra           = term()</span><br>
</div>
      </div>
<div class="REFBODY"><p>
        <p>Invoked when a received message just contains an error
          instead of a list of transactions.</p>
        <p>Incoming messages is delivered by megaco:receive_message/4
          and successfully decoded. Normally a message contains a list
          of transactions, but it may instead contain an
          ErrorDescriptor on top level of the message.</p>
        <p>Message errors are detected remotely on the other side of
          the protocol. And you probably don't want to reply to it,
          but it may indicate that you have outstanding transactions
          that not will get any response (request -&gt; reply; reply -&gt;
          ack).</p>

	<p>See <span class="bold_code"><a href="#extra_argument">note</a></span> 
          above about the <span class="code">Extra</span> argument in 
          <span class="code">handle_message_error/4</span>. </p>


        <a name="trans_request"></a>
      </p></div>



    <p><a name="handle_trans_request-3"><span class="bold_code">handle_trans_request(ConnHandle, ProtocolVersion, ActionRequests) -&gt; pending() | reply() | ignore_trans_request</span></a><br><a name="handle_trans_request-4"><span class="bold_code">handle_trans_request(ConnHandle, ProtocolVersion, ActionRequests, Extra) -&gt; pending() | reply() | ignore_trans_request</span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
        <div class="REFTYPES">
<span class="bold_code">ConnHandle      = conn_handle()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">ProtocolVersion = protocol_version()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">ActionRequests  = [action_request()]</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">Extra           = term()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">pending()       = {pending, req_data()}</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">req_data()      = term()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">reply()         = {ack_action(), actual_reply()} | {ack_action(), actual_reply(), send_options()} </span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">ack_action()    = discard_ack | {handle_ack, ack_data()} | {handle_pending_ack, ack_data()} | {handle_sloppy_ack, ack_data()}</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">actual_reply()  = [action_reply()] | error_desc()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">ack_data()      = term()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">send_options()  = [send_option()]</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">send_option()   = {reply_timer, megaco_timer()} | {send_handle, term()} | {protocol_version, integer()}</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">Extra           = term()</span><br>
</div>
      </div>
<div class="REFBODY"><p>
        <p>Invoked for each transaction request</p>
        <p>Incoming messages is delivered by megaco:receive_message/4
          and successfully decoded. Normally a message contains a list
          of transactions and this function is invoked for each
          TransactionRequest in the message.</p>
        <p>This function takes a list of 'ActionRequest' records and
          has three main options:</p>
        <dl>
          <dt><strong><span class="code">Return ignore_trans_request</span></strong></dt>
          <dd>
            <p>Decide that these action requests shall be ignored
              completely.</p>
          </dd>
          <dt><strong><span class="code">Return pending()</span></strong></dt>
          <dd>
            <p>Decide that the processing of these action requests
              will take a long time and that the originator should get
              an immediate 'TransactionPending' reply as interim
              response. The actual processing of these action requests
              instead should be delegated to the the
              handle_trans_long_request/3 callback function with the
              req_data() as one of its arguments. </p>
          </dd>
          <dt><strong><span class="code">Return reply()</span></strong></dt>
          <dd>
            <p>Process the action requests and either return an
              error_descr() indicating some fatal error or a list of
              action replies (wildcarded or not). </p>
            <p>If for some reason megaco is unable to deliver the reply,
              the reason for this will be passed to the user via a call
              to the callback function 
              <span class="bold_code"><a href="#trans_ack">handle_trans_ack</a></span>,
              unless <span class="code">ack_action() = discard_ack</span>. </p>
            <p>The ack_action() is  either:</p>
            <dl>
              <dt><strong><span class="code">discard_ack</span></strong></dt>
              <dd>
                <p>Meaning that you don't care if the reply is
                  acknowledged or not.</p>
              </dd>
              <dt><strong><span class="code">{handle_ack, ack_data()} | {handle_ack, ack_data(), send_options()}</span></strong></dt>
              <dd>
                <p>Meaning that you want an immediate acknowledgement
                  when the other part receives this transaction
                  reply. When the acknowledgement eventually is
                  received, the handle_trans_ack/4 callback function
                  will be invoked with the ack_data() as one of its
                  arguments. ack_data() may be any Erlang term.</p>
              </dd>
              <dt><strong><span class="code">{handle_pending_ack, ack_data()} | {handle_pending_ack, ack_data(), send_options()}</span></strong></dt>
              <dd>
                <p>This has the same effect as the above, 
                  <strong>if and only if</strong> megaco has sent at least one 
                  pending message for this request (during the processing
                  of the request). If no pending message has been sent, then 
                  immediate acknowledgement will <strong>not</strong> be 
                  requested. </p>
                <p>Note that this only works as specified if the 
                  <span class="code">sent_pending_limit</span> config option has been set to 
                  an integer value. </p>
              </dd>
              <dt><strong><span class="code">{handle_sloppy_ack, ack_data()}| {handle_sloppy_ack, ack_data(), send_options()}</span></strong></dt>
              <dd>
                <p>Meaning that you want an acknowledgement <strong>sometime</strong>.
                  When the acknowledgement eventually is received, the 
                  handle_trans_ack/4 callback function will be invoked with 
                  the ack_data() as one of its arguments. ack_data() may be 
                  any Erlang term.</p>
              </dd>
            </dl>
          </dd>
        </dl>
        <p>Any other return values (including exit signals or throw) will 
          result in an error descriptor with code 500 (internal gateway error) 
          and the module name (of the callback module) as reason. </p>

	<p>See <span class="bold_code"><a href="#extra_argument">note</a></span> 
          above about the <span class="code">Extra</span> argument in 
          <span class="code">handle_trans_request/4</span>. </p>

        <a name="trans_long_request"></a>
      </p></div>

    <p><a name="handle_trans_long_request-3"><span class="bold_code">handle_trans_long_request(ConnHandle, ProtocolVersion, ReqData) -&gt; reply()</span></a><br><a name="handle_trans_long_request-4"><span class="bold_code">handle_trans_long_request(ConnHandle, ProtocolVersion, ReqData, Extra) -&gt; reply()</span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
        <div class="REFTYPES">
<span class="bold_code">ConnHandle      = conn_handle()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">ProtocolVersion = protocol_version()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">ReqData         = req_data()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">Extra           = term()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">req_data()      = term()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">reply()         = {ack_action(), actual_reply()} | {ack_action(), actual_reply(), send_options()}</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">ack_action()    = discard_ack | {handle_ack, ack_data()} | {handle_sloppy_ack, ack_data()}</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">actual_reply()  = [action_reply()] | error_desc()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">ack_data()      = term()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">send_options()  = [send_option()]</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">send_option()   = {reply_timer, megaco_timer()} | {send_handle, term()} | {protocol_version, integer()}</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">Extra           = term()</span><br>
</div>
      </div>
<div class="REFBODY"><p>
        <p>Optionally invoked for a time consuming transaction request</p>
        <p>If this function gets invoked or not is controlled by the
          reply from the preceding call to handle_trans_request/3.
          The handle_trans_request/3 function may decide to process
          the action requests itself or to delegate the processing to
          this function.</p>
        <p>The req_data() argument to this function is the Erlang term
          returned by handle_trans_request/3.</p>
        <p></p>
        <p>Any other return values (including exit signals or throw) will 
          result in an error descriptor with code 500 (internal gateway error)
          and the module name (of the callback module) as reason. </p>

	<p>See <span class="bold_code"><a href="#extra_argument">note</a></span> 
          above about the <span class="code">Extra</span> argument in 
          <span class="code">handle_trans_long_request/4</span>. </p>

        <a name="trans_reply"></a>
      </p></div>

    <p><a name="handle_trans_reply-4"><span class="bold_code">handle_trans_reply(ConnHandle, ProtocolVersion, UserReply, ReplyData) -&gt; ok</span></a><br><a name="handle_trans_reply-5"><span class="bold_code">handle_trans_reply(ConnHandle, ProtocolVersion, UserReply, ReplyData, Extra) -&gt; ok</span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
        <div class="REFTYPES">
<span class="bold_code">ConnHandle      = conn_handle()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">ProtocolVersion = protocol_version()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">UserReply       = success() | failure()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">success()       = {ok, result()} </span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">result()        = transaction_result() | segment_result()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">transaction_result() = action_reps()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">segment_result() = {segment_no(), last_segment(), action_reps()}</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">action_reps()   = [action_reply()]</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">failure()       = {error, reason()} | {error, ReplyNo, reason()}</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">reason()  = transaction_reason() | segment_reason() | user_cancel_reason() | send_reason() | other_reason()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">transaction_reason() = error_desc()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">segment_reason() = {segment_no(), last_segment(), error_desc()}</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">other_reason()   =  timeout | {segment_timeout, missing_segments()} | exceeded_recv_pending_limit | term()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">last_segment()  = bool()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">missing_segments() = [segment_no()]</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">user_cancel_reason() = {user_cancel, reason_for_user_cancel()}</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">reason_for_user_cancel() = term()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">send_reason() = send_cancelled_reason() | send_failed_reason()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">send_cancelled_reason() = {send_message_cancelled, reason_for_send_cancel()}</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">reason_for_send_cancel() = term()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">send_failed_reason() = {send_message_failed, reason_for_send_failure()}</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">reason_for_send_failure() = term()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">ReplyData       = reply_data()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">ReplyNo         = integer() &gt; 0</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">reply_data()    = term()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">Extra           = term()</span><br>
</div>
      </div>
<div class="REFBODY"><p>
        <p>Optionally invoked for a transaction reply</p>
        <p>The sender of a transaction request has the option of
          deciding, whether the originating Erlang process should
          synchronously wait (<span class="code">megaco:call/3</span>) for a reply or if the
          message should be sent asynchronously (<span class="code">megaco:cast/3</span>) and
          the processing of the reply should be delegated this
          callback function.</p>
        <p>Note that if the reply is segmented (split into several smaller 
          messages; segments), then some extra info, segment number and 
          an indication if all segments of a reply has been received or
          not, is also included in the <span class="code">UserReply</span>. </p>
        <p>The <span class="code">ReplyData</span> defaults to 
          <span class="code">megaco:lookup(ConnHandle, reply_data)</span>, 
          but may be explicitly overridden by a
          <span class="code">megaco:cast/3</span> option in order to forward info about the
          calling context of the originating process.</p>
        <p>At <span class="code">success()</span>, the <span class="code">UserReply</span> either contains:</p>
        <ul>
          <li>
            <p>A list of 'ActionReply' records possibly containing 
              error indications.</p>
          </li>
          <li>
            <p>A tuple of size three containing: 
              the segment number, 
              the <span class="code">last segment indicator</span> and finally 
              a list of 'ActionReply' records possibly containing error 
              indications. This is of course only possible if the 
              reply was segmented. </p>
          </li>
        </ul>
        <p><span class="code">failure()</span> indicates an local or external error and
          can be one of the following: </p>
        <ul>
          <li>
            <p>A <span class="code">transaction_reason()</span>, indicates that the remote 
              user has replied with an explicit transactionError.</p>
          </li>
          <li>
            <p>A <span class="code">segment_reason()</span>, indicates that the remote user 
              has replied with an explicit transactionError for this 
              segment. This is of course only possible if the reply was 
              segmented. </p>
          </li>
          <li>
            <p>A <span class="code">user_cancel_reason()</span>, indicates that the request 
              has been canceled by the user. <span class="code">reason_for_user_cancel()</span> 
              is the reason given in the call to the 
              <span class="bold_code"><a href="megaco.html#cancel">cancel</a></span>
              function.</p>
          </li>
          <li>
            <p>A <span class="code">send_reason()</span>, indicates that the transport module
              <span class="bold_code"><a href="megaco_transport.html#send_message">send_message</a></span>
              function did not send the message. The reason for this can be: </p>
            <ul>
              <li>
                <p><span class="code">send_cancelled_reason()</span> - the message sending was 
                  deliberately cancelled. <span class="code">reason_for_send_cancel()</span> 
                  is the reason given in the <span class="code">cancel</span> return
                  from the 
                  <span class="bold_code"><a href="megaco_transport.html#send_message">send_message</a></span> 
                  function. </p>
              </li>
              <li>
                <p><span class="code">send_failed_reason()</span> - an error occurred while attempting to 
                  send the message. </p>
              </li>
            </ul>
          </li>
          <li>
            <p>An <span class="code">other_reason()</span>, indicates some other error such 
              as: </p>
            <ul>
              <li>
                <p><span class="code">timeout</span> - the reply failed to arrive before the 
                  request timer expired.</p>
              </li>
              <li>
                <p><span class="code">{segment_timeout, missing_segments()}</span> - 
                  one or more segments
                  was not delivered before the expire of the segment 
                  timer.</p>
              </li>
              <li>
                <p><span class="code">exceeded_recv_pending_limit</span> - the pending
                  limit was exceeded for this request.</p>
              </li>
            </ul>
          </li>
        </ul>

	<p>See <span class="bold_code"><a href="#extra_argument">note</a></span> 
          above about the <span class="code">Extra</span> argument in 
          <span class="code">handle_trans_reply/5</span>. </p>

        <a name="trans_ack"></a>
      </p></div>

    <p><a name="handle_trans_ack-4"><span class="bold_code">handle_trans_ack(ConnHandle, ProtocolVersion, AckStatus, AckData) -&gt; ok</span></a><br><a name="handle_trans_ack-5"><span class="bold_code">handle_trans_ack(ConnHandle, ProtocolVersion, AckStatus, AckData, Extra) -&gt; ok</span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
        <div class="REFTYPES">
<span class="bold_code">ConnHandle      = conn_handle()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">ProtocolVersion = protocol_version()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">AckStatus       = ok | {error, reason()}</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">reason() = user_cancel_reason() | send_reason() | other_reason()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">user_cancel_reason() = {user_cancel, reason_for_user_cancel()}</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">send_reason()   = send_cancelled_reason() | send_failed_reason()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">send_cancelled_reason() = {send_message_cancelled, reason_for_send_cancel()}</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">reason_for_send_cancel() = term()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">send_failed_reason() = {send_message_failed, reason_for_send_failure()}</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">reason_for_send_failure() = term()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">other_reason()   = term()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">AckData          = ack_data()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">ack_data()       = term()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">Extra            = term()</span><br>
</div>
      </div>
<div class="REFBODY"><p>
        <p>Optionally invoked for a transaction acknowledgement</p>
        <p>If this function gets invoked or not, is controlled by the
          reply from the preceding call to handle_trans_request/3.
          The handle_trans_request/3 function may decide to return
          {handle_ack, ack_data()} or {handle_sloppy_ack, ack_data()} 
          meaning that you need an immediate acknowledgement of the 
          reply and that this function should be invoked to handle the 
          acknowledgement.</p>
        <p>The ack_data() argument to this function is the Erlang term
          returned by handle_trans_request/3.</p>
        <p></p>
        <p>If the AckStatus is ok, it is indicating that this is a
          true acknowledgement of the transaction reply.</p>
        <p>If the AckStatus is {error, Reason}, it is an indication that the
          acknowledgement or even the reply (for which this is an 
          acknowledgement) was not delivered, but there is no point in
          waiting any longer for it to arrive. This happens when: </p>
        <dl>
          <dt><strong><span class="code">reply_timer</span></strong></dt>
          <dd>
            <p>The <span class="code">reply_timer</span> eventually times out.</p>
          </dd>
          <dt><strong>reply send failure</strong></dt>
          <dd>
            <p>When megaco fails to send the reply (see
              <span class="bold_code"><a href="#trans_reply">handle_trans_reply</a></span>), 
              for whatever reason. </p>
          </dd>
          <dt><strong>cancel</strong></dt>
          <dd>
            <p>The user has explicitly cancelled the wait 
              (megaco:cancel/2).</p>
          </dd>
        </dl>

	<p>See <span class="bold_code"><a href="#extra_argument">note</a></span> 
          above about the <span class="code">Extra</span> argument in 
          <span class="code">handle_trans_ack/5</span>. </p>

        <a name="unexpected_trans"></a>
        <a name="handle_unexpected_trans"></a>
      </p></div>

    <p><a name="handle_unexpected_trans-3"><span class="bold_code">handle_unexpected_trans(ConnHandle, ProtocolVersion, Trans) -&gt; ok</span></a><br><a name="handle_unexpected_trans-4"><span class="bold_code">handle_unexpected_trans(ConnHandle, ProtocolVersion, Trans, Extra) -&gt; ok</span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
        <div class="REFTYPES">
<span class="bold_code">ConnHandle      = conn_handle()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">ProtocolVersion = protocol_version()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">Trans           = #'TransactionPending'{} | #'TransactionReply'{} | #'TransactionResponseAck'{}</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">Extra           = term()</span><br>
</div>
      </div>
<div class="REFBODY"><p>
        <p>Invoked when a unexpected message is received</p>
        <p>If a reply to a request is not received in time, the
          megaco stack removes all info about the request from
          its tables. If a reply should arrive after this has been
          done the app has no way of knowing where to send this message.
          The message is delivered to the "user" by calling this
          function on the local node (the node which has the link).</p>

	<p>See <span class="bold_code"><a href="#extra_argument">note</a></span> 
          above about the <span class="code">Extra</span> argument in 
          <span class="code">handle_unexpected_trans/4</span>. </p>

        <a name="request_abort"></a>
      </p></div>

    <p><a name="handle_trans_request_abort-4"><span class="bold_code">handle_trans_request_abort(ConnHandle, ProtocolVersion, TransNo, Pid) -&gt; ok</span></a><br><a name="handle_trans_request_abort-5"><span class="bold_code">handle_trans_request_abort(ConnHandle, ProtocolVersion, TransNo, Pid, Extra) -&gt; ok</span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
        <div class="REFTYPES">
<span class="bold_code">ConnHandle      = conn_handle()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">ProtocolVersion = protocol_version()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">TransNo         = integer()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">Pid             = undefined | pid()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">Extra           = term()</span><br>
</div>
      </div>
<div class="REFBODY"><p>
        <p>Invoked when a transaction request has been aborted</p>
        <p>This function is invoked if the originating pending limit
          has been exceeded. This usually means that a request has taken 
          abnormally long time to complete.</p>

	<p>See <span class="bold_code"><a href="#extra_argument">note</a></span> 
          above about the <span class="code">Extra</span> argument in 
          <span class="code">handle_trans_request_abort/5</span>. </p>

        <a name="segment_reply"></a>
      </p></div>

    <p><a name="handle_segment_reply-5"><span class="bold_code">handle_segment_reply(ConnHandle, ProtocolVersion, TransNo, SegNo, SegCompl) -&gt; ok</span></a><br><a name="handle_segment_reply-6"><span class="bold_code">handle_segment_reply(ConnHandle, ProtocolVersion, TransNo, SegNo, SegCompl, Extra) -&gt; ok</span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
        <div class="REFTYPES">
<span class="bold_code">ConnHandle      = conn_handle()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">ProtocolVersion = protocol_version()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">TransNo         = integer()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">SegNo           = integer()</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">SegCompl        = asn1_NOVALUE | 'NULL'</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">Extra           = term()</span><br>
</div>
      </div>
<div class="REFBODY"><p>
        <p>This function is called when a segment reply has been received
          if the 
          <span class="bold_code"><a href="megaco.html#conn_info">segment_reply_ind</a></span> 
          config option has been set to true.</p>
        <p>This is in effect a progress report.</p>

	<p>See <span class="bold_code"><a href="#extra_argument">note</a></span> 
          above about the <span class="code">Extra</span> argument in 
          <span class="code">handle_segment_reply/6</span>. </p>

      </p></div>
  

</div>
<div class="footer">
<hr>
<p>Copyright  2000-2015 Ericsson AB. All Rights Reserved.</p>
</div>
</div>
</div></body>
</html>
