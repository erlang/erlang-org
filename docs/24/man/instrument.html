<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html xmlns:erl="http://erlang.org" xmlns:fn="http://www.w3.org/2005/02/xpath-functions">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="utf-8">
<link rel="stylesheet" href="../otp_doc.css" type="text/css">
<title>Erlang -- instrument</title>
</head>
<body>
<div id="container">
<script id="js" type="text/javascript" language="JavaScript" src="../js/flipmenu/flipmenu.js"></script><script id="js2" type="text/javascript" src="../js/erlresolvelinks.js"></script><script id="js3" type="text/javascript" src="../../../../doc/js/topbar.js"></script><script language="JavaScript" type="text/javascript">
            <!--
              function setscrollpos() {
                var objf = document.getElementById('loadscrollpos');
                if (objf) {
                  document.getElementById("leftnav").firstChild.scrollTop = objf.offsetTop - 10;
                }
              }

              function addEvent(obj, evType, fn){
                if (obj.addEventListener){
                obj.addEventListener(evType, fn, true);
                return true;
              } else if (obj.attachEvent){
                var r = obj.attachEvent("on"+evType, fn);
                return r;
              } else {
                return false;
              }
             }

             addEvent(window, 'load', setscrollpos);

             //-->
</script><div class="topbar">
<div class="topbar-expand "><button onclick="toggleDisplay();"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="Capa_1" viewBox="0 0 54 54" width="24" height="24"><g><path style="fill:#000000;" d="M27,54c-0.552,0-1-0.448-1-1V8c0-0.552,0.448-1,1-1s1,0.448,1,1v45C28,53.552,27.552,54,27,54z"></path><path style="fill:#000000;" d="M11,25c-0.256,0-0.512-0.098-0.707-0.293c-0.391-0.391-0.391-1.023,0-1.414l16-16                                      c0.391-0.391,1.023-0.391,1.414,0s0.391,1.023,0,1.414l-16,16C11.512,24.902,11.256,25,11,25z"></path><path style="fill:#000000;" d="M43,25c-0.256,0-0.512-0.098-0.707-0.293l-16-16c-0.391-0.391-0.391-1.023,0-1.414                                      s1.023-0.391,1.414,0l16,16c0.391,0.391,0.391,1.023,0,1.414C43.512,24.902,43.256,25,43,25z"></path><path style="fill:#000000;" d="M43,2H11c-0.552,0-1-0.448-1-1s0.448-1,1-1h32c0.552,0,1,0.448,1,1S43.552,2,43,2z"></path></g></svg></button></div>
<div class="topbar-title"><h1 id="instrument">instrument</h1></div>
<div class="search-expand "></div>
</div>
<aside class="hide-mobile" id="leftnav"><nav class="leftnav-tube"><div class="erlang-logo-wrapper"><a href="../index.html"><img alt="Erlang Logo" src="../erlang-logo.png" class="erlang-logo"></a></div>
<p class="section-title">Tools</p>
<p class="section-subtitle">Reference Manual</p>
<p class="section-version">Version 3.5.1</p>
<ul class="panel-sections">
<li><a href="../apps/tools/users_guide.html">User's Guide</a></li>
<li><a href="../apps/tools/index.html">Reference Manual</a></li>
<li><a href="../apps/tools/notes.html">Release Notes</a></li>
<li><a href="../apps/tools/tools.pdf">PDF</a></li>
<li><a href="../index.html">Top</a></li>
</ul>
<ul class="expand-collapse-items">
<li><a href="javascript:openAllFlips()">Expand All</a></li>
<li><a href="javascript:closeAllFlips()">Contract All</a></li>
</ul>
<h3 id="toc">Table of Contents</h3>
<ul class="flipMenu">
<li id="no" title="cover " expanded="false">cover<ul>
<li><a href="cover.html">
                  Top of manual page
                </a></li>
    <li title="analyse-0"><a href="cover.html#analyse-0">analyse/0</a></li>
    <li title="analyse-1"><a href="cover.html#analyse-1">analyse/1</a></li>
    <li title="analyse-2"><a href="cover.html#analyse-2">analyse/2</a></li>
    <li title="analyse-3"><a href="cover.html#analyse-3">analyse/3</a></li>
    <li title="analyse_to_file-0"><a href="cover.html#analyse_to_file-0">analyse_to_file/0</a></li>
    <li title="analyse_to_file-1"><a href="cover.html#analyse_to_file-1">analyse_to_file/1</a></li>
    <li title="analyse_to_file-2"><a href="cover.html#analyse_to_file-2">analyse_to_file/2</a></li>
    <li title="async_analyse_to_file-1"><a href="cover.html#async_analyse_to_file-1">async_analyse_to_file/1</a></li>
    <li title="async_analyse_to_file-2"><a href="cover.html#async_analyse_to_file-2">async_analyse_to_file/2</a></li>
    <li title="async_analyse_to_file-3"><a href="cover.html#async_analyse_to_file-3">async_analyse_to_file/3</a></li>
    <li title="compile-1"><a href="cover.html#compile-1">compile/1</a></li>
    <li title="compile-2"><a href="cover.html#compile-2">compile/2</a></li>
    <li title="compile_beam-1"><a href="cover.html#compile_beam-1">compile_beam/1</a></li>
    <li title="compile_beam_directory-0"><a href="cover.html#compile_beam_directory-0">compile_beam_directory/0</a></li>
    <li title="compile_beam_directory-1"><a href="cover.html#compile_beam_directory-1">compile_beam_directory/1</a></li>
    <li title="compile_directory-0"><a href="cover.html#compile_directory-0">compile_directory/0</a></li>
    <li title="compile_directory-1"><a href="cover.html#compile_directory-1">compile_directory/1</a></li>
    <li title="compile_directory-2"><a href="cover.html#compile_directory-2">compile_directory/2</a></li>
    <li title="compile_module-1"><a href="cover.html#compile_module-1">compile_module/1</a></li>
    <li title="compile_module-2"><a href="cover.html#compile_module-2">compile_module/2</a></li>
    <li title="export-1"><a href="cover.html#export-1">export/1</a></li>
    <li title="export-2"><a href="cover.html#export-2">export/2</a></li>
    <li title="flush-1"><a href="cover.html#flush-1">flush/1</a></li>
    <li title="import-1"><a href="cover.html#import-1">import/1</a></li>
    <li title="imported-0"><a href="cover.html#imported-0">imported/0</a></li>
    <li title="imported_modules-0"><a href="cover.html#imported_modules-0">imported_modules/0</a></li>
    <li title="is_compiled-1"><a href="cover.html#is_compiled-1">is_compiled/1</a></li>
    <li title="local_only-0"><a href="cover.html#local_only-0">local_only/0</a></li>
    <li title="modules-0"><a href="cover.html#modules-0">modules/0</a></li>
    <li title="reset-0"><a href="cover.html#reset-0">reset/0</a></li>
    <li title="reset-1"><a href="cover.html#reset-1">reset/1</a></li>
    <li title="start-0"><a href="cover.html#start-0">start/0</a></li>
    <li title="start-1"><a href="cover.html#start-1">start/1</a></li>
    <li title="stop-0"><a href="cover.html#stop-0">stop/0</a></li>
    <li title="stop-1"><a href="cover.html#stop-1">stop/1</a></li>
    <li title="which_nodes-0"><a href="cover.html#which_nodes-0">which_nodes/0</a></li>
    </ul>
</li>
<li id="no" title="cprof " expanded="false">cprof<ul>
<li><a href="cprof.html">
                  Top of manual page
                </a></li>
    <li title="analyse-0"><a href="cprof.html#analyse-0">analyse/0</a></li>
    <li title="analyse-1"><a href="cprof.html#analyse-1">analyse/1</a></li>
    <li title="analyse-2"><a href="cprof.html#analyse-2">analyse/2</a></li>
    <li title="pause-0"><a href="cprof.html#pause-0">pause/0</a></li>
    <li title="pause-1"><a href="cprof.html#pause-1">pause/1</a></li>
    <li title="pause-2"><a href="cprof.html#pause-2">pause/2</a></li>
    <li title="pause-3"><a href="cprof.html#pause-3">pause/3</a></li>
    <li title="restart-0"><a href="cprof.html#restart-0">restart/0</a></li>
    <li title="restart-1"><a href="cprof.html#restart-1">restart/1</a></li>
    <li title="restart-2"><a href="cprof.html#restart-2">restart/2</a></li>
    <li title="restart-3"><a href="cprof.html#restart-3">restart/3</a></li>
    <li title="start-0"><a href="cprof.html#start-0">start/0</a></li>
    <li title="start-1"><a href="cprof.html#start-1">start/1</a></li>
    <li title="start-2"><a href="cprof.html#start-2">start/2</a></li>
    <li title="start-3"><a href="cprof.html#start-3">start/3</a></li>
    <li title="stop-0"><a href="cprof.html#stop-0">stop/0</a></li>
    <li title="stop-1"><a href="cprof.html#stop-1">stop/1</a></li>
    <li title="stop-2"><a href="cprof.html#stop-2">stop/2</a></li>
    <li title="stop-3"><a href="cprof.html#stop-3">stop/3</a></li>
    </ul>
</li>
<li id="no" title="eprof " expanded="false">eprof<ul>
<li><a href="eprof.html">
                  Top of manual page
                </a></li>
    <li title="analyze-0"><a href="eprof.html#analyze-0">analyze/0</a></li>
    <li title="analyze-1"><a href="eprof.html#analyze-1">analyze/1</a></li>
    <li title="analyze-2"><a href="eprof.html#analyze-2">analyze/2</a></li>
    <li title="log-1"><a href="eprof.html#log-1">log/1</a></li>
    <li title="profile-1"><a href="eprof.html#profile-1">profile/1</a></li>
    <li title="profile-2"><a href="eprof.html#profile-2">profile/2</a></li>
    <li title="profile-3"><a href="eprof.html#profile-3">profile/3</a></li>
    <li title="profile-4"><a href="eprof.html#profile-4">profile/4</a></li>
    <li title="profile-5"><a href="eprof.html#profile-5">profile/5</a></li>
    <li title="profile-6"><a href="eprof.html#profile-6">profile/6</a></li>
    <li title="start-0"><a href="eprof.html#start-0">start/0</a></li>
    <li title="start_profiling-1"><a href="eprof.html#start_profiling-1">start_profiling/1</a></li>
    <li title="start_profiling-2"><a href="eprof.html#start_profiling-2">start_profiling/2</a></li>
    <li title="start_profiling-3"><a href="eprof.html#start_profiling-3">start_profiling/3</a></li>
    <li title="stop-0"><a href="eprof.html#stop-0">stop/0</a></li>
    <li title="stop_profiling-0"><a href="eprof.html#stop_profiling-0">stop_profiling/0</a></li>
    </ul>
</li>
<li title="erlang.el"><a href="erlang.el.html">erlang.el</a></li>
<li id="no" title="fprof " expanded="false">fprof<ul>
<li><a href="fprof.html">
                  Top of manual page
                </a></li>
    <li title="analyse-0"><a href="fprof.html#analyse-0">analyse/0</a></li>
    <li title="analyse-2"><a href="fprof.html#analyse-2">analyse/2</a></li>
    <li title="analyse-1"><a href="fprof.html#analyse-1">analyse/1</a></li>
    <li title="apply-2"><a href="fprof.html#apply-2">apply/2</a></li>
    <li title="apply-3"><a href="fprof.html#apply-3">apply/3</a></li>
    <li title="apply-4"><a href="fprof.html#apply-4">apply/4</a></li>
    <li title="profile-0"><a href="fprof.html#profile-0">profile/0</a></li>
    <li title="profile-2"><a href="fprof.html#profile-2">profile/2</a></li>
    <li title="profile-1"><a href="fprof.html#profile-1">profile/1</a></li>
    <li title="start-0"><a href="fprof.html#start-0">start/0</a></li>
    <li title="stop-0"><a href="fprof.html#stop-0">stop/0</a></li>
    <li title="stop-1"><a href="fprof.html#stop-1">stop/1</a></li>
    <li title="trace-2"><a href="fprof.html#trace-2">trace/2</a></li>
    <li title="trace-1"><a href="fprof.html#trace-1">trace/1</a></li>
    </ul>
</li>
<li id="loadscrollpos" title="instrument " expanded="true">instrument<ul>
<li><a href="instrument.html">
                  Top of manual page
                </a></li>
    <li title="allocations-0"><a href="instrument.html#allocations-0">allocations/0</a></li>
    <li title="allocations-1"><a href="instrument.html#allocations-1">allocations/1</a></li>
    <li title="carriers-0"><a href="instrument.html#carriers-0">carriers/0</a></li>
    <li title="carriers-1"><a href="instrument.html#carriers-1">carriers/1</a></li>
    </ul>
</li>
<li id="no" title="lcnt " expanded="false">lcnt<ul>
<li><a href="lcnt.html">
                  Top of manual page
                </a></li>
    <li title="apply-1"><a href="lcnt.html#apply-1">apply/1</a></li>
    <li title="apply-2"><a href="lcnt.html#apply-2">apply/2</a></li>
    <li title="apply-3"><a href="lcnt.html#apply-3">apply/3</a></li>
    <li title="clear-0"><a href="lcnt.html#clear-0">clear/0</a></li>
    <li title="clear-1"><a href="lcnt.html#clear-1">clear/1</a></li>
    <li title="collect-0"><a href="lcnt.html#collect-0">collect/0</a></li>
    <li title="collect-1"><a href="lcnt.html#collect-1">collect/1</a></li>
    <li title="conflicts-0"><a href="lcnt.html#conflicts-0">conflicts/0</a></li>
    <li title="conflicts-1"><a href="lcnt.html#conflicts-1">conflicts/1</a></li>
    <li title="information-0"><a href="lcnt.html#information-0">information/0</a></li>
    <li title="inspect-1"><a href="lcnt.html#inspect-1">inspect/1</a></li>
    <li title="inspect-2"><a href="lcnt.html#inspect-2">inspect/2</a></li>
    <li title="load-1"><a href="lcnt.html#load-1">load/1</a></li>
    <li title="locations-0"><a href="lcnt.html#locations-0">locations/0</a></li>
    <li title="locations-1"><a href="lcnt.html#locations-1">locations/1</a></li>
    <li title="pid-2"><a href="lcnt.html#pid-2">pid/2</a></li>
    <li title="pid-3"><a href="lcnt.html#pid-3">pid/3</a></li>
    <li title="port-1"><a href="lcnt.html#port-1">port/1</a></li>
    <li title="port-2"><a href="lcnt.html#port-2">port/2</a></li>
    <li title="rt_clear-0"><a href="lcnt.html#rt_clear-0">rt_clear/0</a></li>
    <li title="rt_clear-1"><a href="lcnt.html#rt_clear-1">rt_clear/1</a></li>
    <li title="rt_collect-0"><a href="lcnt.html#rt_collect-0">rt_collect/0</a></li>
    <li title="rt_collect-1"><a href="lcnt.html#rt_collect-1">rt_collect/1</a></li>
    <li title="rt_mask-0"><a href="lcnt.html#rt_mask-0">rt_mask/0</a></li>
    <li title="rt_mask-1"><a href="lcnt.html#rt_mask-1">rt_mask/1</a></li>
    <li title="rt_mask-2"><a href="lcnt.html#rt_mask-2">rt_mask/2</a></li>
    <li title="rt_opt-1"><a href="lcnt.html#rt_opt-1">rt_opt/1</a></li>
    <li title="rt_opt-2"><a href="lcnt.html#rt_opt-2">rt_opt/2</a></li>
    <li title="save-1"><a href="lcnt.html#save-1">save/1</a></li>
    <li title="start-0"><a href="lcnt.html#start-0">start/0</a></li>
    <li title="stop-0"><a href="lcnt.html#stop-0">stop/0</a></li>
    <li title="swap_pid_keys-0"><a href="lcnt.html#swap_pid_keys-0">swap_pid_keys/0</a></li>
    </ul>
</li>
<li id="no" title="make " expanded="false">make<ul>
<li><a href="make.html">
                  Top of manual page
                </a></li>
    <li title="all-0"><a href="make.html#all-0">all/0</a></li>
    <li title="all-1"><a href="make.html#all-1">all/1</a></li>
    <li title="files-1"><a href="make.html#files-1">files/1</a></li>
    <li title="files-2"><a href="make.html#files-2">files/2</a></li>
    </ul>
</li>
<li id="no" title="tags " expanded="false">tags<ul>
<li><a href="tags.html">
                  Top of manual page
                </a></li>
    <li title="dir-1"><a href="tags.html#dir-1">dir/1</a></li>
    <li title="dir-2"><a href="tags.html#dir-2">dir/2</a></li>
    <li title="dirs-1"><a href="tags.html#dirs-1">dirs/1</a></li>
    <li title="dirs-2"><a href="tags.html#dirs-2">dirs/2</a></li>
    <li title="file-1"><a href="tags.html#file-1">file/1</a></li>
    <li title="file-2"><a href="tags.html#file-2">file/2</a></li>
    <li title="files-1"><a href="tags.html#files-1">files/1</a></li>
    <li title="files-2"><a href="tags.html#files-2">files/2</a></li>
    <li title="root-0"><a href="tags.html#root-0">root/0</a></li>
    <li title="root-1"><a href="tags.html#root-1">root/1</a></li>
    <li title="subdir-1"><a href="tags.html#subdir-1">subdir/1</a></li>
    <li title="subdir-2"><a href="tags.html#subdir-2">subdir/2</a></li>
    <li title="subdirs-1"><a href="tags.html#subdirs-1">subdirs/1</a></li>
    <li title="subdirs-2"><a href="tags.html#subdirs-2">subdirs/2</a></li>
    </ul>
</li>
<li id="no" title="xref " expanded="false">xref<ul>
<li><a href="xref.html">
                  Top of manual page
                </a></li>
    <li title="add_application-2"><a href="xref.html#add_application-2">add_application/2</a></li>
    <li title="add_application-3"><a href="xref.html#add_application-3">add_application/3</a></li>
    <li title="add_directory-2"><a href="xref.html#add_directory-2">add_directory/2</a></li>
    <li title="add_directory-3"><a href="xref.html#add_directory-3">add_directory/3</a></li>
    <li title="add_module-2"><a href="xref.html#add_module-2">add_module/2</a></li>
    <li title="add_module-3"><a href="xref.html#add_module-3">add_module/3</a></li>
    <li title="add_release-2"><a href="xref.html#add_release-2">add_release/2</a></li>
    <li title="add_release-3"><a href="xref.html#add_release-3">add_release/3</a></li>
    <li title="analyze-2"><a href="xref.html#analyze-2">analyze/2</a></li>
    <li title="analyze-3"><a href="xref.html#analyze-3">analyze/3</a></li>
    <li title="d-1"><a href="xref.html#d-1">d/1</a></li>
    <li title="forget-1"><a href="xref.html#forget-1">forget/1</a></li>
    <li title="forget-2"><a href="xref.html#forget-2">forget/2</a></li>
    <li title="format_error-1"><a href="xref.html#format_error-1">format_error/1</a></li>
    <li title="get_default-1"><a href="xref.html#get_default-1">get_default/1</a></li>
    <li title="get_default-2"><a href="xref.html#get_default-2">get_default/2</a></li>
    <li title="get_library_path-1"><a href="xref.html#get_library_path-1">get_library_path/1</a></li>
    <li title="info-1"><a href="xref.html#info-1">info/1</a></li>
    <li title="info-2"><a href="xref.html#info-2">info/2</a></li>
    <li title="info-3"><a href="xref.html#info-3">info/3</a></li>
    <li title="m-1"><a href="xref.html#m-1">m/1</a></li>
    <li title="q-2"><a href="xref.html#q-2">q/2</a></li>
    <li title="q-3"><a href="xref.html#q-3">q/3</a></li>
    <li title="remove_application-2"><a href="xref.html#remove_application-2">remove_application/2</a></li>
    <li title="remove_module-2"><a href="xref.html#remove_module-2">remove_module/2</a></li>
    <li title="remove_release-2"><a href="xref.html#remove_release-2">remove_release/2</a></li>
    <li title="replace_application-3"><a href="xref.html#replace_application-3">replace_application/3</a></li>
    <li title="replace_application-4"><a href="xref.html#replace_application-4">replace_application/4</a></li>
    <li title="replace_module-3"><a href="xref.html#replace_module-3">replace_module/3</a></li>
    <li title="replace_module-4"><a href="xref.html#replace_module-4">replace_module/4</a></li>
    <li title="set_default-3"><a href="xref.html#set_default-3">set_default/3</a></li>
    <li title="set_default-2"><a href="xref.html#set_default-2">set_default/2</a></li>
    <li title="set_library_path-2"><a href="xref.html#set_library_path-2">set_library_path/2</a></li>
    <li title="set_library_path-3"><a href="xref.html#set_library_path-3">set_library_path/3</a></li>
    <li title="start-1"><a href="xref.html#start-1">start/1</a></li>
    <li title="start-2"><a href="xref.html#start-2">start/2</a></li>
    <li title="stop-1"><a href="xref.html#stop-1">stop/1</a></li>
    <li title="update-1"><a href="xref.html#update-1">update/1</a></li>
    <li title="update-2"><a href="xref.html#update-2">update/2</a></li>
    <li title="variables-1"><a href="xref.html#variables-1">variables/1</a></li>
    <li title="variables-2"><a href="xref.html#variables-2">variables/2</a></li>
    </ul>
</li>
</ul></nav></aside><div id="content">
<div class="innertube"></div>
<!-- refpage --><div class="innertube"><center><h1>instrument</h1></center></div>
  
  <div class="innertube">
<h4 id="module" class="title-link" onMouseOver="document.getElementById('ghlink-module-idm2592').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-module-idm2592').style.visibility = 'hidden';">
<div class="title-name">Module</div>
<div class="title-anchors"><span id="ghlink-module-idm2592" class="ghlink-after"><a href="#module" title="Link to this place!"><span class="paperclip-after"></span></a></span></div>
</h4>
<div class="REFBODY module-body">instrument</div>
</div>
  <div class="innertube">
<h4 id="module-summary" class="title-link" onMouseOver="document.getElementById('ghlink-module-summary-idm2593').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-module-summary-idm2593').style.visibility = 'hidden';">
<div class="title-name">Module Summary</div>
<div class="title-anchors"><span id="ghlink-module-summary-idm2593" class="ghlink-after"><a href="#module-summary" title="Link to this place!"><span class="paperclip-after"></span></a></span></div>
</h4>
<div class="REFBODY module-summary-body">Analysis and Utility Functions for Instrumentation</div>
</div>
  <section class="description"><div class="innertube">
<h4 id="description" class="title-link" onMouseOver="document.getElementById('ghlink-description-idm2594').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-description-idm2594').style.visibility = 'hidden';">
<div class="title-name">Description</div>
<div class="title-anchors"><span id="ghlink-description-idm2594" class="ghlink-after"><a href="#description" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/lib/tools/doc/src/instrument.xml#L37" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h4>
<div class="REFBODY description-body"><p>
    <p>The module <span class="code">instrument</span> contains support for studying the resource
      usage in an Erlang runtime system. Currently, only the allocation of memory can
      be studied.</p>
    <div class="note">
<div class="label">Note</div>
<div class="content"><p>
      <p>Note that this whole module is experimental, and the representations
        used as well as the functionality is likely to change in the future.</p>
    </p></div>
</div>
  </p></div>
</div></section>
  <div class="innertube">
<h4 id="data-types" class="title-link" onMouseOver="document.getElementById('ghlink-data-types-idm2599').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-data-types-idm2599').style.visibility = 'hidden';">
<div class="title-name">Data Types</div>
<div class="title-anchors"><span id="ghlink-data-types-idm2599" class="ghlink-after"><a href="#data-types" title="Link to this place!"><span class="paperclip-after"></span></a></span></div>
</h4>
    <article class="data-types-body"><h4 id="type-block_histogram" class="title-link data-type-name" onMouseOver="document.getElementById('ghlink-type-block_histogram').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-type-block_histogram').style.visibility = 'hidden';">
<div class="title-anchors"><span id="ghlink-type-block_histogram" class="ghlink-before"><a href="#type-block_histogram" title="Link to this place!"><span class="paperclip-before"></span></a><a href="https://github.com/erlang/otp/edit/maint/lib/tools/doc/src/instrument.xml#L47" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-before"></span></a></span></div>
<div class="title-name">
      <span class="bold_code bc-4"><a name="type-block_histogram">block_histogram()</a> = tuple()</span><br>
</div>
</h4>
<div class="data-type-desc"><div class="REFBODY rb-7">
        <p>A histogram of block sizes where each interval's upper bound is 
          twice as high as the one before it.</p>
        <p>The upper bound of the first interval is provided by the function
           that returned the histogram, and the last interval has no upper
           bound.</p>
      </div></div></article>
    <article class="data-types-body"><h4 id="type-allocation_summary" class="title-link data-type-name" onMouseOver="document.getElementById('ghlink-type-allocation_summary').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-type-allocation_summary').style.visibility = 'hidden';">
<div class="title-anchors"><span id="ghlink-type-allocation_summary" class="ghlink-before"><a href="#type-allocation_summary" title="Link to this place!"><span class="paperclip-before"></span></a><a href="https://github.com/erlang/otp/edit/maint/lib/tools/doc/src/instrument.xml#L57" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-before"></span></a></span></div>
<div class="title-name">
      <span class="bold_code bc-4"><a name="type-allocation_summary">allocation_summary()</a> = <br>    {HistogramStart :: integer() &gt;= 0,<br>     UnscannedSize :: integer() &gt;= 0,<br>     Allocations ::<br>         #{Origin :: atom() =&gt;<br>               #{Type :: atom() =&gt; <span class="bold_code bc-17"><a href="#type-block_histogram">block_histogram()</a></span>}}}</span><br>
</div>
</h4>
<div class="data-type-desc"><div class="REFBODY rb-7">
        <p>A summary of allocated block sizes (including their headers) grouped
          by their <span class="code">Origin</span> and <span class="code">Type</span>.</p>
        <p><span class="code">Origin</span> is generally which NIF or driver that
          allocated the blocks, or 'system' if it could not be determined.</p>
        <p><span class="code">Type</span> is the allocation category that the blocks
          belong to, e.g. <span class="code">db_term</span>, <span class="code">message</span> or <span class="code">binary</span>.</p>
        <p>If one or more carriers could not be scanned in full without harming
          the responsiveness of the system, <span class="code">UnscannedSize</span>
          is the number of bytes that had to be skipped.</p>
       </div></div></article>
    <article class="data-types-body"><h4 id="type-carrier_info_list" class="title-link data-type-name" onMouseOver="document.getElementById('ghlink-type-carrier_info_list').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-type-carrier_info_list').style.visibility = 'hidden';">
<div class="title-anchors"><span id="ghlink-type-carrier_info_list" class="ghlink-before"><a href="#type-carrier_info_list" title="Link to this place!"><span class="paperclip-before"></span></a><a href="https://github.com/erlang/otp/edit/maint/lib/tools/doc/src/instrument.xml#L71" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-before"></span></a></span></div>
<div class="title-name">
      <span class="bold_code bc-4"><a name="type-carrier_info_list">carrier_info_list()</a> = <br>    {HistogramStart :: integer() &gt;= 0,<br>     Carriers ::<br>         [{AllocatorType :: atom(),<br>           InPool :: boolean(),<br>           TotalSize :: integer() &gt;= 0,<br>           UnscannedSize :: integer() &gt;= 0,<br>           Allocations ::<br>               {Type :: atom(),<br>                Count :: integer() &gt;= 0,<br>                Size :: integer() &gt;= 0},<br>           FreeBlocks :: <span class="bold_code bc-17"><a href="#type-block_histogram">block_histogram()</a></span>}]}</span><br>
</div>
</h4>
<div class="data-type-desc"><div class="REFBODY rb-7">
        <p><span class="code">AllocatorType</span> is the type of the allocator that
          employs this carrier.</p>
        <p><span class="code">InPool</span> is whether the carrier is in the
          migration pool.</p>
        <p><span class="code">TotalSize</span> is the total size of the carrier,
          including its header.</p>
        <p><span class="code">Allocations</span> is a summary of the allocated blocks
          in the carrier.</p>
        <p><span class="code">FreeBlocks</span> is a histogram of the free block
          sizes in the carrier.</p>
        <p>If the carrier could not be scanned in full without harming the
          responsiveness of the system, <span class="code">UnscannedSize</span> is
          the number of bytes that had to be skipped.</p>
       </div></div></article>
  </div>
  <div class="innertube"><h4 id="exports" class="title-link" onMouseOver="document.getElementById('ghlink-exports-idm2646').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-exports-idm2646').style.visibility = 'hidden';">
<div class="title-name">Exports</div>
<div class="title-anchors"><span id="ghlink-exports-idm2646" class="ghlink-after"><a href="#exports" title="Link to this place!"><span class="paperclip-after"></span></a></span></div>
</h4></div>
<div class="exports-body">
<article class="func"><h4 id="allocations-0" class="bold_code title-link func-head" onMouseOver="document.getElementById('ghlink-allocations-0-idp106').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-allocations-0-idp106').style.visibility = 'hidden';">
<div class="title-anchors"><span id="ghlink-allocations-0-idp106" class="ghlink-before"><a href="#allocations-0" title="Link to this place!"><span class="paperclip-before"></span></a><a href="https://github.com/erlang/otp/edit/maint/lib/tools/doc/src/instrument.xml#L92" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-before"></span></a></span></div>
<span class="title-name">allocations() -&gt; {ok, Result} | {error, Reason}</span><div class="title-since"><span class="since">OTP 21.0</span></div>
</h4>
<div class="REFBODY fun-types">
<h3 id="types" class="func-types-title">Types</h3>
<div class="REFTYPES rt-1"><span class="bold_code bc-2">Result = <span class="bold_code bc-17"><a href="#type-allocation_summary">allocation_summary()</a></span></span></div>
<div class="REFTYPES rt-1"><span class="bold_code bc-2">Reason = not_enabled</span></div>
</div>
<div class="exports-tube"><div class="REFBODY rb-7">
        <p>Shorthand for
          <span class="bold_code bc-17"><a href="#allocations-1"><span class="code">allocations(#{})</span>.</a></span></p>
      </div></div></article><article class="func"><h4 id="allocations-1" class="bold_code title-link func-head" onMouseOver="document.getElementById('ghlink-allocations-1-idp107').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-allocations-1-idp107').style.visibility = 'hidden';">
<div class="title-anchors"><span id="ghlink-allocations-1-idp107" class="ghlink-before"><a href="#allocations-1" title="Link to this place!"><span class="paperclip-before"></span></a><a href="https://github.com/erlang/otp/edit/maint/lib/tools/doc/src/instrument.xml#L101" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-before"></span></a></span></div>
<span class="title-name">allocations(Options) -&gt; {ok, Result} | {error, Reason}</span><div class="title-since"><span class="since">OTP 21.0</span></div>
</h4>
<div class="REFBODY fun-types">
<h3 id="types" class="func-types-title">Types</h3>
<div class="REFTYPES rt-1"><span class="bold_code bc-2">Result = <span class="bold_code bc-17"><a href="#type-allocation_summary">allocation_summary()</a></span></span></div>
<div class="REFTYPES rt-1"><span class="bold_code bc-2">Reason = not_enabled</span></div>
<div class="REFTYPES rt-1"><span class="bold_code bc-2">Options = <br>    #{scheduler_ids =&gt; [integer() &gt;= 0],<br>      allocator_types =&gt; [atom()],<br>      histogram_start =&gt; integer() &gt;= 1,<br>      histogram_width =&gt; integer() &gt;= 1}</span></div>
</div>
<div class="exports-tube"><div class="REFBODY rb-7">
        <p>Returns a summary of all tagged allocations in the system,
          optionally filtered by allocator type and scheduler id.</p>
        <p>Only binaries and allocations made by NIFs and drivers are tagged by
          default, but this can be configured an a per-allocator basis with the
          <span class="bold_code bc-13"><a href="erts_alloc.html#M_atags"><span class="code">+M&lt;S&gt;atags</span>
          </a></span> emulator option.</p>
        <p>If the specified allocator types are not enabled, the call will fail
          with <span class="code">{error, not_enabled}</span>.</p>
        <p>The following options can be used:</p>
        <dl>
          <dt><strong><span class="code">allocator_types</span></strong></dt>
          <dd>
            <p>The allocator types that will be searched. Note that blocks can
              move freely between allocator types, so restricting the search to
              certain allocators may return unexpected types (e.g. process
              heaps when searching binary_alloc), or hide blocks that were
              migrated out.</p>
            <p>Defaults to all <span class="code">alloc_util</span> allocators.</p>
          </dd>
          <dt><strong><span class="code">scheduler_ids</span></strong></dt>
          <dd>
            <p>The scheduler ids whose allocator instances will be searched. A
              scheduler id of 0 will refer to the global instance that is not
              tied to any particular scheduler. Defaults to all schedulers and
              the global instance.</p>
          </dd>
          <dt><strong><span class="code">histogram_start</span></strong></dt>
          <dd>
            <p>The upper bound of the first interval in the allocated block
              size histograms. Defaults to 128.</p>
          </dd>
          <dt><strong><span class="code">histogram_width</span></strong></dt>
          <dd>
            <p>The number of intervals in the allocated block size histograms.
              Defaults to 18.</p>
          </dd>
        </dl>
        <p><strong>Example:</strong></p>
        <div class="example example-none"><pre>&gt; instrument:allocations(#{ histogram_start =&gt; 128, histogram_width =&gt; 15 }).
{ok,{128,0,
     #{udp_inet =&gt;
           #{driver_event_state =&gt; {0,0,0,0,0,0,0,0,0,1,0,0,0,0,0}},
       system =&gt;
           #{heap =&gt; {0,0,0,0,20,4,2,2,2,3,0,1,0,0,1},
             db_term =&gt; {271,3,1,52,80,1,0,0,0,0,0,0,0,0,0},
             code =&gt; {0,0,0,5,3,6,11,22,19,20,10,2,1,0,0},
             binary =&gt; {18,0,0,0,7,0,0,1,0,0,0,0,0,0,0},
             message =&gt; {0,40,78,2,2,0,0,0,0,0,0,0,0,0,0},
             ... }
       spawn_forker =&gt;
           #{driver_select_data_state =&gt;
                 {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0}},
       ram_file_drv =&gt; #{drv_binary =&gt; {0,0,0,0,0,0,1,0,0,0,0,0,0,0,0}},
       prim_file =&gt;
           #{process_specific_data =&gt; {2,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
             nif_trap_export_entry =&gt; {0,4,0,0,0,0,0,0,0,0,0,0,0,0,0},
             monitor_extended =&gt; {0,1,0,0,0,0,0,0,0,0,0,0,0,0,0},
             drv_binary =&gt; {0,0,0,0,0,0,1,0,3,5,0,0,0,1,0},
             binary =&gt; {0,4,0,0,0,0,0,0,0,0,0,0,0,0,0}},
       prim_buffer =&gt;
           #{nif_internal =&gt; {0,4,0,0,0,0,0,0,0,0,0,0,0,0,0},
             binary =&gt; {0,4,0,0,0,0,0,0,0,0,0,0,0,0,0}}}}}</pre></div>
      </div></div></article><article class="func"><h4 id="carriers-0" class="bold_code title-link func-head" onMouseOver="document.getElementById('ghlink-carriers-0-idp108').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-carriers-0-idp108').style.visibility = 'hidden';">
<div class="title-anchors"><span id="ghlink-carriers-0-idp108" class="ghlink-before"><a href="#carriers-0" title="Link to this place!"><span class="paperclip-before"></span></a><a href="https://github.com/erlang/otp/edit/maint/lib/tools/doc/src/instrument.xml#L173" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-before"></span></a></span></div>
<span class="title-name">carriers() -&gt; {ok, Result} | {error, Reason}</span><div class="title-since"><span class="since">OTP 21.0</span></div>
</h4>
<div class="REFBODY fun-types">
<h3 id="types" class="func-types-title">Types</h3>
<div class="REFTYPES rt-1"><span class="bold_code bc-2">Result = <span class="bold_code bc-17"><a href="#type-carrier_info_list">carrier_info_list()</a></span></span></div>
<div class="REFTYPES rt-1"><span class="bold_code bc-2">Reason = not_enabled</span></div>
</div>
<div class="exports-tube"><div class="REFBODY rb-7">
        <p>Shorthand for
          <span class="bold_code bc-17"><a href="#carriers-1"><span class="code">carriers(#{})</span>.</a></span></p>
      </div></div></article><article class="func"><h4 id="carriers-1" class="bold_code title-link func-head" onMouseOver="document.getElementById('ghlink-carriers-1-idp109').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-carriers-1-idp109').style.visibility = 'hidden';">
<div class="title-anchors"><span id="ghlink-carriers-1-idp109" class="ghlink-before"><a href="#carriers-1" title="Link to this place!"><span class="paperclip-before"></span></a><a href="https://github.com/erlang/otp/edit/maint/lib/tools/doc/src/instrument.xml#L182" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-before"></span></a></span></div>
<span class="title-name">carriers(Options) -&gt; {ok, Result} | {error, Reason}</span><div class="title-since"><span class="since">OTP 21.0</span></div>
</h4>
<div class="REFBODY fun-types">
<h3 id="types" class="func-types-title">Types</h3>
<div class="REFTYPES rt-1"><span class="bold_code bc-2">Result = <span class="bold_code bc-17"><a href="#type-carrier_info_list">carrier_info_list()</a></span></span></div>
<div class="REFTYPES rt-1"><span class="bold_code bc-2">Reason = not_enabled</span></div>
<div class="REFTYPES rt-1"><span class="bold_code bc-2">Options = <br>    #{scheduler_ids =&gt; [integer() &gt;= 0],<br>      allocator_types =&gt; [atom()],<br>      histogram_start =&gt; integer() &gt;= 1,<br>      histogram_width =&gt; integer() &gt;= 1}</span></div>
</div>
<div class="exports-tube"><div class="REFBODY rb-7">
        <p>Returns a summary of all carriers in the system, optionally filtered
          by allocator type and scheduler id.</p>
        <p>If the specified allocator types are not enabled, the call will fail
          with <span class="code">{error, not_enabled}</span>.</p>
        <p>The following options can be used:</p>
        <dl>
          <dt><strong><span class="code">allocator_types</span></strong></dt>
          <dd>
            <p>The allocator types that will be searched. Defaults to all
              <span class="code">alloc_util</span> allocators.</p>
          </dd>
          <dt><strong><span class="code">scheduler_ids</span></strong></dt>
          <dd>
            <p>The scheduler ids whose allocator instances will be searched. A
              scheduler id of 0 will refer to the global instance that is not
              tied to any particular scheduler. Defaults to all schedulers and
              the global instance.</p>
          </dd>
          <dt><strong><span class="code">histogram_start</span></strong></dt>
          <dd>
            <p>The upper bound of the first interval in the free block size
              histograms. Defaults to 512.</p>
          </dd>
          <dt><strong><span class="code">histogram_width</span></strong></dt>
          <dd>
            <p>The number of intervals in the free block size histograms.
              Defaults to 14.</p>
          </dd>
        </dl>
        <p><strong>Example:</strong></p>
        <div class="example example-none"><pre>&gt; instrument:carriers(#{ histogram_start =&gt; 512, histogram_width =&gt; 8 }).
{ok,{512,
     [{ll_alloc,1048576,0,1048344,71,false,{0,0,0,0,0,0,0,0}},
      {binary_alloc,1048576,0,324640,13,false,{3,0,0,1,0,0,0,2}},
      {eheap_alloc,2097152,0,1037200,45,false,{2,1,1,3,4,3,2,2}},
      {fix_alloc,32768,0,29544,82,false,{22,0,0,0,0,0,0,0}},
      {...}|...]}}</pre></div>
      </div></div></article>
</div>

  <section class="innertube"><h3 id="see-also" class="title-link" onMouseOver="document.getElementById('ghlink-see-also-idm2723').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-see-also-idm2723').style.visibility = 'hidden';">
<div class="title-name">See Also</div>
<div class="title-anchors"><span id="ghlink-see-also-idm2723" class="ghlink-after"><a href="#see-also" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/lib/tools/doc/src/instrument.xml#L231" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
<div class="REFBODY rb-3">
    
    <p><span class="bold_code bc-18"><a href="erts_alloc.html">erts_alloc(3)</a></span>,
      <span class="bold_code bc-18"><a href="erl.html">erl(1)</a></span></p>
  </div></section>
<div class="footer">
<hr>
<p>Copyright © 1997-2021 Ericsson AB. All Rights Reserved.</p>
</div>
</div>
</div>
<script type="text/javascript">window.__otpTopDocDir = '../js/';</script><script type="text/javascript" src="../js/highlight.js"></script>
</body>
</html>
