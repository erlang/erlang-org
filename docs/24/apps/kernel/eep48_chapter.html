<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html xmlns:erl="http://erlang.org" xmlns:fn="http://www.w3.org/2005/02/xpath-functions">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="utf-8">
<link rel="stylesheet" href="../../otp_doc.css" type="text/css">
<title>Erlang -- EEP-48: Documentation storage and format</title>
</head>
<body>
<div id="container">
<script id="js" type="text/javascript" language="JavaScript" src="../../js/flipmenu/flipmenu.js"></script><script id="js2" type="text/javascript" src="../../js/erlresolvelinks.js"></script><script id="js3" type="text/javascript" src="../../../../doc/js/topbar.js"></script><script language="JavaScript" type="text/javascript">
            <!--
              function setscrollpos() {
                var objf = document.getElementById('loadscrollpos');
                if (objf) {
                  document.getElementById("leftnav").firstChild.scrollTop = objf.offsetTop - 10;
                }
              }

              function addEvent(obj, evType, fn){
                if (obj.addEventListener){
                obj.addEventListener(evType, fn, true);
                return true;
              } else if (obj.attachEvent){
                var r = obj.attachEvent("on"+evType, fn);
                return r;
              } else {
                return false;
              }
             }

             addEvent(window, 'load', setscrollpos);

             //-->
</script><div class="topbar">
<div class="topbar-expand "><button onclick="toggleDisplay();"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="Capa_1" viewBox="0 0 54 54" width="24" height="24"><g><path style="fill:#000000;" d="M27,54c-0.552,0-1-0.448-1-1V8c0-0.552,0.448-1,1-1s1,0.448,1,1v45C28,53.552,27.552,54,27,54z"></path><path style="fill:#000000;" d="M11,25c-0.256,0-0.512-0.098-0.707-0.293c-0.391-0.391-0.391-1.023,0-1.414l16-16                                      c0.391-0.391,1.023-0.391,1.414,0s0.391,1.023,0,1.414l-16,16C11.512,24.902,11.256,25,11,25z"></path><path style="fill:#000000;" d="M43,25c-0.256,0-0.512-0.098-0.707-0.293l-16-16c-0.391-0.391-0.391-1.023,0-1.414                                      s1.023-0.391,1.414,0l16,16c0.391,0.391,0.391,1.023,0,1.414C43.512,24.902,43.256,25,43,25z"></path><path style="fill:#000000;" d="M43,2H11c-0.552,0-1-0.448-1-1s0.448-1,1-1h32c0.552,0,1,0.448,1,1S43.552,2,43,2z"></path></g></svg></button></div>
<div class="topbar-title"><h1 id="EEP-48: Documentation storage and format">5 
                EEP-48: Documentation storage and format</h1></div>
<div class="search-expand "></div>
</div>
<aside class="hide-mobile" id="leftnav"><nav class="leftnav-tube"><div class="erlang-logo-wrapper"><a href="../../index.html"><img alt="Erlang Logo" src="../../erlang-logo.png" class="erlang-logo"></a></div>
<p class="section-title">Kernel</p>
<p class="section-subtitle">User's Guide</p>
<p class="section-version">Version 8.1.2</p>
<ul class="panel-sections">
<li><a href="users_guide.html">User's Guide</a></li>
<li><a href="index.html">Reference Manual</a></li>
<li><a href="notes.html">Release Notes</a></li>
<li><a href="kernel.pdf">PDF</a></li>
<li><a href="../../index.html">Top</a></li>
</ul>
<ul class="expand-collapse-items">
<li><a href="javascript:openAllFlips()">Expand All</a></li>
<li><a href="javascript:closeAllFlips()">Contract All</a></li>
</ul>
<h3 id="chapters">Chapters</h3>
<ul class="flipMenu" imagePath="../../js/flipmenu">
<li id="no" title="Introduction" expanded="false">Introduction<ul>
<li><a href="introduction.html">
              Top of chapter
            </a></li>
<li title="Scope"><a href="introduction.html#scope">Scope</a></li>
<li title="Prerequisites"><a href="introduction.html#prerequisites">Prerequisites</a></li>
</ul>
</li>
<li id="no" title="Socket Usage" expanded="false">Socket Usage<ul>
<li><a href="socket_usage.html">
              Top of chapter
            </a></li>
<li title="Introduction"><a href="socket_usage.html#introduction">Introduction</a></li>
<li title="Socket Registry"><a href="socket_usage.html#socket-registry">Socket Registry</a></li>
<li title="Socket Options"><a href="socket_usage.html#socket-options">Socket Options</a></li>
</ul>
</li>
<li id="no" title="Logging" expanded="false">Logging<ul>
<li><a href="logger_chapter.html">
              Top of chapter
            </a></li>
<li title="Overview"><a href="logger_chapter.html#overview">Overview</a></li>
<li title="Logger API"><a href="logger_chapter.html#logger-api">Logger API</a></li>
<li title="Filters"><a href="logger_chapter.html#filters">Filters</a></li>
<li title="Handlers"><a href="logger_chapter.html#handlers">Handlers</a></li>
<li title="Formatters"><a href="logger_chapter.html#formatters">Formatters</a></li>
<li title="Configuration"><a href="logger_chapter.html#configuration">Configuration</a></li>
<li title="Backwards Compatibility with error_logger"><a href="logger_chapter.html#backwards-compatibility-with-error_logger">Backwards Compatibility with error_logger</a></li>
<li title="Error Handling"><a href="logger_chapter.html#error-handling">Error Handling</a></li>
<li title="Example: Add a handler to log info events to file"><a href="logger_chapter.html#example--add-a-handler-to-log-info-events-to-file">Example: Add a handler to log info events to file</a></li>
<li title="Example: Implement a handler"><a href="logger_chapter.html#example--implement-a-handler">Example: Implement a handler</a></li>
<li title="Protecting the Handler from Overload"><a href="logger_chapter.html#protecting-the-handler-from-overload">Protecting the Handler from Overload</a></li>
<li title="Logger Proxy"><a href="logger_chapter.html#logger-proxy">Logger Proxy</a></li>
<li title="See Also"><a href="logger_chapter.html#see-also">See Also</a></li>
</ul>
</li>
<li id="no" title="Logging Cookbook" expanded="false">Logging Cookbook<ul>
<li><a href="logger_cookbook.html">
              Top of chapter
            </a></li>
<li title="Get Logger information"><a href="logger_cookbook.html#get-logger-information">Get Logger information</a></li>
<li title="Configure the Logger"><a href="logger_cookbook.html#configure-the-logger">Configure the Logger</a></li>
<li title="Configure Logger formatter"><a href="logger_cookbook.html#configure-logger-formatter">Configure Logger formatter</a></li>
<li title="Configuring handlers"><a href="logger_cookbook.html#configuring-handlers">Configuring handlers</a></li>
<li title="Logging"><a href="logger_cookbook.html#logging">Logging</a></li>
<li title="Filters"><a href="logger_cookbook.html#filters">Filters</a></li>
</ul>
</li>
<li id="loadscrollpos" title="EEP-48: Documentation storage and format" expanded="true">EEP-48: Documentation storage and format<ul>
<li><a href="eep48_chapter.html">
              Top of chapter
            </a></li>
<li title='the "Docs" storage'><a href="eep48_chapter.html#the--docs--storage">the "Docs" storage</a></li>
<li title='the "Docs" format'><a href="eep48_chapter.html#the--docs--format">the "Docs" format</a></li>
<li title="See Also"><a href="eep48_chapter.html#see-also">See Also</a></li>
</ul>
</li>
</ul></nav></aside><div id="content">
<div class="innertube">
<h1 id="EEP-48: Documentation storage and format">5 EEP-48: Documentation storage and format</h1>
  

  <p>This User's Guide describes the documentation storage format initially described in
    <span class="bold_code bc-20"><a href="https://www.erlang.org/erlang-enhancement-proposals/eep-0048.html">EEP-48</a></span>.
    By standardizing how API documentation is stored, it will be possible to write tools that
    work across languages.</p>

  <p>To fetch the EEP-48 documentation for a module you can use
    <span class="bold_code bc-15"><a href="../../man/code.html#get_doc-1"><span class="code">code:get_doc/1</span></a></span>.</p>

  <p>To render the EEP-48 documentation for an Erlang module you can use
    <span class="bold_code bc-13"><a href="../../man/shell_docs.html#render-2"><span class="code">shell_docs:render/2</span></a></span>.</p>

  <h3 id="the--docs--storage" class="title-link" onMouseOver="document.getElementById('ghlink-the--docs--storage-idm2072').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-the--docs--storage-idm2072').style.visibility = 'hidden';">
<div class="title-name">5.1 
        the "Docs" storage</div>
<div class="title-anchors"><span id="ghlink-the--docs--storage-idm2072" class="ghlink-after"><a href="#the--docs--storage" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/lib/kernel/doc/src/eep48_chapter.xml#L44" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    <p>To look for documentation for a module name example, a tool should:</p>

    <p>Look for <span class="code">example.beam</span> in the code path, parse the BEAM file and
      retrieve the <span class="code">Docs</span> chunk. If the chunk is not available, it should look
      for "example.beam" in the code path and find the <span class="code">doc/chunks/example.chunk</span>
      file in the application that defines the <span class="code">example</span> module. If a .chunk file is not
      available, then documentation is not available.</p>

    <p>The choice of using a chunk or the filesystem is completely up to the language or library.
      In both cases, the documentation can be added or removed at any moment by stripping
      the <span class="code">Docs</span> chunk or by removing the doc/chunks directory.</p>

    <p>For example, languages like Elixir and LFE attach the <span class="code">Docs</span> chunk at
      compilation time, which can be controlled via a compiler flag. On the other hand,
      projects like OTP itself will likely generate the doc/chunks entries on a separate
      command, completely unrelated from code compilation.</p>
  

  <h3 id="the--docs--format" class="title-link" onMouseOver="document.getElementById('ghlink-the--docs--format-idm2084').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-the--docs--format-idm2084').style.visibility = 'hidden';">
<div class="title-name">5.2 
        the "Docs" format</div>
<div class="title-anchors"><span id="ghlink-the--docs--format-idm2084" class="ghlink-after"><a href="#the--docs--format" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/lib/kernel/doc/src/eep48_chapter.xml#L64" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    <p>In both storages, the documentation is written in the exactly same format:
      an Erlang term serialized to binary via <span class="bold_code bc-13"><a href="../../man/erlang.html#term_to_binary-1">
      <span class="code">term_to_binary/1</span></a></span>. The term may be optionally compressed when serialized.
      It must follow the type specification below:</p>

    <div class="example example-none"><pre>{docs_v1,
 Anno :: erl_anno:anno(),
 BeamLanguage :: atom(),
 Format :: binary(),
 ModuleDoc :: #{DocLanguage := DocValue} | none | hidden,
 Metadata :: map(),
 Docs ::
   [{{Kind, Name, Arity},
     Anno :: erl_anno:anno(),
     Signature :: [binary()],
     Doc :: #{DocLanguage := DocValue} | none | hidden,
     Metadata :: map()
    }]} when DocLanguage :: binary(),
             DocValue :: binary() | term()</pre></div>
    <p>where in the root tuple we have:</p>
    <dl>
      <dt><strong>Anno</strong></dt>
      <dd>annotation (line, column, file) of the definition itself (see
        <span class="bold_code bc-18"><a href="../../man/erl_anno.html"><span class="code">erl_anno(3)</span></a></span>)</dd>

      <dt><strong>BeamLanguage</strong></dt>
      <dd>an atom representing the language, for example: erlang, elixir, lfe, alpaca, etc</dd>

      <dt><strong>Format</strong></dt>
      <dd>the mime type of the documentation, such as &lt;&lt;"text/markdown"&gt;&gt; or
        &lt;&lt;"application/erlang+html"&gt;&gt;. For details of the format used by Erlang
        see the <span class="bold_code bc-18"><a href="../../apps/erl_docgen/doc_storage.html"><span class="code">EEP-48 Chapter</span></a></span>
        in Erl_Docgen's User's Guide.</dd>

      <dt><strong>ModuleDoc</strong></dt>
      <dd>a map with the documentation language as key, such as <span class="code">&lt;&lt;"en"&gt;&gt;</span> or
        <span class="code">&lt;&lt;"pt_BR"&gt;&gt;</span>, and the documentation as a binary value. It may be the
        atom <span class="code">none</span> in case there is no documentation or the atom <span class="code">hidden</span> if documentation
        has been explicitly disabled for this entry.</dd>

      <dt><strong>Metadata</strong></dt>
      <dd>a map of atom keys with any term as value. This can be used to add annotations like the
        <span class="code">authors</span> of a module, <span class="code">deprecated</span>, or anything else a language or documentation
        tool may find relevant.</dd>

      <dt><strong>Docs</strong></dt>
      <dd>a list of documentation for other entities (such as functions and types)
        in the module.</dd>
    </dl>

    <p>For each entry in Docs, we have:</p>

    <dl>
      <dt><strong>{Kind, Name, Arity}</strong></dt>
      <dd>the kind, name and arity identifying the function, callback, type, etc.
        The official entities are: <span class="code">function</span>, <span class="code">type</span> and <span class="code">callback</span>.
        Other languages will add their own. For instance, Elixir and LFE may add macro.</dd>

      <dt><strong>Anno</strong></dt>
      <dd>annotation (line, column, file) of the module documentation or of the definition itself
        (see <span class="bold_code bc-18"><a href="../../man/erl_anno.html"><span class="code">erl_anno(3)</span></a></span>).</dd>

      <dt><strong>Signature</strong></dt>
      <dd>the signature of the entity. It is is a list of binaries. Each entry represents a
        binary in the signature that can be joined with a whitespace or a newline. For example,
        <span class="code">[&lt;&lt;"binary_to_atom(Binary, Encoding)"&gt;&gt;,
        &lt;&lt;"when is_binary(Binary)"&gt;&gt;]</span> may be rendered as
        a single line or two lines. It exists exclusively for exhibition purposes.</dd>

      <dt><strong>Doc</strong></dt>
      <dd>a map with the documentation language as key, such as &lt;&lt;"en"&gt;&gt; or
        &lt;&lt;"pt_BR"&gt;&gt;, and the documentation as a value. The documentation may
        either be a binary or any Erlang term, both described by <span class="code">Format</span>. If it is an
        Erlang term, then the Format must be &lt;&lt;"application/erlang+SUFFIX",&gt;&gt;
        such as &lt;&lt;"application/erlang+html"&gt;&gt; when the documentation is an Erlang
        representation of an HTML document. The Doc may also be atom <span class="code">none</span> in case there is
        no documentation or the atom <span class="code">hidden</span> if documentation has been explicitly
        disabled for this entry.</dd>

      <dt><strong>Metadata</strong></dt>
      <dd>a map of atom keys with any term as value.</dd>
    </dl>

    <p>This shared format is the heart of the EEP as it is what effectively
      allows cross-language collaboration.</p>

    <p>The Metadata field exists to allow languages, tools and libraries to add
      custom information to each entry. This EEP documents the following metadata keys:</p>

    <dl>
      <dt><strong>authors := [binary()]</strong></dt>
      <dd>a list of authors as binaries.</dd>

      <dt><strong>cross_references := [module() | {module(), {Kind, Name, Arity}}]</strong></dt>
      <dd>a list of modules or module entries that can be used as cross references
        when generating documentation.</dd>

      <dt><strong>deprecated := binary()</strong></dt>
      <dd>when present, it means the current entry is deprecated with a binary
        that represents the reason for deprecation and a recommendation to replace
        the deprecated code.</dd>

      <dt><strong>since := binary()</strong></dt>
      <dd>a binary representing the version such entry was added, such
        as &lt;&lt;"1.3.0"&gt;&gt; or &lt;&lt;"20.0"&gt;&gt;.</dd>

      <dt><strong>edit_url := binary()</strong></dt>
      <dd>a binary representing a URL to change to change the documentation itself.</dd>
    </dl>

    <p>Any key may be added to Metadata at any time. Keys that are frequently
      used by the community can be standardized in future versions.</p>
  

  <h3 id="see-also" class="title-link" onMouseOver="document.getElementById('ghlink-see-also-idm2149').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-see-also-idm2149').style.visibility = 'hidden';">
<div class="title-name">5.3 
        See Also</div>
<div class="title-anchors"><span id="ghlink-see-also-idm2149" class="ghlink-after"><a href="#see-also" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/lib/kernel/doc/src/eep48_chapter.xml#L182" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    <p>
      <span class="bold_code bc-18"><a href="../../man/erl_anno.html"><span class="code">erl_anno(3)</span></a></span>,
      <span class="bold_code bc-18"><a href="../../man/shell_docs.html"><span class="code">shell_docs(3)</span></a></span>,
      <span class="bold_code bc-18"><a href="../../apps/erl_docgen/doc_storage.html"><span class="code">EEP-48 Chapter in Erl_Docgen's User's Guide</span></a></span>,
      <span class="bold_code bc-15"><a href="../../man/code.html#get_doc-1"><span class="code">code:get_doc/1</span></a></span>
    </p>
  
</div>
<div class="footer">
<hr>
<p>Copyright © 1997-2021 Ericsson AB. All Rights Reserved.</p>
</div>
</div>
</div>
<script type="text/javascript">window.__otpTopDocDir = '../../js/';</script><script type="text/javascript" src="../../js/highlight.js"></script>
</body>
</html>
