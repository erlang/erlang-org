<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html xmlns:erl="http://erlang.org" xmlns:fn="http://www.w3.org/2005/02/xpath-functions">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" href="../otp_doc.css" type="text/css">
<title>Erlang -- ssh</title>
</head>
<body>
<div id="container">
<script id="js" type="text/javascript" language="JavaScript" src="../js/flipmenu/flipmenu.js"></script><script id="js2" type="text/javascript" src="../js/erlresolvelinks.js"></script><script language="JavaScript" type="text/javascript">
            <!--
              function getWinHeight() {
                var myHeight = 0;
                if( typeof( window.innerHeight ) == 'number' ) {
                  //Non-IE
                  myHeight = window.innerHeight;
                } else if( document.documentElement && ( document.documentElement.clientWidth ||
                                                         document.documentElement.clientHeight ) ) {
                  //IE 6+ in 'standards compliant mode'
                  myHeight = document.documentElement.clientHeight;
                } else if( document.body && ( document.body.clientWidth || document.body.clientHeight ) ) {
                  //IE 4 compatible
                  myHeight = document.body.clientHeight;
                }
                return myHeight;
              }

              function setscrollpos() {
                var objf=document.getElementById('loadscrollpos');
                 document.getElementById("leftnav").scrollTop = objf.offsetTop - getWinHeight()/2;
              }

              function addEvent(obj, evType, fn){
                if (obj.addEventListener){
                obj.addEventListener(evType, fn, true);
                return true;
              } else if (obj.attachEvent){
                var r = obj.attachEvent("on"+evType, fn);
                return r;
              } else {
                return false;
              }
             }

             addEvent(window, 'load', setscrollpos);

             //--></script><div id="leftnav"><div class="innertube">
<div class="erlang-logo-wrapper"><a href="../index.html"><img alt="Erlang Logo" src="../erlang-logo.png" class="erlang-logo"></a></div>
<p class="section-title">SSH</p>
<p class="section-subtitle">Reference Manual</p>
<p class="section-version">Version 4.6.6</p>
<ul class="panel-sections">
<li><a href="../apps/ssh/users_guide.html">User's Guide</a></li>
<li><a href="../apps/ssh/index.html">Reference Manual</a></li>
<li><a href="../apps/ssh/release_notes.html">Release Notes</a></li>
<li><a href="../apps/ssh/ssh.pdf">PDF</a></li>
<li><a href="../index.html">Top</a></li>
</ul>
<ul class="expand-collapse-items">
<li><a href="javascript:openAllFlips()">Expand All</a></li>
<li><a href="javascript:closeAllFlips()">Contract All</a></li>
</ul>
<h3>Table of Contents</h3>
<ul class="flipMenu">
<li title="SSH (App)"><a href="SSH_app.html">SSH (App)
                </a></li>
<li id="loadscrollpos" title="ssh " expanded="true">ssh<ul>
<li><a href="ssh.html">
                  Top of manual page
                </a></li>
    <li title="close-1"><a href="ssh.html#close-1">close/1</a></li>
    <li title="connect-3"><a href="ssh.html#connect-3">connect/3</a></li>
    <li title="connect-4"><a href="ssh.html#connect-4">connect/4</a></li>
    <li title="connect-2"><a href="ssh.html#connect-2">connect/2</a></li>
    <li title="connect-3"><a href="ssh.html#connect-3">connect/3</a></li>
    <li title="connection_info-2"><a href="ssh.html#connection_info-2">connection_info/2</a></li>
    <li title="daemon-1"><a href="ssh.html#daemon-1">daemon/1</a></li>
    <li title="daemon-2"><a href="ssh.html#daemon-2">daemon/2</a></li>
    <li title="daemon-3"><a href="ssh.html#daemon-3">daemon/3</a></li>
    <li title="daemon-1"><a href="ssh.html#daemon-1">daemon/1</a></li>
    <li title="daemon-2"><a href="ssh.html#daemon-2">daemon/2</a></li>
    <li title="daemon_info-1"><a href="ssh.html#daemon_info-1">daemon_info/1</a></li>
    <li title="default_algorithms-0"><a href="ssh.html#default_algorithms-0">default_algorithms/0</a></li>
    <li title="shell-1"><a href="ssh.html#shell-1">shell/1</a></li>
    <li title="shell-2"><a href="ssh.html#shell-2">shell/2</a></li>
    <li title="shell-3"><a href="ssh.html#shell-3">shell/3</a></li>
    <li title="shell-1"><a href="ssh.html#shell-1">shell/1</a></li>
    <li title="start-0"><a href="ssh.html#start-0">start/0</a></li>
    <li title="start-1"><a href="ssh.html#start-1">start/1</a></li>
    <li title="stop-0"><a href="ssh.html#stop-0">stop/0</a></li>
    <li title="stop_daemon-1"><a href="ssh.html#stop_daemon-1">stop_daemon/1</a></li>
    <li title="stop_daemon-2"><a href="ssh.html#stop_daemon-2">stop_daemon/2</a></li>
    <li title="stop_listener-1"><a href="ssh.html#stop_listener-1">stop_listener/1</a></li>
    <li title="stop_listener-2"><a href="ssh.html#stop_listener-2">stop_listener/2</a></li>
    </ul>
</li>
<li id="no" title="ssh_channel " expanded="false">ssh_channel<ul>
<li><a href="ssh_channel.html">
                  Top of manual page
                </a></li>
    <li title="call-2"><a href="ssh_channel.html#call-2">call/2</a></li>
    <li title="call-3"><a href="ssh_channel.html#call-3">call/3</a></li>
    <li title="cast-2"><a href="ssh_channel.html#cast-2">cast/2</a></li>
    <li title="enter_loop-1"><a href="ssh_channel.html#enter_loop-1">enter_loop/1</a></li>
    <li title="init-1"><a href="ssh_channel.html#init-1">init/1</a></li>
    <li title="reply-2"><a href="ssh_channel.html#reply-2">reply/2</a></li>
    <li title="start-4"><a href="ssh_channel.html#start-4">start/4</a></li>
    <li title="start_link-4"><a href="ssh_channel.html#start_link-4">start_link/4</a></li>
    <li title="Module:code_change-3"><a href="ssh_channel.html#Module:code_change-3">Module:code_change/3</a></li>
    <li title="Module:handle_call-3"><a href="ssh_channel.html#Module:handle_call-3">Module:handle_call/3</a></li>
    <li title="Module:handle_cast-2"><a href="ssh_channel.html#Module:handle_cast-2">Module:handle_cast/2</a></li>
    <li title="Module:handle_msg-2"><a href="ssh_channel.html#Module:handle_msg-2">Module:handle_msg/2</a></li>
    <li title="Module:handle_ssh_msg-2"><a href="ssh_channel.html#Module:handle_ssh_msg-2">Module:handle_ssh_msg/2</a></li>
    <li title="Module:init-1"><a href="ssh_channel.html#Module:init-1">Module:init/1</a></li>
    <li title="Module:terminate-2"><a href="ssh_channel.html#Module:terminate-2">Module:terminate/2</a></li>
    </ul>
</li>
<li id="no" title="ssh_connection " expanded="false">ssh_connection<ul>
<li><a href="ssh_connection.html">
                  Top of manual page
                </a></li>
    <li title="adjust_window-3"><a href="ssh_connection.html#adjust_window-3">adjust_window/3</a></li>
    <li title="close-2"><a href="ssh_connection.html#close-2">close/2</a></li>
    <li title="exec-4"><a href="ssh_connection.html#exec-4">exec/4</a></li>
    <li title="exit_status-3"><a href="ssh_connection.html#exit_status-3">exit_status/3</a></li>
    <li title="ptty_alloc-3"><a href="ssh_connection.html#ptty_alloc-3">ptty_alloc/3</a></li>
    <li title="ptty_alloc-4"><a href="ssh_connection.html#ptty_alloc-4">ptty_alloc/4</a></li>
    <li title="reply_request-4"><a href="ssh_connection.html#reply_request-4">reply_request/4</a></li>
    <li title="send-3"><a href="ssh_connection.html#send-3">send/3</a></li>
    <li title="send-4"><a href="ssh_connection.html#send-4">send/4</a></li>
    <li title="send-4"><a href="ssh_connection.html#send-4">send/4</a></li>
    <li title="send-5"><a href="ssh_connection.html#send-5">send/5</a></li>
    <li title="send_eof-2"><a href="ssh_connection.html#send_eof-2">send_eof/2</a></li>
    <li title="session_channel-2"><a href="ssh_connection.html#session_channel-2">session_channel/2</a></li>
    <li title="session_channel-4"><a href="ssh_connection.html#session_channel-4">session_channel/4</a></li>
    <li title="setenv-5"><a href="ssh_connection.html#setenv-5">setenv/5</a></li>
    <li title="shell-2"><a href="ssh_connection.html#shell-2">shell/2</a></li>
    <li title="subsystem-4"><a href="ssh_connection.html#subsystem-4">subsystem/4</a></li>
    </ul>
</li>
<li id="no" title="ssh_client_key_api " expanded="false">ssh_client_key_api<ul>
<li><a href="ssh_client_key_api.html">
                  Top of manual page
                </a></li>
    <li title="Module:add_host_key-3"><a href="ssh_client_key_api.html#Module:add_host_key-3">Module:add_host_key/3</a></li>
    <li title="Module:is_host_key-4"><a href="ssh_client_key_api.html#Module:is_host_key-4">Module:is_host_key/4</a></li>
    <li title="Module:user_key-2"><a href="ssh_client_key_api.html#Module:user_key-2">Module:user_key/2</a></li>
    </ul>
</li>
<li id="no" title="ssh_server_key_api " expanded="false">ssh_server_key_api<ul>
<li><a href="ssh_server_key_api.html">
                  Top of manual page
                </a></li>
    <li title="Module:host_key-2"><a href="ssh_server_key_api.html#Module:host_key-2">Module:host_key/2</a></li>
    <li title="Module:is_auth_key-3"><a href="ssh_server_key_api.html#Module:is_auth_key-3">Module:is_auth_key/3</a></li>
    </ul>
</li>
<li id="no" title="ssh_sftp " expanded="false">ssh_sftp<ul>
<li><a href="ssh_sftp.html">
                  Top of manual page
                </a></li>
    <li title="apread-4"><a href="ssh_sftp.html#apread-4">apread/4</a></li>
    <li title="apwrite-4"><a href="ssh_sftp.html#apwrite-4">apwrite/4</a></li>
    <li title="aread-3"><a href="ssh_sftp.html#aread-3">aread/3</a></li>
    <li title="awrite-3"><a href="ssh_sftp.html#awrite-3">awrite/3</a></li>
    <li title="close-2"><a href="ssh_sftp.html#close-2">close/2</a></li>
    <li title="close-3"><a href="ssh_sftp.html#close-3">close/3</a></li>
    <li title="del_dir-2"><a href="ssh_sftp.html#del_dir-2">del_dir/2</a></li>
    <li title="del_dir-3"><a href="ssh_sftp.html#del_dir-3">del_dir/3</a></li>
    <li title="delete-2"><a href="ssh_sftp.html#delete-2">delete/2</a></li>
    <li title="delete-3"><a href="ssh_sftp.html#delete-3">delete/3</a></li>
    <li title="list_dir-2"><a href="ssh_sftp.html#list_dir-2">list_dir/2</a></li>
    <li title="list_dir-3"><a href="ssh_sftp.html#list_dir-3">list_dir/3</a></li>
    <li title="make_dir-2"><a href="ssh_sftp.html#make_dir-2">make_dir/2</a></li>
    <li title="make_dir-3"><a href="ssh_sftp.html#make_dir-3">make_dir/3</a></li>
    <li title="make_symlink-3"><a href="ssh_sftp.html#make_symlink-3">make_symlink/3</a></li>
    <li title="make_symlink-4"><a href="ssh_sftp.html#make_symlink-4">make_symlink/4</a></li>
    <li title="open-3"><a href="ssh_sftp.html#open-3">open/3</a></li>
    <li title="open-4"><a href="ssh_sftp.html#open-4">open/4</a></li>
    <li title="open_tar-3"><a href="ssh_sftp.html#open_tar-3">open_tar/3</a></li>
    <li title="open_tar-4"><a href="ssh_sftp.html#open_tar-4">open_tar/4</a></li>
    <li title="opendir-2"><a href="ssh_sftp.html#opendir-2">opendir/2</a></li>
    <li title="opendir-3"><a href="ssh_sftp.html#opendir-3">opendir/3</a></li>
    <li title="position-3"><a href="ssh_sftp.html#position-3">position/3</a></li>
    <li title="position-4"><a href="ssh_sftp.html#position-4">position/4</a></li>
    <li title="pread-4"><a href="ssh_sftp.html#pread-4">pread/4</a></li>
    <li title="pread-5"><a href="ssh_sftp.html#pread-5">pread/5</a></li>
    <li title="pwrite-4"><a href="ssh_sftp.html#pwrite-4">pwrite/4</a></li>
    <li title="pwrite-5"><a href="ssh_sftp.html#pwrite-5">pwrite/5</a></li>
    <li title="read-3"><a href="ssh_sftp.html#read-3">read/3</a></li>
    <li title="read-4"><a href="ssh_sftp.html#read-4">read/4</a></li>
    <li title="read_file-2"><a href="ssh_sftp.html#read_file-2">read_file/2</a></li>
    <li title="read_file-3"><a href="ssh_sftp.html#read_file-3">read_file/3</a></li>
    <li title="read_file_info-2"><a href="ssh_sftp.html#read_file_info-2">read_file_info/2</a></li>
    <li title="read_file_info-3"><a href="ssh_sftp.html#read_file_info-3">read_file_info/3</a></li>
    <li title="read_link-2"><a href="ssh_sftp.html#read_link-2">read_link/2</a></li>
    <li title="read_link-3"><a href="ssh_sftp.html#read_link-3">read_link/3</a></li>
    <li title="read_link_info-2"><a href="ssh_sftp.html#read_link_info-2">read_link_info/2</a></li>
    <li title="read_link_info-3"><a href="ssh_sftp.html#read_link_info-3">read_link_info/3</a></li>
    <li title="rename-3"><a href="ssh_sftp.html#rename-3">rename/3</a></li>
    <li title="rename-4"><a href="ssh_sftp.html#rename-4">rename/4</a></li>
    <li title="start_channel-1"><a href="ssh_sftp.html#start_channel-1">start_channel/1</a></li>
    <li title="start_channel-2"><a href="ssh_sftp.html#start_channel-2">start_channel/2</a></li>
    <li title="start_channel-2"><a href="ssh_sftp.html#start_channel-2">start_channel/2</a></li>
    <li title="start_channel-3"><a href="ssh_sftp.html#start_channel-3">start_channel/3</a></li>
    <li title="start_channel-1"><a href="ssh_sftp.html#start_channel-1">start_channel/1</a></li>
    <li title="start_channel-2"><a href="ssh_sftp.html#start_channel-2">start_channel/2</a></li>
    <li title="stop_channel-1"><a href="ssh_sftp.html#stop_channel-1">stop_channel/1</a></li>
    <li title="write-3"><a href="ssh_sftp.html#write-3">write/3</a></li>
    <li title="write-4"><a href="ssh_sftp.html#write-4">write/4</a></li>
    <li title="write_file-3"><a href="ssh_sftp.html#write_file-3">write_file/3</a></li>
    <li title="write_file-4"><a href="ssh_sftp.html#write_file-4">write_file/4</a></li>
    <li title="write_file_info-3"><a href="ssh_sftp.html#write_file_info-3">write_file_info/3</a></li>
    <li title="write_file_info-4"><a href="ssh_sftp.html#write_file_info-4">write_file_info/4</a></li>
    </ul>
</li>
<li id="no" title="ssh_sftpd " expanded="false">ssh_sftpd<ul>
<li><a href="ssh_sftpd.html">
                  Top of manual page
                </a></li>
    <li title="subsystem_spec-1"><a href="ssh_sftpd.html#subsystem_spec-1">subsystem_spec/1</a></li>
    </ul>
</li>
</ul>
</div></div>
<div id="content">
<div class="innertube">
<!-- refpage --><center><h1>ssh</h1></center>
  
  <h3><a name="module" href="#module">Module</a></h3>
<div class="REFBODY module-body">ssh</div>
  <h3><a name="module-summary" href="#module-summary">Module Summary</a></h3>
<div class="REFBODY module-summary-body">Main API of the ssh application</div>
  <h3><a name="description" href="#description">Description</a></h3>
<div class="REFBODY description-body"><p>
    <p>Interface module for the <span class="code">ssh</span> application.</p>
    <p>See <span class="bold_code bc-13"><a href="SSH_app.html#supported">ssh(6)</a></span> for details of supported version,
    algorithms and unicode support.</p>
  </p></div>

  <h3><a name="id70957">OPTIONS</a></h3>
<div class="REFBODY rb-3">
    
    <p>The exact behaviour of some functions can be adjusted with the use of options which are documented together
    with the functions. Generally could each option be used at most one time in each function call. If given two or more
    times, the effect is not predictable unless explicitly documented.</p>
    <p>The options are of different kinds:</p>
    <dl>
      <dt><strong>Limits</strong></dt>
      <dd><p>which alters limits in the system, for example number of simultaneous login attempts.</p></dd>

      <dt><strong>Timeouts</strong></dt>
      <dd><p>which give some defined behaviour if too long time elapses before a given event or action,
      for example time to wait for an answer.</p></dd>

      <dt><strong>Callbacks</strong></dt>
      <dd><p>which gives the caller of the function the possibility to execute own code on some events,
      for example calling an own logging function or to perform an own login function</p></dd>

      <dt><strong>Behaviour</strong></dt>
      <dd><p>which changes the systems behaviour.</p></dd>
    </dl>
  </div>

  <h3><a name="id71594">DATA TYPES</a></h3>
<div class="REFBODY rb-3">
    
    <p>Type definitions that are used more than once in
    this module, or abstractions to indicate the intended use of the data
    type, or both:</p>
    <dl>
      <dt><strong><span class="code">boolean() =</span></strong></dt>
      <dd><p><span class="code">true | false</span></p></dd>
      <dt><strong><span class="code">string() =</span></strong></dt>
      <dd><p><span class="code">[byte()]</span></p></dd>
      <dt><strong><span class="code">ssh_daemon_ref() =</span></strong></dt>
      <dd><p>opaque() -
      as returned by <span class="code">ssh:daemon/[1,2,3]</span></p></dd>
      <dt><strong><span class="code">ssh_connection_ref() =</span></strong></dt>
      <dd><p>opaque() - as returned by <span class="code">ssh:connect/3</span></p></dd>
      <dt><strong><span class="code">ip_address() =</span></strong></dt>
      <dd><p><span class="code">inet::ip_address</span></p></dd>
      <dt><strong><span class="code">subsystem_spec() =</span></strong></dt>
      <dd><p><span class="code">{subsystem_name(),
      {channel_callback(), channel_init_args()}}</span></p></dd>
      <dt><strong><span class="code">subsystem_name() =</span></strong></dt>
      <dd><p><span class="code">string()</span></p></dd>
      <dt><strong><span class="code">channel_callback() =</span></strong></dt>
      <dd><p><span class="code">atom()</span> - Name of the Erlang module
      implementing the subsystem using the <span class="code">ssh_channel</span> behavior, see
      <span class="bold_code bc-19"><a href="ssh_channel.html">ssh_channel(3)</a></span></p></dd>
      <dt><strong><span class="code">key_cb() =</span></strong></dt>
      <dd>
        <p><span class="code">atom() | {atom(), list()}</span></p>
        <p><span class="code">atom()</span> - Name of the erlang module implementing the behaviours
        <span class="bold_code bc-19"><a href="ssh_client_key_api.html">ssh_client_key_api</a></span> or
        <span class="bold_code bc-19"><a href="ssh_client_key_api.html">ssh_client_key_api</a></span> as the
        case maybe.</p>
        <p><span class="code">list()</span> - List of options that can be passed to the callback module.</p>
      </dd>
      <dt><strong><span class="code">channel_init_args() =</span></strong></dt>
      <dd><p><span class="code">list()</span></p></dd>

      <dt><strong><span class="code">algs_list() =</span></strong></dt>
      <dd><p><span class="code">list( alg_entry() )</span></p></dd>

      <dt><strong><span class="code">alg_entry() =</span></strong></dt>
      <dd><p><span class="code">{kex, simple_algs()} | {public_key, simple_algs()} | {cipher, double_algs()} | {mac, double_algs()} | {compression, double_algs()}</span></p></dd>

      <dt><strong><span class="code">simple_algs() =</span></strong></dt>
      <dd><p><span class="code">list( atom() )</span></p></dd>
      
      <dt><strong><span class="code">double_algs() =</span></strong></dt>
      <dd><p><span class="code">[{client2serverlist,simple_algs()},{server2client,simple_algs()}] | simple_algs()</span></p></dd>

      <dt><strong><span class="code">modify_algs_list() =</span></strong></dt>
      <dd><p><span class="code">list( {append,algs_list()} | {prepend,algs_list()} | {rm,algs_list()} )</span></p></dd>
     </dl>
</div>

 <h3><a name="exports" href="#exports">Exports</a></h3>
<div class="exports-body">
   
   <p><a name="close-1"></a><span class="bold_code fun-type">close(ConnectionRef) -&gt; ok </span><br></p>
<div class="REFBODY rb-5">
<h3 class="func-types-title">Types</h3>
	<div class="REFTYPES rt-4">
<span class="bold_code fun-param-type">ConnectionRef = ssh_connection_ref()</span><br>
</div>
      </div>
<div class="REFBODY rb-7"><p><p>Closes an SSH connection.</p>
      </p></div>
    
    <p><a name="connect-3"></a><span class="bold_code fun-type">connect(Host, Port, Options) -&gt; </span><br><a name="connect-4"></a><span class="bold_code fun-type">connect(Host, Port, Options, Timeout) -&gt; </span><br><a name="connect-2"></a><span class="bold_code fun-type">connect(TcpSocket, Options) -&gt; </span><br><a name="connect-3"></a><span class="bold_code fun-type">connect(TcpSocket, Options, Timeout) -&gt; 
      {ok, ssh_connection_ref()} | {error, Reason}</span><br></p>
<div class="REFBODY rb-5">
<h3 class="func-types-title">Types</h3>
        <div class="REFTYPES rt-4">
<span class="bold_code fun-param-type">Host = string()</span><br>
</div>
	<div class="REFTYPES rt-4">
<span class="bold_code fun-param-type">Port = integer()</span><br>
</div>
	<div class="REFBODY rb-6">
<span class="code">22</span> is default, the assigned well-known port
	number for SSH.</div>
	<div class="REFTYPES rt-4">
<span class="bold_code fun-param-type">Options = [{Option, Value}]</span><br>
</div>
	<div class="REFTYPES rt-4">
<span class="bold_code fun-param-type">Timeout = infinity | integer()</span><br>
</div>
	<div class="REFBODY rb-6">Negotiation time-out in milli-seconds. The default value is <span class="code">infinity</span>.
	For connection time-out, use option <span class="code">{connect_timeout, timeout()}</span>.</div>
	<div class="REFTYPES rt-4">
<span class="bold_code fun-param-type">TcpSocket = port()</span><br>
</div>
	<div class="REFBODY rb-6">The socket is supposed to be from <span class="bold_code bc-13"><a href="gen_tcp.html#connect-3">gen_tcp:connect</a></span> or <span class="bold_code bc-13"><a href="gen_tcp.html#accept-1">gen_tcp:accept</a></span> with option <span class="code">{active,false}</span>
</div>
      </div>
<div class="REFBODY rb-7"><p>
	<p>Connects to an SSH server. No channel is started. This is done
	by calling
	<span class="bold_code bc-15"><a href="ssh_connection.html#session_channel-2">ssh_connection:session_channel/[2, 4]</a></span>.</p>
	<p>Options:</p>
	<dl>
	  <dt><strong><span class="code">{inet, inet | inet6}</span></strong></dt>
	  <dd>
	  <p>IP version to use.</p>
	  </dd>
          <dt><strong><a name="opt_user_dir"></a><span class="code">{user_dir, string()}</span></strong></dt>
	  <dd>
	    <p>Sets the user directory, that is, the directory containing
	    <span class="code">ssh</span> configuration files for the user, such as
	    <span class="code">known_hosts</span>, <span class="code">id_rsa,
	    id_dsa</span>, and
	    <span class="code">authorized_key</span>. Defaults to the
	    directory normally referred to as
	    <span class="code">~/.ssh</span>.</p>
	  </dd>
	  <dt><strong><span class="code">{dsa_pass_phrase, string()}</span></strong></dt>
	  <dd>
	    <p>If the user DSA key is protected by a passphrase, it can be
	    supplied with this option.
	    </p>
	  </dd>
	  <dt><strong><span class="code">{rsa_pass_phrase, string()}</span></strong></dt>
	  <dd>
	    <p>If the user RSA key is protected by a passphrase, it can be
	    supplied with this option.
	    </p>
	  </dd>
	  <dt><strong><span class="code">{ecdsa_pass_phrase, string()}</span></strong></dt>
	  <dd>
	    <p>If the user ECDSA key is protected by a passphrase, it can be
	    supplied with this option.
	    </p>
	  </dd>
          <dt><strong>
            <span class="code">{silently_accept_hosts, boolean()}</span> <br>
            <span class="code">{silently_accept_hosts, CallbackFun}</span> <br>
            <span class="code">{silently_accept_hosts, {HashAlgoSpec, CallbackFun} }</span> <br>
            <br>
	    <span class="code">HashAlgoSpec = crypto:digest_type() | [ crypto:digest_type() ] </span><br>
	    <span class="code">CallbackFun = fun(PeerName, FingerPrint) -&gt; boolean()</span><br>
	    <span class="code">PeerName = string()</span><br>
	    <span class="code">FingerPrint = string() | [ string() ] </span>
	  </strong></dt>
	  <dd>
            <p>This option guides the <span class="code">connect</span> function how to act when the connected server presents a Host 
            Key that the client has not seen before. The default is to ask the user with a question on stdio of whether to
            accept or reject the new Host Key.
            See also the option <span class="bold_code bc-17"><a href="#opt_user_dir"><span class="code">user_dir</span></a></span>
            for the path to the file <span class="code">known_hosts</span> where previously accepted Host Keys are recorded.
            </p>
            <p>The option can be given in three different forms as seen above:</p>
	    <ul>
	      <li>The value is a <span class="code">boolean()</span>.  The value <span class="code">true</span> will make the client accept any unknown
              Host Key without any user interaction.  The value <span class="code">false</span> keeps the default behaviour of asking the
              the user on stdio.
              </li>
              <li>A <span class="code">CallbackFun</span> will be called and the boolean return value <span class="code">true</span> will make the client
              accept the Host Key. A return value of <span class="code">false</span> will make the client to reject the Host Key and therefore
              also the connection will be closed. The arguments to the fun are:
              <ul>
	        <li>
<span class="code">PeerName</span> - a string with the name or address of the remote host.</li>
                <li>
<span class="code">FingerPrint</span> - the fingerprint of the Host Key as 
                <span class="bold_code bc-13"><a href="public_key.html#ssh_hostkey_fingerprint-1">public_key:ssh_hostkey_fingerprint/1</a></span>
                calculates it.
                </li>
              </ul>
              </li>
              <li>A tuple <span class="code">{HashAlgoSpec, CallbackFun}</span>. The <span class="code">HashAlgoSpec</span> specifies which hash algorithm
                shall be used to calculate the fingerprint used in the call of the <span class="code">CallbackFun</span>. The <span class="code">HashALgoSpec</span>
                is either an atom or a list of atoms as the first argument in
                <span class="bold_code bc-13"><a href="public_key.html#ssh_hostkey_fingerprint-2">public_key:ssh_hostkey_fingerprint/2</a></span>.
                If it is a list of hash algorithm names, the <span class="code">FingerPrint</span> argument in the <span class="code">CallbackFun</span> will be 
                a list of fingerprints in the same order as the corresponding name in the <span class="code">HashAlgoSpec</span> list.
              </li>
            </ul>
	  </dd>

	  <dt><strong><span class="code">{save_accepted_host, boolean()}</span></strong></dt>
	  <dd>
	    <p>If <span class="code">true</span>, the client saves an accepted host key to avoid the
	    accept question the next time the same host is connected. If the option
	    <span class="code">key_cb</span> is not present, the key is saved in the file "known_hosts".
	    </p>
	    <p>If <span class="code">false</span>, the key is not saved and the key will still be unknown
	    at the next access of the same host.
	    </p>
	  </dd>

	  <dt><strong><span class="code">{user_interaction, boolean()}</span></strong></dt>
	  <dd>
	    <p>If <span class="code">false</span>, disables the client to connect to the server
	    if any user interaction is needed, such as accepting
	    the server to be added to the <span class="code">known_hosts</span> file, or
	    supplying a password. Defaults to <span class="code">true</span>.
	    Even if user interaction is allowed it can be
	    suppressed by other options, such as <span class="code">silently_accept_hosts</span>
	    and <span class="code">password</span>. However, those options are not always desirable
	    to use from a security point of view.</p>
	  </dd>

	  <dt><strong><span class="code">{disconnectfun, fun(Reason:term()) -&gt; _}</span></strong></dt>
	  <dd>
	    <p>Provides a fun to implement your own logging when a server disconnects the client.</p>
	  </dd>

	  <dt><strong><span class="code">{unexpectedfun, fun(Message:term(), Peer) -&gt; report | skip }</span></strong></dt>
	  <dd>
	    <p>Provides a fun to implement your own logging or other action when an unexpected message arrives.
	    If the fun returns <span class="code">report</span> the usual info report is issued but if <span class="code">skip</span> is returned no
	    report is generated.</p>
	    <p><span class="code">Peer</span> is in the format of <span class="code">{Host,Port}</span>.</p>
	  </dd>

	  <dt><strong><span class="code">{pref_public_key_algs, list()}</span></strong></dt>
	  <dd>
            <p>List of user (client) public key algorithms to try to use.</p>
	    <p>The default value is the <span class="code">public_key</span> entry in 
	    <span class="bold_code bc-17"><a href="#default_algorithms-0">ssh:default_algorithms/0</a></span>.
	    </p>
	    <p>If there is no public key of a specified type available, the corresponding entry is ignored.
	    Note that the available set is dependent on the underlying cryptolib and current user's public keys.
	    </p>
	  </dd>

	  <dt><strong><a name="option_preferred_algorithms"></a>
	  <span class="code">{preferred_algorithms, algs_list()}</span></strong></dt>
	  <dd>
            <p>List of algorithms to use in the algorithm negotiation. The default <span class="code">algs_list()</span> can
	    be obtained from <span class="bold_code bc-17"><a href="#default_algorithms-0">default_algorithms/0</a></span>.
	    </p>
	    <p>If an alg_entry() is missing in the algs_list(), the default value is used for that entry.</p>
	    <p>Here is an example of this option:</p>
	<div class="example"><pre>{preferred_algorithms, 
 [{public_key,['ssh-rsa','ssh-dss']},
  {cipher,[{client2server,['aes128-ctr']},
           {server2client,['aes128-cbc','3des-cbc']}]},
  {mac,['hmac-sha2-256','hmac-sha1']},
  {compression,[none,zlib]}
  ]
}</pre></div>
        <p>The example specifies different algorithms in the two directions (client2server and server2client),
	for cipher but specifies the same algorithms for mac and compression in both directions.
	The kex (key exchange) is implicit but public_key is set explicitly.</p>

	<p>For background and more examples see the <span class="bold_code bc-15"><a href="../apps/ssh/configure_algos.html#introduction">User's Guide</a></span>.</p>

        <div class="warning">
<div class="label">Warning</div>
<div class="content"><p>
	  <p>Changing the values can make a connection less secure. Do not change unless you
	  know exactly what you are doing. If you do not understand the values then you
	  are not supposed to change them.</p>
	</p></div>
</div>
	  </dd>

	  <dt><strong><a name="option_modify_algorithms"></a>
	  <span class="code">{modify_algorithms, modify_algs_list()}</span></strong></dt>
	  <dd>
	    <p>Modifies the list of algorithms to use in the algorithm negotiation. The modifications are
	    applied after the option <span class="code">preferred_algorithms</span> (if existing) is applied.</p>
	    <p>The algoritm for modifications works like this:</p>
	    <ul>
	      <li>
		<p>Input is the <span class="code">modify_algs_list()</span> and a set of algorithms <span class="code">A</span>
		obtained from the <span class="code">preferred_algorithms</span> option if existing, or else from the
		<span class="bold_code bc-15"><a href="ssh.html#default_algorithms-0">ssh:default_algorithms/0</a></span>.
		</p>
	      </li>
	      <li>
		<p>The head of the <span class="code">modify_algs_list()</span> modifies <span class="code">A</span> giving the result <span class="code">A'</span>.</p>
		<p>The possible modifications are:</p>
		<ul>
		  <li>
		    <p>Append or prepend supported but not enabled algorithm(s) to the list of
		    algorithms. If the wanted algorithms already are in <span class="code">A</span> they will first
		    be removed and then appended or prepended,
		    </p>
		  </li>
		  <li>
		    <p>Remove (rm) one or more algorithms from <span class="code">A</span>.
		    </p>
		  </li>
		</ul>
	      </li>
	      <li>
		<p>Repeat the modification step with the tail of <span class="code">modify_algs_list()</span> and the resulting
		<span class="code">A'</span>.
		</p>
	      </li>
	    </ul>
	    <p>If an unsupported algorithm is in the <span class="code">modify_algs_list()</span>, it will be silently ignored</p>
	    <p>If there are more than one modify_algorithms options, the result is undefined.</p>
	    <p>Here is an example of this option:</p>
	<div class="example"><pre>{modify_algorithms, 
 [{prepend, [{kex, ['diffie-hellman-group1-sha1']}],
  {rm,      [{compression, [none]}]}
 ]
}</pre></div>
          <p>The example specifies that:</p>
	  <ul>
	    <li>
<p>the old key exchange algorithm 'diffie-hellman-group1-sha1' should be
	    the main alternative. It will be the main alternative since it is prepened to the list</p>
	    </li>
	    <li>
<p>The compression algorithm none (= no compression) is removed so compression is enforced</p>
	    </li>
	  </ul>
	  <p>For background and more examples see the <span class="bold_code bc-15"><a href="../apps/ssh/configure_algos.html#introduction">User's Guide</a></span>.</p>
	  </dd>

	  <dt><strong><span class="code">{dh_gex_limits,{Min=integer(),I=integer(),Max=integer()}}</span></strong></dt>
	  <dd>
	    <p>Sets the three diffie-hellman-group-exchange parameters that guides the connected server in choosing a group.
	    See RFC 4419 for the function of thoose.  The default value is <span class="code">{1024, 6144, 8192}</span>.
	    </p>
	  </dd>

	  <dt><strong><span class="code">{connect_timeout, timeout()}</span></strong></dt>
	  <dd>
	    <p>Sets a time-out on the transport layer
	    connection. For <span class="code">gen_tcp</span> the time is in milli-seconds and the default value is
	    <span class="code">infinity</span>.</p>
	  </dd>

	  <dt><strong><span class="code">{auth_methods, string()}</span></strong></dt>
	  <dd>
	    <p>Comma-separated string that determines which
	    authentication methods that the client shall support and
	    in which order they are tried. Defaults to
	    <span class="code">"publickey,keyboard-interactive,password"</span></p>
          </dd>

	  <dt><strong><span class="code">{user, string()}</span></strong></dt>
          <dd>
	    <p>Provides a username. If this option is not given, <span class="code">ssh</span>
	    reads from the environment (<span class="code">LOGNAME</span> or
	    <span class="code">USER</span> on UNIX,
	    <span class="code">USERNAME</span> on Windows).</p>
          </dd>

	  <dt><strong><span class="code">{password, string()}</span></strong></dt>
          <dd>
	    <p>Provides a password for password authentication.
	    If this option is not given, the user is asked for a
	    password, if the password authentication method is
	    attempted.</p>
          </dd>

	  

	  <dt><strong><span class="code">{recv_ext_info, boolean()}</span></strong></dt>
          <dd>
	    <p>Tell the server that the client accepts extension negotiation.  See 
	    <span class="bold_code bc-20"><a href="https://tools.ietf.org/html/draft-ietf-curdle-ssh-ext-info">Draft-ietf-curdle-ssh-ext-info (work in progress)</a></span> for details.
	    </p>
	    <p>Currently implemented extension is <span class="code">server-sig-algs</span> which is the list of the server's preferred
	    user's public key algorithms.
	    </p>
	    <p>Default value is <span class="code">true</span>.
	    </p>
          </dd>

	  <dt><strong><span class="code">{key_cb, key_cb()}</span></strong></dt>
	  <dd>
	    <p>Module implementing the behaviour <span class="bold_code bc-19"><a href="ssh_client_key_api.html">ssh_client_key_api</a></span>. Can be used to
	    customize the handling of public keys. If callback options are provided
	    along with the module name, they are made available to the callback
	    module via the options passed to it under the key 'key_cb_private'.
	    </p>
	  </dd>

	  <dt><strong><span class="code">{quiet_mode, atom() = boolean()}</span></strong></dt>
	  <dd>
	    <p>If <span class="code">true</span>, the client does not print anything on authorization.</p>
	  </dd>

	  <dt><strong><span class="code">{id_string, random | string()}</span></strong></dt>
	  <dd>
	    <p>The string that the client presents to a connected server initially.  The default value is "Erlang/VSN" where VSN is the ssh application version number.
	    </p>
	    <p>The value <span class="code">random</span> will cause a random string to be created at each connection attempt.  This is to make it a bit more difficult for a malicious peer to find the ssh software brand and version.
	    </p>
	  </dd>

	  <dt><strong><span class="code">{fd, file_descriptor()}</span></strong></dt>
	  <dd>
	    <p>Allows an existing file descriptor to be used
	  (by passing it on to the transport protocol).</p>
</dd>
	  <dt><strong><span class="code">{rekey_limit, integer()}</span></strong></dt>
	  <dd>
	    <p>Provides, in bytes, when rekeying is to be initiated.
	    Defaults to once per each GB and once per hour.</p>
	  </dd>
	  <dt><strong><span class="code">{idle_time, integer()}</span></strong></dt>
	  <dd>
	  <p>Sets a time-out on a connection when no channels are active.
	  Defaults to <span class="code">infinity</span>.</p>
</dd>
	  <dt><strong><span class="code">{ssh_msg_debug_fun, fun(ConnectionRef::ssh_connection_ref(), AlwaysDisplay::boolean(), Msg::binary(), LanguageTag::binary()) -&gt; _}</span></strong></dt>
	  <dd>
	    <p>Provide a fun to implement your own logging of the SSH message SSH_MSG_DEBUG. The last three parameters are from the message, see RFC4253, section 11.3. The <span class="code">ConnectionRef</span> is the reference to the connection on which the message arrived. The return value from the fun is not checked.</p>
	    <p>The default behaviour is ignore the message.
	    To get a printout for each message with <span class="code">AlwaysDisplay = true</span>, use for example <span class="code">{ssh_msg_debug_fun, fun(_,true,M,_)-&gt; io:format("DEBUG: ~p~n", [M]) end}</span></p>
	  </dd>

	</dl>
      </p></div>

    <p><a name="connection_info-2"></a><span class="bold_code fun-type">connection_info(ConnectionRef, [Option]) -&gt;[{Option,
      Value}]</span><br></p>
<div class="REFBODY rb-5">
<h3 class="func-types-title">Types</h3>
        <div class="REFTYPES rt-4">
<span class="bold_code fun-param-type">Option = client_version | server_version | user | peer | sockname </span><br>
</div>
	<div class="REFTYPES rt-4">
<span class="bold_code fun-param-type">Value = [option_value()] </span><br>
</div>
	<div class="REFTYPES rt-4">
<span class="bold_code fun-param-type">option_value() = {{Major::integer(), Minor::integer()}, VersionString::string()} |
	User::string() |  Peer::{inet:hostname(), {inet::ip_adress(), inet::port_number()}} |
	Sockname::{inet::ip_adress(), inet::port_number()}</span><br>
</div>
      </div>
<div class="REFBODY rb-7"><p>
        <p>Retrieves information about a connection.</p>
      </p></div>
    
    <p><a name="daemon-1"></a><span class="bold_code fun-type">daemon(Port) -&gt; </span><br><a name="daemon-2"></a><span class="bold_code fun-type">daemon(Port, Options) -&gt; </span><br><a name="daemon-3"></a><span class="bold_code fun-type">daemon(HostAddress, Port, Options) -&gt; </span><br><a name="daemon-1"></a><span class="bold_code fun-type">daemon(TcpSocket) -&gt; </span><br><a name="daemon-2"></a><span class="bold_code fun-type">daemon(TcpSocket, Options) -&gt; {ok, ssh_daemon_ref()} | {error, atom()}</span><br></p>
<div class="REFBODY rb-5">
<h3 class="func-types-title">Types</h3>
        <div class="REFTYPES rt-4">
<span class="bold_code fun-param-type">Port = integer()</span><br>
</div>
	<div class="REFTYPES rt-4">
<span class="bold_code fun-param-type">HostAddress = ip_address() | any | loopback</span><br>
</div>
	<div class="REFTYPES rt-4">
<span class="bold_code fun-param-type">Options = [{Option, Value}]</span><br>
</div>
        <div class="REFTYPES rt-4">
<span class="bold_code fun-param-type">Option = atom()</span><br>
</div>
	<div class="REFTYPES rt-4">
<span class="bold_code fun-param-type">Value = term()</span><br>
</div>
	<div class="REFTYPES rt-4">
<span class="bold_code fun-param-type">TcpSocket = port()</span><br>
</div>
	<div class="REFBODY rb-6">The socket is supposed to be from <span class="bold_code bc-13"><a href="gen_tcp.html#connect-3">gen_tcp:connect</a></span> or <span class="bold_code bc-13"><a href="gen_tcp.html#accept-1">gen_tcp:accept</a></span> with option <span class="code">{active,false}</span>
</div>
      </div>
<div class="REFBODY rb-7"><p>
        <p>Starts a server listening for SSH connections on the given
        port. If the <span class="code">Port</span> is 0, a random free port is selected. See
	<span class="bold_code bc-17"><a href="#daemon_info-1">daemon_info/1</a></span> about how to find the selected port number.</p>

	<p>Please note that by historical reasons both the <span class="code">HostAddress</span> argument and the inet socket option
	<span class="code">ip</span> set the listening address. This is a source of possible inconsistent settings.</p>

	<p>The rules for handling the two address passing options are:</p>
	<ul>
	  <li>if <span class="code">HostAddress</span> is an IP-address, that IP-address is the listening address.
	  An 'ip'-option will be discarded if present.</li>

	  <li>if <span class="code">HostAddress</span> is <span class="code">loopback</span>, the listening address
	  is <span class="code">loopback</span> and an loopback address will be choosen by the underlying layers.
	  An 'ip'-option will be discarded if present.</li>

	  <li>if <span class="code">HostAddress</span> is <span class="code">any</span> and no 'ip'-option is present, the listening address is
	  <span class="code">any</span> and the socket will listen to all addresses</li>

	  <li>if <span class="code">HostAddress</span> is <span class="code">any</span> and an 'ip'-option is present, the listening address is
	  set to the value of the 'ip'-option</li>
	</ul>

	<p>Options:</p>
        <dl>
	  <dt><strong><span class="code">{inet, inet | inet6}</span></strong></dt>
	  <dd><p>IP version to use when the host address is specified as <span class="code">any</span>.</p></dd>
	  <dt><strong><span class="code">{subsystems, [subsystem_spec()]}</span></strong></dt>
	  <dd>
	    <p>Provides specifications for handling of subsystems. The
	    "sftp" subsystem specification is retrieved by calling
	    <span class="code">ssh_sftpd:subsystem_spec/1</span>. If the subsystems option is
	    not present, the value of
	    <span class="code">[ssh_sftpd:subsystem_spec([])]</span> is used.
	    The option can be set to the empty list if
	    you do not want the daemon to run any subsystems.</p>
	  </dd>
	  <dt><strong><span class="code">{shell, {Module, Function, Args} |
	  fun(string() = User) - &gt; pid() | fun(string() = User,
	  ip_address() = PeerAddr) -&gt; pid()}</span></strong></dt>
	  <dd>
	    <p>Defines the read-eval-print loop used when a shell is
	    requested by the client. The default is to use the Erlang shell:
	    <span class="code">{shell, start, []}</span></p>
	  </dd>
	  <dt><strong><span class="code">{ssh_cli, {channel_callback(),
	  channel_init_args()} | no_cli}</span></strong></dt>
	  <dd>
	    <p>Provides your own CLI implementation, that is, a channel callback
	    module that implements a shell and command execution. The shell
	    read-eval-print loop can be customized, using the
	    option <span class="code">shell</span>. This means less work than implementing
	    an own CLI channel. If set to <span class="code">no_cli</span>, the CLI channels
	    are disabled and only subsystem channels are allowed.</p>
	  </dd>
	  <dt><strong><span class="code">{user_dir, string()}</span></strong></dt>
	  <dd>
	    <p>Sets the user directory. That is, the directory containing
	    <span class="code">ssh</span> configuration files for the user, such as
	    <span class="code">known_hosts</span>, <span class="code">id_rsa,
	    id_dsa</span>, and
	    <span class="code">authorized_key</span>. Defaults to the
	    directory normally referred to as
	    <span class="code">~/.ssh</span>.</p>
	  </dd>
          <dt><strong><span class="code">{system_dir, string()}</span></strong></dt>
          <dd>
            <p>Sets the system directory, containing the host key files
            that identify the host keys for <span class="code">ssh</span>. Defaults to
            <span class="code">/etc/ssh</span>. For security reasons,
            this directory is normally accessible only to the root user.</p>
	  </dd>

	  <dt><strong><span class="code">{auth_methods, string()}</span></strong></dt>
	  <dd>
	    <p>Comma-separated string that determines which
	    authentication methods that the server is to support and
	    in what order they are tried. Defaults to
	    <span class="code">"publickey,keyboard-interactive,password"</span></p>
	    <p>Note that the client is free to use any order and to exclude methods.</p>
          </dd>

	  <dt><strong><span class="code">{auth_method_kb_interactive_data, PromptTexts}</span>
	  <br><span class="code">where:</span>
	  <br><span class="code">PromptTexts = kb_int_tuple()  | fun(Peer::{IP::tuple(),Port::integer()}, User::string(), Service::string()) -&gt;  kb_int_tuple()</span>
	  <br><span class="code">kb_int_tuple() = {Name::string(), Instruction::string(), Prompt::string(), Echo::boolean()}</span>
	  </strong></dt>
	  <dd>
	    <p>Sets the text strings that the daemon sends to the client for presentation to the user when using <span class="code">keyboar-interactive</span> authentication. If the fun/3 is used, it is called when the actual authentication occurs and may therefore return dynamic data like time, remote ip etc.</p>
	    <p>The parameter <span class="code">Echo</span> guides the client about need to hide the password.</p>
	    <p>The default value is:
	    <span class="code">{auth_method_kb_interactive_data, {"SSH server", "Enter password for \""++User++"\"", "password: ", false}&gt;</span></p>
          </dd>

	  <dt><strong><span class="code">{user_passwords, [{string() = User,
	  string() = Password}]}</span></strong></dt>
	  <dd>
            <p>Provides passwords for password authentication. The passwords
	    are used when someone tries to connect to the server and
	    public key user-authentication fails. The option provides
	    a list of valid usernames and the corresponding passwords.
	    </p>
          </dd>
          <dt><strong><span class="code">{password, string()}</span></strong></dt>
          <dd>
            <p>Provides a global password that authenticates any
              user. From a security perspective this option makes
	      the server very vulnerable.</p>
	  </dd>

	  <dt><strong><span class="code">{preferred_algorithms, algs_list()}</span></strong></dt>
	  <dd>
            <p>List of algorithms to use in the algorithm negotiation. The default <span class="code">algs_list()</span> can
	    be obtained from <span class="bold_code bc-17"><a href="#default_algorithms-0">default_algorithms/0</a></span>.
	    </p>
	    <p>If an alg_entry() is missing in the algs_list(), the default value is used for that entry.</p>
	    <p>Here is an example of this option:</p>
	<div class="example"><pre>{preferred_algorithms, 
 [{public_key,['ssh-rsa','ssh-dss']},
  {cipher,[{client2server,['aes128-ctr']},
           {server2client,['aes128-cbc','3des-cbc']}]},
  {mac,['hmac-sha2-256','hmac-sha1']},
  {compression,[none,zlib]}
  ]
}</pre></div>
        <p>The example specifies different algorithms in the two directions (client2server and server2client),
	for cipher but specifies the same algorithms for mac and compression in both directions.
	The kex (key exchange) is implicit but public_key is set explicitly.</p>

	<p>For background and more examples see the <span class="bold_code bc-15"><a href="../apps/ssh/configure_algos.html#introduction">User's Guide</a></span>.</p>

        <div class="warning">
<div class="label">Warning</div>
<div class="content"><p>
	  <p>Changing the values can make a connection less secure. Do not change unless you
	  know exactly what you are doing. If you do not understand the values then you
	  are not supposed to change them.</p>
	</p></div>
</div>
	  </dd>

	  <dt><strong><a name="option_modify_algorithms"></a>
	  <span class="code">{modify_algorithms, modify_algs_list()}</span></strong></dt>
	  <dd>
	    <p>Modifies the list of algorithms to use in the algorithm negotiation. The modifications are
	    applied after the option <span class="code">preferred_algorithms</span> is applied (if existing)</p>
	    <p>The possible modifications are to:</p>
	    <ul>
	      <li>
<p>Append or prepend supported but not enabled algorithm(s) to the list of
	      algorithms.</p>
<p>If the wanted algorithms already are in the list of algorithms, they will first
	      be removed and then appended or prepended.
	    </p>
	      </li>
	      <li><p>Remove (rm) one or more algorithms from the list of algorithms.</p></li>
	    </ul>
	    <p>If an unsupported algorithm is in the list, it will be silently ignored</p>

	    <p>Here is an example of this option:</p>
	<div class="example"><pre>{modify_algorithms, 
 [{prepend, [{kex, ['diffie-hellman-group1-sha1']}],
  {rm,      [{compression, [none]}]}
 ]
}</pre></div>
          <p>The example specifies that:</p>
	  <ul>
	    <li>
<p>the old key exchange algorithm 'diffie-hellman-group1-sha1' should be
	    the main alternative. It will be the main alternative since it is prepened to the list</p>
	    </li>
	    <li>
<p>The compression algorithm none (= no compression) is removed so compression is enforced</p>
	    </li>
	  </ul>
	  <p>For background and more examples see the <span class="bold_code bc-15"><a href="../apps/ssh/configure_algos.html#introduction">User's Guide</a></span>.</p>
	  </dd>

	  <dt><strong><span class="code">{dh_gex_groups, [{Size=integer(),G=integer(),P=integer()}] | {file,filename()} {ssh_moduli_file,filename()} }</span></strong></dt>
	  <dd>
	    <p>Defines the groups the server may choose among when diffie-hellman-group-exchange is negotiated.
	    See RFC 4419 for details. The three variants of this option are:
	    </p>
	    <dl>
	      <dt><strong><span class="code">{Size=integer(),G=integer(),P=integer()}</span></strong></dt>
	      <dd>The groups are given explicitly in this list. There may be several elements with the same <span class="code">Size</span>.
	      In such a case, the server will choose one randomly in the negotiated Size.
	      </dd>
	      <dt><strong><span class="code">{file,filename()}</span></strong></dt>
	      <dd>The file must have one or more three-tuples <span class="code">{Size=integer(),G=integer(),P=integer()}</span> 
	      terminated by a dot. The file is read when the daemon starts.
	      </dd>
	      <dt><strong><span class="code">{ssh_moduli_file,filename()}</span></strong></dt>
	      <dd>The file must be in
	      <span class="bold_code bc-13"><a href="public_key.html#dh_gex_group-4">ssh-keygen moduli file format</a></span>.
	      The file is read when the daemon starts.
	      </dd>
	    </dl>
	    <p>The default list is fetched from the 
	      <span class="bold_code bc-13"><a href="public_key.html#dh_gex_group-4">public_key</a></span> application.
	    </p>
	  </dd>

	  <dt><strong><span class="code">{dh_gex_limits,{Min=integer(),Max=integer()}}</span></strong></dt>
	  <dd>
	    <p>Limits what a client can ask for in diffie-hellman-group-exchange.
	    The limits will be
	    <span class="code">{MaxUsed = min(MaxClient,Max), MinUsed = max(MinClient,Min)}</span> where <span class="code">MaxClient</span> and 
	    <span class="code">MinClient</span> are the values proposed by a connecting client.
	    </p>
	    <p>The default value is <span class="code">{0,infinity}</span>.
	    </p>
	    <p>If <span class="code">MaxUsed &lt; MinUsed</span> in a key exchange, it will fail with a disconnect.
	    </p>
	    <p>See RFC 4419 for the function of the Max and Min values.</p>
	  </dd>

	  <dt><strong><span class="code">{pwdfun, fun(User::string(), Password::string(), PeerAddress::{ip_adress(),port_number()}, State::any()) -&gt; boolean() | disconnect | {boolean(),any()} }</span></strong></dt>
	  <dd>
	    <p>Provides a function for password validation. This could used for calling an external system or if
	    passwords should be stored as a hash. The fun returns:
	    </p>
	    <ul>
	      <li>
<span class="code">true</span> if the user and password is valid and</li>
	      <li>
<span class="code">false</span> otherwise.</li> 
	    </ul>
	    <p>This fun can also be used to make delays in authentication tries for example by calling
	      <span class="bold_code bc-13"><a href="timer.html#sleep-1">timer:sleep/1</a></span>. To facilitate counting of failed tries
	      the <span class="code">State</span> variable could be used. This state is per connection only. The first time the pwdfun
	      is called for a connection, the <span class="code">State</span> variable has the value <span class="code">undefined</span>.  
	      The pwdfun can return - in addition to the values above - a new state
	      as:
	    </p>
	    <ul>
	      <li>
<span class="code">{true,  NewState:any()}</span> if the user and password is valid or</li>
	      <li>
<span class="code">{false, NewState:any()}</span> if the user or password is invalid</li> 
	    </ul>
	    <p>A third usage is to block login attempts from a missbehaving peer. The <span class="code">State</span> described above 
	    can be used for this. In addition to the responses above, the following return value is introduced:
	    </p>
	    <ul>
	      <li>
<span class="code">disconnect</span> if the connection should be closed immediately after sending a SSH_MSG_DISCONNECT
	      message.</li>
	    </ul>
	  </dd>

	  <dt><strong><span class="code">{pwdfun, fun(User::string(), Password::string()) -&gt; boolean()}</span></strong></dt>
	  <dd>
	    <p>Provides a function for password validation. This function is called
	      with user and password as strings, and returns
	      <span class="code">true</span> if the password is valid and
	      <span class="code">false</span> otherwise.</p>
	      <p>This option (<span class="code">{pwdfun,fun/2}</span>) is the same as a subset of the previous 
	      (<span class="code">{pwdfun,fun/4}</span>). It is kept for compatibility.</p>
	  </dd>

	  <dt><strong><span class="code">{negotiation_timeout, integer()}</span></strong></dt>
	  <dd>
	    <p>Maximum time in milliseconds for the authentication negotiation.
	    Defaults to 120000 (2 minutes). If the client fails to log in within this time,
	    the connection is closed.
	    </p>
	  </dd>

	  <dt><strong><span class="code">{max_sessions, pos_integer()}</span></strong></dt>
	  <dd>
	    <p>The maximum number of simultaneous sessions that are accepted at any time
	    for this daemon. This includes sessions that are being authorized.
	    Thus, if set to <span class="code">N</span>, and <span class="code">N</span> clients have connected but not started
	    the login process, connection attempt <span class="code">N+1</span> is aborted.
	    If <span class="code">N</span> connections are authenticated and still logged in, no more logins
	    are accepted until one of the existing ones log out.
	    </p>
	    <p>The counter is per listening port. Thus, if two daemons are started, one with
	    <span class="code">{max_sessions,N}</span> and the other with <span class="code">{max_sessions,M}</span>, in total
	    <span class="code">N+M</span> connections are accepted for the whole <span class="code">ssh</span> application.
	    </p>
	    <p>Notice that if <span class="code">parallel_login</span> is <span class="code">false</span>, only one client
	    at a time can be in the authentication phase.
	    </p>
	    <p>By default, this option is not set. This means that the number is not limited.
	    </p>
	  </dd>

	  <dt><strong><span class="code">{max_channels, pos_integer()}</span></strong></dt>
	  <dd>
	    <p>The maximum number of channels with active remote subsystem that are accepted for
	    each connection to this daemon</p>
	    <p>By default, this option is not set. This means that the number is not limited.
	    </p>
	  </dd>


	  <dt><strong><span class="code">{parallel_login, boolean()}</span></strong></dt>
	  <dd>
	    <p>If set to false (the default value), only one login is handled at a time.
	    If set to true, an unlimited number of login attempts are allowed simultaneously.
	    </p>
	    <p>If the <span class="code">max_sessions</span> option is set to <span class="code">N</span> and <span class="code">parallel_login</span>
	    is set to <span class="code">true</span>, the maximum number of simultaneous login attempts at any time is
	    limited to <span class="code">N-K</span>, where <span class="code">K</span> is the number of authenticated connections present
	    at this daemon.
	    </p>
	    <div class="warning">
<div class="label">Warning</div>
<div class="content"><p>
	      <p>Do not enable <span class="code">parallel_logins</span> without protecting the server by other means,
	      for example, by the <span class="code">max_sessions</span> option or a firewall configuration. If set to
	      <span class="code">true</span>, there is no protection against DOS attacks.</p>
	    </p></div>
</div>
	  </dd>

	  <dt><strong><span class="code">{minimal_remote_max_packet_size, non_negative_integer()}</span></strong></dt>
	  <dd>
	    <p>The least maximum packet size that the daemon will accept in channel open requests from the client.  The default value is 0.
	    </p>
	  </dd>

	  <dt><strong><span class="code">{id_string, random | string()}</span></strong></dt>
	  <dd>
	    <p>The string the daemon will present to a connecting peer initially.  The default value is "Erlang/VSN" where VSN is the ssh application version number.
	    </p>
	    <p>The value <span class="code">random</span> will cause a random string to be created at each connection attempt.  This is to make it a bit more difficult for a malicious peer to find the ssh software brand and version.
	    </p>
	  </dd>

	  <dt><strong><span class="code">{send_ext_info, boolean()}</span></strong></dt>
          <dd>
	    <p>Send a list of extensions to the client if the client has asked for it. See 
	    <span class="bold_code bc-20"><a href="https://tools.ietf.org/html/draft-ietf-curdle-ssh-ext-info">Draft-ietf-curdle-ssh-ext-info (work in progress)</a></span> for details.
	    </p>
	    <p>Currently implemented extension is sending <span class="code">server-sig-algs</span> which is the list of the server's preferred
	    user's public key algorithms.
	    </p>
	    <p>Default value is <span class="code">true</span>.
	    </p>
          </dd>

	  

	  <dt><strong><span class="code">{key_cb, key_cb()}</span></strong></dt>
	  <dd>
	    <p>Module implementing the behaviour <span class="bold_code bc-19"><a href="ssh_server_key_api.html">ssh_server_key_api</a></span>. Can be used to
	    customize the handling of public keys. If callback options are provided
	    along with the module name, they are made available to the callback
	    module via the options passed to it under the key 'key_cb_private'.
	    </p>
	  </dd>
	  
	  <dt><strong><span class="code">{profile, atom()}</span></strong></dt>
	  <dd>
	    <p>Used together with <span class="code">ip-address</span> and <span class="code">port</span> to
	    uniquely identify a ssh daemon. This can be useful in a
	    virtualized environment, where there can be more that one
	    server that has the same <span class="code">ip-address</span> and
	    <span class="code">port</span>. If this property is not explicitly set, it is
	    assumed that the the <span class="code">ip-address</span> and <span class="code">port</span>
	    uniquely identifies the SSH daemon.
	    </p>
	  </dd>
	  
	  <dt><strong><span class="code">{fd, file_descriptor()}</span></strong></dt>
	  <dd>
	    <p>Allows an existing file-descriptor to be used
	  (passed on to the transport protocol).</p>
</dd>
	  <dt><strong><span class="code">{failfun, fun(User::string(),
	  PeerAddress::ip_address(), Reason::term()) -&gt; _}</span></strong></dt>
	  <dd>
	    <p>Provides a fun to implement your own logging when a user fails to authenticate.</p>
	  </dd>
	  <dt><strong><span class="code">{connectfun, fun(User::string(), PeerAddress::ip_address(),
	  Method::string()) -&gt;_}</span></strong></dt>
	  <dd>
	    <p>Provides a fun to implement your own logging when a user authenticates to the server.</p>
	  </dd>
	  <dt><strong><span class="code">{disconnectfun, fun(Reason:term()) -&gt; _}</span></strong></dt>
	  <dd>
	    <p>Provides a fun to implement your own logging when a user disconnects from the server.</p>
	  </dd>

	  <dt><strong><span class="code">{unexpectedfun, fun(Message:term(), Peer) -&gt; report | skip }</span></strong></dt>
	  <dd>
	    <p>Provides a fun to implement your own logging or other action when an unexpected message arrives.
	    If the fun returns <span class="code">report</span> the usual info report is issued but if <span class="code">skip</span> is returned no
	    report is generated.</p>
	    <p><span class="code">Peer</span> is in the format of <span class="code">{Host,Port}</span>.</p>
	  </dd>

	  <dt><strong><span class="code">{idle_time, integer()}</span></strong></dt>
	  <dd>
	  <p>Sets a time-out on a connection when no channels are active.
	  Defaults to <span class="code">infinity</span>.</p>
	  </dd>

	  <dt><strong><span class="code">{ssh_msg_debug_fun, fun(ConnectionRef::ssh_connection_ref(), AlwaysDisplay::boolean(), Msg::binary(), LanguageTag::binary()) -&gt; _}</span></strong></dt>
	  <dd>
	    <p>Provide a fun to implement your own logging of the SSH message SSH_MSG_DEBUG. The last three parameters are from the message, see RFC4253, section 11.3. The <span class="code">ConnectionRef</span> is the reference to the connection on which the message arrived. The return value from the fun is not checked.</p>
	    <p>The default behaviour is ignore the message.
	    To get a printout for each message with <span class="code">AlwaysDisplay = true</span>, use for example <span class="code">{ssh_msg_debug_fun, fun(_,true,M,_)-&gt; io:format("DEBUG: ~p~n", [M]) end}</span></p>
	  </dd>

	</dl>
      </p></div>

    <p><a name="daemon_info-1"></a><span class="bold_code fun-type">daemon_info(Daemon) -&gt; {ok, [DaemonInfo]} | {error,Error}</span><br></p>
<div class="REFBODY rb-5">
<h3 class="func-types-title">Types</h3>
	<div class="REFTYPES rt-4">
<span class="bold_code fun-param-type">DaemonInfo = {port,Port::pos_integer()} | {listen_address, any|ip_address()} | {profile,atom()}</span><br>
</div>
        <div class="REFTYPES rt-4">
<span class="bold_code fun-param-type">Port = integer()</span><br>
</div>
	<div class="REFTYPES rt-4">
<span class="bold_code fun-param-type">Error = bad_daemon_ref</span><br>
</div>
      </div>
<div class="REFBODY rb-7"><p>
	<p>Returns a key-value list with information about the daemon. For now, only the listening port is returned. This is intended for the case the daemon is started with the port set to 0.</p>
      </p></div>

    <p><a name="default_algorithms-0"></a><span class="bold_code fun-type">default_algorithms() -&gt; algs_list()</span><br></p>
<div class="REFBODY rb-7"><p>
	<p>Returns a key-value list, where the keys are the different types of algorithms and the values are the
	algorithms themselves. An example:</p>
	<div class="example"><pre>20&gt; ssh:default_algorithms().
[{kex,['diffie-hellman-group1-sha1']},
 {public_key,['ssh-rsa','ssh-dss']},
 {cipher,[{client2server,['aes128-ctr','aes128-cbc','3des-cbc']},
          {server2client,['aes128-ctr','aes128-cbc','3des-cbc']}]},
 {mac,[{client2server,['hmac-sha2-256','hmac-sha1']},
       {server2client,['hmac-sha2-256','hmac-sha1']}]},
 {compression,[{client2server,[none,zlib]},
               {server2client,[none,zlib]}]}]
21&gt; </pre></div>
      </p></div>

    <p><a name="shell-1"></a><span class="bold_code fun-type">shell(Host) -&gt; </span><br><a name="shell-2"></a><span class="bold_code fun-type">shell(Host, Option) -&gt; </span><br><a name="shell-3"></a><span class="bold_code fun-type">shell(Host, Port, Option) -&gt; </span><br><a name="shell-1"></a><span class="bold_code fun-type">shell(TcpSocket) -&gt; _</span><br></p>
<div class="REFBODY rb-5">
<h3 class="func-types-title">Types</h3>
        <div class="REFTYPES rt-4">
<span class="bold_code fun-param-type">Host = string()</span><br>
</div>
	<div class="REFTYPES rt-4">
<span class="bold_code fun-param-type">Port = integer()</span><br>
</div>
	<div class="REFTYPES rt-4">
<span class="bold_code fun-param-type">Options - see ssh:connect/3</span><br>
</div>
	<div class="REFTYPES rt-4">
<span class="bold_code fun-param-type">TcpSocket = port()</span><br>
</div>
	<div class="REFBODY rb-6">The socket is supposed to be from <span class="bold_code bc-13"><a href="gen_tcp.html#connect-3">gen_tcp:connect</a></span> or <span class="bold_code bc-13"><a href="gen_tcp.html#accept-1">gen_tcp:accept</a></span> with option <span class="code">{active,false}</span>
</div>
      </div>
<div class="REFBODY rb-7"><p>
        <p>Starts an interactive shell over an SSH server on the
	given <span class="code">Host</span>. The function waits for user input,
	and does not return until the remote shell is ended (that is,
	exit from the shell).
	</p>
      </p></div>

    <p><a name="start-0"></a><span class="bold_code fun-type">start() -&gt; </span><br><a name="start-1"></a><span class="bold_code fun-type">start(Type) -&gt; ok | {error, Reason}</span><br></p>
<div class="REFBODY rb-5">
<h3 class="func-types-title">Types</h3>
        <div class="REFTYPES rt-4">
<span class="bold_code fun-param-type">Type =  permanent | transient | temporary</span><br>
</div>
	<div class="REFTYPES rt-4">
<span class="bold_code fun-param-type">Reason = term() </span><br>
</div>
      </div>
<div class="REFBODY rb-7"><p>
        <p>Utility function that starts the applications <span class="code">crypto</span>, <span class="code">public_key</span>,
	and <span class="code">ssh</span>. Default type is <span class="code">temporary</span>.
	For more information, see the <span class="bold_code bc-18"><a href="application.html">application(3)</a></span>
	manual page in Kernel.</p>
      </p></div>

    <p><a name="stop-0"></a><span class="bold_code fun-type">stop() -&gt; ok | {error, Reason}</span><br></p>
<div class="REFBODY rb-5">
<h3 class="func-types-title">Types</h3>
        <div class="REFTYPES rt-4">
<span class="bold_code fun-param-type">Reason = term()</span><br>
</div>
      </div>
<div class="REFBODY rb-7"><p>
        <p>Stops the <span class="code">ssh</span> application.
	For more information, see the <span class="bold_code bc-18"><a href="application.html">application(3)</a></span>
	manual page in Kernel.</p>
      </p></div>
    
    <p><a name="stop_daemon-1"></a><span class="bold_code fun-type">stop_daemon(DaemonRef) -&gt; </span><br><a name="stop_daemon-2"></a><span class="bold_code fun-type">stop_daemon(Address, Port) -&gt; ok </span><br></p>
<div class="REFBODY rb-5">
<h3 class="func-types-title">Types</h3>
	<div class="REFTYPES rt-4">
<span class="bold_code fun-param-type">DaemonRef = ssh_daemon_ref()</span><br>
</div>
	<div class="REFTYPES rt-4">
<span class="bold_code fun-param-type">Address = ip_address()</span><br>
</div>
	<div class="REFTYPES rt-4">
<span class="bold_code fun-param-type">Port = integer()</span><br>
</div>
      </div>
<div class="REFBODY rb-7"><p>
	<p>Stops the listener and all connections started by 
	the listener.</p>
      </p></div>

    <p><a name="stop_listener-1"></a><span class="bold_code fun-type">stop_listener(DaemonRef) -&gt; </span><br><a name="stop_listener-2"></a><span class="bold_code fun-type">stop_listener(Address, Port) -&gt; ok </span><br></p>
<div class="REFBODY rb-5">
<h3 class="func-types-title">Types</h3>
	<div class="REFTYPES rt-4">
<span class="bold_code fun-param-type">DaemonRef = ssh_daemon_ref()</span><br>
</div>
        <div class="REFTYPES rt-4">
<span class="bold_code fun-param-type">Address = ip_address()</span><br>
</div>
	<div class="REFTYPES rt-4">
<span class="bold_code fun-param-type">Port = integer()</span><br>
</div>
      </div>
<div class="REFBODY rb-7"><p>
	<p>Stops the listener, but leaves existing connections started
	by the listener operational.</p>
      </p></div>

  </div>
  
</div>
<div class="footer">
<hr>
<p>Copyright  2005-2018 Ericsson AB. All Rights Reserved.</p>
</div>
</div>
</div>
<script type="text/javascript">window.__otpTopDocDir = '../js/';</script><script type="text/javascript" src="../js/highlight.js"></script>
</body>
</html>
