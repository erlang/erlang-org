<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html xmlns:erl="http://erlang.org" xmlns:fn="http://www.w3.org/2005/02/xpath-functions">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" href="../otp_doc.css" type="text/css">
<title>Erlang -- Records</title>
</head>
<body>
<div id="container">
<script id="js" type="text/javascript" language="JavaScript" src="../js/flipmenu/flipmenu.js"></script><script id="js2" type="text/javascript" src="../js/erlresolvelinks.js"></script><script language="JavaScript" type="text/javascript">
            <!--
              function getWinHeight() {
                var myHeight = 0;
                if( typeof( window.innerHeight ) == 'number' ) {
                  //Non-IE
                  myHeight = window.innerHeight;
                } else if( document.documentElement && ( document.documentElement.clientWidth ||
                                                         document.documentElement.clientHeight ) ) {
                  //IE 6+ in 'standards compliant mode'
                  myHeight = document.documentElement.clientHeight;
                } else if( document.body && ( document.body.clientWidth || document.body.clientHeight ) ) {
                  //IE 4 compatible
                  myHeight = document.body.clientHeight;
                }
                return myHeight;
              }

              function setscrollpos() {
                var objf=document.getElementById('loadscrollpos');
                 document.getElementById("leftnav").scrollTop = objf.offsetTop - getWinHeight()/2;
              }

              function addEvent(obj, evType, fn){
                if (obj.addEventListener){
                obj.addEventListener(evType, fn, true);
                return true;
              } else if (obj.attachEvent){
                var r = obj.attachEvent("on"+evType, fn);
                return r;
              } else {
                return false;
              }
             }

             addEvent(window, 'load', setscrollpos);

             //--></script><div id="leftnav"><div class="innertube">
<div class="erlang-logo-wrapper"><a href="../index.html"><img alt="Erlang Logo" src="../erlang-logo.png" class="erlang-logo"></a></div>
<p class="section-title">Erlang Reference Manual</p>
<p class="section-subtitle">User's Guide</p>
<p class="section-version">Version 9.3</p>
<ul class="panel-sections">
<li><a href="users_guide.html">User's Guide</a></li>
<li><a href="../pdf/otp-system-documentation.pdf">PDF</a></li>
<li><a href="../index.html">Top</a></li>
</ul>
<ul class="expand-collapse-items">
<li><a href="javascript:openAllFlips()">Expand All</a></li>
<li><a href="javascript:closeAllFlips()">Contract All</a></li>
</ul>
<h3>Chapters</h3>
<ul class="flipMenu" imagePath="../js/flipmenu">
<li id="no" title="Introduction" expanded="false">Introduction<ul>
<li><a href="introduction.html">
              Top of chapter
            </a></li>
<li title="Purpose"><a href="introduction.html#id60622">Purpose</a></li>
<li title="Prerequisites"><a href="introduction.html#id58472">Prerequisites</a></li>
<li title="Document Conventions"><a href="introduction.html#id63515">Document Conventions</a></li>
<li title="Complete List of BIFs"><a href="introduction.html#id62038">Complete List of BIFs</a></li>
<li title="Reserved Words"><a href="introduction.html#id63536">Reserved Words</a></li>
</ul>
</li>
<li id="no" title="Character Set and Source File Encoding" expanded="false">Character Set and Source File Encoding<ul>
<li><a href="character_set.html">
              Top of chapter
            </a></li>
<li title="Character Set"><a href="character_set.html#id62014">Character Set</a></li>
<li title="Source File Encoding"><a href="character_set.html#id60536">Source File Encoding</a></li>
</ul>
</li>
<li id="no" title="Data Types" expanded="false">Data Types<ul>
<li><a href="data_types.html">
              Top of chapter
            </a></li>
<li title="Terms"><a href="data_types.html#id67165">Terms</a></li>
<li title="Number"><a href="data_types.html#id70187">Number</a></li>
<li title="Atom"><a href="data_types.html#id66121">Atom</a></li>
<li title="Bit Strings and Binaries"><a href="data_types.html#id65566">Bit Strings and Binaries</a></li>
<li title="Reference"><a href="data_types.html#id69419">Reference</a></li>
<li title="Fun"><a href="data_types.html#id66389">Fun</a></li>
<li title="Port Identifier"><a href="data_types.html#id66434">Port Identifier</a></li>
<li title="Pid"><a href="data_types.html#id68255">Pid</a></li>
<li title="Tuple"><a href="data_types.html#id77368">Tuple</a></li>
<li title="Map"><a href="data_types.html#id77432">Map</a></li>
<li title="List"><a href="data_types.html#id77524">List</a></li>
<li title="String"><a href="data_types.html#id77669">String</a></li>
<li title="Record"><a href="data_types.html#id72067">Record</a></li>
<li title="Boolean"><a href="data_types.html#id72117">Boolean</a></li>
<li title="Escape Sequences"><a href="data_types.html#id72152">Escape Sequences</a></li>
<li title="Type Conversions"><a href="data_types.html#id77971">Type Conversions</a></li>
</ul>
</li>
<li id="no" title="Pattern Matching" expanded="false">Pattern Matching<ul>
<li><a href="patterns.html">
              Top of chapter
            </a></li>
<li title="Pattern Matching"><a href="patterns.html#id78108">Pattern Matching</a></li>
</ul>
</li>
<li id="no" title="Modules" expanded="false">Modules<ul>
<li><a href="modules.html">
              Top of chapter
            </a></li>
<li title="Module Syntax"><a href="modules.html#id78235">Module Syntax</a></li>
<li title="Module Attributes"><a href="modules.html#id78271">Module Attributes</a></li>
<li title="Comments"><a href="modules.html#id78752">Comments</a></li>
<li title="module_info/0 and module_info/1 functions"><a href="modules.html#id78765">module_info/0 and module_info/1 functions</a></li>
</ul>
</li>
<li id="no" title="Functions" expanded="false">Functions<ul>
<li><a href="functions.html">
              Top of chapter
            </a></li>
<li title="Function Declaration Syntax"><a href="functions.html#id79067">Function Declaration Syntax</a></li>
<li title="Function Evaluation"><a href="functions.html#id79183">Function Evaluation</a></li>
<li title="Tail recursion"><a href="functions.html#id79333">Tail recursion</a></li>
<li title="Built-In Functions (BIFs)"><a href="functions.html#id79368">Built-In Functions (BIFs)</a></li>
</ul>
</li>
<li id="no" title="Types and Function Specifications" expanded="false">Types and Function Specifications<ul>
<li><a href="typespec.html">
              Top of chapter
            </a></li>
<li title="The Erlang Type Language"><a href="typespec.html#id79489">The Erlang Type Language</a></li>
<li title="Types and their Syntax"><a href="typespec.html#id79546">Types and their Syntax</a></li>
<li title="Type Declarations of User-Defined Types"><a href="typespec.html#id80458">Type Declarations of User-Defined Types</a></li>
<li title="Type Information in Record Declarations"><a href="typespec.html#id80588">Type Information in Record Declarations</a></li>
<li title="Specifications for Functions"><a href="typespec.html#id80676">Specifications for Functions</a></li>
</ul>
</li>
<li id="no" title="Expressions" expanded="false">Expressions<ul>
<li><a href="expressions.html">
              Top of chapter
            </a></li>
<li title="Expression Evaluation"><a href="expressions.html#id80929">Expression Evaluation</a></li>
<li title="Terms"><a href="expressions.html#id80972">Terms</a></li>
<li title="Variables"><a href="expressions.html#id80984">Variables</a></li>
<li title="Patterns"><a href="expressions.html#id81135">Patterns</a></li>
<li title="Match"><a href="expressions.html#id81278">Match</a></li>
<li title="Function Calls"><a href="expressions.html#id81341">Function Calls</a></li>
<li title="If"><a href="expressions.html#id81562">If</a></li>
<li title="Case"><a href="expressions.html#id81627">Case</a></li>
<li title="Send"><a href="expressions.html#id81693">Send</a></li>
<li title="Receive"><a href="expressions.html#id81776">Receive</a></li>
<li title="Term Comparisons"><a href="expressions.html#id81948">Term Comparisons</a></li>
<li title="Arithmetic Expressions"><a href="expressions.html#id82231">Arithmetic Expressions</a></li>
<li title="Boolean Expressions"><a href="expressions.html#id82738">Boolean Expressions</a></li>
<li title="Short-Circuit Expressions"><a href="expressions.html#id82894">Short-Circuit Expressions</a></li>
<li title="List Operations"><a href="expressions.html#id83040">List Operations</a></li>
<li title="Map Expressions"><a href="expressions.html#id83109">Map Expressions</a></li>
<li title="Bit Syntax Expressions"><a href="expressions.html#id83725">Bit Syntax Expressions</a></li>
<li title="Fun Expressions"><a href="expressions.html#id84308">Fun Expressions</a></li>
<li title="Catch and Throw"><a href="expressions.html#id84473">Catch and Throw</a></li>
<li title="Try"><a href="expressions.html#id84633">Try</a></li>
<li title="Parenthesized Expressions"><a href="expressions.html#id85007">Parenthesized Expressions</a></li>
<li title="Block Expressions"><a href="expressions.html#id85040">Block Expressions</a></li>
<li title="List Comprehensions"><a href="expressions.html#id85065">List Comprehensions</a></li>
<li title="Bit String Comprehensions"><a href="expressions.html#id85231">Bit String Comprehensions</a></li>
<li title="Guard Sequences"><a href="expressions.html#id85367">Guard Sequences</a></li>
<li title="Operator Precedence"><a href="expressions.html#id85932">Operator Precedence</a></li>
</ul>
</li>
<li id="no" title="Preprocessor" expanded="false">Preprocessor<ul>
<li><a href="macros.html">
              Top of chapter
            </a></li>
<li title="File Inclusion"><a href="macros.html#id86259">File Inclusion</a></li>
<li title="Defining and Using Macros"><a href="macros.html#id86419">Defining and Using Macros</a></li>
<li title="Predefined Macros"><a href="macros.html#id86552">Predefined Macros</a></li>
<li title="Macros Overloading"><a href="macros.html#id86637">Macros Overloading</a></li>
<li title="Flow Control in Macros"><a href="macros.html#id86706">Flow Control in Macros</a></li>
<li title="-error() and -warning() directives"><a href="macros.html#id86845">-error() and -warning() directives</a></li>
<li title="Stringifying Macro Arguments"><a href="macros.html#id86926">Stringifying Macro Arguments</a></li>
</ul>
</li>
<li id="loadscrollpos" title="Records" expanded="true">Records<ul>
<li><a href="records.html">
              Top of chapter
            </a></li>
<li title="Defining Records"><a href="records.html#id87051">Defining Records</a></li>
<li title="Creating Records"><a href="records.html#id87082">Creating Records</a></li>
<li title="Accessing Record Fields"><a href="records.html#id87140">Accessing Record Fields</a></li>
<li title="Updating Records"><a href="records.html#id87181">Updating Records</a></li>
<li title="Records in Guards"><a href="records.html#id87213">Records in Guards</a></li>
<li title="Records in Patterns"><a href="records.html#id87255">Records in Patterns</a></li>
<li title="Nested Records"><a href="records.html#id87282">Nested Records</a></li>
<li title="Internal Representation of Records"><a href="records.html#id87317">Internal Representation of Records</a></li>
</ul>
</li>
<li id="no" title="Errors and Error Handling" expanded="false">Errors and Error Handling<ul>
<li><a href="errors.html">
              Top of chapter
            </a></li>
<li title="Terminology"><a href="errors.html#id87440">Terminology</a></li>
<li title="Exceptions"><a href="errors.html#id87568">Exceptions</a></li>
<li title="Handling of Run-time Errors in Erlang"><a href="errors.html#id87744">Handling of Run-time Errors in Erlang</a></li>
<li title="Exit Reasons"><a href="errors.html#id87812">Exit Reasons</a></li>
</ul>
</li>
<li id="no" title="Processes" expanded="false">Processes<ul>
<li><a href="processes.html">
              Top of chapter
            </a></li>
<li title="Processes"><a href="processes.html#id88292">Processes</a></li>
<li title="Process Creation"><a href="processes.html#id88304">Process Creation</a></li>
<li title="Registered Processes"><a href="processes.html#id88354">Registered Processes</a></li>
<li title="Process Termination"><a href="processes.html#id88487">Process Termination</a></li>
<li title="Message Sending"><a href="processes.html#id88583">Message Sending</a></li>
<li title="Links"><a href="processes.html#id88612">Links</a></li>
<li title="Error Handling"><a href="processes.html#id88677">Error Handling</a></li>
<li title="Monitors"><a href="processes.html#id88793">Monitors</a></li>
<li title="Process Dictionary"><a href="processes.html#id88885">Process Dictionary</a></li>
</ul>
</li>
<li id="no" title="Distributed Erlang" expanded="false">Distributed Erlang<ul>
<li><a href="distributed.html">
              Top of chapter
            </a></li>
<li title="Distributed Erlang System"><a href="distributed.html#id88952">Distributed Erlang System</a></li>
<li title="Nodes"><a href="distributed.html#id89009">Nodes</a></li>
<li title="Node Connections"><a href="distributed.html#id89084">Node Connections</a></li>
<li title="epmd"><a href="distributed.html#id89135">epmd</a></li>
<li title="Hidden Nodes"><a href="distributed.html#id89158">Hidden Nodes</a></li>
<li title="C Nodes"><a href="distributed.html#id89204">C Nodes</a></li>
<li title="Security"><a href="distributed.html#id89236">Security</a></li>
<li title="Distribution BIFs"><a href="distributed.html#id89347">Distribution BIFs</a></li>
<li title="Distribution Command-Line Flags"><a href="distributed.html#id89670">Distribution Command-Line Flags</a></li>
<li title="Distribution Modules"><a href="distributed.html#id89832">Distribution Modules</a></li>
</ul>
</li>
<li id="no" title="Compilation and Code Loading" expanded="false">Compilation and Code Loading<ul>
<li><a href="code_loading.html">
              Top of chapter
            </a></li>
<li title="Compilation"><a href="code_loading.html#id90080">Compilation</a></li>
<li title="Code Loading"><a href="code_loading.html#id90200">Code Loading</a></li>
<li title="Code Replacement"><a href="code_loading.html#id90252">Code Replacement</a></li>
<li title="Running a Function When a Module is Loaded"><a href="code_loading.html#id90331">Running a Function When a Module is Loaded</a></li>
</ul>
</li>
<li id="no" title="Ports and Port Drivers" expanded="false">Ports and Port Drivers<ul>
<li><a href="ports.html">
              Top of chapter
            </a></li>
<li title="Ports"><a href="ports.html#id90509">Ports</a></li>
<li title="Port Drivers"><a href="ports.html#id90544">Port Drivers</a></li>
<li title="Port BIFs"><a href="ports.html#id90591">Port BIFs</a></li>
</ul>
</li>
</ul>
</div></div>
<div id="content">
<div class="innertube">
<h1>10 Records</h1>
  
  <p>A record is a data structure for storing a fixed number of
    elements. It has named fields and is similar to a struct in C.
    Record expressions are translated to tuple expressions during
    compilation. Therefore, record expressions are not understood by
    the shell unless special actions are taken. For details, see the
    <span class="bold_code bc-18"><a href="../man/shell.html">shell(3)</a></span>
    manual page in STDLIB.</p>
  <p>More examples are provided in
    <span class="bold_code bc-18"><a href="../programming_examples/records.html">Programming Examples</a></span>.</p>

  <h3><a name="id87051">10.1 
        Defining Records</a></h3>
    
    <p>A record definition consists of the name of the record,
      followed by the field names of the record. Record and field names
      must be atoms. Each field can be given an optional default value.
      If no default value is supplied, <span class="code">undefined</span> is used.</p>
    <div class="example"><pre>
-record(Name, {Field1 [= Value1],
               ...
               FieldN [= ValueN]}).</pre></div>
    <p>A record definition can be placed anywhere among the attributes
      and function declarations of a module, but the definition must
      come before any usage of the record.</p>
    <p>If a record is used in several modules, it is recommended that
      the record definition is placed in an include file.</p>
  

  <h3><a name="id87082">10.2 
        Creating Records</a></h3>
    
    <p>The following expression creates a new <span class="code">Name</span> record where
      the value of each field <span class="code">FieldI</span> is the value of evaluating
      the corresponding expression <span class="code">ExprI</span>:</p>
    <div class="example"><pre>
#Name{Field1=Expr1,...,FieldK=ExprK}</pre></div>
    <p>The fields can be in any order, not necessarily the same order as
      in the record definition, and fields can be omitted. Omitted
      fields get their respective default value instead.</p>
    <p>If several fields are to be assigned the same value,
      the following construction can be used:</p>
    <div class="example"><pre>
#Name{Field1=Expr1,...,FieldK=ExprK, _=ExprL}</pre></div>
    <p>Omitted fields then get the value of evaluating <span class="code">ExprL</span>
    instead of their default values. This feature is primarily
    intended to be used to create patterns for ETS and Mnesia match
    functions.</p>
    <p><strong>Example:</strong></p>
    <div class="example"><pre>
-record(person, {name, phone, address}).

...

lookup(Name, Tab) -&gt;
    ets:match_object(Tab, #person{name=Name, _='_'}).</pre></div>
  

  <h3><a name="id87140">10.3 
        Accessing Record Fields</a></h3>
    
    <div class="example"><pre>
Expr#Name.Field</pre></div>
    <p>Returns the value of the specified field. <span class="code">Expr</span> is to
      evaluate to a <span class="code">Name</span> record.</p>
    <p>The following expression returns the position of the specified
      field in the tuple representation of the record:</p>
    <div class="example"><pre>
#Name.Field</pre></div>
    <p><strong>Example:</strong></p>
    <div class="example"><pre>
-record(person, {name, phone, address}).

...

lookup(Name, List) -&gt;
    lists:keysearch(Name, #person.name, List).</pre></div>
  

  <h3><a name="id87181">10.4 
        Updating Records</a></h3>
    
    <div class="example"><pre>
Expr#Name{Field1=Expr1,...,FieldK=ExprK}</pre></div>
    <p><span class="code">Expr</span> is to evaluate to a <span class="code">Name</span> record. A
      copy of this record is returned, with the value of each specified field
      <span class="code">FieldI</span> changed to the value of evaluating the corresponding
      expression <span class="code">ExprI</span>. All other fields retain their old
      values.</p>
    <p></p>
  

  <h3><a name="id87213">10.5 
        Records in Guards</a></h3>
    
    <p>Since record expressions are expanded to tuple expressions,
      creating records and accessing record fields are allowed in
      guards. However all subexpressions, for example, for field
      initiations, must be valid guard expressions as well.</p>
    <p><strong>Examples:</strong></p>
    <div class="example"><pre>handle(Msg, State) when Msg==#msg{to=void, no=3} -&gt;
    ...

handle(Msg, State) when State#state.running==true -&gt;
    ...</pre></div>
    <p>There is also a type test BIF <span class="code">is_record(Term, RecordTag)</span>.</p>
    <p><strong>Example:</strong></p>
    <div class="example"><pre>
is_person(P) when is_record(P, person) -&gt;
    true;
is_person(_P) -&gt;
    false.</pre></div>
  

  <h3><a name="id87255">10.6 
        Records in Patterns</a></h3>
    
    <p>A pattern that matches a certain record is created in the same
      way as a record is created:</p>
    <div class="example"><pre>
#Name{Field1=Expr1,...,FieldK=ExprK}</pre></div>
    <p>In this case, one or more of <span class="code">Expr1</span>...<span class="code">ExprK</span> can be
      unbound variables.</p>
  

  <h3><a name="id87282">10.7 
        Nested Records</a></h3>
    
    <p>Beginning with Erlang/OTP R14, parentheses when accessing or updating nested
      records can be omitted. Assume the following record
      definitions:</p>
    <div class="example"><pre>
-record(nrec0, {name = "nested0"}).
-record(nrec1, {name = "nested1", nrec0=#nrec0{}}).
-record(nrec2, {name = "nested2", nrec1=#nrec1{}}).

N2 = #nrec2{},
    </pre></div>
    <p>Before R14, parentheses were needed as follows:</p>
    <div class="example"><pre>
"nested0" = ((N2#nrec2.nrec1)#nrec1.nrec0)#nrec0.name,
N0n = ((N2#nrec2.nrec1)#nrec1.nrec0)#nrec0{name = "nested0a"},
    </pre></div>
    <p>Since R14, the following can also be written:</p>
    <div class="example"><pre>
"nested0" = N2#nrec2.nrec1#nrec1.nrec0#nrec0.name,
N0n = N2#nrec2.nrec1#nrec1.nrec0#nrec0{name = "nested0a"},</pre></div>
  

  <h3><a name="id87317">10.8 
        Internal Representation of Records</a></h3>
    
    <p>Record expressions are translated to tuple expressions during
      compilation. A record defined as:</p>
    <div class="example"><pre>
-record(Name, {Field1,...,FieldN}).</pre></div>
    <p>is internally represented by the tuple:</p>
    <div class="example"><pre>
{Name,Value1,...,ValueN}</pre></div>
    <p>Here each <span class="code">ValueI</span> is the default value for <span class="code">FieldI</span>.</p>
    <p>To each module using records, a pseudo function is added
      during compilation to obtain information about records:</p>
    <div class="example"><pre>
record_info(fields, Record) -&gt; [Field]
record_info(size, Record) -&gt; Size</pre></div>
    <p><span class="code">Size</span> is the size of the tuple representation, that is,
      one more than the number of fields.</p>
    <p>In addition, <span class="code">#Record.Name</span> returns the index in the tuple
      representation of <span class="code">Name</span> of the record <span class="code">Record</span>.</p>
    <p><span class="code">Name</span> must be an atom.</p>
  
</div>
<div class="footer">
<hr>
<p>Copyright © 2003-2018 Ericsson AB. All Rights Reserved.</p>
</div>
</div>
</div>
<script type="text/javascript">window.__otpTopDocDir = '../js/';</script><script type="text/javascript" src="../js/highlight.js"></script>
</body>
</html>
