---
layout: patch
name: 22.3.4.21
release: 22
html_url: https://github.com/erlang/otp/releases/tag/OTP-22.3.4.21
published_at: 2021-09-03T05:04:27Z
tag_name: OTP-22.3.4.21
src: https://github.com/erlang/otp/releases/download/OTP-22.3.4.21/otp_src_22.3.4.21.tar.gz
erlang_download_readme: https://erlang.org/download/OTP-22.3.4.21.README
readme: https://github.com/erlang/otp/releases/download/OTP-22.3.4.21/OTP-22.3.4.21.README
html: https://github.com/erlang/otp/releases/download/OTP-22.3.4.21/otp_doc_html_22.3.4.21.tar.gz
man: https://github.com/erlang/otp/releases/download/OTP-22.3.4.21/otp_doc_man_22.3.4.21.tar.gz
Applications:
  erts-10.7.2.13:
    pre: "Note! The erts-10.7.2.13 application *cannot* be applied\n       independently of other applications on an arbitrary OTP 22\n       installation.\n\n       On a full OTP 22 installation, also the following runtime\n       dependency has to be satisfied:\n       -- kernel-6.5.1 (first satisfied in OTP 22.2)"
    post: "Full runtime dependencies of erts-10.7.2.13: kernel-6.5.1, sasl-3.3,\n stdlib-3.5"
    mode: "txt"
    tickets:
      OTP-17470:
        type: " --- Fixed Bugs and Malfunctions ---"
        release_note: "Fixed a bug in zlib where decompression would crash with data_error on some valid inputs. The bug could also cause extraction from a zip archive using zip:extract() to fail.\n\n"
        Applications: "erts"
        RelatedIds: "ERIERL-657"
      OTP-17472:
        type: " --- Fixed Bugs and Malfunctions ---"
        release_note: "A call to erlang:cancel_timer(_, [{info, false}]) could cause the calling process to block forever in the call. Note that only the synchronous version of the call (that is, the async option is false) in combination with the info option set to false was effected by this bug.\n\n"
        Applications: "erts"
        RelatedIds: "PR-4932"
      OTP-17493:
        type: " --- Fixed Bugs and Malfunctions ---"
        release_note: "Microstate accounting (msacc) and os:perf_counter() unintentionally used system time instead of monotonic time for time measurements on a lot of systems. These systems were all non x86/x86_64 systems or x86/x86_64 systems without a reliable and constant rdtsc instruction.\n\nThe lock counting (lcnt) built runtime system also unintentionally used system time instead of monotonic time for time measurements on all systems.\n\n"
        Applications: "erts"
      OTP-17500:
        type: " --- Fixed Bugs and Malfunctions ---"
        release_note: "Simultaneous calls to erlang:system_flag(schedulers_online, _) could cause callers to end up in a suspended state forever.\n\n"
        Applications: "erts"
        RelatedIds: "GH-4809"
      OTP-17513:
        type: " --- Fixed Bugs and Malfunctions ---"
        release_note: "Fix rare race bug in memory management of distribution entries. Have been seen to cause VM crash when massive number of repeated concurrent failing connection attempts.\n\n"
        Applications: "erts"
        RelatedIds: "GH-4964, PR-5015"
      OTP-17560:
        type: " --- Fixed Bugs and Malfunctions ---"
        release_note: "Fix buffer overrun problem in the tty driver. The problem happens on some platforms when using the CTRL+R functionality of newshell with very long strings in the history.\n\n"
        Applications: "erts"
        RelatedIds: "GH-5116"
      OTP-17568:
        type: " --- Fixed Bugs and Malfunctions ---"
        release_note: "Fix race-condition that could cause a crash when tracing scheduling or garbage collections on a process that was running on a dirty scheduler.\n\n"
        Applications: "erts"
        RelatedIds: "PR-4940"
      OTP-17585:
        type: " --- Fixed Bugs and Malfunctions ---"
        release_note: "Fix rare bug where re:run would crash/return invalid results when given a subbinary as subject.\n\nThis bug has existed since Erlang/OTP 20.0.\n\n"
        Applications: "erts"
        RelatedIds: "GH-5150"
      OTP-17594:
        type: " --- Fixed Bugs and Malfunctions ---"
        release_note: "binary_to_term/1,2 is now more resilient against corrupted binaries containing maps in the external format.\n\n"
        Applications: "erts"
  kernel-6.5.2.4:
    pre: "Note! The kernel-6.5.2.4 application *cannot* be applied\n       independently of other applications on an arbitrary OTP 22\n       installation.\n\n       On a full OTP 22 installation, also the following runtime\n       dependency has to be satisfied:\n       -- erts-10.6 (first satisfied in OTP 22.2)"
    post: "Full runtime dependencies of kernel-6.5.2.4: erts-10.6, sasl-3.0,\n stdlib-3.5"
    mode: "txt"
    tickets:
      OTP-17476:
        type: " --- Fixed Bugs and Malfunctions ---"
        release_note: "Fixed rare bug that could cause net_kernel process to hang for ever. Have seen to happen with massive number of TLS connections while remote nodes are restarting. Bug exists since OTP-22.0.\n\n"
        Applications: "kernel"
        RelatedIds: "GH-4931, PR-4934"
  stdlib-3.12.1.2:
    pre: "Note! The stdlib-3.12.1.2 application *cannot* be applied\n       independently of other applications on an arbitrary OTP 22\n       installation.\n\n       On a full OTP 22 installation, also the following runtime\n       dependency has to be satisfied:\n       -- erts-10.7.1 (first satisfied in OTP 22.3.1)"
    post: "Full runtime dependencies of stdlib-3.12.1.2: compiler-5.0,\n crypto-3.3, erts-10.7.1, kernel-6.0, sasl-3.0"
    mode: "txt"
    tickets:
      OTP-17525:
        type: " --- Fixed Bugs and Malfunctions ---"
        release_note: "Fix a bug that could cause a crash when formatting tuples using the control sequences p or P and limiting the output with the option chars_limit.\n\n"
        Applications: "stdlib"
        RelatedIds: "GH-5053"
Application:
  - erts-10.7.2.13
  - kernel-6.5.2.4
  - stdlib-3.12.1.2
Date: 2021-09-03
GitTag: OTP-22.3.4.21
PatchPackage: OTP 22.3.4.21
Predecessor: OTP 22.3.4.20
Release: 22
Seqnum:
  - ERIERL-657
  - GH-4809
  - GH-4931
  - GH-4964
  - GH-5053
  - GH-5116
  - GH-5150
System: OTP
TroubleReportId:
  - OTP-17470
  - OTP-17472
  - OTP-17476
  - OTP-17493
  - OTP-17500
  - OTP-17513
  - OTP-17525
  - OTP-17560
  - OTP-17568
  - OTP-17585
  - OTP-17594
---
## OTP-22.3.4.21
