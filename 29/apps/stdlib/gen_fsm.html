<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.38.1">
    <meta name="project" content="stdlib v7.1-rc0">


<meta name="major-vsn" content="29">
<meta name="exdoc:full-text-search-url" content="/doc/search.html?v=29&q=">
<link rel="canonical" href="https://www.erlang.org/doc/apps/stdlib/gen_fsm.html" />
    <title>gen_fsm â€” stdlib v7.1-rc0</title>

    <link rel="stylesheet" href="dist/html-erlang-ZK43ZOAC.css" />

    <script defer src="dist/sidebar_items-4F7E9F36.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-DPJLHKSM.js"></script>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="../../index.html" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="stdlib" />
        </a>

      <div>
        <a href="../../index.html" class="sidebar-projectName" translate="no">
stdlib
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v7.1-rc0
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras=""></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-behaviour" id="main" data-type="modules">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of stdlib</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search" tabindex="-1">
            <i class="ri-search-2-line ri-lg" aria-hidden="true"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>
      <span translate="no">gen_fsm</span> <small>behaviour</small>
      <small class="app-vsn" translate="no">(stdlib v7.1-rc0)</small>

    </h1>

      <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/gen_fsm.erl#L22" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

  </div>


    <section id="moduledoc">
<p>Deprecated and replaced by <a href="gen_statem.html"><code class="inline">gen_statem</code></a> in OTP 20.</p><h2 id="module-migration-to-gen_statem" class="section-heading"><a href="#module-migration-to-gen_statem" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Migration to gen_statem</span></h2><p>Here follows a simple example of turning a gen_fsm into a <a href="gen_statem.html"><code class="inline">gen_statem</code></a>.
The example comes from the previous User's Guide for <code class="inline">gen_fsm</code></p><pre><code class="makeup erlang" translate="no"><span class="p">-</span><span class="na">module</span><span class="p" data-group-id="7707978916-1">(</span><span class="ss">code_lock</span><span class="p" data-group-id="7707978916-1">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">define</span><span class="p" data-group-id="7707978916-2">(</span><span class="n">NAME</span><span class="p">,</span><span class="w"> </span><span class="ss">code_lock</span><span class="p" data-group-id="7707978916-2">)</span><span class="p">.</span><span class="w">
</span><span class="c1">%-define(BEFORE_REWRITE, true).</span><span class="w">
</span><span class="w">
</span><span class="p">-</span><span class="na">ifdef</span><span class="p" data-group-id="7707978916-3">(</span><span class="n">BEFORE_REWRITE</span><span class="p" data-group-id="7707978916-3">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">behaviour</span><span class="p" data-group-id="7707978916-4">(</span><span class="ss">gen_fsm</span><span class="p" data-group-id="7707978916-4">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">else</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">behaviour</span><span class="p" data-group-id="7707978916-5">(</span><span class="ss">gen_statem</span><span class="p" data-group-id="7707978916-5">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">endif</span><span class="p">.</span><span class="w">
</span><span class="w">
</span><span class="p">-</span><span class="na">export</span><span class="p" data-group-id="7707978916-6">(</span><span class="p" data-group-id="7707978916-7">[</span><span class="ss">start_link</span><span class="p">/</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">button</span><span class="p">/</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">stop</span><span class="p">/</span><span class="mi">0</span><span class="p" data-group-id="7707978916-7">]</span><span class="p" data-group-id="7707978916-6">)</span><span class="p">.</span><span class="w">
</span><span class="w">
</span><span class="p">-</span><span class="na">ifdef</span><span class="p" data-group-id="7707978916-8">(</span><span class="n">BEFORE_REWRITE</span><span class="p" data-group-id="7707978916-8">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">export</span><span class="p" data-group-id="7707978916-9">(</span><span class="p" data-group-id="7707978916-10">[</span><span class="ss">init</span><span class="p">/</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">locked</span><span class="p">/</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">open</span><span class="p">/</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">handle_sync_event</span><span class="p">/</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="ss">handle_event</span><span class="p">/</span><span class="mi">3</span><span class="p">,</span><span class="w">
     </span><span class="ss">handle_info</span><span class="p">/</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="ss">terminate</span><span class="p">/</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="ss">code_change</span><span class="p">/</span><span class="mi">4</span><span class="p" data-group-id="7707978916-10">]</span><span class="p" data-group-id="7707978916-9">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">else</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">export</span><span class="p" data-group-id="7707978916-11">(</span><span class="p" data-group-id="7707978916-12">[</span><span class="ss">init</span><span class="p">/</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">callback_mode</span><span class="p">/</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">locked</span><span class="p">/</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="ss">open</span><span class="p">/</span><span class="mi">3</span><span class="p">,</span><span class="w">
     </span><span class="ss">terminate</span><span class="p">/</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="ss">code_change</span><span class="p">/</span><span class="mi">4</span><span class="p" data-group-id="7707978916-12">]</span><span class="p" data-group-id="7707978916-11">)</span><span class="p">.</span><span class="w">
</span><span class="c1">%% Add callback__mode/0</span><span class="w">
</span><span class="c1">%% Change arity of the state functions</span><span class="w">
</span><span class="c1">%% Remove handle_info/3</span><span class="w">
</span><span class="p">-</span><span class="na">endif</span><span class="p">.</span><span class="w">
</span><span class="w">
</span><span class="p">-</span><span class="na">ifdef</span><span class="p" data-group-id="7707978916-13">(</span><span class="n">BEFORE_REWRITE</span><span class="p" data-group-id="7707978916-13">)</span><span class="p">.</span><span class="w">
</span><span class="nf">start_link</span><span class="p" data-group-id="7707978916-14">(</span><span class="n">Code</span><span class="p" data-group-id="7707978916-14">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nc">gen_fsm</span><span class="p">:</span><span class="nf">start_link</span><span class="p" data-group-id="7707978916-15">(</span><span class="p" data-group-id="7707978916-16">{</span><span class="ss">local</span><span class="p">,</span><span class="w"> </span><span class="o">?</span><span class="n">NAME</span><span class="p" data-group-id="7707978916-16">}</span><span class="p">,</span><span class="w"> </span><span class="o">?</span><span class="n">MODULE</span><span class="p">,</span><span class="w"> </span><span class="n">Code</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7707978916-17">[</span><span class="p" data-group-id="7707978916-17">]</span><span class="p" data-group-id="7707978916-15">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">else</span><span class="p">.</span><span class="w">
</span><span class="nf">start_link</span><span class="p" data-group-id="7707978916-18">(</span><span class="n">Code</span><span class="p" data-group-id="7707978916-18">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nc">gen_statem</span><span class="p">:</span><span class="nf">start_link</span><span class="p" data-group-id="7707978916-19">(</span><span class="p" data-group-id="7707978916-20">{</span><span class="ss">local</span><span class="p">,</span><span class="o">?</span><span class="n">NAME</span><span class="p" data-group-id="7707978916-20">}</span><span class="p">,</span><span class="w"> </span><span class="o">?</span><span class="n">MODULE</span><span class="p">,</span><span class="w"> </span><span class="n">Code</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7707978916-21">[</span><span class="p" data-group-id="7707978916-21">]</span><span class="p" data-group-id="7707978916-19">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">endif</span><span class="p">.</span><span class="w">
</span><span class="w">
</span><span class="p">-</span><span class="na">ifdef</span><span class="p" data-group-id="7707978916-22">(</span><span class="n">BEFORE_REWRITE</span><span class="p" data-group-id="7707978916-22">)</span><span class="p">.</span><span class="w">
</span><span class="nf">button</span><span class="p" data-group-id="7707978916-23">(</span><span class="n">Digit</span><span class="p" data-group-id="7707978916-23">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nc">gen_fsm</span><span class="p">:</span><span class="nf">send_event</span><span class="p" data-group-id="7707978916-24">(</span><span class="o">?</span><span class="n">NAME</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7707978916-25">{</span><span class="ss">button</span><span class="p">,</span><span class="w"> </span><span class="n">Digit</span><span class="p" data-group-id="7707978916-25">}</span><span class="p" data-group-id="7707978916-24">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">else</span><span class="p">.</span><span class="w">
</span><span class="nf">button</span><span class="p" data-group-id="7707978916-26">(</span><span class="n">Digit</span><span class="p" data-group-id="7707978916-26">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nc">gen_statem</span><span class="p">:</span><span class="nf">cast</span><span class="p" data-group-id="7707978916-27">(</span><span class="o">?</span><span class="n">NAME</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7707978916-28">{</span><span class="ss">button</span><span class="p">,</span><span class="n">Digit</span><span class="p" data-group-id="7707978916-28">}</span><span class="p" data-group-id="7707978916-27">)</span><span class="p">.</span><span class="w">
    </span><span class="c1">%% send_event is asynchronous and becomes a cast</span><span class="w">
</span><span class="p">-</span><span class="na">endif</span><span class="p">.</span><span class="w">
</span><span class="w">
</span><span class="p">-</span><span class="na">ifdef</span><span class="p" data-group-id="7707978916-29">(</span><span class="n">BEFORE_REWRITE</span><span class="p" data-group-id="7707978916-29">)</span><span class="p">.</span><span class="w">
</span><span class="nf">stop</span><span class="p" data-group-id="7707978916-30">(</span><span class="p" data-group-id="7707978916-30">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nc">gen_fsm</span><span class="p">:</span><span class="nf">sync_send_all_state_event</span><span class="p" data-group-id="7707978916-31">(</span><span class="o">?</span><span class="n">NAME</span><span class="p">,</span><span class="w"> </span><span class="ss">stop</span><span class="p" data-group-id="7707978916-31">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">else</span><span class="p">.</span><span class="w">
</span><span class="nf">stop</span><span class="p" data-group-id="7707978916-32">(</span><span class="p" data-group-id="7707978916-32">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nc">gen_statem</span><span class="p">:</span><span class="nf">call</span><span class="p" data-group-id="7707978916-33">(</span><span class="o">?</span><span class="n">NAME</span><span class="p">,</span><span class="w"> </span><span class="ss">stop</span><span class="p" data-group-id="7707978916-33">)</span><span class="p">.</span><span class="w">
    </span><span class="c1">%% sync_send is synchronous and becomes call</span><span class="w">
    </span><span class="c1">%% all_state is handled by callback code in gen_statem</span><span class="w">
</span><span class="p">-</span><span class="na">endif</span><span class="p">.</span><span class="w">

</span><span class="nf">init</span><span class="p" data-group-id="7707978916-34">(</span><span class="n">Code</span><span class="p" data-group-id="7707978916-34">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nf">do_lock</span><span class="p" data-group-id="7707978916-35">(</span><span class="p" data-group-id="7707978916-35">)</span><span class="p">,</span><span class="w">
    </span><span class="n">Data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="7707978916-36">#{</span><span class="ss">code</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="n">Code</span><span class="p">,</span><span class="w"> </span><span class="ss">remaining</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="n">Code</span><span class="p" data-group-id="7707978916-36">}</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="7707978916-37">{</span><span class="ss">ok</span><span class="p">,</span><span class="w"> </span><span class="ss">locked</span><span class="p">,</span><span class="w"> </span><span class="n">Data</span><span class="p" data-group-id="7707978916-37">}</span><span class="p">.</span><span class="w">
</span><span class="w">
</span><span class="p">-</span><span class="na">ifdef</span><span class="p" data-group-id="7707978916-38">(</span><span class="n">BEFORE_REWRITE</span><span class="p" data-group-id="7707978916-38">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">else</span><span class="p">.</span><span class="w">
</span><span class="nf">callback_mode</span><span class="p" data-group-id="7707978916-39">(</span><span class="p" data-group-id="7707978916-39">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="ss">state_functions</span><span class="p">.</span><span class="w">
</span><span class="c1">%% state_functions mode is the mode most similar to</span><span class="w">
</span><span class="c1">%% gen_fsm. There is also handle_event mode which is</span><span class="w">
</span><span class="c1">%% a fairly different concept.</span><span class="w">
</span><span class="p">-</span><span class="na">endif</span><span class="p">.</span><span class="w">
</span><span class="w">
</span><span class="p">-</span><span class="na">ifdef</span><span class="p" data-group-id="7707978916-40">(</span><span class="n">BEFORE_REWRITE</span><span class="p" data-group-id="7707978916-40">)</span><span class="p">.</span><span class="w">
</span><span class="nf">locked</span><span class="p" data-group-id="7707978916-41">(</span><span class="p" data-group-id="7707978916-42">{</span><span class="ss">button</span><span class="p">,</span><span class="w"> </span><span class="n">Digit</span><span class="p" data-group-id="7707978916-42">}</span><span class="p">,</span><span class="w"> </span><span class="n">Data0</span><span class="p" data-group-id="7707978916-41">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="k">case</span><span class="w"> </span><span class="nf">analyze_lock</span><span class="p" data-group-id="7707978916-43">(</span><span class="n">Digit</span><span class="p">,</span><span class="w"> </span><span class="n">Data0</span><span class="p" data-group-id="7707978916-43">)</span><span class="w"> </span><span class="k">of</span><span class="w">
    </span><span class="p" data-group-id="7707978916-44">{</span><span class="ss">open</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">StateName</span><span class="p">,</span><span class="w"> </span><span class="n">Data</span><span class="p" data-group-id="7707978916-44">}</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
        </span><span class="p" data-group-id="7707978916-45">{</span><span class="ss">next_state</span><span class="p">,</span><span class="w"> </span><span class="n">StateName</span><span class="p">,</span><span class="w"> </span><span class="n">Data</span><span class="p">,</span><span class="w"> </span><span class="mi">10000</span><span class="p" data-group-id="7707978916-45">}</span><span class="p">;</span><span class="w">
    </span><span class="p" data-group-id="7707978916-46">{</span><span class="n">StateName</span><span class="p">,</span><span class="w"> </span><span class="n">Data</span><span class="p" data-group-id="7707978916-46">}</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
        </span><span class="p" data-group-id="7707978916-47">{</span><span class="ss">next_state</span><span class="p">,</span><span class="w"> </span><span class="n">StateName</span><span class="p">,</span><span class="w"> </span><span class="n">Data</span><span class="p" data-group-id="7707978916-47">}</span><span class="w">
    </span><span class="k">end</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">else</span><span class="p">.</span><span class="w">
</span><span class="nf">locked</span><span class="p" data-group-id="7707978916-48">(</span><span class="ss">cast</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7707978916-49">{</span><span class="ss">button</span><span class="p">,</span><span class="n">Digit</span><span class="p" data-group-id="7707978916-49">}</span><span class="p">,</span><span class="w"> </span><span class="n">Data0</span><span class="p" data-group-id="7707978916-48">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="k">case</span><span class="w"> </span><span class="nf">analyze_lock</span><span class="p" data-group-id="7707978916-50">(</span><span class="n">Digit</span><span class="p">,</span><span class="w"> </span><span class="n">Data0</span><span class="p" data-group-id="7707978916-50">)</span><span class="w"> </span><span class="k">of</span><span class="w">
    </span><span class="p" data-group-id="7707978916-51">{</span><span class="ss">open</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">StateName</span><span class="p">,</span><span class="w"> </span><span class="n">Data</span><span class="p" data-group-id="7707978916-51">}</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
        </span><span class="p" data-group-id="7707978916-52">{</span><span class="ss">next_state</span><span class="p">,</span><span class="w"> </span><span class="n">StateName</span><span class="p">,</span><span class="w"> </span><span class="n">Data</span><span class="p">,</span><span class="w"> </span><span class="mi">10000</span><span class="p" data-group-id="7707978916-52">}</span><span class="p">;</span><span class="w">
    </span><span class="p" data-group-id="7707978916-53">{</span><span class="n">StateName</span><span class="p">,</span><span class="w"> </span><span class="n">Data</span><span class="p" data-group-id="7707978916-53">}</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
        </span><span class="p" data-group-id="7707978916-54">{</span><span class="ss">next_state</span><span class="p">,</span><span class="w"> </span><span class="n">StateName</span><span class="p">,</span><span class="w"> </span><span class="n">Data</span><span class="p" data-group-id="7707978916-54">}</span><span class="w">
    </span><span class="k">end</span><span class="p">;</span><span class="w">
</span><span class="nf">locked</span><span class="p" data-group-id="7707978916-55">(</span><span class="p" data-group-id="7707978916-56">{</span><span class="ss">call</span><span class="p">,</span><span class="w"> </span><span class="n">From</span><span class="p" data-group-id="7707978916-56">}</span><span class="p">,</span><span class="w"> </span><span class="n">Msg</span><span class="p">,</span><span class="w"> </span><span class="n">Data</span><span class="p" data-group-id="7707978916-55">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nf">handle_call</span><span class="p" data-group-id="7707978916-57">(</span><span class="n">From</span><span class="p">,</span><span class="w"> </span><span class="n">Msg</span><span class="p">,</span><span class="w"> </span><span class="n">Data</span><span class="p" data-group-id="7707978916-57">)</span><span class="p">;</span><span class="w">
</span><span class="nf">locked</span><span class="p" data-group-id="7707978916-58">(</span><span class="p" data-group-id="7707978916-59">{</span><span class="ss">info</span><span class="p">,</span><span class="w"> </span><span class="n">Msg</span><span class="p" data-group-id="7707978916-59">}</span><span class="p">,</span><span class="w"> </span><span class="n">StateName</span><span class="p">,</span><span class="w"> </span><span class="n">Data</span><span class="p" data-group-id="7707978916-58">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nf">handle_info</span><span class="p" data-group-id="7707978916-60">(</span><span class="n">Msg</span><span class="p">,</span><span class="w"> </span><span class="n">StateName</span><span class="p">,</span><span class="w"> </span><span class="n">Data</span><span class="p" data-group-id="7707978916-60">)</span><span class="p">.</span><span class="w">
</span><span class="c1">%% Arity differs</span><span class="w">
</span><span class="c1">%% All state events are dispatched to handle_call and handle_info help</span><span class="w">
</span><span class="c1">%% functions. If you want to handle a call or cast event specifically</span><span class="w">
</span><span class="c1">%% for this state you would add a special clause for it above.</span><span class="w">
</span><span class="p">-</span><span class="na">endif</span><span class="p">.</span><span class="w">
</span><span class="w">
</span><span class="p">-</span><span class="na">ifdef</span><span class="p" data-group-id="7707978916-61">(</span><span class="n">BEFORE_REWRITE</span><span class="p" data-group-id="7707978916-61">)</span><span class="p">.</span><span class="w">
</span><span class="nf">open</span><span class="p" data-group-id="7707978916-62">(</span><span class="ss">timeout</span><span class="p">,</span><span class="w"> </span><span class="n">State</span><span class="p" data-group-id="7707978916-62">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
     </span><span class="nf">do_lock</span><span class="p" data-group-id="7707978916-63">(</span><span class="p" data-group-id="7707978916-63">)</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="7707978916-64">{</span><span class="ss">next_state</span><span class="p">,</span><span class="w"> </span><span class="ss">locked</span><span class="p">,</span><span class="w"> </span><span class="n">State</span><span class="p" data-group-id="7707978916-64">}</span><span class="p">;</span><span class="w">
</span><span class="nf">open</span><span class="p" data-group-id="7707978916-65">(</span><span class="p" data-group-id="7707978916-66">{</span><span class="ss">button</span><span class="p">,</span><span class="p">_</span><span class="p" data-group-id="7707978916-66">}</span><span class="p">,</span><span class="w"> </span><span class="n">Data</span><span class="p" data-group-id="7707978916-65">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="p" data-group-id="7707978916-67">{</span><span class="ss">next_state</span><span class="p">,</span><span class="w"> </span><span class="ss">locked</span><span class="p">,</span><span class="w"> </span><span class="n">Data</span><span class="p" data-group-id="7707978916-67">}</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">else</span><span class="p">.</span><span class="w">
</span><span class="nf">open</span><span class="p" data-group-id="7707978916-68">(</span><span class="ss">timeout</span><span class="p">,</span><span class="w"> </span><span class="p">_</span><span class="p">,</span><span class="w"> </span><span class="n">Data</span><span class="p" data-group-id="7707978916-68">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nf">do_lock</span><span class="p" data-group-id="7707978916-69">(</span><span class="p" data-group-id="7707978916-69">)</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="7707978916-70">{</span><span class="ss">next_state</span><span class="p">,</span><span class="w"> </span><span class="ss">locked</span><span class="p">,</span><span class="w"> </span><span class="n">Data</span><span class="p" data-group-id="7707978916-70">}</span><span class="p">;</span><span class="w">
</span><span class="nf">open</span><span class="p" data-group-id="7707978916-71">(</span><span class="ss">cast</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7707978916-72">{</span><span class="ss">button</span><span class="p">,</span><span class="p">_</span><span class="p" data-group-id="7707978916-72">}</span><span class="p">,</span><span class="w"> </span><span class="n">Data</span><span class="p" data-group-id="7707978916-71">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="p" data-group-id="7707978916-73">{</span><span class="ss">next_state</span><span class="p">,</span><span class="w"> </span><span class="ss">locked</span><span class="p">,</span><span class="w"> </span><span class="n">Data</span><span class="p" data-group-id="7707978916-73">}</span><span class="p">;</span><span class="w">
</span><span class="nf">open</span><span class="p" data-group-id="7707978916-74">(</span><span class="p" data-group-id="7707978916-75">{</span><span class="ss">call</span><span class="p">,</span><span class="w"> </span><span class="n">From</span><span class="p" data-group-id="7707978916-75">}</span><span class="p">,</span><span class="w"> </span><span class="n">Msg</span><span class="p">,</span><span class="w"> </span><span class="n">Data</span><span class="p" data-group-id="7707978916-74">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nf">handle_call</span><span class="p" data-group-id="7707978916-76">(</span><span class="n">From</span><span class="p">,</span><span class="w"> </span><span class="n">Msg</span><span class="p">,</span><span class="w"> </span><span class="n">Data</span><span class="p" data-group-id="7707978916-76">)</span><span class="p">;</span><span class="w">
</span><span class="nf">open</span><span class="p" data-group-id="7707978916-77">(</span><span class="ss">info</span><span class="p">,</span><span class="w"> </span><span class="n">Msg</span><span class="p">,</span><span class="w"> </span><span class="n">Data</span><span class="p" data-group-id="7707978916-77">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nf">handle_info</span><span class="p" data-group-id="7707978916-78">(</span><span class="n">Msg</span><span class="p">,</span><span class="w"> </span><span class="ss">open</span><span class="p">,</span><span class="w"> </span><span class="n">Data</span><span class="p" data-group-id="7707978916-78">)</span><span class="p">.</span><span class="w">
</span><span class="c1">%% Arity differs</span><span class="w">
</span><span class="c1">%% All state events are dispatched to handle_call and handle_info help</span><span class="w">
</span><span class="c1">%% functions. If you want to handle a call or cast event specifically</span><span class="w">
</span><span class="c1">%% for this state you would add a special clause for it above.</span><span class="w">
</span><span class="p">-</span><span class="na">endif</span><span class="p">.</span><span class="w">
</span><span class="w">
</span><span class="p">-</span><span class="na">ifdef</span><span class="p" data-group-id="7707978916-79">(</span><span class="n">BEFORE_REWRITE</span><span class="p" data-group-id="7707978916-79">)</span><span class="p">.</span><span class="w">
</span><span class="nf">handle_sync_event</span><span class="p" data-group-id="7707978916-80">(</span><span class="ss">stop</span><span class="p">,</span><span class="w"> </span><span class="p">_</span><span class="n">From</span><span class="p">,</span><span class="w"> </span><span class="p">_</span><span class="n">StateName</span><span class="p">,</span><span class="w"> </span><span class="n">Data</span><span class="p" data-group-id="7707978916-80">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="p" data-group-id="7707978916-81">{</span><span class="ss">stop</span><span class="p">,</span><span class="w"> </span><span class="ss">normal</span><span class="p">,</span><span class="w"> </span><span class="ss">ok</span><span class="p">,</span><span class="w"> </span><span class="n">Data</span><span class="p" data-group-id="7707978916-81">}</span><span class="p">.</span><span class="w">

</span><span class="nf">handle_event</span><span class="p" data-group-id="7707978916-82">(</span><span class="n">Event</span><span class="p">,</span><span class="w"> </span><span class="n">StateName</span><span class="p">,</span><span class="w"> </span><span class="n">Data</span><span class="p" data-group-id="7707978916-82">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="p" data-group-id="7707978916-83">{</span><span class="ss">stop</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7707978916-84">{</span><span class="ss">shutdown</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7707978916-85">{</span><span class="ss">unexpected</span><span class="p">,</span><span class="w"> </span><span class="n">Event</span><span class="p">,</span><span class="w"> </span><span class="n">StateName</span><span class="p" data-group-id="7707978916-85">}</span><span class="p" data-group-id="7707978916-84">}</span><span class="p">,</span><span class="w"> </span><span class="n">Data</span><span class="p" data-group-id="7707978916-83">}</span><span class="p">.</span><span class="w">

</span><span class="nf">handle_info</span><span class="p" data-group-id="7707978916-86">(</span><span class="n">Info</span><span class="p">,</span><span class="w"> </span><span class="n">StateName</span><span class="p">,</span><span class="w"> </span><span class="n">Data</span><span class="p" data-group-id="7707978916-86">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="p" data-group-id="7707978916-87">{</span><span class="ss">stop</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7707978916-88">{</span><span class="ss">shutdown</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7707978916-89">{</span><span class="ss">unexpected</span><span class="p">,</span><span class="w"> </span><span class="n">Info</span><span class="p">,</span><span class="w"> </span><span class="n">StateName</span><span class="p" data-group-id="7707978916-89">}</span><span class="p" data-group-id="7707978916-88">}</span><span class="p">,</span><span class="w"> </span><span class="n">StateName</span><span class="p">,</span><span class="w"> </span><span class="n">Data</span><span class="p" data-group-id="7707978916-87">}</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">else</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">endif</span><span class="p">.</span><span class="w">

</span><span class="nf">terminate</span><span class="p" data-group-id="7707978916-90">(</span><span class="p">_</span><span class="n">Reason</span><span class="p">,</span><span class="w"> </span><span class="n">State</span><span class="p">,</span><span class="w"> </span><span class="p">_</span><span class="n">Data</span><span class="p" data-group-id="7707978916-90">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="n">State</span><span class="w"> </span><span class="o">=/=</span><span class="w"> </span><span class="ss">locked</span><span class="w"> </span><span class="ow">andalso</span><span class="w"> </span><span class="nf">do_lock</span><span class="p" data-group-id="7707978916-91">(</span><span class="p" data-group-id="7707978916-91">)</span><span class="p">,</span><span class="w">
    </span><span class="ss">ok</span><span class="p">.</span><span class="w">
</span><span class="nf">code_change</span><span class="p" data-group-id="7707978916-92">(</span><span class="p">_</span><span class="n">Vsn</span><span class="p">,</span><span class="w"> </span><span class="n">State</span><span class="p">,</span><span class="w"> </span><span class="n">Data</span><span class="p">,</span><span class="w"> </span><span class="p">_</span><span class="n">Extra</span><span class="p" data-group-id="7707978916-92">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="p" data-group-id="7707978916-93">{</span><span class="ss">ok</span><span class="p">,</span><span class="w"> </span><span class="n">State</span><span class="p">,</span><span class="w"> </span><span class="n">Data</span><span class="p" data-group-id="7707978916-93">}</span><span class="p">.</span><span class="w">

</span><span class="c1">%% Internal functions</span><span class="w">
</span><span class="p">-</span><span class="na">ifdef</span><span class="p" data-group-id="7707978916-94">(</span><span class="n">BEFORE_REWRITE</span><span class="p" data-group-id="7707978916-94">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">else</span><span class="p">.</span><span class="w">
</span><span class="nf">handle_call</span><span class="p" data-group-id="7707978916-95">(</span><span class="n">From</span><span class="p">,</span><span class="w"> </span><span class="ss">stop</span><span class="p">,</span><span class="w"> </span><span class="n">Data</span><span class="p" data-group-id="7707978916-95">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
     </span><span class="p" data-group-id="7707978916-96">{</span><span class="ss">stop_and_reply</span><span class="p">,</span><span class="w"> </span><span class="ss">normal</span><span class="p">,</span><span class="w">  </span><span class="p" data-group-id="7707978916-97">{</span><span class="ss">reply</span><span class="p">,</span><span class="w"> </span><span class="n">From</span><span class="p">,</span><span class="w"> </span><span class="ss">ok</span><span class="p" data-group-id="7707978916-97">}</span><span class="p">,</span><span class="w"> </span><span class="n">Data</span><span class="p" data-group-id="7707978916-96">}</span><span class="p">.</span><span class="w">

</span><span class="nf">handle_info</span><span class="p" data-group-id="7707978916-98">(</span><span class="n">Info</span><span class="p">,</span><span class="w"> </span><span class="n">StateName</span><span class="p">,</span><span class="w"> </span><span class="n">Data</span><span class="p" data-group-id="7707978916-98">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="p" data-group-id="7707978916-99">{</span><span class="ss">stop</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7707978916-100">{</span><span class="ss">shutdown</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7707978916-101">{</span><span class="ss">unexpected</span><span class="p">,</span><span class="w"> </span><span class="n">Info</span><span class="p">,</span><span class="w"> </span><span class="n">StateName</span><span class="p" data-group-id="7707978916-101">}</span><span class="p" data-group-id="7707978916-100">}</span><span class="p">,</span><span class="w"> </span><span class="n">StateName</span><span class="p">,</span><span class="w"> </span><span class="n">Data</span><span class="p" data-group-id="7707978916-99">}</span><span class="p">.</span><span class="w">
</span><span class="c1">%% These are internal functions for handling all state events</span><span class="w">
</span><span class="c1">%% and not behaviour callbacks as in gen_fsm</span><span class="w">
</span><span class="p">-</span><span class="na">endif</span><span class="p">.</span><span class="w">

</span><span class="nf">analyze_lock</span><span class="p" data-group-id="7707978916-102">(</span><span class="n">Digit</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7707978916-103">#{</span><span class="ss">code</span><span class="w"> </span><span class="p">:=</span><span class="w"> </span><span class="n">Code</span><span class="p">,</span><span class="w"> </span><span class="ss">remaining</span><span class="w"> </span><span class="p">:=</span><span class="w"> </span><span class="n">Remaining</span><span class="p" data-group-id="7707978916-103">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Data</span><span class="p" data-group-id="7707978916-102">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
     </span><span class="k">case</span><span class="w"> </span><span class="n">Remaining</span><span class="w"> </span><span class="k">of</span><span class="w">
         </span><span class="p" data-group-id="7707978916-104">[</span><span class="n">Digit</span><span class="p" data-group-id="7707978916-104">]</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
         </span><span class="nf">do_unlock</span><span class="p" data-group-id="7707978916-105">(</span><span class="p" data-group-id="7707978916-105">)</span><span class="p">,</span><span class="w">
         </span><span class="p" data-group-id="7707978916-106">{</span><span class="ss">open</span><span class="p">,</span><span class="w">  </span><span class="n">Data</span><span class="p" data-group-id="7707978916-107">#{</span><span class="ss">remaining</span><span class="w"> </span><span class="p">:=</span><span class="w"> </span><span class="n">Code</span><span class="p" data-group-id="7707978916-107">}</span><span class="p" data-group-id="7707978916-106">}</span><span class="p">;</span><span class="w">
         </span><span class="p" data-group-id="7707978916-108">[</span><span class="n">Digit</span><span class="p">|</span><span class="n">Rest</span><span class="p" data-group-id="7707978916-108">]</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="c1">% Incomplete</span><span class="w">
             </span><span class="p" data-group-id="7707978916-109">{</span><span class="ss">locked</span><span class="p">,</span><span class="w"> </span><span class="n">Data</span><span class="p" data-group-id="7707978916-110">#{</span><span class="ss">remaining</span><span class="w"> </span><span class="p">:=</span><span class="w"> </span><span class="n">Rest</span><span class="p" data-group-id="7707978916-110">}</span><span class="p" data-group-id="7707978916-109">}</span><span class="p">;</span><span class="w">
         </span><span class="p">_</span><span class="n">Wrong</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
             </span><span class="p" data-group-id="7707978916-111">{</span><span class="ss">locked</span><span class="p">,</span><span class="w"> </span><span class="n">Data</span><span class="p" data-group-id="7707978916-112">#{</span><span class="ss">remaining</span><span class="w"> </span><span class="p">:=</span><span class="w"> </span><span class="n">Code</span><span class="p" data-group-id="7707978916-112">}</span><span class="p" data-group-id="7707978916-111">}</span><span class="w">
     </span><span class="k">end</span><span class="p">.</span><span class="w">

</span><span class="nf">do_lock</span><span class="p" data-group-id="7707978916-113">(</span><span class="p" data-group-id="7707978916-113">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nc">io</span><span class="p">:</span><span class="nf">format</span><span class="p" data-group-id="7707978916-114">(</span><span class="s">&quot;Lock</span><span class="si">~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7707978916-115">[</span><span class="p" data-group-id="7707978916-115">]</span><span class="p" data-group-id="7707978916-114">)</span><span class="p">.</span><span class="w">
</span><span class="nf">do_unlock</span><span class="p" data-group-id="7707978916-116">(</span><span class="p" data-group-id="7707978916-116">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nc">io</span><span class="p">:</span><span class="nf">format</span><span class="p" data-group-id="7707978916-117">(</span><span class="s">&quot;Unlock</span><span class="si">~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7707978916-118">[</span><span class="p" data-group-id="7707978916-118">]</span><span class="p" data-group-id="7707978916-117">)</span><span class="p">.</span></code></pre><h2 id="module-otp-19-documentation" class="section-heading"><a href="#module-otp-19-documentation" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">OTP 19 Documentation</span></h2><h3 id="module-module" class="section-heading"><a href="#module-module" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Module</span></h3><p><code class="inline">gen_fsm</code></p><h3 id="module-module-summary" class="section-heading"><a href="#module-module-summary" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Module Summary</span></h3><p>Generic finite state machine behavior.</p><h3 id="module-description" class="section-heading"><a href="#module-description" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Description</span></h3><p>This behavior module provides a finite state machine.
A generic finite state machine process (<code class="inline">gen_fsm</code>) implemented
using this module has a standard set of interface functions
and includes functionality for tracing and error reporting.
It also fits into an OTP supervision tree.  For more information,
see <a href="../../system/design_principles.html">OTP Design Principles</a>.</p><p>A <code class="inline">gen_fsm</code> process assumes all specific parts to be located
in a callback module exporting a predefined set of functions.
The relationship between the behavior functions
and the callback functions is as follows:</p><pre><code class="text">gen_fsm module                    Callback module
--------------                    ---------------
gen_fsm:start
gen_fsm:start_link                -----&gt; Module:init/1

gen_fsm:stop                      -----&gt; Module:terminate/3

gen_fsm:send_event                -----&gt; Module:StateName/2

gen_fsm:send_all_state_event      -----&gt; Module:handle_event/3

gen_fsm:sync_send_event           -----&gt; Module:StateName/3

gen_fsm:sync_send_all_state_event -----&gt; Module:handle_sync_event/4

-                                 -----&gt; Module:handle_info/3

-                                 -----&gt; Module:terminate/3

-                                 -----&gt; Module:code_change/4</code></pre><p>If a callback function fails or returns a bad value,
the <code class="inline">gen_fsm</code> process terminates.</p><p>A <code class="inline">gen_fsm</code> process handles system messages as described
in <a href="sys.html">sys(3)</a>.  The sys module can be used for
debugging a <code class="inline">gen_fsm</code> process.</p><p>Notice that a <code class="inline">gen_fsm</code> process does not trap exit signals automatically,
this must be explicitly initiated in the callback module.</p><p>Unless otherwise stated, all functions in this module fail
if the specified <code class="inline">gen_fsm</code> process does not exist
or if bad arguments are specified.</p><p>The gen_fsm process can go into hibernation (see <a href="../../apps/erts/erlang.html#hibernate/3"><code class="inline">erlang:hibernate/3</code></a>)
if a callback function specifies <code class="inline">hibernate</code> instead of a time-out value.
This can be useful if the server is expected to be idle for a long time.
However, use this feature with care, as hibernation implies at least
two garbage collections (when hibernating and shortly after waking up)
and is not something you want to do between each call
to a busy state machine.</p><h3 id="module-callback-functions" class="section-heading"><a href="#module-callback-functions" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Callback Functions</span></h3><p>See the <a href="#callbacks-deprecated">Callback Functions</a> section
for the functions to be exported from a <code class="inline">gen_fsm</code> callback module.</p><p><a href="" id="state-name"></a>
<strong>State name</strong> denotes a state of the state machine.</p><p><a href="" id="state-data"></a>
<strong>State data</strong> denotes the internal state of the Erlang process
that implements the state machine.</p>
    </section>

</div>

  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Summary</span>
    </h1>
<div class="summary-types summary">
  <h2>
    <a href="#types">Types</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:enter_loop_opt/0" data-no-tooltip="" translate="no">enter_loop_opt()</a>

      </div>

        <div class="summary-synopsis"><p><a>Start options</a> for the
<a><code class="inline">enter_loop/4,5,6</code></a>, <a><code class="inline">start/3,4</code></a>,
and <a><code class="inline">start_link/3,4</code></a> functions.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:from/0" data-no-tooltip="" translate="no">from()</a>

      </div>

        <div class="summary-synopsis"><p>Reply destination. See <a><code class="inline">reply/2</code></a></p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:fsm_name/0" data-no-tooltip="" translate="no">fsm_name()</a>

      </div>

        <div class="summary-synopsis"><p><a>FSM name</a> specification:
<code class="inline">local</code>, <code class="inline">global</code>, or <code class="inline">via</code> registered.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:fsm_ref/0" data-no-tooltip="" translate="no">fsm_ref()</a>

      </div>

        <div class="summary-synopsis"><p><a>FSM reference</a> <a><code class="inline">pid/0</code></a> or registered <a><code class="inline">fsm_name/0</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:start_opt/0" data-no-tooltip="" translate="no">start_opt()</a>

      </div>

        <div class="summary-synopsis"><p><a>Start options</a> for the <a><code class="inline">start/3,4</code></a>,
and <a><code class="inline">start_link/3,4</code></a> functions.</p></div>

    </div>

</div>
<div class="summary-callbacks-deprecated summary">
  <h2>
    <a href="#callbacks-deprecated">Callbacks: deprecated</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:code_change/4" data-no-tooltip="" translate="no">code_change(OldVsn, StateName, StateData, Extra)</a>

          <span class="deprecated" title="the callback gen_fsm:code_change(_,_,_,_) is deprecated; use the 'gen_statem' module instead">deprecated</span>

      </div>

        <div class="summary-synopsis"><p>Update the internal <a><em>state data</em></a> during upgrade/downgrade.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:format_status/2" data-no-tooltip="" translate="no">format_status/2</a>

          <span class="deprecated" title="the callback gen_fsm:format_status(_,_) is deprecated; use the 'gen_statem' module instead">deprecated</span>

      </div>

        <div class="summary-synopsis"><p>Optional function for providing a term describing
the current <code class="inline">gen_fsm</code> process status.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:handle_event/3" data-no-tooltip="" translate="no">handle_event(Event, StateName, StateData)</a>

          <span class="deprecated" title="the callback gen_fsm:handle_event(_,_,_) is deprecated; use the 'gen_statem' module instead">deprecated</span>

      </div>

        <div class="summary-synopsis"><p>Handle an asynchronous event.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:handle_info/3" data-no-tooltip="" translate="no">handle_info(Info, StateName, StateData)</a>

          <span class="deprecated" title="the callback gen_fsm:handle_info(_,_,_) is deprecated; use the 'gen_statem' module instead">deprecated</span>

      </div>

        <div class="summary-synopsis"><p>Handle an incoming message</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:handle_sync_event/4" data-no-tooltip="" translate="no">handle_sync_event(Event, From, StateName, StateData)</a>

          <span class="deprecated" title="the callback gen_fsm:handle_sync_event(_,_,_,_) is deprecated; use the 'gen_statem' module instead">deprecated</span>

      </div>

        <div class="summary-synopsis"><p>Handle a synchronous event.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:init/1" data-no-tooltip="" translate="no">init(Args)</a>

          <span class="deprecated" title="the callback gen_fsm:init(_) is deprecated; use the 'gen_statem' module instead">deprecated</span>

      </div>

        <div class="summary-synopsis"><p>Initialize process and internal <a><em>state name</em></a>
and <a><em>state data</em></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:StateName/2" data-no-tooltip="" translate="no">'StateName'(Event, StateData)</a>

          <span class="deprecated" title="the callback gen_fsm:'StateName'(_,_) is deprecated; use the 'gen_statem' module instead">deprecated</span>

      </div>

        <div class="summary-synopsis"><p>Handle an asynchronous event.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:StateName/3" data-no-tooltip="" translate="no">'StateName'(Event, From, StateData)</a>

          <span class="deprecated" title="the callback gen_fsm:'StateName'(_,_,_) is deprecated; use the 'gen_statem' module instead">deprecated</span>

      </div>

        <div class="summary-synopsis"><p>Handle a synchronous event.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:terminate/3" data-no-tooltip="" translate="no">terminate(Reason, StateName, StateData)</a>

          <span class="deprecated" title="the callback gen_fsm:terminate(_,_,_) is deprecated; use the 'gen_statem' module instead">deprecated</span>

      </div>

        <div class="summary-synopsis"><p>Clean up before termination.</p></div>

    </div>

</div>
<div class="summary-functions summary">
  <h2>
    <a href="#functions">Functions</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#cancel_timer/1" data-no-tooltip="" translate="no">cancel_timer(Ref)</a>

          <span class="deprecated" title="gen_fsm:cancel_timer/1 is deprecated; use the 'gen_statem' module instead">deprecated</span>

      </div>

        <div class="summary-synopsis"><p>Cancel an internal timer in a generic FSM.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#enter_loop/4" data-no-tooltip="" translate="no">enter_loop(Module, Options, StateName, StateData)</a>

          <span class="deprecated" title="gen_fsm:enter_loop/4 is deprecated; use the 'gen_statem' module instead">deprecated</span>

      </div>

        <div class="summary-synopsis"><p>Enter the <code class="inline">gen_fsm</code> receive loop.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#enter_loop/5" data-no-tooltip="" translate="no">enter_loop/5</a>

          <span class="deprecated" title="gen_fsm:enter_loop/5 is deprecated; use the 'gen_statem' module instead">deprecated</span>

      </div>

        <div class="summary-synopsis"><p>Enter the <code class="inline">gen_fsm</code> receive loop.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#enter_loop/6" data-no-tooltip="" translate="no">enter_loop(Module, Options, StateName, StateData, FsmName, Timeout)</a>

          <span class="deprecated" title="gen_fsm:enter_loop/6 is deprecated; use the 'gen_statem' module instead">deprecated</span>

      </div>

        <div class="summary-synopsis"><p>Enter the <code class="inline">gen_fsm</code> receive loop.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#reply/2" data-no-tooltip="" translate="no">reply(Caller, Reply)</a>

          <span class="deprecated" title="gen_fsm:reply/2 is deprecated; use the 'gen_statem' module instead">deprecated</span>

      </div>

        <div class="summary-synopsis"><p>Send a reply to a caller.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#send_all_state_event/2" data-no-tooltip="" translate="no">send_all_state_event(FsmRef, Event)</a>

          <span class="deprecated" title="gen_fsm:send_all_state_event/2 is deprecated; use the 'gen_statem' module instead">deprecated</span>

      </div>

        <div class="summary-synopsis"><p>Send an event asynchronously to a generic FSM.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#send_event/2" data-no-tooltip="" translate="no">send_event(FsmRef, Event)</a>

          <span class="deprecated" title="gen_fsm:send_event/2 is deprecated; use the 'gen_statem' module instead">deprecated</span>

      </div>

        <div class="summary-synopsis"><p>Send an event asynchronously to a generic FSM.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#send_event_after/2" data-no-tooltip="" translate="no">send_event_after(Time, Event)</a>

          <span class="deprecated" title="gen_fsm:send_event_after/2 is deprecated; use the 'gen_statem' module instead">deprecated</span>

      </div>

        <div class="summary-synopsis"><p>Send a delayed event internally in a generic FSM.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#start/3" data-no-tooltip="" translate="no">start(Module, Args, Options)</a>

          <span class="deprecated" title="gen_fsm:start/3 is deprecated; use the 'gen_statem' module instead">deprecated</span>

      </div>

        <div class="summary-synopsis"><p>Create a standalone <code class="inline">gen_fsm</code> process, not registered.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#start/4" data-no-tooltip="" translate="no">start(FsmName, Module, Args, Options)</a>

          <span class="deprecated" title="gen_fsm:start/4 is deprecated; use the 'gen_statem' module instead">deprecated</span>

      </div>

        <div class="summary-synopsis"><p>Create a standalone <code class="inline">gen_fsm</code> process.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#start_link/3" data-no-tooltip="" translate="no">start_link(Module, Args, Options)</a>

          <span class="deprecated" title="gen_fsm:start_link/3 is deprecated; use the 'gen_statem' module instead">deprecated</span>

      </div>

        <div class="summary-synopsis"><p>Create a <code class="inline">gen_fsm</code> process in a supervision tree, not registered.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#start_link/4" data-no-tooltip="" translate="no">start_link(FsmName, Module, Args, Options)</a>

          <span class="deprecated" title="gen_fsm:start_link/4 is deprecated; use the 'gen_statem' module instead">deprecated</span>

      </div>

        <div class="summary-synopsis"><p>Create a <code class="inline">gen_fsm</code> process in a supervision tree.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#start_timer/2" data-no-tooltip="" translate="no">start_timer(Time, Msg)</a>

          <span class="deprecated" title="gen_fsm:start_timer/2 is deprecated; use the 'gen_statem' module instead">deprecated</span>

      </div>

        <div class="summary-synopsis"><p>Send a time-out event internally in a generic FSM.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#stop/1" data-no-tooltip="" translate="no">stop(FsmRef)</a>

          <span class="deprecated" title="gen_fsm:stop/1 is deprecated; use the 'gen_statem' module instead">deprecated</span>

      </div>

        <div class="summary-synopsis"><p>Equivalent to <a><code class="inline">stop(FsmRef, normal, infinity)</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#stop/3" data-no-tooltip="" translate="no">stop(FsmRef, Reason, Timeout)</a>

          <span class="deprecated" title="gen_fsm:stop/3 is deprecated; use the 'gen_statem' module instead">deprecated</span>

      </div>

        <div class="summary-synopsis"><p>Synchronously stop a generic FSM.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#sync_send_all_state_event/2" data-no-tooltip="" translate="no">sync_send_all_state_event(FsmRef, Event)</a>

          <span class="deprecated" title="gen_fsm:sync_send_all_state_event/2 is deprecated; use the 'gen_statem' module instead">deprecated</span>

      </div>

        <div class="summary-synopsis"><p>Equivalent to <a><code class="inline">sync_send_all_state_event(FsmRef, Event, 5000)</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#sync_send_all_state_event/3" data-no-tooltip="" translate="no">sync_send_all_state_event(FsmRef, Event, Timeout)</a>

          <span class="deprecated" title="gen_fsm:sync_send_all_state_event/3 is deprecated; use the 'gen_statem' module instead">deprecated</span>

      </div>

        <div class="summary-synopsis"><p>Send an event synchronously to a generic FSM.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#sync_send_event/2" data-no-tooltip="" translate="no">sync_send_event(FsmRef, Event)</a>

          <span class="deprecated" title="gen_fsm:sync_send_event/2 is deprecated; use the 'gen_statem' module instead">deprecated</span>

      </div>

        <div class="summary-synopsis"><p>Equivalent to <a><code class="inline">sync_send_event(FsmRef, Event, 5000)</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#sync_send_event/3" data-no-tooltip="" translate="no">sync_send_event(FsmRef, Event, Timeout)</a>

          <span class="deprecated" title="gen_fsm:sync_send_event/3 is deprecated; use the 'gen_statem' module instead">deprecated</span>

      </div>

        <div class="summary-synopsis"><p>Send an event synchronously to a generic FSM.</p></div>

    </div>

</div>

  </section>


  <section id="types" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#types">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Types</span>
    </h1>
    <div class="types-list">
<section class="detail" id="t:enter_loop_opt/0">

  <div class="detail-header">
    <a href="#t:enter_loop_opt/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">enter_loop_opt()</h1>

        <span class="note">(not exported)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/gen_fsm.erl#L818" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> enter_loop_opt() :: {debug, Dbgs :: [<a href="sys.html#t:debug_option/0">sys:debug_option</a>()]}.</pre>

      </div>

<p><a href="#start-options">Start options</a> for the
<a href="#enter_loop/6"><code class="inline">enter_loop/4,5,6</code></a>, <a href="#start/3"><code class="inline">start/3,4</code></a>,
and <a href="#start_link/3"><code class="inline">start_link/3,4</code></a> functions.</p><p>See <a href="#start_link/4"><code class="inline">start_link/4</code></a>.</p>
  </section>
</section>
<section class="detail" id="t:from/0">

  <div class="detail-header">
    <a href="#t:from/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">from()</h1>

        <span class="note">(not exported)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/gen_fsm.erl#L396" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> from() :: {To :: <a href="../../apps/erts/erlang.html#t:pid/0">pid</a>(), Tag :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()}.</pre>

      </div>

<p>Reply destination. See <a href="#reply/2"><code class="inline">reply/2</code></a></p>
  </section>
</section>
<section class="detail" id="t:fsm_name/0">

  <div class="detail-header">
    <a href="#t:fsm_name/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">fsm_name()</h1>

        <span class="note">(not exported)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/gen_fsm.erl#L781" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> fsm_name() ::
          {local, LocalName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>()} |
          {global, GlobalName :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()} |
          {via, RegMod :: <a href="../../apps/erts/erlang.html#t:module/0">module</a>(), ViaName :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()}.</pre>

      </div>

<p><a href="#fsm-name">FSM name</a> specification:
<code class="inline">local</code>, <code class="inline">global</code>, or <code class="inline">via</code> registered.</p><p>To be used when starting a <code class="inline">gen_fsm</code>. See <a href="#start_link/4"><code class="inline">start_link/4</code></a>.</p>
  </section>
</section>
<section class="detail" id="t:fsm_ref/0">

  <div class="detail-header">
    <a href="#t:fsm_ref/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">fsm_ref()</h1>

        <span class="note">(not exported)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/gen_fsm.erl#L791" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> fsm_ref() ::
          <a href="../../apps/erts/erlang.html#t:pid/0">pid</a>() |
          (LocalName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>()) |
          {Name :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(), Node :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>()} |
          {global, GlobalName :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()} |
          {via, RegMod :: <a href="../../apps/erts/erlang.html#t:module/0">module</a>(), ViaName :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()}.</pre>

      </div>

<p><a href="#fsm-ref">FSM reference</a> <a href="../../apps/erts/erlang.html#t:pid/0"><code class="inline">pid/0</code></a> or registered <a href="#t:fsm_name/0"><code class="inline">fsm_name/0</code></a>.</p><p>To be used in for example <a href="#send_event/2"><code class="inline">send_event/2</code></a> to specify the server.</p>
  </section>
</section>
<section class="detail" id="t:start_opt/0">

  <div class="detail-header">
    <a href="#t:start_opt/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">start_opt()</h1>

        <span class="note">(not exported)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/gen_fsm.erl#L805" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> start_opt() ::
          {timeout, Time :: <a href="../../apps/erts/erlang.html#t:timeout/0">timeout</a>()} | {spawn_opt, [<a href="proc_lib.html#t:start_spawn_option/0">proc_lib:start_spawn_option</a>()]} | <a href="#t:enter_loop_opt/0">enter_loop_opt</a>().</pre>

      </div>

<p><a href="#start-options">Start options</a> for the <a href="#start/3"><code class="inline">start/3,4</code></a>,
and <a href="#start_link/3"><code class="inline">start_link/3,4</code></a> functions.</p><p>See <a href="#start_link/4"><code class="inline">start_link/4</code></a>.</p>
  </section>
</section>

    </div>
  </section>

  <section id="callbacks-deprecated" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#callbacks-deprecated">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Callbacks: deprecated</span>
    </h1>
    <div class="callbacks-deprecated-list">
<section class="detail" id="c:code_change/4">

  <div class="detail-header">
    <a href="#c:code_change/4" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">code_change(OldVsn, StateName, StateData, Extra)</h1>

        <span class="note">(optional)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/gen_fsm.erl#L701" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

    <div class="deprecated">
      This callback is deprecated. the callback gen_fsm:code_change(_,_,_,_) is deprecated; use the 'gen_statem' module instead.
    </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> code_change(OldVsn, StateName, StateData, Extra) -> {ok, NextStateName, NewStateData}
                         when
                             OldVsn :: Vsn | {down, Vsn},
                             Vsn :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                             StateName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                             NextStateName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                             StateData :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                             NewStateData :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                             Extra :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Update the internal <a href="#state-data"><em>state data</em></a> during upgrade/downgrade.</p><p>This function is called by a <code class="inline">gen_fsm</code> process when it is to update
its internal <a href="#state-data"><em>state data</em></a>
during a release upgrade/downgrade, that is,
when instruction <code class="inline">{update,Â Module,Â Change,Â ...}</code>,
where <code class="inline">ChangeÂ =Â {advanced,Â Extra}</code>, is given in the appup file;
see <a href="../../system/release_handling.html#instr">Release Handling Instructions in OTP Design Principles</a>.</p><p>For an upgrade, <code class="inline">OldVsn</code> is <code class="inline">Vsn</code>, and for a downgrade,
<code class="inline">OldVsn</code> is <code class="inline">{down,Â Vsn}</code>. <code class="inline">Vsn</code> is defined by the vsn attribute(s)
of the old version of the callback module <code class="inline">Module</code>.  If no such
 attribute is defined, the version is the checksum of the Beam file.</p><p><code class="inline">StateName</code> is the current <a href="#state-name"><em>state name</em></a>
 and <code class="inline">StateData</code> the internal <a href="#state-data"><em>state data</em></a>
 of the <code class="inline">gen_fsm</code> process.</p><p><code class="inline">Extra</code> is passed &quot;as is&quot; from the <code class="inline">{advanced,Â Extra}</code> part
 of the update instruction.</p><p>The function is to return the new current <a href="#state-name"><em>state name</em></a>
and updated internal data.</p>
  </section>
</section>
<section class="detail" id="c:format_status/2">

  <div class="detail-header">
    <a href="#c:format_status/2" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">format_status/2</h1>

        <span class="note">(optional)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/gen_fsm.erl#L762" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

    <div class="deprecated">
      This callback is deprecated. the callback gen_fsm:format_status(_,_) is deprecated; use the 'gen_statem' module instead.
    </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> format_status(Opt, <a href="../../apps/erts/erlang.html#t:nonempty_improper_list/2">nonempty_improper_list</a>(PDict, [StateData])) -> Status
                           when
                               Opt :: normal | terminate,
                               PDict :: [{Key :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(), Value :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()}],
                               StateData :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                               Status :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Optional function for providing a term describing
the current <code class="inline">gen_fsm</code> process status.</p><p>The second argument is <code class="inline">[PDict,Â StateData]</code>, that is, a list
with the 2 elements, in that order.</p><section role="note" class="admonition info"><h4 class="admonition-title info">Note</h4><p>This callback is optional, so callback modules need not export it.
The <code class="inline">gen_fsm</code> module provides a default implementation
of this function that returns the callback module
<a href="#state-data"><em>state data</em></a>.</p></section><p>This function is called by a <code class="inline">gen_fsm</code> process
in the following situations:</p><ul><li>One of <a href="sys.html#get_status/1"><code class="inline">sys:get_status/1,2</code></a> is invoked to get
the <code class="inline">gen_fsm</code> status. <code class="inline">Opt</code> is set to the atom <code class="inline">normal</code> for this case.</li><li>The <code class="inline">gen_fsm</code> process terminates abnormally and logs an error.
<code class="inline">Opt</code> is set to the atom terminate for this case.</li></ul><p>This function is useful for changing the form and appearance
of the <code class="inline">gen_fsm</code> status for these cases.  A callback module
wishing to change the <a href="sys.html#get_status/1"><code class="inline">sys:get_status/1,2</code></a>
return value as well as how its status appears in termination error logs,
exports an instance of <a href="#c:format_status/2"><code class="inline">format_status/2</code></a> that returns a term
describing the current status of the <code class="inline">gen_fsm</code> process.</p><p><code class="inline">PDict</code> is the current value of the process dictionary
of the <code class="inline">gen_fsm</code> process.</p><p><code class="inline">StateData</code> is the internal <a href="#state-data"><em>state data</em></a>
of the <code class="inline">gen_fsm</code> process.</p><p>The function is to return <code class="inline">Status</code>, a term that change the details
of the current state and status of the <code class="inline">gen_fsm</code> process.
There are no restrictions of the form <code class="inline">Status</code> can take,
but for the <a href="sys.html#get_status/1"><code class="inline">sys:get_status/1,2</code></a> case
(when <code class="inline">Opt</code> is <code class="inline">normal</code>), the recommended form for the <code class="inline">Status</code> value
is <code class="inline">[{data,Â [{&quot;StateData&quot;,Â Term}]}]</code>, where <code class="inline">Term</code> provides
relevant details of the <code class="inline">gen_fsm</code> <a href="#state-data"><em>state data</em></a>.
Following this recommendation is not required, but it makes
the callback module status consistent with the rest of
the <a href="sys.html#get_status/1"><code class="inline">sys:get_status/1,2</code></a> return value.</p><p>One use for this function is to return compact alternative
<a href="#state-data"><em>state data</em></a> representations to avoid
that large state terms are printed in log files.</p>
  </section>
</section>
<section class="detail" id="c:handle_event/3">

  <div class="detail-header">
    <a href="#c:handle_event/3" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">handle_event(Event, StateName, StateData)</h1>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/gen_fsm.erl#L560" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

    <div class="deprecated">
      This callback is deprecated. the callback gen_fsm:handle_event(_,_,_) is deprecated; use the 'gen_statem' module instead.
    </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> handle_event(Event, StateName, StateData) -> Result
                          when
                              Event :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                              StateName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                              StateData :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                              Result ::
                                  {next_state, NextStateName, NewStateData} |
                                  {next_state, NextStateName, NewStateData, Timeout} |
                                  {next_state, NextStateName, NewStateData, hibernate} |
                                  {stop, Reason, NewStateData},
                              NextStateName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                              NewStateData :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                              Timeout :: <a href="../../apps/erts/erlang.html#t:timeout/0">timeout</a>(),
                              Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Handle an asynchronous event.</p><p>Whenever a <code class="inline">gen_fsm</code> process receives an event sent using
<a href="#send_all_state_event/2"><code class="inline">send_all_state_event/2</code></a>, this function is called to handle the event.</p><p><code class="inline">StateName</code> is the current <a href="#state-name"><em>state name</em></a>
of the <code class="inline">gen_fsm</code> process.</p><p>For a description of the other arguments and possible return values,
see <a href="#c:StateName/2"><code class="inline">Module:StateName/2</code></a>.</p>
  </section>
</section>
<section class="detail" id="c:handle_info/3">

  <div class="detail-header">
    <a href="#c:handle_info/3" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">handle_info(Info, StateName, StateData)</h1>

        <span class="note">(optional)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/gen_fsm.erl#L618" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

    <div class="deprecated">
      This callback is deprecated. the callback gen_fsm:handle_info(_,_,_) is deprecated; use the 'gen_statem' module instead.
    </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> handle_info(Info, StateName, StateData) -> Result
                         when
                             Info :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                             StateName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                             StateData :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                             Result ::
                                 {next_state, NextStateName, NewStateData} |
                                 {next_state, NextStateName, NewStateData, Timeout} |
                                 {next_state, NextStateName, NewStateData, hibernate} |
                                 {stop, Reason, NewStateData},
                             NextStateName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                             NewStateData :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                             Timeout :: <a href="../../apps/erts/erlang.html#t:timeout/0">timeout</a>(),
                             Reason :: normal | <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Handle an incoming message</p><p>This function is called by a <code class="inline">gen_fsm</code> process when it receives
any other message than a synchronous or asynchronous event
(or a system message).</p><p><code class="inline">Info</code> is the received message.</p><p>For a description of the other arguments and possible return values,
see <a href="#c:StateName/2"><code class="inline">Module:StateName/2</code></a>.</p>
  </section>
</section>
<section class="detail" id="c:handle_sync_event/4">

  <div class="detail-header">
    <a href="#c:handle_sync_event/4" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">handle_sync_event(Event, From, StateName, StateData)</h1>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/gen_fsm.erl#L587" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

    <div class="deprecated">
      This callback is deprecated. the callback gen_fsm:handle_sync_event(_,_,_,_) is deprecated; use the 'gen_statem' module instead.
    </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> handle_sync_event(Event, From, StateName, StateData) -> Result
                               when
                                   Event :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                   From :: <a href="#t:from/0">from</a>(),
                                   StateName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                                   StateData :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                   Result ::
                                       {reply, Reply, NextStateName, NewStateData} |
                                       {reply, Reply, NextStateName, NewStateData, Timeout} |
                                       {reply, Reply, NextStateName, NewStateData, hibernate} |
                                       {next_state, NextStateName, NewStateData} |
                                       {next_state, NextStateName, NewStateData, Timeout} |
                                       {next_state, NextStateName, NewStateData, hibernate} |
                                       {stop, Reason, Reply, NewStateData} |
                                       {stop, Reason, NewStateData},
                                   Reply :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                   NextStateName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                                   NewStateData :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                   Timeout :: <a href="../../apps/erts/erlang.html#t:timeout/0">timeout</a>(),
                                   Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Handle a synchronous event.</p><p>Whenever a <code class="inline">gen_fsm</code> process receives an event sent using
<a href="#sync_send_all_state_event/3"><code class="inline">sync_send_all_state_event/2,3</code></a>,
this function is called to handle the event.</p><p><code class="inline">StateName</code> is the current <a href="#state-name"><em>state name</em></a>
of the <code class="inline">gen_fsm</code> process.</p><p>For a description of the other arguments and possible return values,
see <a href="#c:StateName/3"><code class="inline">Module:StateName/3</code></a>.</p>
  </section>
</section>
<section class="detail" id="c:init/1">

  <div class="detail-header">
    <a href="#c:init/1" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">init(Args)</h1>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/gen_fsm.erl#L429" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

    <div class="deprecated">
      This callback is deprecated. the callback gen_fsm:init(_) is deprecated; use the 'gen_statem' module instead.
    </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> init(Args) -> Result
                  when
                      Args :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                      Result ::
                          {ok, StateName, StateData} |
                          {ok, StateName, StateData, Timeout} |
                          {ok, StateName, StateData, hibernate} |
                          {stop, Reason} |
                          ignore,
                      StateName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                      StateData :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                      Timeout :: <a href="../../apps/erts/erlang.html#t:timeout/0">timeout</a>(),
                      Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Initialize process and internal <a href="#state-name"><em>state name</em></a>
and <a href="#state-data"><em>state data</em></a>.</p><p>Whenever a <code class="inline">gen_fsm</code> process is started using
<a href="#start/4"><code class="inline">start/3,4</code></a> or <a href="#start_link/4"><code class="inline">start_link/3,4</code></a>,
this function is called by the new process to initialize.</p><p><code class="inline">Args</code> is the <code class="inline">Args</code> argument provided to the start function.</p><p>If initialization is successful, the function is to return
{ok,Â StateName,Â StateData}, {ok,Â StateName,Â StateData,Â Timeout},
or {ok,Â StateName,Â StateData,Â hibernate}, where <code class="inline">StateName</code>
is the initial <a href="#state-name"><em>state name</em></a> and <code class="inline">StateData</code>
the initial <a href="#state-data"><em>state data</em></a> of the <code class="inline">gen_fsm</code> process.</p><p>If an <a href="../../apps/erts/erlang.html#t:integer/0"><code class="inline">integer/0</code></a> time-out value is provided, a time-out occurs
unless an event or a message is received within <code class="inline">Timeout</code> milliseconds.
A time-out is represented by the atom <code class="inline">timeout</code> and is to be handled
by the <a href="#c:StateName/2"><code class="inline">Module:StateName/2</code></a> callback functions.
The atom <code class="inline">infinity</code> can be used to wait indefinitely, this is
the default value.</p><p>If <code class="inline">hibernate</code> is specified instead of a time-out value,
the process goes into hibernation when waiting for the next message
to arrive (by calling <a href="proc_lib.html#hibernate/3"><code class="inline">proc_lib:hibernate/3</code></a>).</p><p>If the initialization fails, the function returns <code class="inline">{stop,Â Reason}</code>,
where <code class="inline">Reason</code> is any term, or <code class="inline">ignore</code>.</p>
  </section>
</section>
<section class="detail" id="c:StateName/2">

  <div class="detail-header">
    <a href="#c:StateName/2" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">'StateName'(Event, StateData)</h1>

        <span class="note">(optional)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/gen_fsm.erl#L471" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

    <div class="deprecated">
      This callback is deprecated. the callback gen_fsm:'StateName'(_,_) is deprecated; use the 'gen_statem' module instead.
    </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> 'StateName'(Event, StateData) -> Result
                         when
                             Event :: timeout | <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                             StateData :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                             Result ::
                                 {next_state, NextStateName, NewStateData} |
                                 {next_state, NextStateName, NewStateData, Timeout} |
                                 {next_state, NextStateName, NewStateData, hibernate} |
                                 {stop, Reason, NewStateData},
                             NextStateName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                             NewStateData :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                             Timeout :: <a href="../../apps/erts/erlang.html#t:timeout/0">timeout</a>(),
                             Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Handle an asynchronous event.</p><p>There is to be one instance of this function
for each possible <a href="#state-name"><em>state name</em></a>.
Whenever a <code class="inline">gen_fsm</code> process receives an event sent using <a href="#send_event/2"><code class="inline">send_event/2</code></a>,
the instance of this function with the same name as the current
<a href="#state-name"><em>state name</em></a> <code class="inline">StateName</code> is called to handle the event.
It is also called if a time-out occurs.</p><p><code class="inline">Event</code> is either the atom <code class="inline">timeout</code>, if a time-out has occurred,
or the <code class="inline">Event</code> argument provided to <a href="#send_event/2"><code class="inline">send_event/2</code></a>.</p><p><code class="inline">StateData</code> is the <a href="#state-data"><em>state data</em></a> of the <code class="inline">gen_fsm</code> process.</p><p>If the function returns <code class="inline">{next_state,Â NextStateName,Â NewStateData}</code>,
<code class="inline">{next_state,Â NextStateName,Â NewStateData,Â Timeout}</code>,
or <code class="inline">{next_state,Â NextStateName,Â NewStateData,Â hibernate}</code>,
the <code class="inline">gen_fsm</code> process continues executing with
the current <a href="#state-name"><em>state name</em></a> set to <code class="inline">NextStateName</code>
and with the possibly updated <a href="#state-data"><em>state data</em></a>
<code class="inline">NewStateData</code>.  For a description of <code class="inline">Timeout</code> and <code class="inline">hibernate</code>,
see <a href="#c:init/1"><code class="inline">Module:init/1</code></a>.</p><p>If the function returns <code class="inline">{stopÂ ,Reason,Â NewStateData}</code>,
the <code class="inline">gen_fsm</code> process calls
<a href="#c:terminate/3"><code class="inline">Module:terminate(Reason,Â StateName,Â NewStateData)</code></a>
and terminates.</p>
  </section>
</section>
<section class="detail" id="c:StateName/3">

  <div class="detail-header">
    <a href="#c:StateName/3" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">'StateName'(Event, From, StateData)</h1>

        <span class="note">(optional)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/gen_fsm.erl#L529" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

    <div class="deprecated">
      This callback is deprecated. the callback gen_fsm:'StateName'(_,_,_) is deprecated; use the 'gen_statem' module instead.
    </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> 'StateName'(Event, From, StateData) -> Result
                         when
                             Event :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                             From :: <a href="#t:from/0">from</a>(),
                             StateData :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                             Result ::
                                 {reply, Reply, NextStateName, NewStateData} |
                                 {reply, Reply, NextStateName, NewStateData, Timeout} |
                                 {reply, Reply, NextStateName, NewStateData, hibernate} |
                                 {next_state, NextStateName, NewStateData} |
                                 {next_state, NextStateName, NewStateData, Timeout} |
                                 {next_state, NextStateName, NewStateData, hibernate} |
                                 {stop, Reason, Reply, NewStateData} |
                                 {stop, Reason, NewStateData},
                             Reply :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                             NextStateName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                             NewStateData :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                             Timeout :: <a href="../../apps/erts/erlang.html#t:timeout/0">timeout</a>(),
                             Reason :: normal | <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Handle a synchronous event.</p><p>There is to be one instance of this function
for each possible <a href="#state-name"><em>state name</em></a>.
Whenever a <code class="inline">gen_fsm</code> process receives an event sent using
<a href="#sync_send_event/3"><code class="inline">sync_send_event/2,3</code></a>,
the instance of this function with the same name
as the current <a href="#state-name"><em>state name</em></a> <code class="inline">StateName</code> is called
to handle the event.</p><p><code class="inline">Event</code> is the <code class="inline">Event</code> argument provided to
<a href="#sync_send_event/3"><code class="inline">sync_send_event/2,3</code></a>.</p><p><code class="inline">From</code> is a tuple <code class="inline">{Pid,Â Tag}</code> where <code class="inline">Pid</code> is the <a href="../../apps/erts/erlang.html#t:pid/0"><code class="inline">pid/0</code></a>
of the process that called <a href="#sync_send_event/3"><code class="inline">sync_send_event/2,3</code></a>,
<code class="inline">Tag</code> is a unique tag.</p><p><code class="inline">StateData</code> is the <a href="#state-data"><em>state data</em></a> of the <code class="inline">gen_fsm</code> process.</p><ul><li><p>If <code class="inline">{reply,Â Reply,Â NextStateName,Â NewStateData}</code>,
<code class="inline">{reply,Â Reply,Â NextStateName,Â NewStateData,Â Timeout}</code>,
or <code class="inline">{reply,Â Reply,Â NextStateName,Â NewStateData,Â hibernate}</code> is returned,
<code class="inline">Reply</code> is given back to <code class="inline">From</code> as the return value of
<a href="#sync_send_event/3"><code class="inline">sync_send_event/2,3</code></a>.
The <code class="inline">gen_fsm</code> process then continues executing
with the current <a href="#state-name"><em>state name</em></a> set to <code class="inline">NextStateName</code>
and with the possibly updated <a href="#state-data"><em>state data</em></a> <code class="inline">NewStateData</code>.
For a description of <code class="inline">Timeout</code> and <code class="inline">hibernate</code>,
see <a href="#c:init/1"><code class="inline">Module:init/1</code></a>.</p></li><li><p>If <code class="inline">{next_state,Â NextStateName,Â NewStateData}</code>,
<code class="inline">{next_state,Â NextStateName,Â NewStateData,Â Timeout}</code>,
or <code class="inline">{next_state,Â NextStateName,Â NewStateData,Â hibernate}</code> is returned,
the <code class="inline">gen_fsm</code> process continues executing in <code class="inline">NextStateName</code>
with <code class="inline">NewStateData</code>.  Any reply to <code class="inline">From</code>
must be specified explicitly using <a href="#reply/2"><code class="inline">reply/2</code></a>.</p></li><li><p>If the function returns <code class="inline">{stop,Â Reason,Â Reply,Â NewStateData}</code>,
<code class="inline">Reply</code> is given back to <code class="inline">From</code>.  If the function returns
{stop,Â Reason,Â NewStateData}, any reply to <code class="inline">From</code> must be specified
explicitly using <a href="#reply/2"><code class="inline">reply/2</code></a>.  The <code class="inline">gen_fsm</code> process then calls
<a href="#c:terminate/3"><code class="inline">Module:terminate(Reason,Â StateName,Â NewStateData)</code></a>
and terminates.</p></li></ul>
  </section>
</section>
<section class="detail" id="c:terminate/3">

  <div class="detail-header">
    <a href="#c:terminate/3" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">terminate(Reason, StateName, StateData)</h1>

        <span class="note">(optional)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/gen_fsm.erl#L670" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

    <div class="deprecated">
      This callback is deprecated. the callback gen_fsm:terminate(_,_,_) is deprecated; use the 'gen_statem' module instead.
    </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> terminate(Reason, StateName, StateData) -> _
                       when
                           Reason :: normal | shutdown | {shutdown, <a href="../../apps/erts/erlang.html#t:term/0">term</a>()} | <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                           StateName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                           StateData :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Clean up before termination.</p><p>This function is called by a <code class="inline">gen_fsm</code> process
when it is about to terminate.  It is to be the opposite of
<a href="#c:init/1"><code class="inline">Module:init/1</code></a> and do any necessary cleaning up.
When it returns, the <code class="inline">gen_fsm</code> process terminates with <code class="inline">Reason</code>.
The return value is ignored.</p><p><code class="inline">Reason</code> is a term denoting the stop reason, <code class="inline">StateName</code> is
the current <a href="#state-name"><em>state name</em></a>,
and <code class="inline">StateData</code> is the <a href="#state-data"><em>state data</em></a>
of the <code class="inline">gen_fsm</code> process.</p><p><code class="inline">Reason</code> depends on why the <code class="inline">gen_fsm</code> process is terminating.
If it is because another callback function has returned a stop tuple
<code class="inline">{stop,Â ...}</code>, <code class="inline">Reason</code> has the value specified in that tuple.
If it is because of a failure, <code class="inline">Reason</code> is the error reason.</p><p>If the <code class="inline">gen_fsm</code> process is part of a supervision tree
and is ordered by its supervisor to terminate, this function
is called with <code class="inline">ReasonÂ =Â shutdown</code> if the following conditions apply:</p><ul><li><p>The gen_fsm process has been set to trap exit signals.</p></li><li><p>The shutdown strategy as defined in the child specification
of the supervisor is an integer time-out value, not brutal_kill.</p></li></ul><p>Even if the gen_fsm process is <strong>not</strong> part of a supervision tree,
this function is called if it receives an <code class="inline">'EXIT'</code> message
from its parent. <code class="inline">Reason</code> is the same as in the <code class="inline">'EXIT'</code> message.</p><p>Otherwise, the gen_fsm process terminates immediately.</p><p>Notice that for any other reason than <code class="inline">normal</code>, <code class="inline">shutdown</code>,
or <code class="inline">{shutdown,Â Term}</code> the <code class="inline">gen_fsm</code> process is assumed to terminate
because of an error and an error report is issued
using <a href="../../apps/kernel/error_logger.html#format/2"><code class="inline">error_logger:format/2</code></a>.</p>
  </section>
</section>

    </div>
  </section>

  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Functions</span>
    </h1>
    <div class="functions-list">
<section class="detail" id="cancel_timer/1">

  <div class="detail-header">
    <a href="#cancel_timer/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">cancel_timer(Ref)</h1>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/gen_fsm.erl#L1233" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

    <div class="deprecated">
      This function is deprecated. gen_fsm:cancel_timer/1 is deprecated; use the 'gen_statem' module instead.
    </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> cancel_timer(Ref) -> RemainingTime | false
                      when Ref :: <a href="../../apps/erts/erlang.html#t:reference/0">reference</a>(), RemainingTime :: <a href="../../apps/erts/erlang.html#t:non_neg_integer/0">non_neg_integer</a>().</pre>

      </div>

<p>Cancel an internal timer in a generic FSM.</p><p>Cancels an internal timer referred by <code class="inline">Ref</code> in the <code class="inline">gen_fsm</code> process
that calls this function.</p><p><code class="inline">Ref</code> is a reference returned from <a href="#send_event_after/2"><code class="inline">send_event_after/2</code></a>
or <a href="#start_timer/2"><code class="inline">start_timer/2</code></a>.</p><p>If the timer has already timed out, but the event not yet been delivered,
it is cancelled as if it had not timed out, so there is no false
timer event after returning from this function.</p><p>Returns the remaining time in milliseconds until the timer
would have expired if <code class="inline">Ref</code> referred to an active timer,
otherwise <code class="inline">false</code>.</p>
  </section>
</section>
<section class="detail" id="enter_loop/4">

  <div class="detail-header">
    <a href="#enter_loop/4" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">enter_loop(Module, Options, StateName, StateData)</h1>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/gen_fsm.erl#L1263" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

    <div class="deprecated">
      This function is deprecated. gen_fsm:enter_loop/4 is deprecated; use the 'gen_statem' module instead.
    </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> enter_loop(Module, Options, StateName, StateData) -> <a href="../../apps/erts/erlang.html#t:no_return/0">no_return</a>()
                    when
                        Module :: <a href="../../apps/erts/erlang.html#t:module/0">module</a>(),
                        Options :: [<a href="#t:enter_loop_opt/0">enter_loop_opt</a>()],
                        StateName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                        StateData :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Enter the <code class="inline">gen_fsm</code> receive loop.</p><p>Equivalent to <a href="#enter_loop/6"><code class="inline">enter_loop/6</code></a> with <code class="inline">TimeoutÂ =Â infinity</code>
but the started server is not registered as for <a href="#start_link/3"><code class="inline">start_link/3</code></a>.</p>
  </section>
</section>
<section class="detail" id="enter_loop/5">

  <div class="detail-header">
    <a href="#enter_loop/5" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">enter_loop/5</h1>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/gen_fsm.erl#L1289" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

    <div class="deprecated">
      This function is deprecated. gen_fsm:enter_loop/5 is deprecated; use the 'gen_statem' module instead.
    </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> enter_loop(Module, Options, StateName, StateData, FsmName) -> <a href="../../apps/erts/erlang.html#t:no_return/0">no_return</a>()
                    when
                        Module :: <a href="../../apps/erts/erlang.html#t:module/0">module</a>(),
                        Options :: [<a href="#t:enter_loop_opt/0">enter_loop_opt</a>()],
                        StateName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                        StateData :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                        FsmName :: <a href="#t:fsm_name/0">fsm_name</a>();
                (Module, Options, StateName, StateData, Timeout) -> <a href="../../apps/erts/erlang.html#t:no_return/0">no_return</a>()
                    when
                        Module :: <a href="../../apps/erts/erlang.html#t:module/0">module</a>(),
                        Options :: <a href="#t:enter_loop_opt/0">enter_loop_opt</a>(),
                        StateName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                        StateData :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                        Timeout :: <a href="../../apps/erts/erlang.html#t:timeout/0">timeout</a>().</pre>

      </div>

<p>Enter the <code class="inline">gen_fsm</code> receive loop.</p><p>With argument <code class="inline">FsmName</code> equivalent to <a href="#enter_loop/6"><code class="inline">enter_loop/6</code></a>
with <code class="inline">TimeoutÂ =Â infinity</code>.</p><p>With argument <code class="inline">Timeout</code> equivalent to <a href="#enter_loop/6"><code class="inline">enter_loop/6</code></a>
but the started server is not registered as for <a href="#start_link/3"><code class="inline">start_link/3</code></a>.</p>
  </section>
</section>
<section class="detail" id="enter_loop/6">

  <div class="detail-header">
    <a href="#enter_loop/6" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">enter_loop(Module, Options, StateName, StateData, FsmName, Timeout)</h1>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/gen_fsm.erl#L1331" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

    <div class="deprecated">
      This function is deprecated. gen_fsm:enter_loop/6 is deprecated; use the 'gen_statem' module instead.
    </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> enter_loop(Module, Options, StateName, StateData, FsmName, Timeout) -> <a href="../../apps/erts/erlang.html#t:no_return/0">no_return</a>()
                    when
                        Module :: <a href="../../apps/erts/erlang.html#t:module/0">module</a>(),
                        Options :: [<a href="#t:enter_loop_opt/0">enter_loop_opt</a>()],
                        StateName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                        StateData :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                        FsmName :: <a href="#t:fsm_name/0">fsm_name</a>() | <a href="../../apps/erts/erlang.html#t:pid/0">pid</a>(),
                        Timeout :: <a href="../../apps/erts/erlang.html#t:timeout/0">timeout</a>().</pre>

      </div>

<p>Enter the <code class="inline">gen_fsm</code> receive loop.</p><p>Makes an existing process into a <code class="inline">gen_fsm</code> process.  Does not return,
instead the calling process enters the <code class="inline">gen_fsm</code> receive loop
and becomes a <code class="inline">gen_fsm</code> process.  The process must have been started
using one of the start functions in <a href="proc_lib.html"><code class="inline">proc_lib</code></a>.  The user is responsible
for any initialization of the process, including registering a name for it.</p><p>This function is useful when a more complex initialization procedure
is needed than the <code class="inline">gen_fsm</code> behavior provides.</p><p><code class="inline">Module</code>, <code class="inline">Options</code>, and <code class="inline">FsmName</code> have the same meanings
as when calling <a href="#start_link/4"><code class="inline">start[_link]/3,4</code></a>.
However, the process must have been registered according to
<code class="inline">FsmName</code> before this function is called.</p><p><code class="inline">StateName</code>, <code class="inline">StateData</code>, and <code class="inline">Timeout</code> have the same meanings
as in the return value of <a href="#c:init/1"><code class="inline">Module:init/1</code></a>.
The callback module <code class="inline">Module</code> does not need to export
an <a href="#c:init/1"><code class="inline">init/1</code></a> function.</p><p>The function fails if the calling process was not started
by a <a href="proc_lib.html"><code class="inline">proc_lib</code></a> start function, or if it is not registered
according to <code class="inline">FsmName</code>.</p>
  </section>
</section>
<section class="detail" id="reply/2">

  <div class="detail-header">
    <a href="#reply/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">reply(Caller, Reply)</h1>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/gen_fsm.erl#L1610" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

    <div class="deprecated">
      This function is deprecated. gen_fsm:reply/2 is deprecated; use the 'gen_statem' module instead.
    </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> reply(Caller, Reply) -> Result when Caller :: <a href="#t:from/0">from</a>(), Reply :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(), Result :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Send a reply to a caller.</p><p>This function can be used by a <code class="inline">gen_fsm</code> process to explicitly send
a reply to a client process that called
<a href="#sync_send_event/3"><code class="inline">sync_send_event/2,3</code></a> or
<a href="#sync_send_all_state_event/3"><code class="inline">sync_send_all_state_event/2,3</code></a>
when the reply cannot be defined in the return value of
<a href="#c:StateName/3"><code class="inline">Module:StateName/3</code></a> or
<a href="#c:handle_sync_event/4"><code class="inline">Module:handle_sync_event/4</code></a>.</p><p><code class="inline">Caller</code> must be the <code class="inline">From</code> argument provided to the callback function.
<code class="inline">Reply</code> is any term given back to the client as the return value of
<a href="#sync_send_event/3"><code class="inline">sync_send_event/2,3</code></a> or
<a href="#sync_send_all_state_event/3"><code class="inline">sync_send_all_state_event/2,3</code></a>.</p><p>Return value <code class="inline">Result</code> is not further defined, and is always to be ignored.</p>
  </section>
</section>
<section class="detail" id="send_all_state_event/2">

  <div class="detail-header">
    <a href="#send_all_state_event/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">send_all_state_event(FsmRef, Event)</h1>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/gen_fsm.erl#L1104" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

    <div class="deprecated">
      This function is deprecated. gen_fsm:send_all_state_event/2 is deprecated; use the 'gen_statem' module instead.
    </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> send_all_state_event(FsmRef, Event) -> ok when FsmRef :: <a href="#t:fsm_ref/0">fsm_ref</a>(), Event :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Send an event asynchronously to a generic FSM.</p><p>Sends an event asynchronously to the <code class="inline">FsmRef</code> of the <code class="inline">gen_fsm</code> process
and returns <code class="inline">ok</code> immediately.  The <code class="inline">gen_fsm</code> process calls
<a href="#c:handle_event/3"><code class="inline">Module:handle_event/3</code></a> to handle the event.</p><p>For a description of the arguments, see <a href="#send_event/2"><code class="inline">send_event/2</code></a>.</p><p>The difference between <a href="#send_event/2"><code class="inline">send_event/2</code></a> and <a href="#send_all_state_event/2"><code class="inline">send_all_state_event/2</code></a>
is which callback function is used to handle the event.
This function is useful when sending events that are handled
the same way in every state, as only one <code class="inline">handle_event</code> clause
is needed to handle the event instead of one clause
in each state name function.</p>
  </section>
</section>
<section class="detail" id="send_event/2">

  <div class="detail-header">
    <a href="#send_event/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">send_event(FsmRef, Event)</h1>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/gen_fsm.erl#L1025" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

    <div class="deprecated">
      This function is deprecated. gen_fsm:send_event/2 is deprecated; use the 'gen_statem' module instead.
    </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> send_event(FsmRef, Event) -> ok when FsmRef :: <a href="#t:fsm_ref/0">fsm_ref</a>(), Event :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Send an event asynchronously to a generic FSM.</p><p>Sends <code class="inline">Event</code> to the <code class="inline">FsmRef</code> of the <code class="inline">gen_fsm</code> process
and returns <code class="inline">ok</code> immediately.  The <code class="inline">gen_fsm</code> process calls
<a href="#c:StateName/2"><code class="inline">Module:StateName/2</code></a> to handle the event,
where <code class="inline">StateName</code> is the name of the current state
of the <code class="inline">gen_fsm</code> process.</p><p><a href="" id="fsm-ref"></a>
<code class="inline">FsmRef</code> can be any of the following:</p><ul><li>The <a href="../../apps/erts/erlang.html#t:pid/0"><code class="inline">pid/0</code></a></li><li><code class="inline">Name</code>, if the <code class="inline">gen_fsm</code> process is locally registered</li><li><code class="inline">{Name,Â Node}</code>, if the <code class="inline">gen_fsm</code> process is locally registered
at another node</li><li><code class="inline">{global,Â GlobalName}</code>, if the <code class="inline">gen_fsm</code> process is globally registered</li><li><code class="inline">{via,Â Module,Â ViaName}</code>, if the <code class="inline">gen_fsm</code> process is registered
through an alternative process registry</li></ul><p><code class="inline">Event</code> is any term that is passed as one of the arguments
to <code class="inline">Module:StateName/2</code>.</p>
  </section>
</section>
<section class="detail" id="send_event_after/2">

  <div class="detail-header">
    <a href="#send_event_after/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">send_event_after(Time, Event)</h1>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/gen_fsm.erl#L1208" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

    <div class="deprecated">
      This function is deprecated. gen_fsm:send_event_after/2 is deprecated; use the 'gen_statem' module instead.
    </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> send_event_after(Time, Event) -> Ref
                          when Time :: <a href="../../apps/erts/erlang.html#t:non_neg_integer/0">non_neg_integer</a>(), Event :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(), Ref :: <a href="../../apps/erts/erlang.html#t:reference/0">reference</a>().</pre>

      </div>

<p>Send a delayed event internally in a generic FSM.</p><p>Sends a delayed event internally in the <code class="inline">gen_fsm</code> process
that calls this function after <code class="inline">Time</code> milliseconds.
Returns immediately a reference that can be used to cancel
the delayed send using <a href="#cancel_timer/1"><code class="inline">cancel_timer/1</code></a>.</p><p>The <code class="inline">gen_fsm</code> process calls <a href="#c:StateName/2"><code class="inline">Module:StateName/2</code></a>
to handle the event, where <code class="inline">'StateName'</code> is the name of
the current state of the <code class="inline">gen_fsm</code> process at the time
the delayed event is delivered.</p><p><code class="inline">Event</code> is any term that is passed as one of the arguments
to <a href="#c:StateName/2"><code class="inline">Module:StateName/2</code></a>.</p>
  </section>
</section>
<section class="detail" id="start/3">

  <div class="detail-header">
    <a href="#start/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">start(Module, Args, Options)</h1>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/gen_fsm.erl#L855" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

    <div class="deprecated">
      This function is deprecated. gen_fsm:start/3 is deprecated; use the 'gen_statem' module instead.
    </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> start(Module, Args, Options) -> Result
               when
                   Module :: <a href="../../apps/erts/erlang.html#t:module/0">module</a>(),
                   Args :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                   Options :: [<a href="#t:start_opt/0">start_opt</a>()],
                   Result :: {ok, Pid} | ignore | {error, Reason},
                   Pid :: <a href="../../apps/erts/erlang.html#t:pid/0">pid</a>(),
                   Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Create a standalone <code class="inline">gen_fsm</code> process, not registered.</p><p>Equivalent to <a href="#start/4"><code class="inline">start(Name, Mod, Args, Options)</code></a>
without registering a <code class="inline">Name</code>.</p><p>For a description of arguments and return values,
see <a href="#start_link/3"><code class="inline">start_link/3,4</code></a>.</p>
  </section>
</section>
<section class="detail" id="start/4">

  <div class="detail-header">
    <a href="#start/4" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">start(FsmName, Module, Args, Options)</h1>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/gen_fsm.erl#L875" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

    <div class="deprecated">
      This function is deprecated. gen_fsm:start/4 is deprecated; use the 'gen_statem' module instead.
    </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> start(FsmName, Module, Args, Options) -> Result
               when
                   FsmName :: <a href="#t:fsm_name/0">fsm_name</a>(),
                   Module :: <a href="../../apps/erts/erlang.html#t:module/0">module</a>(),
                   Args :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                   Options :: [<a href="#t:start_opt/0">start_opt</a>()],
                   Result :: {ok, Pid} | ignore | {error, Reason},
                   Pid :: <a href="../../apps/erts/erlang.html#t:pid/0">pid</a>(),
                   Reason :: {already_started, Pid} | <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Create a standalone <code class="inline">gen_fsm</code> process.</p><p>The created process is not part of a supervision tree
and thus has no supervisor.</p><p>For a description of arguments and return values,
see <a href="#start_link/4"><code class="inline">start_link/3,4</code></a>.</p>
  </section>
</section>
<section class="detail" id="start_link/3">

  <div class="detail-header">
    <a href="#start_link/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">start_link(Module, Args, Options)</h1>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/gen_fsm.erl#L891" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

    <div class="deprecated">
      This function is deprecated. gen_fsm:start_link/3 is deprecated; use the 'gen_statem' module instead.
    </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> start_link(Module, Args, Options) -> Result
                    when
                        Module :: <a href="../../apps/erts/erlang.html#t:module/0">module</a>(),
                        Args :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                        Options :: [<a href="#t:start_opt/0">start_opt</a>()],
                        Result :: {ok, Pid} | ignore | {error, Reason},
                        Pid :: <a href="../../apps/erts/erlang.html#t:pid/0">pid</a>(),
                        Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Create a <code class="inline">gen_fsm</code> process in a supervision tree, not registered.</p><p>Equivalent to <a href="#start_link/4"><code class="inline">start_link(Name, Mod, Args, Options)</code></a>
without registering a <code class="inline">Name</code>.</p>
  </section>
</section>
<section class="detail" id="start_link/4">

  <div class="detail-header">
    <a href="#start_link/4" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">start_link(FsmName, Module, Args, Options)</h1>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/gen_fsm.erl#L963" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

    <div class="deprecated">
      This function is deprecated. gen_fsm:start_link/4 is deprecated; use the 'gen_statem' module instead.
    </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> start_link(FsmName, Module, Args, Options) -> Result
                    when
                        FsmName :: <a href="#t:fsm_name/0">fsm_name</a>(),
                        Module :: <a href="../../apps/erts/erlang.html#t:module/0">module</a>(),
                        Args :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                        Options :: [<a href="#t:start_opt/0">start_opt</a>()],
                        Result :: {ok, Pid} | ignore | {error, Reason},
                        Pid :: <a href="../../apps/erts/erlang.html#t:pid/0">pid</a>(),
                        Reason :: {already_started, Pid} | <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Create a <code class="inline">gen_fsm</code> process in a supervision tree.</p><p>The process is created as part of a supervision tree.  The function
is to be called, directly or indirectly, by the supervisor.
For example, it ensures that the <code class="inline">gen_fsm</code> process
is linked to the supervisor.</p><p>The <code class="inline">gen_fsm</code> process calls <a href="#c:init/1"><code class="inline">Module:init/1</code></a> to initialize.
To ensure a synchronized startup procedure,
<a href="#start_link/4"><code class="inline">start_link/3,4</code></a> does not return
until <code class="inline">Module:init/1</code> has returned.</p><p><a href="" id="fsm-name"></a></p><ul><li><p>If <strong><code class="inline">FsmNameÂ =Â {local,Â Name}</code></strong>, the <code class="inline">gen_fsm</code> process
is registered locally as <code class="inline">Name</code> using <a href="../../apps/erts/erlang.html#register/2"><code class="inline">register/2</code></a>.</p></li><li><p>If <strong><code class="inline">FsmNameÂ =Â {global,Â GlobalName}</code></strong>, the <code class="inline">gen_fsm</code> process
is registered globally as <code class="inline">GlobalName</code> using <a href="../../apps/kernel/global.html#register_name/2"><code class="inline">global:register_name/2</code></a>.</p></li><li><p>If <strong><code class="inline">FsmNameÂ =Â {via,Â Module,Â ViaName}</code></strong>,
the <code class="inline">gen_fsm</code> process registers with the registry
represented by <code class="inline">Module</code>.  The <code class="inline">Module</code> callback is to export
the functions <code class="inline">register_name/2</code>, <code class="inline">unregister_name/1</code>,
<code class="inline">whereis_name/1</code>, and <code class="inline">send/2</code>, which are to behave like
the corresponding functions in <a href="../../apps/kernel/global.html"><code class="inline">global</code></a>.
Thus, <code class="inline">{via,Â global,Â GlobalName}</code> is a valid reference.</p></li></ul><p><code class="inline">Module</code> is the name of the callback module.</p><p><code class="inline">Args</code> is any term that is passed as the argument to <code class="inline">Module:init/1</code>.</p><p><a href="" id="start-options"></a></p><p>If option <strong><code class="inline">{timeout,Â Time}</code></strong> is present, the <code class="inline">gen_fsm</code> process
is allowed to spend <code class="inline">Time</code> milliseconds initializing or it terminates
and the start function returns <code class="inline">{error,Â timeout}</code>.</p><p>If option <strong><code class="inline">{debug,Â Dbgs}</code></strong> is present, the corresponding <code class="inline">sys</code> function
is called for each item in <code class="inline">Dbgs</code>; see <a href="sys.html"><code class="inline">sys(3)</code></a>.</p><p>If option <strong><code class="inline">{spawn_opt,Â SOpts}</code></strong> is present, <code class="inline">SOpts</code> is passed
as option list to the <code class="inline">spawn_opt</code> BIF that is used
to spawn the <code class="inline">gen_fsm</code> process; see <a href="../../apps/erts/erlang.html#spawn_opt/2"><code class="inline">spawn_opt/2</code></a>.</p><section role="note" class="admonition info"><h4 class="admonition-title info">Note</h4><p>Using spawn option <code class="inline">monitor</code> is not allowed, it causes
the function to fail with reason <code class="inline">badarg</code>.</p></section><p>If the <code class="inline">gen_fsm</code> process is successfully created and initialized,
the function returns <code class="inline">{ok,Â Pid}</code>, where <code class="inline">Pid</code> is the pid
of the <code class="inline">gen_fsm</code> process.  If a process with the specified <code class="inline">FsmName</code>
exists already, the function returns <code class="inline">{error,Â {already_started,Â Pid}}</code>,
where <code class="inline">Pid</code> is the pid of that process.</p><p>If <code class="inline">Module:init/1</code> fails with <code class="inline">Reason</code>, the function returns
<code class="inline">{error,Â Reason}</code>.  If <code class="inline">Module:init/1</code> returns <code class="inline">{stop,Â Reason}</code>
or <code class="inline">ignore</code>, the process is terminated and the function returns
<code class="inline">{error,Â Reason}</code> or <code class="inline">ignore</code>, respectively.</p>
  </section>
</section>
<section class="detail" id="start_timer/2">

  <div class="detail-header">
    <a href="#start_timer/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">start_timer(Time, Msg)</h1>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/gen_fsm.erl#L1184" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

    <div class="deprecated">
      This function is deprecated. gen_fsm:start_timer/2 is deprecated; use the 'gen_statem' module instead.
    </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> start_timer(Time, Msg) -> Ref when Time :: <a href="../../apps/erts/erlang.html#t:non_neg_integer/0">non_neg_integer</a>(), Msg :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(), Ref :: <a href="../../apps/erts/erlang.html#t:reference/0">reference</a>().</pre>

      </div>

<p>Send a time-out event internally in a generic FSM.</p><p>Sends a time-out event internally in the <code class="inline">gen_fsm process</code>
that calls this function after <code class="inline">Time</code> milliseconds.
Returns immediately a reference that can be used to cancel the timer
using <a href="#cancel_timer/1"><code class="inline">cancel_timer/1</code></a>.</p><p>The <code class="inline">gen_fsm</code> process calls <a href="#c:StateName/2"><code class="inline">Module:StateName/2</code></a>
to handle the event, where <code class="inline">'StateName'</code> is the name
of the current state of the <code class="inline">gen_fsm</code> process at the time
the time-out message is delivered.</p><p><code class="inline">Msg</code> is any term that is passed in the time-out message,
<code class="inline">{timeout,Â Ref,Â Msg}</code>, as one of the arguments
to <a href="#c:StateName/2"><code class="inline">Module:StateName/2</code></a>.</p>
  </section>
</section>
<section class="detail" id="stop/1">

  <div class="detail-header">
    <a href="#stop/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">stop(FsmRef)</h1>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/gen_fsm.erl#L969" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

    <div class="deprecated">
      This function is deprecated. gen_fsm:stop/1 is deprecated; use the 'gen_statem' module instead.
    </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> stop(FsmRef) -> ok when FsmRef :: <a href="#t:fsm_ref/0">fsm_ref</a>().</pre>

      </div>

<p>Equivalent to <a href="#stop/3"><code class="inline">stop(FsmRef, normal, infinity)</code></a>.</p>
  </section>
</section>
<section class="detail" id="stop/3">

  <div class="detail-header">
    <a href="#stop/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">stop(FsmRef, Reason, Timeout)</h1>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/gen_fsm.erl#L996" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

    <div class="deprecated">
      This function is deprecated. gen_fsm:stop/3 is deprecated; use the 'gen_statem' module instead.
    </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> stop(FsmRef, Reason, Timeout) -> ok
              when FsmRef :: <a href="#t:fsm_ref/0">fsm_ref</a>(), Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(), Timeout :: <a href="../../apps/erts/erlang.html#t:timeout/0">timeout</a>().</pre>

      </div>

<p>Synchronously stop a generic FSM.</p><p>Orders a generic finite state machine to exit with the specified <code class="inline">Reason</code>
and waits for it to terminate.  The <code class="inline">gen_fsm</code> process calls
<a href="#c:terminate/3"><code class="inline">Module:terminate/3</code></a> before exiting.</p><p>The function returns <code class="inline">ok</code> if the generic finite state machine terminates
with the expected reason.  Any other reason than <code class="inline">normal</code>, <code class="inline">shutdown</code>,
or <code class="inline">{shutdown,Â Term}</code> causes an error report to be issued using
<a href="../../apps/kernel/error_logger.html#format/2"><code class="inline">error_logger:format/2</code></a>.</p><p><code class="inline">Timeout</code> is an integer greater than zero that specifies
how many milliseconds to wait for the generic FSM to terminate,
or the atom <code class="inline">infinity</code> to wait indefinitely.
If the generic finite state machine has not terminated
within the specified time, a <code class="inline">timeout</code> exception is raised.</p><p>If the process does not exist, a <code class="inline">noproc</code> exception is raised.</p>
  </section>
</section>
<section class="detail" id="sync_send_all_state_event/2">

  <div class="detail-header">
    <a href="#sync_send_all_state_event/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">sync_send_all_state_event(FsmRef, Event)</h1>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/gen_fsm.erl#L1119" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

    <div class="deprecated">
      This function is deprecated. gen_fsm:sync_send_all_state_event/2 is deprecated; use the 'gen_statem' module instead.
    </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> sync_send_all_state_event(FsmRef, Event) -> Reply
                                   when FsmRef :: <a href="#t:fsm_ref/0">fsm_ref</a>(), Event :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(), Reply :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Equivalent to <a href="#sync_send_all_state_event/3"><code class="inline">sync_send_all_state_event(FsmRef, Event, 5000)</code></a>.</p>
  </section>
</section>
<section class="detail" id="sync_send_all_state_event/3">

  <div class="detail-header">
    <a href="#sync_send_all_state_event/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">sync_send_all_state_event(FsmRef, Event, Timeout)</h1>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/gen_fsm.erl#L1146" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

    <div class="deprecated">
      This function is deprecated. gen_fsm:sync_send_all_state_event/3 is deprecated; use the 'gen_statem' module instead.
    </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> sync_send_all_state_event(FsmRef, Event, Timeout) -> Reply
                                   when
                                       FsmRef :: <a href="#t:fsm_ref/0">fsm_ref</a>(),
                                       Event :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                       Timeout :: <a href="../../apps/erts/erlang.html#t:timeout/0">timeout</a>(),
                                       Reply :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Send an event synchronously to a generic FSM.</p><p>Sends an event to the <code class="inline">FsmRef</code> of the <code class="inline">gen_fsm</code> process and waits
until a reply arrives or a time-out occurs.  The <code class="inline">gen_fsm</code> process calls
<a href="#c:handle_sync_event/4"><code class="inline">Module:handle_sync_event/4</code></a>
to handle the event.</p><p>For a description of <code class="inline">FsmRef</code> and <code class="inline">Event</code>, see <a href="#send_event/2"><code class="inline">send_event/2</code></a>.
For a description of <code class="inline">Timeout</code> and <code class="inline">Reply</code>, see <a href="#sync_send_event/3"><code class="inline">sync_send_event/3</code></a>.</p><p>For a discussion about the difference between <code class="inline">sync_send_event</code>
and <code class="inline">sync_send_all_state_event</code>, see <a href="#send_all_state_event/2"><code class="inline">send_all_state_event/2</code></a>.</p>
  </section>
</section>
<section class="detail" id="sync_send_event/2">

  <div class="detail-header">
    <a href="#sync_send_event/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">sync_send_event(FsmRef, Event)</h1>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/gen_fsm.erl#L1040" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

    <div class="deprecated">
      This function is deprecated. gen_fsm:sync_send_event/2 is deprecated; use the 'gen_statem' module instead.
    </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> sync_send_event(FsmRef, Event) -> Reply when FsmRef :: <a href="#t:fsm_ref/0">fsm_ref</a>(), Event :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(), Reply :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Equivalent to <a href="#sync_send_event/3"><code class="inline">sync_send_event(FsmRef, Event, 5000)</code></a>.</p>
  </section>
</section>
<section class="detail" id="sync_send_event/3">

  <div class="detail-header">
    <a href="#sync_send_event/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">sync_send_event(FsmRef, Event, Timeout)</h1>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/gen_fsm.erl#L1077" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

    <div class="deprecated">
      This function is deprecated. gen_fsm:sync_send_event/3 is deprecated; use the 'gen_statem' module instead.
    </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> sync_send_event(FsmRef, Event, Timeout) -> Reply
                         when
                             FsmRef :: <a href="#t:fsm_ref/0">fsm_ref</a>(), Event :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(), Timeout :: <a href="../../apps/erts/erlang.html#t:timeout/0">timeout</a>(), Reply :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Send an event synchronously to a generic FSM.</p><p>Sends an event to the <code class="inline">FsmRef</code> of the <code class="inline">gen_fsm</code> process
and waits until a reply arrives or a time-out occurs.
The <code class="inline">gen_fsm</code> process calls <a href="#c:StateName/3"><code class="inline">Module:StateName/3</code></a>
to handle the event, where <code class="inline">'StateName'</code> is the name
of the current state of the <code class="inline">gen_fsm</code> process.</p><p>For a description of <code class="inline">FsmRef</code> and <code class="inline">Event</code>, see <a href="#send_event/2"><code class="inline">send_event/2</code></a>.</p><p><code class="inline">Timeout</code> is an integer greater than zero that specifies
how many milliseconds to wait for a reply, or the atom <code class="inline">infinity</code>
to wait indefinitely.  If no reply is received within the specified time,
the function call fails.</p><p>Return value <code class="inline">Reply</code> is defined in the return value of
<a href="#c:StateName/3"><code class="inline">Module:StateName/3</code></a></p><section role="note" class="admonition info"><h4 class="admonition-title info">Note</h4><p>The ancient behavior of sometimes consuming the server exit message
if the server died during the call while linked to the client
was removed in Erlang 5.6/OTP R12B.</p></section>
  </section>
</section>

    </div>
  </section>

    <footer class="footer">
      <p>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="stdlib.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.38.1) for the

          <a href="https://erlang.org" title="Erlang" target="_blank" translate="no">Erlang programming language</a>

      </p>
<p>Copyright Â© 1996-2025 <a href="https://www.ericsson.com">Ericsson AB</a></p>
    </footer>
  </div>
</main>
</div>
  <script defer src="https://cdn.jsdelivr.net/npm/mermaid@11.4.1/dist/mermaid.min.js"></script>
  <script>
  let initialized = false;

  window.addEventListener("exdoc:loaded", () => {
      if (!initialized) {
      mermaid.initialize({
          startOnLoad: false,
          theme: document.body.className.includes("dark") ? "dark" : "default"
      });
      initialized = true;
      }

      let id = 0;
      for (const codeEl of document.querySelectorAll("pre code.mermaid")) {
      const preEl = codeEl.parentElement;
      const graphDefinition = codeEl.textContent;
      const graphEl = document.createElement("div");
      const graphId = "mermaid-graph-" + id++;
      mermaid.render(graphId, graphDefinition).then(({svg, bindFunctions}) => {
          graphEl.innerHTML = svg;
          bindFunctions?.(graphEl);
          preEl.insertAdjacentElement("afterend", graphEl);
          preEl.remove();
      });
      }
  });
  </script>

  </body>
</html>
