<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.38.1">
    <meta name="project" content="stdlib v7.0.1-rc0">


<meta name="exdoc:full-text-search-url" content="/doc/search.html?v=29&q=">
<meta name="major-vsn" content="29">
<link rel="canonical" href="https://www.erlang.org/docs/29/apps/stdlib/argparse.html" />
    <title>argparse â€” stdlib v7.0.1-rc0</title>

    <link rel="stylesheet" href="dist/html-erlang-ZK43ZOAC.css" />

    <script defer src="dist/sidebar_items-CCDE9420.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-DPJLHKSM.js"></script>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="../../index.html" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="stdlib" />
        </a>

      <div>
        <a href="../../index.html" class="sidebar-projectName" translate="no">
stdlib
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v7.0.1-rc0
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras=""></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-module" id="main" data-type="modules">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of stdlib</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search" tabindex="-1">
            <i class="ri-search-2-line ri-lg" aria-hidden="true"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>
      <span translate="no">argparse</span> 
      <small class="app-vsn" translate="no">(stdlib v7.0.1-rc0)</small>

    </h1>

      <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/argparse.erl#L24" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

  </div>


    <section id="moduledoc">
<p>Command line arguments parser.</p><p>This module implements command line parser. Parser operates with <em>commands</em> and
<em>arguments</em> represented as a tree. Commands are branches, and arguments are
leaves of the tree. Parser always starts with the root command, named after
<code class="inline">progname</code> (the name of the program which started Erlang).</p><p>A <a href="#t:command/0"><code class="inline">command specification</code></a> may contain handler definition for
each command, and a number argument specifications. When parser is successful,
<code class="inline">argparse</code> calls the matching handler, passing arguments extracted from the
command line. Arguments can be positional (occupying specific position in the
command line), and optional, residing anywhere but prefixed with a specified
character.</p><p><code class="inline">argparse</code> automatically generates help and usage messages. It will also issue
errors when users give the program invalid arguments.</p><h2 id="module-quick-start" class="section-heading"><a href="#module-quick-start" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Quick start</span></h2><p><code class="inline">argparse</code> is designed to work with <a href="../../apps/erts/escript_cmd.html"><code class="inline">escript</code></a>. The
example below is a fully functioning Erlang program accepting two command line
arguments and printing their product.</p><pre><code class="makeup erlang" translate="no"><span class="ch">#!/usr/bin/env escript
</span><span class="w">
</span><span class="nf">main</span><span class="p" data-group-id="9320411158-1">(</span><span class="n">Args</span><span class="p" data-group-id="9320411158-1">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nc">argparse</span><span class="p">:</span><span class="nf">run</span><span class="p" data-group-id="9320411158-2">(</span><span class="n">Args</span><span class="p">,</span><span class="w"> </span><span class="nf">cli</span><span class="p" data-group-id="9320411158-3">(</span><span class="p" data-group-id="9320411158-3">)</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9320411158-4">#{</span><span class="ss">progname</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">mul</span><span class="p" data-group-id="9320411158-4">}</span><span class="p" data-group-id="9320411158-2">)</span><span class="p">.</span><span class="w">

</span><span class="nf">cli</span><span class="p" data-group-id="9320411158-5">(</span><span class="p" data-group-id="9320411158-5">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="p" data-group-id="9320411158-6">#{</span><span class="w">
        </span><span class="ss">arguments</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="9320411158-7">[</span><span class="w">
            </span><span class="p" data-group-id="9320411158-8">#{</span><span class="ss">name</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">left</span><span class="p">,</span><span class="w"> </span><span class="ss">type</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">integer</span><span class="p" data-group-id="9320411158-8">}</span><span class="p">,</span><span class="w">
            </span><span class="p" data-group-id="9320411158-9">#{</span><span class="ss">name</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">right</span><span class="p">,</span><span class="w"> </span><span class="ss">type</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">integer</span><span class="p" data-group-id="9320411158-9">}</span><span class="w">
        </span><span class="p" data-group-id="9320411158-7">]</span><span class="p">,</span><span class="w">
        </span><span class="ss">handler</span><span class="w"> </span><span class="p">=&gt;</span><span class="w">
            </span><span class="nf">fun</span><span class="w"> </span><span class="p" data-group-id="9320411158-10">(</span><span class="p" data-group-id="9320411158-11">#{</span><span class="ss">left</span><span class="w"> </span><span class="p">:=</span><span class="w"> </span><span class="n">Left</span><span class="p">,</span><span class="w"> </span><span class="ss">right</span><span class="w"> </span><span class="p">:=</span><span class="w"> </span><span class="n">Right</span><span class="p" data-group-id="9320411158-11">}</span><span class="p" data-group-id="9320411158-10">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
                </span><span class="nc">io</span><span class="p">:</span><span class="nf">format</span><span class="p" data-group-id="9320411158-12">(</span><span class="s">&quot;</span><span class="si">~b</span><span class="si">~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9320411158-13">[</span><span class="n">Left</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">Right</span><span class="p" data-group-id="9320411158-13">]</span><span class="p" data-group-id="9320411158-12">)</span><span class="w">
            </span><span class="k">end</span><span class="w">
    </span><span class="p" data-group-id="9320411158-6">}</span><span class="p">.</span></code></pre><p>Running this script with no arguments results in an error, accompanied by the
usage information.</p><p>The <code class="inline">cli</code> function defines a single command with embedded handler accepting a
map. Keys of the map are argument names as defined by the <code class="inline">argument</code> field of
the command, <code class="inline">left</code> and <code class="inline">right</code> in the example. Values are taken from the
command line, and converted into integers, as requested by the type
specification. Both arguments in the example above are required (and therefore
defined as positional).</p><h2 id="module-command-hierarchy" class="section-heading"><a href="#module-command-hierarchy" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Command hierarchy</span></h2><p>A command may contain nested commands, forming a hierarchy. Arguments defined at
the upper level command are automatically added to all nested commands. Nested
commands example (assuming <code class="inline">progname</code> is <code class="inline">nested</code>):</p><pre><code class="makeup erlang" translate="no"><span class="nf">cli</span><span class="p" data-group-id="3625638309-1">(</span><span class="p" data-group-id="3625638309-1">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
  </span><span class="p" data-group-id="3625638309-2">#{</span><span class="w">
    </span><span class="c1">%% top level argument applicable to all commands</span><span class="w">
    </span><span class="ss">arguments</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="3625638309-3">[</span><span class="p" data-group-id="3625638309-4">#{</span><span class="ss">name</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">top</span><span class="p" data-group-id="3625638309-4">}</span><span class="p" data-group-id="3625638309-3">]</span><span class="p">,</span><span class="w">
      </span><span class="ss">commands</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="3625638309-5">#{</span><span class="w">
        </span><span class="s">&quot;first&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="3625638309-6">#{</span><span class="w">
          </span><span class="c1">%% argument applicable to &quot;first&quot; command and</span><span class="w">
          </span><span class="c1">%%  all commands nested into &quot;first&quot;</span><span class="w">
          </span><span class="ss">arguments</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="3625638309-7">[</span><span class="p" data-group-id="3625638309-8">#{</span><span class="ss">name</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">mid</span><span class="p" data-group-id="3625638309-8">}</span><span class="p" data-group-id="3625638309-7">]</span><span class="p">,</span><span class="w">
          </span><span class="ss">commands</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="3625638309-9">#{</span><span class="w">
            </span><span class="s">&quot;second&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="3625638309-10">#{</span><span class="w">
              </span><span class="c1">%% argument only applicable for &quot;second&quot; command</span><span class="w">
              </span><span class="ss">arguments</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="3625638309-11">[</span><span class="p" data-group-id="3625638309-12">#{</span><span class="ss">name</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">bottom</span><span class="p" data-group-id="3625638309-12">}</span><span class="p" data-group-id="3625638309-11">]</span><span class="p">,</span><span class="w">
              </span><span class="ss">handler</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nf">fun</span><span class="w"> </span><span class="p" data-group-id="3625638309-13">(</span><span class="n">A</span><span class="p" data-group-id="3625638309-13">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">io</span><span class="p">:</span><span class="nf">format</span><span class="p" data-group-id="3625638309-14">(</span><span class="s">&quot;</span><span class="si">~p</span><span class="si">~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3625638309-15">[</span><span class="n">A</span><span class="p" data-group-id="3625638309-15">]</span><span class="p" data-group-id="3625638309-14">)</span><span class="w"> </span><span class="k">end</span><span class="w">
          </span><span class="p" data-group-id="3625638309-10">}</span><span class="w">
        </span><span class="p" data-group-id="3625638309-9">}</span><span class="w">
      </span><span class="p" data-group-id="3625638309-6">}</span><span class="w">
    </span><span class="p" data-group-id="3625638309-5">}</span><span class="w">
  </span><span class="p" data-group-id="3625638309-2">}</span><span class="p">.</span></code></pre><p>In the example above, a 3-level hierarchy is defined. First is the script itself
(<code class="inline">nested</code>), accepting the only argument <code class="inline">top</code>. Since it has no associated
handler, <a href="#run/3"><code class="inline">run/3</code></a> will not accept user input omitting nested command selection.
For this example, user has to supply 5 arguments in the command line, two being
command names, and another 3 - required positional arguments:</p><pre><code class="text">./nested.erl one first second two three
#{top =&gt; &quot;one&quot;,mid =&gt; &quot;two&quot;,bottom =&gt; &quot;three&quot;}</code></pre><p>Commands have preference over positional argument values. In the example above,
commands and positional arguments are interleaving, and <code class="inline">argparse</code> matches
command name first.</p><h2 id="module-arguments" class="section-heading"><a href="#module-arguments" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Arguments</span></h2><p><code class="inline">argparse</code> supports positional and optional arguments. Optional arguments, or
options for short, must be prefixed with a special character (<code class="inline">-</code> is the default
on all operating systems). Both options and positional arguments have 1 or more
associated values. See <a href="#t:argument/0"><code class="inline">argument specification</code></a> to find more
details about supported combinations.</p><p>In the user input, short options may be concatenated with their values. Long
options support values separated by <code class="inline">=</code>. Consider this definition:</p><pre><code class="makeup erlang" translate="no"><span class="nf">cli</span><span class="p" data-group-id="6085110342-1">(</span><span class="p" data-group-id="6085110342-1">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
  </span><span class="p" data-group-id="6085110342-2">#{</span><span class="w">
    </span><span class="ss">arguments</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="6085110342-3">[</span><span class="w">
      </span><span class="p" data-group-id="6085110342-4">#{</span><span class="ss">name</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">long</span><span class="p">,</span><span class="w"> </span><span class="ss">long</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;-long&quot;</span><span class="p" data-group-id="6085110342-4">}</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="6085110342-5">#{</span><span class="ss">name</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">short</span><span class="p">,</span><span class="w"> </span><span class="ss">short</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="sc">$s</span><span class="p" data-group-id="6085110342-5">}</span><span class="w">
    </span><span class="p" data-group-id="6085110342-3">]</span><span class="p">,</span><span class="w">
    </span><span class="ss">handler</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nf">fun</span><span class="w"> </span><span class="p" data-group-id="6085110342-6">(</span><span class="n">Args</span><span class="p" data-group-id="6085110342-6">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">io</span><span class="p">:</span><span class="nf">format</span><span class="p" data-group-id="6085110342-7">(</span><span class="s">&quot;</span><span class="si">~p</span><span class="si">~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6085110342-8">[</span><span class="n">Args</span><span class="p" data-group-id="6085110342-8">]</span><span class="p" data-group-id="6085110342-7">)</span><span class="w"> </span><span class="k">end</span><span class="w">
  </span><span class="p" data-group-id="6085110342-2">}</span><span class="p">.</span></code></pre><p>Running <code class="inline">./args --long=VALUE</code> prints <code class="inline">#{long =&gt; &quot;VALUE&quot;}</code>, running
<code class="inline">./args -sVALUE</code> prints <code class="inline">#{short =&gt; &quot;VALUE&quot;}</code></p><p><code class="inline">argparse</code> supports boolean flags concatenation: it is possible to shorten
<code class="inline">-r -f -v</code> to <code class="inline">-rfv</code>.</p><p>Shortened option names are not supported: it is not possible to use <code class="inline">--my-argum</code>
instead of <code class="inline">--my-argument-name</code> even when such option can be unambiguously
found.</p>
    </section>

</div>

  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Summary</span>
    </h1>
<div class="summary-types summary">
  <h2>
    <a href="#types">Types</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:arg_map/0" data-no-tooltip="" translate="no">arg_map()</a>

      </div>

        <div class="summary-synopsis"><p>Arguments map is the map of argument names to the values extracted from the
command line. It is passed to the matching command handler. If an argument is
omitted, but has the default value is specified, it is added to the map. When no
default value specified, and argument is not present in the command line,
corresponding key is not present in the resulting map.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:arg_type/0" data-no-tooltip="" translate="no">arg_type()</a>

      </div>

        <div class="summary-synopsis"><p>Defines type conversion applied to the string retrieved from the user input. If
the conversion is successful, resulting value is validated using optional
<code class="inline">Choices</code>, or minimums and maximums (for integer and floating point values
only). Strings and binary values may be validated using regular expressions.
It's possible to define custom type conversion function, accepting a string and
returning Erlang term. If this function raises error with <code class="inline">badarg</code> reason,
argument is treated as invalid.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:args/0" data-no-tooltip="" translate="no">args()</a>

      </div>

        <div class="summary-synopsis"><p>List of command line arguments to be parsed.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:argument/0" data-no-tooltip="" translate="no">argument()</a>

      </div>

        <div class="summary-synopsis"><p>Argument specification. Defines a single named argument that is returned in the
<a><code class="inline">argument map</code></a>. The only required field is <code class="inline">name</code>, all other
fields have defaults.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:argument_help/0" data-no-tooltip="" translate="no">argument_help()</a>

      </div>

        <div class="summary-synopsis"><p>User-defined help template to print in the command usage. First element of a
tuple must be a string. It is printed as a part of the usage header. Second
element of the tuple can be either a list containing strings, <code class="inline">type</code> and
<code class="inline">default</code> atoms, or a user-defined function that must return a string. A plain
string should be wrapped as a list such as <code class="inline">[&quot;string is nested&quot;]</code>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:argument_name/0" data-no-tooltip="" translate="no">argument_name()</a>

      </div>

        <div class="summary-synopsis"><p>Argument name is used to populate argument map.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:cmd_path/0" data-no-tooltip="" translate="no">cmd_path()</a>

      </div>

        <div class="summary-synopsis"><p>Path to the nested command. First element is always the <code class="inline">progname</code>, subsequent
elements are nested command names.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:command/0" data-no-tooltip="" translate="no">command()</a>

      </div>

        <div class="summary-synopsis"><p>Command specification. May contain nested commands, forming a hierarchy.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:command_help/0" data-no-tooltip="" translate="no">command_help()</a>

      </div>

        <div class="summary-synopsis"><p>User-defined help template. Use this option to mix custom and predefined usage
text. Help template may contain unicode strings, and following atoms</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:handler/0" data-no-tooltip="" translate="no">handler()</a>

      </div>

        <div class="summary-synopsis"><p>Command handler specification. Called by <a><code class="inline">run/3</code> </a>upon successful
parser return.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:parse_result/0" data-no-tooltip="" translate="no">parse_result()</a>

      </div>

        <div class="summary-synopsis"><p>Returned from <a><code class="inline">parse/2,3</code></a>. Contains arguments extracted from the
command line, path to the nested command (if any), and a (potentially nested)
command specification that was considered when the parser finished successfully.
It is expected that the command contains a handler definition, that will be
called passing the argument map.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:parser_error/0" data-no-tooltip="" translate="no">parser_error()</a>

      </div>

        <div class="summary-synopsis"><p>Returned from <a><code class="inline">parse/2,3</code></a> when the user input cannot be parsed
according to the command specification.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:parser_options/0" data-no-tooltip="" translate="no">parser_options()</a>

      </div>

        <div class="summary-synopsis"><p>Options changing parser behaviour.</p></div>

    </div>

</div>
<div class="summary-functions summary">
  <h2>
    <a href="#functions">Functions</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#format_error/1" data-no-tooltip="" translate="no">format_error(Reason)</a>

      </div>

        <div class="summary-synopsis"><p>Generates human-readable text for <a><code class="inline">parser error</code></a>. Does not
include help/usage information, and does not provide localisation.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#help/1" data-no-tooltip="" translate="no">help(Command)</a>

      </div>

        <div class="summary-synopsis"><p>Equivalent to <a><code class="inline">help/2</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#help/2" data-no-tooltip="" translate="no">help(Command, Options)</a>

      </div>

        <div class="summary-synopsis"><p>Generates help/usage information text for the command supplied, or any nested
command when <code class="inline">command</code> option is specified. Arguments are displayed in the same
order as specified in <code class="inline">Command</code>. Does not provide localisation. Expects
<code class="inline">progname</code> to be set, otherwise defaults to return value of
<code class="inline">init:get_argument(progname)</code>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#parse/2" data-no-tooltip="" translate="no">parse(Args, Command)</a>

      </div>

        <div class="summary-synopsis"><p>Equivalent to <a><code class="inline">parse/3</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#parse/3" data-no-tooltip="" translate="no">parse(Args, Command, Options)</a>

      </div>

        <div class="summary-synopsis"><p>Parses command line arguments according to the command specification. Raises an
exception if the command specification is not valid. Use
<a><code class="inline">erl_error:format_exception/3,4</code> </a>to see a
friendlier message. Invalid command line input does not raise an exception, but
makes <code class="inline">parse/2,3</code> to return a tuple
<a><code class="inline">{error, parser_error()}</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#run/3" data-no-tooltip="" translate="no">run(Args, Command, Options)</a>

      </div>

        <div class="summary-synopsis"><p>Parses command line arguments and calls the matching command handler. Prints
human-readable error, help/usage information for the discovered command, and
halts the emulator with code 1 if there is any error in the command
specification or user-provided command line input.</p></div>

    </div>

</div>

  </section>


  <section id="types" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#types">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Types</span>
    </h1>
    <div class="types-list">
<section class="detail" id="t:arg_map/0">

  <div class="detail-header">
    <a href="#t:arg_map/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">arg_map()</h1>

        <span class="note">(since OTP 26.0)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/argparse.erl#L504" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> arg_map() :: #{<a href="#t:argument_name/0">argument_name</a>() => <a href="../../apps/erts/erlang.html#t:term/0">term</a>()}.</pre>

      </div>

<p>Arguments map is the map of argument names to the values extracted from the
command line. It is passed to the matching command handler. If an argument is
omitted, but has the default value is specified, it is added to the map. When no
default value specified, and argument is not present in the command line,
corresponding key is not present in the resulting map.</p>
  </section>
</section>
<section class="detail" id="t:arg_type/0">

  <div class="detail-header">
    <a href="#t:arg_type/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">arg_type()</h1>

        <span class="note">(since OTP 26.0)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/argparse.erl#L179" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> arg_type() ::
          boolean | float |
          {float, Choice :: [<a href="../../apps/erts/erlang.html#t:float/0">float</a>()]} |
          {float, [{min, <a href="../../apps/erts/erlang.html#t:float/0">float</a>()} | {max, <a href="../../apps/erts/erlang.html#t:float/0">float</a>()}]} |
          integer |
          {integer, Choices :: [<a href="../../apps/erts/erlang.html#t:integer/0">integer</a>()]} |
          {integer, [{min, <a href="../../apps/erts/erlang.html#t:integer/0">integer</a>()} | {max, <a href="../../apps/erts/erlang.html#t:integer/0">integer</a>()}]} |
          string |
          {string, Choices :: [<a href="../../apps/erts/erlang.html#t:string/0">string</a>()]} |
          {string, Re :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>()} |
          {string, Re :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(), ReOptions :: [<a href="../../apps/erts/erlang.html#t:term/0">term</a>()]} |
          binary |
          {binary, Choices :: [<a href="../../apps/erts/erlang.html#t:binary/0">binary</a>()]} |
          {binary, Re :: <a href="../../apps/erts/erlang.html#t:binary/0">binary</a>()} |
          {binary, Re :: <a href="../../apps/erts/erlang.html#t:binary/0">binary</a>(), ReOptions :: [<a href="../../apps/erts/erlang.html#t:term/0">term</a>()]} |
          atom |
          {atom, Choices :: [<a href="../../apps/erts/erlang.html#t:atom/0">atom</a>()]} |
          {atom, unsafe} |
          {custom, fun((<a href="../../apps/erts/erlang.html#t:string/0">string</a>()) -> <a href="../../apps/erts/erlang.html#t:term/0">term</a>())}.</pre>

      </div>

<p>Defines type conversion applied to the string retrieved from the user input. If
the conversion is successful, resulting value is validated using optional
<code class="inline">Choices</code>, or minimums and maximums (for integer and floating point values
only). Strings and binary values may be validated using regular expressions.
It's possible to define custom type conversion function, accepting a string and
returning Erlang term. If this function raises error with <code class="inline">badarg</code> reason,
argument is treated as invalid.</p>
  </section>
</section>
<section class="detail" id="t:args/0">

  <div class="detail-header">
    <a href="#t:args/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">args()</h1>

        <span class="note">(since OTP 26.0)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/argparse.erl#L510" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> args() :: [<a href="../../apps/erts/erlang.html#t:string/0">string</a>() | <a href="unicode.html#t:chardata/0">unicode:chardata</a>()].</pre>

      </div>

<p>List of command line arguments to be parsed.</p>
  </section>
</section>
<section class="detail" id="t:argument/0">

  <div class="detail-header">
    <a href="#t:argument/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">argument()</h1>

        <span class="note">(since OTP 26.0)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/argparse.erl#L449" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> argument() ::
          #{name := <a href="#t:argument_name/0">argument_name</a>(),
            short => <a href="../../apps/erts/erlang.html#t:char/0">char</a>(),
            long => <a href="../../apps/erts/erlang.html#t:string/0">string</a>(),
            required => <a href="../../apps/erts/erlang.html#t:boolean/0">boolean</a>(),
            default => <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
            type => <a href="#t:arg_type/0">arg_type</a>(),
            action => store | {store, <a href="../../apps/erts/erlang.html#t:term/0">term</a>()} | append | {append, <a href="../../apps/erts/erlang.html#t:term/0">term</a>()} | count | extend,
            nargs => <a href="../../apps/erts/erlang.html#t:pos_integer/0">pos_integer</a>() | 'maybe' | {'maybe', <a href="../../apps/erts/erlang.html#t:term/0">term</a>()} | list | nonempty_list | all,
            help => hidden | <a href="unicode.html#t:chardata/0">unicode:chardata</a>() | <a href="#t:argument_help/0">argument_help</a>()}.</pre>

      </div>

<p>Argument specification. Defines a single named argument that is returned in the
<a href="#t:arg_map/0"><code class="inline">argument map</code></a>. The only required field is <code class="inline">name</code>, all other
fields have defaults.</p><p>If either of the <code class="inline">short</code> or <code class="inline">long</code> fields is specified, the argument is treated
as optional. Optional arguments do not have specific order and may appear
anywhere in the command line. Positional arguments are ordered the same way as
they appear in the arguments list of the command specification.</p><p>By default, all positional arguments must be present in the command line. The
parser will return an error otherwise. Options, however, may be omitted, in
which case resulting argument map will either contain the default value, or not
have the key at all.</p><ul><li><p><strong><code class="inline">name</code></strong> - Sets the argument name in the parsed argument map. If <code class="inline">help</code> is
not defined, name is also used to generate the default usage message.</p></li><li><p><strong><code class="inline">short</code></strong> - Defines a short (single character) form of an optional argument.</p><pre><code class="makeup erlang" translate="no"><span class="c1">%% Define a command accepting argument named myarg, with short form $a:</span><span class="gp unselectable">
1&gt; </span><span class="n">Cmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="3935047159-1">#{</span><span class="ss">arguments</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="3935047159-2">[</span><span class="p" data-group-id="3935047159-3">#{</span><span class="ss">name</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">myarg</span><span class="p">,</span><span class="w"> </span><span class="ss">short</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="sc">$a</span><span class="p" data-group-id="3935047159-3">}</span><span class="p" data-group-id="3935047159-2">]</span><span class="p" data-group-id="3935047159-1">}</span><span class="p">.</span><span class="w">
</span><span class="c1">%% Parse command line &quot;-a str&quot;:</span><span class="gp unselectable">
2&gt; </span><span class="p" data-group-id="3935047159-4">{</span><span class="ss">ok</span><span class="p">,</span><span class="w"> </span><span class="n">ArgMap</span><span class="p">,</span><span class="w"> </span><span class="p">_</span><span class="p">,</span><span class="w"> </span><span class="p">_</span><span class="p" data-group-id="3935047159-4">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">argparse</span><span class="p">:</span><span class="nf">parse</span><span class="p" data-group-id="3935047159-5">(</span><span class="p" data-group-id="3935047159-6">[</span><span class="s">&quot;-a&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;str&quot;</span><span class="p" data-group-id="3935047159-6">]</span><span class="p">,</span><span class="w"> </span><span class="n">Cmd</span><span class="p" data-group-id="3935047159-5">)</span><span class="p">,</span><span class="w"> </span><span class="n">ArgMap</span><span class="p">.</span><span class="w">

</span><span class="p" data-group-id="3935047159-7">#{</span><span class="ss">myarg</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;str&quot;</span><span class="p" data-group-id="3935047159-7">}</span><span class="w">

</span><span class="c1">%% Option value can be concatenated with the switch: &quot;-astr&quot;</span><span class="gp unselectable">
3&gt; </span><span class="p" data-group-id="3935047159-8">{</span><span class="ss">ok</span><span class="p">,</span><span class="w"> </span><span class="n">ArgMap</span><span class="p">,</span><span class="w"> </span><span class="p">_</span><span class="p">,</span><span class="w"> </span><span class="p">_</span><span class="p" data-group-id="3935047159-8">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">argparse</span><span class="p">:</span><span class="nf">parse</span><span class="p" data-group-id="3935047159-9">(</span><span class="p" data-group-id="3935047159-10">[</span><span class="s">&quot;-astr&quot;</span><span class="p" data-group-id="3935047159-10">]</span><span class="p">,</span><span class="w"> </span><span class="n">Cmd</span><span class="p" data-group-id="3935047159-9">)</span><span class="p">,</span><span class="w"> </span><span class="n">ArgMap</span><span class="p">.</span><span class="w">

</span><span class="p" data-group-id="3935047159-11">#{</span><span class="ss">myarg</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;str&quot;</span><span class="p" data-group-id="3935047159-11">}</span></code></pre><p>By default all options expect a single value following the option switch. The
only exception is an option of a boolean type.</p></li><li><p><strong><code class="inline">long</code></strong> - Defines a long form of an optional argument.</p><pre><code class="makeup erlang" translate="no"><span class="gp unselectable">1&gt; </span><span class="n">Cmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="2606263684-1">#{</span><span class="ss">arguments</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="2606263684-2">[</span><span class="p" data-group-id="2606263684-3">#{</span><span class="ss">name</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">myarg</span><span class="p">,</span><span class="w"> </span><span class="ss">long</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;name&quot;</span><span class="p" data-group-id="2606263684-3">}</span><span class="p" data-group-id="2606263684-2">]</span><span class="p" data-group-id="2606263684-1">}</span><span class="p">.</span><span class="w">
</span><span class="c1">%% Parse command line &quot;-name Erlang&quot;:</span><span class="gp unselectable">
2&gt; </span><span class="p" data-group-id="2606263684-4">{</span><span class="ss">ok</span><span class="p">,</span><span class="w"> </span><span class="n">ArgMap</span><span class="p">,</span><span class="w"> </span><span class="p">_</span><span class="p">,</span><span class="w"> </span><span class="p">_</span><span class="p" data-group-id="2606263684-4">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">argparse</span><span class="p">:</span><span class="nf">parse</span><span class="p" data-group-id="2606263684-5">(</span><span class="p" data-group-id="2606263684-6">[</span><span class="s">&quot;-name&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Erlang&quot;</span><span class="p" data-group-id="2606263684-6">]</span><span class="p">,</span><span class="w"> </span><span class="n">Cmd</span><span class="p" data-group-id="2606263684-5">)</span><span class="p">,</span><span class="w"> </span><span class="n">ArgMap</span><span class="p">.</span><span class="w">

</span><span class="p" data-group-id="2606263684-7">#{</span><span class="ss">myarg</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;Erlang&quot;</span><span class="p" data-group-id="2606263684-7">}</span><span class="w">
</span><span class="c1">%% Or use &quot;=&quot; to separate the switch and the value:</span><span class="gp unselectable">
3&gt; </span><span class="p" data-group-id="2606263684-8">{</span><span class="ss">ok</span><span class="p">,</span><span class="w"> </span><span class="n">ArgMap</span><span class="p">,</span><span class="w"> </span><span class="p">_</span><span class="p">,</span><span class="w"> </span><span class="p">_</span><span class="p" data-group-id="2606263684-8">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">argparse</span><span class="p">:</span><span class="nf">parse</span><span class="p" data-group-id="2606263684-9">(</span><span class="p" data-group-id="2606263684-10">[</span><span class="s">&quot;-name=Erlang&quot;</span><span class="p" data-group-id="2606263684-10">]</span><span class="p">,</span><span class="w"> </span><span class="n">Cmd</span><span class="p" data-group-id="2606263684-9">)</span><span class="p">,</span><span class="w"> </span><span class="n">ArgMap</span><span class="p">.</span><span class="w">

</span><span class="p" data-group-id="2606263684-11">#{</span><span class="ss">myarg</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;Erlang&quot;</span><span class="p" data-group-id="2606263684-11">}</span></code></pre><p>If neither <code class="inline">short</code> not <code class="inline">long</code> is defined, the argument is treated as
positional.</p></li><li><p><strong><code class="inline">required</code></strong> - Forces the parser to expect the argument to be present in the
command line. By default, all positional argument are required, and all
options are not.</p></li><li><p><strong><code class="inline">default</code></strong> - Specifies the default value to put in the parsed argument map
if the value is not supplied in the command line.</p><pre><code class="makeup erlang" translate="no"><span class="gp unselectable">1&gt; </span><span class="nc">argparse</span><span class="p">:</span><span class="nf">parse</span><span class="p" data-group-id="6052035387-1">(</span><span class="p" data-group-id="6052035387-2">[</span><span class="p" data-group-id="6052035387-2">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6052035387-3">#{</span><span class="ss">arguments</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="6052035387-4">[</span><span class="p" data-group-id="6052035387-5">#{</span><span class="ss">name</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">myarg</span><span class="p">,</span><span class="w"> </span><span class="ss">short</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="sc">$m</span><span class="p" data-group-id="6052035387-5">}</span><span class="p" data-group-id="6052035387-4">]</span><span class="p" data-group-id="6052035387-3">}</span><span class="p" data-group-id="6052035387-1">)</span><span class="p">.</span><span class="w">

</span><span class="p" data-group-id="6052035387-6">{</span><span class="ss">ok</span><span class="p">,</span><span class="p" data-group-id="6052035387-7">#{</span><span class="p" data-group-id="6052035387-7">}</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="p">.</span><span class="p">.</span><span class="gp unselectable">
2&gt; </span><span class="nc">argparse</span><span class="p">:</span><span class="nf">parse</span><span class="p" data-group-id="6052035387-8">(</span><span class="p" data-group-id="6052035387-9">[</span><span class="p" data-group-id="6052035387-9">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6052035387-10">#{</span><span class="ss">arguments</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="6052035387-11">[</span><span class="p" data-group-id="6052035387-12">#{</span><span class="ss">name</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">myarg</span><span class="p">,</span><span class="w"> </span><span class="ss">short</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="sc">$m</span><span class="p">,</span><span class="w"> </span><span class="ss">default</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;def&quot;</span><span class="p" data-group-id="6052035387-12">}</span><span class="p" data-group-id="6052035387-11">]</span><span class="p" data-group-id="6052035387-10">}</span><span class="p" data-group-id="6052035387-8">)</span><span class="p">.</span><span class="w">

</span><span class="p" data-group-id="6052035387-13">{</span><span class="ss">ok</span><span class="p">,</span><span class="p" data-group-id="6052035387-14">#{</span><span class="ss">myarg</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;def&quot;</span><span class="p" data-group-id="6052035387-14">}</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="p">.</span><span class="p">.</span></code></pre></li><li><p><strong><code class="inline">type</code></strong> - Defines type conversion and validation routine. The default is
<code class="inline">string</code>, assuming no conversion.</p></li><li><p><strong><code class="inline">nargs</code></strong> - Defines the number of following arguments to consume from the
command line. By default, the parser consumes the next argument and converts
it into an Erlang term according to the specified type.</p><ul><li><p><strong><a href="../../apps/erts/erlang.html#t:pos_integer/0"><code class="inline">pos_integer/0</code></a></strong> - Consume exactly this number of positional arguments,
fail if there is not enough. Value in the argument map contains a list of
exactly this length. Example, defining a positional argument expecting 3
integer values:</p><pre><code class="makeup erlang" translate="no"><span class="gp unselectable">1&gt; </span><span class="n">Cmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="2797517111-1">#{</span><span class="ss">arguments</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="2797517111-2">[</span><span class="p" data-group-id="2797517111-3">#{</span><span class="ss">name</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">ints</span><span class="p">,</span><span class="w"> </span><span class="ss">type</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">integer</span><span class="p">,</span><span class="w"> </span><span class="ss">nargs</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="2797517111-3">}</span><span class="p" data-group-id="2797517111-2">]</span><span class="p" data-group-id="2797517111-1">}</span><span class="p">,</span><span class="w">
</span><span class="nc">argparse</span><span class="p">:</span><span class="nf">parse</span><span class="p" data-group-id="2797517111-4">(</span><span class="p" data-group-id="2797517111-5">[</span><span class="s">&quot;1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;2&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;3&quot;</span><span class="p" data-group-id="2797517111-5">]</span><span class="p">,</span><span class="w"> </span><span class="n">Cmd</span><span class="p" data-group-id="2797517111-4">)</span><span class="p">.</span><span class="w">

</span><span class="p" data-group-id="2797517111-6">{</span><span class="ss">ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2797517111-7">#{</span><span class="ss">ints</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="2797517111-8">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="2797517111-8">]</span><span class="p" data-group-id="2797517111-7">}</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="p">.</span><span class="p">.</span></code></pre><p>Another example defining an option accepted as <code class="inline">-env</code> and expecting two
string arguments:</p><pre><code class="makeup erlang" translate="no"><span class="gp unselectable">1&gt; </span><span class="n">Cmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="9249825064-1">#{</span><span class="ss">arguments</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="9249825064-2">[</span><span class="p" data-group-id="9249825064-3">#{</span><span class="ss">name</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">env</span><span class="p">,</span><span class="w"> </span><span class="ss">long</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;env&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">nargs</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="9249825064-3">}</span><span class="p" data-group-id="9249825064-2">]</span><span class="p" data-group-id="9249825064-1">}</span><span class="p">,</span><span class="w">
</span><span class="nc">argparse</span><span class="p">:</span><span class="nf">parse</span><span class="p" data-group-id="9249825064-4">(</span><span class="p" data-group-id="9249825064-5">[</span><span class="s">&quot;-env&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;key&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;value&quot;</span><span class="p" data-group-id="9249825064-5">]</span><span class="p">,</span><span class="w"> </span><span class="n">Cmd</span><span class="p" data-group-id="9249825064-4">)</span><span class="p">.</span><span class="w">

</span><span class="p" data-group-id="9249825064-6">{</span><span class="ss">ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9249825064-7">#{</span><span class="ss">env</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="9249825064-8">[</span><span class="s">&quot;key&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;value&quot;</span><span class="p" data-group-id="9249825064-8">]</span><span class="p" data-group-id="9249825064-7">}</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="p">.</span><span class="p">.</span></code></pre></li><li><p><strong><code class="inline">list</code></strong> - Consume all following arguments until hitting the next option
(starting with an option prefix). May result in an empty list added to the
arguments map.</p><pre><code class="makeup erlang" translate="no"><span class="gp unselectable">1&gt; </span><span class="n">Cmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="6110878514-1">#{</span><span class="ss">arguments</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="6110878514-2">[</span><span class="w">
  </span><span class="p" data-group-id="6110878514-3">#{</span><span class="ss">name</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nb">nodes</span><span class="p">,</span><span class="w"> </span><span class="ss">long</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;nodes&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">nargs</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">list</span><span class="p" data-group-id="6110878514-3">}</span><span class="p">,</span><span class="w">
  </span><span class="p" data-group-id="6110878514-4">#{</span><span class="ss">name</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">verbose</span><span class="p">,</span><span class="w"> </span><span class="ss">short</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="sc">$v</span><span class="p">,</span><span class="w"> </span><span class="ss">type</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">boolean</span><span class="p" data-group-id="6110878514-4">}</span><span class="w">
</span><span class="p" data-group-id="6110878514-2">]</span><span class="p" data-group-id="6110878514-1">}</span><span class="p">,</span><span class="w">
</span><span class="nc">argparse</span><span class="p">:</span><span class="nf">parse</span><span class="p" data-group-id="6110878514-5">(</span><span class="p" data-group-id="6110878514-6">[</span><span class="s">&quot;-nodes&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;one&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;two&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;-v&quot;</span><span class="p" data-group-id="6110878514-6">]</span><span class="p">,</span><span class="w"> </span><span class="n">Cmd</span><span class="p" data-group-id="6110878514-5">)</span><span class="p">.</span><span class="w">

</span><span class="p" data-group-id="6110878514-7">{</span><span class="ss">ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6110878514-8">#{</span><span class="nb">nodes</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="6110878514-9">[</span><span class="s">&quot;one&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;two&quot;</span><span class="p" data-group-id="6110878514-9">]</span><span class="p">,</span><span class="w"> </span><span class="ss">verbose</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">true</span><span class="p" data-group-id="6110878514-8">}</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="p">.</span><span class="p">.</span></code></pre></li><li><p><strong><code class="inline">nonempty_list</code></strong> - Same as <code class="inline">list</code>, but expects at least one argument.
Returns an error if the following command line argument is an option switch
(starting with the prefix).</p></li><li><p><strong><code class="inline">'maybe'</code></strong> - Consumes the next argument from the command line, if it does
not start with an option prefix. Otherwise, adds a default value to the
arguments map.</p><pre><code class="makeup erlang" translate="no"><span class="gp unselectable">1&gt; </span><span class="n">Cmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="8298810348-1">#{</span><span class="ss">arguments</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="8298810348-2">[</span><span class="w">
  </span><span class="p" data-group-id="8298810348-3">#{</span><span class="ss">name</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">level</span><span class="p">,</span><span class="w"> </span><span class="ss">short</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="sc">$l</span><span class="p">,</span><span class="w"> </span><span class="ss">nargs</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">&#39;maybe&#39;</span><span class="p">,</span><span class="w"> </span><span class="ss">default</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;error&quot;</span><span class="p" data-group-id="8298810348-3">}</span><span class="p">,</span><span class="w">
  </span><span class="p" data-group-id="8298810348-4">#{</span><span class="ss">name</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">verbose</span><span class="p">,</span><span class="w"> </span><span class="ss">short</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="sc">$v</span><span class="p">,</span><span class="w"> </span><span class="ss">type</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">boolean</span><span class="p" data-group-id="8298810348-4">}</span><span class="w">
</span><span class="p" data-group-id="8298810348-2">]</span><span class="p" data-group-id="8298810348-1">}</span><span class="p">,</span><span class="w">
</span><span class="nc">argparse</span><span class="p">:</span><span class="nf">parse</span><span class="p" data-group-id="8298810348-5">(</span><span class="p" data-group-id="8298810348-6">[</span><span class="s">&quot;-l&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;info&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;-v&quot;</span><span class="p" data-group-id="8298810348-6">]</span><span class="p">,</span><span class="w"> </span><span class="n">Cmd</span><span class="p" data-group-id="8298810348-5">)</span><span class="p">.</span><span class="w">

</span><span class="p" data-group-id="8298810348-7">{</span><span class="ss">ok</span><span class="p">,</span><span class="p" data-group-id="8298810348-8">#{</span><span class="ss">level</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;info&quot;</span><span class="p">,</span><span class="ss">verbose</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">true</span><span class="p" data-group-id="8298810348-8">}</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="p">.</span><span class="p">.</span><span class="w">

</span><span class="c1">%% When &quot;info&quot; is omitted, argument maps receives the default &quot;error&quot;</span><span class="gp unselectable">
2&gt; </span><span class="nc">argparse</span><span class="p">:</span><span class="nf">parse</span><span class="p" data-group-id="8298810348-9">(</span><span class="p" data-group-id="8298810348-10">[</span><span class="s">&quot;-l&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;-v&quot;</span><span class="p" data-group-id="8298810348-10">]</span><span class="p">,</span><span class="w"> </span><span class="n">Cmd</span><span class="p" data-group-id="8298810348-9">)</span><span class="p">.</span><span class="w">

</span><span class="p" data-group-id="8298810348-11">{</span><span class="ss">ok</span><span class="p">,</span><span class="p" data-group-id="8298810348-12">#{</span><span class="ss">level</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;error&quot;</span><span class="p">,</span><span class="ss">verbose</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">true</span><span class="p" data-group-id="8298810348-12">}</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="p">.</span><span class="p">.</span></code></pre></li><li><p><strong><code class="inline">{'maybe', term()}</code></strong> - Consumes the next argument from the command line,
if it does not start with an option prefix. Otherwise, adds a specified
Erlang term to the arguments map.</p></li><li><p><strong><code class="inline">all</code></strong> - Fold all remaining command line arguments into a list, ignoring
any option prefixes or switches. Useful for proxying arguments into another
command line utility.</p><pre><code class="makeup erlang" translate="no"><span class="gp unselectable">1&gt; </span><span class="n">Cmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="7541952843-1">#{</span><span class="ss">arguments</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="7541952843-2">[</span><span class="w">
    </span><span class="p" data-group-id="7541952843-3">#{</span><span class="ss">name</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">verbose</span><span class="p">,</span><span class="w"> </span><span class="ss">short</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="sc">$v</span><span class="p">,</span><span class="w"> </span><span class="ss">type</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">boolean</span><span class="p" data-group-id="7541952843-3">}</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="7541952843-4">#{</span><span class="ss">name</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">raw</span><span class="p">,</span><span class="w"> </span><span class="ss">long</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;-&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">nargs</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">all</span><span class="p" data-group-id="7541952843-4">}</span><span class="w">
</span><span class="p" data-group-id="7541952843-2">]</span><span class="p" data-group-id="7541952843-1">}</span><span class="p">,</span><span class="w">
</span><span class="nc">argparse</span><span class="p">:</span><span class="nf">parse</span><span class="p" data-group-id="7541952843-5">(</span><span class="p" data-group-id="7541952843-6">[</span><span class="s">&quot;-v&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;--&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;-kernel&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;arg&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;opt&quot;</span><span class="p" data-group-id="7541952843-6">]</span><span class="p">,</span><span class="w"> </span><span class="n">Cmd</span><span class="p" data-group-id="7541952843-5">)</span><span class="p">.</span><span class="w">

</span><span class="p" data-group-id="7541952843-7">{</span><span class="ss">ok</span><span class="p">,</span><span class="p" data-group-id="7541952843-8">#{</span><span class="ss">raw</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="7541952843-9">[</span><span class="s">&quot;-kernel&quot;</span><span class="p">,</span><span class="s">&quot;arg&quot;</span><span class="p">,</span><span class="s">&quot;opt&quot;</span><span class="p" data-group-id="7541952843-9">]</span><span class="p">,</span><span class="ss">verbose</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">true</span><span class="p" data-group-id="7541952843-8">}</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="p">.</span><span class="p">.</span></code></pre></li></ul></li><li><p><strong><code class="inline">action</code></strong> - Defines an action to take when the argument is found in the
command line. The default action is <code class="inline">store</code>.</p><ul><li><p><strong><code class="inline">store</code></strong> - Store the value in the arguments map. Overwrites the value
previously written.</p><pre><code class="makeup erlang" translate="no"><span class="gp unselectable">1&gt; </span><span class="n">Cmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="5839587826-1">#{</span><span class="ss">arguments</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="5839587826-2">[</span><span class="p" data-group-id="5839587826-3">#{</span><span class="ss">name</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">str</span><span class="p">,</span><span class="w"> </span><span class="ss">short</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="sc">$s</span><span class="p" data-group-id="5839587826-3">}</span><span class="p" data-group-id="5839587826-2">]</span><span class="p" data-group-id="5839587826-1">}</span><span class="p">,</span><span class="w">
</span><span class="nc">argparse</span><span class="p">:</span><span class="nf">parse</span><span class="p" data-group-id="5839587826-4">(</span><span class="p" data-group-id="5839587826-5">[</span><span class="s">&quot;-s&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;one&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;-s&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;two&quot;</span><span class="p" data-group-id="5839587826-5">]</span><span class="p">,</span><span class="w"> </span><span class="n">Cmd</span><span class="p" data-group-id="5839587826-4">)</span><span class="p">.</span><span class="w">

</span><span class="p" data-group-id="5839587826-6">{</span><span class="ss">ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5839587826-7">#{</span><span class="ss">str</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;two&quot;</span><span class="p" data-group-id="5839587826-7">}</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="p">.</span><span class="p">.</span></code></pre></li><li><p><strong><code class="inline">{store, term()}</code></strong> - Stores the specified term instead of reading the
value from the command line.</p><pre><code class="makeup erlang" translate="no"><span class="gp unselectable">1&gt; </span><span class="n">Cmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="4258797030-1">#{</span><span class="ss">arguments</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="4258797030-2">[</span><span class="p" data-group-id="4258797030-3">#{</span><span class="ss">name</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">str</span><span class="p">,</span><span class="w"> </span><span class="ss">short</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="sc">$s</span><span class="p">,</span><span class="w"> </span><span class="ss">action</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="4258797030-4">{</span><span class="ss">store</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;two&quot;</span><span class="p" data-group-id="4258797030-4">}</span><span class="p" data-group-id="4258797030-3">}</span><span class="p" data-group-id="4258797030-2">]</span><span class="p" data-group-id="4258797030-1">}</span><span class="p">,</span><span class="w">
</span><span class="nc">argparse</span><span class="p">:</span><span class="nf">parse</span><span class="p" data-group-id="4258797030-5">(</span><span class="p" data-group-id="4258797030-6">[</span><span class="s">&quot;-s&quot;</span><span class="p" data-group-id="4258797030-6">]</span><span class="p">,</span><span class="w"> </span><span class="n">Cmd</span><span class="p" data-group-id="4258797030-5">)</span><span class="p">.</span><span class="w">

</span><span class="p" data-group-id="4258797030-7">{</span><span class="ss">ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4258797030-8">#{</span><span class="ss">str</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;two&quot;</span><span class="p" data-group-id="4258797030-8">}</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="p">.</span><span class="p">.</span></code></pre></li><li><p><strong><code class="inline">append</code></strong> - Appends the repeating occurrences of the argument instead of
overwriting.</p><pre><code class="makeup erlang" translate="no"><span class="gp unselectable">1&gt; </span><span class="n">Cmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="9139675589-1">#{</span><span class="ss">arguments</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="9139675589-2">[</span><span class="p" data-group-id="9139675589-3">#{</span><span class="ss">name</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nb">node</span><span class="p">,</span><span class="w"> </span><span class="ss">short</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="sc">$n</span><span class="p">,</span><span class="w"> </span><span class="ss">action</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">append</span><span class="p" data-group-id="9139675589-3">}</span><span class="p" data-group-id="9139675589-2">]</span><span class="p" data-group-id="9139675589-1">}</span><span class="p">,</span><span class="w">
</span><span class="nc">argparse</span><span class="p">:</span><span class="nf">parse</span><span class="p" data-group-id="9139675589-4">(</span><span class="p" data-group-id="9139675589-5">[</span><span class="s">&quot;-n&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;one&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;-n&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;two&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;-n&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;three&quot;</span><span class="p" data-group-id="9139675589-5">]</span><span class="p">,</span><span class="w"> </span><span class="n">Cmd</span><span class="p" data-group-id="9139675589-4">)</span><span class="p">.</span><span class="w">

</span><span class="p" data-group-id="9139675589-6">{</span><span class="ss">ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9139675589-7">#{</span><span class="nb">node</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="9139675589-8">[</span><span class="s">&quot;one&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;two&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;three&quot;</span><span class="p" data-group-id="9139675589-8">]</span><span class="p" data-group-id="9139675589-7">}</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="p">.</span><span class="p">.</span><span class="w">

</span><span class="c1">%% Always produces a list - even if there is one occurrence</span><span class="gp unselectable">
2&gt; </span><span class="nc">argparse</span><span class="p">:</span><span class="nf">parse</span><span class="p" data-group-id="9139675589-9">(</span><span class="p" data-group-id="9139675589-10">[</span><span class="s">&quot;-n&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;one&quot;</span><span class="p" data-group-id="9139675589-10">]</span><span class="p">,</span><span class="w"> </span><span class="n">Cmd</span><span class="p" data-group-id="9139675589-9">)</span><span class="p">.</span><span class="w">

</span><span class="p" data-group-id="9139675589-11">{</span><span class="ss">ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9139675589-12">#{</span><span class="nb">node</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="9139675589-13">[</span><span class="s">&quot;one&quot;</span><span class="p" data-group-id="9139675589-13">]</span><span class="p" data-group-id="9139675589-12">}</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="p">.</span><span class="p">.</span></code></pre></li><li><p><strong><code class="inline">{append, term()}</code></strong> - Same as <code class="inline">append</code>, but instead of consuming the
argument from the command line, appends a provided <a href="../../apps/erts/erlang.html#t:term/0"><code class="inline">term/0</code></a>.</p></li><li><p><strong><code class="inline">count</code></strong> - Puts a counter as a value in the arguments map. Useful for
implementing verbosity option:</p><pre><code class="makeup erlang" translate="no"><span class="gp unselectable">1&gt; </span><span class="n">Cmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="8115505786-1">#{</span><span class="ss">arguments</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="8115505786-2">[</span><span class="p" data-group-id="8115505786-3">#{</span><span class="ss">name</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">verbose</span><span class="p">,</span><span class="w"> </span><span class="ss">short</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="sc">$v</span><span class="p">,</span><span class="w"> </span><span class="ss">action</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">count</span><span class="p" data-group-id="8115505786-3">}</span><span class="p" data-group-id="8115505786-2">]</span><span class="p" data-group-id="8115505786-1">}</span><span class="p">,</span><span class="w">
</span><span class="nc">argparse</span><span class="p">:</span><span class="nf">parse</span><span class="p" data-group-id="8115505786-4">(</span><span class="p" data-group-id="8115505786-5">[</span><span class="s">&quot;-v&quot;</span><span class="p" data-group-id="8115505786-5">]</span><span class="p">,</span><span class="w"> </span><span class="n">Cmd</span><span class="p" data-group-id="8115505786-4">)</span><span class="p">.</span><span class="w">

</span><span class="p" data-group-id="8115505786-6">{</span><span class="ss">ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8115505786-7">#{</span><span class="ss">verbose</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="8115505786-7">}</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="p">.</span><span class="p">.</span><span class="w">

</span><span class="mi">2</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">argparse</span><span class="p">:</span><span class="nf">parse</span><span class="p" data-group-id="8115505786-8">(</span><span class="p" data-group-id="8115505786-9">[</span><span class="s">&quot;-vvvv&quot;</span><span class="p" data-group-id="8115505786-9">]</span><span class="p">,</span><span class="w"> </span><span class="n">Cmd</span><span class="p" data-group-id="8115505786-8">)</span><span class="p">.</span><span class="w">

</span><span class="p" data-group-id="8115505786-10">{</span><span class="ss">ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8115505786-11">#{</span><span class="ss">verbose</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="mi">4</span><span class="p" data-group-id="8115505786-11">}</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="p">.</span><span class="p">.</span></code></pre></li><li><p><strong><code class="inline">extend</code></strong> - Works as <code class="inline">append</code>, but flattens the resulting list. Valid
only for <code class="inline">nargs</code> set to <code class="inline">list</code>, <code class="inline">nonempty_list</code>, <code class="inline">all</code> or <a href="../../apps/erts/erlang.html#t:pos_integer/0"><code class="inline">pos_integer/0</code></a>.</p><pre><code class="makeup erlang" translate="no"><span class="gp unselectable">1&gt; </span><span class="n">Cmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="1982901730-1">#{</span><span class="ss">arguments</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="1982901730-2">[</span><span class="p" data-group-id="1982901730-3">#{</span><span class="ss">name</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">duet</span><span class="p">,</span><span class="w"> </span><span class="ss">short</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="sc">$d</span><span class="p">,</span><span class="w"> </span><span class="ss">nargs</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">action</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">extend</span><span class="p" data-group-id="1982901730-3">}</span><span class="p" data-group-id="1982901730-2">]</span><span class="p" data-group-id="1982901730-1">}</span><span class="p">,</span><span class="w">
</span><span class="nc">argparse</span><span class="p">:</span><span class="nf">parse</span><span class="p" data-group-id="1982901730-4">(</span><span class="p" data-group-id="1982901730-5">[</span><span class="s">&quot;-d&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;b&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;-d&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;c&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;d&quot;</span><span class="p" data-group-id="1982901730-5">]</span><span class="p">,</span><span class="w"> </span><span class="n">Cmd</span><span class="p" data-group-id="1982901730-4">)</span><span class="p">.</span><span class="w">

</span><span class="p" data-group-id="1982901730-6">{</span><span class="ss">ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1982901730-7">#{</span><span class="ss">duet</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="1982901730-8">[</span><span class="s">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;b&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;c&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;d&quot;</span><span class="p" data-group-id="1982901730-8">]</span><span class="p" data-group-id="1982901730-7">}</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="p">.</span><span class="p">.</span><span class="w">

</span><span class="c1">%% &#39;append&#39; would result in {ok, #{duet =&gt; [[&quot;a&quot;, &quot;b&quot;],[&quot;c&quot;, &quot;d&quot;]]},</span></code></pre></li></ul></li><li><p><strong><code class="inline">help</code></strong> - Specifies help/usage text for the argument. <code class="inline">argparse</code> provides
automatic generation based on the argument name, type and default value, but
for better usability it is recommended to have a proper description. Setting
this field to <code class="inline">hidden</code> suppresses usage output for this argument.</p></li></ul>
  </section>
</section>
<section class="detail" id="t:argument_help/0">

  <div class="detail-header">
    <a href="#t:argument_help/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">argument_help()</h1>

        <span class="note">(since OTP 26.0)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/argparse.erl#L211" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> argument_help() ::
          {<a href="unicode.html#t:chardata/0">unicode:chardata</a>(), [<a href="unicode.html#t:chardata/0">unicode:chardata</a>() | type | default] | fun(() -> <a href="unicode.html#t:chardata/0">unicode:chardata</a>())}.</pre>

      </div>

<p>User-defined help template to print in the command usage. First element of a
tuple must be a string. It is printed as a part of the usage header. Second
element of the tuple can be either a list containing strings, <code class="inline">type</code> and
<code class="inline">default</code> atoms, or a user-defined function that must return a string. A plain
string should be wrapped as a list such as <code class="inline">[&quot;string is nested&quot;]</code>.</p>
  </section>
</section>
<section class="detail" id="t:argument_name/0">

  <div class="detail-header">
    <a href="#t:argument_name/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">argument_name()</h1>

        <span class="note">(not exported)</span>

        <span class="note">(since OTP 26.0)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/argparse.erl#L221" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> argument_name() :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>() | <a href="../../apps/erts/erlang.html#t:string/0">string</a>() | <a href="../../apps/erts/erlang.html#t:binary/0">binary</a>().</pre>

      </div>

<p>Argument name is used to populate argument map.</p>
  </section>
</section>
<section class="detail" id="t:cmd_path/0">

  <div class="detail-header">
    <a href="#t:cmd_path/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">cmd_path()</h1>

        <span class="note">(since OTP 26.0)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/argparse.erl#L609" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> cmd_path() :: [<a href="../../apps/erts/erlang.html#t:string/0">string</a>()].</pre>

      </div>

<p>Path to the nested command. First element is always the <code class="inline">progname</code>, subsequent
elements are nested command names.</p>
  </section>
</section>
<section class="detail" id="t:command/0">

  <div class="detail-header">
    <a href="#t:command/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">command()</h1>

        <span class="note">(since OTP 26.0)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/argparse.erl#L594" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> command() ::
          #{commands => #{<a href="../../apps/erts/erlang.html#t:string/0">string</a>() => <a href="#t:command/0">command</a>()},
            arguments => [<a href="#t:argument/0">argument</a>()],
            help => hidden | <a href="unicode.html#t:chardata/0">unicode:chardata</a>() | <a href="#t:command_help/0">command_help</a>(),
            handler => <a href="#t:handler/0">handler</a>()}.</pre>

      </div>

<p>Command specification. May contain nested commands, forming a hierarchy.</p><ul><li><p><strong><code class="inline">commands</code></strong> - Maps of nested commands. Keys must be strings, matching
command line input. Basic utilities do not need to specify any nested
commands.</p></li><li><p><strong><code class="inline">arguments</code></strong> - List of arguments accepted by this command, and all nested
commands in the hierarchy.</p></li><li><p><strong><code class="inline">help</code></strong> - Specifies help/usage text for this command. Pass <code class="inline">hidden</code> to
remove this command from the usage output.</p></li><li><p><strong><code class="inline">handler</code></strong> - Specifies a callback function to call by <a href="#run/3"><code class="inline">run/3</code></a> when the
parser is successful.</p></li></ul>
  </section>
</section>
<section class="detail" id="t:command_help/0">

  <div class="detail-header">
    <a href="#t:command_help/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">command_help()</h1>

        <span class="note">(not exported)</span>

        <span class="note">(since OTP 26.0)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/argparse.erl#L574" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> command_help() :: [<a href="unicode.html#t:chardata/0">unicode:chardata</a>() | usage | commands | arguments | options].</pre>

      </div>

<p>User-defined help template. Use this option to mix custom and predefined usage
text. Help template may contain unicode strings, and following atoms:</p><ul><li><p><strong>usage</strong> - Formatted command line usage text, e.g. <code class="inline">rm [-rf] &lt;directory&gt;</code>.</p></li><li><p><strong>commands</strong> - Expanded list of sub-commands.</p></li><li><p><strong>arguments</strong> - Detailed description of positional arguments.</p></li><li><p><strong>options</strong> - Detailed description of optional arguments.</p></li></ul>
  </section>
</section>
<section class="detail" id="t:handler/0">

  <div class="detail-header">
    <a href="#t:handler/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">handler()</h1>

        <span class="note">(since OTP 26.0)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/argparse.erl#L549" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> handler() ::
          optional |
          fun((<a href="#t:arg_map/0">arg_map</a>()) -> <a href="../../apps/erts/erlang.html#t:term/0">term</a>()) |
          {<a href="../../apps/erts/erlang.html#t:module/0">module</a>(), Fn :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>()} |
          {fun(() -> <a href="../../apps/erts/erlang.html#t:term/0">term</a>()), <a href="../../apps/erts/erlang.html#t:term/0">term</a>()} |
          {<a href="../../apps/erts/erlang.html#t:module/0">module</a>(), <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(), <a href="../../apps/erts/erlang.html#t:term/0">term</a>()}.</pre>

      </div>

<p>Command handler specification. Called by <a href="#run/3"><code class="inline">run/3</code> </a>upon successful
parser return.</p><ul><li><p><strong><code class="inline">fun((arg_map()) -&gt; term())</code></strong> - Function accepting
<a href="#t:arg_map/0"><code class="inline">argument map</code></a>. See the basic example in the
<a href="argparse.html#module-quick-start">Quick Start</a> section.</p></li><li><p><strong><code class="inline">{Module :: module(), Function :: atom()}</code></strong> - Function named <code class="inline">Function</code>,
exported from <code class="inline">Module</code>, accepting <a href="#t:arg_map/0"><code class="inline">argument map</code></a>.</p></li><li><p><strong><code class="inline">{fun(() -&gt; term()), Default :: term()}</code></strong> - Function accepting as many
arguments as there are in the <code class="inline">arguments</code> list for this command. Arguments
missing from the parsed map are replaced with the <code class="inline">Default</code>. Convenient way to
expose existing functions.</p><pre><code class="makeup erlang" translate="no"><span class="gp unselectable">1&gt; </span><span class="n">Cmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="8737811453-1">#{</span><span class="ss">arguments</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="8737811453-2">[</span><span class="w">
        </span><span class="p" data-group-id="8737811453-3">#{</span><span class="ss">name</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">x</span><span class="p">,</span><span class="w"> </span><span class="ss">type</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nb">float</span><span class="p" data-group-id="8737811453-3">}</span><span class="p">,</span><span class="w">
        </span><span class="p" data-group-id="8737811453-4">#{</span><span class="ss">name</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">y</span><span class="p">,</span><span class="w"> </span><span class="ss">type</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nb">float</span><span class="p">,</span><span class="w"> </span><span class="ss">short</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="sc">$p</span><span class="p" data-group-id="8737811453-4">}</span><span class="p" data-group-id="8737811453-2">]</span><span class="p">,</span><span class="w">
    </span><span class="ss">handler</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="8737811453-5">{</span><span class="k">fun</span><span class="w"> </span><span class="nc">math</span><span class="p">:</span><span class="ss">pow</span><span class="p">/</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="8737811453-5">}</span><span class="p" data-group-id="8737811453-1">}</span><span class="p">,</span><span class="w">
</span><span class="nc">argparse</span><span class="p">:</span><span class="nf">run</span><span class="p" data-group-id="8737811453-6">(</span><span class="p" data-group-id="8737811453-7">[</span><span class="s">&quot;2&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;-p&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;3&quot;</span><span class="p" data-group-id="8737811453-7">]</span><span class="p">,</span><span class="w"> </span><span class="n">Cmd</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8737811453-8">#{</span><span class="p" data-group-id="8737811453-8">}</span><span class="p" data-group-id="8737811453-6">)</span><span class="p">.</span><span class="w">

</span><span class="mf">8.0</span><span class="w">

</span><span class="c1">%% default term 1 is passed to math:pow/2</span><span class="gp unselectable">
2&gt; </span><span class="nc">argparse</span><span class="p">:</span><span class="nf">run</span><span class="p" data-group-id="8737811453-9">(</span><span class="p" data-group-id="8737811453-10">[</span><span class="s">&quot;2&quot;</span><span class="p" data-group-id="8737811453-10">]</span><span class="p">,</span><span class="w"> </span><span class="n">Cmd</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8737811453-11">#{</span><span class="p" data-group-id="8737811453-11">}</span><span class="p" data-group-id="8737811453-9">)</span><span class="p">.</span><span class="w">

</span><span class="mf">2.0</span></code></pre></li><li><p><strong><code class="inline">{Module :: module(), Function :: atom(), Default :: term()}</code></strong> - Function
named <code class="inline">Function</code>, exported from <code class="inline">Module</code>, accepting as many arguments as
defined for this command. Arguments missing from the parsed map are replaced
with the <code class="inline">Default</code>. Effectively, just a different syntax to the same
functionality as demonstrated in the code above.</p></li></ul>
  </section>
</section>
<section class="detail" id="t:parse_result/0">

  <div class="detail-header">
    <a href="#t:parse_result/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">parse_result()</h1>

        <span class="note">(not exported)</span>

        <span class="note">(since OTP 26.0)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/argparse.erl#L689" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> parse_result() :: {ok, <a href="#t:arg_map/0">arg_map</a>(), Path :: <a href="#t:cmd_path/0">cmd_path</a>(), <a href="#t:command/0">command</a>()} | {error, <a href="#t:parser_error/0">parser_error</a>()}.</pre>

      </div>

<p>Returned from <a href="#parse/3"><code class="inline">parse/2,3</code></a>. Contains arguments extracted from the
command line, path to the nested command (if any), and a (potentially nested)
command specification that was considered when the parser finished successfully.
It is expected that the command contains a handler definition, that will be
called passing the argument map.</p>
  </section>
</section>
<section class="detail" id="t:parser_error/0">

  <div class="detail-header">
    <a href="#t:parser_error/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">parser_error()</h1>

        <span class="note">(not exported)</span>

        <span class="note">(since OTP 26.0)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/argparse.erl#L632" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> parser_error() ::
          {Path :: <a href="#t:cmd_path/0">cmd_path</a>(),
           Expected :: <a href="#t:argument/0">argument</a>() | undefined,
           Actual :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>() | undefined,
           Details :: <a href="unicode.html#t:chardata/0">unicode:chardata</a>()}.</pre>

      </div>

<p>Returned from <a href="#parse/3"><code class="inline">parse/2,3</code></a> when the user input cannot be parsed
according to the command specification.</p><p>First element is the path to the command that was considered when the parser
detected an error. Second element, <code class="inline">Expected</code>, is the argument specification
that caused an error. It could be <code class="inline">undefined</code>, meaning that <code class="inline">Actual</code> argument
had no corresponding specification in the arguments list for the current
command.</p><p>When <code class="inline">Actual</code> is set to <code class="inline">undefined</code>, it means that a required argument is
missing from the command line. If both <code class="inline">Expected</code> and <code class="inline">Actual</code> have values, it
means validation error.</p><p>Use <a href="#format_error/1"><code class="inline">format_error/1</code></a> to generate a human-readable error description, unless
there is a need to provide localised error messages.</p>
  </section>
</section>
<section class="detail" id="t:parser_options/0">

  <div class="detail-header">
    <a href="#t:parser_options/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">parser_options()</h1>

        <span class="note">(not exported)</span>

        <span class="note">(since OTP 26.0)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/argparse.erl#L669" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> parser_options() ::
          #{prefixes => [<a href="../../apps/erts/erlang.html#t:char/0">char</a>()],
            default => <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
            progname => <a href="../../apps/erts/erlang.html#t:string/0">string</a>() | <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
            command => <a href="#t:cmd_path/0">cmd_path</a>(),
            columns => <a href="../../apps/erts/erlang.html#t:pos_integer/0">pos_integer</a>()}.</pre>

      </div>

<p>Options changing parser behaviour.</p><ul><li><p><strong><code class="inline">prefixes</code></strong> - Changes the option prefix (the default is <code class="inline">-</code>).</p></li><li><p><strong><code class="inline">default</code></strong> - Specifies the default value for all optional arguments. When
this field is set, resulting argument map will contain all argument names.
Useful for easy pattern matching on the argument map in the handler function.</p></li><li><p><strong><code class="inline">progname</code></strong> - Specifies the program (root command) name. Returned as the
first element of the command path, and printed in help/usage text. It is
recommended to have this value set, otherwise the default one is determined
with <code class="inline">init:get_argument(progname)</code> and is often set to <code class="inline">erl</code> instead of the
actual script name.</p></li><li><p><strong><code class="inline">command</code></strong> - Specifies the path to the nested command for <a href="#help/2"><code class="inline">help/2</code></a>. Useful
to limit output for complex utilities with multiple commands, and used by the
default error handling logic.</p></li><li><p><strong><code class="inline">columns</code></strong> - Specifies the help/usage text width (characters) for <a href="#help/2"><code class="inline">help/2</code></a>.
Default value is 80.</p></li></ul>
  </section>
</section>

    </div>
  </section>

  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Functions</span>
    </h1>
    <div class="functions-list">
<section class="detail" id="format_error/1">

  <div class="detail-header">
    <a href="#format_error/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">format_error(Reason)</h1>

        <span class="note">(since OTP 26.0)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/argparse.erl#L809" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> format_error(Reason :: <a href="#t:parser_error/0">parser_error</a>()) -> <a href="unicode.html#t:chardata/0">unicode:chardata</a>().</pre>

      </div>

<p>Generates human-readable text for <a href="#t:parser_error/0"><code class="inline">parser error</code></a>. Does not
include help/usage information, and does not provide localisation.</p>
  </section>
</section>
<section class="detail" id="help/1">

  <div class="detail-header">
    <a href="#help/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">help(Command)</h1>

        <span class="note">(since OTP 26.0)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/argparse.erl#L755" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> help(<a href="#t:command/0">command</a>()) -> <a href="../../apps/erts/erlang.html#t:string/0">string</a>().</pre>

      </div>

<p>Equivalent to <a href="#help/2"><code class="inline">help/2</code></a>.</p>
  </section>
</section>
<section class="detail" id="help/2">

  <div class="detail-header">
    <a href="#help/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">help(Command, Options)</h1>

        <span class="note">(since OTP 26.0)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/argparse.erl#L768" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> help(<a href="#t:command/0">command</a>(), <a href="#t:parser_options/0">parser_options</a>()) -> <a href="unicode.html#t:chardata/0">unicode:chardata</a>().</pre>

      </div>

<p>Generates help/usage information text for the command supplied, or any nested
command when <code class="inline">command</code> option is specified. Arguments are displayed in the same
order as specified in <code class="inline">Command</code>. Does not provide localisation. Expects
<code class="inline">progname</code> to be set, otherwise defaults to return value of
<code class="inline">init:get_argument(progname)</code>.</p>
  </section>
</section>
<section class="detail" id="parse/2">

  <div class="detail-header">
    <a href="#parse/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">parse(Args, Command)</h1>

        <span class="note">(since OTP 26.0)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/argparse.erl#L718" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> parse(<a href="#t:args/0">args</a>(), <a href="#t:command/0">command</a>()) -> <a href="#t:parse_result/0">parse_result</a>().</pre>

      </div>

<p>Equivalent to <a href="#parse/3"><code class="inline">parse/3</code></a>.</p>
  </section>
</section>
<section class="detail" id="parse/3">

  <div class="detail-header">
    <a href="#parse/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">parse(Args, Command, Options)</h1>

        <span class="note">(since OTP 26.0)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/argparse.erl#L737" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> parse(<a href="#t:args/0">args</a>(), <a href="#t:command/0">command</a>(), Options :: <a href="#t:parser_options/0">parser_options</a>()) -> <a href="#t:parse_result/0">parse_result</a>().</pre>

      </div>

<p>Parses command line arguments according to the command specification. Raises an
exception if the command specification is not valid. Use
<a href="erl_error.html#format_exception/3"><code class="inline">erl_error:format_exception/3,4</code> </a>to see a
friendlier message. Invalid command line input does not raise an exception, but
makes <code class="inline">parse/2,3</code> to return a tuple
<a href="#t:parser_error/0"><code class="inline">{error, parser_error()}</code></a>.</p><p>This function does not call command handler.</p>
  </section>
</section>
<section class="detail" id="run/3">

  <div class="detail-header">
    <a href="#run/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">run(Args, Command, Options)</h1>

        <span class="note">(since OTP 26.0)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/stdlib/src/argparse.erl#L788" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> run(<a href="#t:args/0">args</a>(), <a href="#t:command/0">command</a>(), <a href="#t:parser_options/0">parser_options</a>()) -> <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Parses command line arguments and calls the matching command handler. Prints
human-readable error, help/usage information for the discovered command, and
halts the emulator with code 1 if there is any error in the command
specification or user-provided command line input.</p><section role="note" class="admonition warning"><h4 class="admonition-title warning">Warning</h4><p>This function is designed to work as an entry point to a standalone
<a href="../../apps/erts/escript_cmd.html"><code class="inline">escript</code></a>. Therefore, it halts the emulator for any
error detected. Do not use this function through remote procedure call, or it
may result in an unexpected shutdown of a remote node.</p></section>
  </section>
</section>

    </div>
  </section>

    <footer class="footer">
      <p>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="stdlib.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.38.1) for the

          <a href="https://erlang.org" title="Erlang" target="_blank" translate="no">Erlang programming language</a>

      </p>
<p>Copyright Â© 1996-2025 <a href="https://www.ericsson.com">Ericsson AB</a></p>
    </footer>
  </div>
</main>
</div>
  <script defer src="https://cdn.jsdelivr.net/npm/mermaid@11.4.1/dist/mermaid.min.js"></script>
  <script>
  let initialized = false;

  window.addEventListener("exdoc:loaded", () => {
      if (!initialized) {
      mermaid.initialize({
          startOnLoad: false,
          theme: document.body.className.includes("dark") ? "dark" : "default"
      });
      initialized = true;
      }

      let id = 0;
      for (const codeEl of document.querySelectorAll("pre code.mermaid")) {
      const preEl = codeEl.parentElement;
      const graphDefinition = codeEl.textContent;
      const graphEl = document.createElement("div");
      const graphId = "mermaid-graph-" + id++;
      mermaid.render(graphId, graphDefinition).then(({svg, bindFunctions}) => {
          graphEl.innerHTML = svg;
          bindFunctions?.(graphEl);
          preEl.insertAdjacentElement("afterend", graphEl);
          preEl.remove();
      });
      }
  });
  </script>

  </body>
</html>
