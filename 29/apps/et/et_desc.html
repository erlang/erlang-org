<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.38.1">
    <meta name="project" content="et v1.7.2-rc0">


<meta name="exdoc:full-text-search-url" content="/doc/search.html?v=29&q=">
<meta name="major-vsn" content="29">
<link rel="canonical" href="https://www.erlang.org/docs/29/apps/et/et_desc.html" />
    <title>Description — et v1.7.2-rc0</title>

    <link rel="stylesheet" href="dist/html-erlang-ZK43ZOAC.css" />

    <script defer src="dist/sidebar_items-8B24DAD4.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-DPJLHKSM.js"></script>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="../../index.html" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="et" />
        </a>

      <div>
        <a href="../../index.html" class="sidebar-projectName" translate="no">
et
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v1.7.2-rc0
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras=""></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-extra" id="main" data-type="extras">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of et</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search" tabindex="-1">
            <i class="ri-search-2-line ri-lg" aria-hidden="true"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>Description</h1>


      <a href="https://github.com/erlang/otp/blob/master/lib/et/doc/guides/et_desc.md#L1" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

  </div>


<h2 id="overview" class="section-heading"><a href="#overview" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Overview</span></h2><p>The two major components of the <code class="inline">Event Tracer (ET)</code> tool is a graphical sequence
chart viewer (<code class="inline">et_viewer</code>) and its backing storage (<code class="inline">et_collector</code>). One
<code class="inline">Collector</code> may be used as backing storage for several simultaneous <code class="inline">Viewers</code>
where each one may display a different view of the same trace data.</p><p>The interface between the <code class="inline">Collector</code> and its <code class="inline">Viewers</code> is public in order to
enable other types of <code class="inline">Viewers</code>. However in the following text we will focus on
usage of the <code class="inline">et_viewer</code>.</p><p>The main start function is <a href="et_viewer.html#start/1"><code class="inline">et_viewer:start/1</code></a>. By default it will start both an
<code class="inline">et_collector</code> and an <code class="inline">et_viewer</code>:</p><pre><code class="makeup erlang" translate="no"><span class="c1">% erl -pa et/examples</span><span class="w">
</span><span class="n">Erlang</span><span class="w"> </span><span class="n">R13B03</span><span class="w"> </span><span class="p" data-group-id="6050544524-1">(</span><span class="ss">erts</span><span class="o">-</span><span class="mf">5.7</span><span class="p">.</span><span class="mi">4</span><span class="p" data-group-id="6050544524-1">)</span><span class="w"> </span><span class="p" data-group-id="6050544524-2">[</span><span class="mi">64</span><span class="o">-</span><span class="ss">bit</span><span class="p" data-group-id="6050544524-2">]</span><span class="w"> </span><span class="p" data-group-id="6050544524-3">[</span><span class="nc">smp</span><span class="p">:</span><span class="mi">4</span><span class="p">:</span><span class="mi">4</span><span class="p" data-group-id="6050544524-3">]</span><span class="w"> </span><span class="p" data-group-id="6050544524-4">[</span><span class="nc">rq</span><span class="p">:</span><span class="mi">4</span><span class="p" data-group-id="6050544524-4">]</span><span class="w"> </span><span class="p" data-group-id="6050544524-5">[</span><span class="ss">async</span><span class="o">-</span><span class="nc">threads</span><span class="p">:</span><span class="mi">0</span><span class="p" data-group-id="6050544524-5">]</span><span class="w"> </span><span class="p" data-group-id="6050544524-6">[</span><span class="ss">kernel</span><span class="o">-</span><span class="nc">poll</span><span class="p">:</span><span class="ss">false</span><span class="p" data-group-id="6050544524-6">]</span><span class="w">

</span><span class="n">Eshell</span><span class="w"> </span><span class="n">V5</span><span class="p">.</span><span class="mf">7.4</span><span class="w">  </span><span class="p" data-group-id="6050544524-7">(</span><span class="ss">abort</span><span class="w"> </span><span class="ss">with</span><span class="w"> </span><span class="err">^</span><span class="n">G</span><span class="p" data-group-id="6050544524-7">)</span><span class="gp unselectable">
1&gt; </span><span class="p" data-group-id="6050544524-8">{</span><span class="ss">ok</span><span class="p">,</span><span class="w"> </span><span class="n">Viewer</span><span class="p" data-group-id="6050544524-8">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">et_viewer</span><span class="p">:</span><span class="nf">start</span><span class="p" data-group-id="6050544524-9">(</span><span class="p" data-group-id="6050544524-10">[</span><span class="p" data-group-id="6050544524-10">]</span><span class="p" data-group-id="6050544524-9">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="6050544524-11">{</span><span class="ss">ok</span><span class="p">,</span><span class="o">&lt;</span><span class="mf">0.40</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p" data-group-id="6050544524-11">}</span></code></pre><p>A <code class="inline">Viewer</code> gets trace <code class="inline">Events</code> from its <code class="inline">Collector</code> by polling it regularly for
more <code class="inline">Events</code> to display. <code class="inline">Events</code> are for example reported to the <code class="inline">Collector</code>
with <a href="et_collector.html#report_event/6"><code class="inline">et_collector:report_event/6</code></a>:</p><pre><code class="makeup erlang" translate="no"><span class="gp unselectable">2&gt; </span><span class="n">Collector</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">et_viewer</span><span class="p">:</span><span class="nf">get_collector_pid</span><span class="p" data-group-id="2029465870-1">(</span><span class="n">Viewer</span><span class="p" data-group-id="2029465870-1">)</span><span class="p">.</span><span class="w">
</span><span class="o">&lt;</span><span class="mf">0.39</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="gp unselectable">
3&gt; </span><span class="nc">et_collector</span><span class="p">:</span><span class="nf">report_event</span><span class="p" data-group-id="2029465870-2">(</span><span class="n">Collector</span><span class="p">,</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w"> </span><span class="ss">my_shell</span><span class="p">,</span><span class="w"> </span><span class="ss">mnesia_tm</span><span class="p">,</span><span class="w"> </span><span class="ss">start_outer</span><span class="p">,</span><span class="gp unselectable">
3&gt; </span><span class="w">                          </span><span class="s">&quot;Start outer transaction&quot;</span><span class="p" data-group-id="2029465870-2">)</span><span class="p">,</span><span class="gp unselectable">
3&gt; </span><span class="nc">et_collector</span><span class="p">:</span><span class="nf">report_event</span><span class="p" data-group-id="2029465870-3">(</span><span class="n">Collector</span><span class="p">,</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="ss">mnesia_tm</span><span class="p">,</span><span class="w"> </span><span class="ss">my_shell</span><span class="p">,</span><span class="w"> </span><span class="ss">new_tid</span><span class="p">,</span><span class="gp unselectable">
3&gt; </span><span class="w">                          </span><span class="s">&quot;New transaction id is 4711&quot;</span><span class="p" data-group-id="2029465870-3">)</span><span class="p">,</span><span class="gp unselectable">
3&gt; </span><span class="nc">et_collector</span><span class="p">:</span><span class="nf">report_event</span><span class="p" data-group-id="2029465870-4">(</span><span class="n">Collector</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="ss">my_shell</span><span class="p">,</span><span class="w"> </span><span class="ss">mnesia_locker</span><span class="p">,</span><span class="w"> </span><span class="ss">try_write_lock</span><span class="p">,</span><span class="gp unselectable">
3&gt; </span><span class="w">                          </span><span class="s">&quot;Acquire write lock for {my_tab, key}&quot;</span><span class="p" data-group-id="2029465870-4">)</span><span class="p">,</span><span class="gp unselectable">
3&gt; </span><span class="nc">et_collector</span><span class="p">:</span><span class="nf">report_event</span><span class="p" data-group-id="2029465870-5">(</span><span class="n">Collector</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="ss">mnesia_locker</span><span class="p">,</span><span class="w"> </span><span class="ss">my_shell</span><span class="p">,</span><span class="w"> </span><span class="ss">granted</span><span class="p">,</span><span class="gp unselectable">
3&gt; </span><span class="w">                          </span><span class="s">&quot;You got the write lock for {my_tab, key}&quot;</span><span class="p" data-group-id="2029465870-5">)</span><span class="p">,</span><span class="gp unselectable">
3&gt; </span><span class="nc">et_collector</span><span class="p">:</span><span class="nf">report_event</span><span class="p" data-group-id="2029465870-6">(</span><span class="n">Collector</span><span class="p">,</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w"> </span><span class="ss">my_shell</span><span class="p">,</span><span class="w"> </span><span class="ss">do_commit</span><span class="p">,</span><span class="gp unselectable">
3&gt; </span><span class="w">                          </span><span class="s">&quot;Perform  transaction commit&quot;</span><span class="p" data-group-id="2029465870-6">)</span><span class="p">,</span><span class="gp unselectable">
3&gt; </span><span class="nc">et_collector</span><span class="p">:</span><span class="nf">report_event</span><span class="p" data-group-id="2029465870-7">(</span><span class="n">Collector</span><span class="p">,</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="ss">my_shell</span><span class="p">,</span><span class="w"> </span><span class="ss">mnesia_locker</span><span class="p">,</span><span class="w"> </span><span class="ss">release_tid</span><span class="p">,</span><span class="gp unselectable">
3&gt; </span><span class="w">                          </span><span class="s">&quot;Release all locks for transaction 4711&quot;</span><span class="p" data-group-id="2029465870-7">)</span><span class="p">,</span><span class="gp unselectable">
3&gt; </span><span class="nc">et_collector</span><span class="p">:</span><span class="nf">report_event</span><span class="p" data-group-id="2029465870-8">(</span><span class="n">Collector</span><span class="p">,</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w"> </span><span class="ss">my_shell</span><span class="p">,</span><span class="w"> </span><span class="ss">mnesia_tm</span><span class="p">,</span><span class="w"> </span><span class="ss">delete_transaction</span><span class="p">,</span><span class="gp unselectable">
3&gt; </span><span class="w">                          </span><span class="s">&quot;End of outer transaction&quot;</span><span class="p" data-group-id="2029465870-8">)</span><span class="p">,</span><span class="gp unselectable">
3&gt; </span><span class="nc">et_collector</span><span class="p">:</span><span class="nf">report_event</span><span class="p" data-group-id="2029465870-9">(</span><span class="n">Collector</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="ss">my_shell</span><span class="p">,</span><span class="w"> </span><span class="ss">end_outer</span><span class="p">,</span><span class="gp unselectable">
3&gt; </span><span class="w">                          </span><span class="s">&quot;Transaction returned {atomic, ok}&quot;</span><span class="p" data-group-id="2029465870-9">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="2029465870-10">{</span><span class="ss">ok</span><span class="p">,</span><span class="p" data-group-id="2029465870-11">{</span><span class="ss">table_handle</span><span class="p">,</span><span class="o">&lt;</span><span class="mf">0.39</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p">,</span><span class="mi">16402</span><span class="p">,</span><span class="ss">trace_ts</span><span class="p">,</span><span class="w">
     </span><span class="p">#</span><span class="n">Fun</span><span class="o">&lt;</span><span class="ss">et_collector</span><span class="p">.</span><span class="mf">0.62831470</span><span class="o">&gt;</span><span class="p" data-group-id="2029465870-11">}</span><span class="p" data-group-id="2029465870-10">}</span></code></pre><p>This actually is a simulation of the process <code class="inline">Events</code> caused by a <code class="inline">Mnesia</code>
transaction that writes a record in a local table:</p><pre><code class="makeup erlang" translate="no"><span class="nc">mnesia</span><span class="p">:</span><span class="nf">transaction</span><span class="p" data-group-id="1387480886-1">(</span><span class="nf">fun</span><span class="p" data-group-id="1387480886-2">(</span><span class="p" data-group-id="1387480886-2">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">mnesia</span><span class="p">:</span><span class="nf">write</span><span class="p" data-group-id="1387480886-3">(</span><span class="p" data-group-id="1387480886-4">{</span><span class="ss">my_tab</span><span class="p">,</span><span class="w"> </span><span class="ss">key</span><span class="p">,</span><span class="w"> </span><span class="ss">val</span><span class="p" data-group-id="1387480886-4">}</span><span class="p" data-group-id="1387480886-3">)</span><span class="w"> </span><span class="k">end</span><span class="p" data-group-id="1387480886-1">)</span><span class="p">.</span></code></pre><p>At this stage when we have a couple of <code class="inline">Events</code>, it is time to show how it looks
like in the graphical interface of <code class="inline">et_viewer</code>:</p><p><img src="assets/sim_trans.png" alt="A simulated Mnesia transaction which writes one record" title="A simulated Mnesia transaction which writes one record"/></p><p>In the sequence chart, the actors (which symbolically has performed the <code class="inline">Event</code>)
are shown as named vertical bars. The order of the actors may be altered by
dragging (hold mouse button 1 pressed during the operation) the name tag of an
actor and drop it elsewhere:</p><p><img src="assets/sim_trans_move_actor.png" alt="Two actors has switched places" title="Two actors has switched places"/></p><p>An <code class="inline">Event</code> may be an action performed by one single actor (blue text label) or
it may involve two actors and is then depicted as an arrow directed from one
actor to another (red text label). Details of an <code class="inline">Event</code> can be shown by
clicking (press and release the mouse button 1) on the event label text or on
the arrow. When doing that a <code class="inline">Contents Viewer</code> window pops up. It may look like
this:</p><p><img src="assets/sim_trans_write_lock.png" alt="Details of a write lock message" title="Details of a write lock message"/></p><h2 id="filters-and-dictionary" class="section-heading"><a href="#filters-and-dictionary" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Filters and dictionary</span></h2><p>The <code class="inline">Event Tracer (ET)</code> uses named filters in various contexts. An Event Trace
filter is an <code class="inline">Erlang fun</code> that takes some trace data as input and returns a
possibly modified version of it:</p><pre><code class="makeup erlang" translate="no"><span class="nf">filter</span><span class="p" data-group-id="3974761608-1">(</span><span class="n">TraceData</span><span class="p" data-group-id="3974761608-1">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="ss">false</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="ss">true</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="p" data-group-id="3974761608-2">{</span><span class="ss">true</span><span class="p">,</span><span class="w"> </span><span class="n">NewEvent</span><span class="p" data-group-id="3974761608-2">}</span><span class="w">

</span><span class="n">TraceData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Event</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nf">erlang_trace_data</span><span class="p" data-group-id="3974761608-3">(</span><span class="p" data-group-id="3974761608-3">)</span><span class="w">
</span><span class="n">Event</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">#</span><span class="ss">event</span><span class="p" data-group-id="3974761608-4">{</span><span class="p" data-group-id="3974761608-4">}</span><span class="w">
</span><span class="n">NewEvent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">#</span><span class="ss">event</span><span class="p" data-group-id="3974761608-5">{</span><span class="p" data-group-id="3974761608-5">}</span></code></pre><p>The interface of the filter function is the same as the the filter functions for
the good old <a href="../../apps/stdlib/lists.html#filtermap/2"><code class="inline">lists:filtermap/2</code></a>. If the filter returns <code class="inline">false</code> it means that
the trace data should silently be dropped. <code class="inline">true</code> means that the trace data data
already is an <code class="inline">Event Record</code> and that it should be kept as it is. <code class="inline">true</code> means
that the <code class="inline">TraceData</code> already is an <code class="inline">Event Record</code> and that it should be kept as
it is. <code class="inline">{true, NewEvent}</code> means that the original trace data should be replaced
with <code class="inline">Event</code>. This provides means to get rid of unwanted <code class="inline">Events</code> as well as
enabling alternate views of an <code class="inline">Event</code>.</p><p>The first filter that the trace data is exposed for is the <code class="inline">Collector Filter</code>.
When a trace <code class="inline">Event</code> is reported with <a href="et_collector.html#report/2"><code class="inline">et_collector:report/2</code></a> (or
<code class="inline">et_collector:report_event/5,6</code>) the first thing that happens, is that a message
is sent to the <code class="inline">Collector</code> process to fetch a handle that contains some useful
stuff, such as the <code class="inline">Collector Filter Fun</code> and an Ets table identifier. Then the
<code class="inline">Collector Filter Fun</code> is applied and if it returns <code class="inline">true</code> (or
<code class="inline">{true, NewEvent}</code>), the <code class="inline">Event</code> will be stored in an Ets table. As an
optimization, subsequent calls to <code class="inline">et_collector:report</code>-functions can use the
handle directly instead of the <code class="inline">Collector Pid</code>.</p><p>All filters (registered in a <code class="inline">Collector</code> or in a <code class="inline">Viewer</code>) must be able to
handle an <code class="inline">Event record</code> as input. The <code class="inline">Collector Filter</code> (that is the filter
named <code class="inline">all</code>) is a little bit special, as its input also may be raw
<code class="inline">Erlang Trace Data</code></p><p>The <code class="inline">Collector</code> manages a key/value based dictionary, where the filters are
stored. Updates of the dictionary is propagated to all subscribing processes.
When a <code class="inline">Viewer</code> is started it is registered as a subscriber of dictionary
updates.</p><p>In each <code class="inline">Viewer</code> there is only one filter that is active and all trace <code class="inline">Events</code>
that the <code class="inline">Viewer</code> gets from the <code class="inline">Collector</code> will pass thru that filter. By
writing clever filters it is possible to customize how the <code class="inline">Events</code> looks like
in the viewer. The following filter in <code class="inline">et/examples/et_demo.erl</code> replaces the
actor names <code class="inline">mnesia_tm</code> and <code class="inline">mnesia_locker</code> and leaves everything else in the
record as it was:</p><pre><code class="makeup erlang" translate="no"><span class="w">
</span><span class="nf">mgr_actors</span><span class="p" data-group-id="2907053731-1">(</span><span class="n">E</span><span class="p" data-group-id="2907053731-1">)</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="nf">is_record</span><span class="p" data-group-id="2907053731-2">(</span><span class="n">E</span><span class="p">,</span><span class="w"> </span><span class="ss">event</span><span class="p" data-group-id="2907053731-2">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="n">Actor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">fun</span><span class="p" data-group-id="2907053731-3">(</span><span class="n">A</span><span class="p" data-group-id="2907053731-3">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
               </span><span class="k">case</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="k">of</span><span class="w">
                   </span><span class="ss">mnesia_tm</span><span class="w">     </span><span class="p">-&gt;</span><span class="w"> </span><span class="ss">trans_mgr</span><span class="p">;</span><span class="w">
                   </span><span class="ss">mnesia_locker</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="ss">lock_mgr</span><span class="p">;</span><span class="w">
                   </span><span class="p">_</span><span class="w">             </span><span class="p">-&gt;</span><span class="w"> </span><span class="n">A</span><span class="w">
               </span><span class="k">end</span><span class="w">
            </span><span class="k">end</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="2907053731-4">{</span><span class="ss">true</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="o">#</span><span class="ss">event</span><span class="p" data-group-id="2907053731-5">{</span><span class="ss">from</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Actor</span><span class="p" data-group-id="2907053731-6">(</span><span class="n">E</span><span class="o">#</span><span class="ss">event</span><span class="p">.</span><span class="ss">from</span><span class="p" data-group-id="2907053731-6">)</span><span class="p">,</span><span class="w">
                   </span><span class="ss">to</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Actor</span><span class="p" data-group-id="2907053731-7">(</span><span class="n">E</span><span class="o">#</span><span class="ss">event</span><span class="p">.</span><span class="ss">to</span><span class="p" data-group-id="2907053731-7">)</span><span class="p">,</span><span class="w">
                   </span><span class="ss">contents</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="2907053731-8">[</span><span class="p" data-group-id="2907053731-9">{</span><span class="ss">orig_from</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="o">#</span><span class="ss">event</span><span class="p">.</span><span class="ss">from</span><span class="p" data-group-id="2907053731-9">}</span><span class="p">,</span><span class="w">
                               </span><span class="p" data-group-id="2907053731-10">{</span><span class="ss">orig_to</span><span class="p">,</span><span class="w">   </span><span class="n">E</span><span class="o">#</span><span class="ss">event</span><span class="p">.</span><span class="ss">to</span><span class="p" data-group-id="2907053731-10">}</span><span class="p">,</span><span class="w">
                               </span><span class="p" data-group-id="2907053731-11">{</span><span class="ss">orig_contents</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="o">#</span><span class="ss">event</span><span class="p">.</span><span class="ss">contents</span><span class="p" data-group-id="2907053731-11">}</span><span class="p" data-group-id="2907053731-8">]</span><span class="p" data-group-id="2907053731-5">}</span><span class="p" data-group-id="2907053731-4">}</span><span class="p">.</span></code></pre><p>If we now add the filter to the running <code class="inline">Collector</code>:</p><pre><code class="makeup erlang" translate="no"><span class="gp unselectable">4&gt; </span><span class="n">Fun</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">fun</span><span class="p" data-group-id="5096922029-1">(</span><span class="n">E</span><span class="p" data-group-id="5096922029-1">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">et_demo</span><span class="p">:</span><span class="nf">mgr_actors</span><span class="p" data-group-id="5096922029-2">(</span><span class="n">E</span><span class="p" data-group-id="5096922029-2">)</span><span class="w"> </span><span class="k">end</span><span class="p">.</span><span class="w">
</span><span class="p">#</span><span class="n">Fun</span><span class="o">&lt;</span><span class="ss">erl_eval</span><span class="p">.</span><span class="mf">6.13229925</span><span class="o">&gt;</span><span class="gp unselectable">
5&gt; </span><span class="nc">et_collector</span><span class="p">:</span><span class="nf">dict_insert</span><span class="p" data-group-id="5096922029-3">(</span><span class="n">Collector</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5096922029-4">{</span><span class="ss">filter</span><span class="p">,</span><span class="w"> </span><span class="ss">mgr_actors</span><span class="p" data-group-id="5096922029-4">}</span><span class="p">,</span><span class="w"> </span><span class="n">Fun</span><span class="p" data-group-id="5096922029-3">)</span><span class="p">.</span><span class="w">
</span><span class="ss">ok</span></code></pre><p>you will see that the <code class="inline">Filter</code> menu in all viewers have got a new entry called
<code class="inline">mgr_actors</code>. Select it, and a new <code class="inline">Viewer</code> window will pop up:</p><p><img src="assets/sim_trans_mgr_actors.png" alt="The same trace data in a different view" title="The same trace data in a different view"/></p><p>In order to see the nitty gritty details of an <code class="inline">Event</code> you may click on the
<code class="inline">Event</code> in order to start a <code class="inline">Contents Viewer</code> for that <code class="inline">Event</code>. In the
<code class="inline">Contents Viewer</code> there also is a filter menu that enables inspection of the
<code class="inline">Event</code> from other views than the one selected in the viewer. A click on the
<code class="inline">new_tid</code> <code class="inline">Event</code> will cause a <code class="inline">Contents Viewer</code> window to pop up, showing the
<code class="inline">Event</code> in the <code class="inline">mgr_actors</code> view:</p><p><img src="assets/sim_trans_contents_viewer_mgr_actors.png" alt="The trace Event in the mgr_actors view" title="The trace Event in the mgr_actors view"/></p><p>Select the <code class="inline">all</code> entry in the <code class="inline">Filters</code> menu and a new <code class="inline">Contents Viewer window</code>
will pop up showing the same trace <code class="inline">Event</code> in the collectors view:</p><p><img src="assets/sim_trans_contents_viewer_collector.png" alt="The same trace Event in the collectors view" title="The same trace Event in the collectors view"/></p><h2 id="trace-clients" class="section-heading"><a href="#trace-clients" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Trace clients</span></h2><p>As you have seen, it is possible to use the <code class="inline">et_collector:report_event/5,6</code>
functions explicitly. By using those functions you can write your own trace
client that reads trace data from any source stored in any format and just feed
the <code class="inline">Collector</code> with it. You may replace the default <code class="inline">Collector Filter</code> with a
filter that converts new exciting trace data formats to <code class="inline">Event Records</code> or you
may convert it to an <code class="inline">Event Record</code> before you invoke <a href="et_collector.html#report/2"><code class="inline">et_collector:report/2</code></a>
and then rely on the default <code class="inline">Collector Filter</code> to handle the new format.</p><p>There are also existing functions in the API that reads from various sources and
calls <a href="et_collector.html#report/2"><code class="inline">et_collector:report/2</code></a>:</p><ul><li><p>The trace <code class="inline">Events</code> that are hosted by the <code class="inline">Collector</code> may be stored to file
and later be loaded by selecting <code class="inline">save</code> and <code class="inline">load</code> entries in the <code class="inline">Viewers</code>
<code class="inline">File</code> menu or via the <code class="inline">et_collector</code> API.</p></li><li><p>It is also possible to perform live tracing of a running system by making use
of the built-in trace support in the Erlang emulator. These Erlang traces can
be directed to files or to ports. See the reference manual for
<a href="../../apps/erts/erlang.html#trace/3"><code class="inline">erlang:trace/3</code></a>, <a href="../../apps/erts/erlang.html#trace_pattern/3"><code class="inline">erlang:trace_pattern/3</code></a>, <code class="inline">dbg</code> and <code class="inline">ttb</code> for more info.</p><p>There are also corresponding trace client types that can read the Erlang trace
data format from such files or ports. The <a href="et_collector.html#start_trace_client/3"><code class="inline">et_collector:start_trace_client/3</code></a>
function makes use of these Erlang trace clients and redirects the trace data
to the <code class="inline">Collector</code>.</p><p>The default <code class="inline">Collector Filter</code> converts the raw Erlang trace data format into
<code class="inline">Event Records</code>. If you want to perform this differently you can of course
write your own <code class="inline">Collector Filter</code> from scratch. But it may probably save you
some efforts if you first apply the default filter in
<a href="et_selector.html#parse_event/2"><code class="inline">et_selector:parse_event/2</code></a> before you apply your own conversions of its
output.</p></li></ul><h2 id="global-tracing" class="section-heading"><a href="#global-tracing" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Global tracing</span></h2><p>Setting up an Erlang tracer on a set of nodes and connecting trace clients to
the ports of these tracers is not intuitive. In order to make this it easier the
<code class="inline">Event Tracer</code> has a notion of global tracing. When used, the <code class="inline">et_collector</code>
process will monitor Erlang nodes and when one connects, an Erlang tracer will
automatically be started on the newly connected node. A corresponding trace
client will also be started on the <code class="inline">Collector</code> node in order to automatically
forward the trace <code class="inline">Events</code> to the <code class="inline">Collector</code>. Set the boolean parameter
<code class="inline">trace_global</code> to <code class="inline">true</code> for either the <code class="inline">et_collector</code> or <code class="inline">et_viewer</code> in order
to activate the global tracing. There is no restriction on how many concurrent
(anonymous) collectors you can have, but you can only have one <em>global</em>
<code class="inline">Collector</code> as its name is registered in <code class="inline">global</code>.</p><p>In order to further simplify the tracing, you can make use of the
<code class="inline">et:trace_me/4,5</code> functions. These functions are intended to be invoked from
other applications when there are interesting <code class="inline">Events</code>, in your application that
needs to be highlighted. The functions are extremely light weight as they do
nothing besides returning an atom. These functions are specifically designed to
be traced for. As the caller explicitly provides the values for the
<code class="inline">Event Record</code> fields, the default <code class="inline">Collector Filter</code> is able to automatically
provide a customized <code class="inline">Event Record</code> without any user defined filter functions.</p><p>In normal operation, the <code class="inline">et:trace_me/4,5</code> calls are almost for free. When
tracing is needed, you can either activate tracing on these functions
explicitly. Or you can combine the usage of <code class="inline">trace_global</code> with the usage of
<code class="inline">trace_pattern</code>. When set, the <code class="inline">trace_pattern</code> will automatically be activated
on all connected nodes.</p><p>One nice thing with the <code class="inline">trace_pattern</code> is that it provides a very simple way of
minimizing the amount of generated trace data by allowing you to explicitly
control the detail level of the tracing. As you may have seen the <code class="inline">et_viewer</code>
have a slider called <code class="inline">&quot;Detail Level&quot;</code> that allows you to control the detail
level of the trace <code class="inline">Events</code> displayed in the <code class="inline">Viewer</code>. On the other hand if you
set a low detail level in the <code class="inline">trace_pattern</code>, lots of the trace data will never
be generated and thus not sent over the socket to the trace client and stored in
the <code class="inline">Collector</code>.</p><h2 id="viewer-window" class="section-heading"><a href="#viewer-window" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Viewer window</span></h2><p>Almost all functionality available in the <code class="inline">et_viewer</code> is also available via
shortcuts. Which key that has the same effect as selecting a menu entry is shown
enclosed in parentheses. For example pressing the key <code class="inline">r</code> is equivalent to
selecting the menu entry <code class="inline">Viewer-&gt;Refresh</code>.</p><p>File menu:</p><ul><li><code class="inline">Clear all events in the Collector</code> - Deletes all <code class="inline">Events</code> stored in the
<code class="inline">Collector</code> and notifies all connected <code class="inline">Viewers</code> about this.</li><li><code class="inline">Load events to the Collector from file</code> - Loads the <code class="inline">Collector</code> with
<code class="inline">Events</code> from a file and notifies all connected <code class="inline">Viewers</code> about this.</li><li><code class="inline">Save all events in the Collector to file</code> - Saves all <code class="inline">Events</code> stored in the
<code class="inline">Collector</code> to file.</li><li><code class="inline">Print setup</code> - Enables editing of printer setting, such as paper and layout.</li><li><code class="inline">Print current page</code> - Prints the events on the current page. The page size
is dependent of the selected paper type.</li><li><code class="inline">Print all pages</code> - Prints all events. The page size is dependent of the
selected paper type.</li><li><code class="inline">Close this Viewer</code> - Closes this <code class="inline">Viewer</code> window, but keeps all other
<code class="inline">Viewers</code> windows and the <code class="inline">Collector</code> process.</li><li><code class="inline">Close other Viewers, but this</code> - Keeps this <code class="inline">Viewer</code> window and its
<code class="inline">Collector</code> process, but closes all other <code class="inline">Viewers</code> windowsconnected to the
same <code class="inline">Collector</code>.</li><li><code class="inline">Close all Viewers and the Collector</code> - Closes the <code class="inline">Collector</code> and all
<code class="inline">Viewers</code> connected to it.</li></ul><p>Viewer menu:</p><ul><li><code class="inline">First</code> - Scrolls <code class="inline">this</code> viewer to the first <code class="inline">Event</code> in the <code class="inline">Collector</code>.</li><li><code class="inline">Last</code> - Scrolls <code class="inline">this</code> viewer to the last <code class="inline">Event</code> in the <code class="inline">Collector</code>.</li><li><code class="inline">Prev</code> - Scrolls <code class="inline">this</code> viewer one page backwards.</li><li><code class="inline">Next</code> - Scrolls <code class="inline">this</code> viewer one page forward.</li><li><code class="inline">Refresh</code> - Clears <code class="inline">this</code> viewer and re-read its <code class="inline">Events</code> from the
<code class="inline">Collector</code>.</li><li><code class="inline">Up</code> - Scrolls a few <code class="inline">Events</code> backwards.</li><li><code class="inline">Down</code> - Scrolls a few <code class="inline">Events</code> forward.</li><li><code class="inline">Display all actors.</code> - Reset the settings for hidden and/or highlighted
actors.</li></ul><p>Collector menu:</p><ul><li><code class="inline">First</code> - Scrolls<code class="inline">all</code> viewers to the first <code class="inline">Event</code> in the <code class="inline">Collector</code>.</li><li><code class="inline">Last</code> - Scrolls <code class="inline">all</code> viewers to the last <code class="inline">Event</code> in the <code class="inline">Collector</code>.</li><li><code class="inline">Prev</code> - Scrolls <code class="inline">all</code> viewers one page backwards.</li><li><code class="inline">Next</code> - Scrolls <code class="inline">all</code> viewers one page forward.</li><li><code class="inline">Refresh</code> - Clears <code class="inline">all</code> viewers and re-read their <code class="inline">Events</code> from the
<code class="inline">Collector</code>.</li></ul><p>Filters and scaling menu:</p><ul><li><code class="inline">ActiveFilter (=)</code> - Starts a new <code class="inline">Viewer</code> window with the same active filter
and scale as the current one.</li><li><code class="inline">ActiveFilter (+)</code> - Starts a new <code class="inline">Viewer</code> window with the same active filter
but a larger scale than the current one.</li><li><code class="inline">ActiveFilter (-)</code> - Starts a new <code class="inline">Viewer</code>window with the same active filter
but a smaller scale than the current one.</li><li><code class="inline">all (0)</code> - Starts a new <code class="inline">Viewer</code> with the <code class="inline">Collector Filter</code> as active
filter. It will cause all events in the collector to be viewed.</li><li><code class="inline">AnotherFilter (2)</code> - If more filters are inserted into the dictionary, these
will turn up here as entries in the <code class="inline">Filters</code> menu. The second filter will get
the shortcut number 2, the next one number 3 etc. The names are sorted.</li></ul><p>Slider and radio buttons:</p><ul><li><code class="inline">Hide From=To</code> - When true, this means that the <code class="inline">Viewer</code> will hide all
<code class="inline">Events</code> where the from-actor equals to its to-actor. These events are
sometimes called actions.</li><li><code class="inline">Hide (excluded actors)</code> - When true, this means that the <code class="inline">Viewer</code> will hide
all <code class="inline">Events</code> whose actors are marked as excluded. Excluded actors are normally
enclosed in round brackets when they are displayed in the <code class="inline">Viewer</code>.</li><li><code class="inline">Detail level</code> - This slider controls the resolution of the <code class="inline">Viewer</code>. Only
<code class="inline">Events</code> with a detail level <code class="inline">smaller</code> than the selected one (default=100=max)
are displayed.</li></ul><p>Other features:</p><ul><li><code class="inline">Vertical scroll</code> - Use mouse wheel and up/down arrows to scroll little. Use
page up/down and home/end buttons to scroll more.</li><li><code class="inline">Display details of an event</code> - Left mouse click on the event label or the
arrowand a new <code class="inline">Contents Viewer</code> window will pop up, displaying the contents
of an <code class="inline">Event</code>.</li><li><code class="inline">Highlight actor (toggle)</code> - Left mouse click on the actor name tag. The
actor name will be enclosed in square brackets <code class="inline">[]</code>. When one or more actors
are highlighted, only events related to those actors are displayed. All others
are hidden.</li><li><code class="inline">Exclude actor (toggle)</code> - Right mouse click on the actor name tag. The actor
name will be enclosed in round brackets <code class="inline">()</code>. When an actor is excluded, all
events related to this actor is hidden. If the checkbox
<code class="inline">Hide (excluded actors)</code> is checked, even the name tags and corresponding
vertical line of excluded actors will be hidden.</li><li><code class="inline">Move actor</code> - Left mouse button drag and drop on actor name tag. Move the
actor by first clicking on the actor name, keeping the button pressed while
moving the cursor to a new location and release the button where the actor
should be moved to.</li><li><code class="inline">Display all actors</code> - Press the 'a' button. Reset the settings for hidden
and/or highlighted actors.</li></ul><h2 id="configuration" class="section-heading"><a href="#configuration" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Configuration</span></h2><p>The <code class="inline">Event Records</code> in the Ets table are ordered by their timestamp. Which
timestamp that should be used is controlled via the <code class="inline">event_order</code> parameter.
Default is <code class="inline">trace_ts</code> which means the time when the trace data was generated.
<code class="inline">event_ts</code> means the time when the trace data was parsed (transformed into an
<code class="inline">Event Record</code>).</p><h2 id="contents-viewer-window" class="section-heading"><a href="#contents-viewer-window" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Contents viewer window</span></h2><p>File menu:</p><ul><li><code class="inline">Close</code> - Close this window.</li><li><code class="inline">Save</code> - Save the contents of this window to file.</li></ul><p>Filters menu:</p><ul><li><code class="inline">ActiveFilter</code> - Start a new <code class="inline">Contents Viewer window</code> with the same active
filter.</li><li><code class="inline">AnotherFilter (2)</code> - If more filters are inserted into the dictionary, these
will turn up here as entries in the <code class="inline">Filters</code> menu. The second filter will be
number 2, the next one number 3 etc. The names are sorted.</li></ul><p>Hide menu:</p><ul><li><p><code class="inline">Hide actor in viewer</code> - Known actors are shown as a named vertical bars in
the <code class="inline">Viewer</code> window. By hiding the actor, its vertical bar will be removed and
the <code class="inline">Viewer</code> will be refreshed.</p><p><code class="inline">Hiding the actor</code> is only useful if the <code class="inline">max_actors</code> threshold has been
reached, as it then will imply that the &quot;hidden&quot; actor will be displayed as if
it were <code class="inline">&quot;UNKNOWN&quot;</code>. If the <code class="inline">max_actors</code> threshold not have been reached, the
actor will re-appear as a vertical bar in the <code class="inline">Viewer</code>.</p></li><li><p><code class="inline">Show actor in viewer</code> - This implies that the actor will be added as a known
actor in the <code class="inline">Viewer</code> with its own vertical bar.</p></li></ul><p>Search menu:</p><ul><li><code class="inline">Forward from this event</code> - Set this event to be the first event in the
viewer and change its display mode to be enter forward search mode. The actor
of this event (from, to or both) will be added to the list of selected actors.</li><li><code class="inline">Reverse from this event</code> - Set this event to be the first <code class="inline">Event</code> in the
<code class="inline">Viewer</code> and change its display mode to be enter reverse search mode. The
actor of this <code class="inline">Event</code> (from, to or both) will be added to the list of selected
actors. Observe, that the <code class="inline">Events</code> will be shown in reverse order.</li><li><code class="inline">Abort search. Display all</code> - Switch the display mode of the <code class="inline">Viewer</code> to show
all <code class="inline">Events</code> regardless of any ongoing searches. Abort the searches.</li></ul>

</div>

<div class="bottom-actions" id="bottom-actions">
  <div class="bottom-actions-item">

      <a href="et_tutorial.html" class="bottom-actions-button" rel="prev">
        <span class="subheader">
          ← Previous Page
        </span>
        <span class="title">
Tutorial
        </span>
      </a>

  </div>
  <div class="bottom-actions-item">

      <a href="et_examples.html" class="bottom-actions-button" rel="next">
        <span class="subheader">
          Next Page →
        </span>
        <span class="title">
Advanced examples
        </span>
      </a>

  </div>
</div>
    <footer class="footer">
      <p>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="et.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.38.1) for the

          <a href="https://erlang.org" title="Erlang" target="_blank" translate="no">Erlang programming language</a>

      </p>
<p>Copyright © 1996-2025 <a href="https://www.ericsson.com">Ericsson AB</a></p>
    </footer>
  </div>
</main>
</div>
  <script defer src="https://cdn.jsdelivr.net/npm/mermaid@11.4.1/dist/mermaid.min.js"></script>
  <script>
  let initialized = false;

  window.addEventListener("exdoc:loaded", () => {
      if (!initialized) {
      mermaid.initialize({
          startOnLoad: false,
          theme: document.body.className.includes("dark") ? "dark" : "default"
      });
      initialized = true;
      }

      let id = 0;
      for (const codeEl of document.querySelectorAll("pre code.mermaid")) {
      const preEl = codeEl.parentElement;
      const graphDefinition = codeEl.textContent;
      const graphEl = document.createElement("div");
      const graphId = "mermaid-graph-" + id++;
      mermaid.render(graphId, graphDefinition).then(({svg, bindFunctions}) => {
          graphEl.innerHTML = svg;
          bindFunctions?.(graphEl);
          preEl.insertAdjacentElement("afterend", graphEl);
          preEl.remove();
      });
      }
  });
  </script>

  </body>
</html>
