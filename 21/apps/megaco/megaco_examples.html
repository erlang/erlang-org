<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html xmlns:erl="http://erlang.org" xmlns:fn="http://www.w3.org/2005/02/xpath-functions">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" href="../../otp_doc.css" type="text/css">
<title>Erlang -- Implementation examples</title>
</head>
<body>
<div id="container">
<script id="js" type="text/javascript" language="JavaScript" src="../../js/flipmenu/flipmenu.js"></script><script id="js2" type="text/javascript" src="../../js/erlresolvelinks.js"></script><script language="JavaScript" type="text/javascript">
            <!--
              function getWinHeight() {
                var myHeight = 0;
                if( typeof( window.innerHeight ) == 'number' ) {
                  //Non-IE
                  myHeight = window.innerHeight;
                } else if( document.documentElement && ( document.documentElement.clientWidth ||
                                                         document.documentElement.clientHeight ) ) {
                  //IE 6+ in 'standards compliant mode'
                  myHeight = document.documentElement.clientHeight;
                } else if( document.body && ( document.body.clientWidth || document.body.clientHeight ) ) {
                  //IE 4 compatible
                  myHeight = document.body.clientHeight;
                }
                return myHeight;
              }

              function setscrollpos() {
                var objf=document.getElementById('loadscrollpos');
                 document.getElementById("leftnav").scrollTop = objf.offsetTop - getWinHeight()/2;
              }

              function addEvent(obj, evType, fn){
                if (obj.addEventListener){
                obj.addEventListener(evType, fn, true);
                return true;
              } else if (obj.attachEvent){
                var r = obj.attachEvent("on"+evType, fn);
                return r;
              } else {
                return false;
              }
             }

             addEvent(window, 'load', setscrollpos);

             //--></script><div id="leftnav"><div class="innertube">
<div class="erlang-logo-wrapper"><a href="../../index.html"><img alt="Erlang Logo" src="../../erlang-logo.png" class="erlang-logo"></a></div>
<p class="section-title">Megaco/H.248</p>
<p class="section-subtitle">User's Guide</p>
<p class="section-version">Version 3.18.4</p>
<ul class="panel-sections">
<li><a href="users_guide.html">User's Guide</a></li>
<li><a href="index.html">Reference Manual</a></li>
<li><a href="release_notes.html">Release Notes</a></li>
<li><a href="megaco.pdf">PDF</a></li>
<li><a href="../../index.html">Top</a></li>
</ul>
<ul class="expand-collapse-items">
<li><a href="javascript:openAllFlips()">Expand All</a></li>
<li><a href="javascript:closeAllFlips()">Contract All</a></li>
</ul>
<h3>Chapters</h3>
<ul class="flipMenu" imagePath="../../js/flipmenu">
<li id="no" title="Introduction" expanded="false">Introduction<ul>
<li><a href="megaco_intro.html">
              Top of chapter
            </a></li>
<li title="Scope and Purpose"><a href="megaco_intro.html#scope-and-purpose">Scope and Purpose</a></li>
<li title="Prerequisites"><a href="megaco_intro.html#prerequisites">Prerequisites</a></li>
<li title="About This Manual"><a href="megaco_intro.html#about-this-manual">About This Manual</a></li>
<li title="Where to Find More Information"><a href="megaco_intro.html#where-to-find-more-information">Where to Find More Information</a></li>
</ul>
</li>
<li id="no" title="Architecture" expanded="false">Architecture<ul>
<li><a href="megaco_architecture.html">
              Top of chapter
            </a></li>
<li title="Network view"><a href="megaco_architecture.html#network-view">Network view</a></li>
<li title="General"><a href="megaco_architecture.html#general">General</a></li>
<li title="Single node config"><a href="megaco_architecture.html#single-node-config">Single node config</a></li>
<li title="Distributed config"><a href="megaco_architecture.html#distributed-config">Distributed config</a></li>
<li title="Message round-trip call flow"><a href="megaco_architecture.html#message-round-trip-call-flow">Message round-trip call flow</a></li>
</ul>
</li>
<li id="no" title="Running the stack" expanded="false">Running the stack<ul>
<li><a href="megaco_run.html">
              Top of chapter
            </a></li>
<li title="Starting"><a href="megaco_run.html#starting">Starting</a></li>
<li title="MGC startup call flow"><a href="megaco_run.html#mgc-startup-call-flow">MGC startup call flow</a></li>
<li title="MG startup call flow"><a href="megaco_run.html#mg-startup-call-flow">MG startup call flow</a></li>
<li title="Configuring the Megaco stack"><a href="megaco_run.html#configuring-the-megaco-stack">Configuring the Megaco stack</a></li>
<li title="Initial configuration"><a href="megaco_run.html#initial-configuration">Initial configuration</a></li>
<li title="Changing the configuration"><a href="megaco_run.html#changing-the-configuration">Changing the configuration</a></li>
<li title="The transaction sender"><a href="megaco_run.html#the-transaction-sender">The transaction sender</a></li>
<li title="Segmentation of transaction replies"><a href="megaco_run.html#segmentation-of-transaction-replies">Segmentation of transaction replies</a></li>
</ul>
</li>
<li id="no" title="Internal form and its encodings" expanded="false">Internal form and its encodings<ul>
<li><a href="megaco_encode.html">
              Top of chapter
            </a></li>
<li title="Internal form of messages"><a href="megaco_encode.html#internal-form-of-messages">Internal form of messages</a></li>
<li title="The different encodings"><a href="megaco_encode.html#the-different-encodings">The different encodings</a></li>
<li title="Configuration of Erlang distribution encoding module"><a href="megaco_encode.html#configuration-of-erlang-distribution-encoding-module">Configuration of Erlang distribution encoding module</a></li>
<li title="Configuration of text encoding module(s)"><a href="megaco_encode.html#configuration-of-text-encoding-module-s-">Configuration of text encoding module(s)</a></li>
<li title="Configuration of binary encoding module(s)"><a href="megaco_encode.html#configuration-of-binary-encoding-module-s-">Configuration of binary encoding module(s)</a></li>
<li title="Handling megaco versions"><a href="megaco_encode.html#handling-megaco-versions">Handling megaco versions</a></li>
<li title="Encoder callback functions"><a href="megaco_encode.html#encoder-callback-functions">Encoder callback functions</a></li>
</ul>
</li>
<li id="no" title="Transport mechanisms" expanded="false">Transport mechanisms<ul>
<li><a href="megaco_transport_mechanisms.html">
              Top of chapter
            </a></li>
<li title="Callback interface"><a href="megaco_transport_mechanisms.html#callback-interface">Callback interface</a></li>
<li title="Examples"><a href="megaco_transport_mechanisms.html#examples">Examples</a></li>
</ul>
</li>
<li id="loadscrollpos" title="Implementation examples" expanded="true">Implementation examples<ul>
<li><a href="megaco_examples.html">
              Top of chapter
            </a></li>
<li title="A simple Media Gateway Controller"><a href="megaco_examples.html#a-simple-media-gateway-controller">A simple Media Gateway Controller</a></li>
<li title="A simple Media Gateway"><a href="megaco_examples.html#a-simple-media-gateway">A simple Media Gateway</a></li>
</ul>
</li>
<li id="no" title="Megaco mib" expanded="false">Megaco mib<ul>
<li><a href="megaco_mib.html">
              Top of chapter
            </a></li>
<li title="Intro"><a href="megaco_mib.html#intro">Intro</a></li>
<li title="Statistics counters"><a href="megaco_mib.html#statistics-counters">Statistics counters</a></li>
<li title="Distribution"><a href="megaco_mib.html#distribution">Distribution</a></li>
</ul>
</li>
<li id="no" title="Performance comparison" expanded="false">Performance comparison<ul>
<li><a href="megaco_performance.html">
              Top of chapter
            </a></li>
<li title="Comparison of encoder/decoders"><a href="megaco_performance.html#comparison-of-encoder-decoders">Comparison of encoder/decoders</a></li>
<li title="System performance characteristics"><a href="megaco_performance.html#system-performance-characteristics">System performance characteristics</a></li>
<li title="Description of encoders/decoders"><a href="megaco_performance.html#description-of-encoders-decoders">Description of encoders/decoders</a></li>
<li title="Setup"><a href="megaco_performance.html#setup">Setup</a></li>
<li title="Summary"><a href="megaco_performance.html#summary">Summary</a></li>
</ul>
</li>
<li id="no" title="Testing and tools" expanded="false">Testing and tools<ul>
<li><a href="megaco_debug.html">
              Top of chapter
            </a></li>
<li title="Tracing"><a href="megaco_debug.html#tracing">Tracing</a></li>
<li title="Measurement and transformation"><a href="megaco_debug.html#measurement-and-transformation">Measurement and transformation</a></li>
</ul>
</li>
</ul>
</div></div>
<div id="content">
<div class="innertube">
<h1>6 Implementation examples</h1>
  

  <h3><span onMouseOver="document.getElementById('ghlink-a-simple-media-gateway-controller-idm650').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-a-simple-media-gateway-controller-idm650').style.visibility = 'hidden';"><span id="ghlink-a-simple-media-gateway-controller-idm650" class="ghlink"><a href="https://github.com/erlang/otp/edit/maint/lib/megaco/doc/src/megaco_examples.xml#L36" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil"></span></a></span><a class="title_link" name="a-simple-media-gateway-controller" href="#a-simple-media-gateway-controller">6.1 
          A simple Media Gateway Controller</a></span></h3>
    
    <p>In megaco/examples/simple/megaco_simple_mgc.erl there is an
      example of a simple MGC that listens on both text and binary
      standard ports and is prepared to handle a Service Change
      Request message to arrive either via TCP/IP or UDP/IP. Messages
      received on the text port are decoded using a text decoder and
      messages received on the binary port are decoded using a binary
      decoder.</p>
    <p>The Service Change Reply is encoded in the same way as the
      request and sent back to the MG with the same transport
      mechanism UDP/IP or TCP/IP.</p>
    <p>After this initial service change message the connection
      between the MG and MGC is fully established and supervised.</p>
    <p>The MGC, with its four listeners, may be started with:</p>
    <div class="example"><pre>
      cd megaco/examples/simple
      erl -pa ../../../megaco/ebin -s megaco_filter -s megaco
      megaco_simple_mgc:start().
    </pre></div>
    <p>or simply 'gmake mgc'.</p>
    <p>The -s megaco_filter option to erl implies, the event tracing
      mechanism to be enabled and an interactive sequence chart tool
      to be started. This may be quite useful in order to visualize
      how your MGC interacts with the Megaco/H.248 protocol stack.</p>
    <p>The event traces may alternatively be directed to a file for
      later analyze. By default the event tracing is disabled, but it
      may dynamically be enabled without any need for re-compilation
      of the code.
      </p>
  

  <h3><span onMouseOver="document.getElementById('ghlink-a-simple-media-gateway-idm660').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-a-simple-media-gateway-idm660').style.visibility = 'hidden';"><span id="ghlink-a-simple-media-gateway-idm660" class="ghlink"><a href="https://github.com/erlang/otp/edit/maint/lib/megaco/doc/src/megaco_examples.xml#L68" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil"></span></a></span><a class="title_link" name="a-simple-media-gateway" href="#a-simple-media-gateway">6.2 
          A simple Media Gateway</a></span></h3>
    
    <p>In megaco/examples/simple/megaco_simple_mg.erl there is an
      example of a simple MG that connects to an MGC, sends a Service
      Change Request and waits synchronously for a reply.</p>
    <p>After this initial service change message the connection
      between the MG and MGC is fully established and supervised.</p>
    <p>Assuming that the MGC is started on the local host, four
      different MG's, using text over TCP/IP, binary over TCP/IP, text
      over UDP/IP and binary over UDP/IP may be started on the same
      Erlang node with:</p>
    <div class="example"><pre>
      cd megaco/examples/simple
      erl -pa ../../../megaco/ebin -s megaco_filter -s megaco
      megaco_simple_mg:start().
    </pre></div>
    <p>or simply 'gmake mg'.</p>
    <p>If you "only" want to start a single MG which tries to connect
      an MG on a host named "baidarka", you may use one of these
      functions (instead of the megaco_simple_mg:start/0 above):</p>
    <div class="example"><pre>
      megaco_simple_mg:start_tcp_text("baidarka", []).
      megaco_simple_mg:start_tcp_binary("baidarka", []).
      megaco_simple_mg:start_udp_text("baidarka", []).
      megaco_simple_mg:start_udp_binary("baidarka", []).
    </pre></div>
    <p>The -s megaco_filter option to erl implies, the event tracing
      mechanism to be enabled and an interactive sequence chart tool
      to be started. This may be quite useful in order to visualize
      how your MG interacts with the Megaco/H.248 protocol stack.</p>
    <p>The event traces may alternatively be directed to a file for
      later analyze. By default the event tracing is disabled, but it
      may dynamically be enabled without any need for re-compilation
      of the code.
      </p>
  
</div>
<div class="footer">
<hr>
<p>Copyright © 2000-2021 Ericsson AB. All Rights Reserved.</p>
</div>
</div>
</div>
<script type="text/javascript">window.__otpTopDocDir = '../../js/';</script><script type="text/javascript" src="../../js/highlight.js"></script>
</body>
</html>
