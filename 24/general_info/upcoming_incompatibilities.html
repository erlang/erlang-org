<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html xmlns:erl="http://erlang.org" xmlns:fn="http://www.w3.org/2005/02/xpath-functions">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="utf-8">
<link rel="stylesheet" href="../otp_doc.css" type="text/css">
<meta name="major-vsn" content="24">
<title>Erlang -- Upcoming Potential Incompatibilities</title>
</head>
<body>
<div id="container">
<script id="js" type="text/javascript" language="JavaScript" src="../js/flipmenu/flipmenu.js"></script><script id="js2" type="text/javascript" src="../js/erlresolvelinks.js"></script><script id="js3" type="text/javascript" src="../js/topbar.js"></script><script language="JavaScript" type="text/javascript">
            <!--
              function setscrollpos() {
                var objf = document.getElementById('loadscrollpos');
                if (objf) {
                  document.getElementById("leftnav").firstChild.scrollTop = objf.offsetTop - 10;
                }
              }

              function addEvent(obj, evType, fn){
                if (obj.addEventListener){
                obj.addEventListener(evType, fn, true);
                return true;
              } else if (obj.attachEvent){
                var r = obj.attachEvent("on"+evType, fn);
                return r;
              } else {
                return false;
              }
             }

             addEvent(window, 'load', setscrollpos);

             //-->
</script><div class="topbar">
<div class="topbar-expand "><button onclick="toggleDisplay();"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="Capa_1" viewBox="0 0 54 54" width="24" height="24"><g><path style="fill:#000000;" d="M27,54c-0.552,0-1-0.448-1-1V8c0-0.552,0.448-1,1-1s1,0.448,1,1v45C28,53.552,27.552,54,27,54z"></path><path style="fill:#000000;" d="M11,25c-0.256,0-0.512-0.098-0.707-0.293c-0.391-0.391-0.391-1.023,0-1.414l16-16                                      c0.391-0.391,1.023-0.391,1.414,0s0.391,1.023,0,1.414l-16,16C11.512,24.902,11.256,25,11,25z"></path><path style="fill:#000000;" d="M43,25c-0.256,0-0.512-0.098-0.707-0.293l-16-16c-0.391-0.391-0.391-1.023,0-1.414                                      s1.023-0.391,1.414,0l16,16c0.391,0.391,0.391,1.023,0,1.414C43.512,24.902,43.256,25,43,25z"></path><path style="fill:#000000;" d="M43,2H11c-0.552,0-1-0.448-1-1s0.448-1,1-1h32c0.552,0,1,0.448,1,1S43.552,2,43,2z"></path></g></svg></button></div>
<div class="topbar-title"><h1 id="Upcoming Potential Incompatibilities">4 
                Upcoming Potential Incompatibilities</h1></div>
<div class="search-expand ">        <button id="docsearch-mobile">
            <svg fill="#000000" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 50 50" width="24" height="24"><path d="M 21 3 C 11.621094 3 4 10.621094 4 20 C 4 29.378906 11.621094 37 21 37 C 24.710938 37 28.140625 35.804688 30.9375 33.78125 L 44.09375 46.90625 L 46.90625 44.09375 L 33.90625 31.0625 C 36.460938 28.085938 38 24.222656 38 20 C 38 10.621094 30.378906 3 21 3 Z M 21 5 C 29.296875 5 36 11.703125 36 20 C 36 28.296875 29.296875 35 21 35 C 12.703125 35 6 28.296875 6 20 C 6 11.703125 12.703125 5 21 5 Z"/></svg>
        </button>
</div>
</div>
<aside class="hide-mobile" id="leftnav"><nav class="leftnav-tube"><div class="erlang-logo-wrapper"><a href="../index.html"><img alt="Erlang Logo" src="../erlang-logo.png" class="erlang-logo"></a></div>
<p class="section-title">General Information</p>
<p class="section-subtitle">User's Guide</p>
<p class="section-version">Version 12.3.2.17</p>
<ul class="panel-sections">
<li><a href="users_guide.html">User's Guide</a></li>
<li><a href="../pdf/otp-system-documentation.pdf">PDF</a></li>
<li><a href="../index.html">Top</a></li>
</ul>
<div id="docsearch"></div>
<div style="padding-left: 1rem; padding-top: 0.1rem;"><a href="/doc/search?v=24">Paginated Search</a></div>
<ul class="expand-collapse-items">
<li><a href="javascript:openAllFlips()">Expand All</a></li>
<li><a href="javascript:closeAllFlips()">Contract All</a></li>
</ul>
<h3 id="chapters">Chapters</h3>
<ul class="flipMenu" imagePath="../js/flipmenu">
<li id="no" title="Deprecations" expanded="false">Deprecations<ul>
<li><a href="deprecations.html">
              Top of chapter
            </a></li>
<li title="Introduction"><a href="deprecations.html#introduction">Introduction</a></li>
<li title="OTP 24"><a href="deprecations.html#otp-24">OTP 24</a></li>
<li title="OTP 23"><a href="deprecations.html#otp-23">OTP 23</a></li>
<li title="OTP 22"><a href="deprecations.html#otp-22">OTP 22</a></li>
<li title="OTP 20"><a href="deprecations.html#otp-20">OTP 20</a></li>
<li title="OTP 19"><a href="deprecations.html#otp-19">OTP 19</a></li>
<li title="OTP 18"><a href="deprecations.html#otp-18">OTP 18</a></li>
<li title="OTP 16"><a href="deprecations.html#otp-16">OTP 16</a></li>
<li title="OTP 12"><a href="deprecations.html#otp-12">OTP 12</a></li>
</ul>
</li>
<li id="no" title="Removed Functionality" expanded="false">Removed Functionality<ul>
<li><a href="removed.html">
              Top of chapter
            </a></li>
<li title="Introduction"><a href="removed.html#introduction">Introduction</a></li>
<li title="OTP 24"><a href="removed.html#otp-24">OTP 24</a></li>
<li title="OTP 23"><a href="removed.html#otp-23">OTP 23</a></li>
<li title="OTP 22"><a href="removed.html#otp-22">OTP 22</a></li>
<li title="OTP 20"><a href="removed.html#otp-20">OTP 20</a></li>
<li title="OTP 19"><a href="removed.html#otp-19">OTP 19</a></li>
</ul>
</li>
<li id="no" title="Scheduled for Removal" expanded="false">Scheduled for Removal<ul>
<li><a href="scheduled_for_removal.html">
              Top of chapter
            </a></li>
<li title="Introduction"><a href="scheduled_for_removal.html#introduction">Introduction</a></li>
<li title="OTP 27"><a href="scheduled_for_removal.html#otp-27">OTP 27</a></li>
<li title="OTP 26"><a href="scheduled_for_removal.html#otp-26">OTP 26</a></li>
<li title="OTP 25"><a href="scheduled_for_removal.html#otp-25">OTP 25</a></li>
</ul>
</li>
<li id="loadscrollpos" title="Upcoming Potential Incompatibilities" expanded="true">Upcoming Potential Incompatibilities<ul>
<li><a href="upcoming_incompatibilities.html">
              Top of chapter
            </a></li>
<li title="Introduction"><a href="upcoming_incompatibilities.html#introduction">Introduction</a></li>
<li title="OTP 25"><a href="upcoming_incompatibilities.html#otp-25">OTP 25</a></li>
<li title="OTP 26"><a href="upcoming_incompatibilities.html#otp-26">OTP 26</a></li>
</ul>
</li>
</ul></nav></aside><div id="content">
<div class="innertube">
<h1 id="Upcoming Potential Incompatibilities">4 Upcoming Potential Incompatibilities</h1>
  
  <h3 id="introduction" class="title-link" onMouseOver="document.getElementById('ghlink-introduction-idm759').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-introduction-idm759').style.visibility = 'hidden';">
<div class="title-name">4.1 
        Introduction</div>
<div class="title-anchors"><span id="ghlink-introduction-idm759" class="ghlink-after"><a href="#introduction" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/general_info/upcoming_incompatibilities.xml#L32" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    <p>This document lists planned upcoming potential incompatibilities in
    Erlang/OTP.</p>
  

  <h3 id="otp-25" class="title-link" onMouseOver="document.getElementById('ghlink-otp-25-idm762').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-otp-25-idm762').style.visibility = 'hidden';">
<div class="title-name">4.2 
        OTP 25</div>
<div class="title-anchors"><span id="ghlink-otp-25-idm762" class="ghlink-after"><a href="#otp-25" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/general_info/upcoming_incompatibilities.xml#L38" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    <h4 id="distribution-flags-will-become-mandatory" class="title-link" onMouseOver="document.getElementById('ghlink-distribution-flags-will-become-mandatory-idm764').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-distribution-flags-will-become-mandatory-idm764').style.visibility = 'hidden';">
<div class="title-name">Distribution flags will become mandatory</div>
<div class="title-anchors"><span id="ghlink-distribution-flags-will-become-mandatory-idm764" class="ghlink-after"><a href="#distribution-flags-will-become-mandatory" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/general_info/upcoming_incompatibilities.xml#L40" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h4>
      
      <p>In OTP 25, more <span class="bold_code bc-13"><a href="../apps/erts/erl_dist_protocol.html#dflags">distribution
      flags</a></span> will become mandatory. That is, Erlang nodes
      will refuse to connect to nodes not implementing all of the
      mandatory distribution flags. If you implement the Erlang
      distribution protocol yourself, you will need to implement
      support for all mandatory distribution flags in order to
      communicate with Erlang nodes running OTP 25.</p>
      <p>The following distribution flags will become mandatory in OTP
      25:</p>
      <dl>
        <dt><strong><span class="code">DFLAG_BIT_BINARIES</span></strong></dt>
        <dd>Support for bitstrings.</dd>
        <dt><strong><span class="code">DFLAG_EXPORT_PTR_TAG</span></strong></dt>
        <dd>Support for external funs (<span class="code">fun Module:Name/Arity</span>).</dd>
        <dt><strong><span class="code">DFLAG_MAP_TAGS</span></strong></dt>
        <dd>Support for maps.</dd>
        <dt><strong><span class="code">DFLAG_NEW_FLOATS</span></strong></dt>
        <dd>Support for the new encoding of floats.</dd>
        <dt><strong><span class="code">DFLAG_FUN_TAGS</span></strong></dt>
        <dd>Support for funs, but only in the new format
        (<span class="code">NEW_FUN_EXT</span>) because <span class="code">DFLAG_NEW_FUN_TAGS</span> is also
        mandatory.</dd>
      </dl>
    
  

  <h3 id="otp-26" class="title-link" onMouseOver="document.getElementById('ghlink-otp-26-idm788').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-otp-26-idm788').style.visibility = 'hidden';">
<div class="title-name">4.3 
        OTP 26</div>
<div class="title-anchors"><span id="ghlink-otp-26-idm788" class="ghlink-after"><a href="#otp-26" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/general_info/upcoming_incompatibilities.xml#L69" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    <h4 id="the-distribution-flag-dflag_v4_nc-will-become-mandatory" class="title-link" onMouseOver="document.getElementById('ghlink-the-distribution-flag-dflag_v4_nc-will-become-mandatory-idm790').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-the-distribution-flag-dflag_v4_nc-will-become-mandatory-idm790').style.visibility = 'hidden';">
<div class="title-name">The distribution flag DFLAG_V4_NC will become mandatory</div>
<div class="title-anchors"><span id="ghlink-the-distribution-flag-dflag_v4_nc-will-become-mandatory-idm790" class="ghlink-after"><a href="#the-distribution-flag-dflag_v4_nc-will-become-mandatory" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/general_info/upcoming_incompatibilities.xml#L71" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h4>
      
      <p>As of OTP 26, the distribution flag <span class="bold_code bc-13"><a href="../apps/erts/erl_dist_protocol.html#DFLAG_V4_NC">DFLAG_V4_NC</a></span>
      will become mandatory. If you implement the Erlang distribution
      protocol yourself, you will need to implement support for
      <span class="code">DFLAG_V4_NC</span> in order to communicate with Erlang nodes
      running OTP 26.</p>
    

    <h4 id="the-new-link-protocol-will-become-mandatory" class="title-link" onMouseOver="document.getElementById('ghlink-the-new-link-protocol-will-become-mandatory-idm795').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-the-new-link-protocol-will-become-mandatory-idm795').style.visibility = 'hidden';">
<div class="title-name">The new link protocol will become mandatory</div>
<div class="title-anchors"><span id="ghlink-the-new-link-protocol-will-become-mandatory-idm795" class="ghlink-after"><a href="#the-new-link-protocol-will-become-mandatory" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/general_info/upcoming_incompatibilities.xml#L81" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h4>
      
      <p>
	As of OTP 26, the <span class="bold_code bc-13"><a href="../apps/erts/erl_dist_protocol.html#new_link_protocol">new link
	protocol</a></span> will become mandatory. That is, Erlang
	nodes will then refuse to connect to nodes not implementing
	the new link protocol. If you implement the Erlang
	distribution yourself, you are, however, encouraged to
	implement the new link protocol as soon as possible since the
	old protocol can cause links to enter an inconsistent state.
      </p>
    

    <a name="atoms_be_utf8"></a><h4 id="atoms-will-be-encoded-as-utf-8-by-default" class="title-link" onMouseOver="document.getElementById('ghlink-atoms-will-be-encoded-as-utf-8-by-default-idm799').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-atoms-will-be-encoded-as-utf-8-by-default-idm799').style.visibility = 'hidden';">
<div class="title-name">Atoms will be encoded as UTF-8 by default</div>
<div class="title-anchors"><span id="ghlink-atoms-will-be-encoded-as-utf-8-by-default-idm799" class="ghlink-after"><a href="#atoms-will-be-encoded-as-utf-8-by-default" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/general_info/upcoming_incompatibilities.xml#L95" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h4>
      
      
      <p>
	As of OTP 26, the functions
        <span class="bold_code bc-13"><a href="../man/erlang.html#term_to_binary-1">
        <span class="code">erlang:term_to_binary/1,2</span></a></span> and
        <span class="bold_code bc-13"><a href="../man/erlang.html#term_to_iovec-1">
        <span class="code">erlang:term_to_iovec/1,2</span></a></span> will encode all atoms as
        UTF-8 by default. The current default behavior is to encode atoms as
        Latin-1 if possible.
      </p>
      <p>
	If you implement your own decoding of the Erlang external format you
        must either:
      </p>
      <ul>
        <li>
          <p>
            Make sure your implementation supports the UTF-8 encodings
            <span class="bold_code bc-13"><a href="../apps/erts/erl_ext_dist.html#ATOM_UTF8_EXT">
              <span class="code">ATOM_UTF8_EXT</span></a></span> and
            <span class="bold_code bc-13"><a href="../apps/erts/erl_ext_dist.html#SMALL_ATOM_UTF8_EXT">
              <span class="code">SMALL_ATOM_UTF8_EXT</span></a></span>.
          </p>
        </li>
        <li>
          <p>
            Call <span class="bold_code bc-13"><a href="../man/erlang.html#term_to_binary-2">
            <span class="code">erlang:term_to_binary/2</span></a></span> or
            <span class="bold_code bc-13"><a href="../man/erlang.html#term_to_iovec-2">
            <span class="code">erlang:term_to_iovec/2</span></a></span>
            with option <span class="code">{minor_version,1}</span> to force Latin-1 encoding. This
            is a more short-term solution as Latin-1 encoding may be phased out
            and removed in later OTP releases.
          </p>
        </li>
      </ul>
    

  
</div>
<div class="footer">
<hr>
<p>Copyright © 2019-2024 Ericsson AB. All Rights Reserved.</p>
</div>
</div>
</div>
<script type="text/javascript">window.__otpTopDocDir = '../js/';</script><script type="text/javascript" src="../js/highlight.js"></script>
<script type="text/javascript">
_docsearch_version = "24";
</script> 
<script src="/assets/js/doc-search.bundle.js"></script>
</body>
</html>
