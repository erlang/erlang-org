<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html xmlns:erl="http://erlang.org" xmlns:fn="http://www.w3.org/2005/02/xpath-functions">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="utf-8">
<link rel="stylesheet" href="../../otp_doc.css" type="text/css">
<meta name="major-vsn" content="24">
<title>Erlang -- Configuration in SSH</title>
</head>
<body>
<div id="container">
<script id="js" type="text/javascript" language="JavaScript" src="../../js/flipmenu/flipmenu.js"></script><script id="js2" type="text/javascript" src="../../js/erlresolvelinks.js"></script><script id="js3" type="text/javascript" src="../../../../doc/js/topbar.js"></script><script language="JavaScript" type="text/javascript">
            <!--
              function setscrollpos() {
                var objf = document.getElementById('loadscrollpos');
                if (objf) {
                  document.getElementById("leftnav").firstChild.scrollTop = objf.offsetTop - 10;
                }
              }

              function addEvent(obj, evType, fn){
                if (obj.addEventListener){
                obj.addEventListener(evType, fn, true);
                return true;
              } else if (obj.attachEvent){
                var r = obj.attachEvent("on"+evType, fn);
                return r;
              } else {
                return false;
              }
             }

             addEvent(window, 'load', setscrollpos);

             //-->
</script><div class="topbar">
<div class="topbar-expand "><button onclick="toggleDisplay();"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="Capa_1" viewBox="0 0 54 54" width="24" height="24"><g><path style="fill:#000000;" d="M27,54c-0.552,0-1-0.448-1-1V8c0-0.552,0.448-1,1-1s1,0.448,1,1v45C28,53.552,27.552,54,27,54z"></path><path style="fill:#000000;" d="M11,25c-0.256,0-0.512-0.098-0.707-0.293c-0.391-0.391-0.391-1.023,0-1.414l16-16                                      c0.391-0.391,1.023-0.391,1.414,0s0.391,1.023,0,1.414l-16,16C11.512,24.902,11.256,25,11,25z"></path><path style="fill:#000000;" d="M43,25c-0.256,0-0.512-0.098-0.707-0.293l-16-16c-0.391-0.391-0.391-1.023,0-1.414                                      s1.023-0.391,1.414,0l16,16c0.391,0.391,0.391,1.023,0,1.414C43.512,24.902,43.256,25,43,25z"></path><path style="fill:#000000;" d="M43,2H11c-0.552,0-1-0.448-1-1s0.448-1,1-1h32c0.552,0,1,0.448,1,1S43.552,2,43,2z"></path></g></svg></button></div>
<div class="topbar-title"><h1 id="Configuration in SSH">4 
                Configuration in SSH</h1></div>
<div class="search-expand ">        <button id="docsearch-mobile">
            <svg fill="#000000" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 50 50" width="24" height="24"><path d="M 21 3 C 11.621094 3 4 10.621094 4 20 C 4 29.378906 11.621094 37 21 37 C 24.710938 37 28.140625 35.804688 30.9375 33.78125 L 44.09375 46.90625 L 46.90625 44.09375 L 33.90625 31.0625 C 36.460938 28.085938 38 24.222656 38 20 C 38 10.621094 30.378906 3 21 3 Z M 21 5 C 29.296875 5 36 11.703125 36 20 C 36 28.296875 29.296875 35 21 35 C 12.703125 35 6 28.296875 6 20 C 6 11.703125 12.703125 5 21 5 Z"/></svg>
        </button>
</div>
</div>
<aside class="hide-mobile" id="leftnav"><nav class="leftnav-tube"><div class="erlang-logo-wrapper"><a href="../../index.html"><img alt="Erlang Logo" src="../../erlang-logo.png" class="erlang-logo"></a></div>
<p class="section-title">SSH</p>
<p class="section-subtitle">User's Guide</p>
<p class="section-version">Version 4.13.2.6</p>
<ul class="panel-sections">
<li><a href="users_guide.html">User's Guide</a></li>
<li><a href="index.html">Reference Manual</a></li>
<li><a href="notes.html">Release Notes</a></li>
<li><a href="ssh.pdf">PDF</a></li>
<li><a href="../../index.html">Top</a></li>
</ul>
<div id="docsearch"></div>
<div style="padding-left: 1rem; padding-top: 0.1rem;"><a href="/doc/search?v=24">Paginated Search</a></div>
<ul class="expand-collapse-items">
<li><a href="javascript:openAllFlips()">Expand All</a></li>
<li><a href="javascript:closeAllFlips()">Contract All</a></li>
</ul>
<h3 id="chapters">Chapters</h3>
<ul class="flipMenu" imagePath="../../js/flipmenu">
<li id="no" title="Introduction" expanded="false">Introduction<ul>
<li><a href="introduction.html">
              Top of chapter
            </a></li>
<li title="Scope and Purpose"><a href="introduction.html#scope-and-purpose">Scope and Purpose</a></li>
<li title="Prerequisites"><a href="introduction.html#prerequisites">Prerequisites</a></li>
<li title="SSH Protocol Overview"><a href="introduction.html#ssh-protocol-overview">SSH Protocol Overview</a></li>
<li title="Where to Find More Information"><a href="introduction.html#where-to-find-more-information">Where to Find More Information</a></li>
</ul>
</li>
<li id="no" title="Getting Started" expanded="false">Getting Started<ul>
<li><a href="using_ssh.html">
              Top of chapter
            </a></li>
<li title="General Information"><a href="using_ssh.html#general-information">General Information</a></li>
<li title="Using the Erlang ssh Terminal Client"><a href="using_ssh.html#using-the-erlang-ssh-terminal-client">Using the Erlang ssh Terminal Client</a></li>
<li title="Running an Erlang ssh Daemon"><a href="using_ssh.html#running-an-erlang-ssh-daemon">Running an Erlang ssh Daemon</a></li>
<li title="One-Time Execution"><a href="using_ssh.html#one-time-execution">One-Time Execution</a></li>
<li title="SFTP Server"><a href="using_ssh.html#sftp-server">SFTP Server</a></li>
<li title="SFTP Client"><a href="using_ssh.html#sftp-client">SFTP Client</a></li>
<li title="SFTP Client with TAR Compression"><a href="using_ssh.html#sftp-client-with-tar-compression">SFTP Client with TAR Compression</a></li>
<li title="Creating a Subsystem"><a href="using_ssh.html#creating-a-subsystem">Creating a Subsystem</a></li>
</ul>
</li>
<li id="no" title="Terminology" expanded="false">Terminology<ul>
<li><a href="terminology.html">
              Top of chapter
            </a></li>
<li title="General Information"><a href="terminology.html#general-information">General Information</a></li>
<li title='The term "user"'><a href="terminology.html#the-term--user-">The term "user"</a></li>
</ul>
</li>
<li id="loadscrollpos" title="Configuration in SSH" expanded="true">Configuration in SSH<ul>
<li><a href="configurations.html">
              Top of chapter
            </a></li>
<li title="Introduction"><a href="configurations.html#introduction">Introduction</a></li>
<li title="Options configuration"><a href="configurations.html#options-configuration">Options configuration</a></li>
<li title="Precedens"><a href="configurations.html#precedens">Precedens</a></li>
</ul>
</li>
<li id="no" title="Configuring algorithms in SSH" expanded="false">Configuring algorithms in SSH<ul>
<li><a href="configure_algos.html">
              Top of chapter
            </a></li>
<li title="Introduction"><a href="configure_algos.html#introduction">Introduction</a></li>
<li title="Replacing the default set: preferred_algorithms"><a href="configure_algos.html#replacing-the-default-set--preferred_algorithms">Replacing the default set: preferred_algorithms</a></li>
<li title="Modifying the default set: modify_algorithms"><a href="configure_algos.html#modifying-the-default-set--modify_algorithms">Modifying the default set: modify_algorithms</a></li>
</ul>
</li>
<li id="no" title="Hardening" expanded="false">Hardening<ul>
<li><a href="hardening.html">
              Top of chapter
            </a></li>
<li title="Introduction"><a href="hardening.html#introduction">Introduction</a></li>
<li title="Resilience to DoS attacks"><a href="hardening.html#resilience-to-dos-attacks">Resilience to DoS attacks</a></li>
<li title="Verifying the remote daemon (server) in an SSH client"><a href="hardening.html#verifying-the-remote-daemon--server--in-an-ssh-client">Verifying the remote daemon (server) in an SSH client</a></li>
<li title="Verifying the remote client in a daemon (server)"><a href="hardening.html#verifying-the-remote-client-in-a-daemon--server-">Verifying the remote client in a daemon (server)</a></li>
<li title="Hardening in the cryptographic area"><a href="hardening.html#hardening-in-the-cryptographic-area">Hardening in the cryptographic area</a></li>
<li title="Hardening of the SSH protocol - both daemons and clients"><a href="hardening.html#hardening-of-the-ssh-protocol---both-daemons-and-clients">Hardening of the SSH protocol - both daemons and clients</a></li>
<li title="Client connection options"><a href="hardening.html#client-connection-options">Client connection options</a></li>
</ul>
</li>
</ul></nav></aside><div id="content">
<div class="innertube">
<h1 id="Configuration in SSH">4 Configuration in SSH</h1>
  

  <a name="introduction"></a><h3 id="introduction" class="title-link" onMouseOver="document.getElementById('ghlink-introduction-idm536').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-introduction-idm536').style.visibility = 'hidden';">
<div class="title-name">4.1 
        Introduction</div>
<div class="title-anchors"><span id="ghlink-introduction-idm536" class="ghlink-after"><a href="#introduction" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/lib/ssh/doc/src/configurations.xml#L34" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    
    <p>The OTP SSH app can be configurated by a large amount of <i>Options</i>. This chapter will not go into
    details of what each of the options does. It will however describe and define different ways by which they
    could be entered.
    </p>
    <p>Options for hardening are described in the <span class="bold_code bc-19"><a href="hardening.html">Hardening SSH</a></span> chapter.
    How the options for algorithm configuration interact are described in the
    <span class="bold_code bc-19"><a href="configure_algos.html">Configuring algorithms in SSH</a></span> chapter.
    </p>
  

  <h3 id="options-configuration" class="title-link" onMouseOver="document.getElementById('ghlink-options-configuration-idm544').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-options-configuration-idm544').style.visibility = 'hidden';">
<div class="title-name">4.2 
        Options configuration</div>
<div class="title-anchors"><span id="ghlink-options-configuration-idm544" class="ghlink-after"><a href="#options-configuration" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/lib/ssh/doc/src/configurations.xml#L47" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    <p>There are from OTP-23.0 two main ways to set an option:
    </p>
    <ul>
      <li>Like before, in the <span class="code">Options</span> parameter in the Erlang code
      in a call to for example
      <span class="bold_code bc-15"><a href="../../man/ssh.html#daemon-3">ssh:daemon/3</a></span> or
      <span class="bold_code bc-15"><a href="../../man/ssh.html#connect-3">ssh:connect/3</a></span> or
      any of their variants. Example:
      <div class="example example-none"><pre>ssh:connect(22, [{user,"foo"}])</pre></div>
      </li>

      <li>In <span class="bold_code bc-18"><a href="../../man/config.html">OTP Configuration Parameters</a></span>:
      <p></p>
      <ul>
      <li>In the erl command line:
      <div class="example"><pre>erl -ssh user \"foo\"</pre></div>
      </li>
      <li>In the <span class="code">ssh.app</span> file, in the <span class="code">env</span> part
      <div class="example example-none"><pre>{application, ssh,
 [{description, "SSH-2 for Erlang/OTP"},
  {vsn, "4.9"},
  {modules, [ssh,
        ...
	     ssh_xfer]},
  {registered, []},
  {applications, [kernel, stdlib, crypto, public_key]},
  {env, [{user, "bar"]}, % &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; HERE
  {mod, {ssh_app, []}},
       ...       </pre></div>
      </li>
      <li>In a .config file:
      <div class="example"><pre>erl -config ex1</pre></div>
      where <span class="code">ex1.config</span> contains:
      <div class="example example-none"><pre>[
{ssh, [{user, "foo"}]}
].</pre></div>
      </li>
      </ul>
    <p>If the option is intended only for a server or for a client, it may be set in this way:
    </p>
    <div class="example example-none"><pre>[
{ssh, [{server_options,[{user, "foo"}]},
       {client_options,[{user, "bar"}]}
].</pre></div>
    <p>A server (daemon) will use the user name <span class="code">foo</span>, and a client will use the name <span class="code">bar</span>.</p>
      </li>
    </ul>
  

  <h3 id="precedens" class="title-link" onMouseOver="document.getElementById('ghlink-precedens-idm572').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-precedens-idm572').style.visibility = 'hidden';">
<div class="title-name">4.3 
        Precedens</div>
<div class="title-anchors"><span id="ghlink-precedens-idm572" class="ghlink-after"><a href="#precedens" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/lib/ssh/doc/src/configurations.xml#L102" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    <p>If an option is set in more than one way, what happens?</p>
    <p>There is an ordering, which is:
    </p>
    <ul>
      <li>Level 0: Hard-coded default values in the source code</li>
      <li>Level 1: <span class="bold_code bc-18"><a href="../../man/config.html">OTP Configuration Parameters</a></span>
</li>
      <li>Level 2: Options in the <span class="bold_code bc-18"><a href="../../man/config.html">OTP Configuration Parameters</a></span>
      <span class="code">server_options</span> or <span class="code">client_options</span>
</li>
      <li>Level 3: Options in argument list to a function</li>
    </ul>    
    <p>If the same option is set at two different levels, the one at the highest level is used.
    </p>
    <p>The only exception is the
    <span class="bold_code bc-15"><a href="../../man/ssh.html#type-modify_algorithms_common_option">modify_algorithms</a></span>
    common option. They are all applied in ascending level order on the set of algorithms. So a
    <span class="code">modify_algorithms</span> on level zero is applied before one of level one and so on.
    </p>
    <p>If there is an
    <span class="bold_code bc-15"><a href="../../man/ssh.html#type-preferred_algorithms_common_option">preferred_algorithms</a></span>
    option on some level the whole set is replaced by that in that option and <strong>all modify_algorithms
    are applied</strong> in level ordering.
    </p>
    <p>The reason for applying all
    <span class="bold_code bc-15"><a href="../../man/ssh.html#type-modify_algorithms_common_option">modify_algorithms</a></span>
    in level order, is to enable the user to add an algorithm that has been removed from the
    default set without code changes, only by adding an option in a config file.
    This can be used to interoperate with legacy systems that still uses algorithms no longer
    considered secure enough to be supported by default.
    </p>
    
    <h4 id="algorithm-configuration" class="title-link" onMouseOver="document.getElementById('ghlink-algorithm-configuration-idm594').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-algorithm-configuration-idm594').style.visibility = 'hidden';">
<div class="title-name">Algorithm configuration</div>
<div class="title-anchors"><span id="ghlink-algorithm-configuration-idm594" class="ghlink-after"><a href="#algorithm-configuration" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/lib/ssh/doc/src/configurations.xml#L134" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h4>
      
      <p>There is a <span class="bold_code bc-15"><a href="configure_algos.html#introduction">separate chapter</a></span> about how
      <span class="bold_code bc-15"><a href="../../man/ssh.html#type-preferred_algorithms_common_option">preferred_algorithms</a></span> and
      <span class="bold_code bc-15"><a href="../../man/ssh.html#type-modify_algorithms_common_option">modify_algorithms</a></span>
      co-operate. How the different configuration levels affect them, is described here in this section.
      </p>
      <h5>The ssh:start/0 function</h5>
	
	<p>If the application SSH is <strong>not</strong> <span class="bold_code bc-15"><a href="../../man/ssh.html#start-0">started</a></span>, the command
	<span class="bold_code bc-15"><a href="../../man/ssh.html#default_algorithms-0">ssh:default_algorithms/0</a></span>
	delivers the list of default (hardcoded) algorithms with respect to the support in the current cryptolib.
	</p>
	<p>If the application SSH <strong>is</strong> <span class="bold_code bc-15"><a href="../../man/ssh.html#start-0">started</a></span>, the command
	<span class="bold_code bc-15"><a href="../../man/ssh.html#default_algorithms-0">ssh:default_algorithms/0</a></span>
	delvers the list of algorithms after application of level 0 and level 1 configurations.
	</p>
	<p>Here is an example. The config-file has the following contents:</p>
	<div class="example example-none"><pre>$ cat ex2.config
[
 {ssh, [{preferred_algorithms, [{cipher, ['aes192-ctr']},
       			        {public_key, ['ssh-rsa']},
                                {kex, ['ecdh-sha2-nistp384']},
                                {mac, ['hmac-sha1']}]}]}
].</pre></div>
	<p>Erlang is started with <span class="code">ex2.config</span> as configuration and we check the default set of
	algorithms before starting ssh:</p>
	<div class="example example-none"><pre>$ erl -config ex2
Erlang/OTP 23 [RELEASE CANDIDATE 1] [erts-10.6.4] [source-96a0823109] [64-bit] [smp:4:4] [ds:4:4:10] [async-threads:1] [hipe]

Eshell V10.6.4  (abort with ^G)
1&gt; ssh:default_algorithms().
[{kex,['ecdh-sha2-nistp384','ecdh-sha2-nistp521',
       'ecdh-sha2-nistp256','diffie-hellman-group-exchange-sha256',
       'diffie-hellman-group16-sha512',
       'diffie-hellman-group18-sha512',
       'diffie-hellman-group14-sha256','curve25519-sha256',
       'curve25519-sha256@libssh.org','curve448-sha512',
       'diffie-hellman-group14-sha1',
       'diffie-hellman-group-exchange-sha1']},
 {public_key,['ecdsa-sha2-nistp384','ecdsa-sha2-nistp521',
              'ecdsa-sha2-nistp256','ssh-ed25519','ssh-ed448','ssh-rsa',
              'rsa-sha2-256','rsa-sha2-512','ssh-dss']},
 {cipher,[{client2server,['chacha20-poly1305@openssh.com',
                          'aes256-gcm@openssh.com','aes256-ctr','aes192-ctr',
                          'aes128-gcm@openssh.com','aes128-ctr','aes256-cbc',
                          'aes192-cbc','aes128-cbc','3des-cbc']},
          {server2client,['chacha20-poly1305@openssh.com',
                          'aes256-gcm@openssh.com','aes256-ctr','aes192-ctr',
                          'aes128-gcm@openssh.com','aes128-ctr','aes256-cbc',
                          'aes192-cbc','aes128-cbc','3des-cbc']}]},
 {mac,[{client2server,['hmac-sha2-256','hmac-sha2-512',
                       'hmac-sha1']},
       {server2client,['hmac-sha2-256','hmac-sha2-512',
                       'hmac-sha1']}]},
 {compression,[{client2server,[none,'zlib@openssh.com',zlib]},
               {server2client,[none,'zlib@openssh.com',zlib]}]}]</pre></div>
	<p>Note that the algorithms in the file <span class="code">ex2.config</span> is not yet applied. They will be
	when we start ssh:
	</p>
	<div class="example example-none"><pre>2&gt; ssh:start().
ok
3&gt; ssh:default_algorithms().
[{kex,['ecdh-sha2-nistp384']},
 {public_key,['ssh-rsa']},
 {cipher,[{client2server,['aes192-ctr']},
          {server2client,['aes192-ctr']}]},
 {mac,[{client2server,['hmac-sha1']},
       {server2client,['hmac-sha1']}]},
 {compression,[{client2server,[none,'zlib@openssh.com',zlib]},
               {server2client,[none,'zlib@openssh.com',zlib]}]}]
4&gt; </pre></div>
	<p>We see that the algorithm set is changed to the one in the  <span class="code">ex2.config</span>. Since
	<span class="code">compression</span> is not specified in the file, the hard-coded default is still used
	for that entry.
	</p>
      

      <h5>Establishing a connection (ssh:connect et al) or starting a daemon (ssh:daemon)</h5>
	
	<p>Both when the client establishes a connection with ssh:connect or other functions, or a
	daemon is started with ssh:daemon, the option lists in the function calls are also used.
	</p>
	<p>If a client is started (ssh:connect et al), the environment variable <span class="code">client_options</span> is used.
	Similarly for a daemon the <span class="code">server_options</span> variable is handled.
	</p>
	<p>If any
	<span class="bold_code bc-15"><a href="../../man/ssh.html#type-preferred_algorithms_common_option">preferred_algorithms</a></span> is
	present, the one with the highest level is used, that is, the <span class="code">Option</span> list parameter has the highest
	priority. Then the
	<span class="bold_code bc-15"><a href="../../man/ssh.html#type-modify_algorithms_common_option">modify_algorithms</a></span>
	on all levels in order starting with level 0 are applied.
	
	</p>
	<p>We continue the example above by connecting to a server and modifying the <span class="code">kex</span>
	algorithm set. We remove the only one (<span class="code">'ecdh-sha2-nistp384'</span>) and add
	<span class="code">'curve25519-sha256@libssh.org'</span>
	by appending it to the now empty list:</p>
	<div class="example example-none"><pre>4&gt; {ok,C} = ssh:connect(loopback, 22,
                        [{modify_algorithms,
                                 [{rm,
                                     [ {kex,['ecdh-sha2-nistp384']} ]
				  },
                                  {append,
			             [ {kex,['curve25519-sha256@libssh.org']} ]
				  }
				 ]
	                 }
                        ]).
{ok,&gt;0.118.0&gt;}</pre></div>
	<p>We check which algoritms are negotiated by the client and the server, and note that
	the (only) <span class="code">kex</span> algorithm <span class="code">'curve25519-sha256@libssh.org'</span> was selected:
	</p>
	<div class="example example-none"><pre>5&gt; ssh:connection_info(C, algorithms).
{algorithms,[{kex,'curve25519-sha256@libssh.org'},
             {hkey,'ssh-rsa'},
             {send_mac,'hmac-sha1'},
             {recv_mac,'hmac-sha1'},
             {encrypt,'aes192-ctr'},
             {decrypt,'aes192-ctr'},
             {compress,none},
             {decompress,none},
             {send_ext_info,false},
             {recv_ext_info,true}]}</pre></div>
      

      <h5>Example of modify_algorithms handling</h5>
	
	<p>We will now check if the
	<span class="bold_code bc-15"><a href="../../man/ssh.html#type-modify_algorithms_common_option">modify_algorithms</a></span>
	on a lower level is applied to a
	<span class="bold_code bc-15"><a href="../../man/ssh.html#type-preferred_algorithms_common_option">preferred_algorithms</a></span>
	on a higher level. We will do that by enabling the <span class="code">ssh-dss</span>
	algorithm that is supported, but not in the default set.
	</p>
	<p>The config file <span class="code">ex3.config</span> has the contents:
	</p>
	<div class="example example-none"><pre>[
 {ssh, [{modify_algorithms,
         [ {prepend, [{public_key, ['ssh-dss']}]} ]
        }]}
].</pre></div>
	<p>A newly started erlang shell shows that no <span class="code">'ssh-dss'</span> is present in the
	<span class="code">public_key</span> entry:</p>
	<div class="example example-none"><pre>1&gt; proplists:get_value(public_key, ssh:default_algorithms()).
['ecdsa-sha2-nistp384','ecdsa-sha2-nistp521',
 'ecdsa-sha2-nistp256','ssh-ed25519','ssh-ed448',
 'rsa-sha2-256','rsa-sha2-512','ssh-rsa']
2&gt; </pre></div>
	<p>A call to <span class="code">ssh:connect/3</span> removes all algorithms but one of each type:
	</p>
	<div class="example example-none"><pre>2&gt; ssh:start().
ok
3&gt; {ok,C} = ssh:connect(loopback, 22,
                        [{preferred_algorithms,
                         [{public_key, ['ecdsa-sha2-nistp256']},
			  {kex, ['ecdh-sha2-nistp256']},
		          {cipher, ['chacha20-poly1305@openssh.com']},
			  {mac, ['hmac-sha2-256']},
			  {compression, [none]}
			  ]}
			 ]).
{ok,&lt;0.101.0&gt;}
4&gt; ssh:connection_info(C,algorithms).
{algorithms,[{kex,'ecdh-sha2-nistp256'},
             {hkey,'ssh-dss'},
             {send_mac,'chacha20-poly1305@openssh.com'},
             {recv_mac,'chacha20-poly1305@openssh.com'},
             {encrypt,'chacha20-poly1305@openssh.com'},
             {decrypt,'chacha20-poly1305@openssh.com'},
             {compress,none},
             {decompress,none},
             {send_ext_info,false},
             {recv_ext_info,true}]}
5&gt;</pre></div>
	<p>But <span class="code">'ssh-dss'</span> is selected although the call inserted <strong>only</strong>
	<span class="code">'ecdsa-sha2-nistp256'</span> as acceptable.
	</p>
	<p>This example showed that we could augment the set of algorithms with a
	config-file without the need to change the actual call.
	</p>
	<p>For demonstration purposes we used <span class="code">prepend</span> instead of <span class="code">append</span>.
	This forces the negotiation to select <span class="code">ssh-dss</span> since the the full list
	of public key algorithms was
	<span class="code">['ssh-dss','ecdsa-sha2-nistp256']</span>.
	Normally it is safer to append a non-default algorithm.
	</p>
      
    
  
</div>
<div class="footer">
<hr>
<p>Copyright © 2005-2024 Ericsson AB. All Rights Reserved.</p>
</div>
</div>
</div>
<script type="text/javascript">window.__otpTopDocDir = '../../js/';</script><script type="text/javascript" src="../../js/highlight.js"></script>
<script type="text/javascript">
_docsearch_version = "24";
</script> 
<script src="/assets/js/doc-search.bundle.js"></script>
</body>
</html>
