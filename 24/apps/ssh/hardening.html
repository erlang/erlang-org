<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html xmlns:erl="http://erlang.org" xmlns:fn="http://www.w3.org/2005/02/xpath-functions">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="utf-8">
<link rel="stylesheet" href="../../otp_doc.css" type="text/css">
<meta name="major-vsn" content="24">
<title>Erlang -- Hardening</title>
</head>
<body>
<div id="container">
<script id="js" type="text/javascript" language="JavaScript" src="../../js/flipmenu/flipmenu.js"></script><script id="js2" type="text/javascript" src="../../js/erlresolvelinks.js"></script><script id="js3" type="text/javascript" src="../../../../doc/js/topbar.js"></script><script language="JavaScript" type="text/javascript">
            <!--
              function setscrollpos() {
                var objf = document.getElementById('loadscrollpos');
                if (objf) {
                  document.getElementById("leftnav").firstChild.scrollTop = objf.offsetTop - 10;
                }
              }

              function addEvent(obj, evType, fn){
                if (obj.addEventListener){
                obj.addEventListener(evType, fn, true);
                return true;
              } else if (obj.attachEvent){
                var r = obj.attachEvent("on"+evType, fn);
                return r;
              } else {
                return false;
              }
             }

             addEvent(window, 'load', setscrollpos);

             //-->
</script><div class="topbar">
<div class="topbar-expand "><button onclick="toggleDisplay();"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="Capa_1" viewBox="0 0 54 54" width="24" height="24"><g><path style="fill:#000000;" d="M27,54c-0.552,0-1-0.448-1-1V8c0-0.552,0.448-1,1-1s1,0.448,1,1v45C28,53.552,27.552,54,27,54z"></path><path style="fill:#000000;" d="M11,25c-0.256,0-0.512-0.098-0.707-0.293c-0.391-0.391-0.391-1.023,0-1.414l16-16                                      c0.391-0.391,1.023-0.391,1.414,0s0.391,1.023,0,1.414l-16,16C11.512,24.902,11.256,25,11,25z"></path><path style="fill:#000000;" d="M43,25c-0.256,0-0.512-0.098-0.707-0.293l-16-16c-0.391-0.391-0.391-1.023,0-1.414                                      s1.023-0.391,1.414,0l16,16c0.391,0.391,0.391,1.023,0,1.414C43.512,24.902,43.256,25,43,25z"></path><path style="fill:#000000;" d="M43,2H11c-0.552,0-1-0.448-1-1s0.448-1,1-1h32c0.552,0,1,0.448,1,1S43.552,2,43,2z"></path></g></svg></button></div>
<div class="topbar-title"><h1 id="Hardening">6 
                Hardening</h1></div>
<div class="search-expand ">        <button id="docsearch-mobile">
            <svg fill="#000000" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 50 50" width="24" height="24"><path d="M 21 3 C 11.621094 3 4 10.621094 4 20 C 4 29.378906 11.621094 37 21 37 C 24.710938 37 28.140625 35.804688 30.9375 33.78125 L 44.09375 46.90625 L 46.90625 44.09375 L 33.90625 31.0625 C 36.460938 28.085938 38 24.222656 38 20 C 38 10.621094 30.378906 3 21 3 Z M 21 5 C 29.296875 5 36 11.703125 36 20 C 36 28.296875 29.296875 35 21 35 C 12.703125 35 6 28.296875 6 20 C 6 11.703125 12.703125 5 21 5 Z"/></svg>
        </button>
</div>
</div>
<aside class="hide-mobile" id="leftnav"><nav class="leftnav-tube"><div class="erlang-logo-wrapper"><a href="../../index.html"><img alt="Erlang Logo" src="../../erlang-logo.png" class="erlang-logo"></a></div>
<p class="section-title">SSH</p>
<p class="section-subtitle">User's Guide</p>
<p class="section-version">Version 4.13.2.6</p>
<ul class="panel-sections">
<li><a href="users_guide.html">User's Guide</a></li>
<li><a href="index.html">Reference Manual</a></li>
<li><a href="notes.html">Release Notes</a></li>
<li><a href="ssh.pdf">PDF</a></li>
<li><a href="../../index.html">Top</a></li>
</ul>
<div id="docsearch"></div>
<div style="padding-left: 1rem; padding-top: 0.1rem;"><a href="/doc/search?v=24">Paginated Search</a></div>
<ul class="expand-collapse-items">
<li><a href="javascript:openAllFlips()">Expand All</a></li>
<li><a href="javascript:closeAllFlips()">Contract All</a></li>
</ul>
<h3 id="chapters">Chapters</h3>
<ul class="flipMenu" imagePath="../../js/flipmenu">
<li id="no" title="Introduction" expanded="false">Introduction<ul>
<li><a href="introduction.html">
              Top of chapter
            </a></li>
<li title="Scope and Purpose"><a href="introduction.html#scope-and-purpose">Scope and Purpose</a></li>
<li title="Prerequisites"><a href="introduction.html#prerequisites">Prerequisites</a></li>
<li title="SSH Protocol Overview"><a href="introduction.html#ssh-protocol-overview">SSH Protocol Overview</a></li>
<li title="Where to Find More Information"><a href="introduction.html#where-to-find-more-information">Where to Find More Information</a></li>
</ul>
</li>
<li id="no" title="Getting Started" expanded="false">Getting Started<ul>
<li><a href="using_ssh.html">
              Top of chapter
            </a></li>
<li title="General Information"><a href="using_ssh.html#general-information">General Information</a></li>
<li title="Using the Erlang ssh Terminal Client"><a href="using_ssh.html#using-the-erlang-ssh-terminal-client">Using the Erlang ssh Terminal Client</a></li>
<li title="Running an Erlang ssh Daemon"><a href="using_ssh.html#running-an-erlang-ssh-daemon">Running an Erlang ssh Daemon</a></li>
<li title="One-Time Execution"><a href="using_ssh.html#one-time-execution">One-Time Execution</a></li>
<li title="SFTP Server"><a href="using_ssh.html#sftp-server">SFTP Server</a></li>
<li title="SFTP Client"><a href="using_ssh.html#sftp-client">SFTP Client</a></li>
<li title="SFTP Client with TAR Compression"><a href="using_ssh.html#sftp-client-with-tar-compression">SFTP Client with TAR Compression</a></li>
<li title="Creating a Subsystem"><a href="using_ssh.html#creating-a-subsystem">Creating a Subsystem</a></li>
</ul>
</li>
<li id="no" title="Terminology" expanded="false">Terminology<ul>
<li><a href="terminology.html">
              Top of chapter
            </a></li>
<li title="General Information"><a href="terminology.html#general-information">General Information</a></li>
<li title='The term "user"'><a href="terminology.html#the-term--user-">The term "user"</a></li>
</ul>
</li>
<li id="no" title="Configuration in SSH" expanded="false">Configuration in SSH<ul>
<li><a href="configurations.html">
              Top of chapter
            </a></li>
<li title="Introduction"><a href="configurations.html#introduction">Introduction</a></li>
<li title="Options configuration"><a href="configurations.html#options-configuration">Options configuration</a></li>
<li title="Precedens"><a href="configurations.html#precedens">Precedens</a></li>
</ul>
</li>
<li id="no" title="Configuring algorithms in SSH" expanded="false">Configuring algorithms in SSH<ul>
<li><a href="configure_algos.html">
              Top of chapter
            </a></li>
<li title="Introduction"><a href="configure_algos.html#introduction">Introduction</a></li>
<li title="Replacing the default set: preferred_algorithms"><a href="configure_algos.html#replacing-the-default-set--preferred_algorithms">Replacing the default set: preferred_algorithms</a></li>
<li title="Modifying the default set: modify_algorithms"><a href="configure_algos.html#modifying-the-default-set--modify_algorithms">Modifying the default set: modify_algorithms</a></li>
</ul>
</li>
<li id="loadscrollpos" title="Hardening" expanded="true">Hardening<ul>
<li><a href="hardening.html">
              Top of chapter
            </a></li>
<li title="Introduction"><a href="hardening.html#introduction">Introduction</a></li>
<li title="Resilience to DoS attacks"><a href="hardening.html#resilience-to-dos-attacks">Resilience to DoS attacks</a></li>
<li title="Verifying the remote daemon (server) in an SSH client"><a href="hardening.html#verifying-the-remote-daemon--server--in-an-ssh-client">Verifying the remote daemon (server) in an SSH client</a></li>
<li title="Verifying the remote client in a daemon (server)"><a href="hardening.html#verifying-the-remote-client-in-a-daemon--server-">Verifying the remote client in a daemon (server)</a></li>
<li title="Hardening in the cryptographic area"><a href="hardening.html#hardening-in-the-cryptographic-area">Hardening in the cryptographic area</a></li>
<li title="Hardening of the SSH protocol - both daemons and clients"><a href="hardening.html#hardening-of-the-ssh-protocol---both-daemons-and-clients">Hardening of the SSH protocol - both daemons and clients</a></li>
<li title="Client connection options"><a href="hardening.html#client-connection-options">Client connection options</a></li>
</ul>
</li>
</ul></nav></aside><div id="content">
<div class="innertube">
<h1 id="Hardening">6 Hardening</h1>
  

  <a name="introduction"></a><h3 id="introduction" class="title-link" onMouseOver="document.getElementById('ghlink-introduction-idm867').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-introduction-idm867').style.visibility = 'hidden';">
<div class="title-name">6.1 
        Introduction</div>
<div class="title-anchors"><span id="ghlink-introduction-idm867" class="ghlink-after"><a href="#introduction" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/lib/ssh/doc/src/hardening.xml#L35" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    
    <p>The Erlang/OTP SSH application is intended to be used in other applications as a library.
    </p>
    <p>Different applications using this library may have very different requirements.
    One application could be running on a high performance server, while another is running on
    a small device with very limited cpu capacity. For example, the first one may accept many users
    simultaneously logged in, while the second one wants to limit them to only one.
    </p>
    <p>That simple example shows that it is impossible to deliver the SSH application with default
    values on hardening options as well on other options that suites every need.
    </p>
    <p>The purpose of this guide is to discuss the different hardening options available, as a
    guide to the reader. Configuration in general is described in the
    <span class="bold_code bc-19"><a href="configurations.html">Configuration in SSH</a></span> chapter.
    </p>
  

  <h3 id="resilience-to-dos-attacks" class="title-link" onMouseOver="document.getElementById('ghlink-resilience-to-dos-attacks-idm875').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-resilience-to-dos-attacks-idm875').style.visibility = 'hidden';">
<div class="title-name">6.2 
        Resilience to DoS attacks</div>
<div class="title-anchors"><span id="ghlink-resilience-to-dos-attacks-idm875" class="ghlink-after"><a href="#resilience-to-dos-attacks" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/lib/ssh/doc/src/hardening.xml#L54" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    <p>The following applies to daemons (servers).</p>
    <p>DoS (Denial of Service) attacks are hard to fight at the node level. Here are firewalls and
    other means needed, but that is out of scope for this guide.
    However, some measures could be taken in the configuration of the SSH server to increase the resilence.
    The options to use
    are:</p>
    <dl>
      <dt><strong><span class="bold_code bc-15"><a href="../../man/ssh.html#type-hello_timeout_daemon_option">hello_timeout</a></span></strong></dt>
      <dd>
	If the client fails to send the first ssh message after a tcp connection setup
	within this time (in milliseconds), the connection is closed.
	The default value is 30 seconds. This is actualy a generous time, so it can lowered
	to make the daemon less prone to DoS attacks.
      </dd>
      <dt><strong><span class="bold_code bc-15"><a href="../../man/ssh.html#type-negotiation_timeout_daemon_option">negotiation_timeout</a></span></strong></dt>
      <dd>
	Maximum time in milliseconds for the authentication negotiation.
	If the client fails to log in within this time, the connection is closed.
	The default value is 2 minutes. It is quite a long time, but can lowered if the client is
	supposed to be fast like if it is a program logging in.
      </dd>
      <dt><strong><span class="bold_code bc-15"><a href="../../man/ssh.html#hardening_daemon_options--max_sessions">max_sessions</a></span></strong></dt>
      <dd>
	The maximum number of simultaneous sessions that are accepted at any time for this daemon.
	This includes sessions that are being authorized. The default is that an unlimited number of
	simultaneous sessions are allowed. It is a good candidate to set if the capacity of the server
	is low or a capacity margin is needed.
      </dd>
      <dt><strong><span class="bold_code bc-15"><a href="../../man/ssh.html#hardening_daemon_options--max_channels">max_channels</a></span></strong></dt>
      <dd>
	The maximum number of channels that are accepted for each connection. The default is unlimited.
      </dd>
      <dt><strong><span class="bold_code bc-15"><a href="../../man/ssh.html#hardening_daemon_options--parallel_login">parallel_login</a></span></strong></dt>
      <dd>
	If set to false (the default value), only one login is handled at a time.
	If set to true, the number of simultaneous login attempts are limited by the value of
	<span class="bold_code bc-15"><a href="../../man/ssh.html#hardening_daemon_options--max_sessions">max_sessions</a></span>  option.
      </dd>
      <dt><strong><span class="bold_code bc-15"><a href="../../man/ssh.html#type-max_idle_time_common_option">idle_time</a></span></strong></dt>
      <dd>
	Sets a time-out on a connection when no channels are open. Defaults to infinity.
      </dd>
    </dl>
  

  
  <h3 id="verifying-the-remote-daemon--server--in-an-ssh-client" class="title-link" onMouseOver="document.getElementById('ghlink-verifying-the-remote-daemon--server--in-an-ssh-client-idm899').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-verifying-the-remote-daemon--server--in-an-ssh-client-idm899').style.visibility = 'hidden';">
<div class="title-name">6.3 
        Verifying the remote daemon (server) in an SSH client</div>
<div class="title-anchors"><span id="ghlink-verifying-the-remote-daemon--server--in-an-ssh-client-idm899" class="ghlink-after"><a href="#verifying-the-remote-daemon--server--in-an-ssh-client" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/lib/ssh/doc/src/hardening.xml#L102" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    <p>Every SSH server presents a public key - the <i>host key</i> - to the client while keeping the corresponding
    private key in relatively safe privacy.
    </p>
    <p>The client checks that the host that presented the public key also possesses the private key of the key-pair.
    That check is part of the SSH protocol.
    </p>
    <p>But how can the client know that the host <i>really</i> is the one that it tried to connect to and not an
    evil one impersonating the expected one using its own valid key-pair?  There are two alternatives available with the
    default key handling plugin <span class="bold_code bc-19"><a href="../../man/ssh_file.html"><span class="code">ssh_file</span></a></span>.
    The alternatives are:
    </p>
    <dl>
      <dt><strong>Pre-store the host key</strong></dt>
      <dd>
	<ul>
	  <li>
	    For the default handler ssh_file, store the valid host keys in the file
	    <span class="bold_code bc-15"><a href="../../man/ssh_file.html#FILE-known_hosts"><span class="code">known_hosts</span></a></span> and set the option
	    <span class="bold_code bc-15"><a href="../../man/ssh.html#hardening_client_options--silently_accept_hosts">silently_accept_hosts</a></span>
	    to <span class="code">false</span>.
	  </li>
	  <li>or, write a specialized key handler using the <span class="bold_code bc-19"><a href="../../man/ssh_client_key_api.html">SSH client key API</a></span>
	  that accesses the pre-shared key in some other way.
	  </li>
	</ul>
      </dd>

      <dt><strong>Pre-store the "fingerprint" (checksum) of the host key</strong></dt>
      <dd>
	<ul>
	  <li>
	    <span class="bold_code bc-15"><a href="../../man/ssh.html#hardening_client_options--silently_accept_hosts">silently_accept_hosts</a></span>
	    <ul>
	      <li><span class="bold_code bc-15"><a href="../../man/ssh.html#type-accept_callback"><span class="code">accept_callback()</span></a></span></li>
	      <li><span class="bold_code bc-15"><a href="../../man/ssh.html#type-accept_hosts"><span class="code">{HashAlgoSpec, accept_callback()}</span></a></span></li>
	    </ul>
	  </li>
	</ul>
      </dd>
    </dl>
  

  <h3 id="verifying-the-remote-client-in-a-daemon--server-" class="title-link" onMouseOver="document.getElementById('ghlink-verifying-the-remote-client-in-a-daemon--server--idm931').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-verifying-the-remote-client-in-a-daemon--server--idm931').style.visibility = 'hidden';">
<div class="title-name">6.4 
        Verifying the remote client in a daemon (server)</div>
<div class="title-anchors"><span id="ghlink-verifying-the-remote-client-in-a-daemon--server--idm931" class="ghlink-after"><a href="#verifying-the-remote-client-in-a-daemon--server-" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/lib/ssh/doc/src/hardening.xml#L146" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    <dl>
      <dt><strong>Password checking</strong></dt>
      <dd>
	<p>The default password checking is with the list in the
	<span class="bold_code bc-15"><a href="../../man/ssh.html#option-user_passwords">user_passwords</a></span> option in the SSH daemon.
	It could be replaced with a <span class="bold_code bc-15"><a href="../../man/ssh.html#option-pwdfun">pwdfun</a></span> plugin. The
	arity four variant (<span class="bold_code bc-15"><a href="../../man/ssh.html#type-pwdfun_4"><span class="code">pwdfun_4()</span></a></span>)
	can also be used for introducing delays after failed password checking attempts. Here is a simple
	example of such a pwdfun:
	</p>
	<div class="example example-none"><pre>fun(User, Password, _PeerAddress, State) -&gt;
        case lists:member({User,Password}, my_user_pwds()) of
            true -&gt;
                {true, undefined}; % Reset delay time
            false when State == undefined -&gt;
                timer:sleep(1000),
                {false, 2000}; % Next delay is 2000 ms
            false when is_integer(State) -&gt;
                timer:sleep(State),
                {false, 2*State} % Double the delay for each failure
        end
end.</pre></div>
	<p>If a public key is used for logging in, there is normally no checking of the user name. It
	could be enabled by setting the option 
	<span class="bold_code bc-15"><a href="../../man/ssh.html#option-pk_check_user"><span class="code">pk_check_user</span></a></span>
	to <span class="code">true</span>.
	In that case the pwdfun will get the atom <span class="code">pubkey</span> in the password argument.
	</p>
      </dd>

    </dl>
  

  <h3 id="hardening-in-the-cryptographic-area" class="title-link" onMouseOver="document.getElementById('ghlink-hardening-in-the-cryptographic-area-idm947').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-hardening-in-the-cryptographic-area-idm947').style.visibility = 'hidden';">
<div class="title-name">6.5 
        Hardening in the cryptographic area</div>
<div class="title-anchors"><span id="ghlink-hardening-in-the-cryptographic-area-idm947" class="ghlink-after"><a href="#hardening-in-the-cryptographic-area" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/lib/ssh/doc/src/hardening.xml#L183" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    <h4 id="algorithm-selection" class="title-link" onMouseOver="document.getElementById('ghlink-algorithm-selection-idm949').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-algorithm-selection-idm949').style.visibility = 'hidden';">
<div class="title-name">Algorithm selection</div>
<div class="title-anchors"><span id="ghlink-algorithm-selection-idm949" class="ghlink-after"><a href="#algorithm-selection" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/lib/ssh/doc/src/hardening.xml#L185" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h4>
      
      <p>One of the cornerstones of security in SSH is cryptography. The development in crypto analysis is fast,
      and yesterday's secure algorithms are unsafe today. Therefore some algorithms are no longer enabled by default
      and that group grows with time.
      See the
      <span class="bold_code bc-15"><a href="../../man/SSH_app.html#supported-specifications-and-standards">SSH (App)</a></span>
      for a list of supported and of disabled algorithms.
      In the User's Guide the chapter
      <span class="bold_code bc-19"><a href="configure_algos.html">Configuring algorithms in SSH</a></span>
      describes the options for enabling or disabling algorithms -
      <span class="bold_code bc-15"><a href="../../man/ssh.html#type-preferred_algorithms_common_option">preferred_algorithms</a></span> and
      <span class="bold_code bc-15"><a href="../../man/ssh.html#type-modify_algorithms_common_option">modify_algorithms</a></span>.
      </p>
    

    <h4 id="re-keying" class="title-link" onMouseOver="document.getElementById('ghlink-re-keying-idm956').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-re-keying-idm956').style.visibility = 'hidden';">
<div class="title-name">Re-keying</div>
<div class="title-anchors"><span id="ghlink-re-keying-idm956" class="ghlink-after"><a href="#re-keying" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/lib/ssh/doc/src/hardening.xml#L201" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h4>
      
      <p>In the setup of the SSH connection a secret cipher key is generated by co-operation of the
      client and the server.  Keeping this key secret is crucial for keeping the communication secret.
      As time passes and encrypted messages are exchanged, the probability that a listener could
      guess that key increases.
      </p>
      <p>The SSH protocol therefore has a special operation defined - <i>key re-negotiation</i> or
      <i>re-keying</i>.
      Any side (client or server) could initiate the re-keying and the result is a new cipher key.
      The result is that the eves-dropper has to restart its evil and dirty craftmanship.
      </p>
      <p>See the option <span class="bold_code bc-15"><a href="../../man/ssh.html#type-rekey_limit_common_option">rekey_limit</a></span> for a
      description.
      </p>
    

  

  <h3 id="hardening-of-the-ssh-protocol---both-daemons-and-clients" class="title-link" onMouseOver="document.getElementById('ghlink-hardening-of-the-ssh-protocol---both-daemons-and-clients-idm964').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-hardening-of-the-ssh-protocol---both-daemons-and-clients-idm964').style.visibility = 'hidden';">
<div class="title-name">6.6 
        Hardening of the SSH protocol - both daemons and clients</div>
<div class="title-anchors"><span id="ghlink-hardening-of-the-ssh-protocol---both-daemons-and-clients-idm964" class="ghlink-after"><a href="#hardening-of-the-ssh-protocol---both-daemons-and-clients" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/lib/ssh/doc/src/hardening.xml#L220" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    <h4 id="disabling-shell-and-exec-in-a-daemon" class="title-link" onMouseOver="document.getElementById('ghlink-disabling-shell-and-exec-in-a-daemon-idm966').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-disabling-shell-and-exec-in-a-daemon-idm966').style.visibility = 'hidden';">
<div class="title-name">Disabling shell and exec in a daemon</div>
<div class="title-anchors"><span id="ghlink-disabling-shell-and-exec-in-a-daemon-idm966" class="ghlink-after"><a href="#disabling-shell-and-exec-in-a-daemon" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/lib/ssh/doc/src/hardening.xml#L222" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h4>
      
      <p>A daemon has two services for evaluating tasks on behalf of a remote client. The <i>exec</i>
      server-side service takes a string provided by the client, evaluates it and returns the result.
      The <i>shell</i> function enables the client to open a shell in the shell host.
      </p>
      <p>Those service could - and should - be disabled when they are not needed. The options
      <span class="bold_code bc-15"><a href="../../man/ssh.html#type-exec_daemon_option">exec</a></span> and
      <span class="bold_code bc-15"><a href="../../man/ssh.html#type-shell_daemon_option">shell</a></span> are enabled per default but could be
      set to <span class="code">disabled</span> if not needed. The same options could also install handlers for the string(s)
      passed from the client to the server.
      </p>
    

    <h4 id="the-id-string" class="title-link" onMouseOver="document.getElementById('ghlink-the-id-string-idm975').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-the-id-string-idm975').style.visibility = 'hidden';">
<div class="title-name">The id string</div>
<div class="title-anchors"><span id="ghlink-the-id-string-idm975" class="ghlink-after"><a href="#the-id-string" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/lib/ssh/doc/src/hardening.xml#L236" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h4>
      
      <p>One way to reduce the risk of intrusion is to not convey which software and which version
      the intruder is connected to. This limits the risk of an intruder exploiting known faults or
      peculiarities learned by reading the public code.
      </p>
      <p>Each SSH client or daemon presents themselves to each other with brand and version. This may
      look like</p>
      <div class="example"><pre>SSH-2.0-Erlang/4.10</pre></div>
      <p>or</p>
      <div class="example"><pre>SSH-2.0-OpenSSH_7.6p1 Ubuntu-4ubuntu0.3</pre></div>
      <p>This brand and version may be changed with the option
      <span class="bold_code bc-15"><a href="../../man/ssh.html#type-id_string_common_option">id_string</a></span>.
      We start a daemon with that option:
      </p>
      <div class="example example-none"><pre>	ssh:daemon(1234, [{id_string,"hi there"}, ... ]).</pre></div>
      <p>and the deamon will present itself as:</p>
      <div class="example"><pre>SSH-2.0-hi there</pre></div>
      <p>It is possible to replace the string with one randomly generated for each connection attempt.
      See the reference manual for <span class="bold_code bc-15"><a href="../../man/ssh.html#type-id_string_common_option">id_string</a></span>.
      </p>
    

  
    
  <h3 id="client-connection-options" class="title-link" onMouseOver="document.getElementById('ghlink-client-connection-options-idm989').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-client-connection-options-idm989').style.visibility = 'hidden';">
<div class="title-name">6.7 
        Client connection options</div>
<div class="title-anchors"><span id="ghlink-client-connection-options-idm989" class="ghlink-after"><a href="#client-connection-options" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/lib/ssh/doc/src/hardening.xml#L263" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    <p>A client could limit the time for the initial tcp connection establishment with the option
    <span class="bold_code bc-15"><a href="../../man/ssh.html#type-connect_timeout_client_option">connect_timeout</a></span>.
    The time is in milliseconds, and the initial value is infinity.
    </p>
    <p>The negotiation (session setup time) time can be limited with the <i>parameter</i>
    <span class="code">NegotiationTimeout</span> in a call establishing an ssh session, for example
    <span class="bold_code bc-13"><a href="../../man/ssh.html#connect-3">ssh:connect/3</a></span>.
    </p>
  

</div>
<div class="footer">
<hr>
<p>Copyright © 2005-2024 Ericsson AB. All Rights Reserved.</p>
</div>
</div>
</div>
<script type="text/javascript">window.__otpTopDocDir = '../../js/';</script><script type="text/javascript" src="../../js/highlight.js"></script>
<script type="text/javascript">
_docsearch_version = "24";
</script> 
<script src="/assets/js/doc-search.bundle.js"></script>
</body>
</html>
