<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html xmlns:erl="http://erlang.org" xmlns:fn="http://www.w3.org/2005/02/xpath-functions">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="utf-8">
<link rel="stylesheet" href="../../otp_doc.css" type="text/css">
<meta name="major-vsn" content="24">
<title>Erlang -- HTTP Client</title>
</head>
<body>
<div id="container">
<script id="js" type="text/javascript" language="JavaScript" src="../../js/flipmenu/flipmenu.js"></script><script id="js2" type="text/javascript" src="../../js/erlresolvelinks.js"></script><script id="js3" type="text/javascript" src="../../../../doc/js/topbar.js"></script><script language="JavaScript" type="text/javascript">
            <!--
              function setscrollpos() {
                var objf = document.getElementById('loadscrollpos');
                if (objf) {
                  document.getElementById("leftnav").firstChild.scrollTop = objf.offsetTop - 10;
                }
              }

              function addEvent(obj, evType, fn){
                if (obj.addEventListener){
                obj.addEventListener(evType, fn, true);
                return true;
              } else if (obj.attachEvent){
                var r = obj.attachEvent("on"+evType, fn);
                return r;
              } else {
                return false;
              }
             }

             addEvent(window, 'load', setscrollpos);

             //-->
</script><div class="topbar">
<div class="topbar-expand "><button onclick="toggleDisplay();"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="Capa_1" viewBox="0 0 54 54" width="24" height="24"><g><path style="fill:#000000;" d="M27,54c-0.552,0-1-0.448-1-1V8c0-0.552,0.448-1,1-1s1,0.448,1,1v45C28,53.552,27.552,54,27,54z"></path><path style="fill:#000000;" d="M11,25c-0.256,0-0.512-0.098-0.707-0.293c-0.391-0.391-0.391-1.023,0-1.414l16-16                                      c0.391-0.391,1.023-0.391,1.414,0s0.391,1.023,0,1.414l-16,16C11.512,24.902,11.256,25,11,25z"></path><path style="fill:#000000;" d="M43,25c-0.256,0-0.512-0.098-0.707-0.293l-16-16c-0.391-0.391-0.391-1.023,0-1.414                                      s1.023-0.391,1.414,0l16,16c0.391,0.391,0.391,1.023,0,1.414C43.512,24.902,43.256,25,43,25z"></path><path style="fill:#000000;" d="M43,2H11c-0.552,0-1-0.448-1-1s0.448-1,1-1h32c0.552,0,1,0.448,1,1S43.552,2,43,2z"></path></g></svg></button></div>
<div class="topbar-title"><h1 id="HTTP Client">3 
                HTTP Client</h1></div>
<div class="search-expand ">        <button id="docsearch-mobile">
            <svg fill="#000000" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 50 50" width="24" height="24"><path d="M 21 3 C 11.621094 3 4 10.621094 4 20 C 4 29.378906 11.621094 37 21 37 C 24.710938 37 28.140625 35.804688 30.9375 33.78125 L 44.09375 46.90625 L 46.90625 44.09375 L 33.90625 31.0625 C 36.460938 28.085938 38 24.222656 38 20 C 38 10.621094 30.378906 3 21 3 Z M 21 5 C 29.296875 5 36 11.703125 36 20 C 36 28.296875 29.296875 35 21 35 C 12.703125 35 6 28.296875 6 20 C 6 11.703125 12.703125 5 21 5 Z"/></svg>
        </button>
</div>
</div>
<aside class="hide-mobile" id="leftnav"><nav class="leftnav-tube"><div class="erlang-logo-wrapper"><a href="../../index.html"><img alt="Erlang Logo" src="../../erlang-logo.png" class="erlang-logo"></a></div>
<p class="section-title">inets</p>
<p class="section-subtitle">User's Guide</p>
<p class="section-version">Version 7.5.3.4</p>
<ul class="panel-sections">
<li><a href="users_guide.html">User's Guide</a></li>
<li><a href="index.html">Reference Manual</a></li>
<li><a href="notes.html">Release Notes</a></li>
<li><a href="inets.pdf">PDF</a></li>
<li><a href="../../index.html">Top</a></li>
</ul>
<div id="docsearch"></div>
<div style="padding-left: 1rem; padding-top: 0.1rem;"><a href="/doc/search?v=24">Paginated Search</a></div>
<ul class="expand-collapse-items">
<li><a href="javascript:openAllFlips()">Expand All</a></li>
<li><a href="javascript:closeAllFlips()">Contract All</a></li>
</ul>
<h3 id="chapters">Chapters</h3>
<ul class="flipMenu" imagePath="../../js/flipmenu">
<li id="no" title="Introduction" expanded="false">Introduction<ul>
<li><a href="introduction.html">
              Top of chapter
            </a></li>
<li title="Purpose"><a href="introduction.html#purpose">Purpose</a></li>
<li title="Prerequisites"><a href="introduction.html#prerequisites">Prerequisites</a></li>
</ul>
</li>
<li id="no" title="Inets" expanded="false">Inets<ul>
<li><a href="inets_services.html">
              Top of chapter
            </a></li>
<li title="Service Concept"><a href="inets_services.html#service-concept">Service Concept</a></li>
</ul>
</li>
<li id="loadscrollpos" title="HTTP Client" expanded="true">HTTP Client<ul>
<li><a href="http_client.html">
              Top of chapter
            </a></li>
<li title="Configuration"><a href="http_client.html#configuration">Configuration</a></li>
<li title="Getting Started"><a href="http_client.html#getting-started">Getting Started</a></li>
</ul>
</li>
<li id="no" title="HTTP server" expanded="false">HTTP server<ul>
<li><a href="http_server.html">
              Top of chapter
            </a></li>
<li title="Configuration"><a href="http_server.html#configuration">Configuration</a></li>
<li title="Getting Started"><a href="http_server.html#getting-started">Getting Started</a></li>
<li title="Dynamic Web Pages"><a href="http_server.html#dynamic-web-pages">Dynamic Web Pages</a></li>
<li title="Logging"><a href="http_server.html#logging">Logging</a></li>
<li title="Erlang Web Server API"><a href="http_server.html#erlang-web-server-api">Erlang Web Server API</a></li>
<li title="Inets Web Server Modules"><a href="http_server.html#inets-web-server-modules">Inets Web Server Modules</a></li>
</ul>
</li>
</ul></nav></aside><div id="content">
<div class="innertube">
<h1 id="HTTP Client">3 HTTP Client</h1>
  

  <h3 id="configuration" class="title-link" onMouseOver="document.getElementById('ghlink-configuration-idm108').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-configuration-idm108').style.visibility = 'hidden';">
<div class="title-name">3.1 
        Configuration</div>
<div class="title-anchors"><span id="ghlink-configuration-idm108" class="ghlink-after"><a href="#configuration" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/lib/inets/doc/src/http_client.xml#L36" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    

      <p>The HTTP client default profile is started when the <span class="code">Inets</span>
    application is started and is then available to all processes on
    that Erlang node. Other profiles can also be started at
    application startup, or profiles can be started and stopped
    dynamically in runtime. Each client profile spawns a new
    process to handle each request, unless a persistent connection 
    can be used with or without pipelining.
    The client adds a <span class="code">host</span> header and an empty
    <span class="code">te</span> header if there are no such headers present in the request.</p>

    <p>The client supports IPv6 as long as the underlying mechanisms also do
      so.</p>

    <p>The following is to be put in the Erlang node application configuration file
      to start a profile at application startup:</p>
    <div class="example"><pre>
      [{inets, [{services, [{httpc, PropertyList}]}]}]</pre></div>
    <p>For valid properties, see 
    <span class="bold_code bc-19"><a href="../../man/httpc.html">httpc(3)</a></span>. </p>
  

  <h3 id="getting-started" class="title-link" onMouseOver="document.getElementById('ghlink-getting-started-idm119').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-getting-started-idm119').style.visibility = 'hidden';">
<div class="title-name">3.2 
        Getting Started</div>
<div class="title-anchors"><span id="ghlink-getting-started-idm119" class="ghlink-after"><a href="#getting-started" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/lib/inets/doc/src/http_client.xml#L60" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    <p>Start <span class="code">Inets</span>:</p>
    <div class="example example-erl"><pre> 1 &gt; inets:start().
      ok</pre></div>
    <p>The following calls use the default client profile.
      Use the proxy <span class="code">"www-proxy.mycompany.com:8000"</span>,
      except from requests to localhost. This applies to all the
      following requests.</p>
      <p>Example:</p>
    <div class="example example-erl"><pre>      2 &gt; httpc:set_options([{proxy, {{"www-proxy.mycompany.com", 8000},
      ["localhost"]}}]).
      ok</pre></div>
    <p>The following is an ordinary synchronous request:</p>
    <div class="example example-erl"><pre>      3 &gt; {ok, {{Version, 200, ReasonPhrase}, Headers, Body}} =
      httpc:request(get, {"http://www.erlang.org", []}, [], []).</pre></div>
    <p>With all the default values presented, a get request can also be written
      as follows:</p>
    <div class="example example-erl"><pre>      4 &gt; {ok, {{Version, 200, ReasonPhrase}, Headers, Body}} =
      httpc:request("http://www.erlang.org").</pre></div>
    <p>The following is an ordinary asynchronous request:</p>
    <div class="example example-erl"><pre>      5 &gt; {ok, RequestId} =
      httpc:request(get, {"http://www.erlang.org", []}, [], [{sync, false}]).</pre></div>
      <p>The result is sent to the calling process as
      <span class="code">{http, {ReqestId, Result}}</span>.</p>
    <p>In this case, the calling process is the shell, so the following
      result is received:</p>
    <div class="example example-erl"><pre>      6 &gt; receive {http, {RequestId, Result}} -&gt; ok after 500 -&gt; error end.
      ok</pre></div>
    <p>This sends a request with a specified connection header:</p>
    <div class="example example-erl"><pre>      7 &gt; {ok, {{NewVersion, 200, NewReasonPhrase}, NewHeaders, NewBody}} =
      httpc:request(get, {"http://www.erlang.org", [{"connection", "close"}]},
      [], []).</pre></div>
    <p>This sends an HTTP request over a unix domain socket (experimental):</p>
    <div class="example example-erl"><pre>      8 &gt; httpc:set_options([{ipfamily, local},
      {unix_socket,"/tmp/unix_socket/consul_http.sock"}]).
      9 &gt; {ok, {{NewVersion, 200, NewReasonPhrase}, NewHeaders, NewBody}} =
      httpc:request(put, {"http:///v1/kv/foo", [], [], "hello"}, [], []).</pre></div>
    <p>Start an HTTP client profile:</p>
   
    <div class="example example-none"><pre>      10 &gt; {ok, Pid} = inets:start(httpc, [{profile, foo}]).
      {ok, &lt;0.45.0&gt;}       </pre></div>
    
    <p>The new profile has no proxy settings, so the connection is refused:</p>
      <div class="example example-erl"><pre>      11 &gt; httpc:request("http://www.erlang.org", foo).
      {error, econnrefused}</pre></div>

    <p>Stop the HTTP client profile:</p>
    <div class="example example-erl"><pre>      12 &gt; inets:stop(httpc, foo).
      ok</pre></div>
    
    <p>Alternative way to stop the HTTP client profile:</p>
    <div class="example example-erl"><pre>      13 &gt; inets:stop(httpc, Pid).
      ok</pre></div>
    
  
</div>
<div class="footer">
<hr>
<p>Copyright © 1997-2024 Ericsson AB. All Rights Reserved.</p>
</div>
</div>
</div>
<script type="text/javascript">window.__otpTopDocDir = '../../js/';</script><script type="text/javascript" src="../../js/highlight.js"></script>
<script type="text/javascript">
_docsearch_version = "24";
</script> 
<script src="/assets/js/doc-search.bundle.js"></script>
</body>
</html>
