<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html xmlns:erl="http://erlang.org" xmlns:fn="http://www.w3.org/2005/02/xpath-functions">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="utf-8">
<link rel="stylesheet" href="../otp_doc.css" type="text/css">
<meta name="major-vsn" content="24">
<title>Erlang -- Records</title>
</head>
<body>
<div id="container">
<script id="js" type="text/javascript" language="JavaScript" src="../js/flipmenu/flipmenu.js"></script><script id="js2" type="text/javascript" src="../js/erlresolvelinks.js"></script><script id="js3" type="text/javascript" src="../js/topbar.js"></script><script language="JavaScript" type="text/javascript">
            <!--
              function setscrollpos() {
                var objf = document.getElementById('loadscrollpos');
                if (objf) {
                  document.getElementById("leftnav").firstChild.scrollTop = objf.offsetTop - 10;
                }
              }

              function addEvent(obj, evType, fn){
                if (obj.addEventListener){
                obj.addEventListener(evType, fn, true);
                return true;
              } else if (obj.attachEvent){
                var r = obj.attachEvent("on"+evType, fn);
                return r;
              } else {
                return false;
              }
             }

             addEvent(window, 'load', setscrollpos);

             //-->
</script><div class="topbar">
<div class="topbar-expand "><button onclick="toggleDisplay();"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="Capa_1" viewBox="0 0 54 54" width="24" height="24"><g><path style="fill:#000000;" d="M27,54c-0.552,0-1-0.448-1-1V8c0-0.552,0.448-1,1-1s1,0.448,1,1v45C28,53.552,27.552,54,27,54z"></path><path style="fill:#000000;" d="M11,25c-0.256,0-0.512-0.098-0.707-0.293c-0.391-0.391-0.391-1.023,0-1.414l16-16                                      c0.391-0.391,1.023-0.391,1.414,0s0.391,1.023,0,1.414l-16,16C11.512,24.902,11.256,25,11,25z"></path><path style="fill:#000000;" d="M43,25c-0.256,0-0.512-0.098-0.707-0.293l-16-16c-0.391-0.391-0.391-1.023,0-1.414                                      s1.023-0.391,1.414,0l16,16c0.391,0.391,0.391,1.023,0,1.414C43.512,24.902,43.256,25,43,25z"></path><path style="fill:#000000;" d="M43,2H11c-0.552,0-1-0.448-1-1s0.448-1,1-1h32c0.552,0,1,0.448,1,1S43.552,2,43,2z"></path></g></svg></button></div>
<div class="topbar-title"><h1 id="Records">1 
                Records</h1></div>
<div class="search-expand ">        <button id="docsearch-mobile">
            <svg fill="#000000" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 50 50" width="24" height="24"><path d="M 21 3 C 11.621094 3 4 10.621094 4 20 C 4 29.378906 11.621094 37 21 37 C 24.710938 37 28.140625 35.804688 30.9375 33.78125 L 44.09375 46.90625 L 46.90625 44.09375 L 33.90625 31.0625 C 36.460938 28.085938 38 24.222656 38 20 C 38 10.621094 30.378906 3 21 3 Z M 21 5 C 29.296875 5 36 11.703125 36 20 C 36 28.296875 29.296875 35 21 35 C 12.703125 35 6 28.296875 6 20 C 6 11.703125 12.703125 5 21 5 Z"/></svg>
        </button>
</div>
</div>
<aside class="hide-mobile" id="leftnav"><nav class="leftnav-tube"><div class="erlang-logo-wrapper"><a href="../index.html"><img alt="Erlang Logo" src="../erlang-logo.png" class="erlang-logo"></a></div>
<p class="section-title">Programming Examples</p>
<p class="section-subtitle">User's Guide</p>
<p class="section-version">Version 12.3.2.17</p>
<ul class="panel-sections">
<li><a href="users_guide.html">User's Guide</a></li>
<li><a href="../pdf/otp-system-documentation.pdf">PDF</a></li>
<li><a href="../index.html">Top</a></li>
</ul>
<div id="docsearch"></div>
<div style="padding-left: 1rem; padding-top: 0.1rem;"><a href="/doc/search?v=24">Paginated Search</a></div>
<ul class="expand-collapse-items">
<li><a href="javascript:openAllFlips()">Expand All</a></li>
<li><a href="javascript:closeAllFlips()">Contract All</a></li>
</ul>
<h3 id="chapters">Chapters</h3>
<ul class="flipMenu" imagePath="../js/flipmenu">
<li id="loadscrollpos" title="Records" expanded="true">Records<ul>
<li><a href="records.html">
              Top of chapter
            </a></li>
<li title="Records and Tuples"><a href="records.html#records-and-tuples">Records and Tuples</a></li>
<li title="Defining a Record"><a href="records.html#defining-a-record">Defining a Record</a></li>
<li title="Creating a Record"><a href="records.html#creating-a-record">Creating a Record</a></li>
<li title="Accessing a Record Field"><a href="records.html#accessing-a-record-field">Accessing a Record Field</a></li>
<li title="Updating a Record"><a href="records.html#updating-a-record">Updating a Record</a></li>
<li title="Type Testing"><a href="records.html#type-testing">Type Testing</a></li>
<li title="Pattern Matching"><a href="records.html#pattern-matching">Pattern Matching</a></li>
<li title="Nested Records"><a href="records.html#nested-records">Nested Records</a></li>
<li title="A Longer Example"><a href="records.html#a-longer-example">A Longer Example</a></li>
</ul>
</li>
<li id="no" title="Funs" expanded="false">Funs<ul>
<li><a href="funs.html">
              Top of chapter
            </a></li>
<li title="map"><a href="funs.html#map">map</a></li>
<li title="foreach"><a href="funs.html#foreach">foreach</a></li>
<li title="Syntax of Funs"><a href="funs.html#syntax-of-funs">Syntax of Funs</a></li>
<li title="Variable Bindings Within a Fun"><a href="funs.html#variable-bindings-within-a-fun">Variable Bindings Within a Fun</a></li>
<li title="Funs and Module Lists"><a href="funs.html#funs-and-module-lists">Funs and Module Lists</a></li>
<li title="Funs Returning Funs"><a href="funs.html#funs-returning-funs">Funs Returning Funs</a></li>
</ul>
</li>
<li id="no" title="List Comprehensions" expanded="false">List Comprehensions<ul>
<li><a href="list_comprehensions.html">
              Top of chapter
            </a></li>
<li title="Simple Examples"><a href="list_comprehensions.html#simple-examples">Simple Examples</a></li>
<li title="Quick Sort"><a href="list_comprehensions.html#quick-sort">Quick Sort</a></li>
<li title="Permutations"><a href="list_comprehensions.html#permutations">Permutations</a></li>
<li title="Pythagorean Triplets"><a href="list_comprehensions.html#pythagorean-triplets">Pythagorean Triplets</a></li>
<li title="Simplifications With List Comprehensions"><a href="list_comprehensions.html#simplifications-with-list-comprehensions">Simplifications With List Comprehensions</a></li>
<li title="Variable Bindings in List Comprehensions"><a href="list_comprehensions.html#variable-bindings-in-list-comprehensions">Variable Bindings in List Comprehensions</a></li>
</ul>
</li>
<li id="no" title="Bit Syntax" expanded="false">Bit Syntax<ul>
<li><a href="bit_syntax.html">
              Top of chapter
            </a></li>
<li title="Introduction"><a href="bit_syntax.html#introduction">Introduction</a></li>
<li title="Lexical Note"><a href="bit_syntax.html#lexical-note">Lexical Note</a></li>
<li title="Segments"><a href="bit_syntax.html#segments">Segments</a></li>
<li title="Defaults"><a href="bit_syntax.html#defaults">Defaults</a></li>
<li title="Constructing Binaries and Bitstrings"><a href="bit_syntax.html#constructing-binaries-and-bitstrings">Constructing Binaries and Bitstrings</a></li>
<li title="Matching Binaries"><a href="bit_syntax.html#matching-binaries">Matching Binaries</a></li>
<li title="Appending to a Binary"><a href="bit_syntax.html#appending-to-a-binary">Appending to a Binary</a></li>
</ul>
</li>
</ul></nav></aside><div id="content">
<div class="innertube">
<h1 id="Records">1 Records</h1>
  

  <h3 id="records-and-tuples" class="title-link" onMouseOver="document.getElementById('ghlink-records-and-tuples-idm44').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-records-and-tuples-idm44').style.visibility = 'hidden';">
<div class="title-name">1.1 
        Records and Tuples</div>
<div class="title-anchors"><span id="ghlink-records-and-tuples-idm44" class="ghlink-after"><a href="#records-and-tuples" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/programming_examples/records.xml#L33" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    <p>The main advantage of using records rather than tuples is that
      fields in a record are accessed by name, whereas fields in a
      tuple are accessed by position. To illustrate these differences,
      suppose that you want to represent a person with the tuple
      <span class="code">{Name, Address, Phone}</span>.</p>
      <p>To write functions that manipulate this data, remember the following:</p>
      <ul>
       <li>The <span class="code">Name</span> field is the first element of the tuple.</li>
       <li>The <span class="code">Address</span> field is the second element.</li>
       <li>The <span class="code">Phone</span> field is the third element.</li>
     </ul>
    <p>For example, to extract data from a variable <span class="code">P</span>
      that contains such a tuple, you can write the following code
      and then use pattern matching to extract the relevant fields:</p>
    <div class="example example-none"><pre>Name = element(1, P),
Address = element(2, P),
...</pre></div>
    <p>Such code is difficult to read and understand, and errors
      occur if the numbering of the elements in the tuple is wrong.
      If the data representation of the fields is changed, by re-ordering,
      adding, or removing fields, all references to
      the person tuple must be checked and possibly modified.</p>
    <p>Records allow references to the fields by name, instead of by
      position. In the following example, a record instead of a tuple
      is used to store the data:</p>
    <div class="example example-none"><pre>-record(person, {name, phone, address}).</pre></div>
    <p>This enables references to the fields of the record by name.
    For example, if <span class="code">P</span> is a variable whose value is a
      <span class="code">person</span> record, the following code access
      the name and address fields of the records:</p>
    <div class="example example-none"><pre>Name = P#person.name,
Address = P#person.address,
...</pre></div>
    <p>Internally, records are represented using tagged tuples:</p>
    <div class="example example-none"><pre>{person, Name, Phone, Address}</pre></div>
  

  <h3 id="defining-a-record" class="title-link" onMouseOver="document.getElementById('ghlink-defining-a-record-idm68').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-defining-a-record-idm68').style.visibility = 'hidden';">
<div class="title-name">1.2 
        Defining a Record</div>
<div class="title-anchors"><span id="ghlink-defining-a-record-idm68" class="ghlink-after"><a href="#defining-a-record" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/programming_examples/records.xml#L76" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    <p>This following definition of a <span class="code">person</span> is used in several
      examples in this section. Three fields are included, <span class="code">name</span>,
      <span class="code">phone</span>, and <span class="code">address</span>. The default values for
      <span class="code">name</span> and <span class="code">phone</span> is "" and [], respectively.
      The default value for <span class="code">address</span> is the atom
      <span class="code">undefined</span>, since no default value is supplied for this
      field:</p>
    <div class="example"><pre>
-record(person, {name = "", phone = [], address}).</pre></div>
    <p>The record must be defined in the shell to enable
      use of the record syntax in the examples:</p>
    <div class="example"><pre>
&gt; <span class="bold_code bc-12">rd(person, {name = "", phone = [], address}).</span>
person</pre></div>
    <p>This is because record definitions are only available
      at compile time, not at runtime. For details on records
      in the shell, see the
      <span class="bold_code bc-18"><a href="../man/shell.html">shell(3)</a></span>
      manual page in STDLIB.</p>
  

  <h3 id="creating-a-record" class="title-link" onMouseOver="document.getElementById('ghlink-creating-a-record-idm85').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-creating-a-record-idm85').style.visibility = 'hidden';">
<div class="title-name">1.3 
        Creating a Record</div>
<div class="title-anchors"><span id="ghlink-creating-a-record-idm85" class="ghlink-after"><a href="#creating-a-record" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/programming_examples/records.xml#L99" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    <p>A new <span class="code">person</span> record is created as follows:</p>
    <div class="example"><pre>
&gt; <span class="bold_code bc-12">#person{phone=[0,8,2,3,4,3,1,2], name="Robert"}.</span>
#person{name = "Robert",phone = [0,8,2,3,4,3,1,2],address = undefined}</pre></div>
    <p>As the <span class="code">address</span> field was omitted, its default value
      is used.</p>
      <p>From Erlang 5.1/OTP R8B, a value to all
      fields in a record can be set with the special field <span class="code">_</span>.
      <span class="code">_</span> means "all fields not explicitly specified".</p>
      <p><strong>Example:</strong></p>
    <div class="example"><pre>
&gt; <span class="bold_code bc-12">#person{name = "Jakob", _ = '_'}.</span>
#person{name = "Jakob",phone = '_',address = '_'}</pre></div>
    <p>It is primarily intended to be used in <span class="code">ets:match/2</span> and
      <span class="code">mnesia:match_object/3</span>, to set record fields to the atom
      <span class="code">'_'</span>. (This is a wildcard in <span class="code">ets:match/2</span>.)</p>
  

  <h3 id="accessing-a-record-field" class="title-link" onMouseOver="document.getElementById('ghlink-accessing-a-record-field-idm105').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-accessing-a-record-field-idm105').style.visibility = 'hidden';">
<div class="title-name">1.4 
        Accessing a Record Field</div>
<div class="title-anchors"><span id="ghlink-accessing-a-record-field-idm105" class="ghlink-after"><a href="#accessing-a-record-field" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/programming_examples/records.xml#L119" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    <p>The following example shows how to access a record field:</p>
    <div class="example"><pre>
&gt; <span class="bold_code bc-12">P = #person{name = "Joe", phone = [0,8,2,3,4,3,1,2]}.</span>
#person{name = "Joe",phone = [0,8,2,3,4,3,1,2],address = undefined}
&gt; <span class="bold_code bc-12">P#person.name.</span>
"Joe"</pre></div>
  

  <h3 id="updating-a-record" class="title-link" onMouseOver="document.getElementById('ghlink-updating-a-record-idm111').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-updating-a-record-idm111').style.visibility = 'hidden';">
<div class="title-name">1.5 
        Updating a Record</div>
<div class="title-anchors"><span id="ghlink-updating-a-record-idm111" class="ghlink-after"><a href="#updating-a-record" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/programming_examples/records.xml#L129" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    <p>The following example shows how to update a record:</p>
    <div class="example"><pre>
&gt; <span class="bold_code bc-12">P1 = #person{name="Joe", phone=[1,2,3], address="A street"}.</span>
#person{name = "Joe",phone = [1,2,3],address = "A street"}
&gt; <span class="bold_code bc-12">P2 = P1#person{name="Robert"}.</span>
#person{name = "Robert",phone = [1,2,3],address = "A street"}</pre></div>
  

  <h3 id="type-testing" class="title-link" onMouseOver="document.getElementById('ghlink-type-testing-idm117').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-type-testing-idm117').style.visibility = 'hidden';">
<div class="title-name">1.6 
        Type Testing</div>
<div class="title-anchors"><span id="ghlink-type-testing-idm117" class="ghlink-after"><a href="#type-testing" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/programming_examples/records.xml#L139" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    <p>The following example shows that the guard succeeds if
      <span class="code">P</span> is record of type <span class="code">person</span>:</p>
    <div class="example"><pre>
foo(P) when is_record(P, person) -&gt; a_person;
foo(_) -&gt; not_a_person.</pre></div>
  

  <h3 id="pattern-matching" class="title-link" onMouseOver="document.getElementById('ghlink-pattern-matching-idm123').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-pattern-matching-idm123').style.visibility = 'hidden';">
<div class="title-name">1.7 
        Pattern Matching</div>
<div class="title-anchors"><span id="ghlink-pattern-matching-idm123" class="ghlink-after"><a href="#pattern-matching" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/programming_examples/records.xml#L148" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    <p>Matching can be used in combination with records, as shown in
      the following example:</p>
    <div class="example"><pre>
&gt; <span class="bold_code bc-12">P3 = #person{name="Joe", phone=[0,0,7], address="A street"}.</span>
#person{name = "Joe",phone = [0,0,7],address = "A street"}
&gt; <span class="bold_code bc-12">#person{name = Name} = P3, Name.</span>
"Joe"</pre></div>
    <p>The following function takes a list of <span class="code">person</span> records
      and searches for the phone number of a person with a particular
      name:</p>
    <div class="example example-none"><pre>find_phone([#person{name=Name, phone=Phone} | _], Name) -&gt;
    {found,  Phone};
find_phone([_| T], Name) -&gt;
    find_phone(T, Name);
find_phone([], Name) -&gt;
    not_found.</pre></div>
    <p>The fields referred to in the pattern can be given in any order.</p>
  

  <h3 id="nested-records" class="title-link" onMouseOver="document.getElementById('ghlink-nested-records-idm133').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-nested-records-idm133').style.visibility = 'hidden';">
<div class="title-name">1.8 
        Nested Records</div>
<div class="title-anchors"><span id="ghlink-nested-records-idm133" class="ghlink-after"><a href="#nested-records" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/programming_examples/records.xml#L170" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    <p>The value of a field in a record can be an instance of a
      record. Retrieval of nested data can be done stepwise, or in a
      single step, as shown in the following example:</p>
    <div class="example"><pre>
-record(name, {first = "Robert", last = "Ericsson"}).
-record(person, {name = #name{}, phone}).

demo() -&gt;
  P = #person{name= #name{first="Robert",last="Virding"}, phone=123},
  First = (P#person.name)#name.first.</pre></div>
    <p>Here, <span class="code">demo()</span> evaluates to <span class="code">"Robert"</span>.</p>
  

  <h3 id="a-longer-example" class="title-link" onMouseOver="document.getElementById('ghlink-a-longer-example-idm140').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-a-longer-example-idm140').style.visibility = 'hidden';">
<div class="title-name">1.9 
        A Longer Example</div>
<div class="title-anchors"><span id="ghlink-a-longer-example-idm140" class="ghlink-after"><a href="#a-longer-example" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/programming_examples/records.xml#L185" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    <p>Comments are embedded in the following example:</p>
    <div class="example"><pre>
%% File: person.hrl

%%-----------------------------------------------------------
%% Data Type: person
%% where:
%%    name:  A string (default is undefined).
%%    age:   An integer (default is undefined).
%%    phone: A list of integers (default is []).
%%    dict:  A dictionary containing various information 
%%           about the person. 
%%           A {Key, Value} list (default is the empty list).
%%------------------------------------------------------------
-record(person, {name, age, phone = [], dict = []}).</pre></div>
    <div class="example"><pre>
-module(person).
-include("person.hrl").
-compile(export_all). % For test purposes only.

%% This creates an instance of a person.
%%   Note: The phone number is not supplied so the
%%         default value [] will be used.

make_hacker_without_phone(Name, Age) -&gt;
   #person{name = Name, age = Age, 
           dict = [{computer_knowledge, excellent}, 
                   {drinks, coke}]}.

%% This demonstrates matching in arguments

print(#person{name = Name, age = Age,
              phone = Phone, dict = Dict}) -&gt;
  io:format("Name: ~s, Age: ~w, Phone: ~w ~n" 
            "Dictionary: ~w.~n", [Name, Age, Phone, Dict]).

%% Demonstrates type testing, selector, updating.

birthday(P) when is_record(P, person) -&gt; 
   P#person{age = P#person.age + 1}.

register_two_hackers() -&gt;
   Hacker1 = make_hacker_without_phone("Joe", 29),
   OldHacker = birthday(Hacker1),
   % The central_register_server should have 
   % an interface function for this.
   central_register_server ! {register_person, Hacker1},
   central_register_server ! {register_person, 
             OldHacker#person{name = "Robert", 
                              phone = [0,8,3,2,4,5,3,1]}}.</pre></div>
  
</div>
<div class="footer">
<hr>
<p>Copyright © 2003-2024 Ericsson AB. All Rights Reserved.</p>
</div>
</div>
</div>
<script type="text/javascript">window.__otpTopDocDir = '../js/';</script><script type="text/javascript" src="../js/highlight.js"></script>
<script type="text/javascript">
_docsearch_version = "24";
</script> 
<script src="/assets/js/doc-search.bundle.js"></script>
</body>
</html>
