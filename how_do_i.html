<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html xmlns:fn="http://www.w3.org/2005/02/xpath-functions">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" href="./otp_doc.css" type="text/css">
<title>Erlang -- How do I...</title>
</head>
<body bgcolor="white" text="#000000" link="#0000ff" vlink="#ff00ff" alink="#ff0000"><div id="container">
<script id="js" type="text/javascript" language="JavaScript" src="./js/flipmenu/flipmenu.js"></script><script id="js2" type="text/javascript" src="./js/erlresolvelinks.js"></script><script language="JavaScript" type="text/javascript">
            <!--            
              function getWinHeight() {
                var myHeight = 0;
                if( typeof( window.innerHeight ) == 'number' ) {
                  //Non-IE
                  myHeight = window.innerHeight;
                } else if( document.documentElement && ( document.documentElement.clientWidth || 
                                                         document.documentElement.clientHeight ) ) {
                  //IE 6+ in 'standards compliant mode'
                  myHeight = document.documentElement.clientHeight;
                } else if( document.body && ( document.body.clientWidth || document.body.clientHeight ) ) {
                  //IE 4 compatible
                  myHeight = document.body.clientHeight;
                }
                return myHeight;            
              }

              function setscrollpos() {
                var objf=document.getElementById('loadscrollpos');
                 document.getElementById("leftnav").scrollTop = objf.offsetTop - getWinHeight()/2;
              }

              function addEvent(obj, evType, fn){ 
                if (obj.addEventListener){ 
                obj.addEventListener(evType, fn, true); 
                return true; 
              } else if (obj.attachEvent){ 
                var r = obj.attachEvent("on"+evType, fn); 
                return r; 
              } else { 
                return false; 
              } 
             }

             addEvent(window, 'load', setscrollpos);

             //--></script><div id="leftnav"><div class="innertube">
<img alt="Erlang logo" src="./erlang-logo.png"><br><p><strong>How do I...</strong><br><strong></strong><br></p>
<a href="faq.html">Cover</a><br><br><a href="javascript:openAllFlips()">Expand All</a><br><a href="javascript:closeAllFlips()">Contract All</a><p><small><strong>Table of Contents</strong></small></p>
<ul class="flipMenu" imagepath="./js/flipmenu">
<li id="no" title="What is Erlang" expanded="false">What is Erlang<ul>
<li><a href="introduction.html">
              Top of chapter
            </a></li>
<li title="In a nutshell, what is Erlang?"><a href="introduction.html#idm19">In a nutshell, what is Erlang?</a></li>
<li title="What is OTP?"><a href="introduction.html#idm24">What is OTP?</a></li>
<li title="What sort of applications is Erlang particularly suitable for?
"><a href="introduction.html#idm27">What sort of applications is Erlang particularly suitable for?
</a></li>
<li title="What sort of problems is Erlang not particularly suitable for?
"><a href="introduction.html#idm53">What sort of problems is Erlang not particularly suitable for?
</a></li>
<li title=" Who uses Erlang for product development?"><a href="introduction.html#idm60"> Who uses Erlang for product development?</a></li>
<li title=" Who uses Erlang for research and teaching?"><a href="introduction.html#idm148"> Who uses Erlang for research and teaching?</a></li>
<li title=" Can I get commercial support for Erlang?"><a href="introduction.html#idm214"> Can I get commercial support for Erlang?</a></li>
</ul>
</li>
<li id="no" title="Questions about this FAQ" expanded="false">Questions about this FAQ<ul>
<li><a href="faq_questions.html">
              Top of chapter
            </a></li>
<li title="Where can I get the latest version of the FAQ?"><a href="faq_questions.html#idm226">Where can I get the latest version of the FAQ?</a></li>
<li title="What's new?"><a href="faq_questions.html#idm230">What's new?</a></li>
<li title="Where do I ask questions which are not answered in this FAQ?"><a href="faq_questions.html#idm234">Where do I ask questions which are not answered in this FAQ?</a></li>
<li title="The answer to question 2.4 is wrong!"><a href="faq_questions.html#idm240">The answer to question 2.4 is wrong!</a></li>
<li title="Disclaimer/Distribution"><a href="faq_questions.html#idm248">Disclaimer/Distribution</a></li>
</ul>
</li>
<li id="no" title="Obtaining Erlang/OTP and books/articles about it" expanded="false">Obtaining Erlang/OTP and books/articles about it<ul>
<li><a href="obtaining.html">
              Top of chapter
            </a></li>
<li title="Where can I get Erlang/OTP?"><a href="obtaining.html#idm260">Where can I get Erlang/OTP?</a></li>
<li title="What's the current version of (Open Source) Erlang?"><a href="obtaining.html#idm273">What's the current version of (Open Source) Erlang?</a></li>
<li title=" Which licence is Open Source Erlang shipped with?"><a href="obtaining.html#idm279"> Which licence is Open Source Erlang shipped with?</a></li>
<li title="Where is the Erlang documentation?"><a href="obtaining.html#idm284">Where is the Erlang documentation?</a></li>
<li title="Which book about Erlang should I read?"><a href="obtaining.html#idm291">Which book about Erlang should I read?</a></li>
<li title=" What advanced Erlang documentation is there?"><a href="obtaining.html#idm323"> What advanced Erlang documentation is there?</a></li>
<li title=" What documentation is there in related subjects?"><a href="obtaining.html#idm352"> What documentation is there in related subjects?</a></li>
<li title="Is there public repository for the Erlang source?"><a href="obtaining.html#idm365">Is there public repository for the Erlang source?</a></li>
<li title="How can I contribute to Erlang?"><a href="obtaining.html#idm371">How can I contribute to Erlang?</a></li>
<li title="How can I propose changes to the language itself?"><a href="obtaining.html#idm385">How can I propose changes to the language itself?</a></li>
<li title="How do I report a bug?"><a href="obtaining.html#idm389">How do I report a bug?</a></li>
<li title="Where is Erlang discussed in the real world?"><a href="obtaining.html#idm393">Where is Erlang discussed in the real world?</a></li>
<li title="Where is Erlang discussed online?"><a href="obtaining.html#idm408">Where is Erlang discussed online?</a></li>
<li title="Where can I find Erlang programmers/employers?"><a href="obtaining.html#idm432">Where can I find Erlang programmers/employers?</a></li>
</ul>
</li>
<li id="no" title="Getting Started" expanded="false">Getting Started<ul>
<li><a href="getting_started.html">
              Top of chapter
            </a></li>
<li title="How long does it take to learn Erlang?"><a href="getting_started.html#idm457">How long does it take to learn Erlang?</a></li>
<li title="How can I learn Erlang?"><a href="getting_started.html#idm462">How can I learn Erlang?</a></li>
<li title='What does "hello world" look like?'><a href="getting_started.html#idm479">What does "hello world" look like?</a></li>
<li title="How do I quit the Erlang shell?"><a href="getting_started.html#idm488">How do I quit the Erlang shell?</a></li>
<li title="Why does Erlang print &quot;ok&quot; after my program's output?"><a href="getting_started.html#idm498">Why does Erlang print "ok" after my program's output?</a></li>
</ul>
</li>
<li id="loadscrollpos" title="How do I..." expanded="true">How do I...<ul>
<li><a href="how_do_i.html">
              Top of chapter
            </a></li>
<li title="...compare numbers?"><a href="how_do_i.html#idm523">...compare numbers?</a></li>
<li title="...represent a text-string?"><a href="how_do_i.html#idm529">...represent a text-string?</a></li>
<li title="...convert a string to lower case?"><a href="how_do_i.html#idm544">...convert a string to lower case?</a></li>
<li title="...convert a text string representation of a term to a term?"><a href="how_do_i.html#idm550">...convert a text string representation of a term to a term?</a></li>
<li title="...use unicode/UTF-8?"><a href="how_do_i.html#idm555">...use unicode/UTF-8?</a></li>
<li title="...destructively update data, like in C"><a href="how_do_i.html#idm559">...destructively update data, like in C</a></li>
<li title="...run an Erlang program directly from the unix shell?"><a href="how_do_i.html#idm566">...run an Erlang program directly from the unix shell?</a></li>
<li title="...communicate with non-Erlang programs?"><a href="how_do_i.html#idm575">...communicate with non-Erlang programs?</a></li>
<li title="...write a unix pipe program in Erlang?"><a href="how_do_i.html#idm603">...write a unix pipe program in Erlang?</a></li>
<li title="...communicate with a DBMS?"><a href="how_do_i.html#idm609">...communicate with a DBMS?</a></li>
<li title="...decode binary Erlang terms"><a href="how_do_i.html#idm613">...decode binary Erlang terms</a></li>
<li title="...decode Erlang crash dumps"><a href="how_do_i.html#idm619">...decode Erlang crash dumps</a></li>
<li title="...estimate performance of an Erlang system?"><a href="how_do_i.html#idm623">...estimate performance of an Erlang system?</a></li>
<li title="...measure performance of an Erlang system?"><a href="how_do_i.html#idm638">...measure performance of an Erlang system?</a></li>
<li title="...measure memory consumption in an Erlang system?"><a href="how_do_i.html#idm645">...measure memory consumption in an Erlang system?</a></li>
<li title="...estimate productivity in an Erlang project?"><a href="how_do_i.html#idm673">...estimate productivity in an Erlang project?</a></li>
<li title="...use multiple CPUs (or cores) in one server?"><a href="how_do_i.html#idm678">...use multiple CPUs (or cores) in one server?</a></li>
<li title="...run distributed Erlang through a firewall?"><a href="how_do_i.html#idm681">...run distributed Erlang through a firewall?</a></li>
<li title="...distribute the Erlang programs I write to my friends/colleagues/users?"><a href="how_do_i.html#idm688">...distribute the Erlang programs I write to my friends/colleagues/users?</a></li>
<li title="...write to standard error (stderr)?"><a href="how_do_i.html#idm694">...write to standard error (stderr)?</a></li>
</ul>
</li>
<li id="no" title="Erlang Libraries" expanded="false">Erlang Libraries<ul>
<li><a href="libraries.html">
              Top of chapter
            </a></li>
<li title=" What's in the OTP libraries?"><a href="libraries.html#idm710"> What's in the OTP libraries?</a></li>
<li title=" Is there a collection of data structures, e.g. balanced trees?"><a href="libraries.html#idm736"> Is there a collection of data structures, e.g. balanced trees?</a></li>
<li title="Is there a serial port driver for Erlang?"><a href="libraries.html#idm768">Is there a serial port driver for Erlang?</a></li>
<li title="Is there a toolkit for building GUIs?"><a href="libraries.html#idm773">Is there a toolkit for building GUIs?</a></li>
<li title="I've written an application/library. How do I package it so others can use it?"><a href="libraries.html#idm786">I've written an application/library. How do I package it so others can use it?</a></li>
<li title="I've written a library to handle XYZ. How do I get it into the standard Erlang distribution?"><a href="libraries.html#idm797">I've written a library to handle XYZ. How do I get it into the standard Erlang distribution?</a></li>
</ul>
</li>
<li id="no" title="Erlang Tools" expanded="false">Erlang Tools<ul>
<li><a href="tools.html">
              Top of chapter
            </a></li>
<li title="Is there a pretty printer for Erlang?"><a href="tools.html#idm811">Is there a pretty printer for Erlang?</a></li>
<li title="Is there an erlang formatter for CI?"><a href="tools.html#idm815">Is there an erlang formatter for CI?</a></li>
<li title="Where is the source for LEEX (the erlang lexer)?"><a href="tools.html#idm819">Where is the source for LEEX (the erlang lexer)?</a></li>
<li title="Is there a diagram tool specifically for Erlang?"><a href="tools.html#idm828">Is there a diagram tool specifically for Erlang?</a></li>
<li title="What code testing tools and suites exist for and in Erlang/OTP?"><a href="tools.html#idm836">What code testing tools and suites exist for and in Erlang/OTP?</a></li>
<li title="Is there a way to benchmark an Erlang implementation?"><a href="tools.html#idm848">Is there a way to benchmark an Erlang implementation?</a></li>
<li title="Does anyone have a magic file for Erlang?"><a href="tools.html#idm852">Does anyone have a magic file for Erlang?</a></li>
<li title="Which IDE should I use for Erlang development?"><a href="tools.html#idm856">Which IDE should I use for Erlang development?</a></li>
<li title="Are there Erlang Coding Guidelines?"><a href="tools.html#idm877">Are there Erlang Coding Guidelines?</a></li>
<li title="What refactoring tools are there for Erlang"><a href="tools.html#idm881">What refactoring tools are there for Erlang</a></li>
<li title="What static code analysis tools are there?"><a href="tools.html#idm890">What static code analysis tools are there?</a></li>
<li title='Is there a "reverse compiler" for BEAM files?'><a href="tools.html#idm900">Is there a "reverse compiler" for BEAM files?</a></li>
</ul>
</li>
<li id="no" title="Implementations and Ports of Erlang" expanded="false">Implementations and Ports of Erlang<ul>
<li><a href="implementations.html">
              Top of chapter
            </a></li>
<li title="Open Source Erlang"><a href="implementations.html#idm922">Open Source Erlang</a></li>
<li title="What Experimental, Research and Historical
Implementations are there?"><a href="implementations.html#idm926">What Experimental, Research and Historical
Implementations are there?</a></li>
<li title=" Which version of Erlang am I running?"><a href="implementations.html#idm944"> Which version of Erlang am I running?</a></li>
<li title=" What operating systems does Erlang run on?"><a href="implementations.html#idm950"> What operating systems does Erlang run on?</a></li>
<li title=" What implementations of the Erlang Virtual Machine are there?"><a href="implementations.html#idm969"> What implementations of the Erlang Virtual Machine are there?</a></li>
<li title="Can Erlang be compiled under Microsoft Windows?"><a href="implementations.html#idm980">Can Erlang be compiled under Microsoft Windows?</a></li>
<li title="How can I cross-compile Erlang?"><a href="implementations.html#idm983">How can I cross-compile Erlang?</a></li>
<li title="Is Erlang small enough for embedded systems?"><a href="implementations.html#idm987">Is Erlang small enough for embedded systems?</a></li>
</ul>
</li>
<li id="no" title="Troubleshooting, Problems and 'Gotchas'" expanded="false">Troubleshooting, Problems and 'Gotchas'<ul>
<li><a href="problems.html">
              Top of chapter
            </a></li>
<li title="Why can't I write a = 3 (badmatch)?"><a href="problems.html#idm1004">Why can't I write a = 3 (badmatch)?</a></li>
<li title="Why can't I change the value of a variable?"><a href="problems.html#idm1017">Why can't I change the value of a variable?</a></li>
<li title="Why do lists of numbers get printed incorrectly?"><a href="problems.html#idm1024">Why do lists of numbers get printed incorrectly?</a></li>
<li title=" Why can't I call arbitrary functions in a guard?"><a href="problems.html#idm1035"> Why can't I call arbitrary functions in a guard?</a></li>
<li title=" Why can't I use &quot;or&quot; in a guard?"><a href="problems.html#idm1047"> Why can't I use "or" in a guard?</a></li>
<li title=" Why does 'catch' give me a syntax error?"><a href="problems.html#idm1063"> Why does 'catch' give me a syntax error?</a></li>
<li title=" What is a sticky directory?"><a href="problems.html#idm1069"> What is a sticky directory?</a></li>
<li title="Why won't my distributed Erlang nodes communicate?"><a href="problems.html#idm1076">Why won't my distributed Erlang nodes communicate?</a></li>
<li title="When distribution won't work"><a href="problems.html#idm1099">When distribution won't work</a></li>
<li title="Avoiding DNS"><a href="problems.html#idm1114">Avoiding DNS</a></li>
<li title="
Why does my application die every second time I load new code into it?
"><a href="problems.html#idm1120">
Why does my application die every second time I load new code into it?
</a></li>
<li title="Why can't I open devices (e.g. a serial port) like normal files?
"><a href="problems.html#idm1127">Why can't I open devices (e.g. a serial port) like normal files?
</a></li>
<li title="
Why doesn't the stack backtrace show the right functions for
this code:
"><a href="problems.html#idm1132">
Why doesn't the stack backtrace show the right functions for
this code:
</a></li>
<li title="What do I do if I get an error when compiling Open Source Erlang?
"><a href="problems.html#idm1136">What do I do if I get an error when compiling Open Source Erlang?
</a></li>
<li title="Why do errors in the shell kill other processes?"><a href="problems.html#idm1149">Why do errors in the shell kill other processes?</a></li>
<li title="Why do I get incorrect answers for floating-point operations?"><a href="problems.html#idm1157">Why do I get incorrect answers for floating-point operations?</a></li>
</ul>
</li>
<li id="no" title="Academic and Historical Questions" expanded="false">Academic and Historical Questions<ul>
<li><a href="academic.html">
              Top of chapter
            </a></li>
<li title=' Why is Erlang called "Erlang"?'><a href="academic.html#idm1175"> Why is Erlang called "Erlang"?</a></li>
<li title="Who invented Erlang?"><a href="academic.html#idm1178">Who invented Erlang?</a></li>
<li title="Where does Erlang syntax come from?"><a href="academic.html#idm1183">Where does Erlang syntax come from?</a></li>
<li title="Why is Ericsson giving away Erlang?"><a href="academic.html#idm1186">Why is Ericsson giving away Erlang?</a></li>
<li title="What does soft realtime mean?"><a href="academic.html#idm1197">What does soft realtime mean?</a></li>
<li title=" How did the first Erlang compiler get written?"><a href="academic.html#idm1211"> How did the first Erlang compiler get written?</a></li>
<li title=" Erlang Syntax and Semantics Details"><a href="academic.html#idm1225"> Erlang Syntax and Semantics Details</a></li>
<li title=" Is the order of message reception guaranteed?"><a href="academic.html#idm1229"> Is the order of message reception guaranteed?</a></li>
<li title="If I send a message, is it guaranteed to reach the receiver?
"><a href="academic.html#idm1234">If I send a message, is it guaranteed to reach the receiver?
</a></li>
<li title=" What limits does Erlang have?"><a href="academic.html#idm1276"> What limits does Erlang have?</a></li>
<li title="Do funs behave during a code change?"><a href="academic.html#idm1280">Do funs behave during a code change?</a></li>
<li title="Examples of bound funs causing surprises"><a href="academic.html#idm1288">Examples of bound funs causing surprises</a></li>
<li title="Is it just me, or are records ugly?"><a href="academic.html#idm1301">Is it just me, or are records ugly?</a></li>
<li title="Can a process receive messages with varying priorities?"><a href="academic.html#idm1312">Can a process receive messages with varying priorities?</a></li>
<li title="What's the history of static type checking in Erlang?"><a href="academic.html#idm1316">What's the history of static type checking in Erlang?</a></li>
<li title="How does type checking in Erlang compare to
Java/Python/C/C++/Haskell?"><a href="academic.html#idm1321">How does type checking in Erlang compare to
Java/Python/C/C++/Haskell?</a></li>
<li title="What's Erlang's relation to 'object oriented' programming?"><a href="academic.html#idm1328">What's Erlang's relation to 'object oriented' programming?</a></li>
<li title="How are strings implemented and how can I speed up my string code?"><a href="academic.html#idm1338">How are strings implemented and how can I speed up my string code?</a></li>
<li title=" How does the Garbage Collector (GC) work?"><a href="academic.html#idm1357"> How does the Garbage Collector (GC) work?</a></li>
<li title="Can I exploit knowledge about my program to make the GC more efficient?"><a href="academic.html#idm1362">Can I exploit knowledge about my program to make the GC more efficient?</a></li>
<li title="Could the Java Virtual Machine be used to run Erlang?"><a href="academic.html#idm1376">Could the Java Virtual Machine be used to run Erlang?</a></li>
<li title="Is it possible to prove the correctness of Erlang programs?
"><a href="academic.html#idm1381">Is it possible to prove the correctness of Erlang programs?
</a></li>
<li title="I've heard it's a bad idea to program defensively in Erlang. Why?"><a href="academic.html#idm1387">I've heard it's a bad idea to program defensively in Erlang. Why?</a></li>
</ul>
</li>
<li id="no" title="Mnesia Database Questions" expanded="false">Mnesia Database Questions<ul>
<li><a href="mnesia.html">
              Top of chapter
            </a></li>
<li title="What is Mnesia good at?"><a href="mnesia.html#idm1411">What is Mnesia good at?</a></li>
<li title="What is Mnesia not so good at?"><a href="mnesia.html#idm1425">What is Mnesia not so good at?</a></li>
<li title="Is Mnesia good for storing blobs?"><a href="mnesia.html#idm1429">Is Mnesia good for storing blobs?</a></li>
<li title="Is there an SQL interface for mnesia?"><a href="mnesia.html#idm1444">Is there an SQL interface for mnesia?</a></li>
<li title="How much data can be stored in Mnesia?"><a href="mnesia.html#idm1448">How much data can be stored in Mnesia?</a></li>
</ul>
</li>
</ul>
</div></div>
<div id="content">
<div class="innertube">
<h1>5 How do I...</h1>
  


  <p>
	This section is intended for the impatient. Most of these
	questions would resolved by working through the (on-line)
	Erlang manuals, but sometimes we just want a quick answer...
	</p>
<p>

	Keep in mind that the program fragments are intended to
	illustrate an idea, not serve as re-useable, robust modules!

</p>

  <h3><a name="idm523">5.1 
        ...compare numbers?</a></h3>
    <p>

	The operators for comparing numbers are <span class="code"> &gt;, &gt;=, &lt;,
	=&lt;, == and =/= </span>. Some of these are a little different
	to C for historical reasons. Here are some examples:
	</p>

	<div class="example"><pre>
	Eshell V4.9.1  (abort with ^G)
	1&gt; 13 &gt; 2.
	true
	2&gt; 18.2 &gt;= 19.
	false
	3&gt; 3 == 3.
	true
	4&gt; 4 =/= 4.
	false
	5&gt; 3 = 4.
	** exited: {{badmatch,4},[{erl_eval,expr,3}]} **
	</pre></div>

    <p>
	The last example is a (failed) pattern match rather than a
	comparison.
    </p>

  
  <h3><a name="idm529">5.2 
        ...represent a text-string?</a></h3>

    <p>
    As a list of characters. You can write
    </p>

	<div class="example"><pre>A = "hello world".</pre></div>

    <p>	which is exactly the same as writing</p>

	<div class="example"><pre>A = [104,101,108,108,111,32,119,111,114,108,100].
	</pre></div>

    <p>and also the same as writing</p>

	<div class="example"><pre>A = [$h,$e,$l,$l,$o,$ ,$w,$o,$r,$l,$d].</pre></div>

    <p>
	Each character consumes 8 bytes of memory on a 32 bit
        machine (a 32 bit integer and a 32 bit pointer) and twice
        as much on 64 bit machines. Access to the nth. element takes
        O(n) time. Access to the first element takes O(1) time, as
        does prepending a character.
	</p>
<p>

	The bit-syntax, which is described in <span class="bold_code"><a href="http://www.erlang.org/doc/reference_manual/expressions.html#6.16">
	the manual</a></span> provides an alternative, but somewhat
	limited, way to represent strings compactly, for instance:
</p>

    <div class="example"><pre>
	1&gt; A = &lt;&lt;"this string consumes one byte per character"&gt;&gt;.
	&lt;&lt;116,104,105,115,32,115,116,114,...&gt;&gt;
	2&gt; size(A).
	43
	3&gt; &lt;&lt;_:8/binary,Q:3/binary,R/binary&gt;&gt; = A.
	&lt;&lt;116,104,105,115,32,115,116,114,...&gt;&gt;
	4&gt; Q.
	&lt;&lt;105,110,103&gt;&gt;
	5&gt; binary_to_list(Q).
	"ing"
	</pre></div>
    <p>
	This style of pattern-matching manipulation of strings
	provides O(1) equivalents of some string operations which are
	O(N) when using the list representation. Some other operations
	which are O(1) in the list representation become O(N) when
	using the bit-syntax.
	</p>
<p>

	There are general ways to
	<span class="bold_code"><a href="academic.html#string-performance">improve
        string performance.</a></span>

</p>
  <h3><a name="idm544">5.3 
        ...convert a string to lower case?</a></h3>

    <div class="example"><pre>
        1&gt; string:to_lower("Five Boxing WIZARDS").
	"five boxing wizards"
	2&gt; string:to_upper("jump QuickLY").
	"JUMP QUICKLY"
        </pre></div>

    <p>
	If you have an older version of Erlang (prior to R11B-5), you can
        find these two functions in the <span class="code">httpd_util</span> module.
        </p>
  

  <h3><a name="idm550">5.4 
        ...convert a text string representation of a term to a term?</a></h3>
    <a name="howto-string-to-term"></a>
    

    <div class="example"><pre>
        1&gt; {ok,Tokens,_} = erl_scan:string("[{foo,bar},x,3].").
        {ok,[{'[',1}, {'{',1}, {atom,1,foo}, {',',1}, {atom,1,bar},...
        2&gt; {ok,Term} = erl_parse:parse_term(Tokens).
        {ok,[{foo,bar},x,3]}
        </pre></div>

    <p>
        See also <span class="code">file:consult/1</span>
    </p>

  <h3><a name="idm555">5.5 
        ...use unicode/UTF-8?</a></h3>
    <p>

	Erlang represents strings as lists of integers, so it is
	directly capable of handling unicode. The <span class="bold_code"><a href="http://www.erlang.org/doc/man/unicode.html">unicode</a></span>
	library module helps with converting between various
	representations of unicode.

	</p>
  <h3><a name="idm559">5.6 
        ...destructively update data, like in C</a></h3>
    <p>
        Not being able to do this is considered a feature of Erlang. The
        <span class="bold_code"><a href="http://www.erlang.org/download/erlang-book-part1.pdf">
        Erlang book</a></span> explains this in chapter 1.


</p>
<p>
        Having said that, there are common methods to achieve
        effects similar to destructive update: store the data
        in a process (use messages to manipulate it), store the data
        in ETS or use a data structure designed
        for relatively cheap updates (the <span class="code">dict</span> library
        module is one common solution).

</p>
  <h3><a name="idm566">5.7 
        ...run an Erlang program directly from the unix shell?</a></h3>
    <a name="noshell"></a>
    
    <p>
	As of Erlang/OTP R11B-4, you can run Erlang code without
        compiling by using Escript. The <span class="bold_code"><a href="http://www.erlang.org/doc/man/escript.html">manual page</a></span> has a
        complete example showing how to do it.

	</p>
<p>
	Escript is intended for short, "script-like" programs. A more
        general way to do it, which also works for older Erlang releases,
        is to start the Erlang VM without a shell and pass more switches
	to the Erlang virtual machine. Here's hello world again:
	</p>

	<div class="example"><pre>
	-module(hello).
	-export([hello_world/0]).

	hello_world() -&gt;
		io:fwrite("hello, world\n").
	</pre></div>

        <p>
	Save this as <span class="code">hello.erl</span>, compile it and
	run it directly	from the unix (or msdos) command line:
	</p>

	<div class="example"><pre>
	matthias &gt;erl -compile hello
	matthias &gt;erl -noshell -s hello hello_world -s init stop
	hello, world
	</pre></div>

  
  <h3><a name="idm575">5.8 
        ...communicate with non-Erlang programs?</a></h3>
    <p>

	Erlang has several mechanisms for communicating with programs
	written in other languages, each with different tradeoffs. The
	Erlang documentation includes a
	<span class="bold_code"><a href="http://www.erlang.org/doc/tutorial/users_guide.html">
	guide to interfacing with other languages</a></span> which describes
	the most common mechanisms:
</p>

    <ul>
      <li><p>Distributed Erlang</p></li>
      <li><p>Ports and linked-in drivers</p></li>
      <li><p>EI (C interface to Erlang, replaces the
                    mostly deprecated erl_interface)</p></li>
      <li><p>Jinterface (Java interface to Erlang)</p></li>
      <li><p>IC (IDL compiler, used with C or Java)</p></li>
      <li><p>General TCP or UDP protocols, including ASN.1</p></li>
      <li><p>NIFs (Functions implemented in C)</p></li>
    </ul>

    <p>
	Some of the above methods are easier to use than others. Loosely
	coupled approaches, such as using a custom protocol over a TCP socket,
	are easier to debug than the more tightly coupled options such as
	linked-in drivers. The Erlang-questions mailing list archives
	contain many desperate cries for help with memory corruption problems
	caused by using Erl Interface and linked-in drivers incorrectly...
	</p>
<p>
	There are a number of user-supported methods and tools, including
</p>
    <ul>
      <li><p><span class="bold_code"><a href="http://code.google.com/p/epi/">A set of C++ classes</a></span></p></li>
      <li><p><span class="bold_code"><a href="http://www.lysator.liu.se/~tab/erlang/py_interface/">A Python implementation of an Erlang hidden node</a></span></p></li>
    </ul>

  

  <h3><a name="idm603">5.9 
        ...write a unix pipe program in Erlang?</a></h3>
    <p>

	Lots of useful utilities in unix can be chained together
	by piping one program's output to another program's input.
	Here's an example which rot-13 encodes standard input
	and sends it to standard output:

	</p>
    <div class="example"><pre>
	-module(rot13).
	-export([rot13/0]).

	rot13() -&gt;
	  case io:get_chars('', 8192) of
	    eof -&gt; init:stop();
	  Text -&gt;
	    Rotated = [rot13(C) || C &lt;- Text],
	    io:put_chars(Rotated),
	    rot13()
	end.

	rot13(C) when C &gt;= $a, C =&lt; $z -&gt; $a + (C - $a + 13) rem 26;
	rot13(C) when C &gt;= $A, C =&lt; $Z -&gt; $A + (C - $A + 13) rem 26;
	rot13(C) -&gt; C.
        </pre></div>

    <p>
	After compiling this, you can run it from the command line:

	</p>
    <div class="example"><pre>
	matthias&gt; cat ~/.bashrc | erl -noshell -s rot13 rot13 | wc
	</pre></div>

  
  <h3><a name="idm609">5.10 
        ...communicate with a DBMS?</a></h3>
    <p>

	There are two completely different ways to communicate with
	a database. One way is for Erlang to act as a database for
	another system. The other way is for an Erlang program to
	access a database. The former is a "research" topic. The
	latter is easily accomplished by going via ODBC, which allows
	you to access almost any commercial DBMS. The
	<span class="bold_code"><a href="http://www.erlang.org/doc/apps/odbc/index.html">
	OTP ODBC manual</a></span>	explains how to do this.

</p>
  <h3><a name="idm613">5.11 
        ...decode binary Erlang terms</a></h3>
    <p>

	Erlang terms can be converted to and from binary representations
	using bifs:

	</p>
    <div class="example"><pre>
	1&gt; term_to_binary({3, abc, "def"}).
	&lt;&lt;131,104,3,97,3,100,0,3,97,98,99,107,0,3,100,101,102&gt;&gt;
	2&gt; binary_to_term(v(1)).
	{3,abc,"def"}
        </pre></div>

    <p>

	If you want to decode them using C programs, take a look
	at <span class="bold_code"><a href="http://erlang.org/doc/man/ei.html">EI</a></span>.

</p>
  <h3><a name="idm619">5.12 
        ...decode Erlang crash dumps</a></h3>
    <p>

	Erlang crash dumps provide information about the state of the
	system when the emulator crashed. The
	<span class="bold_code"><a href="http://erlang.org/doc/apps/erts/crash_dump.html">manual explains</a></span> how to interpret them.


</p>
  <h3><a name="idm623">5.13 
        ...estimate performance of an Erlang system?</a></h3>
    <p>

	Mike Williams, one of Erlang's original developers, is fond
	of saying
</p> <p>"If you don't run experiments before
	you start designing a <strong>new</strong> system, your
	<strong>entire system</strong> will be an experiment!"</p>
    <p>

	This philosophy is widespread around Erlang projects, in part
	because the Erlang development environment encourages development
	by prototyping. Such prototyping will also allow sensible
	performance estimates to be made.
	</p>
<p>

	For those of you who want to leverage experience with C
	and C++, some rough rules of thumb are:
	</p>

    <ul>
      <li><p>Code which involves mainly number crunching and
	data processing will run about 10 times slower than
	an equivalent C program. This includes almost all
	"micro benchmarks"</p></li>

      <li><p>Large systems which spent most of their time
	communicating with other systems, recovering from faults and
	making complex decisions run at least as fast as equivalent
	C programs.</p></li>
    </ul>

    <p>
	Like in any other language or system, experienced developers
	develop a sense of which operations are expensive and which
	are cheap. Erlang newcomers accustomed to the relatively slow
	interprocess communication facilities in other languages
	tend to over-estimate the cost of creating Erlang processes and
	passing messages between them.

</p>
  <h3><a name="idm638">5.14 
        ...measure performance of an Erlang system?</a></h3>
    <p>

	The <strong>timer</strong> module measures the wall clock time
	elapsed during execution of a function:

	</p>
    <div class="example"><pre>
	7&gt; timer:tc(lists, reverse, ["hello world"]).
	{27,"dlrow olleh"}
	8&gt; timer:tc(lists, reverse, ["hello world this is a longer string"]).
	{34,"gnirts regnol a si siht dlrow olleh"}
	</pre></div>

    <p>

	The <span class="code">eperf</span> library provides a way to profile
	a system.

</p>
  <h3><a name="idm645">5.15 
        ...measure memory consumption in an Erlang system?</a></h3>
    <p>

	Memory consumption is a bit of a tricky issue in Erlang. Usually,
	you don't need to worry about it because the garbage collector
	looks after memory management for you. But, when things go
	wrong, there are several sources of information. Starting
	from the most general:
</p>
<p>
	Some operating systems provide detailed information
	about process memory use with tools like top,
	ps or the linux /proc filesystem:
</p>

    <div class="example"><pre>
	cat /proc/5898/status

	VmSize:     7660 kB
	VmLck:         0 kB
	VmRSS:      5408 kB
	VmData:     4204 kB
	VmStk:        20 kB
	VmExe:       576 kB
	VmLib:      2032 kB
	</pre></div>

    <p>
	This gives you a rock-solid upper-bound on the amount of
	memory the entire Erlang system is using.
</p>
<p>
	<span class="code">erlang:system_info</span> reports
	interesting things about some globally allocated structures in bytes:
</p>

    <div class="example"><pre>
        3&gt; erlang:system_info(allocated_areas).
	[{static,390265},
	 {atom_space,65544,49097},
	 {binary,13866},
	 {atom_table,30885},
	 {module_table,944},
	 {export_table,16064},
	 {register_table,240},
	 {loaded_code,1456353},
	 {process_desc,16560,15732},
	 {table_desc,1120,1008},
	 {link_desc,6480,5688},
	 {atom_desc,107520,107064},
	 {export_desc,95200,95080},
	 {module_desc,4800,4520},
	 {preg_desc,640,608},
	 {mesg_desc,960,0},
	 {plist_desc,0,0},
	 {fixed_deletion_desc,0,0}]
	</pre></div>

    <p>
	Information about individual processes can be obtained
	from <span class="code">erlang:process_info/1</span> or
	<span class="code">erlang:process_info/2</span>:
</p>
    <div class="example"><pre>
	2&gt; erlang:process_info(self(), memory).
	{memory,1244}
	</pre></div>
    <p>
	The shell's <span class="code">i()</span> and the <span class="code">pman
	</span> tool also give useful overview information.
</p>
<p>
	Don't expect the sum of the results from <span class="code">process_info
	</span> and <span class="code">system_info</span> to add up to
	the total memory use reported by the operating system. The Erlang
	runtime also uses memory for other things.
</p>
<p>
	A typical approach when you suspect you have memory problems
	is
</p>
<p>
	1. Confirm that there really is a memory problem by checking
	that memory use as reported by the operating system is unexpectedly
	high.
</p>
<p>
	2. Use <span class="code">pman</span> or the shell's <span class="code">
	i()</span> command to make sure there isn't an out-of-control
	erlang process on the system. Out-of-control processes often have
	enormous message queues. A common reason for Erlang processes to
	get unexpectedly large is an endlessly looping function which isn't
	tail recursive.
</p>
<p>
	3. Check the amount of memory used for binaries (reported
	by <span class="code">system_info</span>). Normal data in Erlang is
	put on the process heap, which is garbage collected. Large binaries,
	on the other hand, are reference counted. This has two interesting
	consequences. Firstly, binaries don't count towards a process'
	memory use. Secondly, a lot of memory can be allocated in binaries
	without causing a process' heap to grow much. If the heap doesn't
	grow, it's likely that there won't be a garbage collection, which
	may cause binaries to hang around longer than expected. A
	strategically-placed call to <span class="code">erlang:garbage_collect()
	</span> will help.
</p>
<p>
	4. If all of the above have failed to find the problem,
	start the Erlang runtime system with the -instr switch.

</p>
  <h3><a name="idm673">5.16 
        ...estimate productivity in an Erlang project?</a></h3>
    <p>

	A rough rule of thumb is that about the same number of lines
	of code are produced per developer as in a C project.
	A reasonably complex problem involving distribution and
	fault tolerance will be roughly five times shorter in
	<strong>Erlang</strong> than in C.
	</p>
<p>

	The traditional ways of slowing down projects, like adding
	armies of consultants halfway through,
	spending a year writing detailed design specifications
	before any code is written, rigidly following a waterfall
	model, spreading development across several countries and
	holding team meetings to decide on the colour of the serviettes used
	at lunch work just as well for Erlang as for other languages.

</p>
  <h3><a name="idm678">5.17 
        ...use multiple CPUs (or cores) in one server?</a></h3>
  <p>
    Erlang has SMP support on all major platforms and it's enabled by
    default.
  </p>


  <h3><a name="idm681">5.18 
        ...run distributed Erlang through a firewall?</a></h3>
    <p>
	The simplest approach is to make an a-priori restriction to the
        TCP ports distributed Erlang uses to communicate through by
	setting the (undocumented) kernel variables 'inet_dist_listen_min'
	and 'inet_dist_listen_max'. Example:
</p>

    <div class="example"><pre>
	application:set_env(kernel, inet_dist_listen_min, 9100).
	application:set_env(kernel, inet_dist_listen_max, 9105).
	</pre></div>

    <p>
	This forces Erlang to use only ports 9100--9105 for distributed
	Erlang traffic.

        In the above example, you would then need to configure your
        firewall to pass ports 9100--9105 as well as port 4369 (for
        the erlang port mapper).
</p>
<p>
	There are other approaches, such as tunnelling the information
	through SSH or writing your own distribution handler.

</p>
  <h3><a name="idm688">5.19 
        ...distribute the Erlang programs I write to my friends/colleagues/users?</a></h3>
    <a name="erlrt-and-sae"></a>
    

    <p>
        Erlang programs only run on the Erlang VM, so every machine which
        is going to run an Erlang program needs to have a copy of the
        Erlang runtime installed.
</p>
<p>
        Installing the entire Erlang system from erlang.org (or, perhaps,
        indirectly via a packaging system such as Debian's or BSD's) is
        the simplest option in many cases.
</p>
<p>
        A historical footnote from 2007 is SAE: stand-alone Erlang.
        SAE allowed an Erlang program to be distributed as just two files,
        totalling about 500k. SAE fell into disuse and is no longer
        maintained.

</p>
  <h3><a name="idm694">5.20 
        ...write to standard error (stderr)?</a></h3>
    <a name="stderr"></a>
    

    <p>In R13B and later, use the atom <span class="code">standard_error</span>:</p>

    <div class="example"><pre>
            io:put_chars(standard_error, "this text goes to stderr\n").
    </pre></div>

    <p>That also works with <span class="code">io:format/3</span> and all other functions
    that take an <span class="code">IoDevice</span> parameter.</p>
  
</div>
<div class="footer">
<hr>
<p><br></p>
</div>
</div>
</div></body>
</html>
