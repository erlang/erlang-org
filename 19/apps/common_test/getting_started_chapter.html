<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html xmlns:erl="http://erlang.org" xmlns:fn="http://www.w3.org/2005/02/xpath-functions">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" href="../../otp_doc.css" type="text/css">
<title>Erlang -- Getting Started</title>
</head>
<body bgcolor="white" text="#000000" link="#0000ff" vlink="#ff00ff" alink="#ff0000"><div id="container">
<script id="js" type="text/javascript" language="JavaScript" src="../../js/flipmenu/flipmenu.js"></script><script id="js2" type="text/javascript" src="../../js/erlresolvelinks.js"></script><script language="JavaScript" type="text/javascript">
            <!--
              function getWinHeight() {
                var myHeight = 0;
                if( typeof( window.innerHeight ) == 'number' ) {
                  //Non-IE
                  myHeight = window.innerHeight;
                } else if( document.documentElement && ( document.documentElement.clientWidth ||
                                                         document.documentElement.clientHeight ) ) {
                  //IE 6+ in 'standards compliant mode'
                  myHeight = document.documentElement.clientHeight;
                } else if( document.body && ( document.body.clientWidth || document.body.clientHeight ) ) {
                  //IE 4 compatible
                  myHeight = document.body.clientHeight;
                }
                return myHeight;
              }

              function setscrollpos() {
                var objf=document.getElementById('loadscrollpos');
                 document.getElementById("leftnav").scrollTop = objf.offsetTop - getWinHeight()/2;
              }

              function addEvent(obj, evType, fn){
                if (obj.addEventListener){
                obj.addEventListener(evType, fn, true);
                return true;
              } else if (obj.attachEvent){
                var r = obj.attachEvent("on"+evType, fn);
                return r;
              } else {
                return false;
              }
             }

             addEvent(window, 'load', setscrollpos);

             //--></script><div id="leftnav"><div class="innertube">
<img alt="Erlang logo" src="../../erlang-logo.png"><br><small><a href="users_guide.html">User's Guide</a><br><a href="index.html">Reference Manual</a><br><a href="release_notes.html">Release Notes</a><br><a href="common_test.pdf">PDF</a><br><a href="../../index.html">Top</a></small><p><strong>Common Test</strong><br><strong>User's Guide</strong><br><small>Version 1.14</small></p>
<br><a href="javascript:openAllFlips()">Expand All</a><br><a href="javascript:closeAllFlips()">Contract All</a><p><small><strong>Chapters</strong></small></p>
<ul class="flipMenu" imagePath="../../js/flipmenu">
<li id="no" title="Introduction" expanded="false">Introduction<ul>
<li><a href="introduction.html">
              Top of chapter
            </a></li>
<li title="Scope"><a href="introduction.html#id58032">Scope</a></li>
<li title="Prerequisites"><a href="introduction.html#id70023">Prerequisites</a></li>
</ul>
</li>
<li id="no" title="Common Test Basics" expanded="false">Common Test Basics<ul>
<li><a href="basics_chapter.html">
              Top of chapter
            </a></li>
<li title="General"><a href="basics_chapter.html#id57978">General</a></li>
<li title="Test Suite Organisation"><a href="basics_chapter.html#id64675">Test Suite Organisation</a></li>
<li title="Support Libraries"><a href="basics_chapter.html#id62285">Support Libraries</a></li>
<li title="Suites and Test Cases"><a href="basics_chapter.html#id63359">Suites and Test Cases</a></li>
<li title="External Interfaces"><a href="basics_chapter.html#id61440">External Interfaces</a></li>
</ul>
</li>
<li id="loadscrollpos" title="Getting Started" expanded="true">Getting Started<ul>
<li><a href="getting_started_chapter.html">
              Top of chapter
            </a></li>
<li title="Introduction for Newcomers"><a href="getting_started_chapter.html#id70537">Introduction for Newcomers</a></li>
<li title="Test Case Execution"><a href="getting_started_chapter.html#id61029">Test Case Execution</a></li>
<li title="A Simple Test Suite"><a href="getting_started_chapter.html#id62912">A Simple Test Suite</a></li>
<li title="A Test Suite with Configuration Functions"><a href="getting_started_chapter.html#id69498">A Test Suite with Configuration Functions</a></li>
<li title="Questions and Answers"><a href="getting_started_chapter.html#id63443">Questions and Answers</a></li>
</ul>
</li>
<li id="no" title="Installation" expanded="false">Installation<ul>
<li><a href="install_chapter.html">
              Top of chapter
            </a></li>
<li title="General Information"><a href="install_chapter.html#id75958">General Information</a></li>
</ul>
</li>
<li id="no" title="Writing Test Suites" expanded="false">Writing Test Suites<ul>
<li><a href="write_test_chapter.html">
              Top of chapter
            </a></li>
<li title="Support for Test Suite Authors"><a href="write_test_chapter.html#id68554">Support for Test Suite Authors</a></li>
<li title="Test Suites"><a href="write_test_chapter.html#id68618">Test Suites</a></li>
<li title="Init and End per Suite"><a href="write_test_chapter.html#id68668">Init and End per Suite</a></li>
<li title="Init and End per Test Case"><a href="write_test_chapter.html#id75026">Init and End per Test Case</a></li>
<li title="Test Cases"><a href="write_test_chapter.html#id75325">Test Cases</a></li>
<li title="Test Case Information Function"><a href="write_test_chapter.html#id75513">Test Case Information Function</a></li>
<li title="Test Suite Information Function"><a href="write_test_chapter.html#id75710">Test Suite Information Function</a></li>
<li title="Test Case Groups"><a href="write_test_chapter.html#id76889">Test Case Groups</a></li>
<li title="Parallel Property and Nested Groups"><a href="write_test_chapter.html#id77324">Parallel Property and Nested Groups</a></li>
<li title="Parallel Test Cases and I/O"><a href="write_test_chapter.html#id77361">Parallel Test Cases and I/O</a></li>
<li title="Repeated Groups"><a href="write_test_chapter.html#id77414">Repeated Groups</a></li>
<li title="Shuffled Test Case Order"><a href="write_test_chapter.html#id77567">Shuffled Test Case Order</a></li>
<li title="Group Information Function"><a href="write_test_chapter.html#id77633">Group Information Function</a></li>
<li title="Information Functions for Init- and End-Configuration"><a href="write_test_chapter.html#id77674">Information Functions for Init- and End-Configuration</a></li>
<li title="Data and Private Directories"><a href="write_test_chapter.html#id77749">Data and Private Directories</a></li>
<li title="Execution Environment"><a href="write_test_chapter.html#id77907">Execution Environment</a></li>
<li title="Timetrap Time-Outs"><a href="write_test_chapter.html#id77944">Timetrap Time-Outs</a></li>
<li title="Logging - Categories and Verbosity Levels"><a href="write_test_chapter.html#id78145">Logging - Categories and Verbosity Levels</a></li>
<li title="Illegal Dependencies"><a href="write_test_chapter.html#id78538">Illegal Dependencies</a></li>
</ul>
</li>
<li id="no" title="Test Structure" expanded="false">Test Structure<ul>
<li><a href="test_structure_chapter.html">
              Top of chapter
            </a></li>
<li title="General"><a href="test_structure_chapter.html#id78731">General</a></li>
<li title="Skipping Test Cases"><a href="test_structure_chapter.html#id78750">Skipping Test Cases</a></li>
<li title="Definition of Terms"><a href="test_structure_chapter.html#id78829">Definition of Terms</a></li>
</ul>
</li>
<li id="no" title="Examples and Templates" expanded="false">Examples and Templates<ul>
<li><a href="example_chapter.html">
              Top of chapter
            </a></li>
<li title="Test Suite Example"><a href="example_chapter.html#id79140">Test Suite Example</a></li>
<li title="Test Suite Templates"><a href="example_chapter.html#id79193">Test Suite Templates</a></li>
</ul>
</li>
<li id="no" title="Running Tests and Analyzing Results" expanded="false">Running Tests and Analyzing Results<ul>
<li><a href="run_test_chapter.html">
              Top of chapter
            </a></li>
<li title="Using the Common Test Framework"><a href="run_test_chapter.html#id79388">Using the Common Test Framework</a></li>
<li title="Automatic Compilation of Test Suites and Help Modules"><a href="run_test_chapter.html#id79431">Automatic Compilation of Test Suites and Help Modules</a></li>
<li title="Running Tests from the OS Command Line"><a href="run_test_chapter.html#id79625">Running Tests from the OS Command Line</a></li>
<li title="Running Tests from the Erlang Shell or from an Erlang Program"><a href="run_test_chapter.html#id80316">Running Tests from the Erlang Shell or from an Erlang Program</a></li>
<li title="Test Case Group Execution"><a href="run_test_chapter.html#id80492">Test Case Group Execution</a></li>
<li title="Running the Interactive Shell Mode"><a href="run_test_chapter.html#id80998">Running the Interactive Shell Mode</a></li>
<li title="Step-by-Step Execution of Test Cases with the Erlang Debugger"><a href="run_test_chapter.html#id81221">Step-by-Step Execution of Test Cases with the Erlang Debugger</a></li>
<li title="Test Specifications"><a href="run_test_chapter.html#id81349">Test Specifications</a></li>
<li title="Running Tests from the Web-Based GUI"><a href="run_test_chapter.html#id82334">Running Tests from the Web-Based GUI</a></li>
<li title="Log Files"><a href="run_test_chapter.html#id82446">Log Files</a></li>
<li title="HTML Style Sheets"><a href="run_test_chapter.html#id82918">HTML Style Sheets</a></li>
<li title="Repeating Tests"><a href="run_test_chapter.html#id83096">Repeating Tests</a></li>
<li title="Silent Connections"><a href="run_test_chapter.html#id83461">Silent Connections</a></li>
</ul>
</li>
<li id="no" title="External Configuration Data" expanded="false">External Configuration Data<ul>
<li><a href="config_file_chapter.html">
              Top of chapter
            </a></li>
<li title="General"><a href="config_file_chapter.html#id83697">General</a></li>
<li title="Syntax"><a href="config_file_chapter.html#id83740">Syntax</a></li>
<li title="Requiring and Reading Configuration Data"><a href="config_file_chapter.html#id83763">Requiring and Reading Configuration Data</a></li>
<li title="Using Configuration Variables Defined in Multiple Files"><a href="config_file_chapter.html#id83896">Using Configuration Variables Defined in Multiple Files</a></li>
<li title="Encrypted Configuration Files"><a href="config_file_chapter.html#id83920">Encrypted Configuration Files</a></li>
<li title="Opening Connections Using Configuration Data"><a href="config_file_chapter.html#id83984">Opening Connections Using Configuration Data</a></li>
<li title="User-Specific Configuration Data Formats"><a href="config_file_chapter.html#id84055">User-Specific Configuration Data Formats</a></li>
<li title="Examples of Configuration Data Handling"><a href="config_file_chapter.html#id84272">Examples of Configuration Data Handling</a></li>
<li title="Example of User-Specific Configuration Handler"><a href="config_file_chapter.html#id84327">Example of User-Specific Configuration Handler</a></li>
</ul>
</li>
<li id="no" title="Code Coverage Analysis" expanded="false">Code Coverage Analysis<ul>
<li><a href="cover_chapter.html">
              Top of chapter
            </a></li>
<li title="General"><a href="cover_chapter.html#id84454">General</a></li>
<li title="Use"><a href="cover_chapter.html#id84488">Use</a></li>
<li title="Stopping the Cover Tool When Tests Are Completed"><a href="cover_chapter.html#id84603">Stopping the Cover Tool When Tests Are Completed</a></li>
<li title="The Cover Specification File"><a href="cover_chapter.html#id84664">The Cover Specification File</a></li>
<li title="Cross Cover Analysis"><a href="cover_chapter.html#id84727">Cross Cover Analysis</a></li>
<li title="Logging"><a href="cover_chapter.html#id84955">Logging</a></li>
</ul>
</li>
<li id="no" title="Using Common Test for Large-Scale Testing" expanded="false">Using Common Test for Large-Scale Testing<ul>
<li><a href="ct_master_chapter.html">
              Top of chapter
            </a></li>
<li title="General"><a href="ct_master_chapter.html#id85043">General</a></li>
<li title="Use"><a href="ct_master_chapter.html#id85121">Use</a></li>
<li title="Test Specifications"><a href="ct_master_chapter.html#id85314">Test Specifications</a></li>
<li title="Automatic Startup of Test Target Nodes"><a href="ct_master_chapter.html#id85564">Automatic Startup of Test Target Nodes</a></li>
</ul>
</li>
<li id="no" title="Event Handling" expanded="false">Event Handling<ul>
<li><a href="event_handler_chapter.html">
              Top of chapter
            </a></li>
<li title="General"><a href="event_handler_chapter.html#id85775">General</a></li>
<li title="Use"><a href="event_handler_chapter.html#id85916">Use</a></li>
</ul>
</li>
<li id="no" title="Dependencies between Test Cases and Suites" expanded="false">Dependencies between Test Cases and Suites<ul>
<li><a href="dependencies_chapter.html">
              Top of chapter
            </a></li>
<li title="General"><a href="dependencies_chapter.html#id87034">General</a></li>
<li title="Saving Configuration Data"><a href="dependencies_chapter.html#id87172">Saving Configuration Data</a></li>
<li title="Sequences"><a href="dependencies_chapter.html#id87345">Sequences</a></li>
</ul>
</li>
<li id="no" title="Common Test Hooks" expanded="false">Common Test Hooks<ul>
<li><a href="ct_hooks_chapter.html">
              Top of chapter
            </a></li>
<li title="General"><a href="ct_hooks_chapter.html#id87551">General</a></li>
<li title="Installing a CTH"><a href="ct_hooks_chapter.html#id87612">Installing a CTH</a></li>
<li title="CTH Scope"><a href="ct_hooks_chapter.html#id87794">CTH Scope</a></li>
<li title="Manipulating Tests"><a href="ct_hooks_chapter.html#id88155">Manipulating Tests</a></li>
<li title="Synchronizing External User Applications with Common Test"><a href="ct_hooks_chapter.html#id88539">Synchronizing External User Applications with Common Test</a></li>
<li title="Example CTH"><a href="ct_hooks_chapter.html#id88615">Example CTH</a></li>
<li title="Built-In CTHs"><a href="ct_hooks_chapter.html#id88674">Built-In CTHs</a></li>
</ul>
</li>
<li id="no" title="Some Thoughts about Testing" expanded="false">Some Thoughts about Testing<ul>
<li><a href="why_test_chapter.html">
              Top of chapter
            </a></li>
<li title="Goals"><a href="why_test_chapter.html#id88865">Goals</a></li>
<li title="What to Test"><a href="why_test_chapter.html#id88885">What to Test</a></li>
</ul>
</li>
</ul>
</div></div>
<div id="content">
<div class="innertube">
<h1>3 Getting Started</h1>
  

  <h3><a name="id70537">3.1 
        Introduction for Newcomers</a></h3>
    
    <p>
      The purpose of this section is to let the newcomer get started in
      quickly writing and executing some first simple tests with a 
      "learning by example" approach. Most explanations are left for later sections. 
      If you are not much into "learning by example" and prefer more technical
      details, go ahead and skip to the next section.
    </p>
    <p>
      This section demonstrates how simple it is to write a basic 
      (yet for many module testing purposes, often sufficiently complex) 
      test suite and execute its test cases. This is not necessarily
      obvious when you read the remaining sections in this User's Guide.
    </p>
    <div class="note">
<div class="label">Note</div>
<div class="content"><p>
      <p>
      To understand what is discussed and examplified here, we recommended 
      you to first read section
      <span class="bold_code"><a href="basics_chapter.html#basics">Common Test Basics</a></span>.
      </p>
    </p></div>
</div>
    

    <h3><a name="id61029">3.2 
        Test Case Execution</a></h3>
    
    <p>Execution of test cases is handled as follows:</p>
    
    <img alt="IMAGE MISSING" src="tc_execution.gif"><br>
      <p><em>Figure
        3.1:
         
        
	Successful and Unsuccessful Test Case Execution
      </em></p>
    

    <p>For each test case that <span class="code">Common Test</span> is ordered to execute, it spawns a
      dedicated process on which the test case function starts
      running. (In parallel to the test case process, an idle waiting timer
      process is started, which is linked to the test case process. If the timer
      process runs out of waiting time, it sends an exit signal to terminate
      the test case process. This is called a <strong>timetrap</strong>).
    </p>
    <p>In scenario 1, the test case process terminates normally after 
    <span class="code">case A</span> has finished executing its test code without detecting 
    any errors. The test case function returns a value and <span class="code">Common Test</span> 
    logs the test case as successful.
    </p>
    <p>In scenario 2, an error is detected during test <span class="code">case B</span> execution.
      This causes the test <span class="code">case B</span> function to generate an exception
      and, as a result, the test case process exits with reason other than normal. 
      <span class="code">Common Test</span> logs this as an unsuccessful (Failed) test case.
    </p>
    <p>As you can understand from the illustration, <span class="code">Common Test</span> requires
      a test case to generate a runtime error to indicate failure (for example,
      by causing a bad match error or by calling <span class="code">exit/1</span>, preferably
      through the help function 
      <span class="bold_code"><a href="../../man/ct.html#fail-1"><span class="code">ct:fail/1,2</span></a></span>). A successful 
      execution is indicated by a normal return from the test case function.
    </p>
    

    <h3><a name="id62912">3.3 
        A Simple Test Suite</a></h3>
    
    <p>As shown in section 
    <span class="bold_code"><a href="basics_chapter.html#External_Interfaces">Common Test Basics</a></span>,
    the test suite module implements
      <span class="bold_code"><a href="../../man/common_test.html">callback functions</a></span>
      (mandatory or optional) for various purposes, for example:
    </p>
      <ul>
	<li>Init/end configuration function for the test suite</li>
	<li>Init/end configuration function for a test case</li>
	<li>Init/end configuration function for a test case group</li>
	<li>Test cases</li>
      </ul>
    <p> 
     The configuration functions are optional. The following example is a test suite 
     without configuration functions, including one simple test case, to 
     check that module <span class="code">mymod</span> exists (that is, can be successfully loaded by the 
     code server):
    </p>
    <div class="example"><pre>
 -module(my1st_SUITE).
 -compile(export_all).

 all() -&gt;
     [mod_exists].

 mod_exists(_) -&gt;
     {module,mymod} = code:load_file(mymod).</pre></div>
    <p>
      If the operation fails, a bad match error occurs that terminates the test case.
    </p>
    

    <h3><a name="id69498">3.4 
        A Test Suite with Configuration Functions</a></h3>
    
    <p>
      If you need to perform configuration operations to run your test, you can
      implement configuration functions in your suite. The result from a
      configuration function is configuration data, or <span class="code">Config</span>.
      This is a list of key-value tuples that get passed from the configuration
      function to the test cases (possibly through configuration functions on
      "lower level"). The data flow looks as follows:
    </p>

    <img alt="IMAGE MISSING" src="config.gif"><br>
      <p><em>Figure
        3.2:
         
        
	Configuration Data Flow in a Suite
      </em></p>
    

    <p>
      The following example shows a test suite that uses configuration functions
      to open and close a log file for the test cases (an operation that is
      unnecessary and irrelevant to perform by each test case):
    </p>
    <div class="example"><pre>
 -module(check_log_SUITE).
 -export([all/0, init_per_suite/1, end_per_suite/1]).
 -export([check_restart_result/1, check_no_errors/1]).

 -define(value(Key,Config), proplists:get_value(Key,Config)).

 all() -&gt; [check_restart_result, check_no_errors].

 init_per_suite(InitConfigData) -&gt;
     [{logref,open_log()} | InitConfigData].

 end_per_suite(ConfigData) -&gt;
     close_log(?value(logref, ConfigData)).

 check_restart_result(ConfigData) -&gt;
     TestData = read_log(restart, ?value(logref, ConfigData)),
     {match,_Line} = search_for("restart successful", TestData).

 check_no_errors(ConfigData) -&gt;
     TestData = read_log(all, ?value(logref, ConfigData)),
     case search_for("error", TestData) of
	 {match,Line} -&gt; ct:fail({error_found_in_log,Line});
	 nomatch -&gt; ok
     end.</pre></div>
    <p>
      The test cases verify, by parsing a log file, that our SUT has performed 
      a successful restart and that no unexpected errors are printed.
    </p>

    <p>To execute the test cases in the recent test suite, type the 
    following on the UNIX/Linux command line (assuming that the suite module
      is in the current working directory):
    </p>
    <div class="example"><pre>
 $ ct_run -dir .</pre></div>
    <p>or:</p>
    <div class="example"><pre>
 $ ct_run -suite check_log_SUITE</pre></div>

    <p>To use the Erlang shell to run our test, you can evaluate the following call:
    </p>
    <div class="example"><pre>
 1&gt; ct:run_test([{dir, "."}]).</pre></div>
    <p>or:</p>
    <div class="example"><pre>
 1&gt; ct:run_test([{suite, "check_log_SUITE"}]).</pre></div>
    <p>
      The result from running the test is printed in log files in HTML format
      (stored in unique log directories on a different level). The following 
      illustration shows the log file structure:
    </p>

    <img alt="IMAGE MISSING" src="html_logs.gif"><br>
      <p><em>Figure
        3.3:
         
        
	HTML Log File Structure
      </em></p>
    
  

  <h3><a name="id63443">3.5 
        Questions and Answers</a></h3>
    

    <p>Here follows some questions that you might have after reading this section 
    with corresponding tips and links to the answers:
    </p>
      
      <ul>
	<li>
<p><strong>Question:</strong> 
	"How and where can I specify variable data for my tests that must not 
	be hard-coded in the test suites (such as hostnames, addresses, and
	  user login data)?"</p>
	  <p><strong>Answer:</strong> 
	  See section <span class="bold_code"><a href="config_file_chapter.html#top">External Configuration Data</a></span>.</p>
	</li>

	<li>
<p><strong>Question:</strong> "Is there a way to declare different tests and run them
	  in one session without having to write my own scripts? Also, can such
	  declarations be used for regression testing?"</p>
	  <p><strong>Answer:</strong> See section
	  <span class="bold_code"><a href="run_test_chapter.html#test_specifications">Test Specifications</a></span>
	  in section Running Tests and Analyzing Results.
	  </p>
	</li>

	<li>
<p><strong>Question:</strong> "Can test cases and/or test runs be automatically repeated?"</p>
	<p><strong>Answer:</strong> Learn more about
	  <span class="bold_code"><a href="write_test_chapter.html#test_case_groups">Test Case Groups</a></span>
	  and read about start flags/options in section
	  <span class="bold_code"><a href="run_test_chapter.html#ct_run">Running Tests</a></span> and in
	  the Reference Manual.</p>
	</li>

	<li>
<p><strong>Question:</strong> "Does <span class="code">Common Test</span> execute my test cases in sequence or in parallel?"</p>
	<p><strong>Answer:</strong> See
	  <span class="bold_code"><a href="write_test_chapter.html#test_case_groups">Test Case Groups</a></span>
	in section Writing Test Suites.</p>
	</li>

	<li>
<p><strong>Question:</strong> "What is the syntax for timetraps (mentioned earlier), and how do I set them?"</p>
	  <p><strong>Answer:</strong> This is explained in the
	  <span class="bold_code"><a href="write_test_chapter.html#timetraps">Timetrap Time-Outs</a></span>
	  part of section Writing Test Suites.</p>
	</li>

	<li>
<p><strong>Question:</strong> "What functions are available for logging and printing?"</p>
	<p><strong>Answer:</strong> See
	  <span class="bold_code"><a href="write_test_chapter.html#logging">Logging</a></span>
	in section Writing Test Suites.</p>
	</li>

	<li>
<p><strong>Question:</strong> "I need data files for my tests. Where do I store them preferably?"</p>
	  <p><strong>Answer:</strong> See
	  <span class="bold_code"><a href="write_test_chapter.html#data_priv_dir">Data and Private Directories</a></span>.</p>
	</li>

	<li>
<p><strong>Question:</strong> "Can I start with a test suite example, please?"</p>
	  <p><strong>Answer:</strong> <span class="bold_code"><a href="example_chapter.html#top">Welcome!</a></span></p>
	</li>
      </ul>
      <p>You probably want to get started on your own first test suites now, while
      at the same time digging deeper into the <span class="code">Common Test</span> User's Guide and Reference Manual.
      There are much more to learn about the things that have been introduced
      in this section. There are also many other useful features to learn, 
      so please continue to the other sections and have fun.
      </p>
    
</div>
<div class="footer">
<hr>
<p>Copyright © 2003-2017 Ericsson AB. All Rights Reserved.</p>
</div>
</div>
</div></body>
</html>
