<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.38.1">
    <meta name="project" content="ssh v5.3">


<meta name="exdoc:full-text-search-url" content="/doc/search.html?v=1&q=">
<meta name="major-vsn" content="1">
<link rel="canonical" href="https://www.erlang.org/doc/apps/ssh/notes.html" />
    <title>SSH Release Notes — ssh v5.3</title>

    <link rel="stylesheet" href="dist/html-erlang-ZK43ZOAC.css" />

    <script defer src="dist/sidebar_items-8AD469E8.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-DPJLHKSM.js"></script>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="../../index.html" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="ssh" />
        </a>

      <div>
        <a href="../../index.html" class="sidebar-projectName" translate="no">
ssh
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v5.3
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras=""></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-extra" id="main" data-type="extras">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of ssh</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search" tabindex="-1">
            <i class="ri-search-2-line ri-lg" aria-hidden="true"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>SSH Release Notes</h1>


      <a href="https://github.com/erlang/otp/blob/master/lib/ssh/doc/notes.md#L1" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

  </div>


<h2 id="ssh-5-3" class="section-heading"><a href="#ssh-5-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 5.3</span></h2><h3 id="fixed-bugs-and-malfunctions" class="section-heading"><a href="#fixed-bugs-and-malfunctions" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The implementation of the ssh server-side supervision tree has been improved.</p><p>Own Id: OTP-19324 Aux Id: <a href="https://github.com/erlang/otp/pull/8968" title="">PR-8968</a>, <a href="https://github.com/erlang/otp/issues/8223" title="">GH-8223</a></p></li><li><p>SSH daemon accepts fun as tcpip_tunnel_in option. This provides more control over TCP connection tunnel handle by server.</p><p>Own Id: OTP-19566 Aux Id: <a href="https://github.com/erlang/otp/pull/9571" title="">PR-9571</a></p></li></ul><h3 id="improvements-and-new-features" class="section-heading"><a href="#improvements-and-new-features" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>The <a href="using_ssh.html#running-an-erlang-ssh-daemon"><code class="inline">Erlang SSH daemon</code></a> now uses the same backend to handle multiline functionality as the Erlang shell.</p><p>Own Id: OTP-19226 Aux Id: <a href="https://github.com/erlang/otp/pull/8805" title="">PR-8805</a></p></li><li><p>CBC algorithms are not offered by default. See Configuring algorithms in SSH if you wish to enable them.</p><p><strong><em> POTENTIAL INCOMPATIBILITY </em></strong></p><p>Own Id: OTP-19420 Aux Id: <a href="https://github.com/erlang/otp/pull/9277" title="">PR-9277</a></p></li><li><p>Daemon can be configured (bannerfun option) to send banner message at the beginning of user authentication.</p><p>Own Id: OTP-19535 Aux Id: <a href="https://github.com/erlang/otp/pull/9149" title="">PR-9149</a></p></li><li><p>The license and copyright header has changed format to include an <code class="inline">SPDX-License-Identifier</code>. At the same time, most files have been updated to follow a uniform standard for license headers.</p><p>Own Id: OTP-19575 Aux Id: <a href="https://github.com/erlang/otp/pull/9670" title="">PR-9670</a></p></li><li><p>For interoperability reasons, SSH ignore message with no length specified is treated as message with zero length specified - it will not cause decode error.</p><p>Own Id: OTP-19586 Aux Id: <a href="https://github.com/erlang/otp/pull/9214" title="">PR-9214</a></p></li><li><p>Documentation improvements.</p><p>Own Id: OTP-19596 Aux Id: <a href="https://github.com/erlang/otp/pull/9298" title="">PR-9298</a></p></li></ul><h2 id="ssh-5-2-11" class="section-heading"><a href="#ssh-5-2-11" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 5.2.11</span></h2><h3 id="fixed-bugs-and-malfunctions-1" class="section-heading"><a href="#fixed-bugs-and-malfunctions-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix KEX strict implementation according to draft-miller-sshm-strict-kex-01 document.</p><p>Thanks to Fabian Bäumer, Marcel Maehren, Marcus Brinkmann, and Jörg Schwenk from the Ruhr University Bochum for finding and responsibly disclosing this vulnerability to the Erlang/OTP project.</p><p>Own Id: OTP-19625 Aux Id: <a href="https://nvd.nist.gov/vuln/detail/CVE-2025-46712">CVE-2025-46712</a></p></li></ul><h2 id="ssh-5-2-10" class="section-heading"><a href="#ssh-5-2-10" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 5.2.10</span></h2><h3 id="fixed-bugs-and-malfunctions-2" class="section-heading"><a href="#fixed-bugs-and-malfunctions-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Reception of wrong Unicode does not cause unnecessary processing. US-ASCII fields are not decoded as Unicode.</p><p>Own Id: OTP-19582 Aux Id: <a href="https://github.com/erlang/otp/pull/9679" title="">PR-9679</a></p></li><li><p>SSH daemon disconnects upon receiving connection protocol message for unauthenticated used.</p><p>Thanks to Fabian Bäumer, Marcel Maehren, Marcus Brinkmann, Nurullah Erinola, Jörg Schwenk (Ruhr University Bochum).</p><p>Own Id: OTP-19595 Aux Id: <a href="https://nvd.nist.gov/vuln/detail/CVE-2025-32433">CVE-2025-32433</a></p></li></ul><h2 id="ssh-5-2-9" class="section-heading"><a href="#ssh-5-2-9" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 5.2.9</span></h2><h3 id="fixed-bugs-and-malfunctions-3" class="section-heading"><a href="#fixed-bugs-and-malfunctions-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Reception of malicious KEX init message does not result with ssh daemon excessive memory usage.</p><p>Own Id: OTP-19543 Aux Id: CVE-2025-30211</p></li><li><p>Call to ssh:daemon_replace_options does not crash when argument is not a valid daemon ref.</p><p>Own Id: OTP-19559 Aux Id: <a href="https://github.com/erlang/otp/issues/9554" title="">GH-9554</a>, <a href="https://github.com/erlang/otp/pull/9545" title="">PR-9545</a></p></li></ul><h2 id="ssh-5-2-8" class="section-heading"><a href="#ssh-5-2-8" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 5.2.8</span></h2><h3 id="fixed-bugs-and-malfunctions-4" class="section-heading"><a href="#fixed-bugs-and-malfunctions-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Minor documentation improvements.</p><p>Own Id: OTP-19410 Aux Id: <a href="https://github.com/erlang/otp/pull/9188" title="">PR-9188</a></p></li><li><p>Function specification for <a href="ssh_sftp.html#start_channel/2"><code class="inline">ssh_sftp:start_channel/2</code></a> is fixed.</p><p>Own Id: OTP-19475 Aux Id: <a href="https://github.com/erlang/otp/pull/9368" title="">PR-9368</a>, <a href="https://github.com/erlang/otp/issues/9359" title="">GH-9359</a></p></li></ul><h2 id="ssh-5-2-7" class="section-heading"><a href="#ssh-5-2-7" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 5.2.7</span></h2><h3 id="fixed-bugs-and-malfunctions-5" class="section-heading"><a href="#fixed-bugs-and-malfunctions-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>SFTP packets exceeding max packet size are not processed and dropped.</p><p>Own Id: OTP-19466 Aux Id: ERIERL-1173, CVE-2025-26618</p></li></ul><h2 id="ssh-5-2-6" class="section-heading"><a href="#ssh-5-2-6" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 5.2.6</span></h2><h3 id="fixed-bugs-and-malfunctions-6" class="section-heading"><a href="#fixed-bugs-and-malfunctions-6" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>With this change, type specs for ssh:connection_info/1,2 functions are fixed so they include {error, term()} return value.</p><p>Own Id: OTP-19388 Aux Id: ERIERL-1165, <a href="https://github.com/erlang/otp/pull/9161" title="">PR-9161</a></p></li><li><p>With this change, ssh client accepts a banner sent during processing keyboard interactive user authentication.</p><p>Own Id: OTP-19392 Aux Id: <a href="https://github.com/erlang/otp/pull/9139" title="">PR-9139</a>, <a href="https://github.com/erlang/otp/issues/9065" title="">GH-9065</a></p></li><li><p>With this change, large sftp transfers does not hang. Redundant window adjustment are not requested.</p><p>Own Id: OTP-19435 Aux Id: <a href="https://github.com/erlang/otp/pull/9309" title="">PR-9309</a></p></li></ul><h2 id="ssh-5-2-5" class="section-heading"><a href="#ssh-5-2-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 5.2.5</span></h2><h3 id="fixed-bugs-and-malfunctions-7" class="section-heading"><a href="#fixed-bugs-and-malfunctions-7" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Documentation is polished after OTP-27 migration to markdown.</p><p>Own Id: OTP-19335 Aux Id: <a href="https://github.com/erlang/otp/pull/9021" title="">PR-9021</a></p></li></ul><h2 id="ssh-5-2-4" class="section-heading"><a href="#ssh-5-2-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 5.2.4</span></h2><h3 id="fixed-bugs-and-malfunctions-8" class="section-heading"><a href="#fixed-bugs-and-malfunctions-8" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>With this change, ssh connection does not crash upon receiving exit-signal message for an already terminated channel.</p><p>Own Id: OTP-19326 Aux Id: <a href="https://github.com/erlang/otp/pull/8995" title="">PR-8995</a>, <a href="https://github.com/erlang/otp/issues/8929" title="">GH-8929</a></p></li></ul><h2 id="ssh-5-2-3" class="section-heading"><a href="#ssh-5-2-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 5.2.3</span></h2><h3 id="fixed-bugs-and-malfunctions-9" class="section-heading"><a href="#fixed-bugs-and-malfunctions-9" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>With this change, a race condition is removed from ssh client connection setup procedure.</p><p>Own Id: OTP-19124 Aux Id: <a href="https://github.com/erlang/otp/issues/7550" title="">GH-7550</a>, <a href="https://github.com/erlang/otp/pull/8766" title="">PR-8766</a></p></li><li><p>With this change, ssh:connect is not affected by presence of EXIT message in queue.</p><p>Own Id: OTP-19246 Aux Id: <a href="https://github.com/erlang/otp/issues/8223" title="">GH-8223</a>, <a href="https://github.com/erlang/otp/pull/8854" title="">PR-8854</a></p></li><li><p>With this change, ssh appends {active, false} option after socket options received from user - so that false value is always used.</p><p>Own Id: OTP-19247 Aux Id: <a href="https://github.com/erlang/otp/pull/8226" title="">PR-8226</a></p></li></ul><h2 id="ssh-5-2-2" class="section-heading"><a href="#ssh-5-2-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 5.2.2</span></h2><h3 id="fixed-bugs-and-malfunctions-10" class="section-heading"><a href="#fixed-bugs-and-malfunctions-10" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The SSh daemon started with a TCP port number argument will now re-try obtaining a listen socket before returning an error to the user.</p><p>Own Id: OTP-19170 Aux Id: <a href="https://github.com/erlang/otp/issues/7746" title="">GH-7746</a></p></li><li><p>Robustness has been improved by monitoring the connection handler process before casting the socket control notification.</p><p>Own Id: OTP-19173 Aux Id: <a href="https://github.com/erlang/otp/pull/8310" title="">PR-8310</a></p></li></ul><h2 id="ssh-5-2-1" class="section-heading"><a href="#ssh-5-2-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 5.2.1</span></h2><h3 id="fixed-bugs-and-malfunctions-11" class="section-heading"><a href="#fixed-bugs-and-malfunctions-11" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>With this change, race condition between connection closing and automatic window adjustment is fixed.</p><p>Own Id: OTP-19109 Aux Id: <a href="https://github.com/erlang/otp/pull/8345" title="">PR-8345</a></p></li></ul><h2 id="ssh-5-2" class="section-heading"><a href="#ssh-5-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 5.2</span></h2><h3 id="fixed-bugs-and-malfunctions-12" class="section-heading"><a href="#fixed-bugs-and-malfunctions-12" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>SSH processes are now assigned labels for troubleshooting purposes.</p><p>Own Id: OTP-19017 Aux Id: <a href="https://github.com/erlang/otp/pull/8249" title="">PR-8249</a></p></li><li><p>With this change, ssh client will automatically adjust transfer window size for commands executed remotely over SSH.</p><p>Own Id: OTP-19057 Aux Id: <a href="https://github.com/erlang/otp/pull/8345" title="">PR-8345</a>, <a href="https://github.com/erlang/otp/issues/7483" title="">GH-7483</a></p></li></ul><h3 id="improvements-and-new-features-1" class="section-heading"><a href="#improvements-and-new-features-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>The shell now pages long output from the documentation help command (<code class="inline">h(Module)</code>), auto completions and the search command.</p><p>Own Id: OTP-18846 Aux Id: <a href="https://github.com/erlang/otp/pull/7845" title="">PR-7845</a></p></li><li><p>The documentation has been migrated to use Markdown and ExDoc.</p><p>Own Id: OTP-18955 Aux Id: <a href="https://github.com/erlang/otp/pull/8026" title="">PR-8026</a></p></li><li><p>Updated types and specs for all API modules.</p><p>Own Id: OTP-18961</p></li></ul><h2 id="ssh-5-1-4-9" class="section-heading"><a href="#ssh-5-1-4-9" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 5.1.4.9</span></h2><h3 id="fixed-bugs-and-malfunctions-13" class="section-heading"><a href="#fixed-bugs-and-malfunctions-13" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix KEX strict implementation according to draft-miller-sshm-strict-kex-01 document.</p><p>Thanks to Fabian Bäumer, Marcel Maehren, Marcus Brinkmann, and Jörg Schwenk from the Ruhr University Bochum for finding and responsibly disclosing this vulnerability to the Erlang/OTP project.</p><p>Own Id: OTP-19625 Aux Id: <a href="https://nvd.nist.gov/vuln/detail/CVE-2025-46712">CVE-2025-46712</a></p></li></ul><h2 id="ssh-5-1-4-8" class="section-heading"><a href="#ssh-5-1-4-8" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 5.1.4.8</span></h2><h3 id="fixed-bugs-and-malfunctions-14" class="section-heading"><a href="#fixed-bugs-and-malfunctions-14" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Reception of wrong Unicode does not cause unnecessary processing. US-ASCII fields are not decoded as Unicode.</p><p>Own Id: OTP-19582 Aux Id: PR-9679</p></li><li><p>SSH daemon disconnects upon receiving connection protocol message for unauthenticated used.</p><p>Thanks to Fabian Bäumer, Marcel Maehren, Marcus Brinkmann, Nurullah Erinola, Jörg Schwenk (Ruhr University Bochum).</p><p>Own Id: OTP-19595 Aux Id: <a href="https://nvd.nist.gov/vuln/detail/CVE-2025-32433">CVE-2025-32433</a></p></li></ul><h2 id="ssh-5-1-4-7" class="section-heading"><a href="#ssh-5-1-4-7" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 5.1.4.7</span></h2><h3 id="fixed-bugs-and-malfunctions-15" class="section-heading"><a href="#fixed-bugs-and-malfunctions-15" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Reception of malicious KEX init message does not result with ssh daemon excessive memory usage.</p><p>Own Id: OTP-19543 Aux Id: CVE-2025-30211</p></li><li><p>Call to ssh:daemon_replace_options does not crash when argument is not a valid daemon ref.</p><p>Own Id: OTP-19559 Aux Id: GH-9554, PR-9545</p></li></ul><h2 id="ssh-5-1-4-6" class="section-heading"><a href="#ssh-5-1-4-6" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 5.1.4.6</span></h2><h3 id="fixed-bugs-and-malfunctions-16" class="section-heading"><a href="#fixed-bugs-and-malfunctions-16" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>SFTP packets exceeding max packet size are not processed and dropped.</p><p>Own Id: OTP-19466 Aux Id: ERIERL-1173, CVE-2025-26618</p></li></ul><h2 id="ssh-5-1-4-5" class="section-heading"><a href="#ssh-5-1-4-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 5.1.4.5</span></h2><h3 id="fixed-bugs-and-malfunctions-17" class="section-heading"><a href="#fixed-bugs-and-malfunctions-17" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>With this change, type specs for ssh:connection_info/1,2 functions are fixed so they include {error, term()} return value.</p><p>Own Id: OTP-19388 Aux Id: ERIERL-1165, PR-9161</p></li><li><p>With this change, ssh client accepts a banner sent during processing keyboard interactive user authentication.</p><p>Own Id: OTP-19392 Aux Id: PR-9139, GH-9065</p></li><li><p>With this change, large sftp transfers does not hang. Redundant window adjustment are not requested.</p><p>Own Id: OTP-19435 Aux Id: PR-9309</p></li></ul><h2 id="ssh-5-1-4-4" class="section-heading"><a href="#ssh-5-1-4-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 5.1.4.4</span></h2><h3 id="fixed-bugs-and-malfunctions-18" class="section-heading"><a href="#fixed-bugs-and-malfunctions-18" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>With this change, ssh connection does not crash upon receiving exit-signal message for an already terminated channel.</p><p>Own Id: OTP-19326 Aux Id: PR-8995, GH-8929</p></li></ul><h2 id="ssh-5-1-4-3" class="section-heading"><a href="#ssh-5-1-4-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 5.1.4.3</span></h2><h3 id="fixed-bugs-and-malfunctions-19" class="section-heading"><a href="#fixed-bugs-and-malfunctions-19" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>With this change, a race condition is removed from ssh client connection setup procedure.</p><p>Own Id: OTP-19124 Aux Id: GH-7550, PR-8766</p></li><li><p>With this change, ssh:connect is not affected by presence of EXIT message in queue.</p><p>Own Id: OTP-19246 Aux Id: GH-8223, PR-8854</p></li><li><p>With this change, ssh appends {active, false} option after socket options received from user - so that false value is always used.</p><p>Own Id: OTP-19247 Aux Id: PR-8226</p></li></ul><h2 id="ssh-5-1-4-2" class="section-heading"><a href="#ssh-5-1-4-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 5.1.4.2</span></h2><h3 id="fixed-bugs-and-malfunctions-20" class="section-heading"><a href="#fixed-bugs-and-malfunctions-20" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>With this change, ssh daemon started with TCP port number argument will re-try to obtain listen socket before returning error to user.</p><p>Own Id: OTP-19170 Aux Id: GH-7746</p></li><li><p>With this change, robustness is improved by monitoring connection handler process before casting socket control notification.</p><p>Own Id: OTP-19173 Aux Id: PR-8310</p></li></ul><h2 id="ssh-5-1-4-1" class="section-heading"><a href="#ssh-5-1-4-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 5.1.4.1</span></h2><h3 id="fixed-bugs-and-malfunctions-21" class="section-heading"><a href="#fixed-bugs-and-malfunctions-21" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>With this change, ssh client will automatically adjust transfer window size for commands executed remotely over SSH.</p><p>Own Id: OTP-19057 Aux Id: PR-8345, GH-7483</p></li><li><p>With this change, race condition between connection closing and automatic window adjustment is fixed.</p><p>Own Id: OTP-19109 Aux Id: PR-8345</p></li></ul><h2 id="ssh-5-1-4" class="section-heading"><a href="#ssh-5-1-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 5.1.4</span></h2><h3 id="fixed-bugs-and-malfunctions-22" class="section-heading"><a href="#fixed-bugs-and-malfunctions-22" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>With this change, owner and group file attributes decoding is fixed and results with value of integer type.</p><p>Own Id: OTP-19013 Aux Id: GH-7897, PR-8220</p></li></ul><h2 id="ssh-5-1-3" class="section-heading"><a href="#ssh-5-1-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 5.1.3</span></h2><h3 id="fixed-bugs-and-malfunctions-23" class="section-heading"><a href="#fixed-bugs-and-malfunctions-23" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>With this change, acceptor_sup is not started for ssh client as it is not needed in that role.</p><p>Own Id: OTP-18974</p></li><li><p>With this change, more secure algorithms are preferred by ssh and documentation is updated to reflect that.</p><p>Own Id: OTP-18986</p></li><li><p>With this change, KEX strict terminal message is emitted with debug verbosity.</p><p>Own Id: OTP-19002 Aux Id: ERIERL-1041</p></li><li><p>Fix reading of password for ssh client when in <code class="inline">user_interactive</code> mode.</p><p>Own Id: OTP-19007 Aux Id: ERIERL-1049</p></li></ul><h2 id="ssh-5-1-2" class="section-heading"><a href="#ssh-5-1-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 5.1.2</span></h2><h3 id="fixed-bugs-and-malfunctions-24" class="section-heading"><a href="#fixed-bugs-and-malfunctions-24" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>With this change, Curve25519 and Curve448 KEX methods become most preferred (related to RFC8731).</p><p>Own Id: OTP-18964</p></li></ul><h2 id="ssh-5-1-1" class="section-heading"><a href="#ssh-5-1-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 5.1.1</span></h2><h3 id="fixed-bugs-and-malfunctions-25" class="section-heading"><a href="#fixed-bugs-and-malfunctions-25" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>With this change (being response to CVE-2023-48795), ssh can negotiate &quot;strict
KEX&quot; OpenSSH extension with peers supporting it; also
'chacha20-poly1305@openssh.com' algorithm becomes a less preferred cipher.</p><p>If strict KEX availability cannot be ensured on both connection sides,
affected encryption modes(CHACHA and CBC) can be disabled with standard ssh
configuration. This will provide protection against vulnerability, but at a
cost of affecting interoperability. See
<a href="configure_algos.html">Configuring algorithms in SSH</a>.</p><p>Thanks to Fabian Bäumer, Marcus Brinkmann and Jörg Schwenk.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-18897</p></li></ul><h2 id="ssh-5-1" class="section-heading"><a href="#ssh-5-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 5.1</span></h2><h3 id="fixed-bugs-and-malfunctions-26" class="section-heading"><a href="#fixed-bugs-and-malfunctions-26" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Replaced unintentional Erlang Public License 1.1 headers in some files with
the intended Apache License 2.0 header.</p><p>Own Id: OTP-18815 Aux Id: PR-7780</p></li><li><p>Avoid outputting ansi escape sequences to dumb ssh clients.</p><p>Own Id: OTP-18861 Aux Id: PR-7627</p></li><li><p>With this change, connection handler does not execute socket operations until
it becomes socket owner. Previously errors could occur if connection handler
tried to work with socket whose owner exited.</p><p>Own Id: OTP-18869 Aux Id: PR-7849,GH-7571</p></li></ul><h3 id="improvements-and-new-features-2" class="section-heading"><a href="#improvements-and-new-features-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>With this change, reverse search works with ssh shell and non dumb terminals.</p><p>Own Id: OTP-18730 Aux Id: PR-7499</p></li></ul><h2 id="ssh-5-0-1" class="section-heading"><a href="#ssh-5-0-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 5.0.1</span></h2><h3 id="fixed-bugs-and-malfunctions-27" class="section-heading"><a href="#fixed-bugs-and-malfunctions-27" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Added multiline editing support to ssh clients connected through OTP ssh
daemon.</p><p>Own Id: OTP-18653 Aux Id: PR-7242</p></li></ul><h2 id="ssh-5-0" class="section-heading"><a href="#ssh-5-0" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 5.0</span></h2><h3 id="improvements-and-new-features-3" class="section-heading"><a href="#improvements-and-new-features-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>The ssh_cli has been updated to work with the changes introduced in the new
Erlang shell implementation.</p><p>Own Id: OTP-18231 Aux Id: OTP-17932 PR-6144</p></li><li><p>Typing <code class="inline">Ctrl+L</code> in a shell now clears the screen and redraws the current line
instead of only redrawing the current line. To only redraw the current line,
you must now type <code class="inline">Alt+L</code>. This brings the behaviour of <code class="inline">Ctrl+L</code> closer to how
bash and other shells work.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-18285 Aux Id: PR-6262</p></li><li><p>Deprecates <code class="inline">dbg:stop_clear/0</code> because it is simply a function alias to
<a href="../../apps/runtime_tools/dbg.html#stop/0"><code class="inline">dbg:stop/0</code></a></p><p>Own Id: OTP-18478 Aux Id: GH-6903</p></li><li><p>The implementation has been fixed to use <code class="inline">proc_lib:init_fail/2,3</code> where
appropriate, instead of <code class="inline">proc_lib:init_ack/1,2</code>.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-18490 Aux Id: OTP-18471, GH-6339, PR-6843</p></li></ul><h2 id="ssh-4-15-3-13" class="section-heading"><a href="#ssh-4-15-3-13" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.15.3.13</span></h2><h3 id="fixed-bugs-and-malfunctions-28" class="section-heading"><a href="#fixed-bugs-and-malfunctions-28" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix KEX strict implementation according to draft-miller-sshm-strict-kex-01 document.</p><p>Thanks to Fabian Bäumer, Marcel Maehren, Marcus Brinkmann, and Jörg Schwenk from the Ruhr University Bochum for finding and responsibly disclosing this vulnerability to the Erlang/OTP project.</p><p>Own Id: OTP-19625 Aux Id: <a href="https://nvd.nist.gov/vuln/detail/CVE-2025-46712">CVE-2025-46712</a></p></li></ul><h2 id="ssh-4-15-3-12" class="section-heading"><a href="#ssh-4-15-3-12" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.15.3.12</span></h2><h3 id="fixed-bugs-and-malfunctions-29" class="section-heading"><a href="#fixed-bugs-and-malfunctions-29" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Reception of wrong Unicode does not cause unnecessary processing. US-ASCII fields are not decoded as Unicode.</p><p>Own Id: OTP-19582 Aux Id: PR-9679</p></li><li><p>SSH daemon disconnects upon receiving connection protocol message for unauthenticated used.</p><p>Thanks to Fabian Bäumer, Marcel Maehren, Marcus Brinkmann, Nurullah Erinola, Jörg Schwenk (Ruhr University Bochum).</p><p>Own Id: OTP-19595 Aux Id: <a href="https://nvd.nist.gov/vuln/detail/CVE-2025-32433">CVE-2025-32433</a></p></li></ul><h2 id="ssh-4-15-3-11" class="section-heading"><a href="#ssh-4-15-3-11" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.15.3.11</span></h2><h3 id="fixed-bugs-and-malfunctions-30" class="section-heading"><a href="#fixed-bugs-and-malfunctions-30" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Reception of malicious KEX init message does not result with ssh daemon excessive memory usage.</p><p>Own Id: OTP-19543 Aux Id: CVE-2025-30211</p></li><li><p>Call to ssh:daemon_replace_options does not crash when argument is not a valid daemon ref.</p><p>Own Id: OTP-19559 Aux Id: GH-9554, PR-9545</p></li></ul><h2 id="ssh-4-15-3-10" class="section-heading"><a href="#ssh-4-15-3-10" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.15.3.10</span></h2><h3 id="fixed-bugs-and-malfunctions-31" class="section-heading"><a href="#fixed-bugs-and-malfunctions-31" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>SFTP packets exceeding max packet size are not processed and dropped.</p><p>Own Id: OTP-19466 Aux Id: ERIERL-1173, CVE-2025-26618</p></li></ul><h2 id="ssh-4-15-3-9" class="section-heading"><a href="#ssh-4-15-3-9" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.15.3.9</span></h2><h3 id="fixed-bugs-and-malfunctions-32" class="section-heading"><a href="#fixed-bugs-and-malfunctions-32" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>With this change, type specs for ssh:connection_info/1,2 functions are fixed so they include {error, term()} return value.</p><p>Own Id: OTP-19388 Aux Id: ERIERL-1165, PR-9161</p></li><li><p>With this change, ssh client accepts a banner sent during processing keyboard interactive user authentication.</p><p>Own Id: OTP-19392 Aux Id: PR-9139, GH-9065</p></li><li><p>With this change, large sftp transfers does not hang. Redundant window adjustment are not requested.</p><p>Own Id: OTP-19435 Aux Id: PR-9309</p></li></ul><h2 id="ssh-4-15-3-8" class="section-heading"><a href="#ssh-4-15-3-8" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.15.3.8</span></h2><h3 id="fixed-bugs-and-malfunctions-33" class="section-heading"><a href="#fixed-bugs-and-malfunctions-33" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>With this change, ssh connection does not crash upon receiving exit-signal message for an already terminated channel.</p><p>Own Id: OTP-19326 Aux Id: PR-8995, GH-8929</p></li></ul><h2 id="ssh-4-15-3-7" class="section-heading"><a href="#ssh-4-15-3-7" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.15.3.7</span></h2><h3 id="fixed-bugs-and-malfunctions-34" class="section-heading"><a href="#fixed-bugs-and-malfunctions-34" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>With this change, a race condition is removed from ssh client connection setup procedure.</p><p>Own Id: OTP-19124 Aux Id: GH-7550, PR-8766</p></li><li><p>With this change, ssh:connect is not affected by presence of EXIT message in queue.</p><p>Own Id: OTP-19246 Aux Id: GH-8223, PR-8854</p></li><li><p>With this change, ssh appends {active, false} option after socket options received from user - so that false value is always used.</p><p>Own Id: OTP-19247 Aux Id: PR-8226</p></li></ul><h2 id="ssh-4-15-3-6" class="section-heading"><a href="#ssh-4-15-3-6" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.15.3.6</span></h2><h3 id="fixed-bugs-and-malfunctions-35" class="section-heading"><a href="#fixed-bugs-and-malfunctions-35" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The SSh daemon started with a TCP port number argument will now re-try obtaining a listen socket before returning an error to the user.</p><p>Own Id: OTP-19170 Aux Id: GH-7746</p></li><li><p>Robustness has been improved by monitoring the connection handler process before casting the socket control notification.</p><p>Own Id: OTP-19173 Aux Id: PR-8310</p></li></ul><h2 id="ssh-4-15-3-5" class="section-heading"><a href="#ssh-4-15-3-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.15.3.5</span></h2><h3 id="fixed-bugs-and-malfunctions-36" class="section-heading"><a href="#fixed-bugs-and-malfunctions-36" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>With this change, ssh client will automatically adjust transfer window size for commands executed remotely over SSH.</p><p>Own Id: OTP-19057 Aux Id: PR-8345, GH-7483</p></li><li><p>With this change, race condition between connection closing and automatic window adjustment is fixed.</p><p>Own Id: OTP-19109 Aux Id: PR-8345</p></li></ul><h2 id="ssh-4-15-3-4" class="section-heading"><a href="#ssh-4-15-3-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.15.3.4</span></h2><h3 id="fixed-bugs-and-malfunctions-37" class="section-heading"><a href="#fixed-bugs-and-malfunctions-37" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>With this change, owner and group file attributes decoding is fixed and results with value of integer type.</p><p>Own Id: OTP-19013 Aux Id: GH-7897, PR-8220</p></li></ul><h2 id="ssh-4-15-3-3" class="section-heading"><a href="#ssh-4-15-3-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.15.3.3</span></h2><h3 id="fixed-bugs-and-malfunctions-38" class="section-heading"><a href="#fixed-bugs-and-malfunctions-38" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>With this change, more secure algorithms are preferred by ssh and documentation is updated to reflect that.</p><p>Own Id: OTP-18986</p></li><li><p>With this change, KEX strict terminal message is emitted with debug verbosity.</p><p>Own Id: OTP-19002 Aux Id: ERIERL-1041</p></li></ul><h2 id="ssh-4-15-3-2" class="section-heading"><a href="#ssh-4-15-3-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.15.3.2</span></h2><h3 id="fixed-bugs-and-malfunctions-39" class="section-heading"><a href="#fixed-bugs-and-malfunctions-39" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>With this change, Curve25519 and Curve448 KEX methods become most preferred (related to RFC8731).</p><p>Own Id: OTP-18964</p></li></ul><h2 id="ssh-4-15-3-1" class="section-heading"><a href="#ssh-4-15-3-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.15.3.1</span></h2><h3 id="fixed-bugs-and-malfunctions-40" class="section-heading"><a href="#fixed-bugs-and-malfunctions-40" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>With this change, connection handler does not execute socket operations until
it becomes socket owner. Previously errors could occur if connection handler
tried to work with socket whose owner exited.</p><p>Own Id: OTP-18869 Aux Id: PR-7849,GH-7571</p></li><li><p>With this change (being response to CVE-2023-48795), ssh can negotiate &quot;strict
KEX&quot; OpenSSH extension with peers supporting it; also
'chacha20-poly1305@openssh.com' algorithm becomes a less preferred cipher.</p><p>If strict KEX availability cannot be ensured on both connection sides,
affected encryption modes(CHACHA and CBC) can be disabled with standard ssh
configuration. This will provide protection against vulnerability, but at a
cost of affecting interoperability. See
<a href="configure_algos.html">Configuring algorithms in SSH</a>.</p><p>Thanks to Fabian Bäumer, Marcus Brinkmann and Jörg Schwenk.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-18897</p></li></ul><h2 id="ssh-4-15-3" class="section-heading"><a href="#ssh-4-15-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.15.3</span></h2><h3 id="fixed-bugs-and-malfunctions-41" class="section-heading"><a href="#fixed-bugs-and-malfunctions-41" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>With this change, PKCS8 formatted private key file is properly decoded and SSH
daemon with such key can be started.</p><p>Own Id: OTP-18446 Aux Id: GH-6475</p></li></ul><h3 id="improvements-and-new-features-4" class="section-heading"><a href="#improvements-and-new-features-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Replace size/1 with either tuple_size/1 or byte_size/1</p><p>The <a href="../../apps/erts/erlang.html#size/1"><code class="inline">size/1</code></a> BIF is not optimized by the JIT, and its use can
result in worse types for Dialyzer.</p><p>When one knows that the value being tested must be a tuple,
<a href="../../apps/erts/erlang.html#tuple_size/1"><code class="inline">tuple_size/1</code></a> should always be preferred.</p><p>When one knows that the value being tested must be a binary,
<a href="../../apps/erts/erlang.html#byte_size/1"><code class="inline">byte_size/1</code></a> should be preferred. However,
<a href="../../apps/erts/erlang.html#byte_size/1"><code class="inline">byte_size/1</code></a> also accepts a bitstring (rounding up size to a
whole number of bytes), so one must make sure that the call to <code class="inline">byte_size/</code> is
preceded by a call to <a href="../../apps/erts/erlang.html#is_binary/1"><code class="inline">is_binary/1</code></a> to ensure that bitstrings
are rejected. Note that the compiler removes redundant calls to
<a href="../../apps/erts/erlang.html#is_binary/1"><code class="inline">is_binary/1</code></a>, so if one is not sure whether previous code
had made sure that the argument is a binary, it does not harm to add an
<a href="../../apps/erts/erlang.html#is_binary/1"><code class="inline">is_binary/1</code></a> test immediately before the call to
<a href="../../apps/erts/erlang.html#byte_size/1"><code class="inline">byte_size/1</code></a>.</p><p>Own Id: OTP-18432 Aux Id:
GH-6672,PR-6793,PR-6784,PR-6787,PR-6785,PR-6682,PR-6800,PR-6797,PR-6798,PR-6799,PR-6796,PR-6813,PR-6671,PR-6673,PR-6684,PR-6694,GH-6677,PR-6696,PR-6670,PR-6674</p></li></ul><h2 id="ssh-4-15-2" class="section-heading"><a href="#ssh-4-15-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.15.2</span></h2><h3 id="fixed-bugs-and-malfunctions-42" class="section-heading"><a href="#fixed-bugs-and-malfunctions-42" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>With this change, ssh application does not crash when formatting some of info
reports for unsuccessful connections.</p><p>Own Id: OTP-18386 Aux Id: PR-6611</p></li><li><p>With this change, ssh does not log extensively long messages.</p><p>Own Id: OTP-18417 Aux Id: DAFH-1349,ERIERL-888,IA18357</p></li></ul><h2 id="ssh-4-15-1" class="section-heading"><a href="#ssh-4-15-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.15.1</span></h2><h3 id="fixed-bugs-and-malfunctions-43" class="section-heading"><a href="#fixed-bugs-and-malfunctions-43" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>graceful shutdown of ssh_conection_handler when connection is closed by peer</p><p>Own Id: OTP-18326 Aux Id: ERIERL-865</p></li></ul><h2 id="ssh-4-15" class="section-heading"><a href="#ssh-4-15" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.15</span></h2><h3 id="fixed-bugs-and-malfunctions-44" class="section-heading"><a href="#fixed-bugs-and-malfunctions-44" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Handling rare race condition at channel close.</p><p>Own Id: OTP-18220 Aux Id: ERIERL-666, ERIERL-661</p></li></ul><h3 id="improvements-and-new-features-5" class="section-heading"><a href="#improvements-and-new-features-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>New ssh option <code class="inline">no_auth_needed</code> to skip the ssh authentication. Use with
caution!</p><p>Own Id: OTP-18134 Aux Id: GH-6021</p></li><li><p>This change fixes dialyzer warnings generated for inets/httpd examples
(includes needed adjustment of spec for ssh_sftp module).</p><p>Own Id: OTP-18178 Aux Id: ERIERL-833, ERIERL-834, ERIERL-835</p></li><li><p>The new function <a href="ssh.html#daemon_replace_options/2"><code class="inline">ssh:daemon_replace_options/2</code></a> makes it possible to change
the <code class="inline">Options</code> in a running SSH server.</p><p>Established connections are not affected, only those created after the call to
this new function.</p><p>Own Id: OTP-18196</p></li><li><p>Add a timeout as option <code class="inline">max_initial_idle_time</code>. It closes a connection that
does not allocate a channel within the timeout time.</p><p>For more information about timeouts, see the
<a href="hardening.html#timeouts">Timeouts section </a>in the User's Guide
<a href="hardening.html">Hardening</a> chapter.</p><p>Own Id: OTP-18207 Aux Id: PR-6231</p></li></ul><h2 id="ssh-4-14-1" class="section-heading"><a href="#ssh-4-14-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.14.1</span></h2><h3 id="fixed-bugs-and-malfunctions-45" class="section-heading"><a href="#fixed-bugs-and-malfunctions-45" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Binaries can be limited in logs with the parameter <code class="inline">max_log_item_len</code>. The
default value is 500 bytes.</p><p>Own Id: OTP-18094</p></li></ul><h2 id="ssh-4-14" class="section-heading"><a href="#ssh-4-14" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.14</span></h2><h3 id="improvements-and-new-features-6" class="section-heading"><a href="#improvements-and-new-features-6" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>The representation of Edward curves (ed25519 and ed448) inside ssh had a
temporary representation (ed_pri and ed_pub).</p><p>That is now changed to the public_key form. See the manual for more
information.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-17920</p></li><li><p>Former internal function <a href="ssh_file.html#extract_public_key/1"><code class="inline">ssh_file:extract_public_key/1</code></a> documented publicly.</p><p>Internally it was previously in ssh_transport.</p><p>Own Id: OTP-18079 Aux Id: GH-5767</p></li></ul><h2 id="ssh-4-13-2-6" class="section-heading"><a href="#ssh-4-13-2-6" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.13.2.6</span></h2><h3 id="fixed-bugs-and-malfunctions-46" class="section-heading"><a href="#fixed-bugs-and-malfunctions-46" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>With this change, more secure algorithms are preferred by ssh and documentation is updated to reflect that.</p><p>Own Id: OTP-18986</p></li><li><p>With this change, KEX strict terminal message is emitted with debug verbosity.</p><p>Own Id: OTP-19002 Aux Id: ERIERL-1041</p></li><li><p>With this change, owner and group file attributes decoding is fixed and results with value of integer type.</p><p>Own Id: OTP-19013 Aux Id: GH-7897, PR-8220</p></li></ul><h2 id="ssh-4-13-2-5" class="section-heading"><a href="#ssh-4-13-2-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.13.2.5</span></h2><h3 id="fixed-bugs-and-malfunctions-47" class="section-heading"><a href="#fixed-bugs-and-malfunctions-47" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>With this change, Curve25519 and Curve448 KEX methods become most preferred (related to RFC8731).</p><p>Own Id: OTP-18964</p></li></ul><h2 id="ssh-4-13-2-4" class="section-heading"><a href="#ssh-4-13-2-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.13.2.4</span></h2><h3 id="fixed-bugs-and-malfunctions-48" class="section-heading"><a href="#fixed-bugs-and-malfunctions-48" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>With this change, connection handler does not execute socket operations until
it becomes socket owner. Previously errors could occur if connection handler
tried to work with socket whose owner exited.</p><p>Own Id: OTP-18869 Aux Id: PR-7849,GH-7571</p></li><li><p>With this change (being response to CVE-2023-48795), ssh can negotiate &quot;strict
KEX&quot; OpenSSH extension with peers supporting it; also
'chacha20-poly1305@openssh.com' algorithm becomes a less preferred cipher.</p><p>If strict KEX availability cannot be ensured on both connection sides,
affected encryption modes(CHACHA and CBC) can be disabled with standard ssh
configuration. This will provide protection against vulnerability, but at a
cost of affecting interoperability. See
<a href="configure_algos.html">Configuring algorithms in SSH</a>.</p><p>Thanks to Fabian Bäumer, Marcus Brinkmann and Jörg Schwenk.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-18897</p></li></ul><h2 id="ssh-4-13-2-3" class="section-heading"><a href="#ssh-4-13-2-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.13.2.3</span></h2><h3 id="fixed-bugs-and-malfunctions-49" class="section-heading"><a href="#fixed-bugs-and-malfunctions-49" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>With this change, error logging related crashes in ssh_connection_handler
module are fixed.</p><p>Own Id: OTP-18620 Aux Id: OTP-18386,PR-6611</p></li></ul><h2 id="ssh-4-13-2-2" class="section-heading"><a href="#ssh-4-13-2-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.13.2.2</span></h2><h3 id="fixed-bugs-and-malfunctions-50" class="section-heading"><a href="#fixed-bugs-and-malfunctions-50" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>With this change, ssh application does not crash when formatting some of info
reports for unsuccessful connections.</p><p>Own Id: OTP-18386 Aux Id: PR-6611</p></li><li><p>With this change, ssh does not log extensively long messages.</p><p>Own Id: OTP-18417 Aux Id: DAFH-1349,ERIERL-888,IA18357</p></li></ul><h2 id="ssh-4-13-2-1" class="section-heading"><a href="#ssh-4-13-2-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.13.2.1</span></h2><h3 id="fixed-bugs-and-malfunctions-51" class="section-heading"><a href="#fixed-bugs-and-malfunctions-51" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Binaries can be limited in logs with the parameter <code class="inline">max_log_item_len</code>. The
default value is 500 bytes.</p><p>Own Id: OTP-18094</p></li></ul><h2 id="ssh-4-13-2" class="section-heading"><a href="#ssh-4-13-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.13.2</span></h2><h3 id="fixed-bugs-and-malfunctions-52" class="section-heading"><a href="#fixed-bugs-and-malfunctions-52" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix makefile dependency bugs.</p><p>Own Id: OTP-17847 Aux Id: PR-5574 GH-5548</p></li><li><p>Fixed faulty OpenSSH decoding of Ed25519/Ed448 keys in the OpenSSH format
<code class="inline">openssh_key_v1</code>.</p><p>Own Id: OTP-17868 Aux Id: PR-5520</p></li><li><p>Correction of ssh_file typing, specially for the experimental openssh-key-v1
encoding.</p><p>Own Id: OTP-17912 Aux Id: GH-5680</p></li><li><p>Improper tag for private ED keys when encoding with ssh:encode/2.</p><p>The tuple had <code class="inline">ed_priv</code> as first element, but should have had <code class="inline">ed_pri</code>. This
is now corrected.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-17928 Aux Id: PR-5679</p></li></ul><h3 id="improvements-and-new-features-7" class="section-heading"><a href="#improvements-and-new-features-7" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Add support for Ed25519/Ed448 SSH host keys in the RFC 4716 format
(&quot;<code class="inline">-----BEGIN EC PRIVATE KEY-----</code>&quot;) generated by for example openssl or via
Erlang functions (i.e. <code class="inline">public_key:generate_key({namedCurve, ed25519})</code>).</p><p>Ed25519 SSH host keys generated by <code class="inline">ssh-keygen</code> was, and are still, supported.</p><p>Own Id: OTP-17857 Aux Id: PR-5532</p></li></ul><h2 id="ssh-4-13-1" class="section-heading"><a href="#ssh-4-13-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.13.1</span></h2><h3 id="fixed-bugs-and-malfunctions-53" class="section-heading"><a href="#fixed-bugs-and-malfunctions-53" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The ssh sever <code class="inline">parallel_login</code> option was missing in OTP-24</p><p>Own Id: OTP-17850 Aux Id: ERIERL-764</p></li></ul><h2 id="ssh-4-13" class="section-heading"><a href="#ssh-4-13" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.13</span></h2><h3 id="fixed-bugs-and-malfunctions-54" class="section-heading"><a href="#fixed-bugs-and-malfunctions-54" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The value of the <code class="inline">connect_timeout</code> option is now used as default value for the
negotiation timeout.</p><p>Own Id: OTP-17707 Aux Id: ERIERL-706</p></li></ul><h3 id="improvements-and-new-features-8" class="section-heading"><a href="#improvements-and-new-features-8" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Add better error handling in connect/2,3,4. Detect incorrect arguments and
return an informative error tuple instead of throwing a function_clause or
similar.</p><p>Own Id: OTP-17515 Aux Id: ERIERL-648</p></li><li><p>Make ssh algorithm selection better handle dynamic changes changes in crypto
fips mode.</p><p>Own Id: OTP-17795</p></li></ul><h2 id="ssh-4-12-5" class="section-heading"><a href="#ssh-4-12-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.12.5</span></h2><h3 id="fixed-bugs-and-malfunctions-55" class="section-heading"><a href="#fixed-bugs-and-malfunctions-55" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed a race condition in the acceptor loop: if a client disconnected
immediately after the tcp connect, the server could cease handling connection
on that address:port.</p><p>Own Id: OTP-17764 Aux Id: ERIERL-726</p></li></ul><h2 id="ssh-4-12-4" class="section-heading"><a href="#ssh-4-12-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.12.4</span></h2><h3 id="fixed-bugs-and-malfunctions-56" class="section-heading"><a href="#fixed-bugs-and-malfunctions-56" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed that a slow start (&gt;30s) of a client subsystem could cause a log entry
with the password.</p><p>Own Id: OTP-17390 Aux Id: ERIERL-648</p></li><li><p>Fixed an error when running as an sftp server and a client requests a
directory contents listing.</p><p>The fix is to handle the error code <code class="inline">{error, eacces}</code> as <code class="inline">{error, enoent}</code> in
the <code class="inline">ssh_sftpd:get_attrs/5</code> internal function; that is, just skip it.</p><p>Own Id: OTP-17586 Aux Id: GH-5014</p></li></ul><h3 id="improvements-and-new-features-9" class="section-heading"><a href="#improvements-and-new-features-9" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>The &quot;Key exchange failed&quot; Info Report is now more informative.</p><p>Own Id: OTP-17450 Aux Id: ERIERL-655</p></li></ul><h2 id="ssh-4-12-3" class="section-heading"><a href="#ssh-4-12-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.12.3</span></h2><h3 id="fixed-bugs-and-malfunctions-57" class="section-heading"><a href="#fixed-bugs-and-malfunctions-57" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Filter out sensitive data (passwords etc) from progress reports and supervisor
reports.</p><p>Own Id: OTP-17468 Aux Id: ERIERL-656</p></li></ul><h2 id="ssh-4-12-2" class="section-heading"><a href="#ssh-4-12-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.12.2</span></h2><h3 id="fixed-bugs-and-malfunctions-58" class="section-heading"><a href="#fixed-bugs-and-malfunctions-58" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Avoid an extra blank line in the ssh known_hosts file</p><p>Own Id: OTP-17427</p></li></ul><h2 id="ssh-4-12-1" class="section-heading"><a href="#ssh-4-12-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.12.1</span></h2><h3 id="improvements-and-new-features-10" class="section-heading"><a href="#improvements-and-new-features-10" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Add missing <code class="inline">known_hosts</code> and <code class="inline">authorized_keys</code> file types to
<a href="ssh_file.html#decode/2"><code class="inline">ssh_file:decode/2</code></a> and <a href="ssh_file.html#encode/2"><code class="inline">ssh_file:encode/2</code></a>.</p><p>Own Id: OTP-17397</p></li></ul><h2 id="ssh-4-12" class="section-heading"><a href="#ssh-4-12" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.12</span></h2><h3 id="fixed-bugs-and-malfunctions-59" class="section-heading"><a href="#fixed-bugs-and-malfunctions-59" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Missing runtime dependencies has been added to this application.</p><p>Own Id: OTP-17243 Aux Id: PR-4557</p></li><li><p>The send window handling is changed to not initialize a too large window on
some occasions.</p><p>Own Id: OTP-17353</p></li></ul><h3 id="improvements-and-new-features-11" class="section-heading"><a href="#improvements-and-new-features-11" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Removed usage of <a href="../../apps/erts/erlang.html#is_port/1"><code class="inline">erlang:is_port/1</code></a> from the SSH implementation.</p><p>Own Id: OTP-16750</p></li><li><p>Internal connection setup refactoring.</p><p>Own Id: OTP-17051</p></li><li><p>Refactor SSH fsm into a (hopefully) more comprehensible set of gen_statem
callback-files.</p><p>Own Id: OTP-17140</p></li><li><p>The RSA SHA1 sign/verify variants are disabled by default. That is, ssh-rsa is
disabled by default as well as the SHA1 sign/verify with RSA keys from id_rsa
and ssh_host_rsa_key. All SHA2 sign/verify are enabled by default.</p><p>The reason is that SHA1 is now considered easy to break.</p><p>To enable RSA with SHA1, for example for a very old and unsafe peer, see
<a href="configure_algos.html#example-9">Example 9</a> in the User's Guide chapter
<a href="configure_algos.html">Configuring algorithms in SSH</a>.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-17259 Aux Id: OTP-16511, ERIERL-619</p></li><li><p>Adapt ssh supervisors to the new 'significant' and 'auto_shutdown' flags in
supervisor.</p><p>Own Id: OTP-17322 Aux Id: PR-4638, EEP-56, OTP-17334</p></li><li><p>The functions public_key:ssh_encode/2, public_key:ssh_decode/2,
public_key:ssh_hostkey_fingerprint/1 and public_key:ssh_hostkey_fingerprint/2
are deprecated.</p><p>Replacement functions are available in SSH, see the
<a href="../../deprecations.html#otp-24">Deprecations</a> chapter in the
Erlang/OTP documentation.</p><p>Own Id: OTP-17352</p></li></ul><h2 id="ssh-4-11-1-7" class="section-heading"><a href="#ssh-4-11-1-7" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.11.1.7</span></h2><h3 id="fixed-bugs-and-malfunctions-60" class="section-heading"><a href="#fixed-bugs-and-malfunctions-60" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>With this change (being response to CVE-2023-48795), ssh can negotiate &quot;strict KEX&quot; OpenSSH extension with peers supporting it; also 'chacha20-poly1305@openssh.com' algorithm becomes a less preferred cipher.</p><p>If strict KEX availability cannot be ensured on both connection sides, affected encryption modes(CHACHA and CBC) can be disabled with standard ssh configuration. This will provide protection against vulnerability, but at a cost of affecting interoperability. See Configuring algorithms in SSH User's Guide.</p><p>Thanks to Fabian Bäumer, Marcus Brinkmann and Jörg Schwenk.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-18897</p></li><li><p>With this change, KEX strict terminal message is emitted with debug verbosity.</p><p>Own Id: OTP-19002 Aux Id: ERIERL-1041</p></li></ul><h2 id="ssh-4-11-1-6" class="section-heading"><a href="#ssh-4-11-1-6" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.11.1.6</span></h2><h3 id="fixed-bugs-and-malfunctions-61" class="section-heading"><a href="#fixed-bugs-and-malfunctions-61" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Binaries can be limited in logs with the parameter <code class="inline">max_log_item_len</code>. The
default value is 500 bytes.</p><p>Own Id: OTP-18094</p></li></ul><h2 id="ssh-4-11-1-5" class="section-heading"><a href="#ssh-4-11-1-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.11.1.5</span></h2><h3 id="fixed-bugs-and-malfunctions-62" class="section-heading"><a href="#fixed-bugs-and-malfunctions-62" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed problem with blocked server after multiple restarts. Applies to daemons
with options <code class="inline">{parallel_login,true}</code> and also <code class="inline">{max_sessions, int()&gt;0}</code>.</p><p>Own Id: OTP-17835 Aux Id: ERIERL-721</p></li></ul><h2 id="ssh-4-11-1-4" class="section-heading"><a href="#ssh-4-11-1-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.11.1.4</span></h2><h3 id="fixed-bugs-and-malfunctions-63" class="section-heading"><a href="#fixed-bugs-and-malfunctions-63" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The value of the <code class="inline">connect_timeout</code> option is now used as default value for the
negotiation timeout.</p><p>Own Id: OTP-17707 Aux Id: ERIERL-706</p></li></ul><h2 id="ssh-4-11-1-3" class="section-heading"><a href="#ssh-4-11-1-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.11.1.3</span></h2><h3 id="fixed-bugs-and-malfunctions-64" class="section-heading"><a href="#fixed-bugs-and-malfunctions-64" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Filter out sensitive data (passwords etc) from progress reports and supervisor
reports.</p><p>Own Id: OTP-17468 Aux Id: ERIERL-656</p></li></ul><h3 id="improvements-and-new-features-12" class="section-heading"><a href="#improvements-and-new-features-12" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>The &quot;Key exchange failed&quot; Info Report is now more informative.</p><p>Own Id: OTP-17450 Aux Id: ERIERL-655</p></li></ul><h2 id="ssh-4-11-1-2" class="section-heading"><a href="#ssh-4-11-1-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.11.1.2</span></h2><h3 id="fixed-bugs-and-malfunctions-65" class="section-heading"><a href="#fixed-bugs-and-malfunctions-65" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Avoid an extra blank line in the ssh known_hosts file</p><p>Own Id: OTP-17427</p></li></ul><h2 id="ssh-4-11-1-1" class="section-heading"><a href="#ssh-4-11-1-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.11.1.1</span></h2><h3 id="fixed-bugs-and-malfunctions-66" class="section-heading"><a href="#fixed-bugs-and-malfunctions-66" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed that a slow start (&gt;30s) of a client subsystem could cause a log entry
with the password.</p><p>Own Id: OTP-17390 Aux Id: ERIERL-648</p></li></ul><h2 id="ssh-4-11-1" class="section-heading"><a href="#ssh-4-11-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.11.1</span></h2><h3 id="fixed-bugs-and-malfunctions-67" class="section-heading"><a href="#fixed-bugs-and-malfunctions-67" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The idle_time timer was not cancelled when a channel was opened within the
timeout time on an empty connection that have had channels previously.</p><p>Own Id: OTP-17279</p></li></ul><h2 id="ssh-4-11" class="section-heading"><a href="#ssh-4-11" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.11</span></h2><h3 id="improvements-and-new-features-13" class="section-heading"><a href="#improvements-and-new-features-13" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>The long name field in SSH_FXP_NAME responses to display file information in
sftp version 3 now contains the expanded format defined in the sftp draft. It
is similar to what is returned by &quot;ls -l&quot; on Unix systems.</p><p>Own Id: OTP-17197 Aux Id: PR- 3049</p></li></ul><h2 id="ssh-4-10-8" class="section-heading"><a href="#ssh-4-10-8" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.10.8</span></h2><h3 id="fixed-bugs-and-malfunctions-68" class="section-heading"><a href="#fixed-bugs-and-malfunctions-68" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Don't timeout slow connection setups and tear-downs. A rare crash risk for the
controller is also removed.</p><p>Own Id: OTP-17173 Aux Id: ERIERL-581</p></li></ul><h2 id="ssh-4-10-7" class="section-heading"><a href="#ssh-4-10-7" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.10.7</span></h2><h3 id="fixed-bugs-and-malfunctions-69" class="section-heading"><a href="#fixed-bugs-and-malfunctions-69" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The SSH daemon erroneously replaced LF with CRLF also when there was no pty
requested from the server.</p><p>Own Id: OTP-17108 Aux Id: ERL-1442</p></li></ul><h2 id="ssh-4-10-6" class="section-heading"><a href="#ssh-4-10-6" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.10.6</span></h2><h3 id="fixed-bugs-and-malfunctions-70" class="section-heading"><a href="#fixed-bugs-and-malfunctions-70" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed problems in the ssh cli/shell handling. Most important are:</p><ol><li><p>the ssh:shell function did sometimes cause the input to be echoed twice,</p></li><li><p>the ssh:shell function didn't transfer the LANG and LC_ALL shell variables
to the connected server which sometimes made Unicode handling erroneous,</p></li><li><p>Unicode was not always transferred correctly to and from the peer.</p></li></ol><p>Own Id: OTP-16799</p></li><li><p>The SSH protocol message SSH_MSG_DISCONNECT was sometimes sent instead of
SSH_MSG_CHANNEL_FAILURE</p><p>Own Id: OTP-16900</p></li><li><p>The ssh_cli module now always sends the exit-status to connected clients so
they can use that to check for successful command execution.</p><p>Own Id: OTP-16908 Aux Id: PR-2753</p></li></ul><h3 id="improvements-and-new-features-14" class="section-heading"><a href="#improvements-and-new-features-14" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>A new option <a href="ssh.html#option-pk_check_user"><code class="inline">pk_check_user</code></a> enables checking
of the client's user name in the server when doing public key authentication.</p><p>Own Id: OTP-16889</p></li></ul><h2 id="ssh-4-10-5" class="section-heading"><a href="#ssh-4-10-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.10.5</span></h2><h3 id="fixed-bugs-and-malfunctions-71" class="section-heading"><a href="#fixed-bugs-and-malfunctions-71" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>An ssh-client can take an accepted socket from a listening socket and do an
ssh:connect/2 on it.</p><p>Multiple clients on sockets accepted from the same listening socket had
stopped working. This is corrected now.</p><p>Own Id: OTP-17021 Aux Id: ERIERL-567</p></li></ul><h2 id="ssh-4-10-4-1" class="section-heading"><a href="#ssh-4-10-4-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.10.4.1</span></h2><h3 id="fixed-bugs-and-malfunctions-72" class="section-heading"><a href="#fixed-bugs-and-malfunctions-72" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Filter out sensitive data (passwords etc) from progress reports and supervisor
reports.</p><p>Own Id: OTP-17468 Aux Id: ERIERL-656</p></li></ul><h2 id="ssh-4-10-4" class="section-heading"><a href="#ssh-4-10-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.10.4</span></h2><h3 id="fixed-bugs-and-malfunctions-73" class="section-heading"><a href="#fixed-bugs-and-malfunctions-73" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The inet option raw was not passed on from the ssh option list to inet.</p><p>Own Id: OTP-17016 Aux Id: ERIERL-562</p></li></ul><h2 id="ssh-4-10-3" class="section-heading"><a href="#ssh-4-10-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.10.3</span></h2><h3 id="fixed-bugs-and-malfunctions-74" class="section-heading"><a href="#fixed-bugs-and-malfunctions-74" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>A supervisor sub-tree could be left if the connection handler process is
brutally killed. This will make the max_sessions checking option to count the
existing sessions erroneously and could finally block further sessions.</p><p>Own Id: OTP-17006 Aux Id: ERIERL-556</p></li></ul><h2 id="ssh-4-10-2" class="section-heading"><a href="#ssh-4-10-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.10.2</span></h2><h3 id="fixed-bugs-and-malfunctions-75" class="section-heading"><a href="#fixed-bugs-and-malfunctions-75" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix decoder bug.</p><p>Own Id: OTP-16904</p></li></ul><h2 id="ssh-4-10-1" class="section-heading"><a href="#ssh-4-10-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.10.1</span></h2><h3 id="fixed-bugs-and-malfunctions-76" class="section-heading"><a href="#fixed-bugs-and-malfunctions-76" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed a bug when a message to ssh-agent was divided into separate packets.</p><p>Own Id: OTP-16761 Aux Id: PR-2679</p></li><li><p>Fix a bug that could crash the cli server if a too large cli-window was
requested from the client.</p><p>Own Id: OTP-16791 Aux Id: ERIERL-520</p></li></ul><h3 id="improvements-and-new-features-15" class="section-heading"><a href="#improvements-and-new-features-15" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Increased test coverage.</p><p>Own Id: OTP-14106</p></li><li><p>A chapter about <a href="hardening.html">hardening the OTP SSH</a> is added to the User's
Guide.</p><p>Own Id: OTP-16411</p></li><li><p>The internal Diffie-Hellman high level API for key generation was slow in old
and by OpenSSL now unsupported cryptolib versions (1.0.1 and earlier).</p><p>If such a cryptolib is used anyhow, the low-level API is used internally in
the crypto application.</p><p>Own Id: OTP-16774</p></li><li><p>A new timeout is defined for daemons:
<a href="ssh.html#t:hello_timeout_daemon_option/0">hello_timeout</a>.</p><p>The timeout is supposed to be used as a simple
<a href="hardening.html#resilience-to-dos-attacks">DoS attack protection</a>. It closes an
incoming TCP-connection if no valid first SSH message is received from the
client within the timeout limit after the TCP initial connection setup.</p><p>The initial value is 30s by compatibility reasons, but could be lowered if
needed, for example in the code or in a <a href="configurations.html">config file</a>.</p><p>Own Id: OTP-16803</p></li></ul><h2 id="ssh-4-10" class="section-heading"><a href="#ssh-4-10" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.10</span></h2><h3 id="fixed-bugs-and-malfunctions-77" class="section-heading"><a href="#fixed-bugs-and-malfunctions-77" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix error in ssh_sftpd typespec.</p><p>Own Id: OTP-16363</p></li></ul><h3 id="improvements-and-new-features-16" class="section-heading"><a href="#improvements-and-new-features-16" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>The plug-in file ssh_file.erl, that is responsible for default file handling,
is re-factored, optimized and re-written.</p><p>Own Id: OTP-11688 Aux Id: OTP-12699</p></li><li><p>OpenSSH 6.5 introduced a new file representation of keys called
<a href="https://cvsweb.openbsd.org/src/usr.bin/ssh/PROTOCOL.key?annotate=1.1">openssh-key-v1</a>.</p><p>OTP/SSH had an experimental implementation of this format. That implementation
is now improved and supported with the exception of handling encrypted keys.</p><p>Own Id: OTP-15434</p></li><li><p>TCP/IP port forwarding, a.k.a tunneling a.k.a tcp-forward/direct-tcp is
implemented. In the OpenSSH client, this corresponds to the options -L and -R.</p><p>The client or server listens to a specified socket, and when something
connects to it with TCP/IP, that connection is forwarded in an encrypted
tunnel to the peer. The peer then connects to a predefined IP/port pair and
then acts as a proxy.</p><p>See the manual, <a href="ssh.html#tcpip_tunnel_to_server/6"><code class="inline">ssh:tcpip_tunnel_to_server/6</code></a> and
<a href="ssh.html#tcpip_tunnel_from_server/6"><code class="inline">ssh:tcpip_tunnel_from_server/6</code></a>.</p><p>The functionality is disabled per default but can be enabled when starting a
daemon.</p><p>Own Id: OTP-15998 Aux Id: PR-2376, PR-2368</p></li><li><p>The client-side of the supervisor tree (under sshc_sup) was previously not
complete; the channel handling processes were handled with links but had no
supervisors.</p><p>This is now corrected with a client-side supervisor tree under <code class="inline">sshc_sup</code>,
similar to the server-side supervisor tree under <code class="inline">sshd_sup</code>.</p><p>Own Id: OTP-16026 Aux Id: PR-2368, (OTP-15998)</p></li><li><p>The extension
<a href="https://cvsweb.openbsd.org/src/usr.bin/ssh/PROTOCOL?annotate=HEAD">posix-rename@openssh.com</a>
is added to the <a href="ssh_sftp.html#rename/3">ssh/sftp rename</a> operation.</p><p>Own Id: OTP-16289 Aux Id: PR-2448</p></li><li><p>Calls of deprecated functions in the
<a href="../../apps/crypto/new_api.html#the-old-api">Old Crypto API</a> are replaced by calls of
their <a href="../../apps/crypto/new_api.html#the-new-api">substitutions</a>.</p><p>Own Id: OTP-16346</p></li><li><p>The default known_hosts file handling is improved to include ports.</p><p>The handling of the contents in that file is updated to support the
<a href="https://man.openbsd.org/sshd#SSH_KNOWN_HOSTS_FILE_FORMAT">full syntax</a>, with
exception of 1) the wildcard '?', 2) wildcards in canonical names and 3) the
option '@cert-authority'</p><p>Own Id: OTP-16506</p></li><li><p>The MAC (Message Authorization Code) algorithms</p><ul><li>hmac-sha1-etm@openssh.com</li><li>hmac-sha2-256-etm@openssh.com</li><li>hmac-sha2-512-etm@openssh.com</li></ul><p>are implemented.</p><p>Own Id: OTP-16508</p></li><li><p>The key-exchange algorithms <code class="inline">'diffie-hellman-group14-sha1'</code> and
<code class="inline">'diffie-hellman-group-exchange-sha1'</code> are disabled per default. The reason is
that SHA1 now is considered insecure.</p><p>They can be enabled if needed, see <a href="ssh_app.html#algorithms">SSH (App)</a>.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-16509</p></li><li><p>The public key algorithm <code class="inline">'ssh-dss'</code> is disabled per default. The reason is
that it is now considered as insecure.</p><p>It can be enabled if needed, see <a href="ssh_app.html#algorithms">SSH (App)</a>.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-16510</p></li><li><p>The public key <code class="inline">'ssh-rsa'</code> is now considered as insecure because of its usage
of SHA1.</p><p>It is therefore deprecated and will no longer be enabled per default in
OTP-24.0.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-16511</p></li><li><p>An option <a href="ssh_file.html#t:optimize_key_lookup/0">optimize (optimize_key_lookup)</a>
is introduced for the file interface ssh_file.erl</p><p>The option enables the user to select between the default handling which is
fast but memory consuming vs memory efficient but not as fast. The effect
might be observable only for large files.</p><p>See the manual for <a href="ssh_file.html#is_host_key/5"><code class="inline">ssh_file:is_host_key/5</code></a> and <a href="ssh_file.html#is_auth_key/3"><code class="inline">ssh_file:is_auth_key/3</code></a>.</p><p>Own Id: OTP-16512</p></li><li><p>The ssh agent is now implemented in the ssh_agent key callback module.</p><p>Enable with the the option <code class="inline">{key_cb, {ssh_agent, []}}</code> in for example
ssh:connect/3.</p><p>See the <a href="ssh_agent.html">ssh_agent manual</a> for details.</p><p>Own Id: OTP-16513</p></li><li><p>Algorithm configuration could now be done in a .config file.</p><p>This is useful for example to enable an algorithm that is disabled by default.
It could now be enabled in an .config-file without changing the code,</p><p>See the SSH User's Guide chapter <a href="configurations.html">&quot;Configuration in SSH&quot;</a>.</p><p>Own Id: OTP-16540</p></li><li><p>Documented which gen_tcp socket options can't be used in calls to ssh:connect
and ssh:daemon.</p><p>Own Id: OTP-16589</p></li><li><p>Added <a href="ssh.html#t:kb_int_fun_4/0">kb_int_fun_4()</a> to the
<a href="ssh.html#t:authentication_daemon_options/0">authentication_daemon_options()</a> to
enable generating dynamic keyboard-interactive prompts from the user's state
returned from the authentication fun <a href="ssh.html#t:pwdfun_4/0">pwdfun_4()</a>.</p><p>Own Id: OTP-16622 Aux Id: PR-2604</p></li></ul><h2 id="ssh-4-9-1-5" class="section-heading"><a href="#ssh-4-9-1-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.9.1.5</span></h2><h3 id="fixed-bugs-and-malfunctions-78" class="section-heading"><a href="#fixed-bugs-and-malfunctions-78" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>With this change (being response to CVE-2023-48795), ssh can negotiate &quot;strict KEX&quot; OpenSSH extension with peers supporting it; also 'chacha20-poly1305@openssh.com' algorithm becomes a less preferred cipher.</p><p>If strict KEX availability cannot be ensured on both connection sides, affected encryption modes(CHACHA and CBC) can be disabled with standard ssh configuration. This will provide protection against vulnerability, but at a cost of affecting interoperability. See Configuring algorithms in SSH User's Guide.</p><p>Thanks to Fabian Bäumer, Marcus Brinkmann and Jörg Schwenk.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-18897</p></li><li><p>With this change, KEX strict terminal message is emitted with debug verbosity.</p><p>Own Id: OTP-19002 Aux Id: ERIERL-1041</p></li></ul><h2 id="ssh-4-9-1-4" class="section-heading"><a href="#ssh-4-9-1-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.9.1.4</span></h2><h3 id="fixed-bugs-and-malfunctions-79" class="section-heading"><a href="#fixed-bugs-and-malfunctions-79" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The value of the <code class="inline">connect_timeout</code> option is now used as default value for the
negotiation timeout.</p><p>Own Id: OTP-17707 Aux Id: ERIERL-706</p></li></ul><h2 id="ssh-4-9-1-3" class="section-heading"><a href="#ssh-4-9-1-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.9.1.3</span></h2><h3 id="fixed-bugs-and-malfunctions-80" class="section-heading"><a href="#fixed-bugs-and-malfunctions-80" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The idle_time timer was not cancelled when a channel was opened within the
timeout time on an empty connection that have had channels previously.</p><p>Own Id: OTP-17279</p></li></ul><h2 id="ssh-4-9-1-2" class="section-heading"><a href="#ssh-4-9-1-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.9.1.2</span></h2><h3 id="fixed-bugs-and-malfunctions-81" class="section-heading"><a href="#fixed-bugs-and-malfunctions-81" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix decoder bug.</p><p>Own Id: OTP-16904</p></li></ul><h2 id="ssh-4-9-1-1" class="section-heading"><a href="#ssh-4-9-1-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.9.1.1</span></h2><h3 id="fixed-bugs-and-malfunctions-82" class="section-heading"><a href="#fixed-bugs-and-malfunctions-82" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix a bug that could crash the cli server if a too large cli-window was
requested from the client.</p><p>Own Id: OTP-16791 Aux Id: ERIERL-520</p></li></ul><h3 id="improvements-and-new-features-17" class="section-heading"><a href="#improvements-and-new-features-17" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>A new timeout is defined for daemons: <code class="inline">hello_timeout</code>.</p><p>It closes an incoming TCP-connection if no valid 1st message is received from
the client within the timeout limit.</p><p>Own Id: OTP-16803</p></li></ul><h2 id="ssh-4-9-1" class="section-heading"><a href="#ssh-4-9-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.9.1</span></h2><h3 id="fixed-bugs-and-malfunctions-83" class="section-heading"><a href="#fixed-bugs-and-malfunctions-83" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Potential hazard between re-keying decision and socket close.</p><p>Own Id: OTP-16462 Aux Id: ERIERL-464</p></li></ul><h2 id="ssh-4-9" class="section-heading"><a href="#ssh-4-9" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.9</span></h2><h3 id="fixed-bugs-and-malfunctions-84" class="section-heading"><a href="#fixed-bugs-and-malfunctions-84" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Unicode problems for ssh_sftp:write fixed.</p><p>Own Id: OTP-16377</p></li></ul><h3 id="improvements-and-new-features-18" class="section-heading"><a href="#improvements-and-new-features-18" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Changes to the internal api of the experimental ssh_dbg tool.</p><p>Own Id: OTP-16353</p></li><li><p>The new functions <a href="ssh.html#set_sock_opts/2"><code class="inline">ssh:set_sock_opts/2</code></a> and <a href="ssh.html#get_sock_opts/2"><code class="inline">ssh:get_sock_opts/2</code></a> sets and
reads option values for the underlying TCP stream.</p><p>Own Id: OTP-16485</p></li></ul><h2 id="ssh-4-8-2" class="section-heading"><a href="#ssh-4-8-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.8.2</span></h2><h3 id="fixed-bugs-and-malfunctions-85" class="section-heading"><a href="#fixed-bugs-and-malfunctions-85" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed that <code class="inline">ssh_connection:send</code> could allocate a large amount of memory if
given an iolist() as input data.</p><p>Own Id: OTP-16373</p></li><li><p>Safe atom conversions.</p><p>Own Id: OTP-16375</p></li><li><p>Constant time comparisons added.</p><p>Own Id: OTP-16376</p></li></ul><h2 id="ssh-4-8-1" class="section-heading"><a href="#ssh-4-8-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.8.1</span></h2><h3 id="fixed-bugs-and-malfunctions-86" class="section-heading"><a href="#fixed-bugs-and-malfunctions-86" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The ssh cli (e.g shell) server behaved strangely when characters were inserted
in a string such that the last characters tried to wrap the line.</p><p>Own Id: OTP-14849 Aux Id: ERL-545</p></li><li><p>If an OTP SSH server was serving an &quot;exec&quot; request and the executed code used
Erlang <code class="inline">standard_io</code> for input/output, the I/O was erroneously handled by the
<em>server's</em> group leader, so the I/O turned up in the the server's Erlang shell
(if any). The user at the client side did therefore not see that I/O.</p><p>This is corrected now, so the client - for example the ssh OS shell command -
handles the I/O. The user could send input to the server side exec handling
code by writing on the terminal, and server side output from for example
io:format is presented on the terminal - not only the functional result.</p><p>NOTE 1: Servers executing exec requests with the old, undocumented ways of
specifying the custom exec handler is not changed. Changed are only the two
cases where the server's 'exec' option either:</p><ol><li>is not specified (i.e. using the default shell) or,</li><li>it has the <code class="inline">{direct, fun(...) -&gt; ... end}</code> value format.</li></ol><p>NOTE 2: Previously an end-of-line marker was appended on the result and error
reports at the client side. They are removed now and the error reports are
slightly enhanced.</p><p>TECHNICAL DETAILS: The server's device <code class="inline">standard_input</code> receives data events
from the exec request's channel, and the device <code class="inline">standard_output</code> is sending
its data by data events to the client on that channel. The result is that
<code class="inline">standard_io</code> is now performed by the client's group leader.</p><p>Own Id: OTP-15417 Aux Id: OTP-16108</p></li><li><p>The functions ssh:shell/1,2,3 left the connection open when they returned.
That leakage is fixed now.</p><p>Own Id: OTP-16047</p></li><li><p>Corrected that an Erlang SSH server could return the status code 4294967295
instead of 255 on some errors of an exec request.</p><p>Own Id: OTP-16123</p></li></ul><h3 id="improvements-and-new-features-19" class="section-heading"><a href="#improvements-and-new-features-19" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Internal simplification of ssh_sftp/ssh_xfer</p><p>Own Id: OTP-15972</p></li><li><p>The documentation of <a href="using_ssh.html#one-time-execution">One-Time Execution</a> in
the User's Guide is updated with more examples.</p><p>Own Id: OTP-16108 Aux Id: OTP-15417</p></li><li><p>The new value <code class="inline">'disabled'</code> is introduced in the SSH daemon options 'exec' and
'shell'. Previously they lacked a clear way of disabling them.</p><p>Own Id: OTP-16113</p></li><li><p>The old algorithms 'aes192_cbc', 'aes256_cbc' and 'hmac-sha1-96' are added for
compatibility with older peers.</p><p>The mac 'hmac-sha1-96' is nowadays not recommended and must therefore be
explicitly enabled. Use for example the Option value
<code class="inline">{modify_algorithms, [{append, [{mac,['hmac-sha1-96']}]}]}</code></p><p>Own Id: OTP-16170</p></li></ul><h2 id="ssh-4-8" class="section-heading"><a href="#ssh-4-8" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.8</span></h2><h3 id="fixed-bugs-and-malfunctions-87" class="section-heading"><a href="#fixed-bugs-and-malfunctions-87" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed wrong type definition for the daemon option <code class="inline">subsystems</code>.</p><p>Own Id: OTP-15820</p></li><li><p>Fixed a possible SSH logging crash if there was a problem in an early stage of
session setup.</p><p>Own Id: OTP-15962 Aux Id: ERL-990</p></li></ul><h3 id="improvements-and-new-features-20" class="section-heading"><a href="#improvements-and-new-features-20" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>The documentation for the modules ssh_connection, ssh_sftp and ssh_sftpd are
now generated from the -spec:s.</p><p>Own Id: OTP-15395</p></li><li><p>Internal cleanup including removal of the internal file <code class="inline">ssh_userauth.hrl</code>.</p><p>Own Id: OTP-15876 Aux Id: PR-2255, PR-2256</p></li><li><p>Removed unused definitions in <code class="inline">ssh.hrl</code>.</p><p>Own Id: OTP-15929 Aux Id: PR-2297</p></li><li><p>Removed unused fields in the internal <code class="inline">#connection{}</code> record.</p><p>Own Id: OTP-15984</p></li><li><p>To get information of a <code class="inline">connection_ref()</code> from for example <a href="ssh.html#connect/3"><code class="inline">ssh:connect/3</code></a>,
there was previously one function available namely <a href="ssh.html#connection_info/2"><code class="inline">ssh:connection_info/2</code></a>.
This ticket adds <a href="ssh.html#connection_info/1"><code class="inline">ssh:connection_info/1</code></a> which returns all information.</p><p>For daemons (servers) started with for example <a href="ssh.html#daemon/2"><code class="inline">ssh:daemon/2</code></a> the function
<a href="ssh.html#daemon_info/1"><code class="inline">ssh:daemon_info/1</code></a> returning all information was available. This ticket adds
<a href="ssh.html#daemon_info/2"><code class="inline">ssh:daemon_info/2</code></a> which returns only the information specified in the second
argument.</p><p>The info of connections and of daemons now also includes the item '<code class="inline">options</code>'.
Only those options that does not have their default values are returned.</p><p>For a connection also the items '<code class="inline">algorithms</code>' and '<code class="inline">channels</code>' are added.</p><p>Own Id: OTP-16040</p></li></ul><h2 id="ssh-4-7-7" class="section-heading"><a href="#ssh-4-7-7" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.7.7</span></h2><h3 id="improvements-and-new-features-21" class="section-heading"><a href="#improvements-and-new-features-21" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>SSH uses the new crypto API.</p><p>Own Id: OTP-15673</p></li></ul><h2 id="ssh-4-7-6-6" class="section-heading"><a href="#ssh-4-7-6-6" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.7.6.6</span></h2><h3 id="fixed-bugs-and-malfunctions-88" class="section-heading"><a href="#fixed-bugs-and-malfunctions-88" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The idle_time timer was not cancelled when a channel was opened within the
timeout time on an empty connection that have had channels previously.</p><p>Own Id: OTP-17279</p></li></ul><h2 id="ssh-4-7-6-5" class="section-heading"><a href="#ssh-4-7-6-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.7.6.5</span></h2><h3 id="fixed-bugs-and-malfunctions-89" class="section-heading"><a href="#fixed-bugs-and-malfunctions-89" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix decoder bug.</p><p>Own Id: OTP-16904</p></li></ul><h2 id="ssh-4-7-6-4" class="section-heading"><a href="#ssh-4-7-6-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.7.6.4</span></h2><h3 id="fixed-bugs-and-malfunctions-90" class="section-heading"><a href="#fixed-bugs-and-malfunctions-90" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Potential hazard between re-keying decision and socket close.</p><p>Own Id: OTP-16462 Aux Id: ERIERL-464</p></li></ul><h2 id="ssh-4-7-6-3" class="section-heading"><a href="#ssh-4-7-6-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.7.6.3</span></h2><h3 id="fixed-bugs-and-malfunctions-91" class="section-heading"><a href="#fixed-bugs-and-malfunctions-91" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed that <code class="inline">ssh_connection:send</code> could allocate a large amount of memory if
given an iolist() as input data.</p><p>Own Id: OTP-16373</p></li><li><p>Safe atom conversions.</p><p>Own Id: OTP-16375</p></li><li><p>Constant time comparisons added.</p><p>Own Id: OTP-16376</p></li></ul><h2 id="ssh-4-7-6-2" class="section-heading"><a href="#ssh-4-7-6-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.7.6.2</span></h2><h3 id="fixed-bugs-and-malfunctions-92" class="section-heading"><a href="#fixed-bugs-and-malfunctions-92" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The ssh cli (e.g shell) server behaved strangely when characters were inserted
in a string so that the last characters tried to wrap the line.</p><p>Own Id: OTP-14849 Aux Id: ERL-545</p></li></ul><h2 id="ssh-4-7-6-1" class="section-heading"><a href="#ssh-4-7-6-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.7.6.1</span></h2><h3 id="fixed-bugs-and-malfunctions-93" class="section-heading"><a href="#fixed-bugs-and-malfunctions-93" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed a possible SSH logging crash if there was a problem in an early stage of
session setup.</p><p>Own Id: OTP-15962 Aux Id: ERL-990</p></li></ul><h2 id="ssh-4-7-6" class="section-heading"><a href="#ssh-4-7-6" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.7.6</span></h2><h3 id="improvements-and-new-features-22" class="section-heading"><a href="#improvements-and-new-features-22" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>When an SSH server receives the very first message on a new TCP connection,
and that message is not the expected one, the 64 first bytes of the received
message are now dumped in the INFO REPORT that reports the Protocol Error.</p><p>This facilitates the debugging of who sends the bad message or of detecting a
possible port scanning.</p><p>Own Id: OTP-15772</p></li></ul><h2 id="ssh-4-7-5" class="section-heading"><a href="#ssh-4-7-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.7.5</span></h2><h3 id="fixed-bugs-and-malfunctions-94" class="section-heading"><a href="#fixed-bugs-and-malfunctions-94" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The callback <code class="inline">ssh_channel:init/1</code> was missing in OTP-21</p><p>Own Id: OTP-15762</p></li><li><p>If a client was connected to an server on an already open socket, the callback
<code class="inline">fun(PeerName,FingerPrint)</code> in the <code class="inline">accept_callback</code> option passed the local
name in the argument PeerName instead of the remote name.</p><p>Own Id: OTP-15763</p></li></ul><h2 id="ssh-4-7-4" class="section-heading"><a href="#ssh-4-7-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.7.4</span></h2><h3 id="fixed-bugs-and-malfunctions-95" class="section-heading"><a href="#fixed-bugs-and-malfunctions-95" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>SSH sftp daemon now accepts an SSH_FXP_STAT message encoded according to the
wrong sftp version. Some clients sends such messages.</p><p>Own Id: OTP-15498 Aux Id: ERL-822, PR-2077</p></li></ul><h2 id="ssh-4-7-3" class="section-heading"><a href="#ssh-4-7-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.7.3</span></h2><h3 id="fixed-bugs-and-malfunctions-96" class="section-heading"><a href="#fixed-bugs-and-malfunctions-96" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed port leakage if a ssh:daemon call failed.</p><p>Own Id: OTP-15397 Aux Id: ERL-801</p></li></ul><h2 id="ssh-4-7-2" class="section-heading"><a href="#ssh-4-7-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.7.2</span></h2><h3 id="fixed-bugs-and-malfunctions-97" class="section-heading"><a href="#fixed-bugs-and-malfunctions-97" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Incompatibility with newer OpenSSH fixed. Previously versions 7.8 and later
could cause Erlang SSH to exit.</p><p>Own Id: OTP-15413</p></li><li><p>The '<code class="inline">exec</code>' option for ssh daemons had wrong format in the documentation.</p><p>Own Id: OTP-15416</p></li></ul><h3 id="improvements-and-new-features-23" class="section-heading"><a href="#improvements-and-new-features-23" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Added public key methods ssh-ed25519 and ssh-ed448.</p><p>Requires OpenSSL 1.1.1 or higher as cryptolib under the OTP application
<code class="inline">crypto</code>.</p><p>Own Id: OTP-15094 Aux Id: OTP-15419</p></li><li><p>The SSH property tests are now adapted to the PropEr testing tool.</p><p>Own Id: OTP-15312</p></li><li><p>The term &quot;user&quot; was not documented in the SSH app. A new chapter with
terminology is added to the User's Manual where the term &quot;user&quot; is defined.</p><p>A reference manual page about the module <code class="inline">ssh_file</code> is also added. This is the
default callback module for user's keys, host keys etc.</p><p>Own Id: OTP-15314</p></li><li><p>Host and user key checking is made more robust.</p><p>Own Id: OTP-15424</p></li></ul><h2 id="ssh-4-7-1" class="section-heading"><a href="#ssh-4-7-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.7.1</span></h2><h3 id="improvements-and-new-features-24" class="section-heading"><a href="#improvements-and-new-features-24" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Extended the undocumented <code class="inline">ssh_dbg</code> debug module with an api for a circular
trace buffer. This makes it easy to record the last low-level events before an
error is detected. It is intended for solving difficult errors.</p><p>Own Id: OTP-15020</p></li><li><p>The key exchange methods <code class="inline">'curve25519-sha256@libssh.org'</code>,
<code class="inline">'curve25519-sha256'</code> and <code class="inline">'curve448-sha512'</code> are implemented. The last two
are defined in <a href="https://tools.ietf.org/html/draft-ietf-curdle-ssh-curves">https://tools.ietf.org/html/draft-ietf-curdle-ssh-curves</a></p><p>They all depends on that OpenSSL 1.1.1 or higher is used as cryptolib.</p><p>Own Id: OTP-15133 Aux Id: OTP-15240</p></li><li><p>The cipher '<code class="inline">chacha20-poly1305@openssh.com</code>' is now supported if OpenSSL 1.1.1
or higher is used as cryptolib.</p><p>Own Id: OTP-15209 Aux Id: OTP-15164</p></li></ul><h2 id="ssh-4-7" class="section-heading"><a href="#ssh-4-7" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.7</span></h2><h3 id="fixed-bugs-and-malfunctions-98" class="section-heading"><a href="#fixed-bugs-and-malfunctions-98" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>If the daemon port listener is restarted, it could potentially fail with
<code class="inline">eaddrinuse</code> if the timing is unlucky. It will now retry and exponentially
back off the listener restart a few times before failing.</p><p>Own Id: OTP-14955</p></li><li><p>A channel callback module always got the module name as reason in a call to
terminate. Now it will get the proper Reason, usually 'normal'.</p><p>Own Id: OTP-15084</p></li></ul><h3 id="improvements-and-new-features-25" class="section-heading"><a href="#improvements-and-new-features-25" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>The option <code class="inline">exec</code> has new option values defined to make it much more easy to
implement an own <code class="inline">exec</code> server.</p><p>An option called <code class="inline">exec</code> for daemons implementing the handling of 'exec'
requests has existed a long time but has been undocumented. The old
undocumented value - as well as its behavior - is kept for compatibility
EXCEPT that error messages are changed and are sent as &quot;stderror&quot; text.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-14851</p></li><li><p>Updated ssh_connection:shell/2 documentation.</p><p>Own Id: OTP-14880</p></li><li><p>The experimental <code class="inline">ssh_dbg</code> module is completely re-written. Its purpose is to
make tracing and debugging easier on deployed systems.</p><p>Own Id: OTP-14896</p></li><li><p>The SSH supervisor structure has been slightly changed. This makes stopping
the ssh application considerably faster if there are open connections. This is
important in for example restarts.</p><p>Own Id: OTP-14988</p></li><li><p>The type specifications in SSH are completely reworked and the following types
are renamed:</p><p><code class="inline">ssh:ssh_connection_ref()</code> is changed to
<a href="ssh.html#t:connection_ref/0"><code class="inline">ssh:connection_ref()</code></a>,</p><p><code class="inline">ssh:ssh_daemon_ref()</code> is changed to
<a href="ssh.html#t:daemon_ref/0"><code class="inline">ssh:daemon_ref()</code></a>,</p><p><code class="inline">ssh:ssh_channel_id()</code> is changed to
<a href="ssh.html#t:channel_id/0"><code class="inline">ssh:channel_id()</code></a>.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-15002 Aux Id: OTP-15030</p></li><li><p>The internal timer handling in SSH is now based on the gen_statem timers.</p><p>Own Id: OTP-15019</p></li><li><p>Removed the undocumented and unused modules <code class="inline">ssh_client_key.erl</code> and
<code class="inline">ssh_server_key.erl</code>.</p><p>Own Id: OTP-15028</p></li><li><p>The Reference Manual pages are partly updated.</p><p>The ssh page is now generated from specs and types, is restructured and is
partly rephrased.</p><p>The ssh_channel, ssh_connection, ssh_client_key_api, ssh_server_key_api and
ssh_sftp pages are updated with links, correct type names and some minor
changes.</p><p>Own Id: OTP-15030 Aux Id: OTP-15002</p></li><li><p>The behaviors <code class="inline">ssh_channel</code> and <code class="inline">ssh_daemon_channel</code> are renamed to
<code class="inline">ssh_client_channel</code> and <code class="inline">ssh_server_channel</code> respectively.</p><p>The old modules are kept for compatibility but should preferably be replaced
when updating callback modules referring them.</p><p>Own Id: OTP-15041</p></li><li><p>New test suite for channels.</p><p>Own Id: OTP-15051</p></li><li><p>The <code class="inline">rekey_limit</code> option could now set the max time as well as the previously
max data amount.</p><p>Own Id: OTP-15069 Aux Id: ERL-617</p></li><li><p>Changed process exit supervision from links to monitors.</p><p>Own Id: OTP-15082</p></li><li><p>Better handling of misbehaving channel callback modules.</p><p>Own Id: OTP-15083</p></li><li><p>A new moduli file is generated. This file is used for the recommended
<code class="inline">diffie-hellman-group-exchange-sha256</code> key exchange algorithm in SSH.</p><p>Own Id: OTP-15113</p></li></ul><h2 id="ssh-4-6-9-7" class="section-heading"><a href="#ssh-4-6-9-7" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.6.9.7</span></h2><h3 id="fixed-bugs-and-malfunctions-99" class="section-heading"><a href="#fixed-bugs-and-malfunctions-99" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed possible hanging in <a href="ssh_sftp.html#stop_channel/1"><code class="inline">ssh_sftp:stop_channel/1</code></a>.</p><p>Own Id: OTP-16507 Aux Id: ERIERL-470</p></li></ul><h2 id="ssh-4-6-9-6" class="section-heading"><a href="#ssh-4-6-9-6" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.6.9.6</span></h2><h3 id="fixed-bugs-and-malfunctions-100" class="section-heading"><a href="#fixed-bugs-and-malfunctions-100" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed that <code class="inline">ssh_connection:send</code> could allocate a large amount of memory if
given an iolist() as input data.</p><p>Own Id: OTP-16373</p></li><li><p>Safe atom conversions.</p><p>Own Id: OTP-16375</p></li><li><p>Constant time comparisons added.</p><p>Own Id: OTP-16376</p></li></ul><h2 id="ssh-4-6-9-5" class="section-heading"><a href="#ssh-4-6-9-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.6.9.5</span></h2><h3 id="fixed-bugs-and-malfunctions-101" class="section-heading"><a href="#fixed-bugs-and-malfunctions-101" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The ssh cli (e.g shell) server behaved strangely when characters were inserted
in a string so that the last characters tried to wrap the line.</p><p>Own Id: OTP-14849 Aux Id: ERL-545</p></li></ul><h2 id="ssh-4-6-9-4" class="section-heading"><a href="#ssh-4-6-9-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.6.9.4</span></h2><h3 id="fixed-bugs-and-malfunctions-102" class="section-heading"><a href="#fixed-bugs-and-malfunctions-102" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>If a client was connected to an server on an already open socket, the callback
<code class="inline">fun(PeerName,FingerPrint)</code> in the <code class="inline">accept_callback</code> option passed the local
name in the argument PeerName instead of the remote name.</p><p>Own Id: OTP-15763</p></li></ul><h2 id="ssh-4-6-9-3" class="section-heading"><a href="#ssh-4-6-9-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.6.9.3</span></h2><h3 id="fixed-bugs-and-malfunctions-103" class="section-heading"><a href="#fixed-bugs-and-malfunctions-103" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed port leakage if a ssh:daemon call failed.</p><p>Own Id: OTP-15397 Aux Id: ERL-801</p></li></ul><h2 id="ssh-4-6-9-2" class="section-heading"><a href="#ssh-4-6-9-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.6.9.2</span></h2><h3 id="fixed-bugs-and-malfunctions-104" class="section-heading"><a href="#fixed-bugs-and-malfunctions-104" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Incompatibility with newer OpenSSH fixed. Previously versions 7.8 and later
could cause Erlang SSH to exit.</p><p>Own Id: OTP-15413</p></li></ul><h2 id="ssh-4-6-9-1" class="section-heading"><a href="#ssh-4-6-9-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.6.9.1</span></h2><h3 id="fixed-bugs-and-malfunctions-105" class="section-heading"><a href="#fixed-bugs-and-malfunctions-105" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>SFTP clients reported the error reason <code class="inline">&quot;&quot;</code> if a non-OTP sftp server was
killed during a long file transmission.</p><p>Now the signal name (for example <code class="inline">&quot;KILL&quot;</code>) will be the error reason if the
server's reason is empty.</p><p>The documentation also lacked type information about this class of errors.</p><p>Own Id: OTP-15148 Aux Id: ERIERL-194</p></li><li><p>Fix ssh_sftp decode error for sftp protocol version 4</p><p>Own Id: OTP-15149 Aux Id: ERIERL-199</p></li></ul><h2 id="ssh-4-6-9" class="section-heading"><a href="#ssh-4-6-9" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.6.9</span></h2><h3 id="fixed-bugs-and-malfunctions-106" class="section-heading"><a href="#fixed-bugs-and-malfunctions-106" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Host key hash erroneously calculated for clients following draft-00 of RFC
4419, for example PuTTY</p><p>Own Id: OTP-15064</p></li><li><p>Renegotiation could fail in some states</p><p>Own Id: OTP-15066</p></li></ul><h2 id="ssh-4-6-8" class="section-heading"><a href="#ssh-4-6-8" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.6.8</span></h2><h3 id="fixed-bugs-and-malfunctions-107" class="section-heading"><a href="#fixed-bugs-and-malfunctions-107" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>An ssh_sftp server (running version 6) could fail if it is told to remove a
file which in fact is a directory.</p><p>Own Id: OTP-15004</p></li><li><p>Fix rare spurious shutdowns of ssh servers when receiving <code class="inline">{'EXIT',_,normal}</code>
messages.</p><p>Own Id: OTP-15018</p></li></ul><h2 id="ssh-4-6-7" class="section-heading"><a href="#ssh-4-6-7" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.6.7</span></h2><h3 id="fixed-bugs-and-malfunctions-108" class="section-heading"><a href="#fixed-bugs-and-malfunctions-108" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix bad spec in ssh.hrl: <code class="inline">double_algs()</code>.</p><p>Own Id: OTP-14990</p></li></ul><h2 id="ssh-4-6-6" class="section-heading"><a href="#ssh-4-6-6" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.6.6</span></h2><h3 id="fixed-bugs-and-malfunctions-109" class="section-heading"><a href="#fixed-bugs-and-malfunctions-109" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Remove a blocking risk when a channel is closed and an operation is tried on
that channel after at least a second's time gap.</p><p>Own Id: OTP-14939</p></li></ul><h3 id="improvements-and-new-features-26" class="section-heading"><a href="#improvements-and-new-features-26" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Added ssh_compat_SUITE.</p><p>This suite contains a number of interoperability tests mainly with OpenSSH.
The tests start docker containers with different OpenSSH and
OpenSSL/LibreSSLcryptolib versions and performs a number of tests of supported
algorithms.</p><p>All login methods and all user's public key types are tested both for the
client and the server.</p><p>All algorithms for kex, cipher, host key, mac and compressions are tested with
a number of exec and sftp tests, both for the client and the server.</p><p>Own Id: OTP-14194 Aux Id: OTP-12487</p></li><li><p>Default exec is disabled when a user-defined shell is enabled.</p><p>Own Id: OTP-14881</p></li></ul><h2 id="ssh-4-6-5" class="section-heading"><a href="#ssh-4-6-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.6.5</span></h2><h3 id="fixed-bugs-and-malfunctions-110" class="section-heading"><a href="#fixed-bugs-and-malfunctions-110" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Adjusted supervisor timeouts</p><p>Own Id: OTP-14907</p></li><li><p>Remove ERROR messages for slow process exits</p><p>Own Id: OTP-14930</p></li></ul><h3 id="improvements-and-new-features-27" class="section-heading"><a href="#improvements-and-new-features-27" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Add option <code class="inline">save_accepted_host</code> to <code class="inline">ssh:connection</code>. This option, if set to
false, inhibits saving host keys to e.g the file <code class="inline">known_hosts</code>.</p><p>Own Id: OTP-14935</p></li></ul><h2 id="ssh-4-6-4" class="section-heading"><a href="#ssh-4-6-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.6.4</span></h2><h3 id="fixed-bugs-and-malfunctions-111" class="section-heading"><a href="#fixed-bugs-and-malfunctions-111" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix problem with OpenSSH 7.2 (and later) clients that has used sha1 instead of
sha2 for rsa-sha-256/512 user's public keys.</p><p>Own Id: OTP-14827 Aux Id: ERL-531</p></li></ul><h2 id="ssh-4-6-3" class="section-heading"><a href="#ssh-4-6-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.6.3</span></h2><h3 id="fixed-bugs-and-malfunctions-112" class="section-heading"><a href="#fixed-bugs-and-malfunctions-112" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Passphrase option for ecdsa public keys was missing.</p><p>Own Id: OTP-14602</p></li></ul><h3 id="improvements-and-new-features-28" class="section-heading"><a href="#improvements-and-new-features-28" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>The host and user public key handling is hardened so that a faulty plugin
can't deliver a key of wrong type.</p><p>Better checks in the server of the available hostkey's types at start and at
each accept.</p><p>Better checks in the client of the available user public key types at connect.</p><p>Own Id: OTP-14676 Aux Id: ERIERL-52, OTP-14570</p></li><li><p>SSH can now fetch the host key from the private keys stored in an Engine. See
the crypto application for details about Engines.</p><p>Own Id: OTP-14757</p></li></ul><h2 id="ssh-4-6-2" class="section-heading"><a href="#ssh-4-6-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.6.2</span></h2><h3 id="fixed-bugs-and-malfunctions-113" class="section-heading"><a href="#fixed-bugs-and-malfunctions-113" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Trailing white space was removed at end of the hello-string. This caused
interoperability problems with some other ssh-implementations (e.g OpenSSH
7.3p1 on Solaris 11)</p><p>Own Id: OTP-14763 Aux Id: ERIERL-74</p></li><li><p>Fixes that tcp connections that was immediately closed (SYN, SYNACK, ACK, RST)
by a client could be left in a zombie state.</p><p>Own Id: OTP-14778 Aux Id: ERIERL-104</p></li></ul><h2 id="ssh-4-6-1" class="section-heading"><a href="#ssh-4-6-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.6.1</span></h2><h3 id="fixed-bugs-and-malfunctions-114" class="section-heading"><a href="#fixed-bugs-and-malfunctions-114" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed broken printout</p><p>Own Id: OTP-14645</p></li></ul><h3 id="improvements-and-new-features-29" class="section-heading"><a href="#improvements-and-new-features-29" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Disable aes_gcm ciphers if peer is OpenSSH 6.2 which is known to have trouble
with them in some cases.</p><p>Own Id: OTP-14638</p></li></ul><h2 id="ssh-4-6" class="section-heading"><a href="#ssh-4-6" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.6</span></h2><h3 id="fixed-bugs-and-malfunctions-115" class="section-heading"><a href="#fixed-bugs-and-malfunctions-115" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Enables the <code class="inline">ssh_io module</code> to also accept binary values when reading
standard_io instead of getting stuck in the receive clause.</p><p>Own Id: OTP-14506 Aux Id: PR1503</p></li><li><p>Previously, the file owner access permission in response to
ssh_sftp:read_file_info/2 function was always <code class="inline">read_write</code>. With this fix, the
actual value of file owner access permission is added to the returning record.
That value is calculated from file mode value.</p><p>Own Id: OTP-14550 Aux Id: PR1533</p></li></ul><h3 id="improvements-and-new-features-30" class="section-heading"><a href="#improvements-and-new-features-30" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>A new option <code class="inline">modify_algorithms</code> is implemented. It enables specifying changes
on the default algorithms list. See the reference manual and the SSH User's
Guide chapter &quot;Configuring algorithms in SSH&quot;.</p><p>Own Id: OTP-14568</p></li></ul><h2 id="ssh-4-5-1" class="section-heading"><a href="#ssh-4-5-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.5.1</span></h2><h3 id="fixed-bugs-and-malfunctions-116" class="section-heading"><a href="#fixed-bugs-and-malfunctions-116" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>All unknown options are sent to the transport handler regardless of type.</p><p>Own Id: OTP-14541 Aux Id: EIRERL-63</p></li></ul><h2 id="ssh-4-5" class="section-heading"><a href="#ssh-4-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.5</span></h2><h3 id="improvements-and-new-features-31" class="section-heading"><a href="#improvements-and-new-features-31" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>The internal handling of SSH options is re-written.</p><p>Previously there were no checks if a client option was given to a daemon or
vice versa. This is corrected now. If your code has e.g. a client-only option
in a call to start a daemon, the call will fail.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-12872</p></li><li><p>Modernization of key exchange algorithms. See draft-ietf-curdle-ssh-kex-sha2
for a discussion.</p><p>Removed an outdated weak algorithm and added stronger replacements to keep
interoperability with other modern ssh clients and servers. The default
ordering of the algorithms is also adjusted.</p><p>Retired: The nowadays unsecure key-exchange <code class="inline">diffie-hellman-group1-sha1</code> is
not enabled by default, but can be enabled with the option
<code class="inline">preferred-algorithms</code>.</p><p>Added: The new stronger key-exchange <code class="inline">diffie-hellman-group16-sha512</code>,
<code class="inline">diffie-hellman-group18-sha512</code> and <code class="inline">diffie-hellman-group14-sha256</code> are added
and enabled by default.</p><p>The questionable [RFC 6194] sha1-based algorithms
<code class="inline">diffie-hellman-group-exchange-sha1</code> and <code class="inline">diffie-hellman-group14-sha1</code> are
however still kept enabled by default for compatibility with ancient clients
and servers that lack modern key-exchange alternatives. When the
draft-ietf-curdle-ssh-kex-sha2 becomes an rfc, those sha1-based algorithms and
<code class="inline">diffie-hellman-group1-sha1</code> will be deprecated by IETF. They might then be
removed from the default list in Erlang/OTP.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-14110</p></li><li><p>Modernized internal representation of sftp by use of maps.</p><p>Own Id: OTP-14117</p></li><li><p>The Extension Negotiation Mechanism and the extension <code class="inline">server-sig-algs</code> in
draft-ietf-curdle-ssh-ext-info-05 are implemented.</p><p>The related draft-ietf-curdle-rsa-sha2-05 is implemented and introduces the
signature algorithms <code class="inline">rsa-sha2-256</code> and <code class="inline">rsa-sha2-512</code>.</p><p>Own Id: OTP-14193</p></li><li><p>The 'timeout' and 'connect_timeout' handling in ssh_sftp:start_channel
documentation is clarified.</p><p>Own Id: OTP-14216</p></li><li><p>The functions <code class="inline">ssh:connect</code>, <code class="inline">ssh:shell</code> and <code class="inline">ssh:start_channel</code> now accept an
IP-tuple as Host destination argument.</p><p>Own Id: OTP-14243</p></li><li><p>The function <a href="ssh.html#daemon_info/1"><code class="inline">ssh:daemon_info/1</code></a> now returns Host and Profile as well as the
Port info in the property list.</p><p>Own Id: OTP-14259</p></li><li><p>Removed the option <code class="inline">public_key_alg</code> which was deprecated in 18.2. Use
<code class="inline">pref_public_key_algs</code> instead.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-14263</p></li><li><p>The SSH application is refactored regarding daemon starting. The resolution of
contradicting <code class="inline">Host</code> argument and <code class="inline">ip</code> option were not described. There were
also strange corner cases when the <code class="inline">'any'</code> value was used in <code class="inline">Host</code> argument
or <code class="inline">ip</code> option. This is (hopefully) resolved now, but it may cause
incompatibilities for code using both <code class="inline">Host</code> and the <code class="inline">ip</code> option. The value
'loopback' has been added for a correct way of naming those addresses.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-14264</p></li><li><p>The supervisor code is refactored. The naming of listening IP-Port-Profile
triples are slightly changed to improve consistency in strange corner cases as
resolved by OTP-14264</p><p>Own Id: OTP-14267 Aux Id: OTP-14266</p></li><li><p>The <code class="inline">idle_time</code> option can now be used in daemons.</p><p>Own Id: OTP-14312</p></li><li><p>Added test cases for IETF-CURDLE Extension Negotiation (ext-info)</p><p>Own Id: OTP-14361</p></li><li><p>Testcases for IETF-CURDLE extension <code class="inline">server-sig-algs</code> including <code class="inline">rsa-sha2-*</code></p><p>Own Id: OTP-14362 Aux Id: OTP-14361</p></li><li><p>The option <code class="inline">auth_methods</code> can now also be used in clients to select which
authentication options that are used and in which order.</p><p>Own Id: OTP-14399</p></li><li><p>Checks that a ECDSA public key (<code class="inline">ecdsa-sha2-nistp*</code>) stored in a file has the
correct size.</p><p>Own Id: OTP-14410</p></li></ul><h2 id="ssh-4-4-2-4" class="section-heading"><a href="#ssh-4-4-2-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.4.2.4</span></h2><h3 id="fixed-bugs-and-malfunctions-117" class="section-heading"><a href="#fixed-bugs-and-malfunctions-117" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix rare spurious shutdowns of ssh servers when receiving <code class="inline">{'EXIT',_,normal}</code>
messages.</p><p>Own Id: OTP-15018</p></li><li><p>Host key hash erroneously calculated for clients following draft-00 of RFC
4419, for example PuTTY</p><p>Own Id: OTP-15064</p></li><li><p>Renegotiation could fail in some states</p><p>Own Id: OTP-15066</p></li></ul><h2 id="ssh-4-4-2-3" class="section-heading"><a href="#ssh-4-4-2-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.4.2.3</span></h2><h3 id="fixed-bugs-and-malfunctions-118" class="section-heading"><a href="#fixed-bugs-and-malfunctions-118" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>An ssh_sftp server (running version 6) could fail if it is told to remove a
file which in fact is a directory.</p><p>Own Id: OTP-15004</p></li></ul><h2 id="ssh-4-4-2-2" class="section-heading"><a href="#ssh-4-4-2-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.4.2.2</span></h2><h3 id="improvements-and-new-features-32" class="section-heading"><a href="#improvements-and-new-features-32" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Default exec is disabled when a user-defined shell is enabled.</p><p>Own Id: OTP-14881</p></li></ul><h2 id="ssh-4-4-2-1" class="section-heading"><a href="#ssh-4-4-2-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.4.2.1</span></h2><h3 id="fixed-bugs-and-malfunctions-119" class="section-heading"><a href="#fixed-bugs-and-malfunctions-119" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Trailing white space was removed at end of the hello-string. This caused
interoperability problems with some other ssh-implementations (e.g OpenSSH
7.3p1 on Solaris 11)</p><p>Own Id: OTP-14763 Aux Id: ERIERL-74</p></li></ul><h2 id="ssh-4-4-2" class="section-heading"><a href="#ssh-4-4-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.4.2</span></h2><h3 id="fixed-bugs-and-malfunctions-120" class="section-heading"><a href="#fixed-bugs-and-malfunctions-120" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>ssh:daemon_info/1 crashed if the listening IP was not 'any'</p><p>Own Id: OTP-14298 Aux Id: seq13294</p></li></ul><h2 id="ssh-4-4-1" class="section-heading"><a href="#ssh-4-4-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.4.1</span></h2><h3 id="fixed-bugs-and-malfunctions-121" class="section-heading"><a href="#fixed-bugs-and-malfunctions-121" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix bug when opening connections. If the tcp setup failed, that would in some
cases not result in an error return value.</p><p>Own Id: OTP-14108</p></li><li><p>Reduce information leakage in case of decryption errors.</p><p>Own Id: OTP-14109</p></li><li><p>The key exchange algorithm diffie-hellman-group-exchange-sha* has a
server-option <code class="inline">{dh_gex_limits,{Min,Max}}</code>. There was a hostkey signature
validation error on the client side if the option was used and the <code class="inline">Min</code> or
the <code class="inline">Max</code> differed from the corresponding values obtained from the client.</p><p>This bug is now corrected.</p><p>Own Id: OTP-14166</p></li><li><p>The sftpd server now correctly uses <code class="inline">root_dir</code> and <code class="inline">cwd</code> when resolving file
paths if both are provided. The <code class="inline">cwd</code> handling is also corrected.</p><p>Thanks to kape1395!</p><p>Own Id: OTP-14225 Aux Id: PR-1331, PR-1335</p></li><li><p>Ssh_cli used a function that does not handle non-utf8 unicode correctly.</p><p>Own Id: OTP-14230 Aux Id: ERL-364</p></li></ul><h3 id="improvements-and-new-features-33" class="section-heading"><a href="#improvements-and-new-features-33" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>The implementation of the key exchange algorithms
diffie-hellman-group-exchange-sha* are optimized, up to a factor of 11 for
the slowest ( = biggest and safest) group size.</p><p>Own Id: OTP-14169 Aux Id: seq-13261</p></li><li><p>The ssh host key fingerprint generation now also takes a list of algorithms
and returns a list of corresponding fingerprints. See
<code class="inline">public_key:ssh_hostkey_fingerprint/2</code> and the option <code class="inline">silently_accept_hosts</code>
in <code class="inline">ssh:connect</code>.</p><p>Own Id: OTP-14223</p></li></ul><h2 id="ssh-4-4" class="section-heading"><a href="#ssh-4-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.4</span></h2><h3 id="fixed-bugs-and-malfunctions-122" class="section-heading"><a href="#fixed-bugs-and-malfunctions-122" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>A file read with an sftp client could loose data if the packet_size is set to
larger than 64k. This is corrected now in such a way that the packet_size is
silently lowered if there is a risk for data loss.</p><p>Own Id: OTP-13857 Aux Id: ERL-238, OTP-13858</p></li><li><p>When user defined SSH shell REPL process exits with reason normal, the SSH
channel callback module should report successful exit status to the SSH
client. This provides simple way for SSH clients to check for successful
completion of executed commands. (Thanks to isvilen)</p><p>Own Id: OTP-13905 Aux Id: PR-1173</p></li></ul><h3 id="improvements-and-new-features-34" class="section-heading"><a href="#improvements-and-new-features-34" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Extended the option <code class="inline">silently_accept_hosts</code> for <code class="inline">ssh:connect</code> to make it
possible for the client to check the SSH host key fingerprint string. Se the
reference manual for SSH.</p><p>Own Id: OTP-13887 Aux Id: OTP-13888</p></li></ul><h2 id="ssh-4-3-6" class="section-heading"><a href="#ssh-4-3-6" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.3.6</span></h2><h3 id="fixed-bugs-and-malfunctions-123" class="section-heading"><a href="#fixed-bugs-and-malfunctions-123" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Re-negotiation problems with OpenSSH client solved.</p><p>Own Id: OTP-13972</p></li></ul><h2 id="ssh-4-3-5" class="section-heading"><a href="#ssh-4-3-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.3.5</span></h2><h3 id="fixed-bugs-and-malfunctions-124" class="section-heading"><a href="#fixed-bugs-and-malfunctions-124" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>If a client illegaly sends an info-line and then immediately closes the
TCP-connection, a badmatch exception was raised.</p><p>Own Id: OTP-13966</p></li></ul><h2 id="ssh-4-3-4" class="section-heading"><a href="#ssh-4-3-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.3.4</span></h2><h3 id="fixed-bugs-and-malfunctions-125" class="section-heading"><a href="#fixed-bugs-and-malfunctions-125" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Intermittent ssh ERROR REPORT mentioning nonblocking_sender</p><p>Own Id: OTP-13953 Aux Id: seq13199</p></li></ul><h2 id="ssh-4-3-3" class="section-heading"><a href="#ssh-4-3-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.3.3</span></h2><h3 id="fixed-bugs-and-malfunctions-126" class="section-heading"><a href="#fixed-bugs-and-malfunctions-126" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Handle all possible exit values that should be interpreted as {error,
closed}. Failing to do so could lead to unexpected crashes for users of the
ssh application.</p><p>Own Id: OTP-13932 Aux Id: seq13189</p></li></ul><h2 id="ssh-4-3-2" class="section-heading"><a href="#ssh-4-3-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.3.2</span></h2><h3 id="fixed-bugs-and-malfunctions-127" class="section-heading"><a href="#fixed-bugs-and-malfunctions-127" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Upgrade of an established client connection could crash because the ssh client
supervisors children had wrong type. This is fixed now.</p><p>Own Id: OTP-13782 Aux Id: seq13158</p></li><li><p>Partly checks the public key early in public key authorization</p><p>Own Id: OTP-13847 Aux Id: defensics-ssh3.1.0-190243,205277,219318</p></li><li><p>Corrected handling of SHA for ECDSA (Elliptic curve public keys)</p><p>Own Id: OTP-13850 Aux Id: defensics-ssh3.1.0-214168</p></li><li><p>Problems found by test suites as well as by Codenomicon/Defensics fixed: -
reduce max random padding to 15 bytes (Codenomicon/Defensics) - inclomplete
pdu handling (Codenomicon/Defensics) - badmatch in test suite - non-blocking
send fixes deadlock in ssh_connection_SUITE:interrupted_send</p><p>Own Id: OTP-13854</p></li><li><p>Caller is now notified when a tcp close is received.</p><p>Own Id: OTP-13859 Aux Id: seq13177</p></li></ul><h3 id="improvements-and-new-features-35" class="section-heading"><a href="#improvements-and-new-features-35" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Use application:ensure_all_started/2 instead of hard-coding deps</p><p>Own Id: OTP-13843 Aux Id: PR-1147</p></li></ul><h2 id="ssh-4-3-1" class="section-heading"><a href="#ssh-4-3-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.3.1</span></h2><h3 id="fixed-bugs-and-malfunctions-128" class="section-heading"><a href="#fixed-bugs-and-malfunctions-128" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>SSH client does not any longer retry a bad password given as option to
ssh:connect et al.</p><p>Own Id: OTP-13674 Aux Id: TR-HU92273</p></li><li><p>Removed possible hanging risk for a certain timing sequence when communicating
client and server executes on the same node.</p><p>Own Id: OTP-13715</p></li></ul><h2 id="ssh-4-3" class="section-heading"><a href="#ssh-4-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.3</span></h2><h3 id="improvements-and-new-features-36" class="section-heading"><a href="#improvements-and-new-features-36" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>A socket created and connected by gen_tcp could now be used as input to
ssh:connect, ssh:shell, ssh_sftp:start_channel and ssh:daemon.</p><p>Own Id: OTP-12860</p></li><li><p>Some time optimization mainly in message encoding.</p><p>Own Id: OTP-13131</p></li><li><p>Optimized the sftp client time by setting new packet and window sizes.</p><p>Own Id: OTP-13175</p></li><li><p>The <code class="inline">ssh_connection_handler</code> module in SSH is changed and now uses the new
behaviour <code class="inline">gen_statem</code>.</p><p>The module can be used as an example of a <code class="inline">gen_statem</code> callback module but
with a warning: This commit of ssh is just a straightforward port from gen_fsm
to gen_statem with some code cleaning. Since the state machine and the state
callbacks are almost unchanged the ssh module does not demonstrate the full
potential of the new behaviour.</p><p>The &quot;new&quot; state machine uses compound states. The ssh server and client state
machines are quite similar but differences exist. With <code class="inline">gen_fsm</code> there were
flags in the user data which in fact implemented &quot;substates&quot;. Now with
<code class="inline">gen_statem</code> those are made explicit in the state names, eg. the state
<code class="inline">userauth</code> and the binary <code class="inline">role</code>-flag becomes the two state names
<code class="inline">{userauth, server}</code> and <code class="inline">{userauth, client}</code>.</p><p>Own Id: OTP-13267</p></li><li><p>The <code class="inline">{error, Reason}</code> tuples returned from <code class="inline">ssh_sftp</code> api functions are
described.</p><p>Own Id: OTP-13347 Aux Id: ERL-86</p></li><li><p>Added -spec in ssh</p><p>Own Id: OTP-13479</p></li><li><p>It is now possible to call <code class="inline">ssh:daemon/{1,2,3}</code> with <code class="inline">Port=0</code>. This makes the
daemon select a free listening tcp port before opening it. To find this port
number after the call, use the new function <a href="ssh.html#daemon_info/1"><code class="inline">ssh:daemon_info/1</code></a>. See the
reference manual for details.</p><p>Own Id: OTP-13527</p></li></ul><h2 id="ssh-4-2-2-6" class="section-heading"><a href="#ssh-4-2-2-6" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.2.2.6</span></h2><h3 id="fixed-bugs-and-malfunctions-129" class="section-heading"><a href="#fixed-bugs-and-malfunctions-129" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix rare spurious shutdowns of ssh servers when receiving <code class="inline">{'EXIT',_,normal}</code>
messages.</p><p>Own Id: OTP-15018</p></li></ul><h2 id="ssh-4-2-2-5" class="section-heading"><a href="#ssh-4-2-2-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.2.2.5</span></h2><h3 id="improvements-and-new-features-37" class="section-heading"><a href="#improvements-and-new-features-37" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Default exec is disabled when a user-defined shell is enabled.</p><p>Own Id: OTP-14881</p></li></ul><h2 id="ssh-4-2-2-4" class="section-heading"><a href="#ssh-4-2-2-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.2.2.4</span></h2><h3 id="fixed-bugs-and-malfunctions-130" class="section-heading"><a href="#fixed-bugs-and-malfunctions-130" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Trailing white space was removed at end of the hello-string. This caused
interoperability problems with some other ssh-implementations (e.g OpenSSH
7.3p1 on Solaris 11)</p><p>Own Id: OTP-14763 Aux Id: ERIERL-74</p></li></ul><h2 id="ssh-4-2-2-3" class="section-heading"><a href="#ssh-4-2-2-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.2.2.3</span></h2><h3 id="fixed-bugs-and-malfunctions-131" class="section-heading"><a href="#fixed-bugs-and-malfunctions-131" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The key exchange algorithm diffie-hellman-group-exchange-sha* has a
server-option <code class="inline">{dh_gex_limits,{Min,Max}}</code>. There was a hostkey signature
validation error on the client side if the option was used and the <code class="inline">Min</code> or
the <code class="inline">Max</code> differed from the corresponding values obtained from the client.</p><p>This bug is now corrected.</p><p>Own Id: OTP-14166</p></li></ul><h3 id="improvements-and-new-features-38" class="section-heading"><a href="#improvements-and-new-features-38" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Key exchange algorithms diffie-hellman-group-exchange-sha* optimized, up to a
factor of 11 for the slowest ( = biggest and safest) one.</p><p>Own Id: OTP-14169 Aux Id: seq-13261</p></li></ul><h2 id="ssh-4-2-2-2" class="section-heading"><a href="#ssh-4-2-2-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.2.2.2</span></h2><h3 id="fixed-bugs-and-malfunctions-132" class="section-heading"><a href="#fixed-bugs-and-malfunctions-132" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Upgrade of an established client connection could crash because the ssh client
supervisors children had wrong type. This is fixed now.</p><p>Own Id: OTP-13782 Aux Id: seq13158</p></li></ul><h2 id="ssh-4-2-2-1" class="section-heading"><a href="#ssh-4-2-2-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.2.2.1</span></h2><h3 id="fixed-bugs-and-malfunctions-133" class="section-heading"><a href="#fixed-bugs-and-malfunctions-133" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>SSH client does not any longer retry a bad password given as option to
ssh:connect et al.</p><p>Own Id: OTP-13674 Aux Id: TR-HU92273</p></li></ul><h2 id="ssh-4-2-2" class="section-heading"><a href="#ssh-4-2-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.2.2</span></h2><h3 id="fixed-bugs-and-malfunctions-134" class="section-heading"><a href="#fixed-bugs-and-malfunctions-134" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Documentation correction of <a href="ssh_sftp.html#position/4"><code class="inline">ssh_sftp:position/4</code></a></p><p>Thanks to Rabbe Fogelholm.</p><p>Own Id: OTP-13305 Aux Id: ERL-87</p></li></ul><h2 id="ssh-4-2-1" class="section-heading"><a href="#ssh-4-2-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.2.1</span></h2><h3 id="fixed-bugs-and-malfunctions-135" class="section-heading"><a href="#fixed-bugs-and-malfunctions-135" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The authentication method 'keyboard-interactive' failed in the Erlang client
when the server after successful authentication continued by asking for zero
more passwords.</p><p>Own Id: OTP-13225</p></li></ul><h2 id="ssh-4-2" class="section-heading"><a href="#ssh-4-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.2</span></h2><h3 id="fixed-bugs-and-malfunctions-136" class="section-heading"><a href="#fixed-bugs-and-malfunctions-136" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Better error handling in ssh_file. There was some rare errors when a
NFS-mounted file was opened by ssh_file and then remotely deleted during
reading. That caused an endless loop.</p><p>That bug is now fixed.</p><p>Own Id: OTP-12699 Aux Id: OTP-11688</p></li><li><p>Fixed a bug in the compression algorithm zlib@openssh.com.</p><p>Own Id: OTP-12759</p></li><li><p>It is now possible to start more than one daemon with a file descriptor given
in option fd. Each daemon must of course have a unique file descriptor.</p><p>Own Id: OTP-12966 Aux Id: seq12945</p></li><li><p>Fixed a bug that caused the option <code class="inline">dh_gex_limit</code> to be ignored.</p><p>Own Id: OTP-13029</p></li><li><p>A problem is fixed with the <code class="inline">ssh:connect</code> option <code class="inline">pref_public_key_algs</code>
specifying user keys.</p><p>Own Id: OTP-13158</p></li></ul><h3 id="improvements-and-new-features-39" class="section-heading"><a href="#improvements-and-new-features-39" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Document updates in the ssh reference manual: app doc file and ssh_connection.</p><p>Own Id: OTP-12003</p></li><li><p>The authorization phase is made stateful to prevent ssh acting on messages
sent in wrong order.</p><p>Own Id: OTP-12787</p></li><li><p>Testcases for bad message lengths and for bad subfield lengths added.</p><p>Own Id: OTP-12792 Aux Id: Codenomicon #5214, 6166</p></li><li><p>The 'ecdsa-sha2-nistp256', 'ecdsa-sha2-nistp384' and 'ecdsa-sha2-nistp521'
signature algorithms for ssh are implemented. See RFC 5656.</p><p>Own Id: OTP-12936</p></li><li><p>The crypto algorithms 'aes192-ctr' and 'aes256-ctr' are implemented. See
RFC 4344.</p><p>Own Id: OTP-12939</p></li><li><p>The ciphers and macs AEAD_AES_128_GCM and AEAD_AES_256_GCM are implemented but
not enabled per default. See the SSH App Reference Manual and RFC5647 for
details.</p><p>The ciphers aes128-gcm@openssh.com and aes256-gcm@openssh.com are also
implemented and available in the default configuration.</p><p>Own Id: OTP-13018</p></li><li><p>The ssh:daemon option dh_gex_groups is extended to read a user provided ssh
moduli file with generator-modulus pairs. The file is in openssh format.</p><p>Own Id: OTP-13052 Aux Id: OTP-13054</p></li><li><p>There is now a file (public_key/priv/moduli) which lists
size-generator-modulus triples. The purpose is to give servers the possibility
to select the crypto primes randomly among a list of pregenerated triples.
This reduces the risk for some attacks on diffie-hellman negotiation.</p><p>See the reference manual for public_key:dh_gex_group/4 where the handling of
this is described.</p><p>The ssh server (ssh:daemon) uses this.</p><p>Own Id: OTP-13054 Aux Id: OTP-13052</p></li><li><p>The ssh:daemon option pwdfun now also takes a fun/4. This enables the user
to 1) check userid-password in another way than the builtin algorithm, 2)
implement rate limiting per user or source IP or IP+Port, and 3) implement
blocking of missbehaving peers.</p><p>The old fun/2 still works as previously.</p><p>Own Id: OTP-13055 Aux Id: OTP-13053</p></li><li><p>There is now a new option to make the server limit the size range of moduli
available for the diffie-hellman group exchange negotiation. See option
<code class="inline">{dh_gex_limits,{Min,Max}}</code> in ssh:daemon/3.</p><p>Own Id: OTP-13066</p></li><li><p>Ecdh key exchange now validates compressed and uncompressed keys as defined in
rfc5656</p><p>Own Id: OTP-13067</p></li><li><p>Search order for the .ssh directory are changed so <code class="inline">$HOME</code> is tried before
<code class="inline">init:get_argument(home)</code>.</p><p>Own Id: OTP-13109</p></li><li><p>The sftp receive window handling is optimized so it will not update the remote
end too often. This makes &quot;sftp mget&quot; considerable faster.</p><p>Own Id: OTP-13130</p></li><li><p>The option <code class="inline">key_cb</code> is extended to take an optional list that is passed to the
callback module as an option. With this it is possible to have different keys
depending on which host that is connected. Another possibility is to write a
callback module that fetches keys etc from a database.</p><p>Thanks to Vipin Nair.</p><p>Own Id: OTP-13156</p></li></ul><h2 id="ssh-4-1-3" class="section-heading"><a href="#ssh-4-1-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.1.3</span></h2><h3 id="known-bugs-and-problems" class="section-heading"><a href="#known-bugs-and-problems" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Known Bugs and Problems</span></h3><ul><li><p>SSH_MSG_KEX_DH_GEX_REQUEST_OLD implemented to make PuTTY work with erl server.</p><p>Own Id: OTP-13140</p></li></ul><h2 id="ssh-4-1-2" class="section-heading"><a href="#ssh-4-1-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.1.2</span></h2><h3 id="fixed-bugs-and-malfunctions-137" class="section-heading"><a href="#fixed-bugs-and-malfunctions-137" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Add a 1024 group to the list of key group-exchange groups</p><p>Own Id: OTP-13046</p></li></ul><h2 id="ssh-4-1-1" class="section-heading"><a href="#ssh-4-1-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.1.1</span></h2><h3 id="improvements-and-new-features-40" class="section-heading"><a href="#improvements-and-new-features-40" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>A new option <code class="inline">max_channels</code> limits the number of channels with active
server-side subsystems that are accepted.</p><p>Own Id: OTP-13036</p></li></ul><h2 id="ssh-4-1" class="section-heading"><a href="#ssh-4-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.1</span></h2><h3 id="fixed-bugs-and-malfunctions-138" class="section-heading"><a href="#fixed-bugs-and-malfunctions-138" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Send an understandable disconnect message when the key exchange phase can't
find a common algorithm. There are also some test cases added.</p><p>Own Id: OTP-11531</p></li><li><p>The third parameter in <code class="inline">ssh_sftp:write_file</code> is now accepting iolists again.
Unicode handling adjusted.</p><p>Own Id: OTP-12853 Aux Id: seq12891</p></li></ul><h3 id="improvements-and-new-features-41" class="section-heading"><a href="#improvements-and-new-features-41" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>First part of ssh test suite re-organization and extension.</p><p>Own Id: OTP-12230</p></li><li><p>The key exchange algorithms 'ecdh-sha2-nistp256', 'ecdh-sha2-nistp384' and
'ecdh-sha2-nistp521' are implemented. See RFC 5656.</p><p>This raises the security level considerably.</p><p>Own Id: OTP-12622 Aux Id: OTP-12671, OTP-12672</p></li><li><p>The key exchange algorithm 'diffie-hellman-group14-sha1' is implemented. See
RFC 4253.</p><p>This raises the security level.</p><p>Own Id: OTP-12671 Aux Id: OTP-12672, OTP-12622</p></li><li><p>The key exchange algorithms 'diffie-hellman-group-exchange-sha1' and
'diffie-hellman-group-exchange-sha256' are implemented. See RFC 4419.</p><p>This raises the security level.</p><p>Own Id: OTP-12672 Aux Id: OTP-12671, OTP-12622</p></li><li><p>Adding random length extra padding as recommended in RFC 4253 section 6.</p><p>Own Id: OTP-12831</p></li><li><p>New test library for low-level protocol testing. There is also a test suite
using it for some preliminary tests. The intention is to build on that for
more testing of individual ssh messages. See
<code class="inline">lib/ssh/test/ssh_trpt_test_lib.erl</code> and <code class="inline">ssh_protocol_SUITE.erl</code> in the same
directory.</p><p>Own Id: OTP-12858</p></li><li><p>Increased default values for diffie-hellman-group-exchange-sha* to Min =
1024, N = 6144, Max = 8192.</p><p>Added 6144 and 8192 bit default gex groups.</p><p>Own Id: OTP-12937</p></li><li><p>The mac algorithm 'hmac-sha2-512' is implemented. See RFC 6668.</p><p>Own Id: OTP-12938</p></li></ul><h2 id="ssh-4-0" class="section-heading"><a href="#ssh-4-0" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 4.0</span></h2><h3 id="fixed-bugs-and-malfunctions-139" class="section-heading"><a href="#fixed-bugs-and-malfunctions-139" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Ssh crashed if a message was sent on a channel with packet_size = 0.</p><p>A new option for ssh:daemon is also introduced:
<code class="inline">minimal_remote_max_packet_size</code>. This option sets the least max packet size
declaration that the daemon will accept from a client. The default value is 0
to maintain compatibility with OpenSSH and the rfc:s.</p><p>Own Id: OTP-12645 Aux Id: seq12816</p></li><li><p>Included test of the 'e' and 'f' parameters in diffie-hellman key exchange as
specified in rfc 4253 section 8.</p><p>Own Id: OTP-12649</p></li><li><p>Fixes the bug that once the <code class="inline">rekey_limit</code> bytes (by default, 1GB) had been
transmitted the connection was rekeyed every minute, not after the next
transferred 'rekey_limit' chunk.</p><p>Thanks to Simon Cornish for the report and the fix!</p><p>Own Id: OTP-12692</p></li><li><p>Fixes a bug that causes an SFTP connection to always fail when {timeout,
Timeout} option is used with ssh_sftp:start_channel.</p><p>Thanks to Simon Cornish</p><p>Own Id: OTP-12708</p></li><li><p>Fix various ssh key exchange problems.</p><p>Thanks to Simon Cornish</p><p>Own Id: OTP-12760 Aux Id:
<a href="https://github.com/erlang/otp/pull/715">pull req 715</a></p></li><li><p>The options <code class="inline">system_dir</code> and <code class="inline">user_dir</code> assumes that the value is a path to a
directory which is readable. This is now checked early, so <code class="inline">ssh:daemon</code> and
<code class="inline">ssh:connect</code> will fail with an error message immediately.</p><p>Own Id: OTP-12788</p></li><li><p>A daemon now checks that a client doesn't try to authorize with methods not in
the option auth_methods.</p><p>Own Id: OTP-12790</p></li><li><p>Disconnectfun now should trigger on all disconnects.</p><p>Own Id: OTP-12811</p></li></ul><h3 id="improvements-and-new-features-42" class="section-heading"><a href="#improvements-and-new-features-42" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Better usage of binary matching in ssh_auth.erl and ssh_message.erl</p><p>Own Id: OTP-11697</p></li><li><p>A new option 'preferred_algorithms' is available for <code class="inline">ssh:daemon</code> and
<code class="inline">ssh:connect</code>.</p><p>This option defines the algorithms presented to the peer in the algorithm
negotiation phase of the ssh protocol.</p><p>The default list can be obtained from the new function
<a href="ssh.html#default_algorithms/0"><code class="inline">ssh:default_algorithms/0</code></a>.</p><p>*<strong> INCOMPATIBILITY with removed undocumented options 'role' and
'compression' *</strong></p><p>Own Id: OTP-12029</p></li><li><p>The internal group to user_drv protocol has been changed to be synchronous in
order to guarantee that output sent to a process implementing the user_drv
protocol is printed before replying. This protocol is used by the
standard_output device and the ssh application when acting as a client.</p><p>This change changes the previous unlimited buffer when printing to standard_io
and other devices that end up in user_drv to 1KB.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-12240</p></li><li><p>If ssh_connection:subsystem/4 fails we do not want to crash but rather
terminate gracefully.</p><p>Own Id: OTP-12648 Aux Id: seq12834</p></li><li><p>New option <code class="inline">id_string</code> for <code class="inline">ssh:daemon</code> and <code class="inline">ssh:connect</code> for limiting banner
grabbing attempts.</p><p>The possible values are: <code class="inline">{id_string,string()}</code> and <code class="inline">{id_string,random}</code>. The
latter will make ssh generate a random nonsense id-string for each new
connection.</p><p>Own Id: OTP-12659</p></li><li><p>To enable the ssh daemon to run in a virtualized environment, where there can
be more that one server that has the same ip-address and port, we add a new
option profile.</p><p>Own Id: OTP-12675</p></li><li><p>Upgrade test suite added.</p><p>Own Id: OTP-12676</p></li><li><p>A new option for handling the SSH_MSG_DEBUG message's printouts. A fun could
be given in the options that will be called whenever the SSH_MSG_DEBUG message
arrives. This enables the user to format the printout or just discard it.</p><p>Own Id: OTP-12738 Aux Id: seq12860</p></li><li><p>Testcase improvements and corrections:</p><p>* Add testcases for the <code class="inline">disconnectfun</code> option on both server and client
sides</p><p>* Timeout testcases adjusted for slow machines where they sometimes failed</p><p>Own Id: OTP-12786</p></li><li><p>The option <code class="inline">disconnectfun</code> can now be used both on the client and server side.</p><p>Own Id: OTP-12789</p></li><li><p>A new option unknown_msgfun/2 for ssh:connect and ssh:daemon for handling
unknown messages. With the option it is possible to intercept before an INFO
log message is generated.</p><p>One usage is to filter out messages that are not wanted in the error logger as
info reports. An example of such a message is the 'etimedout' tcp error
message that will be received if a connection has keep_alive and the peer is
restarted.</p><p>Own Id: OTP-12813 Aux Id: seq12881</p></li></ul><h2 id="ssh-3-2-4" class="section-heading"><a href="#ssh-3-2-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 3.2.4</span></h2><h3 id="fixed-bugs-and-malfunctions-140" class="section-heading"><a href="#fixed-bugs-and-malfunctions-140" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Gracefully terminate if sockets is unexpectedly closed.</p><p>Own Id: OTP-12782</p></li><li><p>Made Codenomicon Defensics test suite pass:</p><ul><li>limit number of algorithms in kexinit message</li><li>check 'e' and 'f' parameters in kexdh</li><li>implement 'keyboard-interactive' user authentication on server side</li><li>return plain text message to bad version exchange message</li></ul><p>Own Id: OTP-12784</p></li></ul><h2 id="ssh-3-2-3" class="section-heading"><a href="#ssh-3-2-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 3.2.3</span></h2><h3 id="fixed-bugs-and-malfunctions-141" class="section-heading"><a href="#fixed-bugs-and-malfunctions-141" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>A new option for handling the SSH_MSG_DEBUG message's printouts. A fun could
be given in the options that will be called whenever the SSH_MSG_DEBUG message
arrives. This enables the user to format the printout or just discard it.</p><p>Own Id: OTP-12738 Aux Id: seq12860</p></li></ul><h2 id="ssh-3-2-2" class="section-heading"><a href="#ssh-3-2-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 3.2.2</span></h2><h3 id="improvements-and-new-features-43" class="section-heading"><a href="#improvements-and-new-features-43" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>New option <code class="inline">id_string</code> for <code class="inline">ssh:daemon</code> and <code class="inline">ssh:connect</code> for limiting banner
grabbing attempts.</p><p>The possible values are: <code class="inline">{id_string,string()}</code> and <code class="inline">{id_string,random}</code>. The
latter will make ssh generate a random nonsense id-string for each new
connection.</p><p>Own Id: OTP-12659</p></li></ul><h2 id="ssh-3-2-1" class="section-heading"><a href="#ssh-3-2-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 3.2.1</span></h2><h3 id="fixed-bugs-and-malfunctions-142" class="section-heading"><a href="#fixed-bugs-and-malfunctions-142" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Ssh crashed if a message was sent on a channel with packet_size = 0.</p><p>A new option for ssh:daemon is also introduced:
<code class="inline">minimal_remote_max_packet_size</code>. This option sets the least max packet size
declaration that the daemon will accept from a client. The default value is 0
to maintain compatibility with OpenSSH and the rfc:s.</p><p>Own Id: OTP-12645 Aux Id: seq12816</p></li></ul><h2 id="ssh-3-2" class="section-heading"><a href="#ssh-3-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 3.2</span></h2><h3 id="fixed-bugs-and-malfunctions-143" class="section-heading"><a href="#fixed-bugs-and-malfunctions-143" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>If a channel is closed by the peer while using a function with call semantics
in ssh_connection.erl return {error, closed}. Document that the functions
can return {error, timeout | closed} and not only ssh_request_status()</p><p>Own Id: OTP-12004</p></li><li><p>Bug that causes ssh:connect to return <code class="inline">{error,int()}</code> instead of
<code class="inline">{error,timeout}</code> when ssh handshake takes too long time.</p><p>Own Id: OTP-12369</p></li><li><p>Documentation corrections. (Thanks to Rabbe Fogelholm)</p><p>Own Id: OTP-12399</p></li></ul><h3 id="improvements-and-new-features-44" class="section-heading"><a href="#improvements-and-new-features-44" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Example of ssh_connection:exec added.</p><p>Own Id: OTP-12558</p></li></ul><h2 id="ssh-3-1" class="section-heading"><a href="#ssh-3-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 3.1</span></h2><h3 id="fixed-bugs-and-malfunctions-144" class="section-heading"><a href="#fixed-bugs-and-malfunctions-144" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Make sure the clean rule for ssh, ssl, eunit and otp_mibs actually removes
generated files.</p><p>Own Id: OTP-12200</p></li><li><p>Improved Property Tests (Thanks to Thomas, John and Tobias at QuviQ)</p><p>Own Id: OTP-12256</p></li><li><p>Correct typo of renegotiate that could cause rekeying to fail</p><p>Own Id: OTP-12277 Aux Id: seq12736</p></li><li><p>The {timeout, Timeout} option passed to ssh_sftp:start_channel was not
applied to the early phases of the SSH protocol. This patch passes the Timeout
through to ssh:connect. In case the timeout occurs during these phases,
{error, timeout} is returned. (Thanks to Simon Cornish)</p><p>Own Id: OTP-12306</p></li></ul><h3 id="improvements-and-new-features-45" class="section-heading"><a href="#improvements-and-new-features-45" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Added API functions ptty_alloc/3 and ptty_alloc/4, to allocate a pseudo tty.</p><p>Own Id: OTP-11542 Aux Id: seq12493, OTP-11631</p></li><li><p>Supports tar file creation on other media than file systems mounted on the
local machine.</p><p>The <code class="inline">erl_tar</code> api is extended with <a href="../../apps/stdlib/erl_tar.html#init/3"><code class="inline">erl_tar:init/3</code></a> that enables usage of user
provided media storage routines. A ssh-specific set of such routines is hidden
in the new function <a href="ssh_sftp.html#open_tar/3"><code class="inline">ssh_sftp:open_tar/3</code></a> to simplify creating a tar archive
on a remote ssh server.</p><p>A chunked file reading option is added to <code class="inline">erl_tar:add/3,4</code> to save memory on
e.g small embedded systems. The size of the slices read from a file in that
case can be specified.</p><p>Own Id: OTP-12180 Aux Id: seq12715</p></li><li><p>Always send SSH_DISCONNECT protocol messages when peer sends corrupt messages.</p><p>Own Id: OTP-12185</p></li><li><p>Hooks for funs that can change binaries sent to remote sites from erl_tar for
renote tar file creation are added. See <code class="inline">ssh_sftp:open_tar/3,4</code> for details.
The hooks could also be used to read remote tar files that need transformation
before file extraction.</p><p>Those hooks are intended for encryption and decryption of tar files. Effort is
put into memory, disk and network resource economy.</p><p>Own Id: OTP-12312 Aux Id: OTP-12180</p></li></ul><h2 id="ssh-3-0-8" class="section-heading"><a href="#ssh-3-0-8" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 3.0.8</span></h2><h3 id="fixed-bugs-and-malfunctions-145" class="section-heading"><a href="#fixed-bugs-and-malfunctions-145" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixes of login blocking after port scanning.</p><p>Own Id: OTP-12247 Aux Id: seq12726</p></li></ul><h2 id="ssh-3-0-7" class="section-heading"><a href="#ssh-3-0-7" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 3.0.7</span></h2><h3 id="fixed-bugs-and-malfunctions-146" class="section-heading"><a href="#fixed-bugs-and-malfunctions-146" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Add option sftp_vsn to SFTP</p><p>Own Id: OTP-12227</p></li></ul><h3 id="improvements-and-new-features-46" class="section-heading"><a href="#improvements-and-new-features-46" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Fix option user_interaction to work as expected. When password authentication
is implemented with ssh keyboard-interactive method and the password is
already supplied, so that we do not need to query user, then connections
should succeed even though user_interaction option is set to false.</p><p>Own Id: OTP-11329 Aux Id: seq12420, seq12335</p></li></ul><h2 id="ssh-3-0-6" class="section-heading"><a href="#ssh-3-0-6" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 3.0.6</span></h2><h3 id="fixed-bugs-and-malfunctions-147" class="section-heading"><a href="#fixed-bugs-and-malfunctions-147" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Gracefully handle bad data from the client when expecting ssh version
exchange.</p><p>Own Id: OTP-12157 Aux Id: seq12706</p></li><li><p>When restarting an ssh daemon, that was stopped with ssh:stop_listner/ [1,2]
new options given shall replace old ones.</p><p>Own Id: OTP-12168 Aux Id: seq12711</p></li></ul><h3 id="improvements-and-new-features-47" class="section-heading"><a href="#improvements-and-new-features-47" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>ssh now has a format_status function to avoid printing sensitive information
in error loggs.</p><p>Own Id: OTP-12030</p></li></ul><h3 id="known-bugs-and-problems-1" class="section-heading"><a href="#known-bugs-and-problems-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Known Bugs and Problems</span></h3><ul><li><p>The option <code class="inline">parallel_login</code> didn't work with the value <code class="inline">true</code>. All logins were
serial.</p><p>Own Id: OTP-12194</p></li></ul><h2 id="ssh-3-0-5" class="section-heading"><a href="#ssh-3-0-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 3.0.5</span></h2><h3 id="fixed-bugs-and-malfunctions-148" class="section-heading"><a href="#fixed-bugs-and-malfunctions-148" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>When starting an ssh-daemon giving the option {parallel_login, true}, the
timeout for authentication negotiation ({negotiation_timeout, integer()})
was never removed.</p><p>This caused the session to always be terminated after the timeout if
parallel_login was set.</p><p>Own Id: OTP-12057 Aux Id: seq12663</p></li></ul><h3 id="improvements-and-new-features-48" class="section-heading"><a href="#improvements-and-new-features-48" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Warning: this is experimental and may disappear or change without previous
warning.</p><p>Experimental support for running Quickcheck and PropEr tests from common_test
suites is added to common_test. See the reference manual for the new module
<code class="inline">ct_property_testing</code>.</p><p>Experimental property tests are added under
<code class="inline">lib/{inet,ssh}/test/property_test</code>. They can be run directly or from the
commont_test suites <code class="inline">inet/ftp_property_test_SUITE.erl</code> and
<code class="inline">ssh/test/ssh_property_test_SUITE.erl</code>.</p><p>See the code in the <code class="inline">test</code> directories and the man page for details.</p><p>(Thanks to Tuncer Ayaz for a patch adding Triq)</p><p>Own Id: OTP-12119</p></li></ul><h2 id="ssh-3-0-4" class="section-heading"><a href="#ssh-3-0-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 3.0.4</span></h2><h3 id="fixed-bugs-and-malfunctions-149" class="section-heading"><a href="#fixed-bugs-and-malfunctions-149" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>When starting an ssh-daemon giving the option {parallel_login, true}, the
timeout for authentication negotiation ({negotiation_timeout, integer()})
was never removed.</p><p>This caused the session to always be terminated after the timeout if
parallel_login was set.</p><p>Own Id: OTP-12057 Aux Id: seq12663</p></li></ul><h2 id="ssh-3-0-3" class="section-heading"><a href="#ssh-3-0-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 3.0.3</span></h2><h3 id="fixed-bugs-and-malfunctions-150" class="section-heading"><a href="#fixed-bugs-and-malfunctions-150" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Removed mail address from error reports and corrected spelling error
(Stacktace -&gt; stacktrace)</p><p>Own Id: OTP-11883 Aux Id: seq12586</p></li><li><p>Decode/encode fixes in SSH_MSG_IGNORE and SSH_MSG_UNIMPLEMENTED.</p><p>Own Id: OTP-11983</p></li></ul><h3 id="improvements-and-new-features-49" class="section-heading"><a href="#improvements-and-new-features-49" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Accepts that some older OpenSSH clients sends incorrect disconnect messages.</p><p>Own Id: OTP-11972</p></li><li><p>Handle inet and inet6 option correctly</p><p>Own Id: OTP-11976</p></li></ul><h2 id="ssh-3-0-2" class="section-heading"><a href="#ssh-3-0-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 3.0.2</span></h2><h3 id="fixed-bugs-and-malfunctions-151" class="section-heading"><a href="#fixed-bugs-and-malfunctions-151" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed timeout bug in ssh:connect.</p><p>Own Id: OTP-11908</p></li></ul><h3 id="improvements-and-new-features-50" class="section-heading"><a href="#improvements-and-new-features-50" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Option <code class="inline">max_sessions</code> added to <code class="inline">ssh:daemon/{2,3}</code>. This option, if set, limits
the number of simultaneous connections accepted by the daemon.</p><p>Own Id: OTP-11885</p></li></ul><h2 id="ssh-3-0-1" class="section-heading"><a href="#ssh-3-0-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 3.0.1</span></h2><h3 id="fixed-bugs-and-malfunctions-152" class="section-heading"><a href="#fixed-bugs-and-malfunctions-152" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixes the problem that ssh_cli in some cases could delay the prompt if a tty
was not requested by the client.</p><p>Own Id: OTP-10732</p></li><li><p>The variable NewCol is now correctly calculated allowing for tab-completion of
function calls even when preceded with blank space (Thanks to Alexander
Demidenko)</p><p>Own Id: OTP-11566</p></li><li><p>Fix incorrect dialyzer spec and types, also enhance documentation.</p><p>Thanks to Ayaz Tuncer.</p><p>Own Id: OTP-11627</p></li><li><p>Fixed a bug when ssh:exec executes a linux command on a linux ssh daemon. If
the result is sent back from standard error, the length information was not
stripped off correctly.</p><p>Own Id: OTP-11667</p></li><li><p>Fixed a bug with the ssh file 'known_hosts' which made the file grow with many
equal entries.</p><p>Own Id: OTP-11671</p></li><li><p>Some local implementations of removing the last element from a list are
replaced by <a href="../../apps/stdlib/lists.html#droplast/1"><code class="inline">lists:droplast/1</code></a>. Note that this requires at least <code class="inline">stdlib-2.0</code>,
which is the stdlib version delivered in OTP 17.0. (Thanks to Hans Svensson)</p><p>Own Id: OTP-11678</p></li><li><p>Bug fix for <code class="inline">ssh:daemon/2,3</code> so that the failfun is called when it should.</p><p>Own Id: OTP-11680</p></li><li><p>Fixed bug which crashed ssh when SSH_MSG_KEX_DH_GEX_GROUP is received. This
could cause a vm-crash for eheap_alloc during garbage collect.</p><p>Own Id: OTP-11696 Aux Id: 12547, 12532</p></li><li><p>Fixes a bug that breaks keyboard-interactive authentication. Thanks to Simon
Cornish for reporting and suggesting a fix.</p><p>Own Id: OTP-11698</p></li><li><p>dialyzer specs are now correct for <a href="ssh.html#start/0"><code class="inline">ssh:start/0</code></a>, <a href="ssh.html#start/1"><code class="inline">ssh:start/1</code></a>, <a href="ssh.html#stop/0"><code class="inline">ssh:stop/0</code></a>
and <code class="inline">ssh_connection_handler:open_channel/5</code>. (Thanks to Johannes Weißl )</p><p>Own Id: OTP-11705</p></li><li><p>Application upgrade (appup) files are corrected for the following
applications:</p><p><code class="inline">asn1, common_test, compiler, crypto, debugger, dialyzer, edoc, eldap, erl_docgen, et, eunit, gs, hipe, inets, observer, odbc, os_mon, otp_mibs, parsetools, percept, public_key, reltool, runtime_tools, ssh, syntax_tools, test_server, tools, typer, webtool, wx, xmerl</code></p><p>A new test utility for testing appup files is added to test_server. This is
now used by most applications in OTP.</p><p>(Thanks to Tobias Schlager)</p><p>Own Id: OTP-11744</p></li><li><p>Fixed dialyzer warning for <code class="inline">ssh_connection:send</code>.</p><p>Own Id: OTP-11821</p></li><li><p><code class="inline">ssh:daemon/2,3</code> : Added options <code class="inline">negotiation_timeout</code> and <code class="inline">parallel_login</code> to
tune the authentication behaviour.</p><p>Own Id: OTP-11823</p></li></ul><h3 id="improvements-and-new-features-51" class="section-heading"><a href="#improvements-and-new-features-51" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Ssh now fully supports unicode filenames, filecontents, shell and cli. Please
note that the underlying os and emulator must also give support for unicode.
You may want to start the emulator with &quot;<code class="inline">erl +fnu</code>&quot; on Linux.</p><p>Own Id: OTP-10953</p></li></ul><h2 id="ssh-3-0" class="section-heading"><a href="#ssh-3-0" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 3.0</span></h2><h3 id="fixed-bugs-and-malfunctions-153" class="section-heading"><a href="#fixed-bugs-and-malfunctions-153" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The ssh cli is now faster at close and before new prompt.</p><p>Own Id: OTP-11339 Aux Id: seq12423</p></li><li><p>Ssh process structure was redesigned to better map to what is truly parallel
this has solved a lot of strange timing issues that sometimes would occur, for
instance a process leak could happen when a lot of connections where taken up
and down in parallel in a short period of time. Also backwards compatible
clauses to &quot;original&quot; but never supported features has been removed.</p><p>Impact: Increases flow efficiency</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-11363</p></li><li><p>Fix various typos in erts, kernel and ssh. Thanks to Martin Hässler.</p><p>Own Id: OTP-11414</p></li><li><p>Correct private_key type documentation in ssh_server_key_api. Thanks to
Tristan Sloughter.</p><p>Own Id: OTP-11449</p></li><li><p>The functions in ssh_no_io.erl did not mimic the functions in ssh_io.erl
correctly, the arity was incorrect for some functions which caused ssh to fail
in the wrong way.</p><p>Own Id: OTP-11490</p></li></ul><h3 id="improvements-and-new-features-52" class="section-heading"><a href="#improvements-and-new-features-52" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Add option to disallow CLI</p><p>Own Id: OTP-10976</p></li><li><p>Add sockname and user to ssh:connection_info/2</p><p>Own Id: OTP-11296</p></li></ul><h2 id="ssh-2-1-8" class="section-heading"><a href="#ssh-2-1-8" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 2.1.8</span></h2><h3 id="improvements-and-new-features-53" class="section-heading"><a href="#improvements-and-new-features-53" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Do not chmod ~/.ssh unnecessarily.</p><p>Own Id: OTP-11189</p></li><li><p>Make ssh_cli.erl handle CTRL+C. Thanks to Stefan Zegenhagen.</p><p>Own Id: OTP-11199</p></li><li><p>Clarified timeout options in documentation.</p><p>Own Id: OTP-11249</p></li><li><p>Add openssh_zlib compression type to ssh_transport. Thanks to Louis-Philippe
Gauthier.</p><p>Own Id: OTP-11256</p></li></ul><h2 id="ssh-2-1-7" class="section-heading"><a href="#ssh-2-1-7" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 2.1.7</span></h2><h3 id="fixed-bugs-and-malfunctions-154" class="section-heading"><a href="#fixed-bugs-and-malfunctions-154" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>ssh:daemon will get fed with an argument even if it is not a valid expression.</p><p>Own Id: OTP-10975</p></li></ul><h3 id="improvements-and-new-features-54" class="section-heading"><a href="#improvements-and-new-features-54" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Properly ignore everything in lib/ssh-5.3/doc/html/. Thanks to Anthony Ramine.</p><p>Own Id: OTP-10983</p></li><li><p>Integrate elliptic curve contribution from Andreas Schultz</p><p>In order to be able to support elliptic curve cipher suites in SSL/TLS,
additions to handle elliptic curve infrastructure has been added to public_key
and crypto.</p><p>This also has resulted in a rewrite of the crypto API to gain consistency and
remove unnecessary overhead. All OTP applications using crypto has been
updated to use the new API.</p><p>Impact: Elliptic curve cryptography (ECC) offers equivalent security with
smaller key sizes than other public key algorithms. Smaller key sizes result
in savings for power, memory, bandwidth, and computational cost that make ECC
especially attractive for constrained environments.</p><p>Own Id: OTP-11009</p></li></ul><h2 id="ssh-2-1-6" class="section-heading"><a href="#ssh-2-1-6" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 2.1.6</span></h2><h3 id="fixed-bugs-and-malfunctions-155" class="section-heading"><a href="#fixed-bugs-and-malfunctions-155" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed timing rekeying bug.</p><p>Own Id: OTP-10940</p></li></ul><h2 id="ssh-2-1-5" class="section-heading"><a href="#ssh-2-1-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 2.1.5</span></h2><h3 id="fixed-bugs-and-malfunctions-156" class="section-heading"><a href="#fixed-bugs-and-malfunctions-156" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Bug in rekeying for daemon fixed.</p><p>Own Id: OTP-10911</p></li></ul><h3 id="improvements-and-new-features-55" class="section-heading"><a href="#improvements-and-new-features-55" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Enhanced error message and added test for ssh clients trying to start non
existing subsystems.</p><p>Own Id: OTP-10714</p></li></ul><h2 id="ssh-2-1-4" class="section-heading"><a href="#ssh-2-1-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 2.1.4</span></h2><h3 id="improvements-and-new-features-56" class="section-heading"><a href="#improvements-and-new-features-56" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Better quality on the error messages for when key exchange failed.</p><p>Own Id: OTP-10553 Aux Id: seq12152</p></li><li><p>Fix link to documentation for ssh:connect/3,4. Thanks to Martin Hässler.</p><p>Own Id: OTP-10862</p></li></ul><h2 id="ssh-2-1-3" class="section-heading"><a href="#ssh-2-1-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 2.1.3</span></h2><h3 id="fixed-bugs-and-malfunctions-157" class="section-heading"><a href="#fixed-bugs-and-malfunctions-157" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>It is now possible to send an empty binary using ssh_connection:send/3, this
corner case previously caused ssh_connection:send to hang.</p><p>Own Id: OTP-9478 Aux Id: kunagi-226 [137]</p></li><li><p>Fix typo in keyboard-interactive string. Thanks to Daniel Goertzen</p><p>Own Id: OTP-10456</p></li><li><p>ssh_connectino:send/3 will not return until all data has been sent. Previously
it could return too early, resulting in things such premature close of the
connection. Also improved error handling of closed SSH channels.</p><p>Own Id: OTP-10467</p></li><li><p>Fixed ssh_cli.erl crashes because #state.buf is yet 'undefined'.</p><p>Fixed Client terminateing connections due to channel_request message response
is sent to the wrong id.</p><p>Affected SSH clients: - all clients based on SSH-2.0-TrileadSSH2Java_213
(problem #1) - SSH Term Pro (problem #2)</p><p>Thanks to Stefan Zegenhagen</p><p>Own Id: OTP-10475</p></li><li><p>Fixed various syntax errors in SSH appup file</p><p>Own Id: OTP-10657</p></li></ul><h3 id="improvements-and-new-features-57" class="section-heading"><a href="#improvements-and-new-features-57" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>SSH_FX_FILE_IS_A_DIRECTORY message for sftp implemented</p><p>Own Id: OTP-6406 Aux Id: kunagi-218 [129]</p></li><li><p>SSH Rekeying fixed</p><p>Own Id: OTP-7785 Aux Id: kunagi-220 [131]</p></li><li><p>Added User Guide for the SSH application</p><p>Own Id: OTP-7786 Aux Id: kunagi-221 [132]</p></li><li><p>Documentation regarding failfun, connectfun and disconnectfun provided</p><p>Own Id: OTP-7792 Aux Id: kunagi-222 [133]</p></li><li><p>SSH connection timer implementation</p><p>New option, {idle_time, integer()}, sets a timeout on connection when no
channels are active, defaults to infinity</p><p>Own Id: OTP-10514 Aux Id: seq12020</p></li><li><p>Some examples overflowing the width of PDF pages have been corrected.</p><p>Own Id: OTP-10665</p></li><li><p>Fixed internal error on when client and server cannot agree o which authmethod
to use.</p><p>Own Id: OTP-10731 Aux Id: seq12237</p></li></ul><h2 id="ssh-2-1-2-1" class="section-heading"><a href="#ssh-2-1-2-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 2.1.2.1</span></h2><h3 id="improvements-and-new-features-58" class="section-heading"><a href="#improvements-and-new-features-58" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Removed error report in ssh_connection_handler triggered by badmatch failure.</p><p>Own Id: OTP-11188</p></li></ul><h2 id="ssh-2-1-2" class="section-heading"><a href="#ssh-2-1-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 2.1.2</span></h2><h3 id="fixed-bugs-and-malfunctions-158" class="section-heading"><a href="#fixed-bugs-and-malfunctions-158" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>SSH quiet mode</p><p>A new option to ssh:connect/3,4, quiet_mode. If true, the client will not
print out anything on authorization.</p><p>Own Id: OTP-10429 Aux Id: kunagi-273 [184]</p></li><li><p>Restrict which key algorithms to use</p><p>A new option to ssh:connect/3,4 is introduced, public_key_algs, where you can
restrict which key algorithms to use and in which order to try them.</p><p>Own Id: OTP-10498 Aux Id: kunagi-289 [200]</p></li><li><p>Confidentiality of client password</p><p>Unsets clients password after authentication.</p><p>Own Id: OTP-10511 Aux Id: kunagi-292 [203]</p></li><li><p>Fixed user interaction for SSH</p><p>It's now available to accept hosts and input password</p><p>Own Id: OTP-10513 Aux Id: kunagi-293 [204]</p></li></ul><h2 id="ssh-2-1-1" class="section-heading"><a href="#ssh-2-1-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 2.1.1</span></h2><h3 id="fixed-bugs-and-malfunctions-159" class="section-heading"><a href="#fixed-bugs-and-malfunctions-159" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Ssh now only sends one channel close message under all circumstances, before
it would sometimes incorrectly send two.</p><p>Own Id: OTP-10060</p></li><li><p>The options check mistreated the ip_v6_disable-option, and did not handle
some, at the moment, undocumented options correctly.</p><p>Own Id: OTP-10061</p></li><li><p>The channel id in a channel failure message, sent to the peer, is now in all
cases the remote channel id</p><p>Own Id: OTP-10062</p></li><li><p>Improved handling of multiple closes to avoid occasional crashes when a
channel is closed more than once.</p><p>Own Id: OTP-10112</p></li><li><p>Fix lib/src/test/ssh_basic_SUITE.erl to fix IPv6 option typos</p><p>Fixed incorrect option &quot;ipv6_disable&quot; to &quot;ipv6_disabled&quot; as documented in the
ssh manual.</p><p>Own Id: OTP-10219</p></li><li><p>SSH: Make &quot;auth_methods&quot; server option re-usable</p><p>The 'auth_methods' option is used by the server side of the SSH code to tell a
connecting SSH client about the authentication methods that are supported by
the server. The code still extracts and handles the 'auth_methods' option from
Opts in appropriate places, but the Opts checking code in ssh.erl didn't allow
that option to be specified.</p><p>Own Id: OTP-10224</p></li><li><p>Use the correct channel id when adjusting the channel window</p><p>Own Id: OTP-10232</p></li></ul><h2 id="ssh-2-1" class="section-heading"><a href="#ssh-2-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 2.1</span></h2><h3 id="fixed-bugs-and-malfunctions-160" class="section-heading"><a href="#fixed-bugs-and-malfunctions-160" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>All keys in authorized_keys are considered, wrongly only the first one was
before.</p><p>Own Id: OTP-7235</p></li><li><p>ssh daemon now properly handles ras host keys, in previous versions only dsa
host keys sufficed to set up a connection.</p><p>Own Id: OTP-7677</p></li><li><p>ssh:shell/3 and ssh:connect/3 does not hang anymore if connection negotiation
fails</p><p>Own Id: OTP-8111</p></li><li><p>Improve check so that we will not try to read ssh packet length indicator if
not sure we have enough data.</p><p>Own Id: OTP-8380</p></li><li><p>Do not try to use user interaction when it is disabled.</p><p>Own Id: OTP-9466 Aux Id: seq11886</p></li><li><p>Improved error handling of internal errors i the ssh connection handling
process</p><p>Own Id: OTP-9905</p></li><li><p>sftp daemon generates file handles correct</p><p>Own Id: OTP-9948</p></li></ul><h3 id="improvements-and-new-features-59" class="section-heading"><a href="#improvements-and-new-features-59" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Document supported algorithms</p><p>Own Id: OTP-8109</p></li><li><p>Graceful handling of premature close from an sftp client.</p><p>Own Id: OTP-9391 Aux Id: seq11838</p></li><li><p>Changed ssh implementation to use the public_key application for all public
key handling. This is also a first step for enabling a callback API for
supplying public keys and handling keys protected with password phrases.</p><p>Additionally the test suites where improved so that they do not copy the users
keys to test server directories as this is a security liability. Also ipv6 and
file access issues found in the process has been fixed.</p><p>This change also solves OTP-7677 and OTP-7235</p><p>This changes also involves some updates to public_keys ssh-functions.</p><p>Own Id: OTP-9911</p></li><li><p>Added options for the ssh client to support user keys files that are password
protected.</p><p>Own Id: OTP-10036 Aux Id: OTP-6400, Seq10595</p></li></ul><h2 id="ssh-2-0-9" class="section-heading"><a href="#ssh-2-0-9" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 2.0.9</span></h2><h3 id="improvements-and-new-features-60" class="section-heading"><a href="#improvements-and-new-features-60" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Erlang/OTP can now be built using parallel make if you limit the number of
jobs, for instance using '<code class="inline">make -j6</code>' or '<code class="inline">make -j10</code>'. '<code class="inline">make -j</code>' does not
work at the moment because of some missing dependencies.</p><p>Own Id: OTP-9451</p></li><li><p>Ssh behaviours now use the new directive &quot;-callback&quot;. Parameters will be
further specified in a later version of ssh.</p><p>Own Id: OTP-9796</p></li></ul><h2 id="ssh-2-0-8" class="section-heading"><a href="#ssh-2-0-8" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 2.0.8</span></h2><h3 id="fixed-bugs-and-malfunctions-161" class="section-heading"><a href="#fixed-bugs-and-malfunctions-161" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Calling ssh_sftp:stop_channel/1 resulted in that the trap_exit flag was set to
true for the invoking process.</p><p>Own Id: OTP-9386 Aux Id: seq11865</p></li></ul><h2 id="ssh-2-0-7" class="section-heading"><a href="#ssh-2-0-7" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 2.0.7</span></h2><h3 id="fixed-bugs-and-malfunctions-162" class="section-heading"><a href="#fixed-bugs-and-malfunctions-162" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>An unexpected message would crash the ssh_connection_handler and close the
connection. Now an error message is generated instead.</p><p>Own Id: OTP-9273</p></li></ul><h2 id="ssh-2-0-6" class="section-heading"><a href="#ssh-2-0-6" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 2.0.6</span></h2><h3 id="fixed-bugs-and-malfunctions-163" class="section-heading"><a href="#fixed-bugs-and-malfunctions-163" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>A memory leak has been fixed. I.e. per terminated connection the size of a pid
and the length of a user name string was not cleared.</p><p>Own Id: OTP-9232</p></li></ul><h2 id="ssh-2-0-5" class="section-heading"><a href="#ssh-2-0-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 2.0.5</span></h2><h3 id="improvements-and-new-features-61" class="section-heading"><a href="#improvements-and-new-features-61" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Strengthened random number generation. (Thanks to Geoff Cant)</p><p>Own Id: OTP-9225</p></li></ul><h2 id="ssh-2-0-4" class="section-heading"><a href="#ssh-2-0-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 2.0.4</span></h2><h3 id="fixed-bugs-and-malfunctions-164" class="section-heading"><a href="#fixed-bugs-and-malfunctions-164" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>In some cases SSH returned {error, normal} when a channel was terminated
unexpectedly. This has now been changed to {error, channel_closed}.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-8987 Aux Id: seq11748</p></li><li><p>SSH did not handle the error reason enetunreach when trying to open a IPv6
connection.</p><p>Own Id: OTP-9031</p></li></ul><h3 id="improvements-and-new-features-62" class="section-heading"><a href="#improvements-and-new-features-62" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>It is now possible to use SSH to sign and verify binary data.</p><p>Own Id: OTP-8986</p></li><li><p>SSH now ensures that the .ssh directory exists before trying to access files
located in that directory.</p><p>Own Id: OTP-9010</p></li></ul><h2 id="ssh-2-0-3" class="section-heading"><a href="#ssh-2-0-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 2.0.3</span></h2><h3 id="fixed-bugs-and-malfunctions-165" class="section-heading"><a href="#fixed-bugs-and-malfunctions-165" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The fix regarding OTP-8849 was not included in the previous version as stated.</p><p>Own Id: OTP-8918</p></li></ul><h2 id="ssh-2-0-2" class="section-heading"><a href="#ssh-2-0-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 2.0.2</span></h2><h3 id="fixed-bugs-and-malfunctions-166" class="section-heading"><a href="#fixed-bugs-and-malfunctions-166" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The ssh_system_sup did not catch noproc and shutdown messages.</p><p>Own Id: OTP-8863</p></li><li><p>In some cases a crash report was generated when a connection was closing down.
This was caused by a race condition between two processes.</p><p>Own Id: OTP-8881 Aux Id: seq11656, seq11648</p></li></ul><h3 id="improvements-and-new-features-63" class="section-heading"><a href="#improvements-and-new-features-63" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>SSH no longer use deprecated public_key functions.</p><p>Own Id: OTP-8849</p></li></ul><h2 id="ssh-2-0-1" class="section-heading"><a href="#ssh-2-0-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 2.0.1</span></h2><h3 id="fixed-bugs-and-malfunctions-167" class="section-heading"><a href="#fixed-bugs-and-malfunctions-167" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>SSH in some cases terminated channels with reason normal when it should have
been shutdown.</p><p>Own Id: OTP-8714</p></li><li><p>SSH in some cases generated a crash report when a channel was closed in a
normal way.</p><p>Own Id: OTP-8735 Aux Id: seq11615</p></li><li><p>The processes ssh_subsystem_sup and one ssh_channel_sup was not terminated
when a connection was closed.</p><p>Own Id: OTP-8807</p></li></ul><h2 id="ssh-2-0" class="section-heading"><a href="#ssh-2-0" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 2.0</span></h2><h3 id="fixed-bugs-and-malfunctions-168" class="section-heading"><a href="#fixed-bugs-and-malfunctions-168" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The function ssh:connect/4 was not exported.</p><p>Own Id: OTP-8550 Aux Id:</p></li><li><p>Aligned error message with used version (SSH_FX_FAILURE vs
SSH_FX_NOT_A_DIRECTORY, the latter introduced in version 6).</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-8644 Aux Id: seq11574</p></li><li><p>Resolved race condition when another connection is started before a channel is
opened in the first connection.</p><p>Own Id: OTP-8645 Aux Id: seq11577</p></li></ul><h3 id="improvements-and-new-features-64" class="section-heading"><a href="#improvements-and-new-features-64" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>The configuration parameter ip_v6_disabled is now available, which makes it
possible for the user to alter the IP version SSH shall use.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-8535 Aux Id:</p></li><li><p>The ssh_connection:send operation now accepts infinity as timeout.</p><p>Own Id: OTP-8534 Aux Id:</p></li><li><p>The connection handler now include stack traces when a channel message is not
handled correctly.</p><p>Own Id: OTP-8524 Aux Id:</p></li><li><p>Removed deprecated modules (ssh_ssh, ssh_sshd and ssh_cm) and functions
(ssh_sftp:connect and ssh_sftp:stop).</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-8596 Aux Id:</p></li></ul><h2 id="ssh-1-1-8" class="section-heading"><a href="#ssh-1-1-8" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 1.1.8</span></h2><h3 id="fixed-bugs-and-malfunctions-169" class="section-heading"><a href="#fixed-bugs-and-malfunctions-169" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>In some cases SSH ceased to collect more data from the transport layer.</p><p>Own Id: OTP-8401 Aux Id: seq11479</p></li></ul><h3 id="improvements-and-new-features-65" class="section-heading"><a href="#improvements-and-new-features-65" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Old release notes removed.</p><p>Own Id: OTP-8356 Aux Id:</p></li></ul><h2 id="ssh-1-1-7" class="section-heading"><a href="#ssh-1-1-7" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 1.1.7</span></h2><h3 id="fixed-bugs-and-malfunctions-170" class="section-heading"><a href="#fixed-bugs-and-malfunctions-170" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Now clear all processes when a connection is terminated.</p><p>Own Id: OTP-8121 Aux Id:</p></li><li><p>In some rare cases the connection handler could enter an infinite loop.</p><p>Own Id: OTP-8277 Aux Id: seq11428</p></li><li><p>If an SFTP server did not respond with EOF, the function ssh_sftp:list_dir/2/3
would enter an infinite loop.</p><p>Own Id: OTP-8278 Aux Id: seq11450</p></li></ul><h3 id="improvements-and-new-features-66" class="section-heading"><a href="#improvements-and-new-features-66" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>The documentation is now built with open source tools (xsltproc and fop) that
exists on most platforms. One visible change is that the frames are removed.</p><p>Own Id: OTP-8201 Aux Id:</p></li></ul><h2 id="ssh-1-1-6" class="section-heading"><a href="#ssh-1-1-6" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 1.1.6</span></h2><h3 id="fixed-bugs-and-malfunctions-171" class="section-heading"><a href="#fixed-bugs-and-malfunctions-171" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>ssh_sftp:start_channel did not handle all possible return values from
ssh_channel:start correctly.</p><p>Own Id: OTP-8176 Aux Id:</p></li><li><p>SFTPD did not handle rename command (version 4) correctly.</p><p>Own Id: OTP-8175 Aux Id: seq11373</p></li><li><p>If a connection manager already had been terminated it could cause a channel
to generate a crash report when it was about to stop.</p><p>Own Id: OTP-8174 Aux Id: seq11377</p></li><li><p>Requests could result in badarg or badmatch EXIT messages in the connection
manager if the channel no longer existed.</p><p>Own Id: OTP-8173 Aux Id: seq11379</p></li><li><p>ssh_transport:unpack/3 could cause a badarg error.</p><p>Own Id: OTP-8162 Aux Id:</p></li></ul><h3 id="improvements-and-new-features-67" class="section-heading"><a href="#improvements-and-new-features-67" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>The encryption algorithm aes128-cbc is now supported. Requires that
crypto-1.6.1 is available.</p><p>Own Id: OTP-8110 Aux Id:</p></li></ul><h2 id="ssh-1-1-5" class="section-heading"><a href="#ssh-1-1-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 1.1.5</span></h2><h3 id="fixed-bugs-and-malfunctions-172" class="section-heading"><a href="#fixed-bugs-and-malfunctions-172" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>ssh_sftp:start_channel/3 did not handle timeout correctly.</p><p>Own Id: OTP-8159 Aux Id: seq11386</p></li><li><p>If a progress message was not received after invoking ssh:connect/3 the call
could hang for ever. A timeout option has also been added.</p><p>Own Id: OTP-8160 Aux Id: seq11386</p></li><li><p>A comma has been missing in the ssh.appup file since SSH-1.0.2.</p><p>Own Id: OTP-8161 Aux Id:</p></li></ul><h2 id="ssh-1-1-4" class="section-heading"><a href="#ssh-1-1-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 1.1.4</span></h2><h3 id="fixed-bugs-and-malfunctions-173" class="section-heading"><a href="#fixed-bugs-and-malfunctions-173" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>SSH sometimes caused a crash report at disconnect.</p><p>Own Id: OTP-8071 Aux Id: seq11319</p></li></ul><h2 id="ssh-1-1-3" class="section-heading"><a href="#ssh-1-1-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 1.1.3</span></h2><h3 id="fixed-bugs-and-malfunctions-174" class="section-heading"><a href="#fixed-bugs-and-malfunctions-174" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The operation ssh_sftp:stop_channel/1 returned an exception if the connection
already had been closed.</p><p>Own Id: OTP-7996 Aux Id: seq11281</p></li><li><p>SSH did not handle if supervisor:start_child/2 returned {error,
already_present}.</p><p>Own Id: OTP-8034 Aux Id: seq11307</p></li><li><p>SSH no longer cause supervisor reports when a connection is terminated in a
controlled manner.</p><p>Own Id: OTP-8035 Aux Id: seq11308</p></li></ul><h2 id="ssh-1-1-2" class="section-heading"><a href="#ssh-1-1-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 1.1.2</span></h2><h3 id="fixed-bugs-and-malfunctions-175" class="section-heading"><a href="#fixed-bugs-and-malfunctions-175" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Ssh confused local and remote channel id's, which in some cases resulted in
that messages were discarded.</p><p>Own Id: OTP-7914 Aux Id: seq11234</p></li><li><p>Ssh could not handle echo values other than 0 and 1.</p><p>Own Id: OTP-7917 Aux Id: seq11238</p></li><li><p>A crash occurred if a non-valid channel reference was received.</p><p>Own Id: OTP-7918 Aux Id: seq11238</p></li><li><p>Sftpd connections was not closed after receiving eof from a client.</p><p>Own Id: OTP-7921 Aux Id: seq11222</p></li><li><p>It was not possible to start a SFTP subsystem on certain platforms, i.e. those
who do not support symbolic links.</p><p>Own Id: OTP-7930 Aux Id:</p></li><li><p>In some cases the message {ssh_cm, ssh_connection_ref(), {closed,
ssh_channel_id()}} was not passed to the registered callback module.</p><p>Own Id: OTP-7957 Aux Id:</p></li></ul><h3 id="improvements-and-new-features-68" class="section-heading"><a href="#improvements-and-new-features-68" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>By using the sftpd option {max_files, Integer}, the message size for READDIR
commands can be reduced.</p><p>Own Id: OTP-7919 Aux Id: seq11230</p></li></ul><h2 id="ssh-1-1-1" class="section-heading"><a href="#ssh-1-1-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 1.1.1</span></h2><h3 id="fixed-bugs-and-malfunctions-176" class="section-heading"><a href="#fixed-bugs-and-malfunctions-176" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The erlang ssh server has presented itself incorrectly, using the special
version ssh-1.99, although it never has supported versions below 2.0. Since
ssh-1.1 client versions below 2.0 are correctly rejected instead of letting
the server crash later on. Alas the problem with the presentation string was
not discovered until after ssh.1.1 was released. Now the server will present
itself as ssh-2.0.</p><p>Own Id: OTP-7795</p></li><li><p>An internal function call used an incorrect parameter, which caused problem
when the old listen API was used. This was introduced in Ssh-1.1.</p><p>Own Id: OTP-7920 Aux Id: seq11211</p></li></ul><h3 id="improvements-and-new-features-69" class="section-heading"><a href="#improvements-and-new-features-69" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Ssh timeouts will now behave as expected i.e. defaults to infinity only the
user of the ssh application can know of a reasonable timeout value for their
application.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-7807</p></li><li><p>The implementation of timeouts added as a patch in ssh-1.0.1 was slightly
changed and is now documented.</p><p>Own Id: OTP-7808</p></li><li><p>To honor the multiplexing of channels over one ssh connection concept
ssh_sftp:connect/ [1,2,3] is deprecated and replaced by
ssh_sftp:start_channel/[1,2,3] and ssh_sftp:stop/1 is deprecated and replaced
by ssh_sftp:stop_channel/1 and to stop the ssh connection ssh:close/ 1 should
be called.</p><p>Own Id: OTP-7809</p></li><li><p>Added the message {ssh_channel_up, ChannelId, ConnectionManager} that shall
be handled by the channel callback handle_msg/2. This makes the function
handle_msg/2 a mandatory function for ssh channels implementations which it
was not in ssh-1.1.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-7828</p></li></ul><h2 id="ssh-1-1" class="section-heading"><a href="#ssh-1-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 1.1</span></h2><h3 id="fixed-bugs-and-malfunctions-177" class="section-heading"><a href="#fixed-bugs-and-malfunctions-177" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>A flaw in the implementation of the supervision tree caused the ssh daemon to
close the connections to all currently logged in users if one user logged out.
Another problem related to the supervision tree caused the closing down of
clients to leak processes i.e. all processes was not shutdown correctly.</p><p>Own Id: OTP-7676</p></li><li><p>Tabs could cause ssh_cli to print things in a surprising way.</p><p>Own Id: OTP-7683 Aux Id: seq11102</p></li><li><p>[sftp, sftpd] - Added patch to make sftp timestamps more correct, in the long
run it would be nice to have better support in file to be able to make it
always behave correctly now it will be correct 99 % of time instead of almost
never correct, at least on unix-based platforms.</p><p>Own Id: OTP-7685 Aux Id: seq11082</p></li><li><p>[sftpd] - Added patch to further improve handling of symbolic links in the
sftp-server.</p><p>Own Id: OTP-7766 Aux Id: seq11101</p></li><li><p>Ssh incorrectly sent the local id instead of the remote id of a channel to the
peer. For simpler cases these ids often happen to have the same value. One
case when they do not is when the client sends an exec command two times in a
raw on the same ssh connection (different channels of course as the channel
will be closed when the exec command has been evaluated) .</p><p>Own Id: OTP-7767</p></li><li><p>Packet data could be lost under high load due to the fact that buffered data
was sometimes wrongly discarded before it had been sent.</p><p>Own Id: OTP-7768</p></li><li><p>Improved ipv6-handling as some assumptions about inet functions where
incorrect.</p><p>Own Id: OTP-7770</p></li></ul><h3 id="improvements-and-new-features-70" class="section-heading"><a href="#improvements-and-new-features-70" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Added new API function ssh:connection_info/2.</p><p>Own Id: OTP-7456</p></li><li><p>Now starts ssh channel processes later avoiding synchronization problems
between processes.</p><p>Own Id: OTP-7516</p></li><li><p>Ssh now rejects old versions of the ssh protocol for security reasons. (Even
if they where not correctly rejected before the connection would probably have
failed anyway due to other reasons.)</p><p>Own Id: OTP-7645 Aux Id: seq11094</p></li><li><p>New API module ssh_channel has been added. This is a behaviour to facilitate
the implementation of ssh clients and plug in subsystems to the ssh daemon.
Note that this slightly changes the options to the API function
ssh:daemon/[1,2,3] deprecating all no longer documented options. Note that
the new API enforces the &quot;logical way&quot; of using the old API i.e. making the
subsystem process part of the ssh applications supervisor tree, so missuses of
the old API are not compatible with the new API.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-7769</p></li></ul><h3 id="known-bugs-and-problems-2" class="section-heading"><a href="#known-bugs-and-problems-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Known Bugs and Problems</span></h3><ul><li><p>Public keys protected by a password are currently not handled by the erlang
ssh application.</p><p>Own Id: OTP-6400 Aux Id: 10595</p></li></ul><h2 id="ssh-1-0-2" class="section-heading"><a href="#ssh-1-0-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 1.0.2</span></h2><h3 id="fixed-bugs-and-malfunctions-178" class="section-heading"><a href="#fixed-bugs-and-malfunctions-178" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>[sftpd] - Listing of symbolic link directories should now work as expected.</p><p>Own Id: OTP-7141 Aux Id: seq10856</p></li></ul><h2 id="ssh-1-0-1" class="section-heading"><a href="#ssh-1-0-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 1.0.1</span></h2><h3 id="fixed-bugs-and-malfunctions-179" class="section-heading"><a href="#fixed-bugs-and-malfunctions-179" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>[sftp] - When listing a directory with more than 100 files only the first 100
where listed. This has now been fixed.</p><p>Own Id: OTP-7318 Aux Id: seq10953</p></li><li><p>When restarting an ssh-system the expected return value from
ssh_system_sup:restart_acceptor/2 was incorrect, this is no longer the case.</p><p>Own Id: OTP-7564 Aux Id: seq11055</p></li><li><p>A few minor bugs where fixed in ssh_userreg.erl and ssh_connection_manager and
a a ssh_cli option was added to restore backwards compatibility with the old
ssh_cm - API.</p><p>Own Id: OTP-7565</p></li><li><p>Fixed bug in ipv6 support and added option to disable ipv6 as a workaround for
badly configured computers.</p><p>Own Id: OTP-7566</p></li></ul><h3 id="improvements-and-new-features-71" class="section-heading"><a href="#improvements-and-new-features-71" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>[sftp] - Option added to set timeout value in sftp.</p><p>Own Id: OTP-7305 Aux Id: seq10945</p></li></ul><h2 id="ssh-1-0" class="section-heading"><a href="#ssh-1-0" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Ssh 1.0</span></h2><h3 id="fixed-bugs-and-malfunctions-180" class="section-heading"><a href="#fixed-bugs-and-malfunctions-180" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Removed some special handling of prompts that made ssh behave differently than
openssh.</p><p>Own Id: OTP-7485 Aux Id: seq11025</p></li><li><p>Bug in encoding of pty opts has been fixed.</p><p>Own Id: OTP-7504</p></li></ul><h3 id="improvements-and-new-features-72" class="section-heading"><a href="#improvements-and-new-features-72" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>The architecture of the ssh processes has been reconstructed to fit in a
supervision tree as to become a real OTP application and benefit from this
when starting and stopping.</p><p>Own Id: OTP-7356 Aux Id: seq10899</p></li><li><p>Support for pty option echo off added. Requires kernel from R12B-4.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-7502 Aux Id: seq10959</p></li><li><p>The ssh API has been enhanced a lot of old API functions has become
deprecated.</p><p>Own Id: OTP-7503</p></li></ul>

</div>

<div class="bottom-actions" id="bottom-actions">
  <div class="bottom-actions-item">

      <a href="ssh_app.html" class="bottom-actions-button" rel="prev">
        <span class="subheader">
          ← Previous Page
        </span>
        <span class="title">
SSH Application
        </span>
      </a>

  </div>
  <div class="bottom-actions-item">

      <a href="introduction.html" class="bottom-actions-button" rel="next">
        <span class="subheader">
          Next Page →
        </span>
        <span class="title">
SSH Protocol Introduction
        </span>
      </a>

  </div>
</div>
    <footer class="footer">
      <p>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="ssh.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.38.1) for the

          <a href="https://erlang.org" title="Erlang" target="_blank" translate="no">Erlang programming language</a>

      </p>
<p>Copyright © 1996-2025 <a href="https://www.ericsson.com">Ericsson AB</a></p>
    </footer>
  </div>
</main>
</div>
  <script defer src="https://cdn.jsdelivr.net/npm/mermaid@11.4.1/dist/mermaid.min.js"></script>
  <script>
  let initialized = false;

  window.addEventListener("exdoc:loaded", () => {
      if (!initialized) {
      mermaid.initialize({
          startOnLoad: false,
          theme: document.body.className.includes("dark") ? "dark" : "default"
      });
      initialized = true;
      }

      let id = 0;
      for (const codeEl of document.querySelectorAll("pre code.mermaid")) {
      const preEl = codeEl.parentElement;
      const graphDefinition = codeEl.textContent;
      const graphEl = document.createElement("div");
      const graphId = "mermaid-graph-" + id++;
      mermaid.render(graphId, graphDefinition).then(({svg, bindFunctions}) => {
          graphEl.innerHTML = svg;
          bindFunctions?.(graphEl);
          preEl.insertAdjacentElement("afterend", graphEl);
          preEl.remove();
      });
      }
  });
  </script>

  </body>
</html>
