<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.38.1">
    <meta name="project" content="ssh v5.3">


<meta name="exdoc:full-text-search-url" content="/doc/search.html?v=1&q=">
<meta name="major-vsn" content="1">
<link rel="canonical" href="https://www.erlang.org/doc/apps/ssh/ssh_server_channel.html" />
    <title>ssh_server_channel — ssh v5.3</title>

    <link rel="stylesheet" href="dist/html-erlang-ZK43ZOAC.css" />

    <script defer src="dist/sidebar_items-8AD469E8.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-DPJLHKSM.js"></script>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="../../index.html" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="ssh" />
        </a>

      <div>
        <a href="../../index.html" class="sidebar-projectName" translate="no">
ssh
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v5.3
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras=""></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-behaviour" id="main" data-type="modules">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of ssh</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search" tabindex="-1">
            <i class="ri-search-2-line ri-lg" aria-hidden="true"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>
      <span translate="no">ssh_server_channel</span> <small>behaviour</small>
      <small class="app-vsn" translate="no">(ssh v5.3)</small>

    </h1>

      <a href="https://github.com/erlang/otp/blob/master/lib/ssh/src/ssh_server_channel.erl#L28" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

  </div>


    <section id="moduledoc">
<p>-behaviour(ssh_server_channel). (Replaces ssh_daemon_channel)</p><section role="note" class="admonition info"><h4 class="admonition-title info">Note</h4><p>This module replaces ssh_daemon_channel.</p><p>The old module is still available for compatibility, but should not be used
for new programs. The old module will not be maintained except for some error
corrections</p></section><p>SSH services (clients and servers) are implemented as channels that are
multiplexed over an SSH connection and communicates over the
<a href="http://www.ietf.org/rfc/rfc4254.txt">SSH Connection Protocol</a>. This module
provides a callback API that takes care of generic channel aspects for daemons,
such as flow control and close messages. It lets the callback functions take
care of the service (application) specific parts. This behavior also ensures
that the channel process honors the principal of an OTP-process so that it can
be part of a supervisor tree. This is a requirement of channel processes
implementing a subsystem that will be added to the <code class="inline">ssh</code> applications supervisor
tree.</p><section role="note" class="admonition info"><h4 class="admonition-title info">Note</h4><p>When implementing a client subsystem handler, use
<a href="ssh_client_channel.html">-behaviour(ssh_client_channel)</a> instead.</p></section>
    </section>

</div>

  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Summary</span>
    </h1>
<div class="summary-callbacks summary">
  <h2>
    <a href="#callbacks">Callbacks</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:handle_msg/2" data-no-tooltip="" translate="no">handle_msg(Msg, State)</a>

      </div>

        <div class="summary-synopsis"><p>Handles other messages than SSH Connection Protocol, call, or cast messages sent
to the channel.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:handle_ssh_msg/2" data-no-tooltip="" translate="no">handle_ssh_msg/2</a>

      </div>

        <div class="summary-synopsis"><p>Handles SSH Connection Protocol messages that may need service-specific
attention. For details, see <a><code class="inline">ssh_connection:event/0</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:init/1" data-no-tooltip="" translate="no">init(Args)</a>

      </div>

        <div class="summary-synopsis"><p>Makes necessary initializations and returns the initial channel state if the
initializations succeed.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:terminate/2" data-no-tooltip="" translate="no">terminate(Reason, State)</a>

      </div>

        <div class="summary-synopsis"><p>This function is called by a channel process when it is about to terminate.
Before this function is called,
<a>ssh_connection:close/2 </a>is called, if it has not been
called earlier. This function does any necessary cleaning up. When it returns,
the channel process terminates with reason <code class="inline">Reason</code>. The return value is
ignored.</p></div>

    </div>

</div>

  </section>


  <section id="callbacks" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#callbacks">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Callbacks</span>
    </h1>
    <div class="callbacks-list">
<section class="detail" id="c:handle_msg/2">

  <div class="detail-header">
    <a href="#c:handle_msg/2" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">handle_msg(Msg, State)</h1>

        <span class="note">(since OTP 21.0)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/ssh/src/ssh_server_channel.erl#L100" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> handle_msg(Msg :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(), State :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()) ->
                        {ok, State :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()} | {stop, ChannelId :: <a href="ssh.html#t:channel_id/0">ssh:channel_id</a>(), State :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()}.</pre>

      </div>

<p>Handles other messages than SSH Connection Protocol, call, or cast messages sent
to the channel.</p><p>Possible Erlang 'EXIT' messages is to be handled by this function and all
channels are to handle the following message.</p><ul><li><strong><code class="inline">{ssh_channel_up,</code> <a href="ssh.html#t:channel_id/0"><code class="inline">ssh:channel_id/0</code></a> <code class="inline">,</code> <a href="ssh.html#t:connection_ref/0"><code class="inline">ssh:connection_ref/0</code></a> <code class="inline">}</code></strong> -
This is the first message that the channel receives. This is especially useful
if the server wants to send a message to the client without first receiving a
message from it. If the message is not useful for your particular scenario,
ignore it by immediately returning <code class="inline">{ok, State}</code>.</li></ul>
  </section>
</section>
<section class="detail" id="c:handle_ssh_msg/2">

  <div class="detail-header">
    <a href="#c:handle_ssh_msg/2" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">handle_ssh_msg/2</h1>

        <span class="note">(since OTP 21.0)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/ssh/src/ssh_server_channel.erl#L113" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> handle_ssh_msg(<a href="ssh_connection.html#t:event/0">ssh_connection:event</a>(), State :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()) ->
                            {ok, State :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()} | {stop, ChannelId :: <a href="ssh.html#t:channel_id/0">ssh:channel_id</a>(), State :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()}.</pre>

      </div>

<p>Handles SSH Connection Protocol messages that may need service-specific
attention. For details, see <a href="ssh_connection.html#t:event/0"><code class="inline">ssh_connection:event/0</code></a>.</p><p>The following message is taken care of by the <code class="inline">ssh_server_channel</code> behavior.</p><ul><li><strong><code class="inline">{closed,</code> <a href="ssh.html#t:channel_id/0"><code class="inline">ssh:channel_id/0</code></a> <code class="inline">}</code></strong> - The channel behavior sends a close
message to the other side, if such a message has not already been sent. Then
it terminates the channel with reason <code class="inline">normal</code>.</li></ul>
  </section>
</section>
<section class="detail" id="c:init/1">

  <div class="detail-header">
    <a href="#c:init/1" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">init(Args)</h1>

        <span class="note">(since OTP 21.0)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/ssh/src/ssh_server_channel.erl#L68" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> init(Args :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()) ->
                  {ok, State :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()} |
                  {ok, State :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(), <a href="../../apps/erts/erlang.html#t:timeout/0">timeout</a>() | hibernate} |
                  {stop, Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()} |
                  ignore.</pre>

      </div>

<p>Makes necessary initializations and returns the initial channel state if the
initializations succeed.</p><p>The time-out values that can be returned have the same semantics as in a
<a href="../../apps/stdlib/gen_server.html"><code class="inline">gen_server</code></a>. If the time-out occurs, <a href="#c:handle_msg/2"><code class="inline">handle_msg/2</code></a> is called as
<a href="#c:handle_msg/2"><code class="inline">handle_msg(timeout, State)</code></a>.</p>
  </section>
</section>
<section class="detail" id="c:terminate/2">

  <div class="detail-header">
    <a href="#c:terminate/2" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">terminate(Reason, State)</h1>

        <span class="note">(since OTP 21.0)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/ssh/src/ssh_server_channel.erl#L81" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> terminate(Reason :: normal | shutdown | {shutdown, <a href="../../apps/erts/erlang.html#t:term/0">term</a>()} | <a href="../../apps/erts/erlang.html#t:term/0">term</a>(), State :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()) -> <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>This function is called by a channel process when it is about to terminate.
Before this function is called,
<a href="ssh_connection.html#close/2">ssh_connection:close/2 </a>is called, if it has not been
called earlier. This function does any necessary cleaning up. When it returns,
the channel process terminates with reason <code class="inline">Reason</code>. The return value is
ignored.</p>
  </section>
</section>

    </div>
  </section>

    <footer class="footer">
      <p>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="ssh.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.38.1) for the

          <a href="https://erlang.org" title="Erlang" target="_blank" translate="no">Erlang programming language</a>

      </p>
<p>Copyright © 1996-2025 <a href="https://www.ericsson.com">Ericsson AB</a></p>
    </footer>
  </div>
</main>
</div>
  <script defer src="https://cdn.jsdelivr.net/npm/mermaid@11.4.1/dist/mermaid.min.js"></script>
  <script>
  let initialized = false;

  window.addEventListener("exdoc:loaded", () => {
      if (!initialized) {
      mermaid.initialize({
          startOnLoad: false,
          theme: document.body.className.includes("dark") ? "dark" : "default"
      });
      initialized = true;
      }

      let id = 0;
      for (const codeEl of document.querySelectorAll("pre code.mermaid")) {
      const preEl = codeEl.parentElement;
      const graphDefinition = codeEl.textContent;
      const graphEl = document.createElement("div");
      const graphId = "mermaid-graph-" + id++;
      mermaid.render(graphId, graphDefinition).then(({svg, bindFunctions}) => {
          graphEl.innerHTML = svg;
          bindFunctions?.(graphEl);
          preEl.insertAdjacentElement("afterend", graphEl);
          preEl.remove();
      });
      }
  });
  </script>

  </body>
</html>
