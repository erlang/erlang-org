<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.38.1">
    <meta name="project" content="ssh v5.3">


<meta name="exdoc:full-text-search-url" content="/doc/search.html?v=1&q=">
<meta name="major-vsn" content="1">
<link rel="canonical" href="https://www.erlang.org/doc/apps/ssh/ssh_client_channel.html" />
    <title>ssh_client_channel — ssh v5.3</title>

    <link rel="stylesheet" href="dist/html-erlang-ZK43ZOAC.css" />

    <script defer src="dist/sidebar_items-8AD469E8.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-DPJLHKSM.js"></script>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="../../index.html" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="ssh" />
        </a>

      <div>
        <a href="../../index.html" class="sidebar-projectName" translate="no">
ssh
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v5.3
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras=""></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-behaviour" id="main" data-type="modules">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of ssh</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search" tabindex="-1">
            <i class="ri-search-2-line ri-lg" aria-hidden="true"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>
      <span translate="no">ssh_client_channel</span> <small>behaviour</small>
      <small class="app-vsn" translate="no">(ssh v5.3)</small>

    </h1>

      <a href="https://github.com/erlang/otp/blob/master/lib/ssh/src/ssh_client_channel.erl#L25" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

  </div>


    <section id="moduledoc">
<p>SSH services (clients and servers) are implemented as channels that are
multiplexed over an SSH connection and communicates over the
<a href="http://www.ietf.org/rfc/rfc4254.txt">SSH Connection Protocol</a>. This module
provides a callback API that takes care of generic channel aspects for clients,
such as flow control and close messages. It lets the callback functions take
care of the service (application) specific parts. This behavior also ensures
that the channel process honors the principal of an OTP-process so that it can
be part of a supervisor tree. This is a requirement of channel processes
implementing a subsystem that will be added to the <code class="inline">ssh</code> applications supervisor
tree.</p><section role="note" class="admonition info"><h4 class="admonition-title info">Note</h4><p>This module replaces ssh_channel.</p><p>The old module is still available for compatibility, but should not be used
for new programs. The old module will not be maintained except for some error
corrections</p></section><section role="note" class="admonition info"><h4 class="admonition-title info">Note</h4><p>When implementing a <code class="inline">ssh</code> subsystem for daemons, use
<a href="ssh_server_channel.html">-behaviour(ssh_server_channel)</a> (Replaces
ssh_daemon_channel) instead.</p></section><section role="note" class="admonition error"><h4 class="admonition-title error">Dont</h4><p>Functions in this module are not supposed to be called outside a module
implementing this behaviour!</p></section><h2 id="module-callback-timeouts" class="section-heading"><a href="#module-callback-timeouts" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Callback timeouts</span></h2><p>The timeout values that can be returned by the callback functions have the same
semantics as in a <a href="../../apps/stdlib/gen_server.html"><code class="inline">gen_server</code></a>. If the time-out occurs, <a href="#c:handle_msg/2"><code class="inline">handle_msg/2</code></a> is called as
handle_msg(timeout, State).</p>
    </section>

</div>

  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Summary</span>
    </h1>
<div class="summary-types summary">
  <h2>
    <a href="#types">Types</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:client/0" data-no-tooltip="" translate="no">client()</a>

      </div>

    </div>

</div>
<div class="summary-callbacks summary">
  <h2>
    <a href="#callbacks">Callbacks</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:code_change/3" data-no-tooltip="" translate="no">code_change(OldVsn, State, Extra)</a>

      </div>

        <div class="summary-synopsis"><p>Converts process state when code is changed.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:handle_call/3" data-no-tooltip="" translate="no">handle_call(Request, From, State)</a>

      </div>

        <div class="summary-synopsis"><p>Handles messages sent by calling <a>call/2,3</a></p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:handle_cast/2" data-no-tooltip="" translate="no">handle_cast(Request, State)</a>

      </div>

        <div class="summary-synopsis"><p>Handles messages sent by calling <a><code class="inline">cast/2</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:handle_msg/2" data-no-tooltip="" translate="no">handle_msg(Msg, State)</a>

      </div>

        <div class="summary-synopsis"><p>Handles other messages than SSH Connection Protocol, call, or cast messages sent
to the channel.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:handle_ssh_msg/2" data-no-tooltip="" translate="no">handle_ssh_msg/2</a>

      </div>

        <div class="summary-synopsis"><p>Handles SSH Connection Protocol messages that may need service-specific
attention. For details, see <a><code class="inline">ssh_connection:event/0</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:init/1" data-no-tooltip="" translate="no">init(Options)</a>

      </div>

        <div class="summary-synopsis"><p>Makes necessary initializations and returns the initial channel state if the
initializations succeed.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:terminate/2" data-no-tooltip="" translate="no">terminate(Reason, State)</a>

      </div>

        <div class="summary-synopsis"><p>This function is called by a channel process when it is about to terminate.
Before this function is called,
<a>ssh_connection:close/2 </a>is called, if it has not been
called earlier. This function does any necessary cleaning up. When it returns,
the channel process terminates with reason <code class="inline">Reason</code>. The return value is
ignored.</p></div>

    </div>

</div>
<div class="summary-functions summary">
  <h2>
    <a href="#functions">Functions</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#call/2" data-no-tooltip="" translate="no">call(ChannelRef, Msg)</a>

      </div>

        <div class="summary-synopsis"><p>Equivalent to <a><code class="inline">call/3</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#call/3" data-no-tooltip="" translate="no">call(ChannelRef, Msg, Timeout)</a>

      </div>

        <div class="summary-synopsis"><p>Makes a synchronous call to the channel process by sending a message and waiting
until a reply arrives, or a time-out occurs. The channel calls
<a>Module:handle_call/3</a> to handle the message. If the channel
process does not exist, <code class="inline">{error, closed}</code> is returned.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#cast/2" data-no-tooltip="" translate="no">cast(ChannelRef, Msg)</a>

      </div>

        <div class="summary-synopsis"><p>Sends an asynchronous message to the channel process and returns ok immediately,
ignoring if the destination node or channel process does not exist. The channel
calls <a>Module:handle_cast/2</a> to handle the message.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#enter_loop/1" data-no-tooltip="" translate="no">enter_loop(State)</a>

      </div>

        <div class="summary-synopsis"><p>Makes an existing process an <code class="inline">ssh_client_channel</code> (replaces ssh_channel)
process.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#init/1" data-no-tooltip="" translate="no">init(Options)</a>

      </div>

        <div class="summary-synopsis"><p>Initiates a client channel.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#reply/2" data-no-tooltip="" translate="no">reply(Client, Reply)</a>

      </div>

        <div class="summary-synopsis"><p>This function can be used by a channel to send a reply to a client that called
<code class="inline">call/[2,3]</code> when the reply cannot be defined in the return value of
<a>Module:handle_call/3</a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#start/4" data-no-tooltip="" translate="no">start(SshConnection, ChannelId, ChannelCb, CbInitArgs)</a>

      </div>

        <div class="summary-synopsis"><p>Equivalent to <a><code class="inline">start_link/4</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#start_link/4" data-no-tooltip="" translate="no">start_link(SshConnection, ChannelId, ChannelCb, CbInitArgs)</a>

      </div>

        <div class="summary-synopsis"><p>Starts a process that handles an SSH channel. It is called internally, by the
<code class="inline">ssh</code> daemon, or explicitly by the <code class="inline">ssh</code> client implementations. The behavior
sets the <code class="inline">trap_exit</code> flag to <code class="inline">true</code>.</p></div>

    </div>

</div>

  </section>


  <section id="types" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#types">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Types</span>
    </h1>
    <div class="types-list">
<section class="detail" id="t:client/0">

  <div class="detail-header">
    <a href="#t:client/0" class="detail-link" data-no-tooltip="" aria-label="Link to this opaque">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">client()</h1>

        <span class="note">(since OTP 21.0)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/ssh/src/ssh_client_channel.erl#L259" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-opaque</span> client()</pre>

      </div>


  </section>
</section>

    </div>
  </section>

  <section id="callbacks" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#callbacks">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Callbacks</span>
    </h1>
    <div class="callbacks-list">
<section class="detail" id="c:code_change/3">

  <div class="detail-header">
    <a href="#c:code_change/3" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">code_change(OldVsn, State, Extra)</h1>

        <span class="note">(since OTP 21.0)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/ssh/src/ssh_client_channel.erl#L139" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> code_change(OldVsn :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>() | {down, <a href="../../apps/erts/erlang.html#t:term/0">term</a>()}, State :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(), Extra :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()) ->
                         {ok, NewState :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()} | {error, Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()}.</pre>

      </div>

<p>Converts process state when code is changed.</p><p>This function is called by a client-side channel when it is to update its
internal state during a release upgrade or downgrade, that is, when the
instruction <code class="inline">{update,Module,Change,...}</code>, where <code class="inline">Change={advanced,Extra}</code>, is
given in the <code class="inline">appup</code> file. For more information, refer to Section 9.11.6 Release
Handling Instructions in the
<a href="../../system/release_handling.html#instr">System Documentation</a>.</p><section role="note" class="admonition info"><h4 class="admonition-title info">Note</h4><p>Soft upgrade according to the OTP release concept is not straight forward for
the server side, as subsystem channel processes are spawned by the <code class="inline">ssh</code>
application and hence added to its supervisor tree. The subsystem channels can
be upgraded when upgrading the user application, if the callback functions can
handle two versions of the state, but this function cannot be used in the
normal way.</p></section>
  </section>
</section>
<section class="detail" id="c:handle_call/3">

  <div class="detail-header">
    <a href="#c:handle_call/3" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">handle_call(Request, From, State)</h1>

        <span class="note">(since OTP 21.0)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/ssh/src/ssh_client_channel.erl#L86" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> handle_call(Request :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(), From :: {<a href="../../apps/erts/erlang.html#t:pid/0">pid</a>(), Tag :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()}, State :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()) ->
                         {reply, Reply :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(), NewState :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()} |
                         {reply, Reply :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(), NewState :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(), <a href="../../apps/erts/erlang.html#t:timeout/0">timeout</a>() | hibernate} |
                         {noreply, NewState :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()} |
                         {noreply, NewState :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(), <a href="../../apps/erts/erlang.html#t:timeout/0">timeout</a>() | hibernate} |
                         {stop, Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(), Reply :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(), NewState :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()} |
                         {stop, Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(), NewState :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()}.</pre>

      </div>

<p>Handles messages sent by calling <a href="#call/2">call/2,3</a></p><p>For more detailed information on time-outs,, see Section
<a href="ssh_client_channel.html#module-callback-timeouts">Callback timeouts</a>.</p>
  </section>
</section>
<section class="detail" id="c:handle_cast/2">

  <div class="detail-header">
    <a href="#c:handle_cast/2" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">handle_cast(Request, State)</h1>

        <span class="note">(since OTP 21.0)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/ssh/src/ssh_client_channel.erl#L101" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> handle_cast(Request :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(), State :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()) ->
                         {noreply, NewState :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()} |
                         {noreply, NewState :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(), <a href="../../apps/erts/erlang.html#t:timeout/0">timeout</a>() | hibernate} |
                         {stop, Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(), NewState :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()}.</pre>

      </div>

<p>Handles messages sent by calling <a href="#cast/2"><code class="inline">cast/2</code></a>.</p><p>For more detailed information on time-outs, see Section
<a href="ssh_client_channel.html#module-callback-timeouts">Callback timeouts</a>.</p>
  </section>
</section>
<section class="detail" id="c:handle_msg/2">

  <div class="detail-header">
    <a href="#c:handle_msg/2" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">handle_msg(Msg, State)</h1>

        <span class="note">(since OTP 21.0)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/ssh/src/ssh_client_channel.erl#L158" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> handle_msg(Msg :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(), State :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()) ->
                        {ok, State :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()} | {stop, ChannelId :: <a href="ssh.html#t:channel_id/0">ssh:channel_id</a>(), State :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()}.</pre>

      </div>

<p>Handles other messages than SSH Connection Protocol, call, or cast messages sent
to the channel.</p><p>Possible Erlang 'EXIT' messages is to be handled by this function and all
channels are to handle the following message.</p><ul><li><strong><code class="inline">{ssh_channel_up,</code> <a href="ssh.html#t:channel_id/0"><code class="inline">ssh:channel_id/0</code></a> <code class="inline">,</code> <a href="ssh.html#t:connection_ref/0"><code class="inline">ssh:connection_ref/0</code></a> <code class="inline">}</code></strong> -
This is the first message that the channel receives. It is sent just before
the <a href="#init/1"><code class="inline">init/1</code></a> function returns successfully. This is especially useful if the
server wants to send a message to the client without first receiving a message
from it. If the message is not useful for your particular scenario, ignore it
by immediately returning <code class="inline">{ok, State}</code>.</li></ul>
  </section>
</section>
<section class="detail" id="c:handle_ssh_msg/2">

  <div class="detail-header">
    <a href="#c:handle_ssh_msg/2" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">handle_ssh_msg/2</h1>

        <span class="note">(since OTP 21.0)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/ssh/src/ssh_client_channel.erl#L172" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> handle_ssh_msg(<a href="ssh_connection.html#t:event/0">ssh_connection:event</a>(), State :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()) ->
                            {ok, State :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()} | {stop, ChannelId :: <a href="ssh.html#t:channel_id/0">ssh:channel_id</a>(), State :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()}.</pre>

      </div>

<p>Handles SSH Connection Protocol messages that may need service-specific
attention. For details, see <a href="ssh_connection.html#t:event/0"><code class="inline">ssh_connection:event/0</code></a>.</p><p>The following message is taken care of by the <code class="inline">ssh_client_channel</code> behavior.</p><ul><li><strong><code class="inline">{closed,</code> <a href="ssh.html#t:channel_id/0"><code class="inline">ssh:channel_id/0</code></a> <code class="inline">}</code></strong> - The channel behavior sends a close
message to the other side, if such a message has not already been sent. Then
it terminates the channel with reason <code class="inline">normal</code>.</li></ul>
  </section>
</section>
<section class="detail" id="c:init/1">

  <div class="detail-header">
    <a href="#c:init/1" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">init(Options)</h1>

        <span class="note">(since OTP 21.0)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/ssh/src/ssh_client_channel.erl#L76" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> init(Args :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()) ->
                  {ok, State :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()} |
                  {ok, State :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(), <a href="../../apps/erts/erlang.html#t:timeout/0">timeout</a>() | hibernate} |
                  {stop, Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()} |
                  ignore.</pre>

      </div>

<p>Makes necessary initializations and returns the initial channel state if the
initializations succeed.</p><p>For more detailed information on time-outs, see Section
<a href="ssh_client_channel.html#module-callback-timeouts">Callback timeouts</a>.</p>
  </section>
</section>
<section class="detail" id="c:terminate/2">

  <div class="detail-header">
    <a href="#c:terminate/2" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">terminate(Reason, State)</h1>

        <span class="note">(since OTP 21.0)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/ssh/src/ssh_client_channel.erl#L115" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> terminate(Reason :: normal | shutdown | {shutdown, <a href="../../apps/erts/erlang.html#t:term/0">term</a>()} | <a href="../../apps/erts/erlang.html#t:term/0">term</a>(), State :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()) -> <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>This function is called by a channel process when it is about to terminate.
Before this function is called,
<a href="ssh_connection.html#close/2">ssh_connection:close/2 </a>is called, if it has not been
called earlier. This function does any necessary cleaning up. When it returns,
the channel process terminates with reason <code class="inline">Reason</code>. The return value is
ignored.</p>
  </section>
</section>

    </div>
  </section>

  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Functions</span>
    </h1>
    <div class="functions-list">
<section class="detail" id="call/2">

  <div class="detail-header">
    <a href="#call/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">call(ChannelRef, Msg)</h1>

        <span class="note">(since OTP 21.0)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/ssh/src/ssh_client_channel.erl#L214" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> call(ChannelRef, Msg) -> Reply | {error, Reason}
              when ChannelRef :: <a href="../../apps/erts/erlang.html#t:pid/0">pid</a>(), Msg :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(), Reply :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(), Reason :: closed | timeout.</pre>

      </div>

<p>Equivalent to <a href="#call/3"><code class="inline">call/3</code></a>.</p>
  </section>
</section>
<section class="detail" id="call/3">

  <div class="detail-header">
    <a href="#call/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">call(ChannelRef, Msg, Timeout)</h1>

        <span class="note">(since OTP 21.0)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/ssh/src/ssh_client_channel.erl#L230" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> call(ChannelRef, Msg, Timeout) -> Reply | {error, Reason}
              when
                  ChannelRef :: <a href="../../apps/erts/erlang.html#t:pid/0">pid</a>(),
                  Msg :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                  Timeout :: <a href="../../apps/erts/erlang.html#t:timeout/0">timeout</a>(),
                  Reply :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                  Reason :: closed | timeout.</pre>

      </div>

<p>Makes a synchronous call to the channel process by sending a message and waiting
until a reply arrives, or a time-out occurs. The channel calls
<a href="#c:handle_call/3">Module:handle_call/3</a> to handle the message. If the channel
process does not exist, <code class="inline">{error, closed}</code> is returned.</p>
  </section>
</section>
<section class="detail" id="cast/2">

  <div class="detail-header">
    <a href="#cast/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">cast(ChannelRef, Msg)</h1>

        <span class="note">(since OTP 21.0)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/ssh/src/ssh_client_channel.erl#L256" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> cast(ChannelRef, Msg) -> ok when ChannelRef :: <a href="../../apps/erts/erlang.html#t:pid/0">pid</a>(), Msg :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Sends an asynchronous message to the channel process and returns ok immediately,
ignoring if the destination node or channel process does not exist. The channel
calls <a href="#c:handle_cast/2">Module:handle_cast/2</a> to handle the message.</p>
  </section>
</section>
<section class="detail" id="enter_loop/1">

  <div class="detail-header">
    <a href="#enter_loop/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">enter_loop(State)</h1>

        <span class="note">(since OTP 21.0)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/ssh/src/ssh_client_channel.erl#L341" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> enter_loop(State) -> <a href="../../apps/erts/erlang.html#t:no_return/0">no_return</a>() when State :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Makes an existing process an <code class="inline">ssh_client_channel</code> (replaces ssh_channel)
process.</p><p>Does not return, instead the calling process enters the
<code class="inline">ssh_client_channel</code> (replaces ssh_channel) process receive loop and become an
<code class="inline">ssh_client_channel</code> process. The process must have been started using one of
the start functions in <code class="inline">proc_lib</code>, see the <a href="../../apps/stdlib/proc_lib.html"><code class="inline">proc_lib</code></a> manual page in STDLIB.
The user is responsible for any initialization of the process and must call
<a href="#init/1"><code class="inline">init/1</code></a>.</p>
  </section>
</section>
<section class="detail" id="init/1">

  <div class="detail-header">
    <a href="#init/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">init(Options)</h1>

        <span class="note">(since OTP 21.0)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/ssh/src/ssh_client_channel.erl#L386" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> init(Options) -> {ok, State} | {ok, State, Timeout} | {stop, Reason}
              when
                  Options :: [[{Option :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(), Value :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()}]],
                  State :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                  Timeout :: <a href="../../apps/erts/erlang.html#t:timeout/0">timeout</a>(),
                  Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Initiates a client channel.</p><p>The following options must be present:</p><ul><li><p><strong><code class="inline">{channel_cb, atom()}</code></strong> - The module that implements the channel behaviour.</p></li><li><p><strong><code class="inline">{init_args(), list()}</code></strong> - The list of arguments to the <code class="inline">init</code> function of
the callback module.</p></li><li><p><strong><code class="inline">{cm,</code> <a href="ssh.html#t:connection_ref/0"><code class="inline">ssh:connection_ref/0</code></a> <code class="inline">}</code></strong> - Reference to the <code class="inline">ssh</code> connection as
returned by <a href="ssh.html#connect/3"><code class="inline">ssh:connect/3</code></a>.</p></li><li><p><strong><code class="inline">{channel_id,</code> <a href="ssh.html#t:channel_id/0"><code class="inline">ssh:channel_id/0</code></a> <code class="inline">}</code></strong> - Id of the <code class="inline">ssh</code> channel as
returned by
<a href="ssh_connection.html#session_channel/2">ssh_connection:session_channel/2,4</a>.</p></li></ul><section role="note" class="admonition info"><h4 class="admonition-title info">Note</h4><p>This function is normally not called by the user. The user only needs to call
if the channel process needs to be started with help of <code class="inline">proc_lib</code> instead of
calling <a href="#start/4"><code class="inline">start/4</code></a> or <a href="#start_link/4"><code class="inline">start_link/4</code></a>.</p></section>
  </section>
</section>
<section class="detail" id="reply/2">

  <div class="detail-header">
    <a href="#reply/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">reply(Client, Reply)</h1>

        <span class="note">(since OTP 21.0)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/ssh/src/ssh_client_channel.erl#L273" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> reply(Client, Reply) -> _ when Client :: <a href="#t:client/0">client</a>(), Reply :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>This function can be used by a channel to send a reply to a client that called
<code class="inline">call/[2,3]</code> when the reply cannot be defined in the return value of
<a href="#c:handle_call/3">Module:handle_call/3</a>.</p><p><code class="inline">Client</code> must be the <code class="inline">From</code> argument provided to the callback function
<a href="#c:handle_call/3"><code class="inline">handle_call/3</code></a>. <code class="inline">Reply</code> is an arbitrary term, which is
given back to the client as the return value of [call/[2,3].](<a href="#call/2"><code class="inline">call/2</code></a>)</p>
  </section>
</section>
<section class="detail" id="start/4">

  <div class="detail-header">
    <a href="#start/4" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">start(SshConnection, ChannelId, ChannelCb, CbInitArgs)</h1>

        <span class="note">(since OTP 21.0)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/ssh/src/ssh_client_channel.erl#L290" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> start(SshConnection, ChannelId, ChannelCb, CbInitArgs) ->
               {ok, ChannelRef} | {error, Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()}
               when
                   SshConnection :: <a href="ssh.html#t:connection_ref/0">ssh:connection_ref</a>(),
                   ChannelId :: <a href="ssh.html#t:channel_id/0">ssh:channel_id</a>(),
                   ChannelCb :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                   CbInitArgs :: [<a href="../../apps/erts/erlang.html#t:term/0">term</a>()],
                   ChannelRef :: <a href="../../apps/erts/erlang.html#t:pid/0">pid</a>().</pre>

      </div>

<p>Equivalent to <a href="#start_link/4"><code class="inline">start_link/4</code></a>.</p>
  </section>
</section>
<section class="detail" id="start_link/4">

  <div class="detail-header">
    <a href="#start_link/4" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">start_link(SshConnection, ChannelId, ChannelCb, CbInitArgs)</h1>

        <span class="note">(since OTP 21.0)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/ssh/src/ssh_client_channel.erl#L316" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> start_link(SshConnection, ChannelId, ChannelCb, CbInitArgs) ->
                    {ok, ChannelRef} | {error, Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()}
                    when
                        SshConnection :: <a href="ssh.html#t:connection_ref/0">ssh:connection_ref</a>(),
                        ChannelId :: <a href="ssh.html#t:channel_id/0">ssh:channel_id</a>(),
                        ChannelCb :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                        CbInitArgs :: [<a href="../../apps/erts/erlang.html#t:term/0">term</a>()],
                        ChannelRef :: <a href="../../apps/erts/erlang.html#t:pid/0">pid</a>().</pre>

      </div>

<p>Starts a process that handles an SSH channel. It is called internally, by the
<code class="inline">ssh</code> daemon, or explicitly by the <code class="inline">ssh</code> client implementations. The behavior
sets the <code class="inline">trap_exit</code> flag to <code class="inline">true</code>.</p>
  </section>
</section>

    </div>
  </section>

    <footer class="footer">
      <p>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="ssh.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.38.1) for the

          <a href="https://erlang.org" title="Erlang" target="_blank" translate="no">Erlang programming language</a>

      </p>
<p>Copyright © 1996-2025 <a href="https://www.ericsson.com">Ericsson AB</a></p>
    </footer>
  </div>
</main>
</div>
  <script defer src="https://cdn.jsdelivr.net/npm/mermaid@11.4.1/dist/mermaid.min.js"></script>
  <script>
  let initialized = false;

  window.addEventListener("exdoc:loaded", () => {
      if (!initialized) {
      mermaid.initialize({
          startOnLoad: false,
          theme: document.body.className.includes("dark") ? "dark" : "default"
      });
      initialized = true;
      }

      let id = 0;
      for (const codeEl of document.querySelectorAll("pre code.mermaid")) {
      const preEl = codeEl.parentElement;
      const graphDefinition = codeEl.textContent;
      const graphEl = document.createElement("div");
      const graphId = "mermaid-graph-" + id++;
      mermaid.render(graphId, graphDefinition).then(({svg, bindFunctions}) => {
          graphEl.innerHTML = svg;
          bindFunctions?.(graphEl);
          preEl.insertAdjacentElement("afterend", graphEl);
          preEl.remove();
      });
      }
  });
  </script>

  </body>
</html>
