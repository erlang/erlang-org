<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.38.1">
    <meta name="project" content="mnesia v4.24">


<meta name="exdoc:full-text-search-url" content="/doc/search.html?v=1&q=">
<meta name="major-vsn" content="1">
<link rel="canonical" href="https://www.erlang.org/doc/apps/mnesia/notes.html" />
    <title>Mnesia Release Notes â€” mnesia v4.24</title>

    <link rel="stylesheet" href="dist/html-erlang-ZK43ZOAC.css" />

    <script defer src="dist/sidebar_items-CA522193.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-DPJLHKSM.js"></script>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="../../index.html" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="mnesia" />
        </a>

      <div>
        <a href="../../index.html" class="sidebar-projectName" translate="no">
mnesia
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v4.24
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras=""></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-extra" id="main" data-type="extras">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of mnesia</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search" tabindex="-1">
            <i class="ri-search-2-line ri-lg" aria-hidden="true"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>Mnesia Release Notes</h1>


      <a href="https://github.com/erlang/otp/blob/master/lib/mnesia/doc/notes.md#L1" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

  </div>


<p>This document describes the changes made to the Mnesia system from version to
version. The intention of this document is to list all incompatibilities as well
as all enhancements and bugfixes for every release of Mnesia. Each release of
Mnesia thus constitutes one section in this document. The title of each section
is the version number of Mnesia.</p><h2 id="mnesia-4-24" class="section-heading"><a href="#mnesia-4-24" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.24</span></h2><h3 id="improvements-and-new-features" class="section-heading"><a href="#improvements-and-new-features" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p><a href="https://www.erlang.org/eeps/eep-0069">EEP-69: Nominal Types</a> has been implemented. As a side effect, nominal types can encode opaque types. We changed all opaque-handling logic and improved opaque warnings in Dialyzer.</p><p>All existing Erlang type systems are structural: two types are seen as equivalent if their structures are the same. Type comparisons are based on the structures of the types, not on how the user explicitly defines them. For example, in the following example, <code class="inline">meter()</code> and <code class="inline">foot()</code> are equivalent. The two types can be used interchangeably. Neither of them differ from the basic type <code class="inline">integer()</code>.</p><pre><code class="makeup erlang" translate="no"><span class="p">-</span><span class="na">type</span><span class="w"> </span><span class="nf">meter</span><span class="p" data-group-id="2786586198-1">(</span><span class="p" data-group-id="2786586198-1">)</span><span class="w"> </span><span class="p">:</span><span class="p">:</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="2786586198-2">(</span><span class="p" data-group-id="2786586198-2">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">type</span><span class="w"> </span><span class="nf">foot</span><span class="p" data-group-id="2786586198-3">(</span><span class="p" data-group-id="2786586198-3">)</span><span class="w"> </span><span class="p">:</span><span class="p">:</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="2786586198-4">(</span><span class="p" data-group-id="2786586198-4">)</span><span class="p">.</span></code></pre><p>Nominal typing is an alternative type system, where two types are equivalent if and only if they are declared with the same type name. The EEP proposes one new syntax -nominal for declaring nominal types. Under nominal typing, <code class="inline">meter()</code> and <code class="inline">foot()</code> are no longer compatible. Whenever a function expects type <code class="inline">meter()</code>, passing in type <code class="inline">foot()</code> would result in a Dialyzer error.</p><pre><code class="makeup erlang" translate="no"><span class="p">-</span><span class="na">nominal</span><span class="w"> </span><span class="nf">meter</span><span class="p" data-group-id="5900842588-1">(</span><span class="p" data-group-id="5900842588-1">)</span><span class="w"> </span><span class="p">:</span><span class="p">:</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="5900842588-2">(</span><span class="p" data-group-id="5900842588-2">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">nominal</span><span class="w"> </span><span class="nf">foot</span><span class="p" data-group-id="5900842588-3">(</span><span class="p" data-group-id="5900842588-3">)</span><span class="w"> </span><span class="p">:</span><span class="p">:</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="5900842588-4">(</span><span class="p" data-group-id="5900842588-4">)</span><span class="p">.</span></code></pre><p>More nominal type-checking rules can be found in the EEP. It is worth noting that most work for adding nominal types and type-checking is in <code class="inline">erl_types.erl</code>. The rest are changes that removed the previous opaque type-checking, and added an improved version of it using nominal type-checking with reworked warnings.</p><p>Backwards compatibility for opaque type-checking is not preserved by this PR. Previous opaque warnings can appear with slightly different wordings. A new kind of opaque warning <code class="inline">opaque_union</code> is added, together with a Dialyzer option <code class="inline">no_opaque_union</code> to turn this kind of warnings off.</p><p>Own Id: OTP-19364 Aux Id: <a href="https://github.com/erlang/otp/pull/9079" title="">PR-9079</a></p></li><li><p>The license and copyright header has changed format to include an <code class="inline">SPDX-License-Identifier</code>. At the same time, most files have been updated to follow a uniform standard for license headers.</p><p>Own Id: OTP-19575 Aux Id: <a href="https://github.com/erlang/otp/pull/9670" title="">PR-9670</a></p></li></ul><h2 id="mnesia-4-23-5" class="section-heading"><a href="#mnesia-4-23-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.23.5</span></h2><h3 id="fixed-bugs-and-malfunctions" class="section-heading"><a href="#fixed-bugs-and-malfunctions" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>With this change mnesia will merge schema of tables using external backends.</p><p>Own Id: OTP-19437 Aux Id: <a href="https://github.com/erlang/otp/pull/9534" title="">PR-9534</a></p></li></ul><h2 id="mnesia-4-23-4" class="section-heading"><a href="#mnesia-4-23-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.23.4</span></h2><h3 id="fixed-bugs-and-malfunctions-1" class="section-heading"><a href="#fixed-bugs-and-malfunctions-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Mnesia could fail to load a table, if one of the copy holders was moved during startup.</p><p>Own Id: OTP-19501 Aux Id: ERIERL-1195, <a href="https://github.com/erlang/otp/pull/9499" title="">PR-9499</a></p></li></ul><h2 id="mnesia-4-23-3" class="section-heading"><a href="#mnesia-4-23-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.23.3</span></h2><h3 id="fixed-bugs-and-malfunctions-2" class="section-heading"><a href="#fixed-bugs-and-malfunctions-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Mnesia table converted from <code class="inline">ext_copies</code> to <code class="inline">disc_copies</code> will now be properly saved to disk.</p><p>Own Id: OTP-19292 Aux Id: <a href="https://github.com/erlang/otp/pull/8921" title="">PR-8921</a>, <a href="https://github.com/erlang/otp/issues/8706" title="">GH-8706</a></p></li><li><p>Mnesia could crash if table was deleted during checkpoint initialization.</p><p>Own Id: OTP-19368 Aux Id: ERIERL-1154, <a href="https://github.com/erlang/otp/pull/9093" title="">PR-9093</a></p></li></ul><h2 id="mnesia-4-23-2" class="section-heading"><a href="#mnesia-4-23-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.23.2</span></h2><h3 id="fixed-bugs-and-malfunctions-3" class="section-heading"><a href="#fixed-bugs-and-malfunctions-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>The <code class="inline">mnesia_registry</code> module have been deprecated.</p><p>Own Id: OTP-18994</p></li></ul><h3 id="improvements-and-new-features-1" class="section-heading"><a href="#improvements-and-new-features-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>The documentation has been migrated to use Markdown and ExDoc.</p><p>Own Id: OTP-18955 Aux Id: <a href="https://github.com/erlang/otp/pull/8026" title="">PR-8026</a></p></li></ul><h2 id="mnesia-4-23-1-2" class="section-heading"><a href="#mnesia-4-23-1-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.23.1.2</span></h2><h3 id="fixed-bugs-and-malfunctions-4" class="section-heading"><a href="#fixed-bugs-and-malfunctions-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>With this change mnesia will merge schema of tables using external backends.</p><p>Own Id: OTP-19437 Aux Id: PR-9534</p></li><li><p>Mnesia could fail to load a table, if one of the copy holders was moved during startup.</p><p>Own Id: OTP-19501 Aux Id: ERIERL-1195, PR-9499</p></li></ul><h2 id="mnesia-4-23-1-1" class="section-heading"><a href="#mnesia-4-23-1-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.23.1.1</span></h2><h3 id="fixed-bugs-and-malfunctions-5" class="section-heading"><a href="#fixed-bugs-and-malfunctions-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Mnesia could crash if table was deleted during checkpoint initialization.</p><p>Own Id: OTP-19368 Aux Id: ERIERL-1154, PR-9093</p></li></ul><h2 id="mnesia-4-23-1" class="section-heading"><a href="#mnesia-4-23-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.23.1</span></h2><h3 id="fixed-bugs-and-malfunctions-6" class="section-heading"><a href="#fixed-bugs-and-malfunctions-6" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Mnesia could crash during startup if <code class="inline">del_table_copy/2</code> and <code class="inline">add_table_copy/3</code> was invoked when the table was loading.</p><p>Own Id: OTP-19076 Aux Id: ERIERL-1073</p></li></ul><h2 id="mnesia-4-23" class="section-heading"><a href="#mnesia-4-23" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.23</span></h2><h3 id="fixed-bugs-and-malfunctions-7" class="section-heading"><a href="#fixed-bugs-and-malfunctions-7" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Document <a href="mnesia.html#foldl/4"><code class="inline">mnesia:foldl/4</code></a> and <a href="mnesia.html#foldr/4"><code class="inline">mnesia:foldr/4</code></a>.</p><p>Own Id: OTP-18798</p></li><li><p><a href="mnesia.html#add_table_copy/3"><code class="inline">mnesia:add_table_copy/3</code></a> no longer fails with reason system_limit when the
node is starting.</p><p>Own Id: OTP-18850</p></li></ul><h3 id="improvements-and-new-features-2" class="section-heading"><a href="#improvements-and-new-features-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Restore recreate of disc_only tables could crash if they had an index.</p><p>Own Id: OTP-18843 Aux Id: GH-7766</p></li></ul><h2 id="mnesia-4-22-1" class="section-heading"><a href="#mnesia-4-22-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.22.1</span></h2><h3 id="fixed-bugs-and-malfunctions-8" class="section-heading"><a href="#fixed-bugs-and-malfunctions-8" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Do not delete old backup file if the new backup fails.</p><p>Own Id: OTP-18711 Aux Id: ERIERL-963</p></li></ul><h2 id="mnesia-4-22" class="section-heading"><a href="#mnesia-4-22" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.22</span></h2><h3 id="improvements-and-new-features-3" class="section-heading"><a href="#improvements-and-new-features-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Added debug statistics for active transactions.</p><p>Own Id: OTP-18309 Aux Id: PR-6377</p></li><li><p>The implementation has been fixed to use <code class="inline">proc_lib:init_fail/2,3</code> where
appropriate, instead of <code class="inline">proc_lib:init_ack/1,2</code>.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-18490 Aux Id: OTP-18471, GH-6339, PR-6843</p></li></ul><h2 id="mnesia-4-21-4-4" class="section-heading"><a href="#mnesia-4-21-4-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.21.4.4</span></h2><h3 id="fixed-bugs-and-malfunctions-9" class="section-heading"><a href="#fixed-bugs-and-malfunctions-9" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Mnesia could fail to load a table, if one of the copy holders was moved during startup.</p><p>Own Id: OTP-19501 Aux Id: ERIERL-1195, PR-9499</p></li></ul><h2 id="mnesia-4-21-4-3" class="section-heading"><a href="#mnesia-4-21-4-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.21.4.3</span></h2><h3 id="fixed-bugs-and-malfunctions-10" class="section-heading"><a href="#fixed-bugs-and-malfunctions-10" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Mnesia could crash during startup if <code class="inline">del_table_copy/2</code> and <code class="inline">add_table_copy/3</code> was invoked when the table was loading.</p><p>Own Id: OTP-19076 Aux Id: ERIERL-1073</p></li></ul><h2 id="mnesia-4-21-4-2" class="section-heading"><a href="#mnesia-4-21-4-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.21.4.2</span></h2><h3 id="fixed-bugs-and-malfunctions-11" class="section-heading"><a href="#fixed-bugs-and-malfunctions-11" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p><a href="mnesia.html#add_table_copy/3"><code class="inline">mnesia:add_table_copy/3</code></a> no longer fails with reason system_limit when the
node is starting.</p><p>Own Id: OTP-18850</p></li></ul><h2 id="mnesia-4-21-4-1" class="section-heading"><a href="#mnesia-4-21-4-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.21.4.1</span></h2><h3 id="fixed-bugs-and-malfunctions-12" class="section-heading"><a href="#fixed-bugs-and-malfunctions-12" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Do not delete old backup file if the new backup fails.</p><p>Own Id: OTP-18711 Aux Id: ERIERL-963</p></li></ul><h2 id="mnesia-4-21-4" class="section-heading"><a href="#mnesia-4-21-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.21.4</span></h2><h3 id="fixed-bugs-and-malfunctions-13" class="section-heading"><a href="#fixed-bugs-and-malfunctions-13" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Improved consistency for dirty writes when a table was added with
<code class="inline">add_table_copy/3</code>.</p><p>Fixed a problem with sticky write, which could lead to inconsistent data.</p><p>Own Id: OTP-18412</p></li></ul><h3 id="improvements-and-new-features-4" class="section-heading"><a href="#improvements-and-new-features-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Replace size/1 with either tuple_size/1 or byte_size/1</p><p>The <a href="../../apps/erts/erlang.html#size/1"><code class="inline">size/1</code></a> BIF is not optimized by the JIT, and its use can
result in worse types for Dialyzer.</p><p>When one knows that the value being tested must be a tuple,
<a href="../../apps/erts/erlang.html#tuple_size/1"><code class="inline">tuple_size/1</code></a> should always be preferred.</p><p>When one knows that the value being tested must be a binary,
<a href="../../apps/erts/erlang.html#byte_size/1"><code class="inline">byte_size/1</code></a> should be preferred. However,
<a href="../../apps/erts/erlang.html#byte_size/1"><code class="inline">byte_size/1</code></a> also accepts a bitstring (rounding up size to a
whole number of bytes), so one must make sure that the call to <code class="inline">byte_size/</code> is
preceded by a call to <a href="../../apps/erts/erlang.html#is_binary/1"><code class="inline">is_binary/1</code></a> to ensure that bitstrings
are rejected. Note that the compiler removes redundant calls to
<a href="../../apps/erts/erlang.html#is_binary/1"><code class="inline">is_binary/1</code></a>, so if one is not sure whether previous code
had made sure that the argument is a binary, it does not harm to add an
<a href="../../apps/erts/erlang.html#is_binary/1"><code class="inline">is_binary/1</code></a> test immediately before the call to
<a href="../../apps/erts/erlang.html#byte_size/1"><code class="inline">byte_size/1</code></a>.</p><p>Own Id: OTP-18432 Aux Id:
GH-6672,PR-6793,PR-6784,PR-6787,PR-6785,PR-6682,PR-6800,PR-6797,PR-6798,PR-6799,PR-6796,PR-6813,PR-6671,PR-6673,PR-6684,PR-6694,GH-6677,PR-6696,PR-6670,PR-6674</p></li></ul><h2 id="mnesia-4-21-3" class="section-heading"><a href="#mnesia-4-21-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.21.3</span></h2><h3 id="fixed-bugs-and-malfunctions-14" class="section-heading"><a href="#fixed-bugs-and-malfunctions-14" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed crash which could happen during startup if too many decisions where sent
from remote nodes.</p><p>Own Id: OTP-18319 Aux Id: ERIERL-875</p></li></ul><h2 id="mnesia-4-21-2" class="section-heading"><a href="#mnesia-4-21-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.21.2</span></h2><h3 id="fixed-bugs-and-malfunctions-15" class="section-heading"><a href="#fixed-bugs-and-malfunctions-15" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Don't fill the logs if mnesia can't connect to all nodes, due to partitioned
network.</p><p>Own Id: OTP-18288 Aux Id: ERIERL-868</p></li></ul><h2 id="mnesia-4-21-1" class="section-heading"><a href="#mnesia-4-21-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.21.1</span></h2><h3 id="fixed-bugs-and-malfunctions-16" class="section-heading"><a href="#fixed-bugs-and-malfunctions-16" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed <code class="inline">add_table_copy</code> which could leave a table lock if the receiving node
went down during the operation.</p><p>Own Id: OTP-18128 Aux Id: PR-6013</p></li></ul><h2 id="mnesia-4-21" class="section-heading"><a href="#mnesia-4-21" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.21</span></h2><h3 id="improvements-and-new-features-5" class="section-heading"><a href="#improvements-and-new-features-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Documentation fixes.</p><p>Own Id: OTP-17930</p></li></ul><h2 id="mnesia-4-20-4-4" class="section-heading"><a href="#mnesia-4-20-4-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.20.4.4</span></h2><h3 id="fixed-bugs-and-malfunctions-17" class="section-heading"><a href="#fixed-bugs-and-malfunctions-17" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p><a href="mnesia.html#add_table_copy/3"><code class="inline">mnesia:add_table_copy/3</code></a> no longer fails with reason system_limit when the
node is starting.</p><p>Own Id: OTP-18850</p></li></ul><h2 id="mnesia-4-20-4-3" class="section-heading"><a href="#mnesia-4-20-4-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.20.4.3</span></h2><h3 id="fixed-bugs-and-malfunctions-18" class="section-heading"><a href="#fixed-bugs-and-malfunctions-18" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Do not delete old backup file if the new backup fails.</p><p>Own Id: OTP-18711 Aux Id: ERIERL-963</p></li></ul><h2 id="mnesia-4-20-4-2" class="section-heading"><a href="#mnesia-4-20-4-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.20.4.2</span></h2><h3 id="fixed-bugs-and-malfunctions-19" class="section-heading"><a href="#fixed-bugs-and-malfunctions-19" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Don't fill the logs if mnesia can't connect to all nodes, due to partitioned
network.</p><p>Own Id: OTP-18288 Aux Id: ERIERL-868</p></li><li><p>Fixed crash which could happen during startup if too many decisions where sent
from remote nodes.</p><p>Own Id: OTP-18319 Aux Id: ERIERL-875</p></li></ul><h2 id="mnesia-4-20-4-1" class="section-heading"><a href="#mnesia-4-20-4-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.20.4.1</span></h2><h3 id="fixed-bugs-and-malfunctions-20" class="section-heading"><a href="#fixed-bugs-and-malfunctions-20" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed <code class="inline">add_table_copy</code> which could leave a table lock if the receiving node
went down during the operation.</p><p>Own Id: OTP-18128 Aux Id: PR-6013</p></li></ul><h2 id="mnesia-4-20-4" class="section-heading"><a href="#mnesia-4-20-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.20.4</span></h2><h3 id="fixed-bugs-and-malfunctions-21" class="section-heading"><a href="#fixed-bugs-and-malfunctions-21" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed <a href="mnesia.html#add_table_copy/3"><code class="inline">mnesia:add_table_copy/3</code></a> so that calling it when mnesia started on
another node does not fail or cause hanging nodes.</p><p>Own Id: OTP-18056</p></li></ul><h2 id="mnesia-4-20-3" class="section-heading"><a href="#mnesia-4-20-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.20.3</span></h2><h3 id="improvements-and-new-features-6" class="section-heading"><a href="#improvements-and-new-features-6" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Optimize locker to handle many read locks on the same record.</p><p>Own Id: OTP-17973 Aux Id: ERIERL-772</p></li></ul><h2 id="mnesia-4-20-2" class="section-heading"><a href="#mnesia-4-20-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.20.2</span></h2><h3 id="improvements-and-new-features-7" class="section-heading"><a href="#improvements-and-new-features-7" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Reduce the number of locks taken during table copying, should reduce the
startup time on large systems.</p><p>Own Id: OTP-17656 Aux Id: ERIERL-688</p></li></ul><h2 id="mnesia-4-20-1" class="section-heading"><a href="#mnesia-4-20-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.20.1</span></h2><h3 id="fixed-bugs-and-malfunctions-22" class="section-heading"><a href="#fixed-bugs-and-malfunctions-22" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Documentation and minor code cleanup.</p><p>Own Id: OTP-17727</p></li></ul><h2 id="mnesia-4-20" class="section-heading"><a href="#mnesia-4-20" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.20</span></h2><h3 id="fixed-bugs-and-malfunctions-23" class="section-heading"><a href="#fixed-bugs-and-malfunctions-23" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed that index keys was deleted for set tables when mnesia:delete_object/1
tried to delete a non-existing record.</p><p>Own Id: OTP-17564 Aux Id: GH-5040</p></li></ul><h3 id="improvements-and-new-features-8" class="section-heading"><a href="#improvements-and-new-features-8" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Optimized table loading and added <code class="inline">max_transfer_size</code> configuration parameter.</p><p>Own Id: OTP-17508</p></li></ul><h2 id="mnesia-4-19-1" class="section-heading"><a href="#mnesia-4-19-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.19.1</span></h2><h3 id="fixed-bugs-and-malfunctions-24" class="section-heading"><a href="#fixed-bugs-and-malfunctions-24" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Suppression of deprecation warnings has been added to the source files of the
Mnesia application.</p><p>Own Id: OTP-17217</p></li><li><p>Fixed that the backend plugin initialization is done only once.</p><p>Own Id: OTP-17294 Aux Id: GH-4525 PR-4674</p></li></ul><h2 id="mnesia-4-19" class="section-heading"><a href="#mnesia-4-19" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.19</span></h2><h3 id="fixed-bugs-and-malfunctions-25" class="section-heading"><a href="#fixed-bugs-and-malfunctions-25" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed the type spec for <code class="inline">disc_only_copies</code>.</p><p>Own Id: OTP-17249 Aux Id: PR-4578</p></li><li><p>Do not crash in <a href="mnesia.html#change_config/2"><code class="inline">mnesia:change_config/2</code></a> if mnesia is stopping or starting.</p><p>Own Id: OTP-17274 Aux Id: GH-4616</p></li></ul><h3 id="improvements-and-new-features-9" class="section-heading"><a href="#improvements-and-new-features-9" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Optimized table loading time for tables that are updated during the loading.</p><p>Own Id: OTP-17271 Aux Id: PR-4575</p></li></ul><h2 id="mnesia-4-18-1" class="section-heading"><a href="#mnesia-4-18-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.18.1</span></h2><h3 id="fixed-bugs-and-malfunctions-26" class="section-heading"><a href="#fixed-bugs-and-malfunctions-26" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Avoid potential performance issue, if the input queue to <code class="inline">mnesia_tm</code> is long.</p><p>Own Id: OTP-17066 Aux Id: PR-2889</p></li></ul><h2 id="mnesia-4-18" class="section-heading"><a href="#mnesia-4-18" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.18</span></h2><h3 id="fixed-bugs-and-malfunctions-27" class="section-heading"><a href="#fixed-bugs-and-malfunctions-27" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>FIx mnesia delete object handling in transaction storage. In a transaction
<a href="mnesia.html#read/1"><code class="inline">mnesia:read/1</code></a> could indicate that exiting objects did not exist after
another object was deleted.</p><p>Own Id: OTP-16782 Aux Id: PR-2663</p></li></ul><h3 id="improvements-and-new-features-10" class="section-heading"><a href="#improvements-and-new-features-10" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Fixed crash during startup, which could happen if a table was deleted on
another node.</p><p>Own Id: OTP-16815 Aux Id: ERIERL-500</p></li></ul><h2 id="mnesia-4-17" class="section-heading"><a href="#mnesia-4-17" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.17</span></h2><h3 id="fixed-bugs-and-malfunctions-28" class="section-heading"><a href="#fixed-bugs-and-malfunctions-28" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Make <a href="mnesia.html#create_table/2"><code class="inline">mnesia:create_table/2</code></a> return correct badarg value.</p><p>Own Id: OTP-16072 Aux Id: PR-2320</p></li><li><p>Fixed a bug where mnesia was sometimes not waiting during start for a commit
decision on asymmetric transactions.</p><p>Own Id: OTP-16634 Aux Id: PR-2610 ERL-1227</p></li></ul><h3 id="improvements-and-new-features-11" class="section-heading"><a href="#improvements-and-new-features-11" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Remove usage and documentation of old requests of the I/O-protocol.</p><p>Own Id: OTP-15695</p></li><li><p>Avoid using <code class="inline">rpc</code> calls to do table reads, which will reduce the load on rpc
server and improve performance.</p><p>Own Id: OTP-16189</p></li></ul><h2 id="mnesia-4-16-3-1" class="section-heading"><a href="#mnesia-4-16-3-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.16.3.1</span></h2><h3 id="improvements-and-new-features-12" class="section-heading"><a href="#improvements-and-new-features-12" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Fixed crash during startup, which could happen if a table was deleted on
another node.</p><p>Own Id: OTP-16815 Aux Id: ERIERL-500</p></li></ul><h2 id="mnesia-4-16-3" class="section-heading"><a href="#mnesia-4-16-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.16.3</span></h2><h3 id="fixed-bugs-and-malfunctions-29" class="section-heading"><a href="#fixed-bugs-and-malfunctions-29" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed a timing issue in uninstall fallback functionality.</p><p>Own Id: OTP-16468 Aux Id: ERL-1151</p></li></ul><h2 id="mnesia-4-16-2" class="section-heading"><a href="#mnesia-4-16-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.16.2</span></h2><h3 id="fixed-bugs-and-malfunctions-30" class="section-heading"><a href="#fixed-bugs-and-malfunctions-30" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed mnesia crash which could happen when trying to recover from failures in
transactions containing <code class="inline">sticky_locks</code>.</p><p>Own Id: OTP-16286 Aux Id: ERL-1077</p></li><li><p>Fixed mnesia index issue. Could happen when updating records with a index
plugin backend.</p><p>Own Id: OTP-16291 Aux Id: ERL-1091</p></li></ul><h2 id="mnesia-4-16-1" class="section-heading"><a href="#mnesia-4-16-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.16.1</span></h2><h3 id="fixed-bugs-and-malfunctions-31" class="section-heading"><a href="#fixed-bugs-and-malfunctions-31" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p><a href="mnesia.html#add_table_copy/3"><code class="inline">mnesia:add_table_copy/3</code></a> could cause a deadlock if called when a new node was
starting.</p><p>Own Id: OTP-15933 Aux Id: ERL-872</p></li><li><p>Transactions with sticky locks could with async_asym transactions be committed
in the wrong order, since asym transaction are spawned on the remote nodes.</p><p>To fix this bug the communication protocol between mnesia nodes had to be
updated, thus mnesia will no longer be able to connect to nodes earlier than
mnesia-4.14 , OTP-19.0.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-15979 Aux Id: ERL-768</p></li></ul><h2 id="mnesia-4-16" class="section-heading"><a href="#mnesia-4-16" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.16</span></h2><h3 id="fixed-bugs-and-malfunctions-32" class="section-heading"><a href="#fixed-bugs-and-malfunctions-32" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Optimize mnesia:read/1 if data have been written in the same transaction.</p><p>Own Id: OTP-15550 Aux Id: PR-2029</p></li><li><p>Fixed bugs in table index plugin handling.</p><p>Own Id: OTP-15689 Aux Id: PR-1695 ERL-556</p></li></ul><h3 id="improvements-and-new-features-13" class="section-heading"><a href="#improvements-and-new-features-13" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Optimized dumping of tables with plugin backends.</p><p>Own Id: OTP-15588 Aux Id: PR-2102</p></li><li><p>Include stacktrace in exception if a dirty activity errors, thus if user have
matched on the error thrown it may not match any more.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-15804 Aux Id: PR-2216</p></li></ul><h2 id="mnesia-4-15-6" class="section-heading"><a href="#mnesia-4-15-6" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.15.6</span></h2><h3 id="fixed-bugs-and-malfunctions-33" class="section-heading"><a href="#fixed-bugs-and-malfunctions-33" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Avoid overload warnings caused by a race condition.</p><p>Own Id: OTP-15619 Aux Id: ERIERL-310</p></li></ul><h2 id="mnesia-4-15-5" class="section-heading"><a href="#mnesia-4-15-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.15.5</span></h2><h3 id="fixed-bugs-and-malfunctions-34" class="section-heading"><a href="#fixed-bugs-and-malfunctions-34" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed type spec for <a href="mnesia.html#change_config/2"><code class="inline">mnesia:change_config/2</code></a>.</p><p>Own Id: OTP-15201 Aux Id: PR-1881</p></li><li><p>When master node is set do not force a load from ram_copies replica when there
are no available disc_copies, since that would load an empty table. Wait until
a disk replica is available or until user explicitly force_loads the table.</p><p>Own Id: OTP-15221 Aux Id: ERIERL-217</p></li><li><p>Allow to add replicas even if all other replicas are down when the other
replicas are not stored on disk.</p><p>Own Id: OTP-15226 Aux Id: ERIERL-221</p></li><li><p>Fixed <a href="mnesia.html#delete_object/1"><code class="inline">mnesia:delete_object/1</code></a> bug, where delete_object was deleting the
record if it was written in the same transaction even if it was written to a
different value.</p><p>Own Id: OTP-15231 Aux Id: PR-1858</p></li><li><p>Fixed a bug where the bag table index data was not deleted when objects were
deleted.</p><p>Own Id: OTP-15243</p></li></ul><h2 id="mnesia-4-15-4" class="section-heading"><a href="#mnesia-4-15-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.15.4</span></h2><h3 id="improvements-and-new-features-14" class="section-heading"><a href="#improvements-and-new-features-14" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Calls to <code class="inline">erlang:get_stacktrace()</code> are removed.</p><p>Own Id: OTP-14861</p></li></ul><h2 id="mnesia-4-15-3-1" class="section-heading"><a href="#mnesia-4-15-3-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.15.3.1</span></h2><h3 id="fixed-bugs-and-malfunctions-35" class="section-heading"><a href="#fixed-bugs-and-malfunctions-35" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>When master node is set do not force a load from ram_copies replica when there
are no available disc_copies, since that would load an empty table. Wait until
a disk replica is available or until user explicitly force_loads the table.</p><p>Own Id: OTP-15221 Aux Id: ERIERL-217</p></li><li><p>Allow to add replicas even if all other replicas are down when the other
replicase are not stored on disk.</p><p>Own Id: OTP-15226 Aux Id: ERIERL-221</p></li></ul><h2 id="mnesia-4-15-3" class="section-heading"><a href="#mnesia-4-15-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.15.3</span></h2><h3 id="fixed-bugs-and-malfunctions-36" class="section-heading"><a href="#fixed-bugs-and-malfunctions-36" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Removed a quadratic behavior in startup. This change implies that backend
plugins (if used) must be set when the schema is created or via configuration
parameters before mnesia is started.</p><p>Own Id: OTP-14829 Aux Id: ERIERL-84</p></li><li><p>Bad timing could crash mnesia after a checkpoint was deactivated and
reactivated with the same checkpoint name on different tables.</p><p>Own Id: OTP-14841 Aux Id: ERIERL-113</p></li></ul><h2 id="mnesia-4-15-2" class="section-heading"><a href="#mnesia-4-15-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.15.2</span></h2><h3 id="fixed-bugs-and-malfunctions-37" class="section-heading"><a href="#fixed-bugs-and-malfunctions-37" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix backup error handling, the real failure reason was not returned.</p><p>Own Id: OTP-14776 Aux Id: ERIERL-103</p></li></ul><h2 id="mnesia-4-15-1" class="section-heading"><a href="#mnesia-4-15-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.15.1</span></h2><h3 id="improvements-and-new-features-15" class="section-heading"><a href="#improvements-and-new-features-15" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>General Unicode improvements.</p><p>Own Id: OTP-14462</p></li></ul><h2 id="mnesia-4-15" class="section-heading"><a href="#mnesia-4-15" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.15</span></h2><h3 id="improvements-and-new-features-16" class="section-heading"><a href="#improvements-and-new-features-16" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Removed the wrapping of select continuations in extension plugin handling.
This might require the user to rewrite user backend plugin if used.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-14039</p></li></ul><h2 id="mnesia-4-14-3" class="section-heading"><a href="#mnesia-4-14-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.14.3</span></h2><h3 id="fixed-bugs-and-malfunctions-38" class="section-heading"><a href="#fixed-bugs-and-malfunctions-38" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed crash in checkpoint handling when table was deleted during backup.</p><p>Own Id: OTP-14167</p></li></ul><h2 id="mnesia-4-14-2" class="section-heading"><a href="#mnesia-4-14-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.14.2</span></h2><h3 id="fixed-bugs-and-malfunctions-39" class="section-heading"><a href="#fixed-bugs-and-malfunctions-39" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>A continuation returned by mnesia:select/[14] should be reusable in
different, non-transactional activities.</p><p>Own Id: OTP-13944 Aux Id: PR-1184</p></li><li><p>Fixed crash when calling block_table multiple times. Could happen when having
locks for a long time and restarting mnesia.</p><p>Own Id: OTP-13970 Aux Id: Seq-13198</p></li><li><p>Change mnesia_tm process to have off-heap messages since mnesia_tm can be the
receiver of many non-synchronized message from other nodes.</p><p>Own Id: OTP-14074</p></li></ul><h2 id="mnesia-4-14-1" class="section-heading"><a href="#mnesia-4-14-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.14.1</span></h2><h3 id="improvements-and-new-features-17" class="section-heading"><a href="#improvements-and-new-features-17" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Correct some minor documentation issues.</p><p>Own Id: OTP-13891</p></li></ul><h2 id="mnesia-4-14" class="section-heading"><a href="#mnesia-4-14" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.14</span></h2><h3 id="improvements-and-new-features-18" class="section-heading"><a href="#improvements-and-new-features-18" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Added experimental external backend plugin api. This adds the possibility for
the user to write other storage backends for data, for example by using shared
memory or ram-cached disk storage.</p><p>The plugin api may change in future versions after being battle tested.</p><p>Own Id: OTP-13058</p></li></ul><h2 id="mnesia-4-13-4" class="section-heading"><a href="#mnesia-4-13-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.13.4</span></h2><h3 id="fixed-bugs-and-malfunctions-40" class="section-heading"><a href="#fixed-bugs-and-malfunctions-40" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Mnesia transactions could hang while waiting on a response from a node who had
stopped.</p><p>Own Id: OTP-13423</p></li></ul><h2 id="mnesia-4-13-3" class="section-heading"><a href="#mnesia-4-13-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.13.3</span></h2><h3 id="fixed-bugs-and-malfunctions-41" class="section-heading"><a href="#fixed-bugs-and-malfunctions-41" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Avoid deadlock possibility in <a href="mnesia.html#del_table_copy/2"><code class="inline">mnesia:del_table_copy/2</code></a></p><p>Own Id: OTP-13284</p></li></ul><h2 id="mnesia-4-13-2" class="section-heading"><a href="#mnesia-4-13-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.13.2</span></h2><h3 id="fixed-bugs-and-malfunctions-42" class="section-heading"><a href="#fixed-bugs-and-malfunctions-42" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed a process and file descriptor leak in mnesia:restore/2.</p><p>Own Id: OTP-13025 Aux Id: seq12957</p></li></ul><h2 id="mnesia-4-13-1" class="section-heading"><a href="#mnesia-4-13-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.13.1</span></h2><h3 id="fixed-bugs-and-malfunctions-43" class="section-heading"><a href="#fixed-bugs-and-malfunctions-43" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Improved index updates to avoid a timing glitch in dirty_index_read.</p><p>Own Id: OTP-12972</p></li></ul><h2 id="mnesia-4-13" class="section-heading"><a href="#mnesia-4-13" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.13</span></h2><h3 id="fixed-bugs-and-malfunctions-44" class="section-heading"><a href="#fixed-bugs-and-malfunctions-44" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Mnesia's dirty functions did not always exit with <code class="inline">{aborted, Reason}</code> as
documented when an error occurred.</p><p>Own Id: OTP-12714</p></li><li><p>Consider file descriptors limits (emfile) as a fatal error and do not delete
log files. Previously the error was seen as a corrupted disk and the log files
deleted which caused data loss.</p><p>Own Id: OTP-12807</p></li></ul><h3 id="improvements-and-new-features-19" class="section-heading"><a href="#improvements-and-new-features-19" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Make Mnesia DCD dump behavior at start up optional, when turned off mnesia
loads large disc_copies tables faster.</p><p>Own Id: OTP-12481</p></li></ul><h2 id="mnesia-4-12-5" class="section-heading"><a href="#mnesia-4-12-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.12.5</span></h2><h3 id="fixed-bugs-and-malfunctions-45" class="section-heading"><a href="#fixed-bugs-and-malfunctions-45" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed race condition in protocol negotiation.</p><p>Own Id: OTP-12473</p></li></ul><h3 id="improvements-and-new-features-20" class="section-heading"><a href="#improvements-and-new-features-20" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Grammar corrections. (Thanks to Derek Brown)</p><p>Own Id: OTP-12400</p></li></ul><h2 id="mnesia-4-12-4" class="section-heading"><a href="#mnesia-4-12-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.12.4</span></h2><h3 id="fixed-bugs-and-malfunctions-46" class="section-heading"><a href="#fixed-bugs-and-malfunctions-46" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed a spelling mistake in mnesia documentation.</p><p>Own Id: OTP-12278</p></li><li><p>Matching data with <a href="mnesia.html#match_object/1"><code class="inline">mnesia:match_object/1</code></a> did not work as expected in some
cases, when data was written in the same transaction before the matching was
invoked.</p><p>Own Id: OTP-12304 Aux Id: Seq12745</p></li></ul><h2 id="mnesia-4-12-3" class="section-heading"><a href="#mnesia-4-12-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.12.3</span></h2><h3 id="fixed-bugs-and-malfunctions-47" class="section-heading"><a href="#fixed-bugs-and-malfunctions-47" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Various logging fixes, including: Add run queue index to the process dump in
crash dumps.<br/>Add thread index to enomem slogan when crashing.<br/>Remove error logger message for sending messages to old instances of the same
node.</p><p>Own Id: OTP-12115</p></li></ul><h2 id="mnesia-4-12-2" class="section-heading"><a href="#mnesia-4-12-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.12.2</span></h2><h3 id="fixed-bugs-and-malfunctions-48" class="section-heading"><a href="#fixed-bugs-and-malfunctions-48" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed a race which could make create_table fail if a node was going down
during the transaction.</p><p>Own Id: OTP-12124 Aux Id: seq12694</p></li></ul><h2 id="mnesia-4-12-1" class="section-heading"><a href="#mnesia-4-12-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.12.1</span></h2><h3 id="fixed-bugs-and-malfunctions-49" class="section-heading"><a href="#fixed-bugs-and-malfunctions-49" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Force load table could hang when a node went away during start up.</p><p>Own Id: OTP-11948 Aux Id: seq12585</p></li><li><p>The time for inserting locks for a transaction with large number of locks is
reduced significantly.</p><p>Own Id: OTP-11981</p></li></ul><h2 id="mnesia-4-12" class="section-heading"><a href="#mnesia-4-12" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.12</span></h2><h3 id="fixed-bugs-and-malfunctions-50" class="section-heading"><a href="#fixed-bugs-and-malfunctions-50" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Some local implementations of removing the last element from a list are
replaced by <a href="../../apps/stdlib/lists.html#droplast/1"><code class="inline">lists:droplast/1</code></a>. Note that this requires at least <code class="inline">stdlib-2.0</code>,
which is the stdlib version delivered in OTP 17.0. (Thanks to Hans Svensson)</p><p>Own Id: OTP-11678</p></li><li><p>Application upgrade (appup) files are corrected for the following
applications:</p><p><code class="inline">asn1, common_test, compiler, crypto, debugger, dialyzer, edoc, eldap, erl_docgen, et, eunit, gs, hipe, inets, observer, odbc, os_mon, otp_mibs, parsetools, percept, public_key, reltool, runtime_tools, ssh, syntax_tools, test_server, tools, typer, webtool, wx, xmerl</code></p><p>A new test utility for testing appup files is added to test_server. This is
now used by most applications in OTP.</p><p>(Thanks to Tobias Schlager)</p><p>Own Id: OTP-11744</p></li></ul><h3 id="improvements-and-new-features-21" class="section-heading"><a href="#improvements-and-new-features-21" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>To prevent a race condition if there is a short communication problem when
node-down and node-up events are received. They are now stored and later
checked if the node came up just before mnesia flagged the node as down.
(Thanks to Jonas Falkevik )</p><p>Own Id: OTP-11497</p></li><li><p>Added <a href="mnesia.html#sync_log/0"><code class="inline">mnesia:sync_log/0</code></a> to explicit sync mnesias transaction log.</p><p>Own Id: OTP-11729</p></li></ul><h2 id="mnesia-4-11" class="section-heading"><a href="#mnesia-4-11" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.11</span></h2><h3 id="fixed-bugs-and-malfunctions-51" class="section-heading"><a href="#fixed-bugs-and-malfunctions-51" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fixed a race in mnesia which could cause hanging transaction when sticky locks
had been used. Thanks janchochol.</p><p>Own Id: OTP-11375</p></li><li><p>Fixed dirty_update_counter which could return ok, thanks Anton Ryabkov.</p><p>Own Id: OTP-11485</p></li></ul><h2 id="mnesia-4-10" class="section-heading"><a href="#mnesia-4-10" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.10</span></h2><h3 id="fixed-bugs-and-malfunctions-52" class="section-heading"><a href="#fixed-bugs-and-malfunctions-52" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix timing issues in checkpoint creation.</p><p>Own Id: OTP-10957</p></li></ul><h3 id="improvements-and-new-features-22" class="section-heading"><a href="#improvements-and-new-features-22" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Fixed a problem where the fallback BUP file is removed when calling
mnesia:uninstall_fallback and mnesia is not started.</p><p>Own Id: OTP-11241</p></li></ul><h2 id="mnesia-4-9" class="section-heading"><a href="#mnesia-4-9" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.9</span></h2><h3 id="fixed-bugs-and-malfunctions-53" class="section-heading"><a href="#fixed-bugs-and-malfunctions-53" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>If mnesia:clear_table/2 was called during a table load on that table, the
schema record was written to the table instead of clearing table.</p><p>Own Id: OTP-11030 Aux Id: seq12267</p></li></ul><h3 id="improvements-and-new-features-23" class="section-heading"><a href="#improvements-and-new-features-23" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Optimize index creation for Mnesia set tables. Thanks to Nick Marino.</p><p>Own Id: OTP-11103</p></li></ul><h2 id="mnesia-4-8" class="section-heading"><a href="#mnesia-4-8" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.8</span></h2><h3 id="fixed-bugs-and-malfunctions-54" class="section-heading"><a href="#fixed-bugs-and-malfunctions-54" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Use chained send_after instead of send_interval, to make decrease the number
of messages sent after a sleep (Thanks to James Wheare)</p><p>Own Id: OTP-10636</p></li><li><p>Fix format of mnesia overload message (Thanks to Ahmed Omar)</p><p>Own Id: OTP-10639</p></li></ul><h3 id="improvements-and-new-features-24" class="section-heading"><a href="#improvements-and-new-features-24" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Added a general framework for executing benchmarks of Erlang/OTP. Benchmarks
for the Erlang VM and mnesia have been incorporated in the framework.</p><p>For details about how to add more benchmarks see $ERL_TOP/HOWTO/BENCHMARKS.md
in the source distribution.</p><p>Own Id: OTP-10156</p></li><li><p>Where necessary a comment stating encoding has been added to Erlang files. The
comment is meant to be removed in Erlang/OTP R17B when UTF-8 becomes the
default encoding.</p><p>Own Id: OTP-10630</p></li><li><p>Remove support for the query keyword and query expressions. Thanks to LoÃ¯c
Hoguin.</p><p>Own Id: OTP-10729</p></li></ul><h2 id="mnesia-4-7-1" class="section-heading"><a href="#mnesia-4-7-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.7.1</span></h2><h3 id="fixed-bugs-and-malfunctions-55" class="section-heading"><a href="#fixed-bugs-and-malfunctions-55" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Add tests showing that trying to delete non-existing object may corrupt the</p><p>In case of bag tables, trying to delete a non-existing object leads to the
index becoming corrupt. This happens if the non-existing object we try to
delete happens to share its key and index field value with a single existing
object in the table. Result: The index entry corresponding to the existing
object is removed.</p><p>Prevent index from being corrupted if a nonexistent item is deleted</p><p>We have to ensure that we actually delete the last object with a given (key,
index) pair before removing the index. Thanks to Bartlomiej Puzon</p><p>Own Id: OTP-10220</p></li></ul><h2 id="mnesia-4-7" class="section-heading"><a href="#mnesia-4-7" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.7</span></h2><h3 id="fixed-bugs-and-malfunctions-56" class="section-heading"><a href="#fixed-bugs-and-malfunctions-56" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Returns the same value for mnesia_loader:disc_load_table/2 as
mnesia_loader:net_load_table/4 if a table copy cannot be found. (Thanks to Uwe
Dauernheim)</p><p>Own Id: OTP-10015</p></li></ul><h3 id="improvements-and-new-features-25" class="section-heading"><a href="#improvements-and-new-features-25" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Improved table lock algorithm.</p><p>Own Id: OTP-9890</p></li></ul><h2 id="mnesia-4-6" class="section-heading"><a href="#mnesia-4-6" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.6</span></h2><h3 id="fixed-bugs-and-malfunctions-57" class="section-heading"><a href="#fixed-bugs-and-malfunctions-57" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Reduce calls to phash in key_to_frag_number</p><p>Original code calls phash 1..2 times, based on which fragment the hashed key
targets and how many fragments exist. New code always calls phash only once.</p><p>Add mnesia_frag_hash test (Thanks to Philip Robinson)</p><p>Own Id: OTP-9722</p></li><li><p>Fixed a sticky lock bug which caused mnesia:read(Tab, Key, write) return
undefined.</p><p>Own Id: OTP-9786</p></li><li><p>Use the synchronous log_terms instead of alog_terms in mnesia_log:ets2dcd()</p><p>This avoids the situation where mnesia could dump a very large ets table in
its entirety into the message queue of the disk_log process, causing memory
blowup and choking the disk logger. (Thanks to Richard Carlsson)</p><p>Own Id: OTP-9804</p></li></ul><h3 id="improvements-and-new-features-26" class="section-heading"><a href="#improvements-and-new-features-26" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Implemented a new option to mnesia:create_table/2 which allows the user to
assign 'ets' and 'dets' options not available in mnesia.</p><p>Own Id: OTP-8970</p></li></ul><h2 id="mnesia-4-5-1" class="section-heading"><a href="#mnesia-4-5-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.5.1</span></h2><h3 id="fixed-bugs-and-malfunctions-58" class="section-heading"><a href="#fixed-bugs-and-malfunctions-58" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix deadlock in mnesia:del_table_copy/2.</p><p>Own Id: OTP-9689 Aux Id: seq11927</p></li></ul><h3 id="improvements-and-new-features-27" class="section-heading"><a href="#improvements-and-new-features-27" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Allow schema operations when using different mnesia versions.</p><p>Own Id: OTP-9657 Aux Id: seq11926</p></li></ul><h2 id="mnesia-4-5" class="section-heading"><a href="#mnesia-4-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.5</span></h2><h3 id="fixed-bugs-and-malfunctions-59" class="section-heading"><a href="#fixed-bugs-and-malfunctions-59" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Fix protocol issues. Mnesia-4.4.19 could not communicate with to older nodes.</p><p>Own Id: OTP-9473</p></li><li><p>XML files have been corrected.</p><p>Own Id: OTP-9550 Aux Id: OTP-9541</p></li></ul><h3 id="improvements-and-new-features-28" class="section-heading"><a href="#improvements-and-new-features-28" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Dump the log even if no transactions have been invoked on local node,
otherwise the log will grow forever with decisions from the other nodes who
have tables on disk. Thanks Marek Majkowski.</p><p>Own Id: OTP-9551</p></li><li><p>Use dedicated api for clear_table, i.e. instead of match_delete use
delete_all_objects. Thanks KukHyun Lee.</p><p>Own Id: OTP-9558</p></li></ul><h2 id="mnesia-4-4-19" class="section-heading"><a href="#mnesia-4-4-19" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.4.19</span></h2><h3 id="fixed-bugs-and-malfunctions-60" class="section-heading"><a href="#fixed-bugs-and-malfunctions-60" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Mnesia could crash if mnesia:add_table_index/2 was invoked before the table
was loaded on all nodes.</p><p>Own Id: OTP-9285 Aux Id: seq11844</p></li><li><p>Add {majority, boolean()} per-table option.</p><p>With {majority, true} set for a table, write transactions will abort if they
cannot commit to a majority of the nodes that have a copy of the table.
Currently, the implementation hooks into the prepare_commit, and forces an
asymmetric transaction if the commit set affects any table with the majority
flag set. In the commit itself, the transaction will abort if it cannot
satisfy the majority requirement for all tables involved in the
transaction.(Thanks to Ulf Wiger)</p><p>Own Id: OTP-9304</p></li></ul><h2 id="mnesia-4-4-18" class="section-heading"><a href="#mnesia-4-4-18" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.4.18</span></h2><h3 id="fixed-bugs-and-malfunctions-61" class="section-heading"><a href="#fixed-bugs-and-malfunctions-61" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Call chmod without the &quot;-f&quot; flag</p><p>&quot;-f&quot; is a non-standard chmod option which at least SGI IRIX and HP UX do not
support. As the only effect of the &quot;-f&quot; flag is to suppress warning messages,
it can be safely omitted. (Thanks to Holger WeiÃŸ)</p><p>Own Id: OTP-9170</p></li><li><p>Mnesia sometimes failed to update meta-information in large systems, which
could cause table content to be inconsistent between nodes.</p><p>Own Id: OTP-9186 Aux Id: seq11728</p></li></ul><h2 id="mnesia-4-4-17" class="section-heading"><a href="#mnesia-4-4-17" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.4.17</span></h2><h3 id="fixed-bugs-and-malfunctions-62" class="section-heading"><a href="#fixed-bugs-and-malfunctions-62" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Calling mnesia:first/1 on empty fragmented table works. Thanks Magnus Henoch.</p><p>Own Id: OTP-9108</p></li><li><p>If Mnesia detects that the network is not fully connected during start, Mnesia
will not start until all nodes are reachable.</p><p>Own Id: OTP-9115 Aux Id: seq-11728</p></li></ul><h3 id="improvements-and-new-features-29" class="section-heading"><a href="#improvements-and-new-features-29" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Fix issues reported by dialyzer.</p><p>Own Id: OTP-9107</p></li></ul><h2 id="mnesia-4-4-16" class="section-heading"><a href="#mnesia-4-4-16" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.4.16</span></h2><h3 id="fixed-bugs-and-malfunctions-63" class="section-heading"><a href="#fixed-bugs-and-malfunctions-63" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Sometimes a 'log_header' record was added to tables when invoking
mnesia:restore/2 with the option 'recreate_tables'. Thanks Vance Shipley.</p><p>Own Id: OTP-8960</p></li></ul><h3 id="improvements-and-new-features-30" class="section-heading"><a href="#improvements-and-new-features-30" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Compiler warnings were eliminated.</p><p>Own Id: OTP-8855</p></li></ul><h2 id="mnesia-4-4-15" class="section-heading"><a href="#mnesia-4-4-15" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.4.15</span></h2><h3 id="improvements-and-new-features-31" class="section-heading"><a href="#improvements-and-new-features-31" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Eliminated warnings for auto-imported BIF clashes.</p><p>Own Id: OTP-8840</p></li></ul><h2 id="mnesia-4-4-14" class="section-heading"><a href="#mnesia-4-4-14" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.4.14</span></h2><h3 id="improvements-and-new-features-32" class="section-heading"><a href="#improvements-and-new-features-32" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Added mnesia:subscribe(activity) contributed by Bernard Duggan.</p><p>Own Id: OTP-8519</p></li></ul><h2 id="mnesia-4-4-13" class="section-heading"><a href="#mnesia-4-4-13" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.4.13</span></h2><h3 id="fixed-bugs-and-malfunctions-64" class="section-heading"><a href="#fixed-bugs-and-malfunctions-64" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Transactions could be left hanging if a node went down when invoking
mnesia:sync_transaction/[1,2]. Thanks Igor Ribeiro Sucupira.</p><p>Own Id: OTP-8402</p></li></ul><h3 id="improvements-and-new-features-33" class="section-heading"><a href="#improvements-and-new-features-33" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Igor Ribeiro Sucupira added the option to compress data when copying tables
between Mnesia nodes.</p><p>Own Id: OTP-8406</p></li></ul><h2 id="mnesia-4-4-12" class="section-heading"><a href="#mnesia-4-4-12" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.4.12</span></h2><h3 id="improvements-and-new-features-34" class="section-heading"><a href="#improvements-and-new-features-34" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>The documentation is now built with open source tools (xsltproc and fop) that
exists on most platforms. One visible change is that the frames are removed.</p><p>Own Id: OTP-8250</p></li></ul><h2 id="mnesia-4-4-11" class="section-heading"><a href="#mnesia-4-4-11" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.4.11</span></h2><h3 id="improvements-and-new-features-35" class="section-heading"><a href="#improvements-and-new-features-35" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Fixed duplicate results with mnesia:index_read() on ordered_set tables.
Reported by Sam Bobroff.</p><p>Fixed locking in mnesia:index_read() which now grabs a read table lock to
ensure correctness, this may slow down the operation or block other processes
trying to reach the same table.</p><p>Calling mnesia:dump_log() could crash mnesia, Reported by Igor Ribeiro
Sucupira.</p><p>Own Id: OTP-8074</p></li></ul><h2 id="mnesia-4-4-10" class="section-heading"><a href="#mnesia-4-4-10" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.4.10</span></h2><h3 id="fixed-bugs-and-malfunctions-65" class="section-heading"><a href="#fixed-bugs-and-malfunctions-65" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Mnesia crashed if a qlc query was running inside a transaction when mnesia
stopped at another node. Thanks Teemu Antti-Poika.</p><p>Own Id: OTP-7968</p></li><li><p>Mnesia could crash when loading local_content tables.</p><p>Own Id: OTP-8002 Aux Id: seq11277</p></li></ul><h3 id="improvements-and-new-features-36" class="section-heading"><a href="#improvements-and-new-features-36" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Minor (smp) optimizations.</p><p>Own Id: OTP-7928</p></li></ul><h2 id="mnesia-4-4-9" class="section-heading"><a href="#mnesia-4-4-9" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.4.9</span></h2><h3 id="fixed-bugs-and-malfunctions-66" class="section-heading"><a href="#fixed-bugs-and-malfunctions-66" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>mnesia:clear_table/1 crashed instead of returning <code class="inline">{aborted,..}</code> if it was
called inside a transaction.</p><p>Own Id: OTP-7911</p></li></ul><h2 id="mnesia-4-4-8" class="section-heading"><a href="#mnesia-4-4-8" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.4.8</span></h2><h3 id="fixed-bugs-and-malfunctions-67" class="section-heading"><a href="#fixed-bugs-and-malfunctions-67" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>With bad timing several api functions could return or exit with a bad error
message when mnesia was shutting down.</p><p>Own Id: OTP-7753 Aux Id: seq11179</p></li><li><p><a href="mnesia.html#clear_table/1"><code class="inline">mnesia:clear_table/1</code></a> cleared all nodes table content even if the table was
<code class="inline">local_content</code> only type.</p><p>Own Id: OTP-7835</p></li></ul><h2 id="mnesia-4-4-7" class="section-heading"><a href="#mnesia-4-4-7" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.4.7</span></h2><h3 id="fixed-bugs-and-malfunctions-68" class="section-heading"><a href="#fixed-bugs-and-malfunctions-68" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Disallowed match patterns ('_', and '$n') as argument to
<a href="mnesia.html#delete_object/1"><code class="inline">mnesia:delete_object/1</code></a> and friends.</p><p>Own Id: OTP-7524</p></li></ul><h3 id="improvements-and-new-features-37" class="section-heading"><a href="#improvements-and-new-features-37" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Introduced a few new functions in Mnesia: <a href="mnesia.html#read/2"><code class="inline">mnesia:read/2</code></a>, <code class="inline">mnesia:first/3</code>,
<code class="inline">mnesia:last/3</code>, <code class="inline">mnesia:prev/4</code>, <code class="inline">mnesia:next/4</code>, <code class="inline">mnesia_frag:first/1</code>,
<code class="inline">mnesia_frag:last/1</code>, <code class="inline">mnesia_frag:prev/2</code>, <code class="inline">mnesia_frag:next/2</code>.</p><p>Own Id: OTP-7625</p></li></ul><h2 id="mnesia-4-4-6" class="section-heading"><a href="#mnesia-4-4-6" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.4.6</span></h2><h3 id="fixed-bugs-and-malfunctions-69" class="section-heading"><a href="#fixed-bugs-and-malfunctions-69" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p><a href="mnesia.html#restore/2"><code class="inline">mnesia:restore/2</code></a> aborted if a <code class="inline">EXIT</code> message appeared in the client message
queue.</p><p>Own Id: OTP-7585 Aux Id: seq11046</p></li></ul><h2 id="mnesia-4-4-5" class="section-heading"><a href="#mnesia-4-4-5" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.4.5</span></h2><h3 id="improvements-and-new-features-38" class="section-heading"><a href="#improvements-and-new-features-38" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>mnesia:clear_table/1 does not require that all replicas of the table are
available anymore.</p><p>Own Id: OTP-7466 Aux Id: seq11015</p></li></ul><h2 id="mnesia-4-4-4" class="section-heading"><a href="#mnesia-4-4-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.4.4</span></h2><h3 id="fixed-bugs-and-malfunctions-70" class="section-heading"><a href="#fixed-bugs-and-malfunctions-70" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Mnesia did not garbage collect transaction decisions on disk based nodes if no
transactions where made on the local node.</p><p>Own Id: OTP-7419</p></li></ul><h2 id="mnesia-4-4-3" class="section-heading"><a href="#mnesia-4-4-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.4.3</span></h2><h3 id="fixed-bugs-and-malfunctions-71" class="section-heading"><a href="#fixed-bugs-and-malfunctions-71" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Table referred to by foreign key did not have node_pool properly cleaned up
when a node was removed from the schema. Thanks Paul Mineiro.</p><p>Own Id: OTP-7340</p></li><li><p>Mnesia crashed and generated a core dump if a schema_transaction was running
when mnesia stopped.</p><p>Own Id: OTP-7378 Aux Id: seq10964</p></li></ul><h3 id="improvements-and-new-features-39" class="section-heading"><a href="#improvements-and-new-features-39" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>It is now possible to delete a db node even when other disk resident nodes are
down. Thanks Paul Mineiro.</p><p>Own Id: OTP-7383</p></li></ul><h2 id="mnesia-4-4-2" class="section-heading"><a href="#mnesia-4-4-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.4.2</span></h2><h3 id="fixed-bugs-and-malfunctions-72" class="section-heading"><a href="#fixed-bugs-and-malfunctions-72" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Sticky locks could lead to hanging transactions.</p><p>Own Id: OTP-7205 Aux Id: seq10793</p></li><li><p><a href="mnesia.html#snmp_get_next_index/2"><code class="inline">mnesia:snmp_get_next_index/2</code></a> didn't work with partial index keys. Argument
checking is now done according to documentation, in functions
<a href="mnesia.html#snmp_get_row/2"><code class="inline">mnesia:snmp_get_row/2</code></a>, <a href="mnesia.html#snmp_get_mnesia_key/2"><code class="inline">mnesia:snmp_get_mnesia_key/2</code></a> and
<a href="mnesia.html#snmp_get_next_index/2"><code class="inline">mnesia:snmp_get_next_index/2</code></a>. These functions now require that <code class="inline">RowIndex</code> is
a list.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-7208</p></li></ul><h2 id="mnesia-4-4-1" class="section-heading"><a href="#mnesia-4-4-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.4.1</span></h2><h3 id="fixed-bugs-and-malfunctions-73" class="section-heading"><a href="#fixed-bugs-and-malfunctions-73" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Snmp index tables was not initialized correctly in <code class="inline">mnesia-4.4</code>.</p><p>Own Id: OTP-7170 Aux Id: seq10870</p></li></ul><h3 id="known-bugs-and-problems" class="section-heading"><a href="#known-bugs-and-problems" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Known Bugs and Problems</span></h3><ul><li><p>Rearranging fragmented tables is an O(N^2) operation.</p><p>Own Id: OTP-6300</p></li></ul><h2 id="mnesia-4-4" class="section-heading"><a href="#mnesia-4-4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mnesia 4.4</span></h2><h3 id="fixed-bugs-and-malfunctions-74" class="section-heading"><a href="#fixed-bugs-and-malfunctions-74" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Fixed Bugs and Malfunctions</span></h3><ul><li><p>Mnesia ignored the module argument to <a href="mnesia.html#restore/2"><code class="inline">mnesia:restore/2</code></a>. Thanks Paul Minerio.</p><p>Own Id: OTP-6981</p></li></ul><h3 id="improvements-and-new-features-40" class="section-heading"><a href="#improvements-and-new-features-40" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Improvements and New Features</span></h3><ul><li><p>Mnesia's snmp operations <code class="inline">snmp_get_row/2</code>, <code class="inline">snmp_get_next_index/2</code> and
<code class="inline">snmp_get_mnesia_key/2</code> have been made context aware, i.e. inside a
transaction they will compensate for table updates made in earlier in the same
transaction. This might cause a performance drop if a lot of updates have been
made before the invocation of these functions.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-6856 Aux Id: seq10671</p></li><li><p>Introduced erlang:phash/2 as new default for fragmented tables. Already
existing tables will continue to use whatever hash function they where using.</p><p>Own Id: OTP-6923</p></li><li><p>Introduced <a href="mnesia.html#is_transaction/0"><code class="inline">mnesia:is_transaction/0</code></a>.</p><p>Own Id: OTP-6995 Aux Id: seq10812</p></li></ul><h3 id="known-bugs-and-problems-1" class="section-heading"><a href="#known-bugs-and-problems-1" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Known Bugs and Problems</span></h3><ul><li><p>Rearranging fragmented tables is an O(N^2) operation.</p><p>Own Id: OTP-6300</p></li></ul>

</div>

<div class="bottom-actions" id="bottom-actions">
  <div class="bottom-actions-item">

  </div>
  <div class="bottom-actions-item">

      <a href="mnesia_chap1.html" class="bottom-actions-button" rel="next">
        <span class="subheader">
          Next Page â†’
        </span>
        <span class="title">
Introduction
        </span>
      </a>

  </div>
</div>
    <footer class="footer">
      <p>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="mnesia.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.38.1) for the

          <a href="https://erlang.org" title="Erlang" target="_blank" translate="no">Erlang programming language</a>

      </p>
<p>Copyright Â© 1996-2025 <a href="https://www.ericsson.com">Ericsson AB</a></p>
    </footer>
  </div>
</main>
</div>
  <script defer src="https://cdn.jsdelivr.net/npm/mermaid@11.4.1/dist/mermaid.min.js"></script>
  <script>
  let initialized = false;

  window.addEventListener("exdoc:loaded", () => {
      if (!initialized) {
      mermaid.initialize({
          startOnLoad: false,
          theme: document.body.className.includes("dark") ? "dark" : "default"
      });
      initialized = true;
      }

      let id = 0;
      for (const codeEl of document.querySelectorAll("pre code.mermaid")) {
      const preEl = codeEl.parentElement;
      const graphDefinition = codeEl.textContent;
      const graphEl = document.createElement("div");
      const graphId = "mermaid-graph-" + id++;
      mermaid.render(graphId, graphDefinition).then(({svg, bindFunctions}) => {
          graphEl.innerHTML = svg;
          bindFunctions?.(graphEl);
          preEl.insertAdjacentElement("afterend", graphEl);
          preEl.remove();
      });
      }
  });
  </script>

  </body>
</html>
