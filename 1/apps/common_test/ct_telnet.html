<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.38.1">
    <meta name="project" content="common_test v1.28">


<meta name="exdoc:full-text-search-url" content="/doc/search.html?v=1&q=">
<meta name="major-vsn" content="1">
<link rel="canonical" href="https://www.erlang.org/docs/1/apps/common_test/ct_telnet.html" />
    <title>ct_telnet â€” common_test v1.28</title>

    <link rel="stylesheet" href="dist/html-erlang-ZK43ZOAC.css" />

    <script defer src="dist/sidebar_items-39261B45.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-DPJLHKSM.js"></script>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="../../index.html" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="common_test" />
        </a>

      <div>
        <a href="../../index.html" class="sidebar-projectName" translate="no">
common_test
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v1.28
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras=""></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-module" id="main" data-type="modules">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of common_test</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search" tabindex="-1">
            <i class="ri-search-2-line ri-lg" aria-hidden="true"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>
      <span translate="no">ct_telnet</span> 
      <small class="app-vsn" translate="no">(common_test v1.28)</small>

    </h1>

      <a href="https://github.com/erlang/otp/blob/master/lib/common_test/src/ct_telnet.erl#L23" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

  </div>


    <section id="moduledoc">
<p><code class="inline">Common Test</code> specific layer on top of Telnet client <code class="inline">ct_telnet_client.erl</code>.</p><p>Use this module to set up Telnet connections, send commands, and perform string
matching on the result. For information about how to use <code class="inline">ct_telnet</code> and
configure connections, specifically for UNIX hosts, see the <a href="unix_telnet.html"><code class="inline">unix_telnet</code></a>
manual page.</p><p>Default values defined in <code class="inline">ct_telnet</code>:</p><p><a href="" id="Default_values"></a></p><ul><li>Connection timeout (time to wait for connection) = 10 seconds</li><li>Command timeout (time to wait for a command to return) = 10 seconds</li><li>Max number of reconnection attempts = 3</li><li>Reconnection interval (time to wait in between reconnection attempts) = 5
seconds</li><li>Keep alive (sends NOP to the server every 8 sec if connection is idle) =
<code class="inline">true</code></li><li>Polling limit (max number of times to poll to get a remaining string
terminated) = 0</li><li>Polling interval (sleep time between polls) = 1 second</li><li>The TCP_NODELAY option for the telnet socket is disabled (set to <code class="inline">false</code>) per
default</li></ul><p>These parameters can be modified by the user with the following configuration
term:</p><pre><code class="makeup erlang" translate="no"><span class="p" data-group-id="1144168809-1">{</span><span class="ss">telnet_settings</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1144168809-2">[</span><span class="p" data-group-id="1144168809-3">{</span><span class="ss">connect_timeout</span><span class="p">,</span><span class="n">Millisec</span><span class="p" data-group-id="1144168809-3">}</span><span class="p">,</span><span class="w">
                   </span><span class="p" data-group-id="1144168809-4">{</span><span class="ss">command_timeout</span><span class="p">,</span><span class="n">Millisec</span><span class="p" data-group-id="1144168809-4">}</span><span class="p">,</span><span class="w">
                   </span><span class="p" data-group-id="1144168809-5">{</span><span class="ss">reconnection_attempts</span><span class="p">,</span><span class="n">N</span><span class="p" data-group-id="1144168809-5">}</span><span class="p">,</span><span class="w">
                   </span><span class="p" data-group-id="1144168809-6">{</span><span class="ss">reconnection_interval</span><span class="p">,</span><span class="n">Millisec</span><span class="p" data-group-id="1144168809-6">}</span><span class="p">,</span><span class="w">
                   </span><span class="p" data-group-id="1144168809-7">{</span><span class="ss">keep_alive</span><span class="p">,</span><span class="n">Bool</span><span class="p" data-group-id="1144168809-7">}</span><span class="p">,</span><span class="w">
                   </span><span class="p" data-group-id="1144168809-8">{</span><span class="ss">poll_limit</span><span class="p">,</span><span class="n">N</span><span class="p" data-group-id="1144168809-8">}</span><span class="p">,</span><span class="w">
                   </span><span class="p" data-group-id="1144168809-9">{</span><span class="ss">poll_interval</span><span class="p">,</span><span class="n">Millisec</span><span class="p" data-group-id="1144168809-9">}</span><span class="p">,</span><span class="w">
                   </span><span class="p" data-group-id="1144168809-10">{</span><span class="ss">tcp_nodelay</span><span class="p">,</span><span class="n">Bool</span><span class="p" data-group-id="1144168809-10">}</span><span class="p" data-group-id="1144168809-2">]</span><span class="p" data-group-id="1144168809-1">}</span><span class="p">.</span></code></pre><p><code class="inline">Millisec = timeout(), N = integer()</code></p><p>Enter the <code class="inline">telnet_settings</code> term in a configuration file included in the test
and <code class="inline">ct_telnet</code> retrieves the information automatically.</p><p><code class="inline">keep_alive</code> can be specified per connection, if necessary. For details, see
<a href="unix_telnet.html"><code class="inline">unix_telnet</code></a>.</p><h2 id="module-logging" class="section-heading"><a href="#module-logging" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Logging</span></h2><p><a href="" id="Logging"></a></p><p>The default logging behavior of <code class="inline">ct_telnet</code> is to print information about
performed operations, commands, and their corresponding results to the test case
HTML log. The following is not printed to the HTML log: text strings sent from
the Telnet server that are not explicitly received by a <code class="inline">ct_telnet</code> function,
such as <a href="#expect/3"><code class="inline">expect/3</code></a>. However, <code class="inline">ct_telnet</code> can be configured to use
a special purpose event handler, implemented in <code class="inline">ct_conn_log_h</code>, for logging
<em>all</em> Telnet traffic. To use this handler, install a <code class="inline">Common Test</code> hook named
<code class="inline">cth_conn_log</code>. Example (using the test suite information function):</p><pre><code class="makeup erlang" translate="no"><span class="nf">suite</span><span class="p" data-group-id="7641236892-1">(</span><span class="p" data-group-id="7641236892-1">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="p" data-group-id="7641236892-2">[</span><span class="p" data-group-id="7641236892-3">{</span><span class="ss">ct_hooks</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7641236892-4">[</span><span class="p" data-group-id="7641236892-5">{</span><span class="ss">cth_conn_log</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7641236892-6">[</span><span class="p" data-group-id="7641236892-7">{</span><span class="nf">conn_mod</span><span class="p" data-group-id="7641236892-8">(</span><span class="p" data-group-id="7641236892-8">)</span><span class="p">,</span><span class="nf">hook_options</span><span class="p" data-group-id="7641236892-9">(</span><span class="p" data-group-id="7641236892-9">)</span><span class="p" data-group-id="7641236892-7">}</span><span class="p" data-group-id="7641236892-6">]</span><span class="p" data-group-id="7641236892-5">}</span><span class="p" data-group-id="7641236892-4">]</span><span class="p" data-group-id="7641236892-3">}</span><span class="p" data-group-id="7641236892-2">]</span><span class="p">.</span></code></pre><p><code class="inline">conn_mod()</code> is the name of the <code class="inline">Common Test</code> module implementing the connection
protocol, that is, <code class="inline">ct_telnet</code>.</p><p>The <code class="inline">cth_conn_log</code> hook performs unformatted logging of Telnet data to a
separate text file. All Telnet communication is captured and printed, including
any data sent from the server. The link to this text file is located at the top
of the test case HTML log.</p><p>By default, data for all Telnet connections is logged in one common file (named
<code class="inline">default</code>), which can get messy, for example, if multiple Telnet sessions are
running in parallel. Therefore a separate log file can be created for each
connection. To configure this, use hook option <code class="inline">hosts</code> and list the names of the
servers/connections to be used in the suite. The connections must be named for
this to work (see <a href="#open/1"><code class="inline">ct_telnet:open/1,2,3,4</code></a>).</p><p>Hook option <code class="inline">log_type</code> can be used to change the <code class="inline">cth_conn_log</code> behavior. The
default value of this option is <code class="inline">raw</code>, which results in the behavior described
above. If the value is set to <code class="inline">html</code>, all Telnet communication is printed to the
test case HTML log instead.</p><p>For raw logs, <code class="inline">prefix</code> option can be used for adjusting prefix data
added to connection log. The default value of this option is
<code class="inline">disabled</code>, which results with no prefix data. If the value is set to
<code class="inline">full</code> prefix contains timestamp and additonal information. If the
value is set to <code class="inline">short</code> prefix includes only human readable timestamp.</p><p>All <code class="inline">cth_conn_log</code> hook options described can also be specified in a
configuration file with configuration variable <code class="inline">ct_conn_log</code>.</p><p><em>Example:</em></p><pre><code class="makeup erlang" translate="no"><span class="p" data-group-id="9966198593-1">{</span><span class="ss">ct_conn_log</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9966198593-2">[</span><span class="p" data-group-id="9966198593-3">{</span><span class="ss">ct_telnet</span><span class="p">,</span><span class="p" data-group-id="9966198593-4">[</span><span class="p" data-group-id="9966198593-5">{</span><span class="ss">log_type</span><span class="p">,</span><span class="ss">raw</span><span class="p" data-group-id="9966198593-5">}</span><span class="p">,</span><span class="w">
                           </span><span class="p" data-group-id="9966198593-6">{</span><span class="ss">hosts</span><span class="p">,</span><span class="p" data-group-id="9966198593-7">[</span><span class="nf">key_or_name</span><span class="p" data-group-id="9966198593-8">(</span><span class="p" data-group-id="9966198593-8">)</span><span class="p" data-group-id="9966198593-7">]</span><span class="p" data-group-id="9966198593-6">}</span><span class="p" data-group-id="9966198593-4">]</span><span class="p" data-group-id="9966198593-3">}</span><span class="p" data-group-id="9966198593-2">]</span><span class="p" data-group-id="9966198593-1">}</span></code></pre><section role="note" class="admonition info"><h4 class="admonition-title info">Note</h4><p>Hook options specified in a configuration file overwrite any hard-coded hook
options in the test suite.</p></section><p><a href="" id="Logging_example"></a></p><p><em>Logging Example:</em></p><p>The following <code class="inline">ct_hooks</code> statement causes printing of Telnet traffic to separate
logs for the connections <code class="inline">server1</code> and <code class="inline">server2</code>. Traffic for any other
connections is logged in the default Telnet log.</p><pre><code class="makeup erlang" translate="no"><span class="nf">suite</span><span class="p" data-group-id="9069613869-1">(</span><span class="p" data-group-id="9069613869-1">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="p" data-group-id="9069613869-2">[</span><span class="p" data-group-id="9069613869-3">{</span><span class="ss">ct_hooks</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="9069613869-4">[</span><span class="p" data-group-id="9069613869-5">{</span><span class="ss">cth_conn_log</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9069613869-6">[</span><span class="p" data-group-id="9069613869-7">{</span><span class="ss">ct_telnet</span><span class="p">,</span><span class="p" data-group-id="9069613869-8">[</span><span class="p" data-group-id="9069613869-9">{</span><span class="ss">hosts</span><span class="p">,</span><span class="p" data-group-id="9069613869-10">[</span><span class="ss">server1</span><span class="p">,</span><span class="ss">server2</span><span class="p" data-group-id="9069613869-10">]</span><span class="p" data-group-id="9069613869-9">}</span><span class="p" data-group-id="9069613869-8">]</span><span class="p" data-group-id="9069613869-7">}</span><span class="p" data-group-id="9069613869-6">]</span><span class="p" data-group-id="9069613869-5">}</span><span class="p" data-group-id="9069613869-4">]</span><span class="p" data-group-id="9069613869-3">}</span><span class="p" data-group-id="9069613869-2">]</span><span class="p">.</span></code></pre><p>As previously explained, this specification can also be provided by an entry
like the following in a configuration file:</p><pre><code class="makeup erlang" translate="no"><span class="p" data-group-id="3597587866-1">{</span><span class="ss">ct_conn_log</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3597587866-2">[</span><span class="p" data-group-id="3597587866-3">{</span><span class="ss">ct_telnet</span><span class="p">,</span><span class="p" data-group-id="3597587866-4">[</span><span class="p" data-group-id="3597587866-5">{</span><span class="ss">hosts</span><span class="p">,</span><span class="p" data-group-id="3597587866-6">[</span><span class="ss">server1</span><span class="p">,</span><span class="ss">server2</span><span class="p" data-group-id="3597587866-6">]</span><span class="p" data-group-id="3597587866-5">}</span><span class="p" data-group-id="3597587866-4">]</span><span class="p" data-group-id="3597587866-3">}</span><span class="p" data-group-id="3597587866-2">]</span><span class="p" data-group-id="3597587866-1">}</span><span class="p">.</span></code></pre><p>In this case the <code class="inline">ct_hooks</code> statement in the test suite can look as follows:</p><pre><code class="makeup erlang" translate="no"><span class="nf">suite</span><span class="p" data-group-id="3453912715-1">(</span><span class="p" data-group-id="3453912715-1">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="p" data-group-id="3453912715-2">[</span><span class="p" data-group-id="3453912715-3">{</span><span class="ss">ct_hooks</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3453912715-4">[</span><span class="p" data-group-id="3453912715-5">{</span><span class="ss">cth_conn_log</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3453912715-6">[</span><span class="p" data-group-id="3453912715-6">]</span><span class="p" data-group-id="3453912715-5">}</span><span class="p" data-group-id="3453912715-4">]</span><span class="p" data-group-id="3453912715-3">}</span><span class="p" data-group-id="3453912715-2">]</span><span class="p">.</span></code></pre><h2 id="module-see-also" class="section-heading"><a href="#module-see-also" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">See Also</span></h2><p><a href="unix_telnet.html"><code class="inline">unix_telnet</code></a></p>
    </section>

</div>

  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Summary</span>
    </h1>
<div class="summary-types summary">
  <h2>
    <a href="#types">Types</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:connection/0" data-no-tooltip="" translate="no">connection()</a>

      </div>

        <div class="summary-synopsis"><p>Reference to opened Telnet connection associated to either a <code class="inline">handle</code> or <code class="inline">target_name</code>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:connection_type/0" data-no-tooltip="" translate="no">connection_type()</a>

      </div>

        <div class="summary-synopsis"><p>Telnet connection_type, valid values: 'telnet' | 'ts1' | 'ts2'.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:handle/0" data-no-tooltip="" translate="no">handle()</a>

      </div>

        <div class="summary-synopsis"><p>Handle for a specific Telnet connection, see module <a><code class="inline">ct</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:newline_option/0" data-no-tooltip="" translate="no">newline_option()</a>

      </div>

        <div class="summary-synopsis"><p>See <a><code class="inline">cmd/3</code></a> for explanation.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:prompt_regexp/0" data-no-tooltip="" translate="no">prompt_regexp()</a>

      </div>

        <div class="summary-synopsis"><p>Regular expression matching all possible prompts for a specific target type.
<code class="inline">regexp</code> must not have any groups, that is, when matching, <a><code class="inline">re:run/3</code></a> (in
STDLIB) must return a list with one single element.</p></div>

    </div>

</div>
<div class="summary-functions summary">
  <h2>
    <a href="#functions">Functions</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#close/1" data-no-tooltip="" translate="no">close(Connection)</a>

      </div>

        <div class="summary-synopsis"><p>Closes the Telnet connection and stops the process managing it.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#cmd/2" data-no-tooltip="" translate="no">cmd(Connection, Cmd)</a>

      </div>

        <div class="summary-synopsis"><p>Equivalent to <a><code class="inline">cmd(Connection, Cmd, [])</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#cmd/3" data-no-tooltip="" translate="no">cmd(Connection, Cmd, Opts)</a>

      </div>

        <div class="summary-synopsis"><p>Sends a command through Telnet and waits for prompt.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#cmdf/3" data-no-tooltip="" translate="no">cmdf(Connection, CmdFormat, Args)</a>

      </div>

        <div class="summary-synopsis"><p>Equivalent to <a><code class="inline">cmdf(Connection, CmdFormat, Args, [])</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#cmdf/4" data-no-tooltip="" translate="no">cmdf(Connection, CmdFormat, Args, Opts)</a>

      </div>

        <div class="summary-synopsis"><p>Sends a Telnet command and waits for prompt (uses a format string and a list of
arguments to build the command).</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#expect/2" data-no-tooltip="" translate="no">expect(Connection, Patterns)</a>

      </div>

        <div class="summary-synopsis"><p>Equivalent to <a><code class="inline">expect(Connection, Patterns, [])</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#expect/3" data-no-tooltip="" translate="no">expect(Connection, Patterns, Opts)</a>

      </div>

        <div class="summary-synopsis"><p>Gets data from Telnet and waits for the expected pattern.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get_data/1" data-no-tooltip="" translate="no">get_data(Connection)</a>

      </div>

        <div class="summary-synopsis"><p>Gets all data received by the Telnet client since the last command was sent.
Only newline-terminated strings are returned. If the last received string has
not yet been terminated, the connection can be polled automatically until the
string is complete.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#open/1" data-no-tooltip="" translate="no">open(Name)</a>

      </div>

        <div class="summary-synopsis"><p>Equivalent to <a><code class="inline">open(Name, telnet)</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#open/2" data-no-tooltip="" translate="no">open(Name, ConnType)</a>

      </div>

        <div class="summary-synopsis"><p>Opens a Telnet connection to the specified target host.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#open/3" data-no-tooltip="" translate="no">open(KeyOrName, ConnType, TargetMod)</a>

      </div>

        <div class="summary-synopsis"><p>Equivalent to <a><code class="inline">open(KeyOrName, ConnType, TargetMod, KeyOrName)</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#open/4" data-no-tooltip="" translate="no">open(KeyOrName, ConnType, TargetMod, Extra)</a>

      </div>

        <div class="summary-synopsis"><p>Opens a Telnet connection to the specified target host.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#send/2" data-no-tooltip="" translate="no">send(Connection, Cmd)</a>

      </div>

        <div class="summary-synopsis"><p>Equivalent to <a><code class="inline">send(Connection, Cmd, [])</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#send/3" data-no-tooltip="" translate="no">send(Connection, Cmd, Opts)</a>

      </div>

        <div class="summary-synopsis"><p>Sends a Telnet command and returns immediately.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#sendf/3" data-no-tooltip="" translate="no">sendf(Connection, CmdFormat, Args)</a>

      </div>

        <div class="summary-synopsis"><p>Equivalent to <a><code class="inline">sendf(Connection, CmdFormat, Args, [])</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#sendf/4" data-no-tooltip="" translate="no">sendf(Connection, CmdFormat, Args, Opts)</a>

      </div>

        <div class="summary-synopsis"><p>Sends a Telnet command and returns immediately (uses a format string and a list
of arguments to build the command).</p></div>

    </div>

</div>

  </section>


  <section id="types" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#types">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Types</span>
    </h1>
    <div class="types-list">
<section class="detail" id="t:connection/0">

  <div class="detail-header">
    <a href="#t:connection/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">connection()</h1>


        <a href="https://github.com/erlang/otp/blob/master/lib/common_test/src/ct_telnet.erl#L186" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> connection() :: <a href="#t:handle/0">handle</a>() | {<a href="ct.html#t:target_name/0">ct:target_name</a>(), <a href="#t:connection_type/0">connection_type</a>()} | <a href="ct.html#t:target_name/0">ct:target_name</a>().</pre>

      </div>

<p>Reference to opened Telnet connection associated to either a <code class="inline">handle</code> or <code class="inline">target_name</code>.</p>
  </section>
</section>
<section class="detail" id="t:connection_type/0">

  <div class="detail-header">
    <a href="#t:connection_type/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">connection_type()</h1>


        <a href="https://github.com/erlang/otp/blob/master/lib/common_test/src/ct_telnet.erl#L188" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> connection_type() :: telnet | ts1 | ts2.</pre>

      </div>

<p>Telnet connection_type, valid values: 'telnet' | 'ts1' | 'ts2'.</p>
  </section>
</section>
<section class="detail" id="t:handle/0">

  <div class="detail-header">
    <a href="#t:handle/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">handle()</h1>


        <a href="https://github.com/erlang/otp/blob/master/lib/common_test/src/ct_telnet.erl#L190" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> handle() :: <a href="ct.html#t:handle/0">ct:handle</a>().</pre>

      </div>

<p>Handle for a specific Telnet connection, see module <a href="ct.html"><code class="inline">ct</code></a>.</p>
  </section>
</section>
<section class="detail" id="t:newline_option/0">

  <div class="detail-header">
    <a href="#t:newline_option/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">newline_option()</h1>

        <span class="note">(not exported)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/common_test/src/ct_telnet.erl#L198" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> newline_option() :: {newline, <a href="../../apps/erts/erlang.html#t:boolean/0">boolean</a>() | <a href="../../apps/erts/erlang.html#t:string/0">string</a>()}.</pre>

      </div>

<p>See <a href="#cmd/3"><code class="inline">cmd/3</code></a> for explanation.</p>
  </section>
</section>
<section class="detail" id="t:prompt_regexp/0">

  <div class="detail-header">
    <a href="#t:prompt_regexp/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">prompt_regexp()</h1>


        <a href="https://github.com/erlang/otp/blob/master/lib/common_test/src/ct_telnet.erl#L196" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> prompt_regexp() :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>().</pre>

      </div>

<p>Regular expression matching all possible prompts for a specific target type.
<code class="inline">regexp</code> must not have any groups, that is, when matching, <a href="../../apps/stdlib/re.html#run/3"><code class="inline">re:run/3</code></a> (in
STDLIB) must return a list with one single element.</p>
  </section>
</section>

    </div>
  </section>

  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Functions</span>
    </h1>
    <div class="functions-list">
<section class="detail" id="close/1">

  <div class="detail-header">
    <a href="#close/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">close(Connection)</h1>


        <a href="https://github.com/erlang/otp/blob/master/lib/common_test/src/ct_telnet.erl#L334" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> close(Connection) -> ok | {error, Reason}
               when Connection :: <a href="#t:connection/0">connection</a>(), Reason :: already_closed | <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Closes the Telnet connection and stops the process managing it.</p><p>A connection can be associated with a target name and/or a handle. If
<code class="inline">Connection</code> has no associated target name, it can only be closed with the
handle value (see <a href="#open/4"><code class="inline">ct_telnet:open/4</code></a>).</p>
  </section>
</section>
<section class="detail" id="cmd/2">

  <div class="detail-header">
    <a href="#cmd/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">cmd(Connection, Cmd)</h1>


        <a href="https://github.com/erlang/otp/blob/master/lib/common_test/src/ct_telnet.erl#L358" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> cmd(Connection, Cmd) -> {ok, Data} | {error, Reason}
             when Connection :: <a href="#t:connection/0">connection</a>(), Cmd :: <a href="../../apps/erts/erlang.html#t:iodata/0">iodata</a>(), Data :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(), Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Equivalent to <a href="#cmd/3"><code class="inline">cmd(Connection, Cmd, [])</code></a>.</p>
  </section>
</section>
<section class="detail" id="cmd/3">

  <div class="detail-header">
    <a href="#cmd/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">cmd(Connection, Cmd, Opts)</h1>


        <a href="https://github.com/erlang/otp/blob/master/lib/common_test/src/ct_telnet.erl#L384" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> cmd(Connection, Cmd, Opts) -> {ok, Data} | {error, Reason}
             when
                 Connection :: <a href="#t:connection/0">connection</a>(),
                 Cmd :: <a href="../../apps/erts/erlang.html#t:iodata/0">iodata</a>(),
                 Opts :: [{timeout, Timeout} | <a href="#t:newline_option/0">newline_option</a>()] | Timeout,
                 Timeout :: <a href="../../apps/erts/erlang.html#t:integer/0">integer</a>(),
                 Data :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(),
                 Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Sends a command through Telnet and waits for prompt.</p><p>By default, this function adds &quot;\n&quot; to the end of the specified command. If
this is not desired, use option <code class="inline">{newline,false}</code>. This is necessary, for
example, when sending Telnet command sequences prefixed with character Interpret
As Command (IAC). Option <code class="inline">{newline,string()}</code> can also be used if a different
line end than &quot;\n&quot; is required, for instance <code class="inline">{newline,&quot;\r\n&quot;}</code>, to add both
carriage return and newline characters.</p><p>Option <code class="inline">timeout</code> specifies how long the client must wait for prompt. If the time
expires, the function returns <code class="inline">{error,timeout}</code>. For information about the
default value for the command timeout, see the
<a href="ct_telnet.html#Default_values">list of default values</a> in the beginning of this
module.</p>
  </section>
</section>
<section class="detail" id="cmdf/3">

  <div class="detail-header">
    <a href="#cmdf/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">cmdf(Connection, CmdFormat, Args)</h1>


        <a href="https://github.com/erlang/otp/blob/master/lib/common_test/src/ct_telnet.erl#L415" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> cmdf(Connection, CmdFormat, Args) -> {ok, Data} | {error, Reason}
              when
                  Connection :: <a href="#t:connection/0">connection</a>(),
                  CmdFormat :: <a href="../../apps/stdlib/io.html#t:format/0">io:format</a>(),
                  Args :: [<a href="../../apps/erts/erlang.html#t:term/0">term</a>()],
                  Data :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(),
                  Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Equivalent to <a href="#cmdf/4"><code class="inline">cmdf(Connection, CmdFormat, Args, [])</code></a>.</p>
  </section>
</section>
<section class="detail" id="cmdf/4">

  <div class="detail-header">
    <a href="#cmdf/4" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">cmdf(Connection, CmdFormat, Args, Opts)</h1>


        <a href="https://github.com/erlang/otp/blob/master/lib/common_test/src/ct_telnet.erl#L432" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> cmdf(Connection, CmdFormat, Args, Opts) -> {ok, Data} | {error, Reason}
              when
                  Connection :: <a href="#t:connection/0">connection</a>(),
                  CmdFormat :: <a href="../../apps/stdlib/io.html#t:format/0">io:format</a>(),
                  Args :: [<a href="../../apps/erts/erlang.html#t:term/0">term</a>()],
                  Opts :: [{timeout, Timeout} | <a href="#t:newline_option/0">newline_option</a>()] | Timeout,
                  Timeout :: <a href="../../apps/erts/erlang.html#t:integer/0">integer</a>(),
                  Data :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(),
                  Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Sends a Telnet command and waits for prompt (uses a format string and a list of
arguments to build the command).</p><p>For details, see <a href="#cmd/3"><code class="inline">ct_telnet:cmd/3</code></a>.</p>
  </section>
</section>
<section class="detail" id="expect/2">

  <div class="detail-header">
    <a href="#expect/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">expect(Connection, Patterns)</h1>


        <a href="https://github.com/erlang/otp/blob/master/lib/common_test/src/ct_telnet.erl#L557" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> expect(Connection, Patterns) ->
                {ok, Match} | {ok, Match, HaltReason} | {error, Reason} | <a href="../../apps/erts/erlang.html#t:no_return/0">no_return</a>()
                when
                    Connection :: <a href="#t:connection/0">connection</a>(),
                    Patterns :: Pattern | [Pattern],
                    Pattern :: PatternString | {Tag, PatternString},
                    Tag :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                    PatternString :: <a href="../../apps/stdlib/unicode.html#t:charlist/0">unicode:charlist</a>(),
                    Match :: MatchResult | [MatchResult],
                    MatchResult ::
                        [CaptureData | {Tag, CaptureData}] | [[CaptureData | {Tag, CaptureData}]],
                    CaptureData ::
                        <a href="../../apps/erts/erlang.html#t:string/0">string</a>() | {error, <a href="../../apps/erts/erlang.html#t:string/0">string</a>(), <a href="../../apps/erts/erlang.html#t:binary/0">binary</a>()} | {incomplete, <a href="../../apps/erts/erlang.html#t:string/0">string</a>(), <a href="../../apps/erts/erlang.html#t:binary/0">binary</a>()},
                    HaltReason :: MatchResult,
                    Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Equivalent to <a href="#expect/3"><code class="inline">expect(Connection, Patterns, [])</code></a>.</p>
  </section>
</section>
<section class="detail" id="expect/3">

  <div class="detail-header">
    <a href="#expect/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">expect(Connection, Patterns, Opts)</h1>


        <a href="https://github.com/erlang/otp/blob/master/lib/common_test/src/ct_telnet.erl#L659" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> expect(Connection, Patterns, Opts) ->
                {ok, Match} | {ok, Match, HaltReason} | {error, Reason} | <a href="../../apps/erts/erlang.html#t:no_return/0">no_return</a>()
                when
                    Connection :: <a href="#t:connection/0">connection</a>(),
                    Patterns :: Pattern | [Pattern],
                    Pattern :: PatternString | {Tag, PatternString},
                    Tag :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                    PatternString :: <a href="../../apps/stdlib/unicode.html#t:charlist/0">unicode:charlist</a>(),
                    Opts :: [Option],
                    Option ::
                        {idle_timeout, <a href="../../apps/erts/erlang.html#t:non_neg_integer/0">non_neg_integer</a>()} |
                        {total_timeout, <a href="../../apps/erts/erlang.html#t:non_neg_integer/0">non_neg_integer</a>()} |
                        ignore_prompt | no_prompt_check | wait_for_prompt | repeat |
                        {repeat, <a href="../../apps/erts/erlang.html#t:non_neg_integer/0">non_neg_integer</a>()} |
                        sequence |
                        {halt, Patterns},
                    Match :: MatchResult | [MatchResult],
                    MatchResult ::
                        [CaptureData | {Tag, CaptureData}] | [[CaptureData | {Tag, CaptureData}]],
                    CaptureData ::
                        <a href="../../apps/erts/erlang.html#t:string/0">string</a>() | {error, <a href="../../apps/erts/erlang.html#t:string/0">string</a>(), <a href="../../apps/erts/erlang.html#t:binary/0">binary</a>()} | {incomplete, <a href="../../apps/erts/erlang.html#t:string/0">string</a>(), <a href="../../apps/erts/erlang.html#t:binary/0">binary</a>()},
                    HaltReason :: MatchResult,
                    Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Gets data from Telnet and waits for the expected pattern.</p><p><code class="inline">Pattern</code> can be a POSIX regular expression. The function returns when a pattern
is successfully matched (at least one, in the case of multiple patterns).</p><p><code class="inline">RxMatch</code> is a list of matched strings. It looks as follows
<code class="inline">[FullMatch, SubMatch1, SubMatch2, ...]</code>, where <code class="inline">FullMatch</code> is the string
matched by the whole regular expression, and <code class="inline">SubMatchN</code> is the string that
matched subexpression number <code class="inline">N</code>. Subexpressions are denoted with <code class="inline">'(' ')'</code> in
the regular expression.</p><p>If a <code class="inline">Tag</code> is specified, the returned <code class="inline">Match</code> also includes the matched <code class="inline">Tag</code>.
Otherwise, only <code class="inline">RxMatch</code> is returned.</p><p><em>Options:</em></p><ul><li><p><strong><code class="inline">idle_timeout</code></strong> - Indicates that the function must return if the Telnet
client is idle (that is, if no data is received) for more than <code class="inline">IdleTimeout</code>
milliseconds. Default time-out is 10 seconds.</p></li><li><p><strong><code class="inline">total_timeout</code></strong> - Sets a time limit for the complete <code class="inline">expect</code> operation.
After <code class="inline">TotalTimeout</code> milliseconds, <code class="inline">{error,timeout}</code> is returned. Default is
<code class="inline">infinity</code> (that is, no time limit).</p></li><li><p><strong><code class="inline">ignore_prompt | no_prompt_check</code></strong> - &gt;The function returns when a prompt is
received, even if no pattern has yet been matched, and
<code class="inline">{error,{prompt,Prompt}}</code> is returned. However, this behavior can be modified
with option <code class="inline">ignore_prompt</code> or option <code class="inline">no_prompt_check</code>, which tells <code class="inline">expect</code>
to return only when a match is found or after a time-out.</p></li><li><p><strong><code class="inline">ignore_prompt</code></strong> - <code class="inline">ct_telnet</code> ignores any prompt found. This option is
useful if data sent by the server can include a pattern matching prompt
<code class="inline">regexp</code> (as returned by <code class="inline">TargedMod:get_prompt_regexp/0</code>), but is not to not
cause the function to return.</p></li><li><p><strong><code class="inline">no_prompt_check</code></strong> - <code class="inline">ct_telnet</code> does not search for a prompt at all. This
is useful if, for example, <code class="inline">Pattern</code> itself matches the prompt.</p></li><li><p><strong><code class="inline">wait_for_prompt</code></strong> - Forces <code class="inline">ct_telnet</code> to wait until the prompt string is
received before returning (even if a pattern has already been matched). This
is equal to calling
<a href="#expect/3"><code class="inline">expect(Conn, Patterns++[{prompt,Prompt}], [sequence|Opts])</code></a>.
Notice that option <code class="inline">idle_timeout</code> and <code class="inline">total_timeout</code> can abort the operation
of waiting for prompt.</p></li><li><p><strong><code class="inline">repeat | repeat, N</code></strong> - The pattern(s) must be matched multiple times. If
<code class="inline">N</code> is specified, the pattern(s) are matched <code class="inline">N</code> times, and the function
returns <code class="inline">HaltReason = done</code>. This option can be interrupted by one or more
<code class="inline">HaltPatterns</code>. <code class="inline">MatchList</code> is always returned, that is, a list of <code class="inline">Match</code>
instead of only one <code class="inline">Match</code>. Also <code class="inline">HaltReason</code> is returned.</p></li><li><p><strong><code class="inline">sequence</code></strong> - All patterns must be matched in a sequence. A match is not
concluded until all patterns are matched. This option can be interrupted by
one or more <code class="inline">HaltPatterns</code>. <code class="inline">MatchList</code> is always returned, that is, a list of
<code class="inline">Match</code> instead of only one <code class="inline">Match</code>. Also <code class="inline">HaltReason</code> is returned.</p></li></ul><p><em>Example 1:</em></p><pre><code class="makeup erlang" translate="no"><span class="nf">expect</span><span class="p" data-group-id="4552879398-1">(</span><span class="n">Connection</span><span class="p">,</span><span class="p" data-group-id="4552879398-2">[</span><span class="p" data-group-id="4552879398-3">{</span><span class="ss">abc</span><span class="p">,</span><span class="s">&quot;ABC&quot;</span><span class="p" data-group-id="4552879398-3">}</span><span class="p">,</span><span class="p" data-group-id="4552879398-4">{</span><span class="ss">xyz</span><span class="p">,</span><span class="s">&quot;XYZ&quot;</span><span class="p" data-group-id="4552879398-4">}</span><span class="p" data-group-id="4552879398-2">]</span><span class="p">,</span><span class="p" data-group-id="4552879398-5">[</span><span class="ss">sequence</span><span class="p">,</span><span class="p" data-group-id="4552879398-6">{</span><span class="ss">halt</span><span class="p">,</span><span class="p" data-group-id="4552879398-7">[</span><span class="p" data-group-id="4552879398-8">{</span><span class="ss">nnn</span><span class="p">,</span><span class="s">&quot;NNN&quot;</span><span class="p" data-group-id="4552879398-8">}</span><span class="p" data-group-id="4552879398-7">]</span><span class="p" data-group-id="4552879398-6">}</span><span class="p" data-group-id="4552879398-5">]</span><span class="p" data-group-id="4552879398-1">)</span></code></pre><p>First this tries to match <code class="inline">&quot;ABC&quot;</code>, and then <code class="inline">&quot;XYZ&quot;</code>, but if <code class="inline">&quot;NNN&quot;</code> appears, the
function returns <code class="inline">{error,{nnn,[&quot;NNN&quot;]}}</code>. If both <code class="inline">&quot;ABC&quot;</code> and <code class="inline">&quot;XYZ&quot;</code> are
matched, the function returns <code class="inline">{ok,[AbcMatch,XyzMatch]}</code>.</p><p><em>Example 2:</em></p><pre><code class="makeup erlang" translate="no"><span class="nf">expect</span><span class="p" data-group-id="1908931763-1">(</span><span class="n">Connection</span><span class="p">,</span><span class="p" data-group-id="1908931763-2">[</span><span class="p" data-group-id="1908931763-3">{</span><span class="ss">abc</span><span class="p">,</span><span class="s">&quot;ABC&quot;</span><span class="p" data-group-id="1908931763-3">}</span><span class="p">,</span><span class="p" data-group-id="1908931763-4">{</span><span class="ss">xyz</span><span class="p">,</span><span class="s">&quot;XYZ&quot;</span><span class="p" data-group-id="1908931763-4">}</span><span class="p" data-group-id="1908931763-2">]</span><span class="p">,</span><span class="p" data-group-id="1908931763-5">[</span><span class="p" data-group-id="1908931763-6">{</span><span class="ss">repeat</span><span class="p">,</span><span class="mi">2</span><span class="p" data-group-id="1908931763-6">}</span><span class="p">,</span><span class="p" data-group-id="1908931763-7">{</span><span class="ss">halt</span><span class="p">,</span><span class="p" data-group-id="1908931763-8">[</span><span class="p" data-group-id="1908931763-9">{</span><span class="ss">nnn</span><span class="p">,</span><span class="s">&quot;NNN&quot;</span><span class="p" data-group-id="1908931763-9">}</span><span class="p" data-group-id="1908931763-8">]</span><span class="p" data-group-id="1908931763-7">}</span><span class="p" data-group-id="1908931763-5">]</span><span class="p" data-group-id="1908931763-1">)</span></code></pre><p>This tries to match <code class="inline">&quot;ABC&quot;</code> or <code class="inline">&quot;XYZ&quot;</code> twice. If <code class="inline">&quot;NNN&quot;</code> appears, the function
returns <code class="inline">HaltReason = {nnn,[&quot;NNN&quot;]}</code>.</p><p>Options <code class="inline">repeat</code> and <code class="inline">sequence</code> can be combined to match a sequence multiple
times.</p>
  </section>
</section>
<section class="detail" id="get_data/1">

  <div class="detail-header">
    <a href="#get_data/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">get_data(Connection)</h1>


        <a href="https://github.com/erlang/otp/blob/master/lib/common_test/src/ct_telnet.erl#L451" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> get_data(Connection) -> {ok, Data} | {error, Reason}
                  when Connection :: <a href="#t:connection/0">connection</a>(), Data :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(), Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Gets all data received by the Telnet client since the last command was sent.
Only newline-terminated strings are returned. If the last received string has
not yet been terminated, the connection can be polled automatically until the
string is complete.</p><p>The polling feature is controlled by the configuration values <code class="inline">poll_limit</code> and
<code class="inline">poll_interval</code> and is by default disabled. This means that the function
immediately returns all complete strings received and saves a remaining
non-terminated string for a later <code class="inline">get_data</code> call.</p>
  </section>
</section>
<section class="detail" id="open/1">

  <div class="detail-header">
    <a href="#open/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">open(Name)</h1>


        <a href="https://github.com/erlang/otp/blob/master/lib/common_test/src/ct_telnet.erl#L225" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> open(Name) -> {ok, Handle} | {error, Reason}
              when Name :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(), Handle :: <a href="#t:handle/0">handle</a>(), Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Equivalent to <a href="#open/2"><code class="inline">open(Name, telnet)</code></a>.</p>
  </section>
</section>
<section class="detail" id="open/2">

  <div class="detail-header">
    <a href="#open/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">open(Name, ConnType)</h1>


        <a href="https://github.com/erlang/otp/blob/master/lib/common_test/src/ct_telnet.erl#L236" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> open(Name, ConnType) -> {ok, Handle} | {error, Reason}
              when Name :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(), ConnType :: <a href="#t:connection_type/0">connection_type</a>(), Handle :: <a href="#t:handle/0">handle</a>(), Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Opens a Telnet connection to the specified target host.</p>
  </section>
</section>
<section class="detail" id="open/3">

  <div class="detail-header">
    <a href="#open/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">open(KeyOrName, ConnType, TargetMod)</h1>


        <a href="https://github.com/erlang/otp/blob/master/lib/common_test/src/ct_telnet.erl#L253" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> open(KeyOrName, ConnType, TargetMod) -> {ok, Handle} | {error, Reason}
              when
                  KeyOrName :: <a href="ct.html#t:key_or_name/0">ct:key_or_name</a>(),
                  ConnType :: <a href="#t:connection_type/0">connection_type</a>(),
                  TargetMod :: <a href="../../apps/erts/erlang.html#t:module/0">module</a>(),
                  Handle :: <a href="#t:handle/0">handle</a>(),
                  Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Equivalent to <a href="#open/4"><code class="inline">open(KeyOrName, ConnType, TargetMod, KeyOrName)</code></a>.</p>
  </section>
</section>
<section class="detail" id="open/4">

  <div class="detail-header">
    <a href="#open/4" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">open(KeyOrName, ConnType, TargetMod, Extra)</h1>


        <a href="https://github.com/erlang/otp/blob/master/lib/common_test/src/ct_telnet.erl#L285" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> open(KeyOrName, ConnType, TargetMod, Extra) -> {ok, Handle} | {error, Reason}
              when
                  KeyOrName :: <a href="ct.html#t:key_or_name/0">ct:key_or_name</a>(),
                  ConnType :: <a href="#t:connection_type/0">connection_type</a>(),
                  TargetMod :: <a href="../../apps/erts/erlang.html#t:module/0">module</a>(),
                  Extra :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                  Handle :: <a href="#t:handle/0">handle</a>(),
                  Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Opens a Telnet connection to the specified target host.</p><p>The target data must exist in a configuration file. The connection can be
associated with <code class="inline">Name</code> and/or the returned <code class="inline">Handle</code>. To allocate a name for the
target, use one of the following alternatives:</p><ul><li><a href="ct.html#require/2"><code class="inline">ct:require/2</code></a> in a test case</li><li>A <code class="inline">require</code> statement in the suite information function (<code class="inline">suite/0</code>)</li><li>A <code class="inline">require</code> statement in a test case information function</li></ul><p>If you want the connection to be associated with <code class="inline">Handle</code> only (if you, for
example, need to open multiple connections to a host), use <code class="inline">Key</code>, the
configuration variable name, to specify the target. Notice that a connection
without an associated target name can only be closed with the <code class="inline">Handle</code> value.</p><p><code class="inline">TargetMod</code> is a module that exports the functions
<code class="inline">connect(Ip, Port, KeepAlive, Extra)</code> and <code class="inline">get_prompt_regexp()</code> for the
specified <code class="inline">TargetType</code> (for example, <code class="inline">unix_telnet</code>).</p><p>See also <a href="ct.html#require/2"><code class="inline">ct:require/2</code></a>.</p>
  </section>
</section>
<section class="detail" id="send/2">

  <div class="detail-header">
    <a href="#send/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">send(Connection, Cmd)</h1>


        <a href="https://github.com/erlang/otp/blob/master/lib/common_test/src/ct_telnet.erl#L464" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> send(Connection, Cmd) -> ok | {error, Reason}
              when Connection :: <a href="#t:connection/0">connection</a>(), Cmd :: <a href="../../apps/erts/erlang.html#t:iodata/0">iodata</a>(), Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Equivalent to <a href="#send/3"><code class="inline">send(Connection, Cmd, [])</code></a>.</p>
  </section>
</section>
<section class="detail" id="send/3">

  <div class="detail-header">
    <a href="#send/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">send(Connection, Cmd, Opts)</h1>

        <span class="note">(since OTP 17.4)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/common_test/src/ct_telnet.erl#L486" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> send(Connection, Cmd, Opts) -> ok | {error, Reason}
              when
                  Connection :: <a href="#t:connection/0">connection</a>(),
                  Cmd :: <a href="../../apps/erts/erlang.html#t:iodata/0">iodata</a>(),
                  Opts :: [<a href="#t:newline_option/0">newline_option</a>()],
                  Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Sends a Telnet command and returns immediately.</p><p>By default, this function adds &quot;\n&quot; to the end of the specified command. If
this is not desired, option <code class="inline">{newline,false}</code> can be used. This is necessary,
for example, when sending Telnet command sequences prefixed with character
Interpret As Command (IAC). Option <code class="inline">{newline,string()}</code> can also be used if a
different line end than &quot;\n&quot; is required, for instance <code class="inline">{newline,&quot;\r\n&quot;}</code>, to
add both carriage return and newline characters.</p><p>The resulting output from the command can be read with
<a href="#get_data/1"><code class="inline">ct_telnet:get_data/2</code></a> or <a href="#expect/2"><code class="inline">ct_telnet:expect/2,3</code></a>.</p>
  </section>
</section>
<section class="detail" id="sendf/3">

  <div class="detail-header">
    <a href="#sendf/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">sendf(Connection, CmdFormat, Args)</h1>


        <a href="https://github.com/erlang/otp/blob/master/lib/common_test/src/ct_telnet.erl#L521" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> sendf(Connection, CmdFormat, Args) -> ok | {error, Reason}
               when
                   Connection :: <a href="#t:connection/0">connection</a>(),
                   CmdFormat :: <a href="../../apps/stdlib/io.html#t:format/0">io:format</a>(),
                   Args :: [<a href="../../apps/erts/erlang.html#t:term/0">term</a>()],
                   Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Equivalent to <a href="#sendf/4"><code class="inline">sendf(Connection, CmdFormat, Args, [])</code></a>.</p>
  </section>
</section>
<section class="detail" id="sendf/4">

  <div class="detail-header">
    <a href="#sendf/4" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">sendf(Connection, CmdFormat, Args, Opts)</h1>

        <span class="note">(since OTP 17.4)</span>


        <a href="https://github.com/erlang/otp/blob/master/lib/common_test/src/ct_telnet.erl#L537" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> sendf(Connection, CmdFormat, Args, Opts) -> ok | {error, Reason}
               when
                   Connection :: <a href="#t:connection/0">connection</a>(),
                   CmdFormat :: <a href="../../apps/stdlib/io.html#t:format/0">io:format</a>(),
                   Args :: [<a href="../../apps/erts/erlang.html#t:term/0">term</a>()],
                   Opts :: [<a href="#t:newline_option/0">newline_option</a>()],
                   Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Sends a Telnet command and returns immediately (uses a format string and a list
of arguments to build the command).</p><p>For details, see <a href="#send/3"><code class="inline">ct_telnet:send/3</code></a>.</p>
  </section>
</section>

    </div>
  </section>

    <footer class="footer">
      <p>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="common_test.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.38.1) for the

          <a href="https://erlang.org" title="Erlang" target="_blank" translate="no">Erlang programming language</a>

      </p>
<p>Copyright Â© 1996-2025 <a href="https://www.ericsson.com">Ericsson AB</a></p>
    </footer>
  </div>
</main>
</div>
  <script defer src="https://cdn.jsdelivr.net/npm/mermaid@11.4.1/dist/mermaid.min.js"></script>
  <script>
  let initialized = false;

  window.addEventListener("exdoc:loaded", () => {
      if (!initialized) {
      mermaid.initialize({
          startOnLoad: false,
          theme: document.body.className.includes("dark") ? "dark" : "default"
      });
      initialized = true;
      }

      let id = 0;
      for (const codeEl of document.querySelectorAll("pre code.mermaid")) {
      const preEl = codeEl.parentElement;
      const graphDefinition = codeEl.textContent;
      const graphEl = document.createElement("div");
      const graphId = "mermaid-graph-" + id++;
      mermaid.render(graphId, graphDefinition).then(({svg, bindFunctions}) => {
          graphEl.innerHTML = svg;
          bindFunctions?.(graphEl);
          preEl.insertAdjacentElement("afterend", graphEl);
          preEl.remove();
      });
      }
  });
  </script>

  </body>
</html>
