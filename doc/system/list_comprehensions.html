<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.38.1">
    <meta name="project" content="Erlang System Documentation v28.2">


<meta name="major-vsn" content="28">
<meta name="exdoc:full-text-search-url" content="/doc/search.html?v=28&q=">
<link rel="canonical" href="https://www.erlang.org/doc/system/list_comprehensions.html" />
    <title>List Comprehensions â€” Erlang System Documentation v28.2</title>

    <link rel="stylesheet" href="dist/html-erlang-ZK43ZOAC.css" />

    <script defer src="dist/sidebar_items-351B7E11.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-DPJLHKSM.js"></script>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="../index.html" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="Erlang System Documentation" />
        </a>

      <div>
        <a href="../index.html" class="sidebar-projectName" translate="no">
Erlang System Documentation
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v28.2
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras=""></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-extra" id="main" data-type="extras">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of Erlang System Documentation</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search" tabindex="-1">
            <i class="ri-search-2-line ri-lg" aria-hidden="true"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>List Comprehensions</h1>


      <a href="https://github.com/erlang/otp/blob/OTP-28.2/system/doc/programming_examples/list_comprehensions.md#L1" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

  </div>


<h2 id="simple-examples" class="section-heading"><a href="#simple-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Simple Examples</span></h2><p>This section starts with a simple example, showing a generator and a filter:</p><pre><code class="makeup erlang" translate="no"><span class="gp unselectable">&gt; </span><span class="p" data-group-id="1091631407-1">[</span><span class="n">X</span><span class="w"> </span><span class="p">||</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">&lt;:-</span><span class="w"> </span><span class="p" data-group-id="1091631407-2">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="ss">a</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="ss">b</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p" data-group-id="1091631407-2">]</span><span class="p">,</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="1091631407-1">]</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="1091631407-3">[</span><span class="ss">a</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="ss">b</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p" data-group-id="1091631407-3">]</span></code></pre><p>This is read as follows: The list of X such that X is taken from the list
<code class="inline">[1,2,a,...]</code> and X is greater than 3.</p><p>The notation <code class="inline">X &lt;:- [1,2,a,...]</code> is a generator and the expression <code class="inline">X &gt; 3</code> is a
filter.</p><p>An additional filter, <a href="../apps/erts/erlang.html#is_integer/1"><code class="inline">is_integer(X)</code></a>, can be added to
restrict the result to integers:</p><pre><code class="makeup erlang" translate="no"><span class="gp unselectable">&gt; </span><span class="p" data-group-id="4491481308-1">[</span><span class="n">X</span><span class="w"> </span><span class="p">||</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">&lt;:-</span><span class="w"> </span><span class="p" data-group-id="4491481308-2">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="ss">a</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="ss">b</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p" data-group-id="4491481308-2">]</span><span class="p">,</span><span class="w"> </span><span class="nf">is_integer</span><span class="p" data-group-id="4491481308-3">(</span><span class="n">X</span><span class="p" data-group-id="4491481308-3">)</span><span class="p">,</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="4491481308-1">]</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="4491481308-4">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p" data-group-id="4491481308-4">]</span></code></pre><p>Generators can be combined in two ways. For example, the Cartesian product of
two lists can be written as follows:</p><pre><code class="makeup erlang" translate="no"><span class="gp unselectable">&gt; </span><span class="p" data-group-id="7683817521-1">[</span><span class="p" data-group-id="7683817521-2">{</span><span class="n">X</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="p" data-group-id="7683817521-2">}</span><span class="w"> </span><span class="p">||</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">&lt;:-</span><span class="w"> </span><span class="p" data-group-id="7683817521-3">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p" data-group-id="7683817521-3">]</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="o">&lt;:-</span><span class="w"> </span><span class="p" data-group-id="7683817521-4">[</span><span class="ss">a</span><span class="p">,</span><span class="ss">b</span><span class="p" data-group-id="7683817521-4">]</span><span class="p" data-group-id="7683817521-1">]</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="7683817521-5">[</span><span class="p" data-group-id="7683817521-6">{</span><span class="mi">1</span><span class="p">,</span><span class="ss">a</span><span class="p" data-group-id="7683817521-6">}</span><span class="p">,</span><span class="p" data-group-id="7683817521-7">{</span><span class="mi">1</span><span class="p">,</span><span class="ss">b</span><span class="p" data-group-id="7683817521-7">}</span><span class="p">,</span><span class="p" data-group-id="7683817521-8">{</span><span class="mi">2</span><span class="p">,</span><span class="ss">a</span><span class="p" data-group-id="7683817521-8">}</span><span class="p">,</span><span class="p" data-group-id="7683817521-9">{</span><span class="mi">2</span><span class="p">,</span><span class="ss">b</span><span class="p" data-group-id="7683817521-9">}</span><span class="p">,</span><span class="p" data-group-id="7683817521-10">{</span><span class="mi">3</span><span class="p">,</span><span class="ss">a</span><span class="p" data-group-id="7683817521-10">}</span><span class="p">,</span><span class="p" data-group-id="7683817521-11">{</span><span class="mi">3</span><span class="p">,</span><span class="ss">b</span><span class="p" data-group-id="7683817521-11">}</span><span class="p" data-group-id="7683817521-5">]</span></code></pre><p>Alternatively, two lists can be zipped together using a zip generator as
follows:</p><pre><code class="makeup erlang" translate="no"><span class="gp unselectable">&gt; </span><span class="p" data-group-id="1375644063-1">[</span><span class="p" data-group-id="1375644063-2">{</span><span class="n">X</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="p" data-group-id="1375644063-2">}</span><span class="w"> </span><span class="p">||</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">&lt;:-</span><span class="w"> </span><span class="p" data-group-id="1375644063-3">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p" data-group-id="1375644063-3">]</span><span class="w"> </span><span class="p">&amp;&amp;</span><span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="o">&lt;:-</span><span class="w"> </span><span class="p" data-group-id="1375644063-4">[</span><span class="ss">a</span><span class="p">,</span><span class="ss">b</span><span class="p">,</span><span class="ss">c</span><span class="p" data-group-id="1375644063-4">]</span><span class="p" data-group-id="1375644063-1">]</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="1375644063-5">[</span><span class="p" data-group-id="1375644063-6">{</span><span class="mi">1</span><span class="p">,</span><span class="ss">a</span><span class="p" data-group-id="1375644063-6">}</span><span class="p">,</span><span class="p" data-group-id="1375644063-7">{</span><span class="mi">2</span><span class="p">,</span><span class="ss">b</span><span class="p" data-group-id="1375644063-7">}</span><span class="p">,</span><span class="p" data-group-id="1375644063-8">{</span><span class="mi">3</span><span class="p">,</span><span class="ss">c</span><span class="p" data-group-id="1375644063-8">}</span><span class="p" data-group-id="1375644063-5">]</span></code></pre><section role="note" class="admonition info"><h4 class="admonition-title info">Change</h4><p>Strict generators are used by default in the examples. More details and
comparisons can be found in <a href="#strict-and-relaxed-generators">Strict and Relaxed Generators</a>.</p></section><h2 id="quick-sort" class="section-heading"><a href="#quick-sort" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Quick Sort</span></h2><p>The well-known quick sort routine can be written as follows:</p><pre><code class="makeup erlang" translate="no"><span class="nf">sort</span><span class="p" data-group-id="4930450247-1">(</span><span class="p" data-group-id="4930450247-2">[</span><span class="p" data-group-id="4930450247-2">]</span><span class="p" data-group-id="4930450247-1">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="p" data-group-id="4930450247-3">[</span><span class="p" data-group-id="4930450247-3">]</span><span class="p">;</span><span class="w">
</span><span class="nf">sort</span><span class="p" data-group-id="4930450247-4">(</span><span class="p" data-group-id="4930450247-5">[</span><span class="p">_</span><span class="p" data-group-id="4930450247-5">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">L</span><span class="p" data-group-id="4930450247-4">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="n">L</span><span class="p">;</span><span class="w">
</span><span class="nf">sort</span><span class="p" data-group-id="4930450247-6">(</span><span class="p" data-group-id="4930450247-7">[</span><span class="n">Pivot</span><span class="p">|</span><span class="n">T</span><span class="p" data-group-id="4930450247-7">]</span><span class="p" data-group-id="4930450247-6">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nf">sort</span><span class="p" data-group-id="4930450247-8">(</span><span class="p" data-group-id="4930450247-9">[</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="p">||</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">&lt;:-</span><span class="w"> </span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">Pivot</span><span class="p" data-group-id="4930450247-9">]</span><span class="p" data-group-id="4930450247-8">)</span><span class="w"> </span><span class="o">++</span><span class="w">
    </span><span class="p" data-group-id="4930450247-10">[</span><span class="n">Pivot</span><span class="p" data-group-id="4930450247-10">]</span><span class="w"> </span><span class="o">++</span><span class="w">
    </span><span class="nf">sort</span><span class="p" data-group-id="4930450247-11">(</span><span class="p" data-group-id="4930450247-12">[</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="p">||</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">&lt;:-</span><span class="w"> </span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">Pivot</span><span class="p" data-group-id="4930450247-12">]</span><span class="p" data-group-id="4930450247-11">)</span><span class="p">.</span></code></pre><p>The expression <code class="inline">[X || X &lt;:- T, X &lt; Pivot]</code> is the list of all elements in <code class="inline">T</code>
that are less than <code class="inline">Pivot</code>.</p><p><code class="inline">[X || X &lt;:- T, X &gt;= Pivot]</code> is the list of all elements in <code class="inline">T</code> that are greater
than or equal to <code class="inline">Pivot</code>.</p><p>With the algorithm above, a list is sorted as follows:</p><ul><li>A list with zero or one element is trivially sorted.</li><li>For lists with more than one element:<ol><li>The first element in the list is isolated as the pivot element.</li><li>The remaining list is partitioned into two sublists, such that:</li></ol><ul><li>The first sublist contains all elements that are smaller than the pivot
element.</li><li>The second sublist contains all elements that are greater than or equal to
the pivot element.</li></ul><ol><li>The sublists are recursively sorted by the same algorithm and the results
are combined, resulting in a list consisting of:</li></ol><ul><li>All elements from the first sublist, that is all elements smaller than the
pivot element, in sorted order.</li><li>The pivot element.</li><li>All elements from the second sublist, that is all elements greater than or
equal to the pivot element, in sorted order.</li></ul></li></ul><section role="note" class="admonition info"><h4 class="admonition-title info">Note</h4><p>While the sorting algorithm as shown above serves as a nice example to
illustrate list comprehensions with filters, for real world use cases the
<a href="../apps/stdlib/lists.html"><code class="inline">lists</code></a> module contains sorting functions that are implemented in a more
efficient way.</p></section><h2 id="permutations" class="section-heading"><a href="#permutations" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Permutations</span></h2><p>The following example generates all permutations of the elements in a list:</p><pre><code class="makeup erlang" translate="no"><span class="nf">perms</span><span class="p" data-group-id="9662674220-1">(</span><span class="p" data-group-id="9662674220-2">[</span><span class="p" data-group-id="9662674220-2">]</span><span class="p" data-group-id="9662674220-1">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="p" data-group-id="9662674220-3">[</span><span class="p" data-group-id="9662674220-4">[</span><span class="p" data-group-id="9662674220-4">]</span><span class="p" data-group-id="9662674220-3">]</span><span class="p">;</span><span class="w">
</span><span class="nf">perms</span><span class="p" data-group-id="9662674220-5">(</span><span class="n">L</span><span class="p" data-group-id="9662674220-5">)</span><span class="w">  </span><span class="p">-&gt;</span><span class="w"> </span><span class="p" data-group-id="9662674220-6">[</span><span class="p" data-group-id="9662674220-7">[</span><span class="n">H</span><span class="p">|</span><span class="n">T</span><span class="p" data-group-id="9662674220-7">]</span><span class="w"> </span><span class="p">||</span><span class="w"> </span><span class="n">H</span><span class="w"> </span><span class="o">&lt;:-</span><span class="w"> </span><span class="n">L</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="o">&lt;:-</span><span class="w"> </span><span class="nf">perms</span><span class="p" data-group-id="9662674220-8">(</span><span class="n">L</span><span class="o">--</span><span class="p" data-group-id="9662674220-9">[</span><span class="n">H</span><span class="p" data-group-id="9662674220-9">]</span><span class="p" data-group-id="9662674220-8">)</span><span class="p" data-group-id="9662674220-6">]</span><span class="p">.</span></code></pre><p>This takes <code class="inline">H</code> from <code class="inline">L</code> in all possible ways. The result is the set of all lists
<code class="inline">[H|T]</code>, where <code class="inline">T</code> is the set of all possible permutations of <code class="inline">L</code>, with <code class="inline">H</code>
removed:</p><pre><code class="makeup erlang" translate="no"><span class="gp unselectable">&gt; </span><span class="nf">perms</span><span class="p" data-group-id="2457558025-1">(</span><span class="p" data-group-id="2457558025-2">[</span><span class="ss">b</span><span class="p">,</span><span class="ss">u</span><span class="p">,</span><span class="ss">g</span><span class="p" data-group-id="2457558025-2">]</span><span class="p" data-group-id="2457558025-1">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="2457558025-3">[</span><span class="p" data-group-id="2457558025-4">[</span><span class="ss">b</span><span class="p">,</span><span class="ss">u</span><span class="p">,</span><span class="ss">g</span><span class="p" data-group-id="2457558025-4">]</span><span class="p">,</span><span class="p" data-group-id="2457558025-5">[</span><span class="ss">b</span><span class="p">,</span><span class="ss">g</span><span class="p">,</span><span class="ss">u</span><span class="p" data-group-id="2457558025-5">]</span><span class="p">,</span><span class="p" data-group-id="2457558025-6">[</span><span class="ss">u</span><span class="p">,</span><span class="ss">b</span><span class="p">,</span><span class="ss">g</span><span class="p" data-group-id="2457558025-6">]</span><span class="p">,</span><span class="p" data-group-id="2457558025-7">[</span><span class="ss">u</span><span class="p">,</span><span class="ss">g</span><span class="p">,</span><span class="ss">b</span><span class="p" data-group-id="2457558025-7">]</span><span class="p">,</span><span class="p" data-group-id="2457558025-8">[</span><span class="ss">g</span><span class="p">,</span><span class="ss">b</span><span class="p">,</span><span class="ss">u</span><span class="p" data-group-id="2457558025-8">]</span><span class="p">,</span><span class="p" data-group-id="2457558025-9">[</span><span class="ss">g</span><span class="p">,</span><span class="ss">u</span><span class="p">,</span><span class="ss">b</span><span class="p" data-group-id="2457558025-9">]</span><span class="p" data-group-id="2457558025-3">]</span></code></pre><h2 id="pythagorean-triplets" class="section-heading"><a href="#pythagorean-triplets" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Pythagorean Triplets</span></h2><p>Pythagorean triplets are sets of integers <code class="inline">{A,B,C}</code> such that
<code class="inline">A**2 + B**2 = C**2</code>.</p><p>The function <code class="inline">pyth(N)</code> generates a list of all integers <code class="inline">{A,B,C}</code> such that
<code class="inline">A**2 + B**2 = C**2</code> and where the sum of the sides is equal to, or less than,
<code class="inline">N</code>:</p><pre><code class="makeup erlang" translate="no"><span class="nf">pyth</span><span class="p" data-group-id="2856902637-1">(</span><span class="n">N</span><span class="p" data-group-id="2856902637-1">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="p" data-group-id="2856902637-2">[</span><span class="w"> </span><span class="p" data-group-id="2856902637-3">{</span><span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">,</span><span class="n">C</span><span class="p" data-group-id="2856902637-3">}</span><span class="w"> </span><span class="p">||</span><span class="w">
        </span><span class="n">A</span><span class="w"> </span><span class="o">&lt;:-</span><span class="w"> </span><span class="nc">lists</span><span class="p">:</span><span class="nf">seq</span><span class="p" data-group-id="2856902637-4">(</span><span class="mi">1</span><span class="p">,</span><span class="n">N</span><span class="p" data-group-id="2856902637-4">)</span><span class="p">,</span><span class="w">
        </span><span class="n">B</span><span class="w"> </span><span class="o">&lt;:-</span><span class="w"> </span><span class="nc">lists</span><span class="p">:</span><span class="nf">seq</span><span class="p" data-group-id="2856902637-5">(</span><span class="mi">1</span><span class="p">,</span><span class="n">N</span><span class="p" data-group-id="2856902637-5">)</span><span class="p">,</span><span class="w">
        </span><span class="n">C</span><span class="w"> </span><span class="o">&lt;:-</span><span class="w"> </span><span class="nc">lists</span><span class="p">:</span><span class="nf">seq</span><span class="p" data-group-id="2856902637-6">(</span><span class="mi">1</span><span class="p">,</span><span class="n">N</span><span class="p" data-group-id="2856902637-6">)</span><span class="p">,</span><span class="w">
        </span><span class="n">A</span><span class="o">+</span><span class="n">B</span><span class="o">+</span><span class="n">C</span><span class="w"> </span><span class="o">=&lt;</span><span class="w"> </span><span class="n">N</span><span class="p">,</span><span class="w">
        </span><span class="n">A</span><span class="o">*</span><span class="n">A</span><span class="o">+</span><span class="n">B</span><span class="o">*</span><span class="n">B</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">C</span><span class="o">*</span><span class="n">C</span><span class="w">
    </span><span class="p" data-group-id="2856902637-2">]</span><span class="p">.</span></code></pre><pre><code class="makeup erlang" translate="no"><span class="gp unselectable">&gt; </span><span class="nf">pyth</span><span class="p" data-group-id="7555888849-1">(</span><span class="mi">3</span><span class="p" data-group-id="7555888849-1">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="7555888849-2">[</span><span class="p" data-group-id="7555888849-2">]</span><span class="p">.</span><span class="gp unselectable">
&gt; </span><span class="nf">pyth</span><span class="p" data-group-id="7555888849-3">(</span><span class="mi">11</span><span class="p" data-group-id="7555888849-3">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="7555888849-4">[</span><span class="p" data-group-id="7555888849-4">]</span><span class="p">.</span><span class="gp unselectable">
&gt; </span><span class="nf">pyth</span><span class="p" data-group-id="7555888849-5">(</span><span class="mi">12</span><span class="p" data-group-id="7555888849-5">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="7555888849-6">[</span><span class="p" data-group-id="7555888849-7">{</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p" data-group-id="7555888849-7">}</span><span class="p">,</span><span class="p" data-group-id="7555888849-8">{</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p" data-group-id="7555888849-8">}</span><span class="p" data-group-id="7555888849-6">]</span><span class="gp unselectable">
&gt; </span><span class="nf">pyth</span><span class="p" data-group-id="7555888849-9">(</span><span class="mi">50</span><span class="p" data-group-id="7555888849-9">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="7555888849-10">[</span><span class="p" data-group-id="7555888849-11">{</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p" data-group-id="7555888849-11">}</span><span class="p">,</span><span class="w">
 </span><span class="p" data-group-id="7555888849-12">{</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p" data-group-id="7555888849-12">}</span><span class="p">,</span><span class="w">
 </span><span class="p" data-group-id="7555888849-13">{</span><span class="mi">5</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">13</span><span class="p" data-group-id="7555888849-13">}</span><span class="p">,</span><span class="w">
 </span><span class="p" data-group-id="7555888849-14">{</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">10</span><span class="p" data-group-id="7555888849-14">}</span><span class="p">,</span><span class="w">
 </span><span class="p" data-group-id="7555888849-15">{</span><span class="mi">8</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">10</span><span class="p" data-group-id="7555888849-15">}</span><span class="p">,</span><span class="w">
 </span><span class="p" data-group-id="7555888849-16">{</span><span class="mi">8</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span><span class="mi">17</span><span class="p" data-group-id="7555888849-16">}</span><span class="p">,</span><span class="w">
 </span><span class="p" data-group-id="7555888849-17">{</span><span class="mi">9</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">15</span><span class="p" data-group-id="7555888849-17">}</span><span class="p">,</span><span class="w">
 </span><span class="p" data-group-id="7555888849-18">{</span><span class="mi">12</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">13</span><span class="p" data-group-id="7555888849-18">}</span><span class="p">,</span><span class="w">
 </span><span class="p" data-group-id="7555888849-19">{</span><span class="mi">12</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">15</span><span class="p" data-group-id="7555888849-19">}</span><span class="p">,</span><span class="w">
 </span><span class="p" data-group-id="7555888849-20">{</span><span class="mi">12</span><span class="p">,</span><span class="mi">16</span><span class="p">,</span><span class="mi">20</span><span class="p" data-group-id="7555888849-20">}</span><span class="p">,</span><span class="w">
 </span><span class="p" data-group-id="7555888849-21">{</span><span class="mi">15</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">17</span><span class="p" data-group-id="7555888849-21">}</span><span class="p">,</span><span class="w">
 </span><span class="p" data-group-id="7555888849-22">{</span><span class="mi">16</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">20</span><span class="p" data-group-id="7555888849-22">}</span><span class="p" data-group-id="7555888849-10">]</span></code></pre><p>The following code reduces the search space and is more efficient:</p><pre><code class="makeup erlang" translate="no"><span class="nf">pyth1</span><span class="p" data-group-id="1805090376-1">(</span><span class="n">N</span><span class="p" data-group-id="1805090376-1">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
   </span><span class="p" data-group-id="1805090376-2">[</span><span class="p" data-group-id="1805090376-3">{</span><span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">,</span><span class="n">C</span><span class="p" data-group-id="1805090376-3">}</span><span class="w"> </span><span class="p">||</span><span class="w">
       </span><span class="n">A</span><span class="w"> </span><span class="o">&lt;:-</span><span class="w"> </span><span class="nc">lists</span><span class="p">:</span><span class="nf">seq</span><span class="p" data-group-id="1805090376-4">(</span><span class="mi">1</span><span class="p">,</span><span class="n">N</span><span class="o">-</span><span class="mi">2</span><span class="p" data-group-id="1805090376-4">)</span><span class="p">,</span><span class="w">
       </span><span class="n">B</span><span class="w"> </span><span class="o">&lt;:-</span><span class="w"> </span><span class="nc">lists</span><span class="p">:</span><span class="nf">seq</span><span class="p" data-group-id="1805090376-5">(</span><span class="n">A</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">N</span><span class="o">-</span><span class="mi">1</span><span class="p" data-group-id="1805090376-5">)</span><span class="p">,</span><span class="w">
       </span><span class="n">C</span><span class="w"> </span><span class="o">&lt;:-</span><span class="w"> </span><span class="nc">lists</span><span class="p">:</span><span class="nf">seq</span><span class="p" data-group-id="1805090376-6">(</span><span class="n">B</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">N</span><span class="p" data-group-id="1805090376-6">)</span><span class="p">,</span><span class="w">
       </span><span class="n">A</span><span class="o">+</span><span class="n">B</span><span class="o">+</span><span class="n">C</span><span class="w"> </span><span class="o">=&lt;</span><span class="w"> </span><span class="n">N</span><span class="p">,</span><span class="w">
       </span><span class="n">A</span><span class="o">*</span><span class="n">A</span><span class="o">+</span><span class="n">B</span><span class="o">*</span><span class="n">B</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">C</span><span class="o">*</span><span class="n">C</span><span class="w"> </span><span class="p" data-group-id="1805090376-2">]</span><span class="p">.</span></code></pre><h2 id="simplifications-with-list-comprehensions" class="section-heading"><a href="#simplifications-with-list-comprehensions" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Simplifications With List Comprehensions</span></h2><p>As an example, list comprehensions can be used to simplify some of the functions
in <code class="inline">lists.erl</code>:</p><pre><code class="makeup erlang" translate="no"><span class="nf">append</span><span class="p" data-group-id="0725045157-1">(</span><span class="n">L</span><span class="p" data-group-id="0725045157-1">)</span><span class="w">   </span><span class="p">-&gt;</span><span class="w">  </span><span class="p" data-group-id="0725045157-2">[</span><span class="n">X</span><span class="w"> </span><span class="p">||</span><span class="w"> </span><span class="n">L1</span><span class="w"> </span><span class="o">&lt;:-</span><span class="w"> </span><span class="n">L</span><span class="p">,</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">&lt;:-</span><span class="w"> </span><span class="n">L1</span><span class="p" data-group-id="0725045157-2">]</span><span class="p">.</span><span class="w">
</span><span class="nf">map</span><span class="p" data-group-id="0725045157-3">(</span><span class="n">Fun</span><span class="p">,</span><span class="w"> </span><span class="n">L</span><span class="p" data-group-id="0725045157-3">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="p" data-group-id="0725045157-4">[</span><span class="n">Fun</span><span class="p" data-group-id="0725045157-5">(</span><span class="n">X</span><span class="p" data-group-id="0725045157-5">)</span><span class="w"> </span><span class="p">||</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">&lt;:-</span><span class="w"> </span><span class="n">L</span><span class="p" data-group-id="0725045157-4">]</span><span class="p">.</span><span class="w">
</span><span class="nf">filter</span><span class="p" data-group-id="0725045157-6">(</span><span class="n">Pred</span><span class="p">,</span><span class="w"> </span><span class="n">L</span><span class="p" data-group-id="0725045157-6">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="p" data-group-id="0725045157-7">[</span><span class="n">X</span><span class="w"> </span><span class="p">||</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">&lt;:-</span><span class="w"> </span><span class="n">L</span><span class="p">,</span><span class="w"> </span><span class="n">Pred</span><span class="p" data-group-id="0725045157-8">(</span><span class="n">X</span><span class="p" data-group-id="0725045157-8">)</span><span class="p" data-group-id="0725045157-7">]</span><span class="p">.</span><span class="w">
</span><span class="nf">zip</span><span class="p" data-group-id="0725045157-9">(</span><span class="n">L1</span><span class="p">,</span><span class="w"> </span><span class="n">L2</span><span class="p" data-group-id="0725045157-9">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="p" data-group-id="0725045157-10">[</span><span class="p" data-group-id="0725045157-11">{</span><span class="n">X</span><span class="p">,</span><span class="n">Y</span><span class="p" data-group-id="0725045157-11">}</span><span class="w"> </span><span class="p">||</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">&lt;:-</span><span class="w"> </span><span class="n">L1</span><span class="w"> </span><span class="p">&amp;&amp;</span><span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="o">&lt;:-</span><span class="w"> </span><span class="n">L2</span><span class="p" data-group-id="0725045157-10">]</span><span class="p">.</span></code></pre><h2 id="variable-bindings-in-list-comprehensions" class="section-heading"><a href="#variable-bindings-in-list-comprehensions" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Variable Bindings in List Comprehensions</span></h2><p>The scope rules for variables that occur in list comprehensions are as follows:</p><ul><li>All variables that occur in a generator pattern are assumed to be &quot;fresh&quot;
variables.</li><li>Any variables that are defined before the list comprehension, and that are
used in filters, have the values they had before the list comprehension.</li><li>Variables cannot be exported from a list comprehension.</li><li>Within a zip generator, binding of all variables happen at the same time.</li></ul><p>As an example of these rules, suppose you want to write the function <code class="inline">select</code>,
which selects certain elements from a list of tuples. Suppose you write
<code class="inline">select(X, L) -&gt; [Y || {X, Y} &lt;- L].</code> with the intention of extracting all
tuples from <code class="inline">L</code>, where the first item is <code class="inline">X</code>.</p><p>Compiling this gives the following diagnostic:</p><pre><code class="text">./FileName.erl:Line: Warning: variable 'X' shadowed in generate</code></pre><p>This diagnostic warns that the variable <code class="inline">X</code> in the pattern is not the same as
the variable <code class="inline">X</code> that occurs in the function head.</p><p>Evaluating <code class="inline">select</code> gives the following result:</p><pre><code class="makeup erlang" translate="no"><span class="gp unselectable">&gt; </span><span class="nf">select</span><span class="p" data-group-id="3645659447-1">(</span><span class="ss">b</span><span class="p">,</span><span class="p" data-group-id="3645659447-2">[</span><span class="p" data-group-id="3645659447-3">{</span><span class="ss">a</span><span class="p">,</span><span class="mi">1</span><span class="p" data-group-id="3645659447-3">}</span><span class="p">,</span><span class="p" data-group-id="3645659447-4">{</span><span class="ss">b</span><span class="p">,</span><span class="mi">2</span><span class="p" data-group-id="3645659447-4">}</span><span class="p">,</span><span class="p" data-group-id="3645659447-5">{</span><span class="ss">c</span><span class="p">,</span><span class="mi">3</span><span class="p" data-group-id="3645659447-5">}</span><span class="p">,</span><span class="p" data-group-id="3645659447-6">{</span><span class="ss">b</span><span class="p">,</span><span class="mi">7</span><span class="p" data-group-id="3645659447-6">}</span><span class="p" data-group-id="3645659447-2">]</span><span class="p" data-group-id="3645659447-1">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="3645659447-7">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">7</span><span class="p" data-group-id="3645659447-7">]</span></code></pre><p>This is not the wanted result. To achieve the desired effect, <code class="inline">select</code> must be
written as follows:</p><pre><code class="makeup erlang" translate="no"><span class="nf">select</span><span class="p" data-group-id="1940403747-1">(</span><span class="n">X</span><span class="p">,</span><span class="w"> </span><span class="n">L</span><span class="p" data-group-id="1940403747-1">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">  </span><span class="p" data-group-id="1940403747-2">[</span><span class="n">Y</span><span class="w"> </span><span class="p">||</span><span class="w"> </span><span class="p" data-group-id="1940403747-3">{</span><span class="n">X1</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="p" data-group-id="1940403747-3">}</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">L</span><span class="p">,</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">X1</span><span class="p" data-group-id="1940403747-2">]</span><span class="p">.</span></code></pre><p>The generator now contains unbound variables and the test has been moved into
the filter.</p><p>This now works as expected:</p><pre><code class="makeup erlang" translate="no"><span class="gp unselectable">&gt; </span><span class="nf">select</span><span class="p" data-group-id="4152276488-1">(</span><span class="ss">b</span><span class="p">,</span><span class="p" data-group-id="4152276488-2">[</span><span class="p" data-group-id="4152276488-3">{</span><span class="ss">a</span><span class="p">,</span><span class="mi">1</span><span class="p" data-group-id="4152276488-3">}</span><span class="p">,</span><span class="p" data-group-id="4152276488-4">{</span><span class="ss">b</span><span class="p">,</span><span class="mi">2</span><span class="p" data-group-id="4152276488-4">}</span><span class="p">,</span><span class="p" data-group-id="4152276488-5">{</span><span class="ss">c</span><span class="p">,</span><span class="mi">3</span><span class="p" data-group-id="4152276488-5">}</span><span class="p">,</span><span class="p" data-group-id="4152276488-6">{</span><span class="ss">b</span><span class="p">,</span><span class="mi">7</span><span class="p" data-group-id="4152276488-6">}</span><span class="p" data-group-id="4152276488-2">]</span><span class="p" data-group-id="4152276488-1">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="4152276488-7">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">7</span><span class="p" data-group-id="4152276488-7">]</span></code></pre><p>Also note that a variable in a generator pattern will shadow a variable with the
same name bound in a previous generator pattern. For example:</p><pre><code class="makeup erlang" translate="no"><span class="gp unselectable">&gt; </span><span class="p" data-group-id="6184608046-1">[</span><span class="p" data-group-id="6184608046-2">{</span><span class="n">X</span><span class="p">,</span><span class="n">Y</span><span class="p" data-group-id="6184608046-2">}</span><span class="w"> </span><span class="p">||</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="p" data-group-id="6184608046-3">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p" data-group-id="6184608046-3">]</span><span class="p">,</span><span class="w"> </span><span class="n">X</span><span class="o">=</span><span class="n">Y</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="p" data-group-id="6184608046-4">[</span><span class="ss">a</span><span class="p">,</span><span class="ss">b</span><span class="p">,</span><span class="ss">c</span><span class="p" data-group-id="6184608046-4">]</span><span class="p" data-group-id="6184608046-1">]</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="6184608046-5">[</span><span class="p" data-group-id="6184608046-6">{</span><span class="ss">a</span><span class="p">,</span><span class="ss">a</span><span class="p" data-group-id="6184608046-6">}</span><span class="p">,</span><span class="p" data-group-id="6184608046-7">{</span><span class="ss">b</span><span class="p">,</span><span class="ss">b</span><span class="p" data-group-id="6184608046-7">}</span><span class="p">,</span><span class="p" data-group-id="6184608046-8">{</span><span class="ss">c</span><span class="p">,</span><span class="ss">c</span><span class="p" data-group-id="6184608046-8">}</span><span class="p">,</span><span class="p" data-group-id="6184608046-9">{</span><span class="ss">a</span><span class="p">,</span><span class="ss">a</span><span class="p" data-group-id="6184608046-9">}</span><span class="p">,</span><span class="p" data-group-id="6184608046-10">{</span><span class="ss">b</span><span class="p">,</span><span class="ss">b</span><span class="p" data-group-id="6184608046-10">}</span><span class="p">,</span><span class="p" data-group-id="6184608046-11">{</span><span class="ss">c</span><span class="p">,</span><span class="ss">c</span><span class="p" data-group-id="6184608046-11">}</span><span class="p">,</span><span class="p" data-group-id="6184608046-12">{</span><span class="ss">a</span><span class="p">,</span><span class="ss">a</span><span class="p" data-group-id="6184608046-12">}</span><span class="p">,</span><span class="p" data-group-id="6184608046-13">{</span><span class="ss">b</span><span class="p">,</span><span class="ss">b</span><span class="p" data-group-id="6184608046-13">}</span><span class="p">,</span><span class="p" data-group-id="6184608046-14">{</span><span class="ss">c</span><span class="p">,</span><span class="ss">c</span><span class="p" data-group-id="6184608046-14">}</span><span class="p" data-group-id="6184608046-5">]</span></code></pre><p>A consequence of the rules for importing variables into a list comprehensions is
that certain pattern matching operations must be moved into the filters and
cannot be written directly in the generators.</p><p>To illustrate this, do <em>not</em> write as follows:</p><pre><code class="makeup erlang" translate="no"><span class="nf">f</span><span class="p" data-group-id="0973904872-1">(</span><span class="p">.</span><span class="p">.</span><span class="p">.</span><span class="p" data-group-id="0973904872-1">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="n">Y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">.</span><span class="p">.</span><span class="p">.</span><span class="w">
    </span><span class="p" data-group-id="0973904872-2">[</span><span class="w"> </span><span class="n">Expression</span><span class="w"> </span><span class="p">||</span><span class="w"> </span><span class="n">PatternInvolving</span><span class="w"> </span><span class="n">Y</span><span class="w">  </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">Expr</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="p">.</span><span class="p">.</span><span class="p" data-group-id="0973904872-2">]</span><span class="w">
    </span><span class="p">.</span><span class="p">.</span><span class="p">.</span></code></pre><p>Instead, write as follows:</p><pre><code class="makeup erlang" translate="no"><span class="nf">f</span><span class="p" data-group-id="5848398567-1">(</span><span class="p">.</span><span class="p">.</span><span class="p">.</span><span class="p" data-group-id="5848398567-1">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="n">Y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">.</span><span class="p">.</span><span class="p">.</span><span class="w">
    </span><span class="p" data-group-id="5848398567-2">[</span><span class="w"> </span><span class="n">Expression</span><span class="w"> </span><span class="p">||</span><span class="w"> </span><span class="n">PatternInvolving</span><span class="w"> </span><span class="n">Y1</span><span class="w">  </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">Expr</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Y1</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="p">.</span><span class="p">.</span><span class="p" data-group-id="5848398567-2">]</span><span class="w">
    </span><span class="p">.</span><span class="p">.</span><span class="p">.</span></code></pre><h2 id="strict-and-relaxed-generators" class="section-heading"><a href="#strict-and-relaxed-generators" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Strict and Relaxed Generators</span></h2><p>Strict and relaxed generators have different behaviors when the right-hand
side expression does not match the left-hand side pattern. A relaxed generator
ignores that term and continues on. A strict generator fails with an exception.</p><p>Their difference can be shown in the following example. The generator
expects a two-tuple pattern. If a relaxed generator is used, <code class="inline">b</code> will be
silently skipped. If a strict generator is used, an exception will be raised
when the pattern matching fails with <code class="inline">b</code>.</p><pre><code class="makeup erlang" translate="no"><span class="p" data-group-id="7861582674-1">{</span><span class="p">_</span><span class="p">,</span><span class="p">_</span><span class="p" data-group-id="7861582674-1">}</span><span class="w"> </span><span class="o">&lt;-</span><span class="w">  </span><span class="p" data-group-id="7861582674-2">[</span><span class="p" data-group-id="7861582674-3">{</span><span class="ss">ok</span><span class="p">,</span><span class="w"> </span><span class="ss">a</span><span class="p" data-group-id="7861582674-3">}</span><span class="p">,</span><span class="w"> </span><span class="ss">b</span><span class="p" data-group-id="7861582674-2">]</span><span class="w">
</span><span class="p" data-group-id="7861582674-4">{</span><span class="p">_</span><span class="p">,</span><span class="p">_</span><span class="p" data-group-id="7861582674-4">}</span><span class="w"> </span><span class="o">&lt;:-</span><span class="w"> </span><span class="p" data-group-id="7861582674-5">[</span><span class="p" data-group-id="7861582674-6">{</span><span class="ss">ok</span><span class="p">,</span><span class="w"> </span><span class="ss">a</span><span class="p" data-group-id="7861582674-6">}</span><span class="p">,</span><span class="w"> </span><span class="ss">b</span><span class="p" data-group-id="7861582674-5">]</span></code></pre><p>Semantically, strict or relaxed generators convey different intentions from
the programmer. Strict generators are used when unexpected elements in the
input data should not be tolerated. Any element not conforming to specific
patterns should immediately crash the comprehension, because the program may
not be prepared to handle it.</p><p>For example, the following comprehension is rewritten from one in the Erlang
linter. It extracts arities from all defined functions. All elements in the
list <code class="inline">DefinedFuns</code> are two-tuples, containing name and arity for functions.
If any of them differs from this pattern, it means that something has added
an invalid item into the list of defined functions. It is better for the linter
to crash in the comprehension than skipping the invalid item and continue
running. Using a strict generator here is correct, because the linter should
not hide the presence of an internal inconsistency.</p><pre><code class="makeup erlang" translate="no"><span class="p" data-group-id="0126478674-1">[</span><span class="n">Arity</span><span class="w"> </span><span class="p">||</span><span class="w"> </span><span class="p" data-group-id="0126478674-2">{</span><span class="p">_</span><span class="n">FunName</span><span class="p">,</span><span class="w"> </span><span class="n">Arity</span><span class="p" data-group-id="0126478674-2">}</span><span class="w"> </span><span class="o">&lt;:-</span><span class="w"> </span><span class="n">DefinedFuns</span><span class="p" data-group-id="0126478674-1">]</span></code></pre><p>In contrast, relaxed generators are used when unexpected elements in the input
data should be <em>filtered out</em>. The programmer is aware that some elements
may not conform to specific patterns. Those elements can be safely excluded
from the comprehension result.</p><p>For example, the following comprehension is from a compiler module that
transforms normal Erlang code to Core Erlang. It finds all defined functions
from an abstract form, and output them in two-tuples, each containing name and
arity of a function. Not all forms are function declarations. All the forms
that are not function declarations should be ignored by this comprehensions.
Using a relaxed generator here is correct, because the programmer intends to
exclude all elements with other patterns.</p><pre><code class="makeup erlang" translate="no"><span class="p" data-group-id="5850986605-1">[</span><span class="p" data-group-id="5850986605-2">{</span><span class="n">Name</span><span class="p">,</span><span class="n">Arity</span><span class="p" data-group-id="5850986605-2">}</span><span class="w"> </span><span class="p">||</span><span class="w"> </span><span class="p" data-group-id="5850986605-3">{</span><span class="ss">function</span><span class="p">,</span><span class="p">_</span><span class="p">,</span><span class="n">Name</span><span class="p">,</span><span class="n">Arity</span><span class="p">,</span><span class="p">_</span><span class="p" data-group-id="5850986605-3">}</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">Forms</span><span class="p" data-group-id="5850986605-1">]</span></code></pre><p>Strict and relaxed generators don't always have distinct use cases. When the
left-hand side pattern of a generator is a fresh variable, pattern matching
cannot fail. Using either strict or relaxed generators leads to the same
behavior. While the preference and use cases might be individual, it is
recommended to use strict generators when either can be used. Using strict
generators by default aligns with Erlang's &quot;Let it crash&quot; philosophy.</p>

</div>

<div class="bottom-actions" id="bottom-actions">
  <div class="bottom-actions-item">

      <a href="funs.html" class="bottom-actions-button" rel="prev">
        <span class="subheader">
          â† Previous Page
        </span>
        <span class="title">
Funs
        </span>
      </a>

  </div>
  <div class="bottom-actions-item">

      <a href="bit_syntax.html" class="bottom-actions-button" rel="next">
        <span class="subheader">
          Next Page â†’
        </span>
        <span class="title">
Bit Syntax
        </span>
      </a>

  </div>
</div>
    <footer class="footer">
      <p>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="Erlang System Documentation.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.38.1) for the

          <a href="https://erlang.org" title="Erlang" target="_blank" translate="no">Erlang programming language</a>

      </p>
<p>Copyright Â© 1996-2025 <a href="https://www.ericsson.com">Ericsson AB</a></p>
    </footer>
  </div>
</main>
</div>
  <script defer src="https://cdn.jsdelivr.net/npm/mermaid@11.4.1/dist/mermaid.min.js"></script>
  <script>
  let initialized = false;

  window.addEventListener("exdoc:loaded", () => {
      if (!initialized) {
      mermaid.initialize({
          startOnLoad: false,
          theme: document.body.className.includes("dark") ? "dark" : "default"
      });
      initialized = true;
      }

      let id = 0;
      for (const codeEl of document.querySelectorAll("pre code.mermaid")) {
      const preEl = codeEl.parentElement;
      const graphDefinition = codeEl.textContent;
      const graphEl = document.createElement("div");
      const graphId = "mermaid-graph-" + id++;
      mermaid.render(graphId, graphDefinition).then(({svg, bindFunctions}) => {
          graphEl.innerHTML = svg;
          bindFunctions?.(graphEl);
          preEl.insertAdjacentElement("afterend", graphEl);
          preEl.remove();
      });
      }
  });
  </script>

  </body>
</html>
