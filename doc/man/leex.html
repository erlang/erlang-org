<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html xmlns:erl="http://erlang.org" xmlns:fn="http://www.w3.org/2005/02/xpath-functions">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="utf-8">
<link rel="stylesheet" href="../otp_doc.css" type="text/css">
<title>Erlang -- leex</title>
</head>
<body>
<div id="container">
<script id="js" type="text/javascript" language="JavaScript" src="../js/flipmenu/flipmenu.js"></script><script id="js2" type="text/javascript" src="../js/erlresolvelinks.js"></script><script id="js3" type="text/javascript" src="../../../../doc/js/topbar.js"></script><script language="JavaScript" type="text/javascript">
            <!--
              function setscrollpos() {
                var objf = document.getElementById('loadscrollpos');
                if (objf) {
                  document.getElementById("leftnav").firstChild.scrollTop = objf.offsetTop - 10;
                }
              }

              function addEvent(obj, evType, fn){
                if (obj.addEventListener){
                obj.addEventListener(evType, fn, true);
                return true;
              } else if (obj.attachEvent){
                var r = obj.attachEvent("on"+evType, fn);
                return r;
              } else {
                return false;
              }
             }

             addEvent(window, 'load', setscrollpos);

             //-->
</script><div class="topbar">
<div class="topbar-expand "><button onclick="toggleDisplay();"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="Capa_1" viewBox="0 0 54 54" width="24" height="24"><g><path style="fill:#000000;" d="M27,54c-0.552,0-1-0.448-1-1V8c0-0.552,0.448-1,1-1s1,0.448,1,1v45C28,53.552,27.552,54,27,54z"></path><path style="fill:#000000;" d="M11,25c-0.256,0-0.512-0.098-0.707-0.293c-0.391-0.391-0.391-1.023,0-1.414l16-16                                      c0.391-0.391,1.023-0.391,1.414,0s0.391,1.023,0,1.414l-16,16C11.512,24.902,11.256,25,11,25z"></path><path style="fill:#000000;" d="M43,25c-0.256,0-0.512-0.098-0.707-0.293l-16-16c-0.391-0.391-0.391-1.023,0-1.414                                      s1.023-0.391,1.414,0l16,16c0.391,0.391,0.391,1.023,0,1.414C43.512,24.902,43.256,25,43,25z"></path><path style="fill:#000000;" d="M43,2H11c-0.552,0-1-0.448-1-1s0.448-1,1-1h32c0.552,0,1,0.448,1,1S43.552,2,43,2z"></path></g></svg></button></div>
<div class="topbar-title"><h1 id="leex">leex</h1></div>
<div class="search-expand ">        <button id="docsearch-mobile">
            <svg fill="#000000" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 50 50" width="24" height="24"><path d="M 21 3 C 11.621094 3 4 10.621094 4 20 C 4 29.378906 11.621094 37 21 37 C 24.710938 37 28.140625 35.804688 30.9375 33.78125 L 44.09375 46.90625 L 46.90625 44.09375 L 33.90625 31.0625 C 36.460938 28.085938 38 24.222656 38 20 C 38 10.621094 30.378906 3 21 3 Z M 21 5 C 29.296875 5 36 11.703125 36 20 C 36 28.296875 29.296875 35 21 35 C 12.703125 35 6 28.296875 6 20 C 6 11.703125 12.703125 5 21 5 Z"/></svg>
        </button>
</div>
</div>
<aside class="hide-mobile" id="leftnav"><nav class="leftnav-tube"><div class="erlang-logo-wrapper"><a href="../index.html"><img alt="Erlang Logo" src="../erlang-logo.png" class="erlang-logo"></a></div>
<p class="section-title">Parse Tools</p>
<p class="section-subtitle">Reference Manual</p>
<p class="section-version">Version 2.3.1</p>
<ul class="panel-sections">
<li><a href="../apps/parsetools/index.html">Reference Manual</a></li>
<li><a href="../apps/parsetools/notes.html">Release Notes</a></li>
<li><a href="../apps/parsetools/parsetools.pdf">PDF</a></li>
<li><a href="../index.html">Top</a></li>
</ul>
<div id="docsearch"></div>
<ul class="expand-collapse-items">
<li><a href="javascript:openAllFlips()">Expand All</a></li>
<li><a href="javascript:closeAllFlips()">Contract All</a></li>
</ul>
<h3 id="toc">Table of Contents</h3>
<ul class="flipMenu">
<li id="no" title="yecc " expanded="false">yecc<ul>
<li><a href="yecc.html">
                  Top of manual page
                </a></li>
    <li title="file-1"><a href="yecc.html#file-1">file/1</a></li>
    <li title="file-2"><a href="yecc.html#file-2">file/2</a></li>
    <li title="format_error-1"><a href="yecc.html#format_error-1">format_error/1</a></li>
    </ul>
</li>
<li id="loadscrollpos" title="leex " expanded="true">leex<ul>
<li><a href="leex.html">
                  Top of manual page
                </a></li>
    <li title="file-1"><a href="leex.html#file-1">file/1</a></li>
    <li title="file-2"><a href="leex.html#file-2">file/2</a></li>
    <li title="format_error-1"><a href="leex.html#format_error-1">format_error/1</a></li>
    <li title="Module:string-1"><a href="leex.html#Module:string-1">Module:string/1</a></li>
    <li title="Module:string-2"><a href="leex.html#Module:string-2">Module:string/2</a></li>
    <li title="Module:token-2"><a href="leex.html#Module:token-2">Module:token/2</a></li>
    <li title="Module:token-3"><a href="leex.html#Module:token-3">Module:token/3</a></li>
    <li title="Module:tokens-2"><a href="leex.html#Module:tokens-2">Module:tokens/2</a></li>
    <li title="Module:tokens-3"><a href="leex.html#Module:tokens-3">Module:tokens/3</a></li>
    </ul>
</li>
</ul></nav></aside><div id="content">
<div class="innertube"></div>
<!-- refpage --><div class="innertube"><center><h1>leex</h1></center></div>
  
  <div class="innertube">
<h4 id="module" class="title-link" onMouseOver="document.getElementById('ghlink-module-idm396').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-module-idm396').style.visibility = 'hidden';">
<div class="title-name">Module</div>
<div class="title-anchors"><span id="ghlink-module-idm396" class="ghlink-after"><a href="#module" title="Link to this place!"><span class="paperclip-after"></span></a></span></div>
</h4>
<div class="REFBODY module-body">leex</div>
</div>
  <div class="innertube">
<h4 id="module-summary" class="title-link" onMouseOver="document.getElementById('ghlink-module-summary-idm397').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-module-summary-idm397').style.visibility = 'hidden';">
<div class="title-name">Module Summary</div>
<div class="title-anchors"><span id="ghlink-module-summary-idm397" class="ghlink-after"><a href="#module-summary" title="Link to this place!"><span class="paperclip-after"></span></a></span></div>
</h4>
<div class="REFBODY module-summary-body">Lexical analyzer generator for Erlang</div>
</div>
  <section class="description"><div class="innertube">
<h4 id="description" class="title-link" onMouseOver="document.getElementById('ghlink-description-idm398').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-description-idm398').style.visibility = 'hidden';">
<div class="title-name">Description</div>
<div class="title-anchors"><span id="ghlink-description-idm398" class="ghlink-after"><a href="#description" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/lib/parsetools/doc/src/leex.xml#L26" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h4>
<div class="REFBODY description-body"><p>
    <p>A regular expression based lexical analyzer generator for
      Erlang, similar to lex or flex.</p>
    <div class="note">
<div class="label">Note</div>
<div class="content"><p><p>The Leex module should be considered experimental
      as it will be subject to changes in future releases.</p></p></div>
</div>
  </p></div>
</div></section>

  <div class="innertube">
<h4 id="data-types" class="title-link" onMouseOver="document.getElementById('ghlink-data-types-idm402').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-data-types-idm402').style.visibility = 'hidden';">
<div class="title-name">Data Types</div>
<div class="title-anchors"><span id="ghlink-data-types-idm402" class="ghlink-after"><a href="#data-types" title="Link to this place!"><span class="paperclip-after"></span></a></span></div>
</h4>
    <article class="data-types-body"><h4 id="type-error_info" class="title-link data-type-name" onMouseOver="document.getElementById('ghlink-type-error_info').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-type-error_info').style.visibility = 'hidden';">
<div class="title-anchors"><span id="ghlink-type-error_info" class="ghlink-before"><a href="#type-error_info" title="Link to this place!"><span class="paperclip-before"></span></a><a href="https://github.com/erlang/otp/edit/maint/lib/parsetools/doc/src/leex.xml#L34" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-before"></span></a></span></div>
<div class="title-name">
      <span class="bold_code bc-4"><a name="type-error_info">error_info()</a> = <br>    {<span class="bold_code bc-14"><a href="erl_anno.html#type-line">erl_anno:line()</a></span> | none, module(), ErrorDescriptor :: term()}</span><br>
</div>
</h4>
<div class="data-type-desc"><div class="REFBODY rb-7">
<p>The standard <span class="code">error_info()</span> structure that is returned
        from all I/O modules. <span class="code">ErrorDescriptor</span> is formattable
        by <span class="bold_code bc-17"><a href="#format_error-1"><span class="code">format_error/1</span></a></span>.</p>
      </div></div></article>
  </div>

  <div class="innertube"><h4 id="exports" class="title-link" onMouseOver="document.getElementById('ghlink-exports-idm412').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-exports-idm412').style.visibility = 'hidden';">
<div class="title-name">Exports</div>
<div class="title-anchors"><span id="ghlink-exports-idm412" class="ghlink-after"><a href="#exports" title="Link to this place!"><span class="paperclip-after"></span></a></span></div>
</h4></div>
<div class="exports-body">
<article class="func"><h4 id="file-1" class="bold_code title-link func-head" onMouseOver="document.getElementById('ghlink-file-1-idp4').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-file-1-idp4').style.visibility = 'hidden';">
<div class="title-anchors"><span id="ghlink-file-1-idp4" class="ghlink-before"><a href="#file-1" title="Link to this place!"><span class="paperclip-before"></span></a><a href="https://github.com/erlang/otp/edit/maint/lib/parsetools/doc/src/leex.xml#L44" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-before"></span></a></span></div>
<span class="title-name">file(FileName) -&gt; leex_ret()</span>
</h4>
<h4 id="file-2" class="bold_code title-link func-head" onMouseOver="document.getElementById('ghlink-file-2-idp5').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-file-2-idp5').style.visibility = 'hidden';">
<div class="title-anchors"><span id="ghlink-file-2-idp5" class="ghlink-before"><a href="#file-2" title="Link to this place!"><span class="paperclip-before"></span></a><a href="https://github.com/erlang/otp/edit/maint/lib/parsetools/doc/src/leex.xml#L44" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-before"></span></a></span></div>
<span class="title-name">file(FileName, Options) -&gt; leex_ret()</span><div class="title-since"><span class="since">OTP R16B02</span></div>
</h4>
<div class="REFBODY fun-types">
<h3 id="types" class="func-types-title">Types</h3>
<div class="REFTYPES rt-1"><span class="bold_code bc-2">FileName = <span class="bold_code bc-14"><a href="file.html#type-filename">file:filename()</a></span></span></div>
<div class="REFTYPES rt-1"><span class="bold_code bc-2">Options = Option | [Option]</span></div>
<div class="REFTYPES rt-1"><span class="bold_code bc-2">Option = <br>    {dfa_graph, boolean()} |<br>    {includefile, Includefile :: <span class="bold_code bc-14"><a href="file.html#type-filename">file:filename()</a></span>} |<br>    {report_errors, boolean()} |<br>    {report_warnings, boolean()} |<br>    {report, boolean()} |<br>    {return_errors, boolean()} |<br>    {return_warnings, boolean()} |<br>    {return, boolean()} |<br>    {scannerfile, Scannerfile :: <span class="bold_code bc-14"><a href="file.html#type-filename">file:filename()</a></span>} |<br>    {verbose, boolean()} |<br>    {warnings_as_errors, boolean()} |<br>    dfa_graph | report_errors | report_warnings | report |<br>    return_errors | return_warnings | return | verbose |<br>    warnings_as_errors</span></div>
<div class="REFTYPES rt-2">
      <span class="bold_code bc-5">leex_ret() = ok_ret() | error_ret()</span><br>
</div>
<div class="REFTYPES rt-2">
      <span class="bold_code bc-5">ok_ret() = <br>    {ok, Scannerfile :: <span class="bold_code bc-14"><a href="file.html#type-filename">file:filename()</a></span>} |<br>    {ok, Scannerfile :: <span class="bold_code bc-14"><a href="file.html#type-filename">file:filename()</a></span>, warnings()}</span><br>
</div>
<div class="REFTYPES rt-2">
      <span class="bold_code bc-5">error_ret() = <br>    error | {error, Errors :: errors(), Warnings :: warnings()}</span><br>
</div>
<div class="REFTYPES rt-2">
      <span class="bold_code bc-5">errors() = [{<span class="bold_code bc-14"><a href="file.html#type-filename">file:filename()</a></span>, [<span class="bold_code bc-17"><a href="#type-error_info">error_info()</a></span>]}]</span><br>
</div>
<div class="REFTYPES rt-2">
      <span class="bold_code bc-5">warnings() = [{<span class="bold_code bc-14"><a href="file.html#type-filename">file:filename()</a></span>, [<span class="bold_code bc-17"><a href="#type-error_info">error_info()</a></span>]}]</span><br>
</div>
</div>
<div class="exports-tube"><div class="REFBODY rb-7">
        <p>Generates a lexical analyzer from the definition in the input
          file. The input file has the extension <span class="code">.xrl</span>. This is
          added to the filename if it is not given. The resulting module
          is the Xrl filename without the <span class="code">.xrl</span> extension.</p>

        <p>The current options are:</p>
          <dl>
            <dt><strong><span class="code">dfa_graph</span></strong></dt>
            <dd>
<p>Generates a <span class="code">.dot</span> file which contains a
              description of the DFA in a format which can be viewed with
              Graphviz, <span class="code">www.graphviz.com</span>.</p>
            </dd>
            <dt><strong><span class="code">{includefile,Includefile}</span></strong></dt>
            <dd>
<p>Uses a specific or customised prologue file
              instead of default
              <span class="code">lib/parsetools/include/leexinc.hrl</span> which is
              otherwise included.</p>
            </dd>
            <dt><strong><span class="code">{report_errors, boolean()}</span></strong></dt>
            <dd>
<p>Causes errors to be printed as they occur. Default is
              <span class="code">true</span>.</p>
            </dd>
            <dt><strong><span class="code">{report_warnings, boolean()}</span></strong></dt>
            <dd>
<p>Causes warnings to be printed as they occur. Default is
              <span class="code">true</span>.</p>
            </dd>
            <dt><strong><span class="code">{report, boolean()}</span></strong></dt>
            <dd>
<p>This is a short form for both <span class="code">report_errors</span> and
              <span class="code">report_warnings</span>.</p>
            </dd>
            <dt><strong><span class="code">{return_errors, boolean()}</span></strong></dt>
            <dd>
<p>If this flag is set,
	      <span class="code">{error, Errors, Warnings}</span>
              is returned when there are errors. Default is <span class="code">false</span>.</p>
            </dd>
            <dt><strong><span class="code">{return_warnings, boolean()}</span></strong></dt>
            <dd>
<p>If this flag is set, an extra field containing
              <span class="code">Warnings</span> is added to the tuple returned upon
               success. Default is <span class="code">false</span>.</p>
            </dd>
            <dt><strong><span class="code">{return, boolean()}</span></strong></dt>
            <dd>
<p>This is a short form for both <span class="code">return_errors</span> and
              <span class="code">return_warnings</span>.</p>
            </dd>
            <dt><strong><span class="code">{scannerfile, Scannerfile}</span></strong></dt>
            <dd>
<p><span class="code">Scannerfile</span> is the name of the file that
             will contain the Erlang scanner code that is generated.
             The default (<span class="code">""</span>) is to add the extension
             <span class="code">.erl</span> to <span class="code">FileName</span> stripped of the
             <span class="code">.xrl</span> extension.</p>
            </dd>
            <dt><strong><span class="code">{verbose, boolean()}</span></strong></dt>
            <dd>
<p>Outputs information from parsing the input file and
              generating the internal tables.</p>
            </dd>
            <dt><strong><span class="code">{warnings_as_errors, boolean()}</span></strong></dt>
            <dd>
              <p>Causes warnings to be treated as errors.</p>
            </dd>
          </dl>
        <p>Any of the Boolean options can be set to <span class="code">true</span> by 
          stating the name of the option. For example, <span class="code">verbose</span>
          is equivalent to <span class="code">{verbose, true}</span>.</p>
        <p>Leex will add the extension <span class="code">.hrl</span> to the 
          <span class="code">Includefile</span> name and the extension <span class="code">.erl</span> to the
          <span class="code">Scannerfile</span> name, unless the extension is already
          there.</p>
      </div></div></article><article class="func"><h4 id="format_error-1" class="bold_code title-link func-head" onMouseOver="document.getElementById('ghlink-format_error-1-idp6').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-format_error-1-idp6').style.visibility = 'hidden';">
<div class="title-anchors"><span id="ghlink-format_error-1-idp6" class="ghlink-before"><a href="#format_error-1" title="Link to this place!"><span class="paperclip-before"></span></a><a href="https://github.com/erlang/otp/edit/maint/lib/parsetools/doc/src/leex.xml#L123" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-before"></span></a></span></div>
<span class="title-name">format_error(ErrorDescriptor) -&gt; <span class="bold_code bc-14"><a href="io_lib.html#type-chars">io_lib:chars()</a></span></span>
</h4>
<div class="REFBODY fun-types">
<h3 id="types" class="func-types-title">Types</h3>
<div class="REFTYPES rt-1"><span class="bold_code bc-2">ErrorDescriptor = term()</span></div>
</div>
<div class="exports-tube"><div class="REFBODY rb-7">
        <p>Returns a descriptive string in English of an error reason
        <span class="code">ErrorDescriptor</span> returned by
	<span class="bold_code bc-17"><a href="#file-1"><span class="code">leex:file/1,2</span></a></span>
	when there is an error in a regular expression.</p>
      </div></div></article>
</div>
  

 

  <section class="innertube"><h3 id="generated-scanner-exports" class="title-link" onMouseOver="document.getElementById('ghlink-generated-scanner-exports-idm518').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-generated-scanner-exports-idm518').style.visibility = 'hidden';">
<div class="title-name">GENERATED SCANNER EXPORTS</div>
<div class="title-anchors"><span id="ghlink-generated-scanner-exports-idm518" class="ghlink-after"><a href="#generated-scanner-exports" title="Link to this place!"><span class="paperclip-after"></span></a></span></div>
</h3>
<div class="REFBODY rb-3">
      
      <p>The following functions are exported by the generated scanner.</p>
    </div></section><div class="innertube"><h4 id="exports" class="title-link" onMouseOver="document.getElementById('ghlink-exports-idm517').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-exports-idm517').style.visibility = 'hidden';">
<div class="title-name">Exports</div>
<div class="title-anchors"><span id="ghlink-exports-idm517" class="ghlink-after"><a href="#exports" title="Link to this place!"><span class="paperclip-after"></span></a></span></div>
</h4></div>
<div class="exports-body">
<article class="func"><div class="bold_code func-head"><h4 id="Module:string-1" class="title-link" onMouseOver="document.getElementById('ghlink-Module:string-1-idm522').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-Module:string-1-idm522').style.visibility = 'hidden';">
<div class="title-anchors"><span id="ghlink-Module:string-1-idm522" class="ghlink-before"><a href="#Module:string-1" title="Link to this place!"><span class="paperclip-before"></span></a><a href="https://github.com/erlang/otp/edit/maint/lib/parsetools/doc/src/leex.xml#L143" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-before"></span></a></span></div>
<div class="title-name">Module:string(String) -&gt; StringRet</div>
</h4></div>
<div class="bold_code func-head"><h4 id="Module:string-2" class="title-link" onMouseOver="document.getElementById('ghlink-Module:string-2-idm523').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-Module:string-2-idm523').style.visibility = 'hidden';">
<div class="title-anchors"><span id="ghlink-Module:string-2-idm523" class="ghlink-before"><a href="#Module:string-2" title="Link to this place!"><span class="paperclip-before"></span></a><a href="https://github.com/erlang/otp/edit/maint/lib/parsetools/doc/src/leex.xml#L143" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-before"></span></a></span></div>
<div class="title-name">Module:string(String, StartLine) -&gt; StringRet</div>
</h4></div>
<div class="exports-tube">
<div class="REFBODY rb-5">
<h3 id="types" class="func-types-title">Types</h3>
        <div class="REFTYPES rt-4">
<span class="bold_code fun-param-type">String = string()</span><br>
</div>
        <div class="REFTYPES rt-4">
<span class="bold_code fun-param-type">StringRet = {ok,Tokens,EndLine} | ErrorInfo</span><br>
</div>
        <div class="REFTYPES rt-4">
<span class="bold_code fun-param-type">Tokens = [Token]</span><br>
</div>
        <div class="REFTYPES rt-4">
<span class="bold_code fun-param-type">EndLine = StartLine = erl_anno:line()</span><br>
</div>
      </div>
<div class="REFBODY rb-7">
        <p>Scans <span class="code">String</span> and returns all the tokens in it, or an
          error.</p>
        <div class="note">
<div class="label">Note</div>
<div class="content"><p><p>It is an error if not all of the characters in
          <span class="code">String</span> are consumed.</p></p></div>
</div>
      </div>
</div></article><article class="func"><div class="bold_code func-head"><h4 id="Module:token-2" class="title-link" onMouseOver="document.getElementById('ghlink-Module:token-2-idm537').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-Module:token-2-idm537').style.visibility = 'hidden';">
<div class="title-anchors"><span id="ghlink-Module:token-2-idm537" class="ghlink-before"><a href="#Module:token-2" title="Link to this place!"><span class="paperclip-before"></span></a><a href="https://github.com/erlang/otp/edit/maint/lib/parsetools/doc/src/leex.xml#L161" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-before"></span></a></span></div>
<div class="title-name">Module:token(Cont, Chars) -&gt; {more,Cont1} | {done,TokenRet,RestChars}
      </div>
</h4></div>
<div class="bold_code func-head"><h4 id="Module:token-3" class="title-link" onMouseOver="document.getElementById('ghlink-Module:token-3-idm538').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-Module:token-3-idm538').style.visibility = 'hidden';">
<div class="title-anchors"><span id="ghlink-Module:token-3-idm538" class="ghlink-before"><a href="#Module:token-3" title="Link to this place!"><span class="paperclip-before"></span></a><a href="https://github.com/erlang/otp/edit/maint/lib/parsetools/doc/src/leex.xml#L161" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-before"></span></a></span></div>
<div class="title-name">Module:token(Cont, Chars, StartLine) -&gt; {more,Cont1}
             | {done,TokenRet,RestChars}
      </div>
</h4></div>
<div class="exports-tube">
<div class="REFBODY rb-5">
<h3 id="types" class="func-types-title">Types</h3>
        <div class="REFTYPES rt-4">
<span class="bold_code fun-param-type">Cont = [] | Cont1</span><br>
</div>
        <div class="REFTYPES rt-4">
<span class="bold_code fun-param-type">Cont1 = tuple()</span><br>
</div>
        <div class="REFTYPES rt-4">
<span class="bold_code fun-param-type">Chars = RestChars = string() | eof</span><br>
</div>
        <div class="REFTYPES rt-4">
<span class="bold_code fun-param-type">TokenRet = {ok, Token, EndLine} 
                    | {eof, EndLine}
                    | ErrorInfo</span><br>
</div>
        <div class="REFTYPES rt-4">
<span class="bold_code fun-param-type">StartLine = EndLine = erl_anno:line()</span><br>
</div>
      </div>
<div class="REFBODY rb-7">
        <p>This is a re-entrant call to try and scan one token from
          <span class="code">Chars</span>. If there are enough characters in <span class="code">Chars</span>
          to either scan a token or detect an error then this will be
          returned with <span class="code">{done,...}</span>. Otherwise
          <span class="code">{cont,Cont}</span> will be returned where <span class="code">Cont</span> is
          used in the next call to <span class="code">token()</span> with more characters
          to try an scan the token. This is continued until a token
          has been scanned. <span class="code">Cont</span> is initially <span class="code">[]</span>.</p>
 
        <p>It is not designed to be called directly by an application
          but used through the i/o system where it can typically be
          called in an application by:</p>
        <div class="example example-none"><pre>io:request(InFile, {get_until,unicode,Prompt,Module,token,[Line]})
  -&gt; TokenRet</pre></div>
      </div>
</div></article><article class="func"><div class="bold_code func-head"><h4 id="Module:tokens-2" class="title-link" onMouseOver="document.getElementById('ghlink-Module:tokens-2-idm559').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-Module:tokens-2-idm559').style.visibility = 'hidden';">
<div class="title-anchors"><span id="ghlink-Module:tokens-2-idm559" class="ghlink-before"><a href="#Module:tokens-2" title="Link to this place!"><span class="paperclip-before"></span></a><a href="https://github.com/erlang/otp/edit/maint/lib/parsetools/doc/src/leex.xml#L196" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-before"></span></a></span></div>
<div class="title-name">Module:tokens(Cont, Chars) -&gt; {more,Cont1} | {done,TokensRet,RestChars}
      </div>
</h4></div>
<div class="bold_code func-head"><h4 id="Module:tokens-3" class="title-link" onMouseOver="document.getElementById('ghlink-Module:tokens-3-idm560').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-Module:tokens-3-idm560').style.visibility = 'hidden';">
<div class="title-anchors"><span id="ghlink-Module:tokens-3-idm560" class="ghlink-before"><a href="#Module:tokens-3" title="Link to this place!"><span class="paperclip-before"></span></a><a href="https://github.com/erlang/otp/edit/maint/lib/parsetools/doc/src/leex.xml#L196" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-before"></span></a></span></div>
<div class="title-name">Module:tokens(Cont, Chars, StartLine) -&gt;
               {more,Cont1} | {done,TokensRet,RestChars}
      </div>
</h4></div>
<div class="exports-tube">
<div class="REFBODY rb-5">
<h3 id="types" class="func-types-title">Types</h3>
        <div class="REFTYPES rt-4">
<span class="bold_code fun-param-type">Cont = [] | Cont1</span><br>
</div>
        <div class="REFTYPES rt-4">
<span class="bold_code fun-param-type">Cont1 = tuple()</span><br>
</div>
        <div class="REFTYPES rt-4">
<span class="bold_code fun-param-type">Chars = RestChars = string() | eof</span><br>
</div>
        <div class="REFTYPES rt-4">
<span class="bold_code fun-param-type">TokensRet = {ok, Tokens, EndLine} 
                     | {eof, EndLine}
                     | ErrorInfo</span><br>
</div>
        <div class="REFTYPES rt-4">
<span class="bold_code fun-param-type">Tokens = [Token]</span><br>
</div>
        <div class="REFTYPES rt-4">
<span class="bold_code fun-param-type">StartLine = EndLine = erl_anno:line()</span><br>
</div>
      </div>
<div class="REFBODY rb-7">
        <p>This is a re-entrant call to try and scan tokens from
          <span class="code">Chars</span>. If there are enough characters in <span class="code">Chars</span>
          to either scan tokens or detect an error then this will be
          returned with <span class="code">{done,...}</span>. Otherwise
          <span class="code">{cont,Cont}</span> will be returned where <span class="code">Cont</span> is
          used in the next call to <span class="code">tokens()</span> with more
          characters to try an scan the tokens. This is continued
          until all tokens have been scanned. <span class="code">Cont</span> is initially
          <span class="code">[]</span>.</p>
 
        <p>This functions differs from <span class="code">token</span> in that it will
          continue to scan tokens upto and including an
          <span class="code">{end_token,Token}</span> has been scanned (see next
          section). It will then return all the tokens. This is
          typically used for scanning grammars like Erlang where there
          is an explicit end token, <span class="code">'.'</span>. If no end token is
          found then the whole file will be scanned and returned. If
          an error occurs then all tokens upto and including the next
          end token will be skipped.</p>
 
        <p>It is not designed to be called directly by an application
          but used through the i/o system where it can typically be
          called in an application by:</p>
        <div class="example example-none"><pre>io:request(InFile, {get_until,unicode,Prompt,Module,tokens,[Line]})
  -&gt; TokensRet</pre></div>
      </div>
</div></article>
</div>

  <section class="innertube"><h3 id="default-leex-options" class="title-link" onMouseOver="document.getElementById('ghlink-default-leex-options-idm585').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-default-leex-options-idm585').style.visibility = 'hidden';">
<div class="title-name">Default Leex Options</div>
<div class="title-anchors"><span id="ghlink-default-leex-options-idm585" class="ghlink-after"><a href="#default-leex-options" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/lib/parsetools/doc/src/leex.xml#L244" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
<div class="REFBODY rb-3">
    
    <p>The (host operating system) environment variable
      <span class="code">ERL_COMPILER_OPTIONS</span> can be used to give default Leex
      options. Its value must be a valid Erlang term. If the value is a
      list, it is used as is. If it is not a list, it is put
      into a list.</p>

      <p>The list is appended to any options given to
      <span class="bold_code bc-17"><a href="#file-2">file/2</a></span>.</p>

      <p>The list can be retrieved with
      <span class="bold_code bc-13"><a href="compile.html#env_compiler_options-0">
      compile:env_compiler_options/0</a></span>.</p>
  </div></section>

  <section class="innertube"><h3 id="input-file-format" class="title-link" onMouseOver="document.getElementById('ghlink-input-file-format-idm593').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-input-file-format-idm593').style.visibility = 'hidden';">
<div class="title-name">Input File Format</div>
<div class="title-anchors"><span id="ghlink-input-file-format-idm593" class="ghlink-after"><a href="#input-file-format" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/lib/parsetools/doc/src/leex.xml#L260" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
<div class="REFBODY rb-3">
    
    <p>Erlang style comments starting with a <span class="code">%</span> are allowed in
      scanner files. A definition file has the following format:</p>
    <div class="example example-none"><pre>&lt;Header&gt;

Definitions.

&lt;Macro Definitions&gt;

Rules.

&lt;Token Rules&gt;

Erlang code.

&lt;Erlang code&gt;</pre></div>
 
    <p>The "Definitions.", "Rules." and "Erlang code." headings are
      mandatory and must occur at the beginning of a source line. The
      &lt;Header&gt;, &lt;Macro Definitions&gt; and &lt;Erlang code&gt;
      sections may be empty but there must be at least one rule.</p>
 
    <p>Macro definitions have the following format:</p>

    <div class="example example-none"><pre>NAME = VALUE</pre></div>

    <p>and there must be spaces around <span class="code">=</span>. Macros can be used in
      the regular expressions of rules by writing <span class="code">{NAME}</span>.</p>

    <div class="note">
<div class="label">Note</div>
<div class="content"><p><p>When macros are expanded in expressions the macro calls
      are replaced by the macro value without any form of quoting or
      enclosing in parentheses.</p></p></div>
</div>
 
    <p>Rules have the following format:</p>

    <div class="example example-none"><pre>&lt;Regexp&gt; : &lt;Erlang code&gt;.</pre></div>
 
    <p>The &lt;Regexp&gt; must occur at the start of a line and not
      include any blanks; use <span class="code">\t</span> and <span class="code">\s</span> to include TAB
      and SPACE characters in the regular expression. If &lt;Regexp&gt;
      matches then the corresponding &lt;Erlang code&gt; is evaluated to
      generate a token. With the Erlang code the following predefined
      variables are available:</p>
 
    <dl>
      <dt><strong><span class="code">TokenChars</span></strong></dt>
      <dd>
<p>A list of the characters in the matched token.</p>
      </dd>
      <dt><strong><span class="code">TokenLen</span></strong></dt>
      <dd>
<p>The number of characters in the matched token.</p>
      </dd>
      <dt><strong><span class="code">TokenLine</span></strong></dt>
      <dd>
<p>The line number where the token occurred.</p>
      </dd>
    </dl>
 
    <p>The code must return:</p>
 
    <dl>
      <dt><strong><span class="code">{token,Token}</span></strong></dt>
      <dd>
<p>Return <span class="code">Token</span> to the caller.</p>
      </dd>
      <dt><strong><span class="code">{end_token,Token}</span></strong></dt>
      <dd>
<p>Return <span class="code">Token</span> and is last token in a tokens call.</p>
      </dd>
      <dt><strong><span class="code">skip_token</span></strong></dt>
      <dd>
<p>Skip this token completely.</p>
      </dd>
      <dt><strong><span class="code">{error,ErrString}</span></strong></dt>
      <dd>
<p>An error in the token, <span class="code">ErrString</span> is a string
         describing the error.</p>
      </dd>
    </dl>
 
    <p>It is also possible to push back characters into the input
      characters with the following returns:</p>
 
    <ul>
      <li><span class="code">{token,Token,PushBackList}</span></li>
      <li><span class="code">{end_token,Token,PushBackList}</span></li>
      <li><span class="code">{skip_token,PushBackList}</span></li>
    </ul>
 
    <p>These have the same meanings as the normal returns but the
      characters in <span class="code">PushBackList</span> will be prepended to the input
      characters and scanned for the next token. Note that pushing
      back a newline will mean the line numbering will no longer be
      correct.</p>

    <div class="note">
<div class="label">Note</div>
<div class="content"><p><p>Pushing back characters gives you unexpected
      possibilities to cause the scanner to loop!</p></p></div>
</div>
 
    <p>The following example would match a simple Erlang integer or
      float and return a token which could be sent to the Erlang
      parser:</p>
    <div class="example example-none"><pre>D = [0-9]

{D}+ :
  {token,{integer,TokenLine,list_to_integer(TokenChars)}}.

{D}+\.{D}+((E|e)(\+|\-)?{D}+)? :
  {token,{float,TokenLine,list_to_float(TokenChars)}}.</pre></div>
 
    <p>The Erlang code in the "Erlang code." section is written into
      the output file directly after the module declaration and
      predefined exports declaration so it is possible to add extra
      exports, define imports and other attributes which are then
      visible in the whole file.</p>
  </div></section>
  
  <section class="innertube"><h3 id="regular-expressions" class="title-link" onMouseOver="document.getElementById('ghlink-regular-expressions-idm660').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-regular-expressions-idm660').style.visibility = 'hidden';">
<div class="title-name">Regular Expressions</div>
<div class="title-anchors"><span id="ghlink-regular-expressions-idm660" class="ghlink-after"><a href="#regular-expressions" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/lib/parsetools/doc/src/leex.xml#L375" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
<div class="REFBODY rb-3">
    
 
    <p>The regular expressions allowed here is a subset of the set
      found in <span class="code">egrep</span> and in the AWK programming language, as
      defined in the book, The AWK Programming Language, by A. V. Aho,
      B. W. Kernighan, P. J. Weinberger. They are composed of the
      following characters:</p>
 
    <dl>
      <dt><strong><span class="code">c</span></strong></dt>
      <dd>
<p>Matches the non-metacharacter c.</p>
      </dd>
      <dt><strong><span class="code">\c</span></strong></dt>
      <dd>
<p>Matches the escape sequence or literal character c.</p>
      </dd>
      <dt><strong><span class="code">.</span></strong></dt>
      <dd>
<p>Matches any character.</p>
      </dd>
      <dt><strong><span class="code">^</span></strong></dt>
      <dd>
<p>Matches the beginning of a string.</p>
      </dd>
      <dt><strong><span class="code">$</span></strong></dt>
      <dd><p>Matches the end of a string.</p></dd>
      <dt><strong><span class="code">[abc...]</span></strong></dt>
      <dd>
<p>Character class, which matches any of the characters
        <span class="code">abc...</span>. Character ranges are specified by a pair of
        characters separated by a <span class="code">-</span>.</p>
      </dd>
      <dt><strong><span class="code">[^abc...]</span></strong></dt>
      <dd>
<p>Negated character class, which matches any character
        except <span class="code">abc...</span>.</p>
      </dd>
      <dt><strong><span class="code">r1 | r2</span></strong></dt>
      <dd>
<p>Alternation. It matches either <span class="code">r1</span> or <span class="code">r2</span>.</p>
      </dd>
      <dt><strong><span class="code">r1r2</span></strong></dt>
      <dd>
<p>Concatenation. It matches <span class="code">r1</span> and then <span class="code">r2</span>.</p>
      </dd>
      <dt><strong><span class="code">r+</span></strong></dt>
      <dd>
<p>Matches one or more <span class="code">rs</span>.</p>
      </dd>
      <dt><strong><span class="code">r*</span></strong></dt>
      <dd>
<p>Matches zero or more <span class="code">rs</span>.</p>
      </dd>
      <dt><strong><span class="code">r?</span></strong></dt>
      <dd>
<p>Matches zero or one <span class="code">rs</span>.</p>
      </dd>
      <dt><strong><span class="code">(r)</span></strong></dt>
      <dd>
<p>Grouping. It matches <span class="code">r</span>.</p>
      </dd>
    </dl>
 
    <p>The escape sequences allowed are the same as for Erlang strings:</p>

    <dl>
      <dt><strong><span class="code">\b</span></strong></dt>
      <dd><p>Backspace.</p></dd>
      <dt><strong><span class="code">\f</span></strong></dt>
      <dd><p>Form feed.</p></dd>
      <dt><strong><span class="code">\n</span></strong></dt>
      <dd><p>Newline (line feed).</p></dd>
      <dt><strong><span class="code">\r</span></strong></dt>
      <dd><p>Carriage return.</p></dd>
      <dt><strong><span class="code">\t</span></strong></dt>
      <dd><p>Tab.</p></dd>
      <dt><strong><span class="code">\e</span></strong></dt>
      <dd><p>Escape.</p></dd>
      <dt><strong><span class="code">\v</span></strong></dt>
      <dd><p>Vertical tab.</p></dd>
      <dt><strong><span class="code">\s</span></strong></dt>
      <dd><p>Space.</p></dd>
      <dt><strong><span class="code">\d</span></strong></dt>
      <dd><p>Delete.</p></dd>
      <dt><strong><span class="code">\ddd</span></strong></dt>
      <dd><p>The octal value <span class="code">ddd</span>.</p></dd>
      <dt><strong><span class="code">\xhh</span></strong></dt>
      <dd><p>The hexadecimal value <span class="code">hh</span>.</p></dd>
      <dt><strong><span class="code">\x{h...}</span></strong></dt>
      <dd><p>The hexadecimal value <span class="code">h...</span>.</p></dd>
      <dt><strong><span class="code">\c</span></strong></dt>
      <dd>
<p>Any other character literally, for example <span class="code">\\</span> for
        backslash, <span class="code">\"</span> for <span class="code">"</span>.</p>
      </dd>
    </dl>
 
    <p>The following examples define simplified versions of a few
      Erlang data types:</p>
    <div class="example example-none"><pre>Atoms [a-z][0-9a-zA-Z_]*

Variables [A-Z_][0-9a-zA-Z_]*

Floats (\+|-)?[0-9]+\.[0-9]+((E|e)(\+|-)?[0-9]+)?</pre></div>
 
    <div class="note">
<div class="label">Note</div>
<div class="content"><p><p>Anchoring a regular expression with <span class="code">^</span> and <span class="code">$</span>
      is not implemented in the current version of Leex and just
      generates a parse error.</p></p></div>
</div>
  </div></section>
<div class="footer">
<hr>
<p>Copyright © 1997-2021 Ericsson AB. All Rights Reserved.</p>
</div>
</div>
</div>
<script type="text/javascript">window.__otpTopDocDir = '../js/';</script><script type="text/javascript" src="../js/highlight.js"></script>
<script src="/assets/js/doc-search.bundle.js"></script>
</body>
</html>
