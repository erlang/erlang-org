<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html xmlns:erl="http://erlang.org" xmlns:fn="http://www.w3.org/2005/02/xpath-functions">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="utf-8">
<link rel="stylesheet" href="../otp_doc.css" type="text/css">
<title>Erlang -- Expressions</title>
</head>
<body>
<div id="container">
<script id="js" type="text/javascript" language="JavaScript" src="../js/flipmenu/flipmenu.js"></script><script id="js2" type="text/javascript" src="../js/erlresolvelinks.js"></script><script id="js3" type="text/javascript" src="../js/topbar.js"></script><script language="JavaScript" type="text/javascript">
            <!--
              function setscrollpos() {
                var objf = document.getElementById('loadscrollpos');
                if (objf) {
                  document.getElementById("leftnav").firstChild.scrollTop = objf.offsetTop - 10;
                }
              }

              function addEvent(obj, evType, fn){
                if (obj.addEventListener){
                obj.addEventListener(evType, fn, true);
                return true;
              } else if (obj.attachEvent){
                var r = obj.attachEvent("on"+evType, fn);
                return r;
              } else {
                return false;
              }
             }

             addEvent(window, 'load', setscrollpos);

             //-->
</script><div class="topbar">
<div class="topbar-expand "><button onclick="toggleDisplay();"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="Capa_1" viewBox="0 0 54 54" width="24" height="24"><g><path style="fill:#000000;" d="M27,54c-0.552,0-1-0.448-1-1V8c0-0.552,0.448-1,1-1s1,0.448,1,1v45C28,53.552,27.552,54,27,54z"></path><path style="fill:#000000;" d="M11,25c-0.256,0-0.512-0.098-0.707-0.293c-0.391-0.391-0.391-1.023,0-1.414l16-16                                      c0.391-0.391,1.023-0.391,1.414,0s0.391,1.023,0,1.414l-16,16C11.512,24.902,11.256,25,11,25z"></path><path style="fill:#000000;" d="M43,25c-0.256,0-0.512-0.098-0.707-0.293l-16-16c-0.391-0.391-0.391-1.023,0-1.414                                      s1.023-0.391,1.414,0l16,16c0.391,0.391,0.391,1.023,0,1.414C43.512,24.902,43.256,25,43,25z"></path><path style="fill:#000000;" d="M43,2H11c-0.552,0-1-0.448-1-1s0.448-1,1-1h32c0.552,0,1,0.448,1,1S43.552,2,43,2z"></path></g></svg></button></div>
<div class="topbar-title"><h1 id="Expressions">8 
                Expressions</h1></div>
<div class="search-expand ">        <button id="docsearch-mobile">
            <svg fill="#000000" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 50 50" width="24" height="24"><path d="M 21 3 C 11.621094 3 4 10.621094 4 20 C 4 29.378906 11.621094 37 21 37 C 24.710938 37 28.140625 35.804688 30.9375 33.78125 L 44.09375 46.90625 L 46.90625 44.09375 L 33.90625 31.0625 C 36.460938 28.085938 38 24.222656 38 20 C 38 10.621094 30.378906 3 21 3 Z M 21 5 C 29.296875 5 36 11.703125 36 20 C 36 28.296875 29.296875 35 21 35 C 12.703125 35 6 28.296875 6 20 C 6 11.703125 12.703125 5 21 5 Z"/></svg>
        </button>
</div>
</div>
<aside class="hide-mobile" id="leftnav"><nav class="leftnav-tube"><div class="erlang-logo-wrapper"><a href="../index.html"><img alt="Erlang Logo" src="../erlang-logo.png" class="erlang-logo"></a></div>
<p class="section-title">Erlang Reference Manual</p>
<p class="section-subtitle">User's Guide</p>
<p class="section-version">Version 12.1.2</p>
<ul class="panel-sections">
<li><a href="users_guide.html">User's Guide</a></li>
<li><a href="../pdf/otp-system-documentation.pdf">PDF</a></li>
<li><a href="../index.html">Top</a></li>
</ul>
<div id="docsearch"></div>
<ul class="expand-collapse-items">
<li><a href="javascript:openAllFlips()">Expand All</a></li>
<li><a href="javascript:closeAllFlips()">Contract All</a></li>
</ul>
<h3 id="chapters">Chapters</h3>
<ul class="flipMenu" imagePath="../js/flipmenu">
<li id="no" title="Introduction" expanded="false">Introduction<ul>
<li><a href="introduction.html">
              Top of chapter
            </a></li>
<li title="Purpose"><a href="introduction.html#purpose">Purpose</a></li>
<li title="Prerequisites"><a href="introduction.html#prerequisites">Prerequisites</a></li>
<li title="Document Conventions"><a href="introduction.html#document-conventions">Document Conventions</a></li>
<li title="Complete List of BIFs"><a href="introduction.html#complete-list-of-bifs">Complete List of BIFs</a></li>
<li title="Reserved Words"><a href="introduction.html#reserved-words">Reserved Words</a></li>
</ul>
</li>
<li id="no" title="Character Set and Source File Encoding" expanded="false">Character Set and Source File Encoding<ul>
<li><a href="character_set.html">
              Top of chapter
            </a></li>
<li title="Character Set"><a href="character_set.html#character-set">Character Set</a></li>
<li title="Source File Encoding"><a href="character_set.html#source-file-encoding">Source File Encoding</a></li>
</ul>
</li>
<li id="no" title="Data Types" expanded="false">Data Types<ul>
<li><a href="data_types.html">
              Top of chapter
            </a></li>
<li title="Terms"><a href="data_types.html#terms">Terms</a></li>
<li title="Number"><a href="data_types.html#number">Number</a></li>
<li title="Atom"><a href="data_types.html#atom">Atom</a></li>
<li title="Bit Strings and Binaries"><a href="data_types.html#bit-strings-and-binaries">Bit Strings and Binaries</a></li>
<li title="Reference"><a href="data_types.html#reference">Reference</a></li>
<li title="Fun"><a href="data_types.html#fun">Fun</a></li>
<li title="Port Identifier"><a href="data_types.html#port-identifier">Port Identifier</a></li>
<li title="PID"><a href="data_types.html#pid">PID</a></li>
<li title="Tuple"><a href="data_types.html#tuple">Tuple</a></li>
<li title="Map"><a href="data_types.html#map">Map</a></li>
<li title="List"><a href="data_types.html#list">List</a></li>
<li title="String"><a href="data_types.html#string">String</a></li>
<li title="Record"><a href="data_types.html#record">Record</a></li>
<li title="Boolean"><a href="data_types.html#boolean">Boolean</a></li>
<li title="Escape Sequences"><a href="data_types.html#escape-sequences">Escape Sequences</a></li>
<li title="Type Conversions"><a href="data_types.html#type-conversions">Type Conversions</a></li>
</ul>
</li>
<li id="no" title="Pattern Matching" expanded="false">Pattern Matching<ul>
<li><a href="patterns.html">
              Top of chapter
            </a></li>
<li title="Pattern Matching"><a href="patterns.html#pattern-matching">Pattern Matching</a></li>
</ul>
</li>
<li id="no" title="Modules" expanded="false">Modules<ul>
<li><a href="modules.html">
              Top of chapter
            </a></li>
<li title="Module Syntax"><a href="modules.html#module-syntax">Module Syntax</a></li>
<li title="Module Attributes"><a href="modules.html#module-attributes">Module Attributes</a></li>
<li title="Comments"><a href="modules.html#comments">Comments</a></li>
<li title="module_info/0 and module_info/1 functions"><a href="modules.html#module_info-0-and-module_info-1-functions">module_info/0 and module_info/1 functions</a></li>
</ul>
</li>
<li id="no" title="Functions" expanded="false">Functions<ul>
<li><a href="functions.html">
              Top of chapter
            </a></li>
<li title="Function Declaration Syntax"><a href="functions.html#function-declaration-syntax">Function Declaration Syntax</a></li>
<li title="Function Evaluation"><a href="functions.html#function-evaluation">Function Evaluation</a></li>
<li title="Tail recursion"><a href="functions.html#tail-recursion">Tail recursion</a></li>
<li title="Built-In Functions (BIFs)"><a href="functions.html#built-in-functions--bifs-">Built-In Functions (BIFs)</a></li>
</ul>
</li>
<li id="no" title="Types and Function Specifications" expanded="false">Types and Function Specifications<ul>
<li><a href="typespec.html">
              Top of chapter
            </a></li>
<li title="The Erlang Type Language"><a href="typespec.html#the-erlang-type-language">The Erlang Type Language</a></li>
<li title="Types and their Syntax"><a href="typespec.html#types-and-their-syntax">Types and their Syntax</a></li>
<li title="Type Declarations of User-Defined Types"><a href="typespec.html#type-declarations-of-user-defined-types">Type Declarations of User-Defined Types</a></li>
<li title="Type Information in Record Declarations"><a href="typespec.html#type-information-in-record-declarations">Type Information in Record Declarations</a></li>
<li title="Specifications for Functions"><a href="typespec.html#specifications-for-functions">Specifications for Functions</a></li>
</ul>
</li>
<li id="loadscrollpos" title="Expressions" expanded="true">Expressions<ul>
<li><a href="expressions.html">
              Top of chapter
            </a></li>
<li title="Expression Evaluation"><a href="expressions.html#expression-evaluation">Expression Evaluation</a></li>
<li title="Terms"><a href="expressions.html#terms">Terms</a></li>
<li title="Variables"><a href="expressions.html#variables">Variables</a></li>
<li title="Patterns"><a href="expressions.html#patterns">Patterns</a></li>
<li title="Match"><a href="expressions.html#match">Match</a></li>
<li title="Function Calls"><a href="expressions.html#function-calls">Function Calls</a></li>
<li title="If"><a href="expressions.html#if">If</a></li>
<li title="Case"><a href="expressions.html#case">Case</a></li>
<li title="Send"><a href="expressions.html#send">Send</a></li>
<li title="Receive"><a href="expressions.html#receive">Receive</a></li>
<li title="Term Comparisons"><a href="expressions.html#term-comparisons">Term Comparisons</a></li>
<li title="Arithmetic Expressions"><a href="expressions.html#arithmetic-expressions">Arithmetic Expressions</a></li>
<li title="Boolean Expressions"><a href="expressions.html#boolean-expressions">Boolean Expressions</a></li>
<li title="Short-Circuit Expressions"><a href="expressions.html#short-circuit-expressions">Short-Circuit Expressions</a></li>
<li title="List Operations"><a href="expressions.html#list-operations">List Operations</a></li>
<li title="Map Expressions"><a href="expressions.html#map-expressions">Map Expressions</a></li>
<li title="Bit Syntax Expressions"><a href="expressions.html#bit-syntax-expressions">Bit Syntax Expressions</a></li>
<li title="Fun Expressions"><a href="expressions.html#fun-expressions">Fun Expressions</a></li>
<li title="Catch and Throw"><a href="expressions.html#catch-and-throw">Catch and Throw</a></li>
<li title="Try"><a href="expressions.html#try">Try</a></li>
<li title="Parenthesized Expressions"><a href="expressions.html#parenthesized-expressions">Parenthesized Expressions</a></li>
<li title="Block Expressions"><a href="expressions.html#block-expressions">Block Expressions</a></li>
<li title="List Comprehensions"><a href="expressions.html#list-comprehensions">List Comprehensions</a></li>
<li title="Bit String Comprehensions"><a href="expressions.html#bit-string-comprehensions">Bit String Comprehensions</a></li>
<li title="Guard Sequences"><a href="expressions.html#guard-sequences">Guard Sequences</a></li>
<li title="Guard Expressions"><a href="expressions.html#guard-expressions">Guard Expressions</a></li>
<li title="Operator Precedence"><a href="expressions.html#operator-precedence">Operator Precedence</a></li>
</ul>
</li>
<li id="no" title="Preprocessor" expanded="false">Preprocessor<ul>
<li><a href="macros.html">
              Top of chapter
            </a></li>
<li title="File Inclusion"><a href="macros.html#file-inclusion">File Inclusion</a></li>
<li title="Defining and Using Macros"><a href="macros.html#defining-and-using-macros">Defining and Using Macros</a></li>
<li title="Predefined Macros"><a href="macros.html#predefined-macros">Predefined Macros</a></li>
<li title="Macros Overloading"><a href="macros.html#macros-overloading">Macros Overloading</a></li>
<li title="Flow Control in Macros"><a href="macros.html#flow-control-in-macros">Flow Control in Macros</a></li>
<li title="-error() and -warning() directives"><a href="macros.html#-error---and--warning---directives">-error() and -warning() directives</a></li>
<li title="Stringifying Macro Arguments"><a href="macros.html#stringifying-macro-arguments">Stringifying Macro Arguments</a></li>
</ul>
</li>
<li id="no" title="Records" expanded="false">Records<ul>
<li><a href="records.html">
              Top of chapter
            </a></li>
<li title="Defining Records"><a href="records.html#defining-records">Defining Records</a></li>
<li title="Creating Records"><a href="records.html#creating-records">Creating Records</a></li>
<li title="Accessing Record Fields"><a href="records.html#accessing-record-fields">Accessing Record Fields</a></li>
<li title="Updating Records"><a href="records.html#updating-records">Updating Records</a></li>
<li title="Records in Guards"><a href="records.html#records-in-guards">Records in Guards</a></li>
<li title="Records in Patterns"><a href="records.html#records-in-patterns">Records in Patterns</a></li>
<li title="Nested Records"><a href="records.html#nested-records">Nested Records</a></li>
<li title="Internal Representation of Records"><a href="records.html#internal-representation-of-records">Internal Representation of Records</a></li>
</ul>
</li>
<li id="no" title="Errors and Error Handling" expanded="false">Errors and Error Handling<ul>
<li><a href="errors.html">
              Top of chapter
            </a></li>
<li title="Terminology"><a href="errors.html#terminology">Terminology</a></li>
<li title="Exceptions"><a href="errors.html#exceptions">Exceptions</a></li>
<li title="Handling of Run-time Errors in Erlang"><a href="errors.html#handling-of-run-time-errors-in-erlang">Handling of Run-time Errors in Erlang</a></li>
<li title="Exit Reasons"><a href="errors.html#exit-reasons">Exit Reasons</a></li>
</ul>
</li>
<li id="no" title="Processes" expanded="false">Processes<ul>
<li><a href="processes.html">
              Top of chapter
            </a></li>
<li title="Processes"><a href="processes.html#processes">Processes</a></li>
<li title="Process Creation"><a href="processes.html#process-creation">Process Creation</a></li>
<li title="Registered Processes"><a href="processes.html#registered-processes">Registered Processes</a></li>
<li title="Process Aliases"><a href="processes.html#process-aliases">Process Aliases</a></li>
<li title="Process Termination"><a href="processes.html#process-termination">Process Termination</a></li>
<li title="Signals"><a href="processes.html#signals">Signals</a></li>
<li title="Links"><a href="processes.html#links">Links</a></li>
<li title="Error Handling"><a href="processes.html#error-handling">Error Handling</a></li>
<li title="Monitors"><a href="processes.html#monitors">Monitors</a></li>
<li title="Process Dictionary"><a href="processes.html#process-dictionary">Process Dictionary</a></li>
</ul>
</li>
<li id="no" title="Distributed Erlang" expanded="false">Distributed Erlang<ul>
<li><a href="distributed.html">
              Top of chapter
            </a></li>
<li title="Distributed Erlang System"><a href="distributed.html#distributed-erlang-system">Distributed Erlang System</a></li>
<li title="Nodes"><a href="distributed.html#nodes">Nodes</a></li>
<li title="Node Connections"><a href="distributed.html#node-connections">Node Connections</a></li>
<li title="epmd"><a href="distributed.html#epmd">epmd</a></li>
<li title="Hidden Nodes"><a href="distributed.html#hidden-nodes">Hidden Nodes</a></li>
<li title="C Nodes"><a href="distributed.html#c-nodes">C Nodes</a></li>
<li title="Security"><a href="distributed.html#security">Security</a></li>
<li title="Distribution BIFs"><a href="distributed.html#distribution-bifs">Distribution BIFs</a></li>
<li title="Distribution Command-Line Flags"><a href="distributed.html#distribution-command-line-flags">Distribution Command-Line Flags</a></li>
<li title="Distribution Modules"><a href="distributed.html#distribution-modules">Distribution Modules</a></li>
</ul>
</li>
<li id="no" title="Compilation and Code Loading" expanded="false">Compilation and Code Loading<ul>
<li><a href="code_loading.html">
              Top of chapter
            </a></li>
<li title="Compilation"><a href="code_loading.html#compilation">Compilation</a></li>
<li title="Code Loading"><a href="code_loading.html#code-loading">Code Loading</a></li>
<li title="Code Replacement"><a href="code_loading.html#code-replacement">Code Replacement</a></li>
<li title="Running a Function When a Module is Loaded"><a href="code_loading.html#running-a-function-when-a-module-is-loaded">Running a Function When a Module is Loaded</a></li>
</ul>
</li>
<li id="no" title="Ports and Port Drivers" expanded="false">Ports and Port Drivers<ul>
<li><a href="ports.html">
              Top of chapter
            </a></li>
<li title="Ports"><a href="ports.html#ports">Ports</a></li>
<li title="Port Drivers"><a href="ports.html#port-drivers">Port Drivers</a></li>
<li title="Port BIFs"><a href="ports.html#port-bifs">Port BIFs</a></li>
</ul>
</li>
</ul></nav></aside><div id="content">
<div class="innertube">
<h1 id="Expressions">8 Expressions</h1>
  
  <p>In this section, all valid Erlang expressions are listed.
    When writing Erlang programs, it is also allowed to use macro-
    and record expressions. However, these expressions are expanded
    during compilation and are in that sense not true Erlang
    expressions. Macro- and record expressions are covered in
    separate sections:
   </p>
  <ul>
    <li><p><span class="bold_code bc-19"><a href="macros.html">Preprocessor</a></span></p></li>
    <li><p><span class="bold_code bc-19"><a href="records.html">Records</a></span></p></li>
  </ul>

  <h3 id="expression-evaluation" class="title-link" onMouseOver="document.getElementById('ghlink-expression-evaluation-idm1268').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-expression-evaluation-idm1268').style.visibility = 'hidden';">
<div class="title-name">8.1 
        Expression Evaluation</div>
<div class="title-anchors"><span id="ghlink-expression-evaluation-idm1268" class="ghlink-after"><a href="#expression-evaluation" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/reference_manual/expressions.xml#L44" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    <p>All subexpressions are evaluated before an expression itself is
      evaluated, unless explicitly stated otherwise. For example,
      consider the expression:</p>
    <div class="example example-none"><pre>Expr1 + Expr2</pre></div>
    <p><span class="code">Expr1</span> and <span class="code">Expr2</span>, which are also expressions, are
      evaluated first - in any order - before the addition is
      performed.</p>
    <p>Many of the operators can only be applied to arguments of a
      certain type. For example, arithmetic operators can only be
      applied to numbers. An argument of the wrong type causes
      a <span class="code">badarg</span> runtime error.</p>
  

  <a name="term"></a><h3 id="terms" class="title-link" onMouseOver="document.getElementById('ghlink-terms-idm1277').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-terms-idm1277').style.visibility = 'hidden';">
<div class="title-name">8.2 
        Terms</div>
<div class="title-anchors"><span id="ghlink-terms-idm1277" class="ghlink-after"><a href="#terms" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/reference_manual/expressions.xml#L60" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    
    <p>The simplest form of expression is a term, that is an integer,
      float, atom, string, list, map, or tuple.
      The return value is the term itself.</p>
  

  <h3 id="variables" class="title-link" onMouseOver="document.getElementById('ghlink-variables-idm1281').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-variables-idm1281').style.visibility = 'hidden';">
<div class="title-name">8.3 
        Variables</div>
<div class="title-anchors"><span id="ghlink-variables-idm1281" class="ghlink-after"><a href="#variables" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/reference_manual/expressions.xml#L68" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    <p>A variable is an expression. If a variable is bound to a value,
      the return value is this value. Unbound variables are only
      allowed in patterns.</p>
    <p>Variables start with an uppercase letter or underscore (_).
      Variables can contain alphanumeric characters, underscore and <span class="code">@</span>.
     </p>
     <p><strong>Examples:</strong></p>
    <div class="example"><pre>
X
Name1
PhoneNumber
Phone_number
_
_Height</pre></div>
    <p>Variables are bound to values using
      <span class="bold_code bc-19"><a href="patterns.html">pattern matching</a></span>. Erlang
      uses <strong>single assignment</strong>, that is, a variable can only be bound
      once.</p>
    <p>The <strong>anonymous variable</strong> is denoted by underscore (_) and
      can be used when a variable is required but its value can be
      ignored.</p>
      <p><strong>Example:</strong></p>
    <div class="example"><pre>
[H|_] = [1,2,3]</pre></div>
    <p>Variables starting with underscore (_), for example,
      <span class="code">_Height</span>, are normal variables, not anonymous. However,
      they are ignored by the compiler in the sense that they do not
      generate warnings.</p>
      <p><strong>Example:</strong></p>
      <p>The following code:</p>
    <div class="example"><pre>
member(_, []) -&gt;
    [].</pre></div>
    <p>can be rewritten to be more readable:</p>
    <div class="example"><pre>
member(Elem, []) -&gt;
    [].</pre></div>
    <p>This causes a warning for an unused variable,
      <span class="code">Elem</span>, if the code is compiled with the flag
      <span class="code">warn_unused_vars</span> set. Instead, the code can be rewritten
      to:</p>
    <div class="example"><pre>
member(_Elem, []) -&gt;
    [].</pre></div>
    <p>Notice that since variables starting with an underscore are
      not anonymous, this matches:</p>
    <div class="example"><pre>
{_,_} = {1,2}</pre></div>
    <p>But this fails:</p>
    <div class="example"><pre>
{_N,_N} = {1,2}</pre></div>
    <p>The scope for a variable is its function clause.
      Variables bound in a branch of an <span class="code">if</span>, <span class="code">case</span>, 
      or <span class="code">receive</span> expression must be bound in all branches 
      to have a value outside the expression. Otherwise they
      are regarded as 'unsafe' outside the expression.</p>
    <p>For the <span class="code">try</span> expression variable scoping is limited so that
      variables bound in the expression are always 'unsafe' outside 
      the expression.</p>
  

  <a name="pattern"></a><h3 id="patterns" class="title-link" onMouseOver="document.getElementById('ghlink-patterns-idm1319').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-patterns-idm1319').style.visibility = 'hidden';">
<div class="title-name">8.4 
        Patterns</div>
<div class="title-anchors"><span id="ghlink-patterns-idm1319" class="ghlink-after"><a href="#patterns" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/reference_manual/expressions.xml#L131" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    
    <p>A pattern has the same structure as a term but can contain
      unbound variables.</p>
      <p><strong>Example:</strong></p>
    <div class="example"><pre>
Name1
[H|T]
{error,Reason}</pre></div>
    <p>Patterns are allowed in clause heads, <span class="code">case</span> and
      <span class="code">receive</span> expressions, and match expressions.</p>

    <h4 id="match-operator-=-in-patterns" class="title-link" onMouseOver="document.getElementById('ghlink-match-operator-=-in-patterns-idm1329').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-match-operator-=-in-patterns-idm1329').style.visibility = 'hidden';">
<div class="title-name">Match Operator = in Patterns</div>
<div class="title-anchors"><span id="ghlink-match-operator-=-in-patterns-idm1329" class="ghlink-after"><a href="#match-operator-=-in-patterns" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/reference_manual/expressions.xml#L144" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h4>
      
      <p>If <span class="code">Pattern1</span> and <span class="code">Pattern2</span> are valid patterns,
        the following is also a valid pattern:</p>
      <div class="example"><pre>
Pattern1 = Pattern2</pre></div>
      <p>When matched against a term, both <span class="code">Pattern1</span> and
        <span class="code">Pattern2</span> are  matched against the term. The idea
        behind this feature is to avoid reconstruction of terms.</p>
       <p><strong>Example:</strong></p>
      <div class="example"><pre>
f({connect,From,To,Number,Options}, To) -&gt;
    Signal = {connect,From,To,Number,Options},
    ...;
f(Signal, To) -&gt;
    ignore.</pre></div>
      <p>can instead be written as</p>
      <div class="example"><pre>
f({connect,_,To,_,_} = Signal, To) -&gt;
    ...;
f(Signal, To) -&gt;
    ignore.</pre></div>
    

    <h4 id="string-prefix-in-patterns" class="title-link" onMouseOver="document.getElementById('ghlink-string-prefix-in-patterns-idm1343').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-string-prefix-in-patterns-idm1343').style.visibility = 'hidden';">
<div class="title-name">String Prefix in Patterns</div>
<div class="title-anchors"><span id="ghlink-string-prefix-in-patterns-idm1343" class="ghlink-after"><a href="#string-prefix-in-patterns" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/reference_manual/expressions.xml#L168" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h4>
      
      <p>When matching strings, the following is a valid pattern:</p>
      <div class="example"><pre>
f("prefix" ++ Str) -&gt; ...</pre></div>
      <p>This is syntactic sugar for the equivalent, but harder to
        read:</p>
      <div class="example"><pre>
f([$p,$r,$e,$f,$i,$x | Str]) -&gt; ...</pre></div>
    

    <h4 id="expressions-in-patterns" class="title-link" onMouseOver="document.getElementById('ghlink-expressions-in-patterns-idm1349').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-expressions-in-patterns-idm1349').style.visibility = 'hidden';">
<div class="title-name">Expressions in Patterns</div>
<div class="title-anchors"><span id="ghlink-expressions-in-patterns-idm1349" class="ghlink-after"><a href="#expressions-in-patterns" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/reference_manual/expressions.xml#L179" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h4>
      
      <p>An arithmetic expression can be used within a pattern if
        it meets both of the following two conditions:</p>
      <ul>
        <li>It uses only numeric or bitwise operators.</li>
        <li>Its value can be evaluated to a constant when complied.</li>
      </ul>
      <p><strong>Example:</strong></p>
      <div class="example"><pre>
case {Value, Result} of
    {?THRESHOLD+1, ok} -&gt; ...</pre></div>
    
  

  <h3 id="match" class="title-link" onMouseOver="document.getElementById('ghlink-match-idm1358').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-match-idm1358').style.visibility = 'hidden';">
<div class="title-name">8.5 
        Match</div>
<div class="title-anchors"><span id="ghlink-match-idm1358" class="ghlink-after"><a href="#match" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/reference_manual/expressions.xml#L194" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    <p>The following matches <span class="code">Expr1</span>, a pattern, against
      <span class="code">Expr2</span>:</p>
    <div class="example"><pre>
Expr1 = Expr2</pre></div>
    <p>If the matching succeeds, any unbound variable in the pattern
      becomes bound and the value of <span class="code">Expr2</span> is returned.</p>
    <p>If the matching fails, a <span class="code">badmatch</span> run-time error occurs.</p>
    <p><strong>Examples:</strong></p>
    <div class="example"><pre>
1&gt; <span class="bold_code bc-12">{A, B} = {answer, 42}.</span>
{answer,42}
2&gt; <span class="bold_code bc-12">A.</span>
answer
3&gt; <span class="bold_code bc-12">{C, D} = [1, 2].</span>
** exception error: no match of right-hand side value [1,2]</pre></div>
  

  <a name="calls"></a><h3 id="function-calls" class="title-link" onMouseOver="document.getElementById('ghlink-function-calls-idm1374').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-function-calls-idm1374').style.visibility = 'hidden';">
<div class="title-name">8.6 
        Function Calls</div>
<div class="title-anchors"><span id="ghlink-function-calls-idm1374" class="ghlink-after"><a href="#function-calls" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/reference_manual/expressions.xml#L213" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    
    <div class="example"><pre>
ExprF(Expr1,...,ExprN)
ExprM:ExprF(Expr1,...,ExprN)</pre></div>
    <p>In the first form of function calls,
      <span class="code">ExprM:ExprF(Expr1,...,ExprN)</span>, each of <span class="code">ExprM</span> and
      <span class="code">ExprF</span> must be an atom or an expression that evaluates to
      an atom. The function is said to be called by using the
      <strong>fully qualified function name</strong>. This is often referred
      to as a <strong>remote</strong> or <strong>external function call</strong>.</p>
      <p><strong>Example:</strong></p>
    <div class="example example-none"><pre>lists:keysearch(Name, 1, List)</pre></div>
    <p>In the second form of function calls,
      <span class="code">ExprF(Expr1,...,ExprN)</span>, <span class="code">ExprF</span> must be an atom or
      evaluate to a fun.</p>

    <p>If <span class="code">ExprF</span> is an atom, the function is said to be called by
      using the <strong>implicitly qualified function name</strong>.  If the
      function <span class="code">ExprF</span> is locally defined, it is called.
      Alternatively, if <span class="code">ExprF</span> is explicitly imported from the
      <span class="code">M</span> module, <span class="code">M:ExprF(Expr1,...,ExprN)</span> is called. If
      <span class="code">ExprF</span> is neither declared locally nor explicitly
      imported, <span class="code">ExprF</span> must be the name of an automatically
      imported BIF. </p>
      <p><strong>Examples:</strong></p>

    <div class="example example-none"><pre>handle(Msg, State)
spawn(m, init, [])</pre></div>
    <p><strong>Examples</strong> where <span class="code">ExprF</span> is a fun:</p>
    <div class="example"><pre>
1&gt; <span class="bold_code bc-12">Fun1 = fun(X) -&gt; X+1 end,</span>
<span class="bold_code bc-12">Fun1(3).</span>
4
2&gt; <span class="bold_code bc-12">fun lists:append/2([1,2], [3,4]).</span>
[1,2,3,4]
3&gt; </pre></div>

    <p>Notice that when calling a local function, there is a difference
    between using the implicitly or fully qualified function name.
    The latter always refers to the latest version of the module.
    See <span class="bold_code bc-19"><a href="code_loading.html">Compilation and Code Loading
    </a></span> and <span class="bold_code bc-15"><a href="functions.html#eval">
    Function Evaluation</a></span>.</p>

    <h4 id="local-function-names-clashing-with--auto-imported-bifs" class="title-link" onMouseOver="document.getElementById('ghlink-local-function-names-clashing-with--auto-imported-bifs-idm1413').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-local-function-names-clashing-with--auto-imported-bifs-idm1413').style.visibility = 'hidden';">
<div class="title-name">Local Function Names Clashing With  Auto-Imported BIFs</div>
<div class="title-anchors"><span id="ghlink-local-function-names-clashing-with--auto-imported-bifs-idm1413" class="ghlink-after"><a href="#local-function-names-clashing-with--auto-imported-bifs" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/reference_manual/expressions.xml#L261" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h4>
      
    <p>If a local function has the same name as an auto-imported BIF,
    the semantics is that implicitly qualified function calls are
    directed to the locally defined function, not to the BIF. To avoid
    confusion, there is a compiler directive available,
    <span class="code">-compile({no_auto_import,[F/A]})</span>, that makes a BIF not
    being auto-imported. In certain situations, such a compile-directive
    is mandatory.</p>

    <div class="warning">
<div class="label">Warning</div>
<div class="content"><p><p>Before OTP R14A (ERTS version 5.8), an implicitly
    qualified function call to a function having the same name as an
    auto-imported BIF always resulted in the BIF being called. In
    newer versions of the compiler, the local function is called instead.
    This is to avoid that future additions to the
    set of auto-imported BIFs do not silently change the behavior
    of old code.</p>

    <p>However, to avoid that old (pre R14) code changed its
    behavior when compiled with OTP version R14A or later, the
    following restriction applies: If you override the name of a BIF
    that was auto-imported in OTP versions prior to R14A (ERTS version
    5.8) and have an implicitly qualified call to that function in
    your code, you either need to explicitly remove the auto-import
    using a compiler directive, or replace the call with a fully
    qualified function call. Otherwise you get a compilation
    error. See the following example:</p> </p></div>
</div>

    <div class="example example-none"><pre>-export([length/1,f/1]).

-compile({no_auto_import,[length/1]}). % erlang:length/1 no longer autoimported

length([]) -&gt;
    0;
length([H|T]) -&gt;
    1 + length(T). %% Calls the local function length/1

f(X) when erlang:length(X) &gt; 3 -&gt; %% Calls erlang:length/1,
                                  %% which is allowed in guards
    long.</pre></div>

    <p>The same logic applies to explicitly imported functions from
    other modules, as to locally defined functions.
    It is not allowed to both import a
    function from another module and have the function declared in the
    module at the same time:</p>

    <div class="example example-none"><pre>-export([f/1]).

-compile({no_auto_import,[length/1]}). % erlang:length/1 no longer autoimported

-import(mod,[length/1]).

f(X) when erlang:length(X) &gt; 33 -&gt; %% Calls erlang:length/1,
                                   %% which is allowed in guards

    erlang:length(X);              %% Explicit call to erlang:length in body

f(X) -&gt;
    length(X).                     %% mod:length/1 is called</pre></div>


    <p>For auto-imported BIFs added in Erlang/OTP R14A and thereafter,
    overriding the name with a local function or explicit import is always
    allowed. However, if the <span class="code">-compile({no_auto_import,[F/A])</span>
    directive is not used, the compiler issues a warning whenever
    the function is called in the module using the implicitly qualified
    function name.</p>
    
  

  <h3 id="if" class="title-link" onMouseOver="document.getElementById('ghlink-if-idm1425').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-if-idm1425').style.visibility = 'hidden';">
<div class="title-name">8.7 
        If</div>
<div class="title-anchors"><span id="ghlink-if-idm1425" class="ghlink-after"><a href="#if" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/reference_manual/expressions.xml#L334" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    <div class="example"><pre>
if
    GuardSeq1 -&gt;
        Body1;
    ...;
    GuardSeqN -&gt;
        BodyN
end</pre></div>
    <p>The branches of an <span class="code">if</span>-expression are scanned sequentially
      until a guard sequence <span class="code">GuardSeq</span> that evaluates to true is
      found. Then the corresponding <span class="code">Body</span> (sequence of expressions
      separated by ',') is evaluated.</p>
    <p>The return value of <span class="code">Body</span> is the return value of
      the <span class="code">if</span> expression.</p>
    <p>If no guard sequence is evaluated as true,
      an <span class="code">if_clause</span> run-time error
      occurs. If necessary, the guard expression <span class="code">true</span> can be
      used in the last branch, as that guard sequence is always true.</p>
    <p><strong>Example:</strong></p>
    <div class="example"><pre>
is_greater_than(X, Y) -&gt;
    if
        X&gt;Y -&gt;
            true;
        true -&gt; % works as an 'else' branch
            false
    end</pre></div>
  

  <a name="case"></a><h3 id="case" class="title-link" onMouseOver="document.getElementById('ghlink-case-idm1441').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-case-idm1441').style.visibility = 'hidden';">
<div class="title-name">8.8 
        Case</div>
<div class="title-anchors"><span id="ghlink-case-idm1441" class="ghlink-after"><a href="#case" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/reference_manual/expressions.xml#L365" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    
    <div class="example"><pre>
case Expr of
    Pattern1 [when GuardSeq1] -&gt;
        Body1;
    ...;
    PatternN [when GuardSeqN] -&gt;
        BodyN
end</pre></div>
    <p>The expression <span class="code">Expr</span> is evaluated and the patterns
      <span class="code">Pattern</span> are sequentially matched against the result. If a
      match succeeds and the optional guard sequence <span class="code">GuardSeq</span> is
      true, the corresponding <span class="code">Body</span> is evaluated.</p>
    <p>The return value of <span class="code">Body</span> is the return value of
      the <span class="code">case</span> expression.</p>
    <p>If there is no matching pattern with a true guard sequence,
      a <span class="code">case_clause</span> run-time error occurs.</p>
    <p><strong>Example:</strong></p>
    <div class="example"><pre>
is_valid_signal(Signal) -&gt;
    case Signal of
        {signal, _What, _From, _To} -&gt;
            true;
        {signal, _What, _To} -&gt;
            true;
        _Else -&gt;
            false
    end.</pre></div>
  

  <a name="send"></a><h3 id="send" class="title-link" onMouseOver="document.getElementById('ghlink-send-idm1458').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-send-idm1458').style.visibility = 'hidden';">
<div class="title-name">8.9 
        Send</div>
<div class="title-anchors"><span id="ghlink-send-idm1458" class="ghlink-after"><a href="#send" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/reference_manual/expressions.xml#L397" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    
    <div class="example"><pre>
Expr1 ! Expr2</pre></div>
    <p>Sends the value of <span class="code">Expr2</span> as a message to the process
      specified by <span class="code">Expr1</span>. The value of <span class="code">Expr2</span> is also
      the return value of the expression.</p>
    <p><span class="code">Expr1</span> must evaluate to a pid, an alias (reference),
      a port, a registered name (atom), or
      a tuple <span class="code">{Name,Node}</span>. <span class="code">Name</span> is an atom and
      <span class="code">Node</span> is a node name, also an atom.</p>
    <ul>
      <li>If <span class="code">Expr1</span> evaluates to a name, but this name is not
       registered, a <span class="code">badarg</span> run-time error occurs.</li>
      <li>Sending a message to a reference never fails, even if the
       reference is no longer (or never was) an alias.</li>
      <li>Sending a message to a pid never fails, even if the pid
       identifies a non-existing process.</li>
      <li>Distributed message sending, that is, if <span class="code">Expr1</span>
       evaluates to a tuple <span class="code">{Name,Node}</span> (or a pid located at
       another node), also never fails.</li>
    </ul>
  

  <a name="receive"></a><h3 id="receive" class="title-link" onMouseOver="document.getElementById('ghlink-receive-idm1480').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-receive-idm1480').style.visibility = 'hidden';">
<div class="title-name">8.10 
        Receive</div>
<div class="title-anchors"><span id="ghlink-receive-idm1480" class="ghlink-after"><a href="#receive" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/reference_manual/expressions.xml#L422" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    
    <div class="example"><pre>
receive
    Pattern1 [when GuardSeq1] -&gt;
        Body1;
    ...;
    PatternN [when GuardSeqN] -&gt;
        BodyN
end</pre></div>
    <p>
      Fetches a received message present in the message queue of
      the process. The first message in the message queue is matched
      sequentially against the patterns from top to bottom. If no
      match was found, the matching sequence is repeated for the second
      message in the queue, and so on. Messages are queued in the
      <span class="bold_code bc-15"><a href="processes.html#message-queue-order">order they were
      received</a></span>. If a match succeeds, that
      is, if the <span class="code">Pattern</span> matches and the optional guard sequence
      <span class="code">GuardSeq</span> is true, then the message is removed from the message
      queue and the corresponding <span class="code">Body</span> is evaluated. All other
      messages in the message queue remain unchanged.
    </p>
    <p>The return value of <span class="code">Body</span> is the return value of
      the <span class="code">receive</span> expression.</p>
    <p><span class="code">receive</span> never fails. The execution is suspended, possibly
      indefinitely, until a message arrives that matches one of
      the patterns and with a true guard sequence. </p>
    <p><strong>Example:</strong></p>
    <div class="example"><pre>
wait_for_onhook() -&gt;
    receive
        onhook -&gt;
            disconnect(),
            idle();
        {connect, B} -&gt;
            B ! {busy, self()},
            wait_for_onhook()
    end.</pre></div>
    <p>The <span class="code">receive</span> expression can be augmented with a
      timeout:</p>
    <div class="example"><pre>
receive
    Pattern1 [when GuardSeq1] -&gt;
        Body1;
    ...;
    PatternN [when GuardSeqN] -&gt;
        BodyN
after
    ExprT -&gt;
        BodyT
end</pre></div>
    <p><span class="code">receive..after</span> works exactly as <span class="code">receive</span>, except
      that if no matching message has arrived within <span class="code">ExprT</span>
      milliseconds, then <span class="code">BodyT</span> is evaluated instead. The
      return value of <span class="code">BodyT</span> then becomes the return value
      of the <span class="code">receive..after</span> expression. <span class="code">ExprT</span> is to
      evaluate to an integer, or the atom <span class="code">infinity</span>. The allowed
      integer range is from 0 to 4294967295, that is, the longest possible
      timeout is almost 50 days. With a zero value the timeout occurs
      immediately if there is no matching message in the message queue.
    </p>
    <p>
      The atom <span class="code">infinity</span> will make the process wait indefinitely for a
      matching message. This is the same as not using a timeout. It can be
      useful for timeout values that are calculated at runtime.
    </p>
    <p><strong>Example:</strong></p>
    <div class="example"><pre>
wait_for_onhook() -&gt;
    receive
        onhook -&gt;
            disconnect(),
            idle();
        {connect, B} -&gt;
            B ! {busy, self()},
            wait_for_onhook()
    after
        60000 -&gt;
            disconnect(),
            error()
    end.</pre></div>
    <p>It is legal to use a <span class="code">receive..after</span> expression with no
      branches:</p>
    <div class="example"><pre>
receive
after
    ExprT -&gt;
        BodyT
end</pre></div>
    <p>This construction does not consume any messages, only suspends
      execution in the process for <span class="code">ExprT</span> milliseconds. This can be
      used to implement simple timers.</p>
    <p><strong>Example:</strong></p>
    <div class="example"><pre>
timer() -&gt;
    spawn(m, timer, [self()]).

timer(Pid) -&gt;
    receive
    after
        5000 -&gt;
            Pid ! timeout
    end.</pre></div>
  

  <h3 id="term-comparisons" class="title-link" onMouseOver="document.getElementById('ghlink-term-comparisons-idm1522').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-term-comparisons-idm1522').style.visibility = 'hidden';">
<div class="title-name">8.11 
        Term Comparisons</div>
<div class="title-anchors"><span id="ghlink-term-comparisons-idm1522" class="ghlink-after"><a href="#term-comparisons" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/reference_manual/expressions.xml#L529" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    <div class="example"><pre>
Expr1 <span class="bold_code bc-12">op</span> Expr2</pre></div>
    <div class="doc-table-wrapper">
<table class="doc-table">
<tr>
        <td align="left" valign="middle"><strong>op</strong></td>
        <td align="left" valign="middle"><strong>Description</strong></td>
      </tr>
<tr>
        <td align="left" valign="middle">==</td>
        <td align="left" valign="middle">Equal to</td>
      </tr>
<tr>
        <td align="left" valign="middle">/=</td>
        <td align="left" valign="middle">Not equal to</td>
      </tr>
<tr>
        <td align="left" valign="middle">=&lt;</td>
        <td align="left" valign="middle">Less than or equal to</td>
      </tr>
<tr>
        <td align="left" valign="middle">&lt;</td>
        <td align="left" valign="middle">Less than</td>
      </tr>
<tr>
        <td align="left" valign="middle">&gt;=</td>
        <td align="left" valign="middle">Greater than or equal to</td>
      </tr>
<tr>
        <td align="left" valign="middle">&gt;</td>
        <td align="left" valign="middle">Greater than</td>
      </tr>
<tr>
        <td align="left" valign="middle">=:=</td>
        <td align="left" valign="middle">Exactly equal to</td>
      </tr>
<tr>
        <td align="left" valign="middle">=/=</td>
        <td align="left" valign="middle">Exactly not equal to</td>
      </tr>
</table>
<p class="doc-table-caption">Table
        8.1:
         
        Term Comparison Operators.</p>
</div>
    <p>The arguments can be of different data types. The following
      order is defined:</p>
    <div class="example"><pre>
number &lt; atom &lt; reference &lt; fun &lt; port &lt; pid &lt; tuple &lt; map &lt; nil &lt; list &lt; bit string</pre></div>
    <p><span class="code">nil</span> in the previous expression represents the empty list
      (<span class="code">[]</span>), which is regarded as a separate type from
      <span class="code">list/0</span>. That is why <span class="code">nil &lt; list</span>.
    </p>
    <p>Lists are compared element by element. Tuples are ordered by
      size, two tuples with the same size are compared element by
      element.</p>
    <p>Bit strings are compared bit by bit. If one bit string is a
      prefix of the other, the shorter bit string is considered smaller.</p>
    <p>Maps are ordered by size, two maps with the same size are compared by keys in
        ascending term order and then by values in key order.
        In maps key order integers types are considered less than floats types.
    </p>
    <p>Atoms are compared using their string value, codepoint by codepoint.</p>
      <p>When comparing an integer to a float, the term with the lesser
      precision is converted into the type of the other term, unless the
      operator is one of <span class="code">=:=</span> or <span class="code">=/=</span>. A float is more precise than
      an integer until all significant figures of the float are to the left of
      the decimal point. This happens when the float is larger/smaller than
      +/-9007199254740992.0. The conversion strategy is changed
      depending on the size of the float because otherwise comparison of large
      floats and integers would lose their transitivity.</p>

    <p>Term comparison operators return the Boolean value of the
      expression, <span class="code">true</span> or <span class="code">false</span>.</p>

    <p><strong>Examples:</strong></p>
    <div class="example"><pre>
1&gt; <span class="bold_code bc-12">1==1.0.</span>
true
2&gt; <span class="bold_code bc-12">1=:=1.0.</span>
false
3&gt; <span class="bold_code bc-12">1 &gt; a.</span>
false
4&gt; <span class="bold_code bc-12">#{c =&gt; 3} &gt; #{a =&gt; 1, b =&gt; 2}.</span>
false
5&gt; <span class="bold_code bc-12">#{a =&gt; 1, b =&gt; 2} == #{a =&gt; 1.0, b =&gt; 2.0}.</span>
true
6&gt; <span class="bold_code bc-12">&lt;&lt;2:2&gt;&gt; &lt; &lt;&lt;128&gt;&gt;.</span>
true
7&gt; <span class="bold_code bc-12">&lt;&lt;3:2&gt;&gt; &lt; &lt;&lt;128&gt;&gt;.</span>
false
</pre></div>
  

  <h3 id="arithmetic-expressions" class="title-link" onMouseOver="document.getElementById('ghlink-arithmetic-expressions-idm1584').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-arithmetic-expressions-idm1584').style.visibility = 'hidden';">
<div class="title-name">8.12 
        Arithmetic Expressions</div>
<div class="title-anchors"><span id="ghlink-arithmetic-expressions-idm1584" class="ghlink-after"><a href="#arithmetic-expressions" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/reference_manual/expressions.xml#L621" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    <div class="example"><pre>
<span class="bold_code bc-12">op</span> Expr
Expr1 <span class="bold_code bc-12">op</span> Expr2</pre></div>
    <div class="doc-table-wrapper">
<table class="doc-table">
<tr>
        <td align="left" valign="middle"><strong>Operator</strong></td>
        <td align="left" valign="middle"><strong>Description</strong></td>
        <td align="left" valign="middle"><strong>Argument Type</strong></td>
      </tr>
<tr>
        <td align="left" valign="middle">+</td>
        <td align="left" valign="middle">Unary +</td>
        <td align="left" valign="middle">Number</td>
      </tr>
<tr>
        <td align="left" valign="middle">-</td>
        <td align="left" valign="middle">Unary -</td>
        <td align="left" valign="middle">Number</td>
      </tr>
<tr>
        <td align="left" valign="middle">+</td>
        <td align="left" valign="middle"> </td>
        <td align="left" valign="middle">number</td>
      </tr>
<tr>
        <td align="left" valign="middle">-</td>
        <td align="left" valign="middle"> </td>
        <td align="left" valign="middle">Number</td>
      </tr>
<tr>
        <td align="left" valign="middle">*</td>
        <td align="left" valign="middle"> </td>
        <td align="left" valign="middle">Number</td>
      </tr>
<tr>
        <td align="left" valign="middle">/</td>
        <td align="left" valign="middle">Floating point division</td>
        <td align="left" valign="middle">Number</td>
      </tr>
<tr>
        <td align="left" valign="middle">bnot</td>
        <td align="left" valign="middle">Unary bitwise NOT</td>
        <td align="left" valign="middle">Integer</td>
      </tr>
<tr>
        <td align="left" valign="middle">div</td>
        <td align="left" valign="middle">Integer division</td>
        <td align="left" valign="middle">Integer</td>
      </tr>
<tr>
        <td align="left" valign="middle">rem</td>
        <td align="left" valign="middle">Integer remainder of X/Y</td>
        <td align="left" valign="middle">Integer</td>
      </tr>
<tr>
        <td align="left" valign="middle">band</td>
        <td align="left" valign="middle">Bitwise AND</td>
        <td align="left" valign="middle">Integer</td>
      </tr>
<tr>
        <td align="left" valign="middle">bor</td>
        <td align="left" valign="middle">Bitwise OR</td>
        <td align="left" valign="middle">Integer</td>
      </tr>
<tr>
        <td align="left" valign="middle">bxor</td>
        <td align="left" valign="middle">Arithmetic bitwise XOR</td>
        <td align="left" valign="middle">Integer</td>
      </tr>
<tr>
        <td align="left" valign="middle">bsl</td>
        <td align="left" valign="middle">Arithmetic bitshift left</td>
        <td align="left" valign="middle">Integer</td>
      </tr>
<tr>
        <td align="left" valign="middle">bsr</td>
        <td align="left" valign="middle">Bitshift right</td>
        <td align="left" valign="middle">Integer</td>
      </tr>
</table>
<p class="doc-table-caption">Table
        8.2:
         
        Arithmetic Operators.</p>
</div>

    <p><strong>Examples:</strong></p>
    <div class="example"><pre>
1&gt; <span class="bold_code bc-12">+1.</span>
1
2&gt; <span class="bold_code bc-12">-1.</span>
-1
3&gt; <span class="bold_code bc-12">1+1.</span>
2
4&gt; <span class="bold_code bc-12">4/2.</span>
2.0
5&gt; <span class="bold_code bc-12">5 div 2.</span>
2
6&gt; <span class="bold_code bc-12">5 rem 2.</span>
1
7&gt; <span class="bold_code bc-12">2#10 band 2#01.</span>
0
8&gt; <span class="bold_code bc-12">2#10 bor 2#01.</span>
3
9&gt; <span class="bold_code bc-12">a + 10.</span>
** exception error: an error occurred when evaluating an arithmetic expression
     in operator  +/2
        called as a + 10
10&gt; <span class="bold_code bc-12">1 bsl (1 bsl 64).</span>
** exception error: a system limit has been reached
     in operator  bsl/2
        called as 1 bsl 18446744073709551616</pre></div>
  

  <h3 id="boolean-expressions" class="title-link" onMouseOver="document.getElementById('ghlink-boolean-expressions-idm1667').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-boolean-expressions-idm1667').style.visibility = 'hidden';">
<div class="title-name">8.13 
        Boolean Expressions</div>
<div class="title-anchors"><span id="ghlink-boolean-expressions-idm1667" class="ghlink-after"><a href="#boolean-expressions" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/reference_manual/expressions.xml#L733" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    <div class="example"><pre>
<span class="bold_code bc-12">op</span> Expr
Expr1 <span class="bold_code bc-12">op</span> Expr2</pre></div>
    <div class="doc-table-wrapper">
<table class="doc-table">
<tr>
        <td align="left" valign="middle"><strong>Operator</strong></td>
        <td align="left" valign="middle"><strong>Description</strong></td>
      </tr>
<tr>
        <td align="left" valign="middle">not</td>
        <td align="left" valign="middle">Unary logical NOT</td>
      </tr>
<tr>
        <td align="left" valign="middle">and</td>
        <td align="left" valign="middle">Logical AND</td>
      </tr>
<tr>
        <td align="left" valign="middle">or</td>
        <td align="left" valign="middle">Logical OR</td>
      </tr>
<tr>
        <td align="left" valign="middle">xor</td>
        <td align="left" valign="middle">Logical XOR</td>
      </tr>
</table>
<p class="doc-table-caption">Table
        8.3:
         
        Logical Operators.</p>
</div>
    <p><strong>Examples:</strong></p>
    <div class="example"><pre>
1&gt; <span class="bold_code bc-12">not true.</span>
false
2&gt; <span class="bold_code bc-12">true and false.</span>
false
3&gt; <span class="bold_code bc-12">true xor false.</span>
true
4&gt; <span class="bold_code bc-12">true or garbage.</span>
** exception error: bad argument
     in operator  or/2
        called as true or garbage</pre></div>
  

  <h3 id="short-circuit-expressions" class="title-link" onMouseOver="document.getElementById('ghlink-short-circuit-expressions-idm1698').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-short-circuit-expressions-idm1698').style.visibility = 'hidden';">
<div class="title-name">8.14 
        Short-Circuit Expressions</div>
<div class="title-anchors"><span id="ghlink-short-circuit-expressions-idm1698" class="ghlink-after"><a href="#short-circuit-expressions" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/reference_manual/expressions.xml#L775" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    <div class="example"><pre>
Expr1 orelse Expr2
Expr1 andalso Expr2</pre></div>
    <p><span class="code">Expr2</span> is evaluated only if
      necessary. That is, <span class="code">Expr2</span> is evaluated only if:</p>
    <ul>
      <li>
<p><span class="code">Expr1</span> evaluates to <span class="code">false</span> in an
      <span class="code">orelse</span> expression.</p>
      </li>
    </ul>
      <p>or</p>
    <ul>
      <li>
<p><span class="code">Expr1</span> evaluates to <span class="code">true</span> in an
      <span class="code">andalso</span> expression.</p>
      </li>
    </ul>
    <p>Returns either the value of <span class="code">Expr1</span> (that is,
      <span class="code">true</span> or <span class="code">false</span>) or the value of <span class="code">Expr2</span>
      (if <span class="code">Expr2</span> is evaluated).</p>

    <p><strong>Example 1:</strong></p>
    <div class="example"><pre>
case A &gt;= -1.0 andalso math:sqrt(A+1) &gt; B of</pre></div>
    <p>This works even if <span class="code">A</span> is less than <span class="code">-1.0</span>,
      since in that case, <span class="code">math:sqrt/1</span> is never evaluated.</p>
    <p><strong>Example 2:</strong></p>
    <div class="example"><pre>
OnlyOne = is_atom(L) orelse
         (is_list(L) andalso length(L) == 1),</pre></div>

    <p>From Erlang/OTP R13A, <span class="code">Expr2</span> is no longer required to evaluate to a
    Boolean value. As a consequence, <span class="code">andalso</span> and <span class="code">orelse</span>
    are now tail-recursive.  For instance, the following function is
    tail-recursive in Erlang/OTP R13A and later:</p>

    <div class="example"><pre>
all(Pred, [Hd|Tail]) -&gt;
    Pred(Hd) andalso all(Pred, Tail);
all(_, []) -&gt;
    true.</pre></div>
  

  <h3 id="list-operations" class="title-link" onMouseOver="document.getElementById('ghlink-list-operations-idm1738').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-list-operations-idm1738').style.visibility = 'hidden';">
<div class="title-name">8.15 
        List Operations</div>
<div class="title-anchors"><span id="ghlink-list-operations-idm1738" class="ghlink-after"><a href="#list-operations" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/reference_manual/expressions.xml#L819" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    <div class="example"><pre>
Expr1 ++ Expr2
Expr1 -- Expr2</pre></div>
    <p>The list concatenation operator <span class="code">++</span> appends its second
      argument to its first and returns the resulting list.</p>
    <p>The list subtraction operator <span class="code">--</span> produces a list that
      is a copy of the first argument. The procedure is a follows:
      for each element in the second argument, the first
      occurrence of this element (if any) is removed.</p>
    <p><strong>Example:</strong></p>
    <div class="example"><pre>
1&gt; <span class="bold_code bc-12">[1,2,3]++[4,5].</span>
[1,2,3,4,5]
2&gt; <span class="bold_code bc-12">[1,2,3,2,1,2]--[2,1,2].</span>
[3,1,2]</pre></div>

   

  <a name="map_expressions"></a><h3 id="map-expressions" class="title-link" onMouseOver="document.getElementById('ghlink-map-expressions-idm1750').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-map-expressions-idm1750').style.visibility = 'hidden';">
<div class="title-name">8.16 
        Map Expressions</div>
<div class="title-anchors"><span id="ghlink-map-expressions-idm1750" class="ghlink-after"><a href="#map-expressions" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/reference_manual/expressions.xml#L839" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
	
	  <h4 id="creating-maps" class="title-link" onMouseOver="document.getElementById('ghlink-creating-maps-idm1753').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-creating-maps-idm1753').style.visibility = 'hidden';">
<div class="title-name">Creating Maps</div>
<div class="title-anchors"><span id="ghlink-creating-maps-idm1753" class="ghlink-after"><a href="#creating-maps" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/reference_manual/expressions.xml#L842" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h4>
	  
	  <p>
		  Constructing a new map is done by letting an expression <span class="code">K</span> be associated with
		  another expression <span class="code">V</span>:
	  </p>
	  <div class="example example-none"><pre>#{ K =&gt; V }</pre></div>
	  <p>
		  New maps can include multiple associations at construction by listing every
		  association:
	  </p>
	  <div class="example example-none"><pre>#{ K1 =&gt; V1, .., Kn =&gt; Vn }</pre></div>
	  <p>
		  An empty map is constructed by not associating any terms with each other:
	  </p>
	  <div class="example example-none"><pre>#{}</pre></div>
	  <p>
		  All keys and values in the map are terms. Any expression is first evaluated and
		  then the resulting terms are used as <strong>key</strong> and <strong>value</strong> respectively.
	  </p>
	  <p>
		  Keys and values are separated by the <span class="code">=&gt;</span> arrow and associations are
		  separated by a comma <span class="code">,</span>.
	  </p>

	  <p>
		  <strong>Examples:</strong>
	  </p>
	  <div class="example example-none"><pre>M0 = #{},                 % empty map
M1 = #{a =&gt; &lt;&lt;"hello"&gt;&gt;}, % single association with literals
M2 = #{1 =&gt; 2, b =&gt; b},   % multiple associations with literals
M3 = #{k =&gt; {A,B}},       % single association with variables
M4 = #{{"w", 1} =&gt; f()}.  % compound key associated with an evaluated expression</pre></div>
	  <p>
		  Here, <span class="code">A</span> and <span class="code">B</span> are any expressions and <span class="code">M0</span> through <span class="code">M4</span>
		  are the resulting map terms.
	  </p>
	  <p>
		  If two matching keys are declared, the latter key takes precedence.
	  </p>
	  <p>
		  <strong>Example:</strong>
	  </p>

<div class="example"><pre>
1&gt; <span class="bold_code bc-12">#{1 =&gt; a, 1 =&gt; b}.</span>
#{1 =&gt; b }
2&gt; <span class="bold_code bc-12">#{1.0 =&gt; a, 1 =&gt; b}.</span>
#{1 =&gt; b, 1.0 =&gt; a}
</pre></div>
	  <p>
		  The order in which the expressions constructing the keys (and their
		  associated values) are evaluated is not defined. The syntactic order of
		  the key-value pairs in the construction is of no relevance, except in
		  the recently mentioned case of two matching keys.
	  </p>
  

  <h4 id="updating-maps" class="title-link" onMouseOver="document.getElementById('ghlink-updating-maps-idm1784').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-updating-maps-idm1784').style.visibility = 'hidden';">
<div class="title-name">Updating Maps</div>
<div class="title-anchors"><span id="ghlink-updating-maps-idm1784" class="ghlink-after"><a href="#updating-maps" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/reference_manual/expressions.xml#L901" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h4>
	  
	  <p>
		  Updating a map has a similar syntax as constructing it.
	  </p>
	  <p>
		  An expression defining the map to be updated, is put in front of the expression
		  defining the keys to be updated and their respective values:
	  </p>
	  <div class="example example-none"><pre>M#{ K =&gt; V }</pre></div>
	  <p>
		  Here <span class="code">M</span> is a term of type map and <span class="code">K</span> and <span class="code">V</span> are any expression.
	  </p>
	  <p>
		  If key <span class="code">K</span> does not match any existing key in the map, a new association
		  is created from key <span class="code">K</span> to value <span class="code">V</span>.
	  </p>
	  <p>     If key <span class="code">K</span> matches an existing key in map <span class="code">M</span>,
                  its associated value
	          is replaced by the new value <span class="code">V</span>. In both cases, the evaluated map expression
		  returns a new map.
	  </p>
	  <p>
		  If <span class="code">M</span> is not of type map, an exception of type <span class="code">badmap</span> is thrown.
	  </p>
	  <p>
		  To only update an existing value, the following syntax is used:
	  </p>
	  <div class="example example-none"><pre>M#{ K := V } </pre></div>
	  <p>
		  Here <span class="code">M</span> is a term of type map, <span class="code">V</span> is an expression and <span class="code">K</span>
		  is an expression that evaluates to an existing key in <span class="code">M</span>.
	  </p>
	  <p>
		  If key <span class="code">K</span> does not match any existing keys in map <span class="code">M</span>, an exception
		  of type <span class="code">badarg</span> is triggered at runtime. If a matching key <span class="code">K</span>
		  is present in map <span class="code">M</span>, its associated value is replaced by the new
		  value <span class="code">V</span>, and the evaluated map expression returns a new map.
	  </p>
	  <p>
		  If <span class="code">M</span> is not of type map, an exception of type <span class="code">badmap</span> is thrown.
	  </p>
	  <p>
		  <strong>Examples:</strong>
	  </p>
	  <div class="example example-none"><pre>M0 = #{},
M1 = M0#{a =&gt; 0},
M2 = M1#{a =&gt; 1, b =&gt; 2},
M3 = M2#{"function" =&gt; fun() -&gt; f() end},
M4 = M3#{a := 2, b := 3}.  % 'a' and 'b' was added in `M1` and `M2`.</pre></div>
	  <p>
		  Here <span class="code">M0</span> is any map. It follows that <span class="code">M1 .. M4</span> are maps as well.
	  </p>
	  <p>
		  <strong>More examples:</strong>
	  </p>
<div class="example"><pre>
1&gt; <span class="bold_code bc-12">M = #{1 =&gt; a}.</span>
#{1 =&gt; a }
2&gt; <span class="bold_code bc-12">M#{1.0 =&gt; b}.</span>
#{1 =&gt; a, 1.0 =&gt; b}.
3&gt; <span class="bold_code bc-12">M#{1 := b}.</span>
#{1 =&gt; b}
4&gt; <span class="bold_code bc-12">M#{1.0 := b}.</span>
** exception error: bad argument
</pre></div>
	  <p>
		  As in construction, the order in which the key and value expressions
		  are evaluated is not defined. The
		  syntactic order of the key-value pairs in the update is of no
		  relevance, except in the case where two keys match.
		  In that case, the latter value is used.
	  </p>
  

  <h4 id="maps-in-patterns" class="title-link" onMouseOver="document.getElementById('ghlink-maps-in-patterns-idm1835').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-maps-in-patterns-idm1835').style.visibility = 'hidden';">
<div class="title-name">Maps in Patterns</div>
<div class="title-anchors"><span id="ghlink-maps-in-patterns-idm1835" class="ghlink-after"><a href="#maps-in-patterns" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/reference_manual/expressions.xml#L977" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h4>
	  
	  <p>
		  Matching of key-value associations from maps is done as follows:
	  </p>

	  <div class="example example-none"><pre>#{ K := V } = M</pre></div>
	  <p>
	    Here <span class="code">M</span> is any map. The key <span class="code">K</span> must be a
	    <span class="bold_code bc-17"><a href="#guard_expressions">guard
	    expression</a></span>, with all variables already bound.
	    <span class="code">V</span> can be any pattern with either bound or unbound
	    variables.
	  </p>
	  <p>
		  If the variable <span class="code">V</span> is unbound, it becomes bound to the value associated
		  with the key <span class="code">K</span>, which must exist in the map <span class="code">M</span>. If the variable
		  <span class="code">V</span> is bound, it must match the value associated with <span class="code">K</span> in <span class="code">M</span>.
	  </p>
	  <div class="note">
<div class="label">Note</div>
<div class="content"><p><p>Before OTP 23, the expression defining the key
	  <span class="code">K</span> was restricted to be either a single variable or a
	  literal.</p></p></div>
</div>
	  <p><strong>Example:</strong></p>
<div class="example"><pre>
1&gt; <span class="bold_code bc-12">M = #{"tuple" =&gt; {1,2}}.</span>
#{"tuple" =&gt; {1,2}}
2&gt; <span class="bold_code bc-12">#{"tuple" := {1,B}} = M.</span>
#{"tuple" =&gt; {1,2}}
3&gt; <span class="bold_code bc-12">B.</span>
2.</pre></div>
	  <p>
		  This binds variable <span class="code">B</span> to integer <span class="code">2</span>.
	  </p>
	  <p>
		  Similarly, multiple values from the map can be matched:
	  </p>
	  <div class="example example-none"><pre>#{ K1 := V1, .., Kn := Vn } = M</pre></div>
	  <p>
		  Here keys <span class="code">K1 .. Kn</span> are any expressions with
		  literals or bound variables. If all key expressions
		  evalute successfully and all keys exist in map
		  <span class="code">M</span>, all variables in <span class="code">V1 .. Vn</span> is
		  matched to the associated values of their respective
		  keys.
	  </p>
	  <p>
		  If the matching conditions are not met, the match fails, either with:
	  </p>
	  <ul>
		  <li>
<p>A <span class="code">badmatch</span> exception.</p>
		        <p>This is if it is used in the context of the match operator
			  as in the example.</p>
		  </li>
		  <li>
<p>Or resulting in the next clause being tested in function heads and
			  case expressions.</p>
		  </li>
	  </ul>
	  <p>
		  Matching in maps only allows for <span class="code">:=</span> as delimiters of associations.
	  </p>
	   <p>
		  The order in which keys are declared in matching has no relevance.
	  </p>
	  <p>
		  Duplicate keys are allowed in matching and match each pattern associated
		  to the keys:
	  </p>
	  <div class="example example-none"><pre>#{ K := V1, K := V2 } = M</pre></div>
	  <p>
		  Matching an expression against an empty map literal, matches its type but
		  no variables are bound:
	  </p>
	  <div class="example example-none"><pre>#{} = Expr</pre></div>
	  <p>
		  This expression matches if the expression <span class="code">Expr</span> is of type map, otherwise
		  it fails with an exception <span class="code">badmatch</span>.
	  </p>
	  <p>Here the key to be retrieved is constructed from an expression:</p>
	  <div class="example example-none"><pre>#{{tag,length(List)} := V} = Map</pre></div>
	  <p><span class="code">List</span> must be an already bound variable.</p>
	  <h5>Matching Syntax</h5>
		  
		  <p>
			  Matching of literals as keys are allowed in function heads:
		  </p>
		  <div class="example example-none"><pre>%% only start if not_started
handle_call(start, From, #{ state := not_started } = S) -&gt;
...
    {reply, ok, S#{ state := start }};

%% only change if started
handle_call(change, From, #{ state := start } = S) -&gt;
...
    {reply, ok, S#{ state := changed }};</pre></div>
	  
  
  <h4 id="maps-in-guards" class="title-link" onMouseOver="document.getElementById('ghlink-maps-in-guards-idm1895').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-maps-in-guards-idm1895').style.visibility = 'hidden';">
<div class="title-name">Maps in Guards</div>
<div class="title-anchors"><span id="ghlink-maps-in-guards-idm1895" class="ghlink-after"><a href="#maps-in-guards" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/reference_manual/expressions.xml#L1074" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h4>
	  
	  <p>
		  Maps are allowed in guards as long as all subexpressions are valid guard expressions.
	  </p>
	  <p>
		  The following guard BIFs handle maps:
	  </p>
	  <ul>
		  <li>
			  <span class="bold_code bc-13"><a href="../man/erlang.html#is_map-1">is_map/1</a></span>
			   in the <span class="code">erlang</span> module
		  </li>
		  <li>
			  <span class="bold_code bc-13"><a href="../man/erlang.html#is_map_key-2">is_map_key/2</a></span>
			   in the <span class="code">erlang</span> module
		  </li>
		  <li>
			  <span class="bold_code bc-13"><a href="../man/erlang.html#map_get-2">map_get/2</a></span>
			   in the <span class="code">erlang</span> module
		  </li>
		  <li>
			  <span class="bold_code bc-13"><a href="../man/erlang.html#map_size-1">map_size/1</a></span>
			   in the <span class="code">erlang</span> module
		  </li>
	  </ul>
	
  

  <a name="bit_syntax"></a><h3 id="bit-syntax-expressions" class="title-link" onMouseOver="document.getElementById('ghlink-bit-syntax-expressions-idm1912').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-bit-syntax-expressions-idm1912').style.visibility = 'hidden';">
<div class="title-name">8.17 
        Bit Syntax Expressions</div>
<div class="title-anchors"><span id="ghlink-bit-syntax-expressions-idm1912" class="ghlink-after"><a href="#bit-syntax-expressions" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/reference_manual/expressions.xml#L1103" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    
    <div class="example example-none"><pre>&lt;&lt;&gt;&gt;
&lt;&lt;E1,...,En&gt;&gt;</pre></div>
    <p>Each element <span class="code">Ei</span> specifies a <strong>segment</strong> of
      the bit string. Each element <span class="code">Ei</span> is a value, followed by an
      optional <strong>size expression</strong> and an optional <strong>type specifier list</strong>.</p>
    <div class="example"><pre>
Ei = Value |
     Value:Size |
     Value/TypeSpecifierList |
     Value:Size/TypeSpecifierList</pre></div>
    <p>Used in a bit string construction, <span class="code">Value</span> is an expression
    that is to evaluate to an integer, float, or bit string.  If the
    expression is not a single literal or variable, it
    is to be enclosed in parentheses.</p>

    <p>Used in a bit string matching, <span class="code">Value</span> must be a variable,
    or an integer, float, or string.</p>

    <p>Notice that, for example, using a string literal as in
    <span class="code">&lt;&lt;"abc"&gt;&gt;</span> is syntactic sugar for
    <span class="code">&lt;&lt;$a,$b,$c&gt;&gt;</span>.</p>

    <p>Used in a bit string construction, <span class="code">Size</span> is an expression
    that is to evaluate to an integer.</p>
    
    <p>Used in a bit string matching, <span class="code">Size</span> must be a
    <span class="bold_code bc-17"><a href="#guard_expressions">guard expression</a></span>
    that evaluates to an integer. All variables in the guard expression
    must be already bound.</p>

    <div class="note">
<div class="label">Note</div>
<div class="content"><p><p>Before OTP 23, <span class="code">Size</span> was restricted to be an
    integer or a variable bound to an integer.</p></p></div>
</div>

    <p>The value of <span class="code">Size</span> specifies the size of the segment in
    units (see below). The default value depends on the type (see
    below):</p>
    <ul>
      <li>For <span class="code">integer</span> it is 8.</li>
      <li>For <span class="code">float</span> it is 64.</li>
      <li>For <span class="code">binary</span> and <span class="code">bitstring</span> it is
      the whole binary or bit string.</li>
    </ul>
    <p>In matching, this default value is only
    valid for the last element. All other bit string or binary
    elements in the matching must have a size specification.</p>

    <p>For the <span class="code">utf8</span>, <span class="code">utf16</span>, and <span class="code">utf32</span> types,
    <span class="code">Size</span> must not be given. The size of the segment is implicitly
    determined by the type and value itself.</p>
    
    <p><span class="code">TypeSpecifierList</span> is a list of type specifiers, in any
    order, separated by hyphens (-). Default values are used for any
    omitted type specifiers.</p>
    <dl>
      <dt><strong><span class="code">Type</span>= <span class="code">integer</span> | <span class="code">float</span> | <span class="code">binary</span> |
             <span class="code">bytes</span> | <span class="code">bitstring</span> | <span class="code">bits</span> |
	     <span class="code">utf8</span> | <span class="code">utf16</span> | <span class="code">utf32</span> </strong></dt>
      <dd>The default is <span class="code">integer</span>. <span class="code">bytes</span> is a shorthand for 
      <span class="code">binary</span> and <span class="code">bits</span> is a shorthand for <span class="code">bitstring</span>.
      See below for more information about the <span class="code">utf</span> types.
      </dd>

      <dt><strong><span class="code">Signedness</span>= <span class="code">signed</span> | <span class="code">unsigned</span></strong></dt>
      <dd>Only matters for matching and when the type is <span class="code">integer</span>. 
      The default is <span class="code">unsigned</span>.</dd>

      <dt><strong><span class="code">Endianness</span>= <span class="code">big</span> | <span class="code">little</span> | <span class="code">native</span></strong></dt>
      <dd>Native-endian means that the endianness is resolved at load
       time to be either big-endian or little-endian, depending on
       what is native for the CPU that the Erlang machine is run on.
       Endianness only matters when the Type is either <span class="code">integer</span>,
       <span class="code">utf16</span>, <span class="code">utf32</span>, or <span class="code">float</span>. The default is <span class="code">big</span>.
       </dd>

      <dt><strong><span class="code">Unit</span>= <span class="code">unit:IntegerLiteral</span></strong></dt>
      <dd>The allowed range is 1..256. Defaults to 1 for <span class="code">integer</span>,
       <span class="code">float</span>, and <span class="code">bitstring</span>, and to 8 for <span class="code">binary</span>.
       No unit specifier must be given for the types 
       <span class="code">utf8</span>, <span class="code">utf16</span>, and <span class="code">utf32</span>.
       </dd>
    </dl>
    <p>The value of <span class="code">Size</span> multiplied with the unit gives
      the number of bits. A segment of type <span class="code">binary</span> must have 
      a size that is evenly divisible by 8. For a segment of type <span class="code">float</span>
      the size must be either 64, 32, or 16.</p>

    <div class="note">
<div class="label">Note</div>
<div class="content"><p><p>When constructing binaries, if the size <span class="code">N</span> of an integer
    segment is too small to contain the given integer, the most significant
    bits of the integer are silently discarded and only the <span class="code">N</span> least
    significant bits are put into the binary.</p></p></div>
</div>

    <p>The types <span class="code">utf8</span>, <span class="code">utf16</span>, and <span class="code">utf32</span> specifies
    encoding/decoding of the <strong>Unicode Transformation Format</strong>s UTF-8, UTF-16,
    and UTF-32, respectively.</p>

    <p>When constructing a segment of a <span class="code">utf</span> type, <span class="code">Value</span>
    must be an integer in the range 0..16#D7FF or
    16#E000....16#10FFFF. Construction
    fails with a <span class="code">badarg</span> exception if <span class="code">Value</span> is
    outside the allowed ranges. The size of the resulting binary
    segment depends on the type or <span class="code">Value</span>, or both:</p>
     <ul>
      <li>For <span class="code">utf8</span>, <span class="code">Value</span> is encoded in 1-4 bytes.</li>
      <li>For <span class="code">utf16</span>, <span class="code">Value</span> is encoded in 2 or 4 bytes.</li>
      <li>For <span class="code">utf32</span>, <span class="code">Value</span> is always be encoded in 4 bytes.</li>
    </ul>

    <p>When constructing, a literal string can be given followed
    by one of the UTF types, for example: <span class="code">&lt;&lt;"abc"/utf8&gt;&gt;</span>
    which is syntactic sugar for
    <span class="code">&lt;&lt;$a/utf8,$b/utf8,$c/utf8&gt;&gt;</span>.</p>

    <p>A successful match of a segment of a <span class="code">utf</span> type, results
    in an integer in the range 0..16#D7FF or  16#E000..16#10FFFF.
    The match fails if the returned value falls outside those ranges.</p>

    <p>A segment of type <span class="code">utf8</span> matches 1-4 bytes in the binary,
    if the binary at the match position contains a valid UTF-8 sequence.
    (See RFC-3629 or the Unicode standard.)</p>

    <p>A segment of type <span class="code">utf16</span> can match 2 or 4 bytes in the binary.
    The match fails if the binary at the match position does not contain
    a legal UTF-16 encoding of a Unicode code point. (See RFC-2781 or
    the Unicode standard.)</p>

    <p>A segment of type <span class="code">utf32</span> can match 4 bytes in the binary in the
    same way as an <span class="code">integer</span> segment matches 32 bits.
    The match fails if the resulting integer is outside the legal ranges
    mentioned above.</p>

    <p><strong>Examples:</strong></p>
    <div class="example"><pre>
1&gt; <span class="bold_code bc-12">Bin1 = &lt;&lt;1,17,42&gt;&gt;.</span>
&lt;&lt;1,17,42&gt;&gt;
2&gt; <span class="bold_code bc-12">Bin2 = &lt;&lt;"abc"&gt;&gt;.</span>
&lt;&lt;97,98,99&gt;&gt;
3&gt; <span class="bold_code bc-12">Bin3 = &lt;&lt;1,17,42:16&gt;&gt;.</span>
&lt;&lt;1,17,0,42&gt;&gt;
4&gt; <span class="bold_code bc-12">&lt;&lt;A,B,C:16&gt;&gt; = &lt;&lt;1,17,42:16&gt;&gt;.</span>
&lt;&lt;1,17,0,42&gt;&gt;
5&gt; <span class="bold_code bc-12">C.</span>
42
6&gt; <span class="bold_code bc-12">&lt;&lt;D:16,E,F&gt;&gt; = &lt;&lt;1,17,42:16&gt;&gt;.</span>
&lt;&lt;1,17,0,42&gt;&gt;
7&gt; <span class="bold_code bc-12">D.</span>
273
8&gt; <span class="bold_code bc-12">F.</span>
42
9&gt; <span class="bold_code bc-12">&lt;&lt;G,H/binary&gt;&gt; = &lt;&lt;1,17,42:16&gt;&gt;.</span>
&lt;&lt;1,17,0,42&gt;&gt;
10&gt; <span class="bold_code bc-12">H.</span>
&lt;&lt;17,0,42&gt;&gt;
11&gt; <span class="bold_code bc-12">&lt;&lt;G,J/bitstring&gt;&gt; = &lt;&lt;1,17,42:12&gt;&gt;.</span>
&lt;&lt;1,17,2,10:4&gt;&gt;
12&gt; <span class="bold_code bc-12">J.</span>
&lt;&lt;17,2,10:4&gt;&gt;
13&gt; <span class="bold_code bc-12">&lt;&lt;1024/utf8&gt;&gt;.</span>
&lt;&lt;208,128&gt;&gt;
</pre></div>
    <p>Notice that bit string patterns cannot be nested.</p>
    <p>Notice also that "<span class="code">B=&lt;&lt;1&gt;&gt;</span>" is interpreted as
      "<span class="code">B =&lt;&lt;1&gt;&gt;</span>" which is a syntax error. The correct way is
      to write a space after '=': "<span class="code">B= &lt;&lt;1&gt;&gt;</span>.</p>
    <p>More examples are provided in
    <span class="bold_code bc-18"><a href="../programming_examples/bit_syntax.html">
    Programming Examples</a></span>.</p>
  

  <a name="funs"></a><h3 id="fun-expressions" class="title-link" onMouseOver="document.getElementById('ghlink-fun-expressions-idm2068').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-fun-expressions-idm2068').style.visibility = 'hidden';">
<div class="title-name">8.18 
        Fun Expressions</div>
<div class="title-anchors"><span id="ghlink-fun-expressions-idm2068" class="ghlink-after"><a href="#fun-expressions" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/reference_manual/expressions.xml#L1274" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    
    <div class="example"><pre>
fun
    [Name](Pattern11,...,Pattern1N) [when GuardSeq1] -&gt;
              Body1;
    ...;
    [Name](PatternK1,...,PatternKN) [when GuardSeqK] -&gt;
              BodyK
end</pre></div>
    <p>A fun expression begins with the keyword <span class="code">fun</span> and ends
      with the keyword <span class="code">end</span>. Between them is to be a function
      declaration, similar to a
      <span class="bold_code bc-15"><a href="functions.html#syntax">regular function declaration</a></span>,
      except that the function name is optional and is to be a variable, if
      any.</p>
    <p>Variables in a fun head shadow the function name and both shadow
      variables in the function clause surrounding the fun expression.
      Variables bound in a fun body are local to the fun body.</p>
    <p>The return value of the expression is the resulting fun.</p>
    <p><strong>Examples:</strong></p>
    <div class="example"><pre>
1&gt; <span class="bold_code bc-12">Fun1 = fun (X) -&gt; X+1 end.</span>
#Fun&lt;erl_eval.6.39074546&gt;
2&gt; <span class="bold_code bc-12">Fun1(2).</span>
3
3&gt; <span class="bold_code bc-12">Fun2 = fun (X) when X&gt;=5 -&gt; gt; (X) -&gt; lt end.</span>
#Fun&lt;erl_eval.6.39074546&gt;
4&gt; <span class="bold_code bc-12">Fun2(7).</span>
gt
5&gt; <span class="bold_code bc-12">Fun3 = fun Fact(1) -&gt; 1; Fact(X) when X &gt; 1 -&gt; X * Fact(X - 1) end.</span>
#Fun&lt;erl_eval.6.39074546&gt;
6&gt; <span class="bold_code bc-12">Fun3(4).</span>
24</pre></div>
    <p>The following fun expressions are also allowed:</p>
    <div class="example"><pre>
fun Name/Arity
fun Module:Name/Arity</pre></div>
    <p>In <span class="code">Name/Arity</span>, <span class="code">Name</span> is an atom and <span class="code">Arity</span> is an integer.
      <span class="code">Name/Arity</span> must specify an existing local function. The expression is
      syntactic sugar for:</p>
    <div class="example"><pre>
fun (Arg1,...,ArgN) -&gt; Name(Arg1,...,ArgN) end</pre></div>
    <p>In <span class="code">Module:Name/Arity</span>, <span class="code">Module</span>, and <span class="code">Name</span> are atoms
      and <span class="code">Arity</span> is an integer. Starting from Erlang/OTP R15,
      <span class="code">Module</span>, <span class="code">Name</span>, and <span class="code">Arity</span> can also be variables.
      A fun defined in this way refers to the function <span class="code">Name</span>
      with arity <span class="code">Arity</span> in the <strong>latest</strong> version of module
      <span class="code">Module</span>. A fun defined in this way is not dependent on
      the code for the module in which it is defined.
      </p>
    <p>More examples are provided in
      <span class="bold_code bc-18"><a href="../programming_examples/funs.html">
      Programming Examples</a></span>.</p>
  

  <a name="catch"></a><h3 id="catch-and-throw" class="title-link" onMouseOver="document.getElementById('ghlink-catch-and-throw-idm2109').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-catch-and-throw-idm2109').style.visibility = 'hidden';">
<div class="title-name">8.19 
        Catch and Throw</div>
<div class="title-anchors"><span id="ghlink-catch-and-throw-idm2109" class="ghlink-after"><a href="#catch-and-throw" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/reference_manual/expressions.xml#L1331" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    
    <div class="example example-none"><pre>catch Expr</pre></div>
    <p>Returns the value of <span class="code">Expr</span> unless an exception
      occurs during the evaluation. In that case, the exception is
      caught.</p>
    <p>For exceptions of class <span class="code">error</span>, that is,
      run-time errors,
      <span class="code">{'EXIT',{Reason,Stack}}</span> is returned.</p>
    <p>For exceptions of class <span class="code">exit</span>, that is,
      the code called <span class="code">exit(Term)</span>,
      <span class="code">{'EXIT',Term}</span> is returned.</p>
    <p>For exceptions of class <span class="code">throw</span>, that is
      the code called <span class="code">throw(Term)</span>,
      <span class="code">Term</span> is returned.</p>
    <p><span class="code">Reason</span> depends on the type of error that occurred, and
      <span class="code">Stack</span> is the stack of recent function calls, see
      <span class="bold_code bc-15"><a href="errors.html#exit_reasons">Exit Reasons</a></span>.</p>
    <p><strong>Examples:</strong></p>
    <div class="example"><pre>
1&gt; <span class="bold_code bc-12">catch 1+2.</span>
3
2&gt; <span class="bold_code bc-12">catch 1+a.</span>
{'EXIT',{badarith,[...]}}</pre></div>
    <p>The BIF <span class="code">throw(Any)</span> can be used for non-local return from
      a function. It must be evaluated within a <span class="code">catch</span>, which
      returns the value <span class="code">Any</span>.</p>
      <p><strong>Example:</strong></p>
    <div class="example"><pre>
5&gt; <span class="bold_code bc-12">catch throw(hello).</span>
hello</pre></div>
    <p>If <span class="code">throw/1</span> is not evaluated within a catch, a
      <span class="code">nocatch</span> run-time error occurs.</p>
  

  <a name="try"></a><h3 id="try" class="title-link" onMouseOver="document.getElementById('ghlink-try-idm2146').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-try-idm2146').style.visibility = 'hidden';">
<div class="title-name">8.20 
        Try</div>
<div class="title-anchors"><span id="ghlink-try-idm2146" class="ghlink-after"><a href="#try" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/reference_manual/expressions.xml#L1368" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    
    <div class="example example-none"><pre>try Exprs
catch
    Class1:ExceptionPattern1[:Stacktrace] [when ExceptionGuardSeq1] -&gt;
        ExceptionBody1;
    ClassN:ExceptionPatternN[:Stacktrace] [when ExceptionGuardSeqN] -&gt;
        ExceptionBodyN
end</pre></div>
    <p>This is an enhancement of
      <span class="bold_code bc-17"><a href="#catch">catch</a></span>.
      It gives the possibility to:</p>
    <ul>
      <li>Distinguish between different exception classes.</li>
      <li>Choose to handle only the desired ones.</li>
      <li>Passing the others on to an enclosing
      <span class="code">try</span> or <span class="code">catch</span>, or to default error handling.</li>
    </ul>
    <p>Notice that although the keyword <span class="code">catch</span> is used in
      the <span class="code">try</span> expression, there is not a <span class="code">catch</span> expression
      within the <span class="code">try</span> expression.</p>
    <p>It returns the value of <span class="code">Exprs</span> (a sequence of expressions
      <span class="code">Expr1, ..., ExprN</span>) unless an exception occurs during
      the evaluation. In that case the exception is caught and
      the patterns <span class="code">ExceptionPattern</span> with the right exception
      class <span class="code">Class</span> are sequentially matched against the caught
      exception. If a match succeeds and the optional guard sequence
      <span class="code">ExceptionGuardSeq</span> is true, the corresponding
      <span class="code">ExceptionBody</span> is evaluated to become the return value.</p>
    <p><span class="code">Stacktrace</span>, if specified, must be the name of a variable
      (not a pattern). The stack trace is bound to the variable when
      the corresponding <span class="code">ExceptionPattern</span> matches.</p>
    <p>If an exception occurs during evaluation of <span class="code">Exprs</span> but
      there is no matching <span class="code">ExceptionPattern</span> of the right
      <span class="code">Class</span> with a true guard sequence, the exception is passed
      on as if <span class="code">Exprs</span> had not been enclosed in a <span class="code">try</span>
      expression.</p>
    <p>If an exception occurs during evaluation of <span class="code">ExceptionBody</span>,
      it is not caught.</p>
    <p>It is allowed to omit <span class="code">Class</span> and <span class="code">Stacktrace</span>.
      An omitted <span class="code">Class</span> is shorthand for <span class="code">throw</span>:</p>

    <div class="example example-none"><pre>try Exprs
catch
    ExceptionPattern1 [when ExceptionGuardSeq1] -&gt;
        ExceptionBody1;
    ExceptionPatternN [when ExceptionGuardSeqN] -&gt;
        ExceptionBodyN
end</pre></div>

    <p>The <span class="code">try</span> expression can have an <span class="code">of</span>
      section:
      </p>
    <div class="example example-none"><pre>try Exprs of
    Pattern1 [when GuardSeq1] -&gt;
        Body1;
    ...;
    PatternN [when GuardSeqN] -&gt;
        BodyN
catch
    Class1:ExceptionPattern1[:Stacktrace] [when ExceptionGuardSeq1] -&gt;
        ExceptionBody1;
    ...;
    ClassN:ExceptionPatternN[:Stacktrace] [when ExceptionGuardSeqN] -&gt;
        ExceptionBodyN
end</pre></div>
    <p>If the evaluation of <span class="code">Exprs</span> succeeds without an exception,
      the patterns <span class="code">Pattern</span> are sequentially matched against
      the result in the same way as for a
      <span class="bold_code bc-17"><a href="#case">case</a></span> expression, except that if
      the matching fails, a <span class="code">try_clause</span> run-time error occurs instead of a
      <span class="code">case_clause</span>.</p>
    <p>Only exceptions occurring during the evaluation of <span class="code">Exprs</span> can be
      caught by the <span class="code">catch</span> section. Exceptions occurring in a <span class="code">Body</span>
      or due to a failed match are not caught.</p>
    <p>The <span class="code">try</span> expression can also be augmented with an
      <span class="code">after</span> section, intended to be used for cleanup with side
      effects:</p>
    <div class="example example-none"><pre>try Exprs of
    Pattern1 [when GuardSeq1] -&gt;
        Body1;
    ...;
    PatternN [when GuardSeqN] -&gt;
        BodyN
catch
    Class1:ExceptionPattern1[:Stacktrace] [when ExceptionGuardSeq1] -&gt;
        ExceptionBody1;
    ...;
    ClassN:ExceptionPatternN[:Stacktrace] [when ExceptionGuardSeqN] -&gt;
        ExceptionBodyN
after
    AfterBody
end</pre></div>
    <p><span class="code">AfterBody</span> is evaluated after either <span class="code">Body</span> or
      <span class="code">ExceptionBody</span>, no matter which one. The evaluated value of
      <span class="code">AfterBody</span> is lost; the return value of the <span class="code">try</span>
      expression is the same with an <span class="code">after</span> section as without.</p>
    <p>Even if an exception occurs during evaluation of <span class="code">Body</span> or
      <span class="code">ExceptionBody</span>, <span class="code">AfterBody</span> is evaluated. In this case
      the exception is passed on after <span class="code">AfterBody</span> has been
      evaluated, so the exception from the <span class="code">try</span> expression is
      the same with an <span class="code">after</span> section as without.</p>
    <p>If an exception occurs during evaluation of <span class="code">AfterBody</span>
      itself, it is not caught. So if <span class="code">AfterBody</span> is evaluated after
      an exception in <span class="code">Exprs</span>, <span class="code">Body</span>, or <span class="code">ExceptionBody</span>,
      that exception is lost and masked by the exception in
      <span class="code">AfterBody</span>.</p>
    <p>The <span class="code">of</span>, <span class="code">catch</span>, and <span class="code">after</span> sections are all
      optional, as long as there is at least a <span class="code">catch</span> or an
      <span class="code">after</span> section. So the following are valid <span class="code">try</span>
      expressions:</p>
    <div class="example example-none"><pre>try Exprs of 
    Pattern when GuardSeq -&gt; 
        Body 
after 
    AfterBody 
end

try Exprs
catch 
    ExpressionPattern -&gt; 
        ExpressionBody
after
    AfterBody
end

try Exprs after AfterBody end</pre></div>
    <p>Next is an example of using <span class="code">after</span>. This closes the file,
      even in the event of exceptions in <span class="code">file:read/2</span> or in
      <span class="code">binary_to_term/1</span>. The exceptions are the same as
      without the <span class="code">try</span>...<span class="code">after</span>...<span class="code">end</span> expression:</p>
    <div class="example example-none"><pre>termize_file(Name) -&gt;
    {ok,F} = file:open(Name, [read,binary]),
    try
        {ok,Bin} = file:read(F, 1024*1024),
        binary_to_term(Bin)
    after
        file:close(F)
    end.</pre></div>
    <p>Next is an example of using <span class="code">try</span> to emulate <span class="code">catch Expr</span>:</p>
    <div class="example example-none"><pre>try Expr
catch
    throw:Term -&gt; Term;
    exit:Reason -&gt; {'EXIT',Reason}
    error:Reason:Stk -&gt; {'EXIT',{Reason,Stk}}
end</pre></div>
  

  <h3 id="parenthesized-expressions" class="title-link" onMouseOver="document.getElementById('ghlink-parenthesized-expressions-idm2246').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-parenthesized-expressions-idm2246').style.visibility = 'hidden';">
<div class="title-name">8.21 
        Parenthesized Expressions</div>
<div class="title-anchors"><span id="ghlink-parenthesized-expressions-idm2246" class="ghlink-after"><a href="#parenthesized-expressions" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/reference_manual/expressions.xml#L1524" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    <div class="example"><pre>
(Expr)</pre></div>
    <p>Parenthesized expressions are useful to override
      <span class="bold_code bc-17"><a href="#prec">operator precedences</a></span>,
      for example, in arithmetic expressions:</p>
    <div class="example"><pre>
1&gt; <span class="bold_code bc-12">1 + 2 * 3.</span>
7
2&gt; <span class="bold_code bc-12">(1 + 2) * 3.</span>
9</pre></div>
  

  <h3 id="block-expressions" class="title-link" onMouseOver="document.getElementById('ghlink-block-expressions-idm2254').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-block-expressions-idm2254').style.visibility = 'hidden';">
<div class="title-name">8.22 
        Block Expressions</div>
<div class="title-anchors"><span id="ghlink-block-expressions-idm2254" class="ghlink-after"><a href="#block-expressions" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/reference_manual/expressions.xml#L1538" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    <div class="example"><pre>
begin
   Expr1,
   ...,
   ExprN
end</pre></div>
    <p>Block expressions provide a way to group a sequence of
      expressions, similar to a clause body. The return value is
      the value of the last expression <span class="code">ExprN</span>.</p>
  

  <a name="lcs"></a><h3 id="list-comprehensions" class="title-link" onMouseOver="document.getElementById('ghlink-list-comprehensions-idm2259').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-list-comprehensions-idm2259').style.visibility = 'hidden';">
<div class="title-name">8.23 
        List Comprehensions</div>
<div class="title-anchors"><span id="ghlink-list-comprehensions-idm2259" class="ghlink-after"><a href="#list-comprehensions" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/reference_manual/expressions.xml#L1551" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    
    <p>List comprehensions is a feature of many modern functional
      programming languages. Subject to certain rules, they provide a
      succinct notation for generating elements in a list.</p>
    <p>List comprehensions are analogous to set comprehensions in
      Zermelo-Frankel set theory and are called ZF expressions in
      Miranda. They are analogous to the <span class="code">setof</span> and
      <span class="code">findall</span> predicates in Prolog.</p>
    <p>List comprehensions are written with the following syntax:</p>
    <div class="example"><pre>
[Expr || Qualifier1,...,QualifierN]</pre></div>
    <p>Here, <span class="code">Expr</span> is an arbitrary expression, and each
      <span class="code">Qualifier</span> is either a generator or a filter.</p>
    <ul>
      <li>A <strong>generator</strong> is written as:      <br>

         <span class="code">Pattern &lt;- ListExpr</span>.      <br>
<span class="code">ListExpr</span> must be an expression, which evaluates to a
       list of terms.</li>
<li>A <strong>bit string generator</strong> is written as:      <br>

         <span class="code">BitstringPattern &lt;= BitStringExpr</span>.      <br>
<span class="code">BitStringExpr</span> must be an expression, which evaluates to a
       bitstring.</li>
      <li>A <strong>filter</strong> is an expression, which evaluates to
      <span class="code">true</span> or <span class="code">false</span>.</li>
    </ul>
    <p>The variables in the generator patterns shadow previously bound variables,
    including variables bound in a previous generator pattern.</p>
    <p>A list comprehension returns a list, where the elements are the
    result of evaluating <span class="code">Expr</span> for each combination of generator
    list elements and bit string generator elements, for which all
    filters are true.</p>
    <p><strong>Example:</strong></p>
    <div class="example"><pre>
1&gt; <span class="bold_code bc-12">[X*2 || X &lt;- [1,2,3]].</span>
[2,4,6]</pre></div>
    <p>When there are no generators or bit string generators, a list comprehension
    returns either a list with one element (the result of evaluating <span class="code">Expr</span>)
    if all filters are true or an empty list otherwise.</p>
    <p><strong>Example:</strong></p>
    <div class="example"><pre>
1&gt; <span class="bold_code bc-12">[2 || is_integer(2)].</span>
[2]
2&gt; <span class="bold_code bc-12">[x || is_integer(x)].</span>
[]</pre></div>
    <p>More examples are provided in
    <span class="bold_code bc-18"><a href="../programming_examples/list_comprehensions.html">
    Programming Examples.</a></span></p>

  

<h3 id="bit-string-comprehensions" class="title-link" onMouseOver="document.getElementById('ghlink-bit-string-comprehensions-idm2304').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-bit-string-comprehensions-idm2304').style.visibility = 'hidden';">
<div class="title-name">8.24 
        Bit String Comprehensions</div>
<div class="title-anchors"><span id="ghlink-bit-string-comprehensions-idm2304" class="ghlink-after"><a href="#bit-string-comprehensions" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/reference_manual/expressions.xml#L1605" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
     
   
    <p>Bit string comprehensions are
    analogous to List Comprehensions. They are used to generate bit strings
    efficiently and succinctly.</p> 
    <p>Bit string comprehensions are written with
    the following syntax:</p>
    <div class="example"><pre>
&lt;&lt; BitStringExpr || Qualifier1,...,QualifierN &gt;&gt;</pre></div>
    <p><span class="code">BitStringExpr</span> is an expression that evalutes to a bit
    string. If <span class="code">BitStringExpr</span> is a function call, it must be
    enclosed in parentheses.  Each <span class="code">Qualifier</span> is either a
    generator, a bit string generator or a filter.</p>
    <ul>
 <li>A <strong>generator</strong> is written as:      <br>
        <span class="code">Pattern &lt;- ListExpr</span>.      <br>
       <span class="code">ListExpr</span> must be an expression that evaluates to a
       list of terms.</li>
      <li>A <strong>bit string generator</strong> is written as:      <br>

         <span class="code">BitstringPattern &lt;= BitStringExpr</span>.      <br>
<span class="code">BitStringExpr</span> must be an expression that evaluates to a
       bitstring.</li>
      <li>A <strong>filter</strong> is an expression that evaluates to
      <span class="code">true</span> or <span class="code">false</span>.</li>
    </ul>
    <p>The variables in the generator patterns shadow previously bound variables,
    including variables bound in a previous generator pattern.</p>
    <p>A bit string comprehension returns a bit string, which is 
      created by concatenating the results of evaluating <span class="code">BitString</span> 
      for each combination of bit string generator elements, for which all
      filters are true.</p>
    <p><strong>Example:</strong></p>
    <div class="example"><pre>
1&gt; <span class="bold_code bc-12">&lt;&lt; &lt;&lt; (X*2) &gt;&gt; ||
&lt;&lt;X&gt;&gt; &lt;= &lt;&lt; 1,2,3 &gt;&gt; &gt;&gt;.</span>
&lt;&lt;2,4,6&gt;&gt;</pre></div>
    <p>More examples are provided in
    <span class="bold_code bc-18"><a href="../programming_examples/bit_syntax.html">
    Programming Examples.</a></span></p>
  

  <a name="guards"></a><h3 id="guard-sequences" class="title-link" onMouseOver="document.getElementById('ghlink-guard-sequences-idm2339').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-guard-sequences-idm2339').style.visibility = 'hidden';">
<div class="title-name">8.25 
        Guard Sequences</div>
<div class="title-anchors"><span id="ghlink-guard-sequences-idm2339" class="ghlink-after"><a href="#guard-sequences" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/reference_manual/expressions.xml#L1648" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    

    <p>A <strong>guard sequence</strong> is a sequence of guards, separated
      by semicolon (;). The guard sequence is true if at least one of
      the guards is true. (The remaining guards, if any, are not
      evaluated.)</p>
    <p><span class="code">Guard1;...;GuardK</span></p>
    <p>A <strong>guard</strong> is a sequence of guard expressions, separated
      by comma (,). The guard is true if all guard expressions
      evaluate to <span class="code">true</span>.</p>
    <p><span class="code">GuardExpr1,...,GuardExprN</span></p>
  

  <a name="guard_expressions"></a><h3 id="guard-expressions" class="title-link" onMouseOver="document.getElementById('ghlink-guard-expressions-idm2351').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-guard-expressions-idm2351').style.visibility = 'hidden';">
<div class="title-name">8.26 
        Guard Expressions</div>
<div class="title-anchors"><span id="ghlink-guard-expressions-idm2351" class="ghlink-after"><a href="#guard-expressions" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/reference_manual/expressions.xml#L1663" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    
    <p>The set of valid <strong>guard expressions</strong> is a subset of the
    set of valid Erlang expressions.  The reason for restricting the
    set of valid expressions is that evaluation of a guard expression
    must be guaranteed to be free of side effects. Valid guard
    expressions are the following:</p>
    <ul>
      <li>Variables</li>
      <li>Constants (atoms, integer, floats, lists, tuples, records,
      binaries, and maps)</li>
      <li>Expressions that construct atoms, integer, floats, lists,
      tuples, records, binaries, and maps</li>
      <li>Expressions that update a map</li>
      <li>The record epxressions <span class="code">Expr#Name.Field</span> and <span class="code">#Name.Field</span>
</li>
      <li>Calls to the BIFs specified in tables <strong>Type Test BIFs</strong> and
      <strong>Other BIFs Allowed in Guard Expressions</strong>
</li>
      <li>Term comparisons</li>
      <li>Arithmetic expressions</li>
      <li>Boolean expressions</li>
      <li>Short-circuit expressions (<span class="code">andalso</span>/<span class="code">orelse</span>)</li>
    </ul>
    <div class="doc-table-wrapper">
<table class="doc-table">
<tr>
        <td align="left" valign="middle"><span class="code">is_atom/1</span></td>
      </tr>
<tr>
        <td align="left" valign="middle"><span class="code">is_binary/1</span></td>
      </tr>
<tr>
        <td align="left" valign="middle"><span class="code">is_bitstring/1</span></td>
      </tr>
<tr>
        <td align="left" valign="middle"><span class="code">is_boolean/1</span></td>
      </tr>
<tr>
        <td align="left" valign="middle"><span class="code">is_float/1</span></td>
      </tr>
<tr>
        <td align="left" valign="middle"><span class="code">is_function/1</span></td>
      </tr>
<tr>
        <td align="left" valign="middle"><span class="code">is_function/2</span></td>
      </tr>
<tr>
        <td align="left" valign="middle"><span class="code">is_integer/1</span></td>
      </tr>
<tr>
        <td align="left" valign="middle"><span class="code">is_list/1</span></td>
      </tr>
<tr>
        <td align="left" valign="middle"><span class="code">is_map/1</span></td>
      </tr>
<tr>
        <td align="left" valign="middle"><span class="code">is_number/1</span></td>
      </tr>
<tr>
        <td align="left" valign="middle"><span class="code">is_pid/1</span></td>
      </tr>
<tr>
        <td align="left" valign="middle"><span class="code">is_port/1</span></td>
      </tr>
<tr>
        <td align="left" valign="middle"><span class="code">is_record/2</span></td>
      </tr>
<tr>
        <td align="left" valign="middle"><span class="code">is_record/3</span></td>
      </tr>
<tr>
        <td align="left" valign="middle"><span class="code">is_reference/1</span></td>
      </tr>
<tr>
        <td align="left" valign="middle"><span class="code">is_tuple/1</span></td>
      </tr>
</table>
<p class="doc-table-caption">Table
        8.4:
         
        Type Test BIFs</p>
</div>
    <p>Notice that most type test BIFs have older equivalents, without
      the <span class="code">is_</span> prefix. These old BIFs are retained for backwards
      compatibility only and are not to be used in new code. They are
      also only allowed at top level. For example, they are not allowed
      in Boolean expressions in guards.</p>
    <div class="doc-table-wrapper">
<table class="doc-table">
<tr>
        <td align="left" valign="middle"><span class="code">abs(Number)</span></td>
      </tr>
<tr>
        <td align="left" valign="middle"><span class="code">bit_size(Bitstring)</span></td>
      </tr>
<tr>
        <td align="left" valign="middle"><span class="code">byte_size(Bitstring)</span></td>
      </tr>
<tr>
        <td align="left" valign="middle"><span class="code">element(N, Tuple)</span></td>
      </tr>
<tr>
        <td align="left" valign="middle"><span class="code">float(Term)</span></td>
      </tr>
<tr>
        <td align="left" valign="middle"><span class="code">hd(List)</span></td>
      </tr>
<tr>
        <td align="left" valign="middle"><span class="code">is_map_key(Key, Map)</span></td>
      </tr>
<tr>
        <td align="left" valign="middle"><span class="code">length(List)</span></td>
      </tr>
<tr>
        <td align="left" valign="middle"><span class="code">map_get(Key, Map)</span></td>
      </tr>
<tr>
        <td align="left" valign="middle"><span class="code">map_size(Map)</span></td>
      </tr>
<tr>
        <td align="left" valign="middle"><span class="code">node()</span></td>
      </tr>
<tr>
        <td align="left" valign="middle"><span class="code">node(Pid|Ref|Port)</span></td>
      </tr>
<tr>
        <td align="left" valign="middle"><span class="code">round(Number)</span></td>
      </tr>
<tr>
        <td align="left" valign="middle"><span class="code">self()</span></td>
      </tr>
<tr>
        <td align="left" valign="middle"><span class="code">size(Tuple|Bitstring)</span></td>
      </tr>
<tr>
        <td align="left" valign="middle"><span class="code">tl(List)</span></td>
      </tr>
<tr>
        <td align="left" valign="middle"><span class="code">trunc(Number)</span></td>
      </tr>
<tr>
        <td align="left" valign="middle"><span class="code">tuple_size(Tuple)</span></td>
      </tr>
</table>
<p class="doc-table-caption">Table
        8.5:
         
        Other BIFs Allowed in Guard Expressions</p>
</div>

    <p>If an arithmetic expression, a Boolean expression, a
    short-circuit expression, or a call to a guard BIF fails (because
    of invalid arguments), the entire guard fails. If the guard was
    part of a guard sequence, the next guard in the sequence (that is,
    the guard following the next semicolon) is evaluated.</p>

  

  <a name="prec"></a><h3 id="operator-precedence" class="title-link" onMouseOver="document.getElementById('ghlink-operator-precedence-idm2485').style.visibility = 'visible';" onMouseOut="document.getElementById('ghlink-operator-precedence-idm2485').style.visibility = 'hidden';">
<div class="title-name">8.27 
        Operator Precedence</div>
<div class="title-anchors"><span id="ghlink-operator-precedence-idm2485" class="ghlink-after"><a href="#operator-precedence" title="Link to this place!"><span class="paperclip-after"></span></a><a href="https://github.com/erlang/otp/edit/maint/system/doc/reference_manual/expressions.xml#L1811" title="Found an issue with the documentation? Fix it by clicking here!"><span class="pencil-after"></span></a></span></div>
</h3>
    
    
    <p>Operator precedence in falling priority:</p>
    <div class="doc-table-wrapper">
<table class="doc-table">
<tr>
        <td align="left" valign="middle">:</td>
        <td align="left" valign="middle"> </td>
      </tr>
<tr>
        <td align="left" valign="middle">#</td>
        <td align="left" valign="middle"> </td>
      </tr>
<tr>
        <td align="left" valign="middle">Unary + - bnot not</td>
        <td align="left" valign="middle"> </td>
      </tr>
<tr>
        <td align="left" valign="middle">/ * div rem band and</td>
        <td align="left" valign="middle">Left associative</td>
      </tr>
<tr>
        <td align="left" valign="middle">+ - bor bxor bsl bsr or xor</td>
        <td align="left" valign="middle">Left associative</td>
      </tr>
<tr>
        <td align="left" valign="middle">++ --</td>
        <td align="left" valign="middle">Right associative</td>
      </tr>
<tr>
        <td align="left" valign="middle">== /= =&lt; &lt; &gt;= &gt; =:= =/=</td>
        <td align="left" valign="middle"> </td>
      </tr>
<tr>
        <td align="left" valign="middle">andalso</td>
        <td align="left" valign="middle"> </td>
      </tr>
<tr>
        <td align="left" valign="middle">orelse</td>
        <td align="left" valign="middle"> </td>
      </tr>
<tr>
        <td align="left" valign="middle">= !</td>
        <td align="left" valign="middle">Right associative</td>
      </tr>
<tr>
        <td align="left" valign="middle">catch</td>
        <td align="left" valign="middle"> </td>
      </tr>
</table>
<p class="doc-table-caption">Table
        8.6:
         
        Operator Precedence</p>
</div>
    <p>When evaluating an expression, the operator with the highest
      priority is evaluated first. Operators with the same priority
      are evaluated according to their associativity.</p>
      <p><strong>Example:</strong></p>
      <p>The left associative arithmetic operators are evaluated left to
      right:</p>
    <div class="example"><pre>
<span class="bold_code bc-12">6 + 5 * 4 - 3 / 2</span> evaluates to
<span class="bold_code bc-12">6 + 20 - 1.5</span> evaluates to
<span class="bold_code bc-12">26 - 1.5</span> evaluates to
<span class="bold_code bc-12">24.5</span></pre></div>
  
</div>
<div class="footer">
<hr>
<p>Copyright © 2003-2021 Ericsson AB. All Rights Reserved.</p>
</div>
</div>
</div>
<script type="text/javascript">window.__otpTopDocDir = '../js/';</script><script type="text/javascript" src="../js/highlight.js"></script>
<script src="/assets/js/doc-search.bundle.js"></script>
</body>
</html>
