<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.38.1">
    <meta name="project" content="sasl v4.3">


<meta name="major-vsn" content="28">
<meta name="exdoc:full-text-search-url" content="/doc/search.html?v=28&q=">
<link rel="canonical" href="https://www.erlang.org/doc/apps/sasl/release_handler.html" />
    <title>release_handler â€” sasl v4.3</title>

    <link rel="stylesheet" href="dist/html-erlang-ZK43ZOAC.css" />

    <script defer src="dist/sidebar_items-9352BC19.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-DPJLHKSM.js"></script>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="../../index.html" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="sasl" />
        </a>

      <div>
        <a href="../../index.html" class="sidebar-projectName" translate="no">
sasl
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v4.3
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras=""></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-module" id="main" data-type="modules">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of sasl</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search" tabindex="-1">
            <i class="ri-search-2-line ri-lg" aria-hidden="true"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>
      <span translate="no">release_handler</span> 
      <small class="app-vsn" translate="no">(sasl v4.3)</small>

    </h1>

      <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/sasl/src/release_handler.erl#L22" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

  </div>


    <section id="moduledoc">
<p>Unpacking and Installation of Release Packages</p><p>The <em>release handler</em> process belongs to the SASL application, which is
responsible for <em>release handling</em>, that is, unpacking, installation, and
removal of release packages.</p><p>An introduction to release handling and an example is provided by
<a href="../../system/release_handling.html">Release Handling section in OTP Design Principles</a>.</p><p>A <em>release package</em> is a compressed tar file containing code for a certain
version of a release, created by calling
<a href="systools.html#make_tar/1"><code class="inline">systools:make_tar/1,2</code></a>. The release package is to be
located in the <code class="inline">$ROOT/releases</code> directory of the previous version of the
release, where <code class="inline">$ROOT</code> is the installation root directory,
<a href="../../apps/kernel/code.html#root_dir/0"><code class="inline">code:root_dir()</code></a>. Another <code class="inline">releases</code> directory can be
specified using the SASL configuration parameter <code class="inline">releases_dir</code> or the OS
environment variable <code class="inline">RELDIR</code>. The release handler must have write access to
this directory to install the new release. The persistent state of the release
handler is stored there in a file called <code class="inline">RELEASES</code>.</p><p>A release package is always to contain:</p><ul><li>A release resource file, <code class="inline">Name.rel</code></li><li>A boot script, <code class="inline">Name.boot</code></li></ul><p>The <code class="inline">.rel</code> file contains information about the release: its name, version, and
which ERTS and application versions it uses.</p><p>A release package can also contain:</p><ul><li>A release upgrade file, <code class="inline">relup</code></li><li>A system configuration file, <code class="inline">sys.config</code></li><li>A system configuration source file, <code class="inline">sys.config.src</code></li></ul><p>The <code class="inline">relup</code> file contains instructions for how to upgrade to, or downgrade from,
this version of the release.</p><p>The release package can be <em>unpacked</em>, which extracts the files. An unpacked
release can be <em>installed</em>. The currently used version of the release is then
upgraded or downgraded to the specified version by evaluating the instructions
in the <code class="inline">relup</code> file. An installed release can be made <em>permanent</em>. Only one
permanent release can exist in the system, and this release is used if the
system is restarted. An installed release, except the permanent one, can be
<em>removed</em>. When a release is removed, all files belonging to that release only
are deleted.</p><p>Each release version has a status, which can be <code class="inline">unpacked</code>, <code class="inline">current</code>,
<code class="inline">permanent</code>, or <code class="inline">old</code>. There is always one latest release, which either has
status <code class="inline">permanent</code> (normal case) or <code class="inline">current</code> (installed, but not yet made
permanent). The meaning of the status values are illustrated in the following
table:</p><pre><code class="text">        Status     Action                NextStatus
        -------------------------------------------
        -          unpack                unpacked
        unpacked   install               current
                   remove                -
        current    make_permanent        permanent
                   install other         old
                   remove                -
        permanent  make other permanent  old
                   install               permanent
        old        reboot_old            permanent
                   install               current
                   remove                -</code></pre><p>The release handler process is a locally registered process on each node. When a
release is installed in a distributed system, the release handler on each node
must be called. The release installation can be synchronized between nodes. From
an operator view, it can be unsatisfactory to specify each node. The aim is to
install one release package in the system, no matter how many nodes there are.
It is recommended that software management functions are written that take care
of this problem. Such a function can have knowledge of the system architecture,
so it can contact each individual release handler to install the package.</p><p>For release handling to work properly, the runtime system must know which
release it is running. It must also be able to change (in runtime) which boot
script and system configuration file are to be used if the system is restarted.
This is taken care of automatically if Erlang is started as an embedded system.
Read about this in <a href="../../system/index.html">Embedded System</a> in <em>System
Documentation</em>. In this case, the system configuration file <code class="inline">sys.config</code> is
mandatory.</p><p>The installation of a new release can restart the system. Which program to use
is specified by the SASL configuration parameter <code class="inline">start_prg</code>, which defaults to
<code class="inline">$ROOT/bin/start</code>.</p><p>The emulator restart on Windows NT expects that the system is started using the
<code class="inline">erlsrv</code> program (as a service). Furthermore, the release handler expects that
the service is named <code class="inline">NodeName</code>_<code class="inline">Release</code>, where <code class="inline">NodeName</code> is the first part
of the Erlang node name (up to, but not including the &quot;@&quot;) and <code class="inline">Release</code> is the
current release version. The release handler furthermore expects that a program
like <code class="inline">start_erl.exe</code> is specified as &quot;machine&quot; to <code class="inline">erlsrv</code>. During upgrading
with restart, a new service is registered and started. The new service is set to
automatic and the old service is removed when the new release is made permanent.</p><p>The release handler at a node running on a diskless machine, or with a read-only
file system, must be configured accordingly using the following SASL
configuration parameters (for details, see <a href="sasl_app.html">sasl(6)</a>):</p><ul><li><p><strong><code class="inline">masters</code></strong> - This node uses some master nodes to store and fetch release
information. All master nodes must be operational whenever release information
is written by this node.</p></li><li><p><strong><code class="inline">client_directory</code></strong> - The <code class="inline">client_directory</code> in the directory structure of
the master nodes must be specified.</p></li><li><p><strong><code class="inline">static_emulator</code></strong> - This parameter specifies if the Erlang emulator is
statically installed at the client node. A node with a static emulator cannot
dynamically switch to a new emulator, as the executable files are statically
written into memory.</p></li></ul><p>The release handler can also be used to unpack and install release packages when
not running Erlang as an embedded system. However, in this case the user must
somehow ensure that correct boot scripts and configuration files are used if the
system must be restarted.</p><p>Functions are provided for using another file structure than the structure
defined in OTP. These functions can be used to test a release upgrade locally.</p><h2 id="module-typical-error-reasons" class="section-heading"><a href="#module-typical-error-reasons" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Typical Error Reasons</span></h2><ul><li><p><strong><code class="inline">{bad_masters, Masters}</code></strong> - The master nodes <code class="inline">Masters</code> are not alive.</p></li><li><p><strong><code class="inline">{bad_rel_file, File}</code></strong> - Specified <code class="inline">.rel</code> file <code class="inline">File</code> cannot be read or
does not contain a single term.</p></li><li><p><strong><code class="inline">{bad_rel_data, Data}</code></strong> - Specified <code class="inline">.rel</code> file does not contain a
recognized release specification, but another term <code class="inline">Data</code>.</p></li><li><p><strong><code class="inline">{bad_relup_file, File}</code></strong> - Specified <code class="inline">relup</code> file <code class="inline">Relup</code> contains bad
data.</p></li><li><p><strong><code class="inline">{cannot_extract_file, Name, Reason}</code></strong> - Problems when extracting from a
tar file, <a href="../../apps/stdlib/erl_tar.html#extract/2"><code class="inline">erl_tar:extract/2</code></a> returned <code class="inline">{error, {Name, Reason}}</code>.</p></li><li><p><strong><code class="inline">{existing_release, Vsn}</code></strong> - Specified release version <code class="inline">Vsn</code> is already in
use.</p></li><li><p><strong><code class="inline">{Master, Reason, When}</code></strong> - Some operation, indicated by the term <code class="inline">When</code>,
failed on the master node <code class="inline">Master</code> with the specified error reason <code class="inline">Reason</code>.</p></li><li><p><strong><code class="inline">{no_matching_relup, Vsn, CurrentVsn}</code></strong> - Cannot find a script for
upgrading/downgrading between <code class="inline">CurrentVsn</code> and <code class="inline">Vsn</code>.</p></li><li><p><strong><code class="inline">{no_such_directory, Path}</code></strong> - The directory <code class="inline">Path</code>does not exist.</p></li><li><p><strong><code class="inline">{no_such_file, Path}</code></strong> - The path <code class="inline">Path</code> (file or directory) does not
exist.</p></li><li><p><strong><code class="inline">{no_such_file, {Master, Path}}</code></strong> - The path <code class="inline">Path</code> (file or directory)
does not exist at the master node <code class="inline">Master</code>.</p></li><li><p><strong><code class="inline">{no_such_release, Vsn}</code></strong> - The specified release version <code class="inline">Vsn</code> does not
exist.</p></li><li><p><strong><code class="inline">{not_a_directory, Path}</code></strong> - <code class="inline">Path</code> exists but is not a directory.</p></li><li><p><strong><code class="inline">{Posix, File}</code></strong> - Some file operation failed for <code class="inline">File</code>. <code class="inline">Posix</code> is an
atom named from the Posix error codes, such as <code class="inline">enoent</code>, <code class="inline">eacces</code>, or
<code class="inline">eisdir</code>. See <a href="../../apps/kernel/file.html"><code class="inline">file</code></a> in Kernel.</p></li><li><p><strong><code class="inline">Posix</code></strong> - Some file operation failed, as for the previous item in the
list.</p></li></ul><h2 id="module-application-upgrade-downgrade" class="section-heading"><a href="#module-application-upgrade-downgrade" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Application Upgrade/Downgrade</span></h2><p>The functions in the <a href="#application-upgrade-downgrade">Application Upgrade/Downgrade</a>
section can be used to test upgrade and downgrade of single applications
(instead of upgrading/downgrading an entire release). A script corresponding to
the instructions in the relup file is created on-the-fly, based on the .appup
file for the application, and evaluated exactly in the same way as
release_handler does.</p><section role="note" class="admonition warning"><h4 class="admonition-title warning">Warning</h4><p>These functions are primarily intended for simplified testing of .appup files.
They are not run within the context of the release_handler process.
They must therefore not be used together with calls to install_release/1,2,
as this causes the release_handler to end up in an inconsistent state.</p><p>No persistent information is updated, so these functions can be used on ay
Erlang node, embedded or not. Also, using these functions does not affect which
code is loaded if there is a reboot.</p><p>If the upgrade or downgrade fails, the application can end up in an
inconsistent state.</p></section><h2 id="module-see-also" class="section-heading"><a href="#module-see-also" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">See Also</span></h2><p><a href="../../system/index.html">OTP Design Principles</a>,
<a href="../../apps/kernel/config.html"><code class="inline">config</code></a>, <a href="rel.html"><code class="inline">rel</code></a>, <a href="relup.html"><code class="inline">relup</code></a>,
<a href="script.html"><code class="inline">script</code></a>, <a href="../../apps/stdlib/sys.html"><code class="inline">sys</code></a>, <a href="systools.html"><code class="inline">systools</code></a></p>
    </section>

</div>

  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Summary</span>
    </h1>
<div class="summary-application-upgrade-downgrade summary">
  <h2>
    <a href="#application-upgrade-downgrade">Application Upgrade/Downgrade</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#downgrade_app/2" data-no-tooltip="" translate="no">downgrade_app(App, Dir)</a>

      </div>

        <div class="summary-synopsis"><p>Equivalent to <a><code class="inline">downgrade_app/3</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#downgrade_app/3" data-no-tooltip="" translate="no">downgrade_app(App, OldVsn, Dir)</a>

      </div>

        <div class="summary-synopsis"><p>Downgrades an application <code class="inline">App</code> from the current version to a previous version
<code class="inline">OldVsn</code> located in <code class="inline">Dir</code> according to the <code class="inline">.appup</code> file.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#downgrade_script/3" data-no-tooltip="" translate="no">downgrade_script(App, OldVsn, Dir)</a>

      </div>

        <div class="summary-synopsis"><p>Tries to find an application downgrade script for <code class="inline">App</code> from the current version
to a previous version <code class="inline">OldVsn</code> located in <code class="inline">Dir</code>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#eval_appup_script/4" data-no-tooltip="" translate="no">eval_appup_script(App, ToVsn, ToDir, Script)</a>

      </div>

        <div class="summary-synopsis"><p>Evaluates an application upgrade or downgrade script <code class="inline">Script</code>, the result from
calling <a><code class="inline">upgrade_script/2</code></a> or <a><code class="inline">downgrade_script/3</code></a>, exactly in the same way as
<a><code class="inline">install_release/1,2</code></a> does.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#upgrade_app/2" data-no-tooltip="" translate="no">upgrade_app(App, Dir)</a>

      </div>

        <div class="summary-synopsis"><p>Upgrades an application <code class="inline">App</code> from the current version to a new version located
in <code class="inline">Dir</code> according to the <code class="inline">.appup</code> file.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#upgrade_script/2" data-no-tooltip="" translate="no">upgrade_script(App, Dir)</a>

      </div>

        <div class="summary-synopsis"><p>Tries to find an application upgrade script for <code class="inline">App</code> from the current version
to a new version located in <code class="inline">Dir</code>.</p></div>

    </div>

</div>
<div class="summary-functions summary">
  <h2>
    <a href="#functions">Functions</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#check_install_release/1" data-no-tooltip="" translate="no">check_install_release(Vsn)</a>

      </div>

        <div class="summary-synopsis"><p>Equivalent to <a><code class="inline">check_install_release(Vsn, [])</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#check_install_release/2" data-no-tooltip="" translate="no">check_install_release(Vsn, Opts)</a>

      </div>

        <div class="summary-synopsis"><p>Checks if the specified version <code class="inline">Vsn</code> of the release can be installed.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#create_RELEASES/3" data-no-tooltip="" translate="no">create_RELEASES(RelDir, RelFile, AppDirs)</a>

      </div>

        <div class="summary-synopsis"><p>Equivalent to <a><code class="inline">create_RELEASES(&quot;&quot;, RelDir, RelFile, Appdirs)</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#create_RELEASES/4" data-no-tooltip="" translate="no">create_RELEASES(Root, RelDir, RelFile, AppDirs)</a>

      </div>

        <div class="summary-synopsis"><p>Creates an initial <code class="inline">RELEASES</code> file to be used by the release handler.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#install_file/2" data-no-tooltip="" translate="no">install_file(Vsn, File)</a>

      </div>

        <div class="summary-synopsis"><p>Installs a release-dependent file in the release structure.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#install_release/1" data-no-tooltip="" translate="no">install_release(Vsn)</a>

      </div>

        <div class="summary-synopsis"><p>Equivalent to <a><code class="inline">install_release(Vsn, [])</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#install_release/2" data-no-tooltip="" translate="no">install_release(Vsn, [Opt])</a>

      </div>

        <div class="summary-synopsis"><p>Installs the specified version <code class="inline">Vsn</code> of the release.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#make_permanent/1" data-no-tooltip="" translate="no">make_permanent(Vsn)</a>

      </div>

        <div class="summary-synopsis"><p>Makes the specified release version <code class="inline">Vsn</code> permanent.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#reboot_old_release/1" data-no-tooltip="" translate="no">reboot_old_release(Vsn)</a>

      </div>

        <div class="summary-synopsis"><p>Reboots the system by making the old release permanent, and calls
<a><code class="inline">init:reboot()</code></a> directly.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#remove_release/1" data-no-tooltip="" translate="no">remove_release(Vsn)</a>

      </div>

        <div class="summary-synopsis"><p>Removes a release and its files from the system.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#set_removed/1" data-no-tooltip="" translate="no">set_removed(Vsn)</a>

      </div>

        <div class="summary-synopsis"><p>Makes it possible to handle removal of releases outside the release handler.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#set_unpacked/2" data-no-tooltip="" translate="no">set_unpacked(RelFile, AppDirs)</a>

      </div>

        <div class="summary-synopsis"><p>Makes it possible to handle unpacking of releases outside the release handler.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#unpack_release/1" data-no-tooltip="" translate="no">unpack_release(Name)</a>

      </div>

        <div class="summary-synopsis"><p>Unpacks a release package <code class="inline">Name.tar.gz</code> located in the <code class="inline">releases</code> directory.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#which_releases/0" data-no-tooltip="" translate="no">which_releases()</a>

      </div>

        <div class="summary-synopsis"><p>Returns all releases known to the release handler.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#which_releases/1" data-no-tooltip="" translate="no">which_releases(Status)</a>

      </div>

        <div class="summary-synopsis"><p>Returns all releases, known to the release handler, of a specific status.</p></div>

    </div>

</div>

  </section>


  <section id="application-upgrade-downgrade" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#application-upgrade-downgrade">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Application Upgrade/Downgrade</span>
    </h1>
    <div class="application-upgrade-downgrade-list">
<section class="detail" id="downgrade_app/2">

  <div class="detail-header">
    <a href="#downgrade_app/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">downgrade_app(App, Dir)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/sasl/src/release_handler.erl#L979" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> downgrade_app(App, Dir) -> {ok, Unpurged} | restart_emulator | {error, Reason}
                       when
                           App :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                           Dir :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(),
                           Unpurged :: [Module],
                           Module :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                           Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Equivalent to <a href="#downgrade_app/3"><code class="inline">downgrade_app/3</code></a>.</p>
  </section>
</section>
<section class="detail" id="downgrade_app/3">

  <div class="detail-header">
    <a href="#downgrade_app/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">downgrade_app(App, OldVsn, Dir)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/sasl/src/release_handler.erl#L1019" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> downgrade_app(App, OldVsn, Dir) -> {ok, Unpurged} | restart_emulator | {error, Reason}
                       when
                           App :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                           Dir :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(),
                           OldVsn :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(),
                           Unpurged :: [Module],
                           Module :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                           Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Downgrades an application <code class="inline">App</code> from the current version to a previous version
<code class="inline">OldVsn</code> located in <code class="inline">Dir</code> according to the <code class="inline">.appup</code> file.</p><p><code class="inline">App</code> is the name of the application, which must be started. <code class="inline">OldVsn</code> is the
previous application version and can be omitted if <code class="inline">Dir</code> is of the format
<code class="inline">&quot;App-OldVsn&quot;</code>. <code class="inline">Dir</code> is the library directory of the previous version of <code class="inline">App</code>.
The corresponding modules and the old <code class="inline">.app</code> file are to be located under
<code class="inline">Dir/ebin</code>. The <code class="inline">.appup</code> file is to be located in the <code class="inline">ebin</code> directory of the
<em>current</em> library directory of the application
(<a href="../../apps/kernel/code.html#lib_dir/1"><code class="inline">code:lib_dir(App)</code></a>).</p><p>The function looks in the <code class="inline">.appup</code> file and tries to find a downgrade script to
the previous version of the application using <a href="#downgrade_script/3"><code class="inline">downgrade_script/3</code></a>. This script
is evaluated using <a href="#eval_appup_script/4"><code class="inline">eval_appup_script/4</code></a>, exactly in the same way as
<a href="#install_release/1"><code class="inline">install_release/1,2</code></a> does.</p><p>Returns one of the following:</p><ul><li><code class="inline">{ok, Unpurged}</code> if evaluating the script is successful, where <code class="inline">Unpurged</code> is a
list of unpurged modules</li><li><code class="inline">restart_emulator</code> if this instruction is encountered in the script</li><li><code class="inline">{error, Reason}</code> if an error occurred when finding or evaluating the script</li></ul>
  </section>
</section>
<section class="detail" id="downgrade_script/3">

  <div class="detail-header">
    <a href="#downgrade_script/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">downgrade_script(App, OldVsn, Dir)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/sasl/src/release_handler.erl#L1109" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> downgrade_script(App, OldVsn, Dir) -> {ok, Script}
                          when
                              App :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                              OldVsn :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(),
                              Dir :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(),
                              Script :: Instructions :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Tries to find an application downgrade script for <code class="inline">App</code> from the current version
to a previous version <code class="inline">OldVsn</code> located in <code class="inline">Dir</code>.</p><p>The downgrade script can then be evaluated using <a href="#eval_appup_script/4"><code class="inline">eval_appup_script/4</code></a>. It is
recommended to use <a href="#downgrade_app/3"><code class="inline">downgrade_app/2,3</code></a> instead, but this
function (<code class="inline">downgrade_script</code>) is useful to inspect the contents of the script.</p><p><code class="inline">App</code> is the name of the application, which must be started. <code class="inline">Dir</code> is the
previous library directory of <code class="inline">App</code>. The corresponding modules and the old
<code class="inline">.app</code> file are to be located under <code class="inline">Dir/ebin</code>. The <code class="inline">.appup</code> file is to be
located in the <code class="inline">ebin</code> directory of the <em>current</em> library directory of the
application (<a href="../../apps/kernel/code.html#lib_dir/1"><code class="inline">code:lib_dir(App)</code>)</a>.</p><p>The function looks in the <code class="inline">.appup</code> file and tries to find a downgrade script
from the current application version. High-level instructions are translated to
low-level instructions. The instructions are sorted in the same manner as when
generating a <code class="inline">relup</code> file.</p><p>Returns <code class="inline">{ok, Script}</code> if successful. For details about <code class="inline">Script</code>, see
<a href="appup.html"><code class="inline">appup(4)</code></a>.</p><p>Failure: If a script cannot be found, the function fails with an appropriate
error reason.</p>
  </section>
</section>
<section class="detail" id="eval_appup_script/4">

  <div class="detail-header">
    <a href="#eval_appup_script/4" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">eval_appup_script(App, ToVsn, ToDir, Script)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/sasl/src/release_handler.erl#L1160" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> eval_appup_script(App, ToVsn, ToDir, Script :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()) ->
                           {ok, Unpurged} | restart_emulator | {error, Reason}
                           when
                               App :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                               ToVsn :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(),
                               ToDir :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(),
                               Unpurged :: [Module],
                               Module :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                               Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Evaluates an application upgrade or downgrade script <code class="inline">Script</code>, the result from
calling <a href="#upgrade_script/2"><code class="inline">upgrade_script/2</code></a> or <a href="#downgrade_script/3"><code class="inline">downgrade_script/3</code></a>, exactly in the same way as
<a href="#install_release/1"><code class="inline">install_release/1,2</code></a> does.</p><p><code class="inline">App</code> is the name of the application, which must be started. <code class="inline">ToVsn</code> is the
version to be upgraded/downgraded to, and <code class="inline">ToDir</code> is the library directory of
this version. The corresponding modules as well as the <code class="inline">.app</code> and <code class="inline">.appup</code> files
are to be located under <code class="inline">Dir/ebin</code>.</p><p>Returns one of the following:</p><ul><li><code class="inline">{ok, Unpurged}</code> if evaluating the script is successful, where <code class="inline">Unpurged</code> is a
list of unpurged modules</li><li><code class="inline">restart_emulator</code> if this instruction is encountered in the script</li><li><code class="inline">{error, Reason}</code> if an error occurred when finding or evaluating the script</li></ul><p>If the <code class="inline">restart_new_emulator</code> instruction is found in the script,
<a href="#eval_appup_script/4"><code class="inline">eval_appup_script/4</code></a> returns <code class="inline">{error,restart_new_emulator}</code>. This because
<code class="inline">restart_new_emulator</code> requires a new version of the emulator to be started
before the rest of the upgrade instructions can be executed, and this can only
be done by <a href="#install_release/1"><code class="inline">install_release/1,2</code></a>.</p>
  </section>
</section>
<section class="detail" id="upgrade_app/2">

  <div class="detail-header">
    <a href="#upgrade_app/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">upgrade_app(App, Dir)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/sasl/src/release_handler.erl#L948" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> upgrade_app(App, Dir) -> {ok, Unpurged} | restart_emulator | {error, Reason}
                     when
                         App :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                         Dir :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(),
                         Unpurged :: [Module],
                         Module :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                         Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Upgrades an application <code class="inline">App</code> from the current version to a new version located
in <code class="inline">Dir</code> according to the <code class="inline">.appup</code> file.</p><p><code class="inline">App</code> is the name of the application, which must be started. <code class="inline">Dir</code> is the new
library directory of <code class="inline">App</code>. The corresponding modules as well as the <code class="inline">.app</code> and
<code class="inline">.appup</code> files are to be located under <code class="inline">Dir/ebin</code>.</p><p>The function looks in the <code class="inline">.appup</code> file and tries to find an upgrade script from
the current version of the application using <a href="#upgrade_script/2"><code class="inline">upgrade_script/2</code></a>. This script is
evaluated using <a href="#eval_appup_script/4"><code class="inline">eval_appup_script/4</code></a>, exactly in the same way as
<a href="#install_release/1"><code class="inline">install_release/1,2</code></a> does.</p><p>Returns one of the following:</p><ul><li><code class="inline">{ok, Unpurged}</code> if evaluating the script is successful, where <code class="inline">Unpurged</code> is a
list of unpurged modules</li><li><code class="inline">restart_emulator</code> if this instruction is encountered in the script</li><li><code class="inline">{error, Reason}</code> if an error occurred when finding or evaluating the script</li></ul><p>If the <code class="inline">restart_new_emulator</code> instruction is found in the script,
<a href="#upgrade_app/2"><code class="inline">upgrade_app/2</code></a> returns <code class="inline">{error,restart_new_emulator}</code>. This because
<code class="inline">restart_new_emulator</code> requires a new version of the emulator to be started
before the rest of the upgrade instructions can be executed, and this can only
be done by <a href="#install_release/1"><code class="inline">install_release/1,2</code></a>.</p>
  </section>
</section>
<section class="detail" id="upgrade_script/2">

  <div class="detail-header">
    <a href="#upgrade_script/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">upgrade_script(App, Dir)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/sasl/src/release_handler.erl#L1060" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> upgrade_script(App, Dir) -> {ok, NewVsn, Script}
                        when
                            App :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                            Dir :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(),
                            NewVsn :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(),
                            Script :: Instructions :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Tries to find an application upgrade script for <code class="inline">App</code> from the current version
to a new version located in <code class="inline">Dir</code>.</p><p>The upgrade script can then be evaluated using <a href="#eval_appup_script/4"><code class="inline">eval_appup_script/4</code></a>. It is
recommended to use <a href="#upgrade_app/2"><code class="inline">upgrade_app/2</code></a> instead, but this function (<code class="inline">upgrade_script</code>)
is useful to inspect the contents of the script.</p><p><code class="inline">App</code> is the name of the application, which must be started. <code class="inline">Dir</code> is the new
library directory of <code class="inline">App</code>. The corresponding modules as well as the <code class="inline">.app</code> and
<code class="inline">.appup</code> files are to be located under <code class="inline">Dir/ebin</code>.</p><p>The function looks in the <code class="inline">.appup</code> file and tries to find an upgrade script from
the current application version. High-level instructions are translated to
low-level instructions. The instructions are sorted in the same manner as when
generating a <code class="inline">relup</code> file.</p><p>Returns <code class="inline">{ok, NewVsn, Script}</code> if successful, where <code class="inline">NewVsn</code> is the new
application version. For details about <code class="inline">Script</code>, see <a href="appup.html"><code class="inline">appup(4)</code></a>.</p><p>Failure: If a script cannot be found, the function fails with an appropriate
error reason.</p>
  </section>
</section>

    </div>
  </section>

  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Functions</span>
    </h1>
    <div class="functions-list">
<section class="detail" id="check_install_release/1">

  <div class="detail-header">
    <a href="#check_install_release/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">check_install_release(Vsn)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/sasl/src/release_handler.erl#L398" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> check_install_release(Vsn) -> {ok, OtherVsn, Descr} | {error, Reason}
                               when
                                   Vsn :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(),
                                   OtherVsn :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(),
                                   Descr :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                   Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Equivalent to <a href="#check_install_release/2"><code class="inline">check_install_release(Vsn, [])</code></a>.</p>
  </section>
</section>
<section class="detail" id="check_install_release/2">

  <div class="detail-header">
    <a href="#check_install_release/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">check_install_release(Vsn, Opts)</h1>

        <span class="note">(since OTP R14B04)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/sasl/src/release_handler.erl#L429" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> check_install_release(Vsn, Opts) -> {ok, OtherVsn, Descr} | {error, Reason}
                               when
                                   Vsn :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(),
                                   OtherVsn :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(),
                                   Opts :: [Opt],
                                   Opt :: purge,
                                   Descr :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                   Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Checks if the specified version <code class="inline">Vsn</code> of the release can be installed.</p><p>The release must not have status <code class="inline">current</code>. Issues warnings if <code class="inline">relup</code> file or
<code class="inline">sys.config</code> is not present. If <code class="inline">relup</code> file is present, its contents are
checked and <code class="inline">{error,Reason}</code> is returned if an error is found. Also checks that
all required applications are present and that all new code can be loaded;
<code class="inline">{error,Reason}</code> is returned if an error is found.</p><p>Evaluates all instructions that occur before the <code class="inline">point_of_no_return</code>
instruction in the release upgrade script.</p><p>Returns the same as <a href="#install_release/1"><code class="inline">install_release/1</code></a>. <code class="inline">Descr</code> defaults to &quot;&quot; if no <code class="inline">relup</code>
file is found.</p><p>If option <code class="inline">purge</code> is specified, all old code that can be soft-purged is purged
after all other checks are successfully completed. This can be useful to reduce
the time needed by <a href="#install_release/1"><code class="inline">install_release/1</code></a>.</p>
  </section>
</section>
<section class="detail" id="create_RELEASES/3">

  <div class="detail-header">
    <a href="#create_RELEASES/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">create_RELEASES(RelDir, RelFile, AppDirs)</h1>

        <span class="note">(since OTP 25.0)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/sasl/src/release_handler.erl#L861" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> create_RELEASES(RelDir, RelFile, AppDirs) -> ok | {error, Reason}
                         when
                             RelDir :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(),
                             RelFile :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(),
                             AppDirs :: [{App, Vsn, Dir}],
                             App :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                             Vsn :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(),
                             Dir :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(),
                             Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Equivalent to <a href="#create_RELEASES/4"><code class="inline">create_RELEASES(&quot;&quot;, RelDir, RelFile, Appdirs)</code></a>.</p>
  </section>
</section>
<section class="detail" id="create_RELEASES/4">

  <div class="detail-header">
    <a href="#create_RELEASES/4" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">create_RELEASES(Root, RelDir, RelFile, AppDirs)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/sasl/src/release_handler.erl#L895" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> create_RELEASES(Root, RelDir, RelFile, AppDirs) -> ok | {error, Reason}
                         when
                             Root :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(),
                             RelDir :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(),
                             RelFile :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(),
                             AppDirs :: [{App, Vsn, Dir}],
                             App :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                             Vsn :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(),
                             Dir :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(),
                             Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Creates an initial <code class="inline">RELEASES</code> file to be used by the release handler.</p><p>This file must exist to install new releases.</p><p><code class="inline">Root</code> is the root of the installation (<code class="inline">$ROOT</code>) as described earlier. <code class="inline">RelDir</code>
is the directory where the <code class="inline">RELEASES</code> file is to be created (normally
<code class="inline">$ROOT/releases</code>). <code class="inline">RelFile</code> is the name of the <code class="inline">.rel</code> file that describes the
initial release, including the extension <code class="inline">.rel</code>. If <code class="inline">Root</code> is not given, the
<code class="inline">RELEASES</code> file will be location independent (i.e, it will not contain absolute
paths unless there are absolute paths in <code class="inline">AppDirs</code>). A <code class="inline">RELEASES</code> file should be
made location independent if the installation's <code class="inline">$ROOT</code> is unknown. The
<code class="inline">release_handler</code> module will interpret relative paths in a running system's
<code class="inline">RELEASES</code> file as being relative to <code class="inline">$ROOT</code>.</p><p><code class="inline">AppDirs</code> can be used to specify from where the modules for the specified
applications are to be loaded. <code class="inline">App</code> is the name of an application, <code class="inline">Vsn</code> is the
version, and <code class="inline">Dir</code> is the name of the directory where <code class="inline">App-Vsn</code> is located. The
corresponding modules are to be located under <code class="inline">Dir/App-Vsn/ebin</code>. The
directories for applications not specified in <code class="inline">AppDirs</code> are assumed to be
located in <code class="inline">$ROOT/lib</code>.</p>
  </section>
</section>
<section class="detail" id="install_file/2">

  <div class="detail-header">
    <a href="#install_file/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">install_file(Vsn, File)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/sasl/src/release_handler.erl#L779" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> install_file(Vsn, File) -> ok | {error, Reason}
                      when Vsn :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(), File :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(), Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Installs a release-dependent file in the release structure.</p><p>The release-dependent file must be in the release structure when a new release
is installed: <code class="inline">start.boot</code>, <code class="inline">relup</code>, and <code class="inline">sys.config</code>.</p><p>The function can be called, for example, when these files are generated at the
target. The function is to be called after <a href="#set_unpacked/2"><code class="inline">set_unpacked/2</code></a> has been called.</p>
  </section>
</section>
<section class="detail" id="install_release/1">

  <div class="detail-header">
    <a href="#install_release/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">install_release(Vsn)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/sasl/src/release_handler.erl#L471" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> install_release(Vsn) -> {ok, OtherVsn, Descr} | {error, Reason}
                         when
                             Vsn :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(),
                             OtherVsn :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(),
                             Descr :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                             Reason ::
                                 {already_installed, Vsn} |
                                 {change_appl_data, <a href="../../apps/erts/erlang.html#t:term/0">term</a>()} |
                                 {missing_base_app, OtherVsn, App} |
                                 {could_not_create_hybrid_boot, <a href="../../apps/erts/erlang.html#t:term/0">term</a>()} |
                                 <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                             App :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>().</pre>

      </div>

<p>Equivalent to <a href="#install_release/2"><code class="inline">install_release(Vsn, [])</code></a>.</p>
  </section>
</section>
<section class="detail" id="install_release/2">

  <div class="detail-header">
    <a href="#install_release/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">install_release(Vsn, [Opt])</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/sasl/src/release_handler.erl#L585" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> install_release(Vsn, [Opt]) ->
                         {ok, OtherVsn, Descr} |
                         {continue_after_restart, OtherVsn, Descr} |
                         {error, Reason}
                         when
                             Vsn :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(),
                             OtherVsn :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(),
                             Opt ::
                                 {error_action, Action} |
                                 {code_change_timeout, Timeout} |
                                 {suspend_timeout, Timeout} |
                                 {update_paths, Bool},
                             Action :: restart | reboot,
                             Timeout :: default | infinity | <a href="../../apps/erts/erlang.html#t:pos_integer/0">pos_integer</a>(),
                             Bool :: <a href="../../apps/erts/erlang.html#t:boolean/0">boolean</a>(),
                             Descr :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                             Reason ::
                                 {illegal_option, Opt} |
                                 {already_installed, Vsn} |
                                 {change_appl_data, <a href="../../apps/erts/erlang.html#t:term/0">term</a>()} |
                                 {missing_base_app, OtherVsn, App} |
                                 {could_not_create_hybrid_boot, <a href="../../apps/erts/erlang.html#t:term/0">term</a>()} |
                                 <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                             App :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>().</pre>

      </div>

<p>Installs the specified version <code class="inline">Vsn</code> of the release.</p><p>Looks first for a <code class="inline">relup</code> file for <code class="inline">Vsn</code> and a script
<code class="inline">{UpFromVsn,Descr1,Instructions1}</code> in this file for upgrading from the
current version. If not found, the function looks for a <code class="inline">relup</code> file
for the current version and a script <code class="inline">{Vsn,Descr2,Instructions2}</code> in
this file for downgrading to <code class="inline">Vsn</code>.</p><p>If a script is found, the first thing that happens is that the application
specifications are updated according to the <code class="inline">.app</code> files and <code class="inline">sys.config</code>
belonging to the release version <code class="inline">Vsn</code>.</p><p>After the application specifications have been updated, the instructions in the
script are evaluated and the function returns <code class="inline">{ok,OtherVsn,Descr}</code> if
successful. <code class="inline">OtherVsn</code> and <code class="inline">Descr</code> are the version (<code class="inline">UpFromVsn</code> or <code class="inline">Vsn</code>) and
description (<code class="inline">Descr1</code> or <code class="inline">Descr2</code>) as specified in the script.</p><p>If <code class="inline">{continue_after_restart,OtherVsn,Descr}</code> is returned, the emulator is
restarted before the upgrade instructions are executed. This occurs if the
emulator or any of the applications Kernel, STDLIB, or SASL are updated. The new
emulator version and these core applications execute after the restart. For all
other applications the old versions are started and the upgrade is performed as
normal by executing the upgrade instructions.</p><p>If a recoverable error occurs, the function returns <code class="inline">{error,Reason}</code> and the
original application specifications are restored. If a non-recoverable error
occurs, the system is restarted.</p><p><em>Options</em>:</p><ul><li><p><strong><code class="inline">error_action</code></strong> - Defines if the node is to be restarted
(<a href="../../apps/erts/init.html#restart/0"><code class="inline">init:restart()</code></a>) or rebooted
(<a href="../../apps/erts/init.html#reboot/0"><code class="inline">init:reboot()</code></a>) if there is an error during the
installation. Default is <code class="inline">restart</code>.</p></li><li><p><strong><code class="inline">code_change_timeout</code></strong> - Defines the time-out for all calls to
<a href="../../apps/stdlib/sys.html#change_code/4"><code class="inline">sys:change_code</code></a>. If no value is specified or
<code class="inline">default</code> is specified, the default value defined in <code class="inline">sys</code> is used.</p></li><li><p><strong><code class="inline">suspend_timeout</code></strong> - Defines the time-out for all calls to
<a href="../../apps/stdlib/sys.html#suspend/1"><code class="inline">sys:suspend</code></a>. If no value is specified, the values defined
by the <code class="inline">Timeout</code> parameter of the <code class="inline">upgrade</code> or <code class="inline">suspend</code> instructions are
used. If <code class="inline">default</code> is specified, the default value defined in <code class="inline">sys</code> is used.</p></li><li><p><strong><code class="inline">{update_paths,Bool}</code></strong> - Indicates if all application code paths are to be
updated (<code class="inline">Bool==true</code>) or if only code paths for modified applications are to
be updated (<code class="inline">Bool==false</code>, default). This option has only effect for other
application directories than the default <code class="inline">$ROOT/lib/App-Vsn</code>, that is,
application directories specified in argument <code class="inline">AppDirs</code> in a call to
<a href="#create_RELEASES/4"><code class="inline">create_RELEASES/4</code></a> or <a href="#set_unpacked/2"><code class="inline">set_unpacked/2</code></a>.</p><p><em>Example:</em></p><p>In the current version <code class="inline">CurVsn</code> of a release, the application directory of
<code class="inline">myapp</code> is <code class="inline">$ROOT/lib/myapp-1.0</code>. A new version <code class="inline">NewVsn</code> is unpacked outside
the release handler and the release handler is informed about this with a call
as follows:</p><pre><code class="makeup erlang" translate="no"><span class="nc">release_handler</span><span class="p">:</span><span class="nf">set_unpacked</span><span class="p" data-group-id="6617265240-1">(</span><span class="n">RelFile</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6617265240-2">[</span><span class="p" data-group-id="6617265240-3">{</span><span class="ss">myapp</span><span class="p">,</span><span class="s">&quot;1.0&quot;</span><span class="p">,</span><span class="s">&quot;/home/user&quot;</span><span class="p" data-group-id="6617265240-3">}</span><span class="p">,</span><span class="p">.</span><span class="p">.</span><span class="p">.</span><span class="p" data-group-id="6617265240-2">]</span><span class="p" data-group-id="6617265240-1">)</span><span class="p">.</span><span class="w">
</span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="6617265240-4">{</span><span class="ss">ok</span><span class="p">,</span><span class="n">NewVsn</span><span class="p" data-group-id="6617265240-4">}</span></code></pre><p>If <code class="inline">NewVsn</code> is installed with option <code class="inline">{update_paths,true}</code>, then
<a href="../../apps/kernel/code.html#lib_dir/1"><code class="inline">code:lib_dir(myapp)</code></a> returns <code class="inline">/home/user/myapp-1.0</code>.</p></li></ul><section role="note" class="admonition info"><h4 class="admonition-title info">Note</h4><p>Installing a new release can be time consuming if there are many processes in
the system. The reason is that each process must be checked for references to
old code before a module can be purged. This check can lead to garbage
collections and copying of data.</p><p>To speed up the execution of <a href="#install_release/1"><code class="inline">install_release</code></a>, first
call <a href="#check_install_release/1"><code class="inline">check_install_release</code></a>, using option
<code class="inline">purge</code>. This does the same check for old code. Then purges all modules that
can be soft-purged. The purged modules do then no longer have any old code,
and <a href="#install_release/1"><code class="inline">install_release</code></a> does not need to do the checks.</p><p>This does not reduce the overall time for the upgrade, but it allows checks
and purge to be executed in the background before the real upgrade is started.</p></section><section role="note" class="admonition info"><h4 class="admonition-title info">Note</h4><p>When upgrading the emulator from a version older than OTP R15, an attempt is
made to load new application beam code into the old emulator. Sometimes the
new beam format cannot be read by the old emulator, so the code loading fails
and the complete upgrade is terminated. To overcome this problem, the new
application code is to be compiled with the old emulator. For more information
about emulator upgrade from pre OTP R15 versions, see
<a href="../../system/appup_cookbook.html">Design Principles</a> in <em>System Documentation</em>.</p></section>
  </section>
</section>
<section class="detail" id="make_permanent/1">

  <div class="detail-header">
    <a href="#make_permanent/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">make_permanent(Vsn)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/sasl/src/release_handler.erl#L654" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> make_permanent(Vsn) -> ok | {error, Reason}
                        when Vsn :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(), Reason :: {bad_status, Status :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()} | <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Makes the specified release version <code class="inline">Vsn</code> permanent.</p>
  </section>
</section>
<section class="detail" id="reboot_old_release/1">

  <div class="detail-header">
    <a href="#reboot_old_release/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">reboot_old_release(Vsn)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/sasl/src/release_handler.erl#L674" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> reboot_old_release(Vsn) -> ok | {error, Reason}
                            when Vsn :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(), Reason :: {bad_status, Status :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()} | <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Reboots the system by making the old release permanent, and calls
<a href="../../apps/erts/init.html#reboot/0"><code class="inline">init:reboot()</code></a> directly.</p><p>The release must have status <code class="inline">old</code>.</p>
  </section>
</section>
<section class="detail" id="remove_release/1">

  <div class="detail-header">
    <a href="#remove_release/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">remove_release(Vsn)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/sasl/src/release_handler.erl#L694" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> remove_release(Vsn) -> ok | {error, Reason}
                        when Vsn :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(), Reason :: {permanent, Vsn} | client_node | <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Removes a release and its files from the system.</p><p>The release must not be the permanent release. Removes only the files
and directories not in use by another release.</p>
  </section>
</section>
<section class="detail" id="set_removed/1">

  <div class="detail-header">
    <a href="#set_removed/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">set_removed(Vsn)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/sasl/src/release_handler.erl#L754" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> set_removed(Vsn) -> ok | {error, Reason} when Vsn :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(), Reason :: {permanent, Vsn} | <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Makes it possible to handle removal of releases outside the release handler.</p><p>Tells the release handler that the release is removed from the system. This
function does not delete any files.</p>
  </section>
</section>
<section class="detail" id="set_unpacked/2">

  <div class="detail-header">
    <a href="#set_unpacked/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">set_unpacked(RelFile, AppDirs)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/sasl/src/release_handler.erl#L734" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> set_unpacked(RelFile, AppDirs) -> {ok, Vsn} | {error, Reason}
                      when
                          RelFile :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(),
                          AppDirs :: [{App, Vsn, Dir}],
                          App :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                          Vsn :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(),
                          Dir :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(),
                          Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Makes it possible to handle unpacking of releases outside the release handler.</p><p>Tells the release handler that the release is unpacked. <code class="inline">Vsn</code> is extracted from
the release resource file <code class="inline">RelFile</code>.</p><p><code class="inline">AppDirs</code> can be used to specify from where the modules for the specified
applications are to be loaded. <code class="inline">App</code> is the name of an application, <code class="inline">Vsn</code> is the
version, and <code class="inline">Dir</code> is the name of the directory where <code class="inline">App-Vsn</code> is located. The
corresponding modules are to be located under <code class="inline">Dir/App-Vsn/ebin</code>. The
directories for applications not specified in <code class="inline">AppDirs</code> are assumed to be
located in <code class="inline">$ROOT/lib</code>.</p>
  </section>
</section>
<section class="detail" id="unpack_release/1">

  <div class="detail-header">
    <a href="#unpack_release/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">unpack_release(Name)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/sasl/src/release_handler.erl#L375" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> unpack_release(Name) -> {ok, Vsn} | {error, Reason}
                        when Name :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(), Vsn :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(), Reason :: client_node | <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Unpacks a release package <code class="inline">Name.tar.gz</code> located in the <code class="inline">releases</code> directory.</p><p>Performs some checks on the package, for example, checks that all mandatory
files are present, and extracts its contents.</p>
  </section>
</section>
<section class="detail" id="which_releases/0">

  <div class="detail-header">
    <a href="#which_releases/0" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">which_releases()</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/sasl/src/release_handler.erl#L793" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> which_releases() -> [{Name, Vsn, Apps, Status}]
                        when
                            Name :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(),
                            Vsn :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(),
                            Apps :: [AppVsn :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>()],
                            Status :: unpacked | current | permanent | old.</pre>

      </div>

<p>Returns all releases known to the release handler.</p>
  </section>
</section>
<section class="detail" id="which_releases/1">

  <div class="detail-header">
    <a href="#which_releases/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">which_releases(Status)</h1>

        <span class="note">(since OTP R15B)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/sasl/src/release_handler.erl#L810" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> which_releases(Status) -> [{Name, Vsn, Apps, Status}]
                        when
                            Name :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(),
                            Vsn :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(),
                            Apps :: [AppVsn :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>()],
                            Status :: unpacked | current | permanent | old.</pre>

      </div>

<p>Returns all releases, known to the release handler, of a specific status.</p>
  </section>
</section>

    </div>
  </section>

    <footer class="footer">
      <p>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="sasl.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.38.1) for the

          <a href="https://erlang.org" title="Erlang" target="_blank" translate="no">Erlang programming language</a>

      </p>
<p>Copyright Â© 1996-2025 <a href="https://www.ericsson.com">Ericsson AB</a></p>
    </footer>
  </div>
</main>
</div>
  <script defer src="https://cdn.jsdelivr.net/npm/mermaid@11.4.1/dist/mermaid.min.js"></script>
  <script>
  let initialized = false;

  window.addEventListener("exdoc:loaded", () => {
      if (!initialized) {
      mermaid.initialize({
          startOnLoad: false,
          theme: document.body.className.includes("dark") ? "dark" : "default"
      });
      initialized = true;
      }

      let id = 0;
      for (const codeEl of document.querySelectorAll("pre code.mermaid")) {
      const preEl = codeEl.parentElement;
      const graphDefinition = codeEl.textContent;
      const graphEl = document.createElement("div");
      const graphId = "mermaid-graph-" + id++;
      mermaid.render(graphId, graphDefinition).then(({svg, bindFunctions}) => {
          graphEl.innerHTML = svg;
          bindFunctions?.(graphEl);
          preEl.insertAdjacentElement("afterend", graphEl);
          preEl.remove();
      });
      }
  });
  </script>

  </body>
</html>
