<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.38.1">
    <meta name="project" content="tftp v1.2.3">


<meta name="major-vsn" content="28">
<meta name="exdoc:full-text-search-url" content="/doc/search.html?v=28&q=">
<link rel="canonical" href="https://www.erlang.org/doc/apps/tftp/tftp.html" />
    <title>tftp — tftp v1.2.3</title>

    <link rel="stylesheet" href="dist/html-erlang-ZK43ZOAC.css" />

    <script defer src="dist/sidebar_items-EEB857AE.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-DPJLHKSM.js"></script>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="../../index.html" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="tftp" />
        </a>

      <div>
        <a href="../../index.html" class="sidebar-projectName" translate="no">
tftp
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v1.2.3
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras=""></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-behaviour" id="main" data-type="modules">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of tftp</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search" tabindex="-1">
            <i class="ri-search-2-line ri-lg" aria-hidden="true"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>
      <span translate="no">tftp</span> <small>behaviour</small>
      <small class="app-vsn" translate="no">(tftp v1.2.3)</small>

    </h1>

      <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/tftp/src/tftp.erl#L30" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

  </div>


    <section id="moduledoc">
<p>Trivial FTP.</p><p>Interface module for the <code class="inline">tftp</code> application.</p><h2 id="module-overwiew" class="section-heading"><a href="#module-overwiew" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Overwiew</span></h2><p>This is a complete implementation of the following IETF standards:</p><pre><code class="makeup erlang" translate="no"><span class="n">RFC</span><span class="w"> </span><span class="mi">1350</span><span class="p">,</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">TFTP</span><span class="w"> </span><span class="n">Protocol</span><span class="w"> </span><span class="p" data-group-id="5594285493-1">(</span><span class="ss">revision</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="5594285493-1">)</span><span class="p">.</span><span class="w">
</span><span class="n">RFC</span><span class="w"> </span><span class="mi">2347</span><span class="p">,</span><span class="w"> </span><span class="n">TFTP</span><span class="w"> </span><span class="n">Option</span><span class="w"> </span><span class="n">Extension</span><span class="p">.</span><span class="w">
</span><span class="n">RFC</span><span class="w"> </span><span class="mi">2348</span><span class="p">,</span><span class="w"> </span><span class="n">TFTP</span><span class="w"> </span><span class="n">Blocksize</span><span class="w"> </span><span class="n">Option</span><span class="p">.</span><span class="w">
</span><span class="n">RFC</span><span class="w"> </span><span class="mi">2349</span><span class="p">,</span><span class="w"> </span><span class="n">TFTP</span><span class="w"> </span><span class="n">Timeout</span><span class="w"> </span><span class="n">Interval</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">Transfer</span><span class="w"> </span><span class="n">Size</span><span class="w"> </span><span class="n">Options</span><span class="p">.</span></code></pre><p>The only feature that not is implemented in this release is
the &quot;netascii&quot; transfer mode.</p><p>The <a href="#start/1">start</a> function starts a daemon process which, listens
for UDP packets on a port. When it receives a request for read or
write it spawns a temporary server process which handles the actual
transfer of the file. On the client side the
<a href="#read_file/3">read_file/3</a> and <a href="#write_file/3">write_file/3</a>
functions spawns a temporary client process which establishes contact
with a TFTP daemon and performs the actual transfer of the file.</p><p>Most of the options are common for both the client and the server
side, but some of them differs a little.</p><h2 id="module-callbacks" class="section-heading"><a href="#module-callbacks" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Callbacks</span></h2><p>A <code class="inline">tftp</code> callback module is to be implemented as a <code class="inline">tftp</code> behavior and export
the functions listed in the following.</p><p>On the server side, the callback interaction starts with a call to <code class="inline">open/5</code> with
the registered initial callback state. <code class="inline">open/5</code> is expected to open the
(virtual) file. Then either function <a href="#c:read/1"><code class="inline">Module:read/1</code></a> or
<a href="#c:write/2"><code class="inline">Module:write/2</code></a> is invoked repeatedly, once per transferred block. At
each function call, the state returned from the previous call is obtained. When
the last block is encountered, function <a href="#c:read/1"><code class="inline">Module:read/1</code></a> or
<a href="#c:write/2"><code class="inline">Module:write/2</code></a> is expected to close the (virtual) file and return its
last state. Function <a href="#c:abort/3"><code class="inline">Module:abort/3</code></a> is only used in error situations.
Function <code class="inline">prepare/5</code> is not used on the server side.</p><p>On the client side, the callback interaction is the same, but it starts and ends
a bit differently. It starts with a call to <code class="inline">prepare/5</code> with the same arguments
as <code class="inline">open/5</code> takes. <code class="inline">prepare/5</code> is expected to validate the TFTP options
suggested by the user and to return the subset of them that it accepts. Then the
options are sent to the server, which performs the same TFTP option negotiation
procedure. The options that are accepted by the server are forwarded to function
<code class="inline">open/5</code> on the client side. On the client side, function <code class="inline">open/5</code> must accept
all option as-is or reject the transfer. Then the callback interaction follows
the same pattern as described for the server side. When the last block is
encountered in <a href="#c:read/1"><code class="inline">Module:read/1</code></a> or <a href="#c:write/2"><code class="inline">Module:write/2</code></a>, the returned
state is forwarded to the user and returned from <code class="inline">read_file</code>/3 or
<a href="#write_file/3"><code class="inline">write_file/3</code></a>.</p><p>If a callback (performing the file access in the TFTP server) takes too long
time (more than the double TFTP time-out), the server aborts the connection and
sends an error reply to the client. The server simply
assumes that the client has given up.</p><p>If the TFTP server receives yet another request from the same client (same host
and port) while it already has an active connection to the client, it ignores
the new request if the request is equal to the first one (same filename and
options). This implies that the (new) client will be served by the already
ongoing connection on the server side. By not setting up yet another connection,
in parallel with the ongoing one, the server consumes less resources.</p>
    </section>

</div>

  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Summary</span>
    </h1>
<div class="summary-types summary">
  <h2>
    <a href="#types">Types</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:access/0" data-no-tooltip="" translate="no">access()</a>

      </div>

        <div class="summary-synopsis"><p>Access mode.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:connection_option/0" data-no-tooltip="" translate="no">connection_option()</a>

      </div>

        <div class="summary-synopsis"><p>All options most of them common to the client and server.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:error_code/0" data-no-tooltip="" translate="no">error_code()</a>

      </div>

        <div class="summary-synopsis"><p>Error reason codes.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:option/0" data-no-tooltip="" translate="no">option()</a>

      </div>

        <div class="summary-synopsis"><p>Specific TFTP protocol options</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:peer/0" data-no-tooltip="" translate="no">peer()</a>

      </div>

        <div class="summary-synopsis"><p>Information about the peer provided for callback.</p></div>

    </div>

</div>
<div class="summary-callbacks-client-api summary">
  <h2>
    <a href="#callbacks-client-api">Callbacks: Client API</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:open/6" data-no-tooltip="" translate="no">open(Peer, Access, Filename, Mode, SuggestedOptions, State)</a>

      </div>

        <div class="summary-synopsis"><p>Opens a file for read or write access.</p></div>

    </div>

</div>
<div class="summary-callbacks summary">
  <h2>
    <a href="#callbacks">Callbacks</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:abort/3" data-no-tooltip="" translate="no">abort/3</a>

      </div>

        <div class="summary-synopsis"><p>Invoked when the file transfer is aborted.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:prepare/6" data-no-tooltip="" translate="no">prepare(Peer, Access, Filename, Mode, SuggestedOptions, InitialState)</a>

      </div>

        <div class="summary-synopsis"><p>Prepares to open a file on the client side.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:read/1" data-no-tooltip="" translate="no">read(State)</a>

      </div>

        <div class="summary-synopsis"><p>Reads a chunk from the file.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:write/2" data-no-tooltip="" translate="no">write/2</a>

      </div>

        <div class="summary-synopsis"><p>Writes a chunk to the file.</p></div>

    </div>

</div>
<div class="summary-client-api summary">
  <h2>
    <a href="#client-api">Client API</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#read_file/3" data-no-tooltip="" translate="no">read_file(RemoteFilename, LocalFilename, Options)</a>

      </div>

        <div class="summary-synopsis"><p>Reads a (virtual) file <code class="inline">RemoteFilename</code> from a TFTP server.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#write_file/3" data-no-tooltip="" translate="no">write_file(RemoteFilename, LocalFilename, Options)</a>

      </div>

        <div class="summary-synopsis"><p>Writes a (virtual) file <code class="inline">RemoteFilename</code> to a TFTP server.</p></div>

    </div>

</div>
<div class="summary-server-api summary">
  <h2>
    <a href="#server-api">Server API</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#change_config/2" data-no-tooltip="" translate="no">change_config(Pid, Options)</a>

      </div>

        <div class="summary-synopsis"><p>Changes configuration a TFTP Server</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#info/1" data-no-tooltip="" translate="no">info(Pid)</a>

      </div>

        <div class="summary-synopsis"><p>Returns information about all TFTP server.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#start/1" data-no-tooltip="" translate="no">start(Options)</a>

      </div>

        <div class="summary-synopsis"><p>Starts a daemon process listening for UDP packets on a port.</p></div>

    </div>

</div>

  </section>


  <section id="types" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#types">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Types</span>
    </h1>
    <div class="types-list">
<section class="detail" id="t:access/0">

  <div class="detail-header">
    <a href="#t:access/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">access()</h1>

        <span class="note">(not exported)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/tftp/src/tftp.erl#L128" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> access() :: read | write.</pre>

      </div>

<p>Access mode.</p>
  </section>
</section>
<section class="detail" id="t:connection_option/0">

  <div class="detail-header">
    <a href="#t:connection_option/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">connection_option()</h1>

        <span class="note">(not exported)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/tftp/src/tftp.erl#L216" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> connection_option() :: {<a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(), <a href="../../apps/erts/erlang.html#t:term/0">term</a>()} | <a href="#t:option/0">option</a>().</pre>

      </div>

<p>All options most of them common to the client and server.</p><ul><li><p><strong><code class="inline">{debug, Level::none | error | warning | brief | normal | verbose | all}</code></strong></p><p>Controls the level of debug printouts. Default is <code class="inline">none</code>.</p></li><li><p><strong><code class="inline">{host, Host::inet:hostname()}</code></strong> -</p><p>The name or IP address of the host where the TFTP daemon resides. This option
is only used by the client.</p></li><li><p><strong><code class="inline">{port, Port::inet:port_number()}</code></strong></p><p>The TFTP port where the daemon listens. Defaults is the standardized
number 69. On the server side, it can sometimes make sense to set it to 0,
meaning that the daemon just picks a free port (which one is returned by
function <a href="#info/1"><code class="inline">info/1</code></a>).</p><p>If a socket is connected already, option <code class="inline">{udp, [{fd, integer()}]}</code> can be
used to pass the open file descriptor to <code class="inline">gen_udp</code>. This can be automated by
using a command-line argument stating the prebound file descriptor number. For
example, if the port is 69 and file descriptor 22 is opened by
<code class="inline">setuid_socket_wrap</code>, the command-line argument &quot;-tftpd_69 22&quot; triggers the
prebound file descriptor 22 to be used instead of opening port 69. The UDP
option <code class="inline">{udp, [{fd, 22}]}</code> is automatically added. See <code class="inline">init:get_argument/</code>
about command-line arguments and <a href="../../apps/kernel/gen_udp.html#open/2"><code class="inline">gen_udp:open/2</code></a> about UDP options.</p></li><li><p><strong><code class="inline">{port_policy, random | inet:port_number() | {range, Min::inet:port_number(), Max::inet:port_nuber()}</code></strong></p><p>Policy for the selection of the temporary port that is used by the
server/client during the file transfer. Default is <code class="inline">random</code>, which is the
standardized policy. With this policy a randomized free port is used. A single
port or a range of ports can be useful if the protocol passes through a
firewall.</p></li><li><p><strong><code class="inline">{udp, Options::gen_udp:option}</code></strong></p></li><li><p><strong><code class="inline">{use_tsize, boolean()}</code></strong></p><p>Flag for automated use of option <code class="inline">tsize</code>. With this set to <code class="inline">true</code>, the
<a href="#write_file/3"><code class="inline">write_file/3</code></a> client determines the filesize and sends it
to the server as the standardized <code class="inline">tsize</code> option. A
<a href="#read_file/3"><code class="inline">read_file/3</code></a> client acquires only a filesize from the server
by sending a zero <code class="inline">tsize</code>.</p></li><li><p><strong><code class="inline">{max_tsize, MaxTsize::pos_integer() | infinity}</code></strong></p><p>Threshold for the maximal filesize in bytes. The transfer is aborted if the
limit is exceeded. Default is <code class="inline">infinity</code>.</p></li><li><p><strong><code class="inline">{max_conn, MaxConn::pos_integer() | infinity}</code></strong></p><p>Threshold for the maximal number of active connections. The daemon rejects the
setup of new connections if the limit is exceeded. Default is <code class="inline">infinity</code>.</p></li><li><p><strong>TftpOption::option()</strong></p><p>Name and value of a TFTP option.</p></li><li><p><strong><code class="inline">{reject, Feature:: access() | TftpKey::string()}</code></strong></p><p>Controls which features to reject. This is mostly useful for the server as it
can restrict the use of certain TFTP options or read/write access.</p></li><li><p><strong><code class="inline">{callback, {RegExp ::string(), Module::module(), State :: term()}}</code></strong></p><p>Registration of a callback module. When a file is to be transferred, its local
filename is matched to the regular expressions of the registered callbacks.
The first matching callback is used during the transfer. See <a href="#read_file/3"><code class="inline">read_file/3</code></a> and
<a href="#write_file/3"><code class="inline">write_file/3</code></a>.</p><p>The callback module must implement the <code class="inline">tftp</code> behavior, see
<a href="tftp.html#callbacks">callbacks</a>.</p></li><li><p><strong><code class="inline">{logger, module()}</code></strong></p><p>Callback module for customized logging of errors, warnings, and info messages.
The callback module must implement the <a href="tftp_logger.html"><code class="inline">tftp_logger</code></a> behavior. The default
module is <code class="inline">tftp_logger</code>.</p></li><li><p><strong><code class="inline">{max_retries, MaxRetries::non_neg_integer()}</code></strong></p><p>Threshold for the maximal number of retries. By default the server/client
tries to resend a message up to five times when the time-out expires.</p></li></ul>
  </section>
</section>
<section class="detail" id="t:error_code/0">

  <div class="detail-header">
    <a href="#t:error_code/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">error_code()</h1>

        <span class="note">(not exported)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/tftp/src/tftp.erl#L221" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> error_code() ::
          undef | enoent | eacces | enospc | badop | eexist | baduser | badopt | <a href="../../apps/erts/erlang.html#t:pos_integer/0">pos_integer</a>().</pre>

      </div>

<p>Error reason codes.</p>
  </section>
</section>
<section class="detail" id="t:option/0">

  <div class="detail-header">
    <a href="#t:option/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">option()</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/tftp/src/tftp.erl#L229" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> option() :: {<a href="../../apps/erts/erlang.html#t:string/0">string</a>(), Value :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>()}.</pre>

      </div>

<p>Specific TFTP protocol options</p>
  </section>
</section>
<section class="detail" id="t:peer/0">

  <div class="detail-header">
    <a href="#t:peer/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">peer()</h1>

        <span class="note">(not exported)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/tftp/src/tftp.erl#L122" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> peer() :: {PeerType :: inet | inet6, PeerHost :: <a href="../../apps/kernel/inet.html#t:ip_address/0">inet:ip_address</a>(), PeerPort :: <a href="../../apps/erts/erlang.html#t:port/0">port</a>()}.</pre>

      </div>

<p>Information about the peer provided for callback.</p>
  </section>
</section>

    </div>
  </section>

  <section id="callbacks-client-api" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#callbacks-client-api">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Callbacks: Client API</span>
    </h1>
    <div class="callbacks-client-api-list">
<section class="detail" id="c:open/6">

  <div class="detail-header">
    <a href="#c:open/6" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">open(Peer, Access, Filename, Mode, SuggestedOptions, State)</h1>

        <span class="note">(since OTP 18.1)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/tftp/src/tftp.erl#L269" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> open(Peer :: <a href="#t:peer/0">peer</a>(),
               Access :: <a href="#t:access/0">access</a>(),
               Filename :: <a href="../../apps/kernel/file.html#t:name/0">file:name</a>(),
               Mode :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(),
               SuggestedOptions :: [<a href="#t:option/0">option</a>()],
               State :: [] | [{root_dir, <a href="../../apps/erts/erlang.html#t:string/0">string</a>()}] | <a href="../../apps/erts/erlang.html#t:term/0">term</a>()) ->
                  {ok, AcceptedOptions :: [<a href="#t:option/0">option</a>()], NewState :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()} |
                  {error, {Code :: <a href="#t:error_code/0">error_code</a>(), <a href="../../apps/erts/erlang.html#t:string/0">string</a>()}}.</pre>

      </div>

<p>Opens a file for read or write access.</p><p>On the client side, where the <code class="inline">open/5</code> call has been preceded by a call to
<code class="inline">prepare/5</code>, all options must be accepted or rejected.</p><p>On the server side, where there is no preceding <code class="inline">prepare/5</code> call, no new options
can be added, but those present in <code class="inline">SuggestedOptions</code> can be omitted or replaced
with new values in <code class="inline">AcceptedOptions</code>.</p>
  </section>
</section>

    </div>
  </section>

  <section id="callbacks" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#callbacks">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Callbacks</span>
    </h1>
    <div class="callbacks-list">
<section class="detail" id="c:abort/3">

  <div class="detail-header">
    <a href="#c:abort/3" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">abort/3</h1>

        <span class="note">(since OTP 18.1)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/tftp/src/tftp.erl#L319" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> abort(Code :: <a href="#t:error_code/0">error_code</a>(), <a href="../../apps/erts/erlang.html#t:string/0">string</a>(), State :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()) -> ok.</pre>

      </div>

<p>Invoked when the file transfer is aborted.</p><p>The callback function is expected to clean up its used resources after the
aborted file transfer, such as closing open file descriptors and so on. The
function is not invoked if any of the other callback functions returns an error,
as it is expected that they already have cleaned up the necessary resources.
However, it is invoked if the functions fail (crash).</p>
  </section>
</section>
<section class="detail" id="c:prepare/6">

  <div class="detail-header">
    <a href="#c:prepare/6" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">prepare(Peer, Access, Filename, Mode, SuggestedOptions, InitialState)</h1>

        <span class="note">(since OTP 18.1)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/tftp/src/tftp.erl#L246" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> prepare(Peer :: <a href="#t:peer/0">peer</a>(),
                  Access :: <a href="#t:access/0">access</a>(),
                  Filename :: <a href="../../apps/kernel/file.html#t:name/0">file:name</a>(),
                  Mode :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>(),
                  SuggestedOptions :: [<a href="#t:option/0">option</a>()],
                  InitialState :: [] | [{root_dir, <a href="../../apps/erts/erlang.html#t:string/0">string</a>()}]) ->
                     {ok, AcceptedOptions :: [<a href="#t:option/0">option</a>()], NewState :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()} |
                     {error, {Code :: <a href="#t:error_code/0">error_code</a>(), <a href="../../apps/erts/erlang.html#t:string/0">string</a>()}}.</pre>

      </div>

<p>Prepares to open a file on the client side.</p><p>No new options can be added, but those present in <code class="inline">SuggestedOptions</code> can be
omitted or replaced with new values in <code class="inline">AcceptedOptions</code>.</p><p>This is followed by a call to <code class="inline">open/4</code> before any read/write access is
performed. <code class="inline">AcceptedOptions</code> is sent to the server, which replies with the
options that it accepts. These are then forwarded to <code class="inline">open/4</code> as
<code class="inline">SuggestedOptions</code>.</p>
  </section>
</section>
<section class="detail" id="c:read/1">

  <div class="detail-header">
    <a href="#c:read/1" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">read(State)</h1>

        <span class="note">(since OTP 18.1)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/tftp/src/tftp.erl#L289" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> read(State :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()) ->
                  {more, <a href="../../apps/erts/erlang.html#t:binary/0">binary</a>(), NewState :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()} |
                  {last, <a href="../../apps/erts/erlang.html#t:binary/0">binary</a>(), <a href="../../apps/erts/erlang.html#t:integer/0">integer</a>()} |
                  {error, {Code :: <a href="#t:error_code/0">error_code</a>(), <a href="../../apps/erts/erlang.html#t:string/0">string</a>()}}.</pre>

      </div>

<p>Reads a chunk from the file.</p><p>The callback function is expected to close the file when the last file chunk is
encountered. When an error is encountered, the callback function is expected to
clean up after the aborted file transfer, such as closing open file descriptors,
and so on. In both cases there will be no more calls to any of the callback
functions.</p>
  </section>
</section>
<section class="detail" id="c:write/2">

  <div class="detail-header">
    <a href="#c:write/2" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">write/2</h1>

        <span class="note">(since OTP 18.1)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/tftp/src/tftp.erl#L304" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> write(<a href="../../apps/erts/erlang.html#t:binary/0">binary</a>(), State :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()) ->
                   {more, NewState :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()} |
                   {last, FileSize :: <a href="../../apps/erts/erlang.html#t:integer/0">integer</a>()} |
                   {error, {Code :: <a href="#t:error_code/0">error_code</a>(), <a href="../../apps/erts/erlang.html#t:string/0">string</a>()}}.</pre>

      </div>

<p>Writes a chunk to the file.</p><p>The callback function is expected to close the file when the last file chunk is
encountered. When an error is encountered, the callback function is expected to
clean up after the aborted file transfer, such as closing open file descriptors,
and so on. In both cases there will be no more calls to any of the callback
functions.</p>
  </section>
</section>

    </div>
  </section>

  <section id="client-api" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#client-api">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Client API</span>
    </h1>
    <div class="client-api-list">
<section class="detail" id="read_file/3">

  <div class="detail-header">
    <a href="#read_file/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">read_file(RemoteFilename, LocalFilename, Options)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/tftp/src/tftp.erl#L348" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> read_file(RemoteFilename, LocalFilename, Options) -> {ok, LastCallbackState} | {error, Reason}
                   when
                       RemoteFilename :: <a href="../../apps/kernel/file.html#t:filename/0">file:filename</a>(),
                       LocalFilename :: <a href="../../apps/kernel/file.html#t:filename_all/0">file:filename_all</a>() | binary,
                       Options :: [<a href="#t:connection_option/0">connection_option</a>()],
                       LastCallbackState :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                       Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Reads a (virtual) file <code class="inline">RemoteFilename</code> from a TFTP server.</p><p>If <code class="inline">LocalFilename</code> is the atom <code class="inline">binary</code>, <code class="inline">tftp_binary</code> is used as callback
module. It concatenates all transferred blocks and returns them as one single
binary in <code class="inline">LastCallbackState</code>.</p><p>If <code class="inline">LocalFilename</code> is a string and there are no registered callback modules,
<code class="inline">tftp_file</code> is used as callback module. It writes each transferred block to the
file named <code class="inline">LocalFilename</code> and returns the number of transferred bytes in
<code class="inline">LastCallbackState</code>.</p><p>If <code class="inline">LocalFilename</code> is a string and there are registered callback modules,
<code class="inline">LocalFilename</code> is tested against the regexps of these and the callback module
corresponding to the first match is used, or an error tuple is returned if no
matching regexp is found.</p>
  </section>
</section>
<section class="detail" id="write_file/3">

  <div class="detail-header">
    <a href="#write_file/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">write_file(RemoteFilename, LocalFilename, Options)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/tftp/src/tftp.erl#L379" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> write_file(RemoteFilename, LocalFilename, Options) -> {ok, LastCallbackState} | {error, Reason}
                    when
                        RemoteFilename :: <a href="../../apps/kernel/file.html#t:filename/0">file:filename</a>(),
                        LocalFilename :: <a href="../../apps/kernel/file.html#t:filename_all/0">file:filename_all</a>() | binary,
                        Options :: [<a href="#t:option/0">option</a>()],
                        LastCallbackState :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                        Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Writes a (virtual) file <code class="inline">RemoteFilename</code> to a TFTP server.</p><p>If <code class="inline">LocalFilename</code> is a binary, <code class="inline">tftp_binary</code> is used as callback module. The
binary is transferred block by block and the number of transferred bytes is
returned in <code class="inline">LastCallbackState</code>.</p><p>If <code class="inline">LocalFilename</code> is a string and there are no registered callback modules,
<code class="inline">tftp_file</code> is used as callback module. It reads the file named <code class="inline">LocalFilename</code>
block by block and returns the number of transferred bytes in
<code class="inline">LastCallbackState</code>.</p><p>If <code class="inline">LocalFilename</code> is a string and there are registered callback modules,
<code class="inline">LocalFilename</code> is tested against the regexps of these and the callback module
corresponding to the first match is used, or an error tuple is returned if no
matching regexp is found.</p>
  </section>
</section>

    </div>
  </section>

  <section id="server-api" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#server-api">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Server API</span>
    </h1>
    <div class="server-api-list">
<section class="detail" id="change_config/2">

  <div class="detail-header">
    <a href="#change_config/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">change_config(Pid, Options)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/tftp/src/tftp.erl#L411" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Changes configuration a TFTP Server</p>
  </section>
</section>
<section class="detail" id="info/1">

  <div class="detail-header">
    <a href="#info/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">info(Pid)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/tftp/src/tftp.erl#L403" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Returns information about all TFTP server.</p>
  </section>
</section>
<section class="detail" id="start/1">

  <div class="detail-header">
    <a href="#start/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">start(Options)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/tftp/src/tftp.erl#L395" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> start(Options) -> {ok, Pid} | {error, Reason}
               when Options :: [<a href="#t:connection_option/0">connection_option</a>()], Pid :: <a href="../../apps/erts/erlang.html#t:pid/0">pid</a>(), Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Starts a daemon process listening for UDP packets on a port.</p><p>When it receives a request for read or write, it spawns a temporary
server process handling the actual transfer of the (virtual) file.</p>
  </section>
</section>

    </div>
  </section>

    <footer class="footer">
      <p>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="tftp.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.38.1) for the

          <a href="https://erlang.org" title="Erlang" target="_blank" translate="no">Erlang programming language</a>

      </p>
<p>Copyright © 1996-2025 <a href="https://www.ericsson.com">Ericsson AB</a></p>
    </footer>
  </div>
</main>
</div>
  <script defer src="https://cdn.jsdelivr.net/npm/mermaid@11.4.1/dist/mermaid.min.js"></script>
  <script>
  let initialized = false;

  window.addEventListener("exdoc:loaded", () => {
      if (!initialized) {
      mermaid.initialize({
          startOnLoad: false,
          theme: document.body.className.includes("dark") ? "dark" : "default"
      });
      initialized = true;
      }

      let id = 0;
      for (const codeEl of document.querySelectorAll("pre code.mermaid")) {
      const preEl = codeEl.parentElement;
      const graphDefinition = codeEl.textContent;
      const graphEl = document.createElement("div");
      const graphId = "mermaid-graph-" + id++;
      mermaid.render(graphId, graphDefinition).then(({svg, bindFunctions}) => {
          graphEl.innerHTML = svg;
          bindFunctions?.(graphEl);
          preEl.insertAdjacentElement("afterend", graphEl);
          preEl.remove();
      });
      }
  });
  </script>

  </body>
</html>
