<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.38.1">
    <meta name="project" content="common_test v1.29">


<meta name="major-vsn" content="28">
<meta name="exdoc:full-text-search-url" content="/doc/search.html?v=28&q=">
<link rel="canonical" href="https://www.erlang.org/doc/apps/common_test/ct_hooks.html" />
    <title>ct_hooks â€” common_test v1.29</title>

    <link rel="stylesheet" href="dist/html-erlang-ZK43ZOAC.css" />

    <script defer src="dist/sidebar_items-3DCB9B8F.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-DPJLHKSM.js"></script>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="../../index.html" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="common_test" />
        </a>

      <div>
        <a href="../../index.html" class="sidebar-projectName" translate="no">
common_test
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v1.29
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras=""></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-behaviour" id="main" data-type="modules">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of common_test</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search" tabindex="-1">
            <i class="ri-search-2-line ri-lg" aria-hidden="true"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>
      <span translate="no">ct_hooks</span> <small>behaviour</small>
      <small class="app-vsn" translate="no">(common_test v1.29)</small>

    </h1>

      <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/common_test/src/ct_hooks.erl#L23" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

  </div>


    <section id="moduledoc">
<p>A callback interface on top of Common Test.</p><p>The <em>Common Test Hook (CTH)</em> framework allows extensions of the default behavior
of <code class="inline">Common Test</code> by callbacks before and after all test suite calls. It is
intended for advanced users of <code class="inline">Common Test</code> who want to abstract out behavior
that is common to multiple test suites.</p><p>In brief, CTH allows you to:</p><ul><li>Manipulate the runtime configuration before each suite configuration call.</li><li>Manipulate the return of all suite configuration calls and by extension the
result of the test themselves.</li></ul><p>The following sections describe the mandatory and optional CTH functions that
<code class="inline">Common Test</code> calls during test execution. For more details, see section
<a href="ct_hooks_chapter.html">Common Test Hooks</a> in the User's Guide.</p><p>For information about how to add a CTH to your suite, see section
<a href="ct_hooks_chapter.html#installing">Installing a CTH</a> in the User's Guide.</p><section role="note" class="admonition info"><h4 class="admonition-title info">Note</h4><p>For a minimal example of a CTH, see section
<a href="ct_hooks_chapter.html#example">Example CTH</a> in the User's Guide.</p></section>
    </section>

</div>

  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Summary</span>
    </h1>
<div class="summary-callbacks summary">
  <h2>
    <a href="#callbacks">Callbacks</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:id/1" data-no-tooltip="" translate="no">id(Opts)</a>

      </div>

        <div class="summary-synopsis"><p>The <code class="inline">Id</code> identifies a CTH instance uniquely. If two CTHs return the same <code class="inline">Id</code>,
the second CTH is ignored and subsequent calls to the CTH are only made to the
first instance. For details, see section
<a>Installing a CTH</a> in the User's Guide.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:init/2" data-no-tooltip="" translate="no">init(Id, Opts)</a>

      </div>

        <div class="summary-synopsis"><p>This function is always called before any other callback function. Use it to
initiate any common state. It is to return a state for this CTH.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:on_tc_fail/4" data-no-tooltip="" translate="no">on_tc_fail(SuiteName, TestName, Reason, CTHState)</a>

      </div>

        <div class="summary-synopsis"><p>This function is called whenever a test case (or configuration function) fails.
It is called after the post function is called for the failed test case.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:on_tc_skip/4" data-no-tooltip="" translate="no">on_tc_skip(SuiteName, TestName, Reason, CTHState)</a>

      </div>

        <div class="summary-synopsis"><p>This function is called whenever a test case (or configuration function) is
skipped. It is called after the post function is called for the skipped test
case.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:post_all/3" data-no-tooltip="" translate="no">post_all(SuiteName, Return, GroupDefs)</a>

      </div>

        <div class="summary-synopsis"><p>This function is called after <a><code class="inline">all/0</code></a>. It is used to
modify the set of test cases and test group to be executed, for instance to add
or remove test cases and groups, change group properties, or even skip all tests
in the suite.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:post_end_per_group/5" data-no-tooltip="" translate="no">post_end_per_group(SuiteName, GroupName, Config, Return, CTHState)</a>

      </div>

        <div class="summary-synopsis"><p>This function is called after <a><code class="inline">end_per_group</code></a> if
it exists. It behaves the same way as
<a><code class="inline">post_init_per_suite</code></a>, but for function
<a>end_per_group</a> instead.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:post_end_per_suite/4" data-no-tooltip="" translate="no">post_end_per_suite(SuiteName, Config, Return, CTHState)</a>

      </div>

        <div class="summary-synopsis"><p>This function is called after <a><code class="inline">end_per_suite</code></a> if
it exists. It behaves the same way as
<a><code class="inline">post_init_per_suite</code></a>, but for function
<a><code class="inline">end_per_suite</code></a> instead.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:post_end_per_testcase/5" data-no-tooltip="" translate="no">post_end_per_testcase(SuiteName, TestcaseName, Config, Return, CTHState)</a>

      </div>

        <div class="summary-synopsis"><p>This function is called after
<a><code class="inline">end_per_testcase</code></a> if it exists. It behaves
the same way as <a><code class="inline">post_end_per_suite</code></a>, but for
function <a><code class="inline">end_per_testcase</code></a> instead.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:post_groups/2" data-no-tooltip="" translate="no">post_groups(SuiteName, GroupDefs)</a>

      </div>

        <div class="summary-synopsis"><p>This function is called after <a><code class="inline">groups/0</code></a>. It is used to
modify the test group definitions, for instance to add or remove groups or
change group properties.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:post_init_per_group/5" data-no-tooltip="" translate="no">post_init_per_group(SuiteName, GroupName, Config, Return, CTHState)</a>

      </div>

        <div class="summary-synopsis"><p>This function is called after <a><code class="inline">init_per_group</code></a>
if it exists. It behaves the same way as
<a><code class="inline">post_init_per_suite</code></a>, but for function
<a><code class="inline">init_per_group</code></a> instead.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:post_init_per_suite/4" data-no-tooltip="" translate="no">post_init_per_suite(SuiteName, Config, Return, CTHState)</a>

      </div>

        <div class="summary-synopsis"><p>This function is called after <a><code class="inline">init_per_suite</code></a>
if it exists. It typically contains extra checks to ensure that all the correct
dependencies are started correctly.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:post_init_per_testcase/5" data-no-tooltip="" translate="no">post_init_per_testcase(SuiteName, TestcaseName, Config, Return, CTHState)</a>

      </div>

        <div class="summary-synopsis"><p>This function is called after
<a><code class="inline">init_per_testcase</code></a> if it exists. It behaves
the same way as <a><code class="inline">post_init_per_suite</code></a>, but for
function <a><code class="inline">init_per_testcase</code></a> instead.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:pre_end_per_group/4" data-no-tooltip="" translate="no">pre_end_per_group(SuiteName, GroupName, EndData, CTHState)</a>

      </div>

        <div class="summary-synopsis"><p>This function is called before <a><code class="inline">end_per_group</code></a>
if it exists. It behaves the same way as
<a><code class="inline">pre_init_per_suite</code></a>, but for function
<a><code class="inline">end_per_group</code></a> instead.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:pre_end_per_suite/3" data-no-tooltip="" translate="no">pre_end_per_suite(SuiteName, EndData, CTHState)</a>

      </div>

        <div class="summary-synopsis"><p>This function is called before <a><code class="inline">end_per_suite</code></a>
if it exists. It behaves the same way as
<a><code class="inline">pre_init_per_suite</code></a>, but for function
<a><code class="inline">end_per_suite</code></a> instead.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:pre_end_per_testcase/4" data-no-tooltip="" translate="no">pre_end_per_testcase(SuiteName, TestcaseName, EndData, CTHState)</a>

      </div>

        <div class="summary-synopsis"><p>This function is called before
<a><code class="inline">end_per_testcase</code></a> if it exists. It behaves
the same way as <a><code class="inline">pre_end_per_suite</code></a>, but for function
<a><code class="inline">end_per_testcase</code></a> instead.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:pre_init_per_group/4" data-no-tooltip="" translate="no">pre_init_per_group(SuiteName, GroupName, InitData, CTHState)</a>

      </div>

        <div class="summary-synopsis"><p>This function is called before <a><code class="inline">init_per_group</code></a>
if it exists. It behaves the same way as
<a><code class="inline">pre_init_per_suite</code></a>, but for function
<a><code class="inline">init_per_group</code></a> instead.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:pre_init_per_suite/3" data-no-tooltip="" translate="no">pre_init_per_suite(SuiteName, InitData, CTHState)</a>

      </div>

        <div class="summary-synopsis"><p>This function is called before <a><code class="inline">init_per_suite</code></a>
if it exists. It typically contains initialization/logging that must be done
before <code class="inline">init_per_suite</code> is called. If <code class="inline">{skip,Reason}</code> or <code class="inline">{fail,Reason}</code> is
returned, <code class="inline">init_per_suite</code> and all test cases of the suite are skipped and
<code class="inline">Reason</code> printed in the overview log of the suite.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:pre_init_per_testcase/4" data-no-tooltip="" translate="no">pre_init_per_testcase(SuiteName, TestcaseName, InitData, CTHState)</a>

      </div>

        <div class="summary-synopsis"><p>This function is called before
<a><code class="inline">init_per_testcase</code></a> if it exists. It behaves
the same way as <a><code class="inline">pre_init_per_suite</code></a>, but for
function <a><code class="inline">init_per_testcase</code></a> instead.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:terminate/1" data-no-tooltip="" translate="no">terminate(Hooks)</a>

      </div>

        <div class="summary-synopsis"><p>This function is called at the end of a CTH <a>scope</a>.
The returned term is ignored.</p></div>

    </div>

</div>

  </section>


  <section id="callbacks" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#callbacks">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Callbacks</span>
    </h1>
    <div class="callbacks-list">
<section class="detail" id="c:id/1">

  <div class="detail-header">
    <a href="#c:id/1" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">id(Opts)</h1>

        <span class="note">(since OTP R14B02)</span>

        <span class="note">(optional)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/common_test/src/ct_hooks.erl#L91" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> id(Opts) -> Id when Opts :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(), Id :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>The <code class="inline">Id</code> identifies a CTH instance uniquely. If two CTHs return the same <code class="inline">Id</code>,
the second CTH is ignored and subsequent calls to the CTH are only made to the
first instance. For details, see section
<a href="ct_hooks_chapter.html#installing">Installing a CTH</a> in the User's Guide.</p><p>This function is <em>not</em> to have any side effects, as it can be called multiple
times by <code class="inline">Common Test</code>.</p><p>If not implemented, the CTH acts as if this function returned a call to
<a href="../../apps/erts/erlang.html#make_ref/0"><code class="inline">make_ref/0</code></a>.</p>
  </section>
</section>
<section class="detail" id="c:init/2">

  <div class="detail-header">
    <a href="#c:init/2" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">init(Id, Opts)</h1>

        <span class="note">(since OTP R14B02)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/common_test/src/ct_hooks.erl#L112" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> init(Id, Opts) -> {ok, State} | {ok, State, Priority}
                  when Id :: <a href="../../apps/erts/erlang.html#t:reference/0">reference</a>() | <a href="../../apps/erts/erlang.html#t:term/0">term</a>(), Opts :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(), State :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(), Priority :: <a href="../../apps/erts/erlang.html#t:integer/0">integer</a>().</pre>

      </div>

<p>This function is always called before any other callback function. Use it to
initiate any common state. It is to return a state for this CTH.</p><p><code class="inline">Id</code> is either the return value of <a href="#c:id/1"><code class="inline">ct_hooks:id/1</code></a>, or a <code class="inline">reference</code>
(created using <a href="../../apps/erts/erlang.html#make_ref/0"><code class="inline">erlang:make_ref/0</code></a> in ERTS) if <a href="#c:id/1"><code class="inline">ct_hooks:id/1</code></a> is
not implemented.</p><p><code class="inline">Priority</code> is the relative priority of this hook. Hooks with a lower priority
are executed first. If no priority is specified, it is set to <code class="inline">0</code>.</p><p>For details about hook execution order, see section
<a href="ct_hooks_chapter.html#cth_execution_order">CTH Execution Order</a> in the User's
Guide.</p><p>For details about when <code class="inline">init</code> is called, see section
<a href="ct_hooks_chapter.html#scope">CTH Scope</a> in the User's Guide.</p>
  </section>
</section>
<section class="detail" id="c:on_tc_fail/4">

  <div class="detail-header">
    <a href="#c:on_tc_fail/4" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">on_tc_fail(SuiteName, TestName, Reason, CTHState)</h1>

        <span class="note">(since OTP 19.3)</span>

        <span class="note">(optional)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/common_test/src/ct_hooks.erl#L180" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> on_tc_fail(SuiteName, TestName, Reason, CTHState) -> NewCTHState
                        when
                            SuiteName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                            TestName ::
                                init_per_suite | end_per_suite |
                                {init_per_group, GroupName} |
                                {end_per_group, GroupName} |
                                {FuncName, GroupName} |
                                FuncName,
                            FuncName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                            GroupName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                            Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                            CTHState :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                            NewCTHState :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>This function is called whenever a test case (or configuration function) fails.
It is called after the post function is called for the failed test case.</p><p>That is:</p><ul><li>If <code class="inline">init_per_suite</code> fails, this function is called after
<a href="#c:post_init_per_suite/4"><code class="inline">post_init_per_suite</code></a>.</li><li>If a test case fails, this function is called after
<a href="#c:post_end_per_testcase/5"><code class="inline">post_end_per_testcase</code></a>.</li></ul><p>If the failed test case belongs to a test case group, the second argument is a
tuple <code class="inline">{FuncName,GroupName}</code>, otherwise only the function name.</p><p>The data that comes with <code class="inline">Reason</code> follows the same format as
<a href="event_handler_chapter.html#failreason"><code class="inline">FailReason</code></a> in event
<a href="event_handler_chapter.html#tc_done"><code class="inline">tc_done</code></a>. For details, see section
<a href="event_handler_chapter.html#events">Event Handling</a> in the User's Guide.</p><p>If <a href="#c:on_tc_fail/4"><code class="inline">Module:on_tc_fail/4</code></a> is not exported, common_test will
attempt to call <code class="inline">Module:on_tc_fail(TestName, Reason, CTHState)</code> instead. This is
for backwards compatibility.</p>
  </section>
</section>
<section class="detail" id="c:on_tc_skip/4">

  <div class="detail-header">
    <a href="#c:on_tc_skip/4" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">on_tc_skip(SuiteName, TestName, Reason, CTHState)</h1>

        <span class="note">(since OTP 19.3)</span>

        <span class="note">(optional)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/common_test/src/ct_hooks.erl#L143" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> on_tc_skip(SuiteName, TestName, Reason, CTHState) -> NewCTHState
                        when
                            SuiteName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                            TestName ::
                                init_per_suite | end_per_suite |
                                {init_per_group, GroupName} |
                                {end_per_group, GroupName} |
                                {FuncName, GroupName} |
                                FuncName,
                            FuncName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                            GroupName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                            Reason :: {tc_auto_skip | tc_user_skip, <a href="../../apps/erts/erlang.html#t:term/0">term</a>()},
                            CTHState :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                            NewCTHState :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>This function is called whenever a test case (or configuration function) is
skipped. It is called after the post function is called for the skipped test
case.</p><p>That is:</p><ul><li>If <code class="inline">init_per_group</code> is skipped, this function is called after
<a href="#c:post_init_per_group/5"><code class="inline">post_init_per_group</code></a>.</li><li>If a test case is skipped, this function is called after
<a href="#c:post_end_per_testcase/5"><code class="inline">post_end_per_testcase</code></a>.</li></ul><p>If the skipped test case belongs to a test case group, the second argument is a
tuple <code class="inline">{FuncName,GroupName}</code>, otherwise only the function name.</p><p>The data that comes with <code class="inline">Reason</code> follows the same format as events
<a href="event_handler_chapter.html#tc_auto_skip"><code class="inline">tc_auto_skip</code></a> and
<a href="event_handler_chapter.html#tc_user_skip"><code class="inline">tc_user_skip</code></a> For details, see section
<a href="event_handler_chapter.html#events">Event Handling</a> in the User's Guide.</p><p>If <a href="#c:on_tc_skip/4"><code class="inline">Module:on_tc_skip/4</code></a> is not exported, common_test will
attempt to call <code class="inline">Module:on_tc_skip(TestName, Reason, CTHState)</code> instead. This is
for backwards compatibility.</p>
  </section>
</section>
<section class="detail" id="c:post_all/3">

  <div class="detail-header">
    <a href="#c:post_all/3" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">post_all(SuiteName, Return, GroupDefs)</h1>

        <span class="note">(since OTP 21.3.8)</span>

        <span class="note">(optional)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/common_test/src/ct_hooks.erl#L563" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> post_all(SuiteName, Return, GroupDefs) -> NewReturn
                      when
                          SuiteName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                          Return :: Tests | {skip, Reason},
                          NewReturn :: Tests | {skip, Reason},
                          Tests ::
                              [TestCase |
                               {testcase, TestCase, TCRepeatProps} |
                               {group, GroupName} |
                               {group, GroupName, Properties} |
                               {group, GroupName, Properties, SubGroups}],
                          TestCase :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                          TCRepeatProps :: [{repeat, N} | {repeat_until_ok, N} | {repeat_until_fail, N}],
                          GroupName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                          Properties :: GroupProperties | default,
                          SubGroups :: [{GroupName, Properties} | {GroupName, Properties, SubGroups}],
                          Shuffle :: shuffle | {shuffle, Seed},
                          Seed :: {<a href="../../apps/erts/erlang.html#t:integer/0">integer</a>(), <a href="../../apps/erts/erlang.html#t:integer/0">integer</a>(), <a href="../../apps/erts/erlang.html#t:integer/0">integer</a>()},
                          GroupRepeatType ::
                              repeat | repeat_until_all_ok | repeat_until_all_fail | repeat_until_any_ok |
                              repeat_until_any_fail,
                          N :: <a href="../../apps/erts/erlang.html#t:integer/0">integer</a>() | forever,
                          GroupDefs :: [Group],
                          Group :: {GroupName, GroupProperties, GroupsAndTestCases},
                          GroupProperties :: [parallel | sequence | Shuffle | {GroupRepeatType, N}],
                          GroupsAndTestCases :: [Group | {group, GroupName} | TestCase],
                          Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>This function is called after <a href="ct_suite.html#c:all/0"><code class="inline">all/0</code></a>. It is used to
modify the set of test cases and test group to be executed, for instance to add
or remove test cases and groups, change group properties, or even skip all tests
in the suite.</p><p><code class="inline">Return</code> is what <a href="ct_suite.html#c:all/0"><code class="inline">all/0</code></a> returned, that is, a list of test
cases and groups to be executed, or a tuple <code class="inline">{skip,Reason}</code>.</p><p><code class="inline">GroupDefs</code> is what <a href="ct_suite.html#c:groups/0"><code class="inline">groups/0</code></a> or the
<a href="#c:post_groups/2"><code class="inline">post_groups/2</code></a> hook returned, that is, a list of group
definitions.</p><p><code class="inline">NewReturn</code> is the possibly modified version of <code class="inline">Return</code>.</p><p>This function is called only if the CTH is added before <code class="inline">init_per_suite</code> is run.
For details, see section <a href="ct_hooks_chapter.html#scope">CTH Scope</a> in the User's
Guide.</p><p>Notice that for CTHs that are installed by means of the
<a href="ct_suite.html#c:suite/0"><code class="inline">suite/0</code></a> function, <code class="inline">post_all/2</code> is called before the
<a href="#c:init/2"><code class="inline">init/2</code></a> hook function. However, for CTHs that are installed by means of the
CT start flag, the <a href="#c:init/2"><code class="inline">init/2</code></a> function is called first.</p><section role="note" class="admonition info"><h4 class="admonition-title info">Note</h4><p>Prior to each test execution, Common Test does a simulated test run in order
to count test suites, groups and cases for logging purposes. This causes the
<a href="#c:post_all/3"><code class="inline">post_all/3</code></a> hook function to always be called twice. For
this reason, side effects are best avoided in this callback.</p></section>
  </section>
</section>
<section class="detail" id="c:post_end_per_group/5">

  <div class="detail-header">
    <a href="#c:post_end_per_group/5" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">post_end_per_group(SuiteName, GroupName, Config, Return, CTHState)</h1>

        <span class="note">(since OTP 19.3)</span>

        <span class="note">(optional)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/common_test/src/ct_hooks.erl#L246" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> post_end_per_group(SuiteName, GroupName, Config, Return, CTHState) -> Result
                                when
                                    SuiteName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                                    GroupName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                                    Config :: [{Key, Value}],
                                    Return :: Config | SkipOrFail | <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                    NewReturn :: Config | SkipOrFail | <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                    SkipOrFail :: {fail, Reason} | {skip, Reason},
                                    CTHState :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                    NewCTHState :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                    Result :: {NewReturn, NewCTHState},
                                    Key :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                                    Value :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                    Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>This function is called after <a href="ct_suite.html#c:end_per_group/2"><code class="inline">end_per_group</code></a> if
it exists. It behaves the same way as
<a href="#c:post_init_per_suite/4"><code class="inline">post_init_per_suite</code></a>, but for function
<a href="ct_suite.html#c:end_per_group/2">end_per_group</a> instead.</p><p>If <a href="#c:post_end_per_group/5"><code class="inline">Module:post_end_per_group/5</code></a> is not exported,
common_test will attempt to call
<code class="inline">Module:post_end_per_group(GroupName, Config, Return, CTHState)</code> instead. This
is for backwards compatibility.</p>
  </section>
</section>
<section class="detail" id="c:post_end_per_suite/4">

  <div class="detail-header">
    <a href="#c:post_end_per_suite/4" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">post_end_per_suite(SuiteName, Config, Return, CTHState)</h1>

        <span class="note">(since OTP R14B02)</span>

        <span class="note">(optional)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/common_test/src/ct_hooks.erl#L200" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> post_end_per_suite(SuiteName, Config, Return, CTHState) -> Result
                                when
                                    SuiteName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                                    Config :: [{Key, Value}],
                                    Return :: Config | SkipOrFail | <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                    NewReturn :: Config | SkipOrFail | <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                    SkipOrFail :: {fail, Reason} | {skip, Reason},
                                    CTHState :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                    NewCTHState :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                    Result :: {NewReturn, NewCTHState},
                                    Key :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                                    Value :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                    Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>This function is called after <a href="ct_suite.html#c:end_per_suite/1"><code class="inline">end_per_suite</code></a> if
it exists. It behaves the same way as
<a href="#c:post_init_per_suite/4"><code class="inline">post_init_per_suite</code></a>, but for function
<a href="ct_suite.html#c:end_per_suite/1"><code class="inline">end_per_suite</code></a> instead.</p>
  </section>
</section>
<section class="detail" id="c:post_end_per_testcase/5">

  <div class="detail-header">
    <a href="#c:post_end_per_testcase/5" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">post_end_per_testcase(SuiteName, TestcaseName, Config, Return, CTHState)</h1>

        <span class="note">(since OTP 19.3)</span>

        <span class="note">(optional)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/common_test/src/ct_hooks.erl#L298" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> post_end_per_testcase(SuiteName, TestcaseName, Config, Return, CTHState) -> Result
                                   when
                                       SuiteName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                                       TestcaseName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                                       Config :: [{Key, Value}],
                                       Return :: Config | SkipOrFail | <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                       NewReturn :: Config | SkipOrFail | <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                       SkipOrFail :: {fail, Reason} | {skip, Reason},
                                       CTHState :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                       NewCTHState :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                       Result :: {NewReturn, NewCTHState},
                                       Key :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                                       Value :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                       Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>This function is called after
<a href="ct_suite.html#c:end_per_testcase/2"><code class="inline">end_per_testcase</code></a> if it exists. It behaves
the same way as <a href="#c:post_end_per_suite/4"><code class="inline">post_end_per_suite</code></a>, but for
function <a href="ct_suite.html#c:end_per_testcase/2"><code class="inline">end_per_testcase</code></a> instead.</p><p>If <a href="#c:post_end_per_testcase/5"><code class="inline">Module:post_end_per_testcase/5</code></a> is not
exported, common_test will attempt to call
<code class="inline">Module:post_end_per_testcase(TestcaseName, Config, Return, CTHState)</code> instead.
This is for backwards compatibility.</p>
  </section>
</section>
<section class="detail" id="c:post_groups/2">

  <div class="detail-header">
    <a href="#c:post_groups/2" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">post_groups(SuiteName, GroupDefs)</h1>

        <span class="note">(since OTP 21.3.8)</span>

        <span class="note">(optional)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/common_test/src/ct_hooks.erl#L627" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> post_groups(SuiteName, GroupDefs) -> NewGroupDefs
                         when
                             SuiteName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                             GroupDefs :: [Group],
                             NewGroupDefs :: [Group],
                             Group :: {GroupName, Properties, GroupsAndTestCases},
                             GroupName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                             Properties :: [parallel | sequence | Shuffle | {GroupRepeatType, N}],
                             GroupsAndTestCases ::
                                 [Group |
                                  {group, GroupName} |
                                  TestCase |
                                  {testcase, TestCase, TCRepeatProps}],
                             TestCase :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                             TCRepeatProps :: [{repeat, N} | {repeat_until_ok, N} | {repeat_until_fail, N}],
                             Shuffle :: shuffle | {shuffle, Seed},
                             Seed :: {<a href="../../apps/erts/erlang.html#t:integer/0">integer</a>(), <a href="../../apps/erts/erlang.html#t:integer/0">integer</a>(), <a href="../../apps/erts/erlang.html#t:integer/0">integer</a>()},
                             GroupRepeatType ::
                                 repeat | repeat_until_all_ok | repeat_until_all_fail |
                                 repeat_until_any_ok | repeat_until_any_fail,
                             N :: <a href="../../apps/erts/erlang.html#t:integer/0">integer</a>() | forever.</pre>

      </div>

<p>This function is called after <a href="ct_suite.html#c:groups/0"><code class="inline">groups/0</code></a>. It is used to
modify the test group definitions, for instance to add or remove groups or
change group properties.</p><p><code class="inline">GroupDefs</code> is what <a href="ct_suite.html#c:groups/0"><code class="inline">groups/0</code></a> returned, that is, a
list of group definitions.</p><p><code class="inline">NewGroupDefs</code> is the possibly modified version of this list.</p><p>This function is called only if the CTH is added before <code class="inline">init_per_suite</code> is run.
For details, see section <a href="ct_hooks_chapter.html#scope">CTH Scope</a> in the User's
Guide.</p><p>Notice that for CTHs that are installed by means of the
<a href="ct_suite.html#c:suite/0"><code class="inline">suite/0</code></a> function, <a href="#c:post_groups/2"><code class="inline">post_groups/2</code></a>
is called before the <a href="#c:init/2"><code class="inline">init/2</code></a> hook function. However, for CTHs that are
installed by means of the CT start flag, the <a href="#c:init/2"><code class="inline">init/2</code></a> function is called
first.</p><section role="note" class="admonition info"><h4 class="admonition-title info">Note</h4><p>Prior to each test execution, Common Test does a simulated test run in order
to count test suites, groups and cases for logging purposes. This causes the
<a href="#c:post_groups/2"><code class="inline">post_groups/2</code></a> hook function to always be called twice.
For this reason, side effects are best avoided in this callback.</p></section>
  </section>
</section>
<section class="detail" id="c:post_init_per_group/5">

  <div class="detail-header">
    <a href="#c:post_init_per_group/5" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">post_init_per_group(SuiteName, GroupName, Config, Return, CTHState)</h1>

        <span class="note">(since OTP 19.3)</span>

        <span class="note">(optional)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/common_test/src/ct_hooks.erl#L411" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> post_init_per_group(SuiteName, GroupName, Config, Return, CTHState) -> Result
                                 when
                                     SuiteName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                                     GroupName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                                     Config :: [{Key, Value}],
                                     Return :: Config | SkipOrFail | <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                     NewReturn :: Config | SkipOrFail | <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                     SkipOrFail :: {fail, Reason} | {skip, Reason},
                                     CTHState :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                     NewCTHState :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                     Result :: {NewReturn, NewCTHState},
                                     Key :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                                     Value :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                     Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>This function is called after <a href="ct_suite.html#c:init_per_group/2"><code class="inline">init_per_group</code></a>
if it exists. It behaves the same way as
<a href="#c:post_init_per_suite/4"><code class="inline">post_init_per_suite</code></a>, but for function
<a href="ct_suite.html#c:init_per_group/2"><code class="inline">init_per_group</code></a> instead.</p><p>If <a href="#c:post_init_per_group/5"><code class="inline">Module:post_init_per_group/5</code></a> is not exported,
common_test will attempt to call
<code class="inline">Module:post_init_per_group(GroupName, Config, Return, CTHState)</code> instead. This
is for backwards compatibility.</p>
  </section>
</section>
<section class="detail" id="c:post_init_per_suite/4">

  <div class="detail-header">
    <a href="#c:post_init_per_suite/4" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">post_init_per_suite(SuiteName, Config, Return, CTHState)</h1>

        <span class="note">(since OTP R14B02)</span>

        <span class="note">(optional)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/common_test/src/ct_hooks.erl#L475" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> post_init_per_suite(SuiteName, Config, Return, CTHState) -> Result
                                 when
                                     SuiteName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                                     Config :: [{Key, Value}],
                                     Return :: Config | SkipOrFail | <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                     NewReturn :: Config | SkipOrFail | <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                     SkipOrFail :: {fail, Reason} | {skip, Reason} | <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                     CTHState :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                     NewCTHState :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                     Result :: {NewReturn, NewCTHState},
                                     Key :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                                     Value :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                     Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>This function is called after <a href="ct_suite.html#c:init_per_suite/1"><code class="inline">init_per_suite</code></a>
if it exists. It typically contains extra checks to ensure that all the correct
dependencies are started correctly.</p><p><code class="inline">Return</code> is what <a href="ct_suite.html#c:init_per_suite/1"><code class="inline">init_per_suite</code></a> returned,
that is, <code class="inline">{fail,Reason}</code>, <code class="inline">{skip,Reason}</code>, a <code class="inline">Config</code> list, or a term describing
how <a href="ct_suite.html#c:init_per_suite/1"><code class="inline">init_per_suite</code></a> failed.</p><p><code class="inline">NewReturn</code> is the possibly modified return value of
<a href="ct_suite.html#c:init_per_suite/1"><code class="inline">init_per_suite</code></a>. To recover from a failure in
<a href="ct_suite.html#c:init_per_suite/1"><code class="inline">init_per_suite</code></a>, return <code class="inline">ConfigList</code> with the
<code class="inline">tc_status</code> element removed. For more details, see
<a href="ct_hooks_chapter.html#post">Post Hooks</a> in section &quot;Manipulating Tests&quot; in the
User's Guide.</p><p><code class="inline">CTHState</code> is the current internal state of the CTH.</p><p>This function is called only if the CTH is added before or in <code class="inline">init_per_suite</code>.
For details, see section <a href="ct_hooks_chapter.html#scope">CTH Scope</a> in the User's
Guide.</p>
  </section>
</section>
<section class="detail" id="c:post_init_per_testcase/5">

  <div class="detail-header">
    <a href="#c:post_init_per_testcase/5" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">post_init_per_testcase(SuiteName, TestcaseName, Config, Return, CTHState)</h1>

        <span class="note">(since OTP 19.3)</span>

        <span class="note">(optional)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/common_test/src/ct_hooks.erl#L354" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> post_init_per_testcase(SuiteName, TestcaseName, Config, Return, CTHState) -> Result
                                    when
                                        SuiteName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                                        TestcaseName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                                        Config :: [{Key, Value}],
                                        Return :: Config | SkipOrFail | <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                        NewReturn :: Config | SkipOrFail | <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                        SkipOrFail :: {fail, Reason} | {skip, Reason},
                                        CTHState :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                        NewCTHState :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                        Result :: {NewReturn, NewCTHState},
                                        Key :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                                        Value :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                        Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>This function is called after
<a href="ct_suite.html#c:init_per_testcase/2"><code class="inline">init_per_testcase</code></a> if it exists. It behaves
the same way as <a href="#c:post_init_per_suite/4"><code class="inline">post_init_per_suite</code></a>, but for
function <a href="ct_suite.html#c:init_per_testcase/2"><code class="inline">init_per_testcase</code></a> instead.</p><p>If <a href="#c:post_init_per_testcase/5"><code class="inline">Module:post_init_per_testcase/5</code></a> is not
exported, common_test will attempt to call
<code class="inline">Module:post_init_per_testcase(TestcaseName, Config, Return, CTHState)</code> instead.
This is for backwards compatibility.</p>
  </section>
</section>
<section class="detail" id="c:pre_end_per_group/4">

  <div class="detail-header">
    <a href="#c:pre_end_per_group/4" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">pre_end_per_group(SuiteName, GroupName, EndData, CTHState)</h1>

        <span class="note">(since OTP 19.3)</span>

        <span class="note">(optional)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/common_test/src/ct_hooks.erl#L272" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> pre_end_per_group(SuiteName, GroupName, EndData, CTHState) -> Result
                               when
                                   SuiteName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                                   GroupName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                                   EndData :: Config | SkipOrFail,
                                   Config :: [{Key, Value}],
                                   NewConfig :: [{Key, Value}],
                                   CTHState :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                   NewCTHState :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                   Result :: {NewConfig | SkipOrFail, NewCTHState},
                                   SkipOrFail :: {fail, Reason} | {skip, Reason},
                                   Key :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                                   Value :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                   Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>This function is called before <a href="ct_suite.html#c:end_per_group/2"><code class="inline">end_per_group</code></a>
if it exists. It behaves the same way as
<a href="#c:pre_init_per_suite/3"><code class="inline">pre_init_per_suite</code></a>, but for function
<a href="ct_suite.html#c:end_per_group/2"><code class="inline">end_per_group</code></a> instead.</p><p>If <a href="#c:pre_end_per_group/4"><code class="inline">Module:pre_end_per_group/4</code></a> is not exported,
common_test will attempt to call
<code class="inline">Module:pre_end_per_group(GroupName, EndData, CTHState)</code> instead. This is for
backwards compatibility.</p>
  </section>
</section>
<section class="detail" id="c:pre_end_per_suite/3">

  <div class="detail-header">
    <a href="#c:pre_end_per_suite/3" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">pre_end_per_suite(SuiteName, EndData, CTHState)</h1>

        <span class="note">(since OTP R14B02)</span>

        <span class="note">(optional)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/common_test/src/ct_hooks.erl#L220" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> pre_end_per_suite(SuiteName, EndData, CTHState) -> Result
                               when
                                   SuiteName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                                   EndData :: Config | SkipOrFail,
                                   Config :: [{Key, Value}],
                                   NewConfig :: [{Key, Value}],
                                   CTHState :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                   NewCTHState :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                   Result :: {NewConfig | SkipOrFail, NewCTHState},
                                   SkipOrFail :: {fail, Reason} | {skip, Reason},
                                   Key :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                                   Value :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                   Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>This function is called before <a href="ct_suite.html#c:end_per_suite/1"><code class="inline">end_per_suite</code></a>
if it exists. It behaves the same way as
<a href="#c:pre_init_per_suite/3"><code class="inline">pre_init_per_suite</code></a>, but for function
<a href="ct_suite.html#c:end_per_suite/1"><code class="inline">end_per_suite</code></a> instead.</p>
  </section>
</section>
<section class="detail" id="c:pre_end_per_testcase/4">

  <div class="detail-header">
    <a href="#c:pre_end_per_testcase/4" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">pre_end_per_testcase(SuiteName, TestcaseName, EndData, CTHState)</h1>

        <span class="note">(since OTP 19.3)</span>

        <span class="note">(optional)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/common_test/src/ct_hooks.erl#L330" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> pre_end_per_testcase(SuiteName, TestcaseName, EndData, CTHState) -> Result
                                  when
                                      SuiteName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                                      TestcaseName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                                      EndData :: Config,
                                      Config :: [{Key, Value}],
                                      NewConfig :: [{Key, Value}],
                                      CTHState :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                      NewCTHState :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                      Result :: {NewConfig, NewCTHState},
                                      Key :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                                      Value :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>This function is called before
<a href="ct_suite.html#c:end_per_testcase/2"><code class="inline">end_per_testcase</code></a> if it exists. It behaves
the same way as <a href="#c:pre_end_per_suite/3"><code class="inline">pre_end_per_suite</code></a>, but for function
<a href="ct_suite.html#c:end_per_testcase/2"><code class="inline">end_per_testcase</code></a> instead.</p><p>This function cannot change the result of the test case by returning skip or
fail tuples, but it may insert items in <code class="inline">Config</code> that can be read in
<code class="inline">end_per_testcase/2</code> or in
<a href="#c:post_end_per_testcase/5"><code class="inline">post_end_per_testcase/5</code></a>.</p><p>If <a href="#c:pre_end_per_testcase/4"><code class="inline">Module:pre_end_per_testcase/4</code></a> is not
exported, common_test will attempt to call
<code class="inline">Module:pre_end_per_testcase(TestcaseName, EndData, CTHState)</code> instead. This is
for backwards compatibility.</p>
  </section>
</section>
<section class="detail" id="c:pre_init_per_group/4">

  <div class="detail-header">
    <a href="#c:pre_init_per_group/4" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">pre_init_per_group(SuiteName, GroupName, InitData, CTHState)</h1>

        <span class="note">(since OTP 19.3)</span>

        <span class="note">(optional)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/common_test/src/ct_hooks.erl#L437" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> pre_init_per_group(SuiteName, GroupName, InitData, CTHState) -> Result
                                when
                                    SuiteName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                                    GroupName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                                    InitData :: Config | SkipOrFail,
                                    Config :: [{Key, Value}],
                                    NewConfig :: [{Key, Value}],
                                    CTHState :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                    NewCTHState :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                    Result :: {NewConfig | SkipOrFail, NewCTHState},
                                    SkipOrFail :: {fail, Reason} | {skip, Reason},
                                    Key :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                                    Value :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                    Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>This function is called before <a href="ct_suite.html#c:init_per_group/2"><code class="inline">init_per_group</code></a>
if it exists. It behaves the same way as
<a href="#c:pre_init_per_suite/3"><code class="inline">pre_init_per_suite</code></a>, but for function
<a href="ct_suite.html#c:init_per_group/2"><code class="inline">init_per_group</code></a> instead.</p><p>If <a href="#c:pre_init_per_group/4"><code class="inline">Module:pre_init_per_group/4</code></a> is not exported,
common_test will attempt to call
<code class="inline">Module:pre_init_per_group(GroupName, InitData, CTHState)</code> instead. This is for
backwards compatibility.</p>
  </section>
</section>
<section class="detail" id="c:pre_init_per_suite/3">

  <div class="detail-header">
    <a href="#c:pre_init_per_suite/3" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">pre_init_per_suite(SuiteName, InitData, CTHState)</h1>

        <span class="note">(since OTP R14B02)</span>

        <span class="note">(optional)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/common_test/src/ct_hooks.erl#L517" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> pre_init_per_suite(SuiteName, InitData, CTHState) -> Result
                                when
                                    SuiteName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                                    InitData :: Config | SkipOrFail,
                                    Config :: [{Key, Value}],
                                    NewConfig :: [{Key, Value}],
                                    CTHState :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                    NewCTHState :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                    Result :: {Return, NewCTHState},
                                    Return :: NewConfig | SkipOrFail,
                                    SkipOrFail :: {fail, Reason} | {skip, Reason},
                                    Key :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                                    Value :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                    Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>This function is called before <a href="ct_suite.html#c:init_per_suite/1"><code class="inline">init_per_suite</code></a>
if it exists. It typically contains initialization/logging that must be done
before <code class="inline">init_per_suite</code> is called. If <code class="inline">{skip,Reason}</code> or <code class="inline">{fail,Reason}</code> is
returned, <code class="inline">init_per_suite</code> and all test cases of the suite are skipped and
<code class="inline">Reason</code> printed in the overview log of the suite.</p><p><code class="inline">SuiteName</code> is the name of the suite to be run.</p><p><code class="inline">InitData</code> is the original configuration list of the test suite, or a
<code class="inline">SkipOrFail</code> tuple if a previous CTH has returned this.</p><p><code class="inline">CTHState</code> is the current internal state of the CTH.</p><p><code class="inline">Return</code> is the result of the <code class="inline">init_per_suite</code> function. If it is
<code class="inline">{skip,Reason}</code> or <code class="inline">{fail,Reason}</code>,
<a href="ct_suite.html#c:init_per_suite/1"><code class="inline">init_per_suite</code></a> is never called, instead the
initiation is considered to be skipped or failed, respectively. If a <code class="inline">NewConfig</code>
list is returned, <a href="ct_suite.html#c:init_per_suite/1"><code class="inline">init_per_suite</code></a> is called
with that <code class="inline">NewConfig</code> list. For more details, see section
<a href="ct_hooks_chapter.html#pre">Pre Hooks</a> in the User's Guide.</p><p>This function is called only if the CTH is added before <code class="inline">init_per_suite is run</code>.
For details, see section <a href="ct_hooks_chapter.html#scope">CTH Scope</a> in the User's
Guide.</p>
  </section>
</section>
<section class="detail" id="c:pre_init_per_testcase/4">

  <div class="detail-header">
    <a href="#c:pre_init_per_testcase/4" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">pre_init_per_testcase(SuiteName, TestcaseName, InitData, CTHState)</h1>

        <span class="note">(since OTP 19.3)</span>

        <span class="note">(optional)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/common_test/src/ct_hooks.erl#L384" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> pre_init_per_testcase(SuiteName, TestcaseName, InitData, CTHState) -> Result
                                   when
                                       SuiteName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                                       TestcaseName :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                                       InitData :: Config | SkipOrFail,
                                       Config :: [{Key, Value}],
                                       NewConfig :: [{Key, Value}],
                                       CTHState :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                       NewCTHState :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                       Result :: {NewConfig | SkipOrFail, NewCTHState},
                                       SkipOrFail :: {fail, Reason} | {skip, Reason},
                                       Key :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>(),
                                       Value :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                       Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>This function is called before
<a href="ct_suite.html#c:init_per_testcase/2"><code class="inline">init_per_testcase</code></a> if it exists. It behaves
the same way as <a href="#c:pre_init_per_suite/3"><code class="inline">pre_init_per_suite</code></a>, but for
function <a href="ct_suite.html#c:init_per_testcase/2"><code class="inline">init_per_testcase</code></a> instead.</p><p>If <a href="#c:pre_init_per_testcase/4"><code class="inline">Module:pre_init_per_testcase/4</code></a> is not
exported, common_test will attempt to call
<code class="inline">Module:pre_init_per_testcase(TestcaseName, InitData, CTHState)</code> instead. This
is for backwards compatibility.</p><p>CTHs cannot be added here right now. That feature may be added in a later
release, but it would right now break backwards compatibility.</p>
  </section>
</section>
<section class="detail" id="c:terminate/1">

  <div class="detail-header">
    <a href="#c:terminate/1" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">terminate(Hooks)</h1>

        <span class="note">(since OTP R14B02)</span>

        <span class="note">(optional)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/common_test/src/ct_hooks.erl#L658" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> terminate(CTHState) -> <a href="../../apps/erts/erlang.html#t:term/0">term</a>() when CTHState :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>This function is called at the end of a CTH <a href="ct_hooks_chapter.html#scope">scope</a>.
The returned term is ignored.</p>
  </section>
</section>

    </div>
  </section>

    <footer class="footer">
      <p>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="common_test.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.38.1) for the

          <a href="https://erlang.org" title="Erlang" target="_blank" translate="no">Erlang programming language</a>

      </p>
<p>Copyright Â© 1996-2025 <a href="https://www.ericsson.com">Ericsson AB</a></p>
    </footer>
  </div>
</main>
</div>
  <script defer src="https://cdn.jsdelivr.net/npm/mermaid@11.4.1/dist/mermaid.min.js"></script>
  <script>
  let initialized = false;

  window.addEventListener("exdoc:loaded", () => {
      if (!initialized) {
      mermaid.initialize({
          startOnLoad: false,
          theme: document.body.className.includes("dark") ? "dark" : "default"
      });
      initialized = true;
      }

      let id = 0;
      for (const codeEl of document.querySelectorAll("pre code.mermaid")) {
      const preEl = codeEl.parentElement;
      const graphDefinition = codeEl.textContent;
      const graphEl = document.createElement("div");
      const graphId = "mermaid-graph-" + id++;
      mermaid.render(graphId, graphDefinition).then(({svg, bindFunctions}) => {
          graphEl.innerHTML = svg;
          bindFunctions?.(graphEl);
          preEl.insertAdjacentElement("afterend", graphEl);
          preEl.remove();
      });
      }
  });
  </script>

  </body>
</html>
