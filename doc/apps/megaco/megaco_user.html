<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.38.1">
    <meta name="project" content="megaco v4.8.1">


<meta name="major-vsn" content="28">
<meta name="exdoc:full-text-search-url" content="/doc/search.html?v=28&q=">
<link rel="canonical" href="https://www.erlang.org/doc/apps/megaco/megaco_user.html" />
    <title>megaco_user â€” megaco v4.8.1</title>

    <link rel="stylesheet" href="dist/html-erlang-ZK43ZOAC.css" />

    <script defer src="dist/sidebar_items-3F7928BC.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-DPJLHKSM.js"></script>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="../../index.html" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="megaco" />
        </a>

      <div>
        <a href="../../index.html" class="sidebar-projectName" translate="no">
megaco
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v4.8.1
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras=""></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-behaviour" id="main" data-type="modules">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of megaco</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search" tabindex="-1">
            <i class="ri-search-2-line ri-lg" aria-hidden="true"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>
      <span translate="no">megaco_user</span> <small>behaviour</small>
      <small class="app-vsn" translate="no">(megaco v4.8.1)</small>

    </h1>

      <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/megaco/src/engine/megaco_user.erl#L38" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

  </div>


    <section id="moduledoc">
<p>Callback module for users of the Megaco application</p><p>This module defines the callback behaviour of Megaco users. A megaco_user
compliant callback module must export the following functions:</p><ul><li><a href="#c:handle_connect/3">handle_connect/2,3</a></li><li><a href="#c:handle_disconnect/3">handle_disconnect/3</a></li><li><a href="#c:handle_syntax_error/4">handle_syntax_error/3,4</a></li><li><a href="#c:handle_message_error/4">handle_message_error/3,4</a></li><li><a href="#c:handle_trans_request/4">handle_trans_request/3,4</a></li><li><a href="#c:handle_trans_long_request/4">handle_trans_long_request/3,4</a></li><li><a href="#c:handle_trans_reply/5">handle_trans_reply/4,5</a></li><li><a href="#c:handle_trans_ack/5">handle_trans_ack/4,5</a></li><li><a href="#c:handle_unexpected_trans/4">handle_unexpected_trans/3,4</a></li><li><a href="#c:handle_trans_request_abort/5">handle_trans_request_abort/4,5</a></li><li><a href="#c:handle_segment_reply/6">handle_segment_reply/5,6</a></li></ul><p>The semantics of them and their exact signatures are explained below.</p><p>The <code class="inline">user_args</code> configuration parameter which may be used to extend the argument
list of the callback functions. For example, the handle_connect function takes
by default two arguments:</p><pre><code class="makeup erlang" translate="no"><span class="nf">handle_connect</span><span class="p" data-group-id="3829034441-1">(</span><span class="n">Handle</span><span class="p">,</span><span class="w"> </span><span class="n">Version</span><span class="p" data-group-id="3829034441-1">)</span></code></pre><p>but if the <code class="inline">user_args</code> parameter is set to a longer list, such as
<code class="inline">[SomePid,SomeTableRef]</code>, the callback function is expected to have these (in
this case two) extra arguments last in the argument list:</p><pre><code class="makeup erlang" translate="no"><span class="nf">handle_connect</span><span class="p" data-group-id="9741169404-1">(</span><span class="n">Handle</span><span class="p">,</span><span class="w"> </span><span class="n">Version</span><span class="p">,</span><span class="w"> </span><span class="n">SomePid</span><span class="p">,</span><span class="w"> </span><span class="n">SomeTableRef</span><span class="p" data-group-id="9741169404-1">)</span></code></pre><p><a href="" id="extra_argument"></a></p><section role="note" class="admonition info"><h4 class="admonition-title info">Note</h4><p>Must of the functions below has an optional <code class="inline">Extra</code> argument (e.g.
<a href="#c:handle_unexpected_trans/4">handle_unexpected_trans/4</a>). The functions
which takes this argument will be called if and only if one of the functions
<a href="megaco.html#receive_message/5"><code class="inline">receive_message/5</code></a> or
<a href="megaco.html#process_received_message/5"><code class="inline">process_received_message/5</code></a> was called
with the <code class="inline">Extra</code> argument different than <code class="inline">ignore_extra</code>.</p></section><h2 id="module-data-types" class="section-heading"><a href="#module-data-types" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">DATA TYPES</span></h2><pre><code class="makeup erlang" translate="no"><span class="nf">action_request</span><span class="p" data-group-id="8650079183-1">(</span><span class="p" data-group-id="8650079183-1">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">#</span><span class="ss">&#39;ActionRequest&#39;</span><span class="p" data-group-id="8650079183-2">{</span><span class="p" data-group-id="8650079183-2">}</span><span class="w">
</span><span class="nf">action_reply</span><span class="p" data-group-id="8650079183-3">(</span><span class="p" data-group-id="8650079183-3">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">#</span><span class="ss">&#39;ActionReply&#39;</span><span class="p" data-group-id="8650079183-4">{</span><span class="p" data-group-id="8650079183-4">}</span><span class="w">
</span><span class="nf">error_desc</span><span class="p" data-group-id="8650079183-5">(</span><span class="p" data-group-id="8650079183-5">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">#</span><span class="ss">&#39;ErrorDescriptor&#39;</span><span class="p" data-group-id="8650079183-6">{</span><span class="p" data-group-id="8650079183-6">}</span><span class="w">
</span><span class="nf">segment_no</span><span class="p" data-group-id="8650079183-7">(</span><span class="p" data-group-id="8650079183-7">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="8650079183-8">(</span><span class="p" data-group-id="8650079183-8">)</span></code></pre><pre><code class="makeup erlang" translate="no"><span class="nf">conn_handle</span><span class="p" data-group-id="5585759815-1">(</span><span class="p" data-group-id="5585759815-1">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">#</span><span class="ss">megaco_conn_handle</span><span class="p" data-group-id="5585759815-2">{</span><span class="p" data-group-id="5585759815-2">}</span></code></pre><p>The record initially returned by <code class="inline">megaco:connect/4,5</code>. It identifies a &quot;virtual&quot;
connection and may be reused after a reconnect (disconnect + connect).</p><pre><code class="text">protocol_version() = integer()</code></pre><p>Is the actual protocol version. In most cases the protocol version is retrieved
from the processed message, but there are exceptions:</p><ul><li>When <code class="inline">handle_connect/2,3</code> is triggered by an explicit call to
<code class="inline">megaco:connect/4,5</code>.</li><li><a href="#c:handle_disconnect/3"><code class="inline">handle_disconnect/3</code></a></li><li><a href="#c:handle_syntax_error/3"><code class="inline">handle_syntax_error/3</code></a></li></ul><p>In these cases, the ProtocolVersion default version is obtained from the static
connection configuration:</p><ul><li><code class="inline">megaco:conn_info(ConnHandle, protocol_version)</code>.</li></ul>
    </section>

</div>

  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Summary</span>
    </h1>
<div class="summary-types summary">
  <h2>
    <a href="#types">Types</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:conn_handle/0" data-no-tooltip="" translate="no">conn_handle()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:megaco_timer/0" data-no-tooltip="" translate="no">megaco_timer()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:receive_handle/0" data-no-tooltip="" translate="no">receive_handle()</a>

      </div>

    </div>

</div>
<div class="summary-callbacks summary">
  <h2>
    <a href="#callbacks">Callbacks</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:handle_connect/2" data-no-tooltip="" translate="no">handle_connect(ConnHandle, ProtocolVersion)</a>

      </div>

        <div class="summary-synopsis"><p>Equivalent to <a><code class="inline">handle_connect/3</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:handle_connect/3" data-no-tooltip="" translate="no">handle_connect(ConnHandle, ProtocolVersion, Extra)</a>

      </div>

        <div class="summary-synopsis"><p>Invoked when a new connection is established</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:handle_disconnect/3" data-no-tooltip="" translate="no">handle_disconnect(ConnHandle, ProtocolVersion, Reason)</a>

      </div>

        <div class="summary-synopsis"><p>Invoked when a connection is teared down</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:handle_message_error/3" data-no-tooltip="" translate="no">handle_message_error(ConnHandle, ProtocolVersion, ErrorDescr)</a>

      </div>

        <div class="summary-synopsis"><p>Equivalent to <a><code class="inline">handle_message_error/4</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:handle_message_error/4" data-no-tooltip="" translate="no">handle_message_error(ConnHandle, ProtocolVersion, ErrorDescr, Extra)</a>

      </div>

        <div class="summary-synopsis"><p>Invoked when a received message just contains an error instead of a list of
transactions.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:handle_segment_reply/5" data-no-tooltip="" translate="no">handle_segment_reply(ConnHandle, ProtocolVersion, TransNo, SegNo, SegCompl)</a>

      </div>

        <div class="summary-synopsis"><p>Equivalent to <a><code class="inline">handle_segment_reply/6</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:handle_segment_reply/6" data-no-tooltip="" translate="no">handle_segment_reply(ConnHandle, ProtocolVersion, TransNo, SegNo, SegCompl, Extra)</a>

      </div>

        <div class="summary-synopsis"><p>This function is called when a segment reply has been received if the
<a>segment_reply_ind</a> config option has been set to true.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:handle_syntax_error/3" data-no-tooltip="" translate="no">handle_syntax_error(ReceiveHandle, ProtocolVersion, DefaultED)</a>

      </div>

        <div class="summary-synopsis"><p>Equivalent to <a><code class="inline">handle_syntax_error/4</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:handle_syntax_error/4" data-no-tooltip="" translate="no">handle_syntax_error(ReceiveHandle, ProtocolVersion, DefaultED, Extra)</a>

      </div>

        <div class="summary-synopsis"><p>Invoked when a received message had syntax errors</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:handle_trans_ack/4" data-no-tooltip="" translate="no">handle_trans_ack(ConnHandle, ProtocolVersion, AckStatus, AckData)</a>

      </div>

        <div class="summary-synopsis"><p>Equivalent to <a><code class="inline">handle_trans_ack/5</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:handle_trans_ack/5" data-no-tooltip="" translate="no">handle_trans_ack(ConnHandle, ProtocolVersion, AckStatus, AckData, Extra)</a>

      </div>

        <div class="summary-synopsis"><p>Optionally invoked for a transaction acknowledgement</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:handle_trans_long_request/3" data-no-tooltip="" translate="no">handle_trans_long_request(ConnHandle, ProtocolVersion, ReqData)</a>

      </div>

        <div class="summary-synopsis"><p>Equivalent to <a><code class="inline">handle_trans_long_request/4</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:handle_trans_long_request/4" data-no-tooltip="" translate="no">handle_trans_long_request(ConnHandle, ProtocolVersion, ReqData, Extra)</a>

      </div>

        <div class="summary-synopsis"><p>Optionally invoked for a time consuming transaction request</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:handle_trans_reply/4" data-no-tooltip="" translate="no">handle_trans_reply(ConnHandle, ProtocolVersion, UserReply, ReplyData)</a>

      </div>

        <div class="summary-synopsis"><p>Equivalent to <a><code class="inline">handle_trans_reply/5</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:handle_trans_reply/5" data-no-tooltip="" translate="no">handle_trans_reply(ConnHandle, ProtocolVersion, UserReply, ReplyData, Extra)</a>

      </div>

        <div class="summary-synopsis"><p>Optionally invoked for a transaction reply</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:handle_trans_request/3" data-no-tooltip="" translate="no">handle_trans_request(ConnHandle, ProtocolVersion, ActionRequests)</a>

      </div>

        <div class="summary-synopsis"><p>Equivalent to <a><code class="inline">handle_trans_request/4</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:handle_trans_request/4" data-no-tooltip="" translate="no">handle_trans_request(ConnHandle, ProtocolVersion, ActionRequests, Extra)</a>

      </div>

        <div class="summary-synopsis"><p>Invoked for each transaction request</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:handle_trans_request_abort/4" data-no-tooltip="" translate="no">handle_trans_request_abort(ConnHandle, ProtocolVersion, TransNo, Pid)</a>

      </div>

        <div class="summary-synopsis"><p>Equivalent to <a><code class="inline">handle_trans_request_abort/5</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:handle_trans_request_abort/5" data-no-tooltip="" translate="no">handle_trans_request_abort(ConnHandle, ProtocolVersion, TransNo, Pid, Extra)</a>

      </div>

        <div class="summary-synopsis"><p>Invoked when a transaction request has been aborted</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:handle_unexpected_trans/3" data-no-tooltip="" translate="no">handle_unexpected_trans(ConnHandle, ProtocolVersion, Trans)</a>

      </div>

        <div class="summary-synopsis"><p>Equivalent to <a><code class="inline">handle_unexpected_trans/4</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:handle_unexpected_trans/4" data-no-tooltip="" translate="no">handle_unexpected_trans(ConnHandle, ProtocolVersion, Trans, Extra)</a>

      </div>

        <div class="summary-synopsis"><p>Invoked when a unexpected message is received</p></div>

    </div>

</div>

  </section>


  <section id="types" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#types">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Types</span>
    </h1>
    <div class="types-list">
<section class="detail" id="t:conn_handle/0">

  <div class="detail-header">
    <a href="#t:conn_handle/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">conn_handle()</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/megaco/src/engine/megaco_user.erl#L131" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> conn_handle() :: #megaco_conn_handle{local_mid :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(), remote_mid :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()}.</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:megaco_timer/0">

  <div class="detail-header">
    <a href="#t:megaco_timer/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">megaco_timer()</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/megaco/src/engine/megaco_user.erl#L132" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> megaco_timer() ::
          infinity |
          <a href="../../apps/erts/erlang.html#t:non_neg_integer/0">non_neg_integer</a>() |
          #megaco_incr_timer{wait_for :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                             factor :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                             incr :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                             max_retries :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()}.</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:receive_handle/0">

  <div class="detail-header">
    <a href="#t:receive_handle/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">receive_handle()</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/megaco/src/engine/megaco_user.erl#L130" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> receive_handle() ::
          #megaco_receive_handle{local_mid :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                 encoding_mod :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                 encoding_config :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                 send_mod :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                 protocol_version :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()}.</pre>

      </div>


  </section>
</section>

    </div>
  </section>

  <section id="callbacks" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#callbacks">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Callbacks</span>
    </h1>
    <div class="callbacks-list">
<section class="detail" id="c:handle_connect/2">

  <div class="detail-header">
    <a href="#c:handle_connect/2" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">handle_connect(ConnHandle, ProtocolVersion)</h1>

        <span class="note">(optional)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/megaco/src/engine/megaco_user.erl#L135" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> handle_connect(ConnHandle, ProtocolVersion) -> ok | error | {error, ErrorDescr}
                            when
                                ConnHandle :: <a href="#t:conn_handle/0">conn_handle</a>(),
                                ProtocolVersion :: <a href="megaco_encoder.html#t:protocol_version/0">megaco_encoder:protocol_version</a>(),
                                ErrorDescr :: <a href="megaco_encoder.html#t:error_desc/0">megaco_encoder:error_desc</a>().</pre>

      </div>

<p>Equivalent to <a href="#c:handle_connect/3"><code class="inline">handle_connect/3</code></a>.</p>
  </section>
</section>
<section class="detail" id="c:handle_connect/3">

  <div class="detail-header">
    <a href="#c:handle_connect/3" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">handle_connect(ConnHandle, ProtocolVersion, Extra)</h1>

        <span class="note">(optional)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/megaco/src/engine/megaco_user.erl#L162" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> handle_connect(ConnHandle, ProtocolVersion, Extra) -> ok | error | {error, ErrorDescr}
                            when
                                ConnHandle :: <a href="#t:conn_handle/0">conn_handle</a>(),
                                ProtocolVersion :: <a href="megaco_encoder.html#t:protocol_version/0">megaco_encoder:protocol_version</a>(),
                                Extra :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                ErrorDescr :: <a href="megaco_encoder.html#t:error_desc/0">megaco_encoder:error_desc</a>().</pre>

      </div>

<p>Invoked when a new connection is established</p><p>Connections may either be established by an explicit call to megaco:connect/4 or
implicitly at the first invocation of megaco:receive_message/3.</p><p>Normally a Media Gateway (MG) connects explicitly while a Media Gateway
Controller (MGC) connects implicitly.</p><p>At the Media Gateway Controller (MGC) side it is possible to reject a connection
request (and send a message error reply to the gateway) by returning
<code class="inline">{error, ErrorDescr}</code> or simply <code class="inline">error</code> which generates an error descriptor with
code 402 (unauthorized) and reason &quot;Connection refused by user&quot; (this is also
the case for all unknown results, such as exit signals or throw).</p><p>See <a href="#extra_argument">note</a> above about the <code class="inline">Extra</code> argument in
<a href="#c:handle_message_error/4"><code class="inline">handle_message_error/4</code></a>.</p><p><a href="#c:handle_connect/3"><code class="inline">handle_connect/3</code></a> (with <code class="inline">Extra</code>) can also be called as
a result of a call to the <a href="megaco.html#connect/5"><code class="inline">megaco:connect/5</code></a> function (if
that function is called with the <code class="inline">Extra</code> argument different than <code class="inline">ignore_extra</code>.</p>
  </section>
</section>
<section class="detail" id="c:handle_disconnect/3">

  <div class="detail-header">
    <a href="#c:handle_disconnect/3" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">handle_disconnect(ConnHandle, ProtocolVersion, Reason)</h1>

        <span class="note">(optional)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/megaco/src/engine/megaco_user.erl#L175" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> handle_disconnect(ConnHandle, ProtocolVersion, Reason) -> <a href="megaco.html#t:void/0">megaco:void</a>()
                               when
                                   ConnHandle :: <a href="#t:conn_handle/0">conn_handle</a>(),
                                   ProtocolVersion :: <a href="megaco_encoder.html#t:protocol_version/0">megaco_encoder:protocol_version</a>(),
                                   Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Invoked when a connection is teared down</p><p>The disconnect may either be made explicitly by a call to megaco:disconnect/2 or
implicitly when the control process of the connection dies.</p>
  </section>
</section>
<section class="detail" id="c:handle_message_error/3">

  <div class="detail-header">
    <a href="#c:handle_message_error/3" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">handle_message_error(ConnHandle, ProtocolVersion, ErrorDescr)</h1>

        <span class="note">(optional)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/megaco/src/engine/megaco_user.erl#L220" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> handle_message_error(ConnHandle, ProtocolVersion, ErrorDescr) -> <a href="megaco.html#t:void/0">megaco:void</a>()
                                  when
                                      ConnHandle :: <a href="#t:conn_handle/0">conn_handle</a>(),
                                      ProtocolVersion :: <a href="megaco_encoder.html#t:protocol_version/0">megaco_encoder:protocol_version</a>(),
                                      ErrorDescr :: <a href="megaco_encoder.html#t:error_desc/0">megaco_encoder:error_desc</a>().</pre>

      </div>

<p>Equivalent to <a href="#c:handle_message_error/4"><code class="inline">handle_message_error/4</code></a>.</p>
  </section>
</section>
<section class="detail" id="c:handle_message_error/4">

  <div class="detail-header">
    <a href="#c:handle_message_error/4" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">handle_message_error(ConnHandle, ProtocolVersion, ErrorDescr, Extra)</h1>

        <span class="note">(optional)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/megaco/src/engine/megaco_user.erl#L242" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> handle_message_error(ConnHandle, ProtocolVersion, ErrorDescr, Extra) -> <a href="megaco.html#t:void/0">megaco:void</a>()
                                  when
                                      ConnHandle :: <a href="#t:conn_handle/0">conn_handle</a>(),
                                      ProtocolVersion :: <a href="megaco_encoder.html#t:protocol_version/0">megaco_encoder:protocol_version</a>(),
                                      ErrorDescr :: <a href="megaco_encoder.html#t:error_desc/0">megaco_encoder:error_desc</a>(),
                                      Extra :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Invoked when a received message just contains an error instead of a list of
transactions.</p><p>Incoming messages is delivered by megaco:receive_message/4 and successfully
decoded. Normally a message contains a list of transactions, but it may instead
contain an ErrorDescriptor on top level of the message.</p><p>Message errors are detected remotely on the other side of the protocol. And you
probably don't want to reply to it, but it may indicate that you have
outstanding transactions that not will get any response (request -&gt; reply; reply
-&gt; ack).</p><p>See <a href="#extra_argument">note</a> above about the <code class="inline">Extra</code> argument in
<a href="#c:handle_message_error/4"><code class="inline">handle_message_error/4</code></a>.</p>
  </section>
</section>
<section class="detail" id="c:handle_segment_reply/5">

  <div class="detail-header">
    <a href="#c:handle_segment_reply/5" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">handle_segment_reply(ConnHandle, ProtocolVersion, TransNo, SegNo, SegCompl)</h1>

        <span class="note">(optional)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/megaco/src/engine/megaco_user.erl#L691" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> handle_segment_reply(ConnHandle, ProtocolVersion, TransNo, SegNo, SegCompl) -> ok
                                  when
                                      ConnHandle :: <a href="#t:conn_handle/0">conn_handle</a>(),
                                      ProtocolVersion :: <a href="megaco_encoder.html#t:protocol_version/0">megaco_encoder:protocol_version</a>(),
                                      TransNo :: <a href="../../apps/erts/erlang.html#t:integer/0">integer</a>(),
                                      SegNo :: <a href="../../apps/erts/erlang.html#t:integer/0">integer</a>(),
                                      SegCompl :: asn1_NOVALUE | 'NULL'.</pre>

      </div>

<p>Equivalent to <a href="#c:handle_segment_reply/6"><code class="inline">handle_segment_reply/6</code></a>.</p>
  </section>
</section>
<section class="detail" id="c:handle_segment_reply/6">

  <div class="detail-header">
    <a href="#c:handle_segment_reply/6" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">handle_segment_reply(ConnHandle, ProtocolVersion, TransNo, SegNo, SegCompl, Extra)</h1>

        <span class="note">(optional)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/megaco/src/engine/megaco_user.erl#L711" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> handle_segment_reply(ConnHandle, ProtocolVersion, TransNo, SegNo, SegCompl, Extra) -> ok
                                  when
                                      ConnHandle :: <a href="#t:conn_handle/0">conn_handle</a>(),
                                      ProtocolVersion :: <a href="megaco_encoder.html#t:protocol_version/0">megaco_encoder:protocol_version</a>(),
                                      TransNo :: <a href="../../apps/erts/erlang.html#t:integer/0">integer</a>(),
                                      SegNo :: <a href="megaco_encoder.html#t:segment_no/0">megaco_encoder:segment_no</a>(),
                                      SegCompl :: asn1_NOVALUE | 'NULL',
                                      Extra :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>This function is called when a segment reply has been received if the
<a href="megaco.html#conn_info/2">segment_reply_ind</a> config option has been set to true.</p><p>This is in effect a progress report.</p><p>See <a href="#extra_argument">note</a> above about the <code class="inline">Extra</code> argument in
<a href="#c:handle_segment_reply/6"><code class="inline">handle_segment_reply/6</code></a>.</p>
  </section>
</section>
<section class="detail" id="c:handle_syntax_error/3">

  <div class="detail-header">
    <a href="#c:handle_syntax_error/3" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">handle_syntax_error(ReceiveHandle, ProtocolVersion, DefaultED)</h1>

        <span class="note">(optional)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/megaco/src/engine/megaco_user.erl#L182" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> handle_syntax_error(ReceiveHandle, ProtocolVersion, DefaultED) ->
                                 reply | {reply, ED} | no_reply | {no_reply, ED}
                                 when
                                     ReceiveHandle :: <a href="#t:receive_handle/0">receive_handle</a>(),
                                     ProtocolVersion :: <a href="megaco_encoder.html#t:protocol_version/0">megaco_encoder:protocol_version</a>(),
                                     DefaultED :: <a href="megaco_encoder.html#t:error_desc/0">megaco_encoder:error_desc</a>(),
                                     ED :: <a href="megaco_encoder.html#t:error_desc/0">megaco_encoder:error_desc</a>().</pre>

      </div>

<p>Equivalent to <a href="#c:handle_syntax_error/4"><code class="inline">handle_syntax_error/4</code></a>.</p>
  </section>
</section>
<section class="detail" id="c:handle_syntax_error/4">

  <div class="detail-header">
    <a href="#c:handle_syntax_error/4" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">handle_syntax_error(ReceiveHandle, ProtocolVersion, DefaultED, Extra)</h1>

        <span class="note">(optional)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/megaco/src/engine/megaco_user.erl#L211" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> handle_syntax_error(ReceiveHandle, ProtocolVersion, DefaultED, Extra) ->
                                 reply | {reply, ED} | no_reply | {no_reply, ED}
                                 when
                                     ReceiveHandle :: <a href="#t:receive_handle/0">receive_handle</a>(),
                                     ProtocolVersion :: <a href="megaco_encoder.html#t:protocol_version/0">megaco_encoder:protocol_version</a>(),
                                     DefaultED :: <a href="megaco_encoder.html#t:error_desc/0">megaco_encoder:error_desc</a>(),
                                     ED :: <a href="megaco_encoder.html#t:error_desc/0">megaco_encoder:error_desc</a>(),
                                     Extra :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Invoked when a received message had syntax errors</p><p>Incoming messages is delivered by megaco:receive_message/4 and normally decoded
successfully. But if the decoding failed this function is called in order to
decide if the originator should get a reply message (reply) or if the reply
silently should be discarded (no_reply).</p><p>Syntax errors are detected locally on this side of the protocol and may have
many causes, e.g. a malfunctioning transport layer, wrong encoder/decoder
selected, bad configuration of the selected encoder/decoder etc.</p><p>The error descriptor defaults to <code class="inline">DefaultED</code>, but can be overridden with an
alternate one by returning <code class="inline">{reply,ED}</code> or <code class="inline">{no_reply,ED}</code> instead of <code class="inline">reply</code>
and <code class="inline">no_reply</code> respectively.</p><p>Any other return values (including exit signals or throw) and the <code class="inline">DefaultED</code>
will be used.</p><p>See <a href="#extra_argument">note</a> above about the <code class="inline">Extra</code> argument in
<a href="#c:handle_syntax_error/4"><code class="inline">handle_syntax_error/4</code></a>.</p>
  </section>
</section>
<section class="detail" id="c:handle_trans_ack/4">

  <div class="detail-header">
    <a href="#c:handle_trans_ack/4" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">handle_trans_ack(ConnHandle, ProtocolVersion, AckStatus, AckData)</h1>

        <span class="note">(optional)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/megaco/src/engine/megaco_user.erl#L558" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> handle_trans_ack(ConnHandle, ProtocolVersion, AckStatus, AckData) -> ok
                              when
                                  ConnHandle :: <a href="#t:conn_handle/0">conn_handle</a>(),
                                  ProtocolVersion :: <a href="megaco_encoder.html#t:protocol_version/0">megaco_encoder:protocol_version</a>(),
                                  AckStatus :: ok | {error, Reason},
                                  AckData :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                  Reason :: UserCancelReason | SendReason | OtherReason,
                                  UserCancelReason :: {user_cancel, ReasonForUserCancel},
                                  ReasonForUserCancel :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                  SendReason :: SendCancelledReason | SendFailedReason,
                                  SendCancelledReason :: {send_message_cancelled, ReasonForSendCancel},
                                  ReasonForSendCancel :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                  SendFailedReason :: {send_message_failed, ReasonForSendFailure},
                                  ReasonForSendFailure :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                  OtherReason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Equivalent to <a href="#c:handle_trans_ack/5"><code class="inline">handle_trans_ack/5</code></a>.</p>
  </section>
</section>
<section class="detail" id="c:handle_trans_ack/5">

  <div class="detail-header">
    <a href="#c:handle_trans_ack/5" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">handle_trans_ack(ConnHandle, ProtocolVersion, AckStatus, AckData, Extra)</h1>

        <span class="note">(optional)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/megaco/src/engine/megaco_user.erl#L607" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> handle_trans_ack(ConnHandle, ProtocolVersion, AckStatus, AckData, Extra) -> ok
                              when
                                  ConnHandle :: <a href="#t:conn_handle/0">conn_handle</a>(),
                                  ProtocolVersion :: <a href="megaco_encoder.html#t:protocol_version/0">megaco_encoder:protocol_version</a>(),
                                  AckStatus :: ok | {error, Reason},
                                  AckData :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                  Extra :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                  Reason :: UserCancelReason | SendReason | OtherReason,
                                  UserCancelReason :: {user_cancel, ReasonForUserCancel},
                                  ReasonForUserCancel :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                  SendReason :: SendCancelledReason | SendFailedReason,
                                  SendCancelledReason :: {send_message_cancelled, ReasonForSendCancel},
                                  ReasonForSendCancel :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                  SendFailedReason :: {send_message_failed, ReasonForSendFailure},
                                  ReasonForSendFailure :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                  OtherReason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Optionally invoked for a transaction acknowledgement</p><p>If this function gets invoked or not, is controlled by the reply from the
preceding call to handle_trans_request/3. The handle_trans_request/3 function
may decide to return {handle_ack, ack_data()} or {handle_sloppy_ack,
ack_data()} meaning that you need an immediate acknowledgement of the reply and
that this function should be invoked to handle the acknowledgement.</p><p>The ack_data() argument to this function is the Erlang term returned by
handle_trans_request/3.</p><p>If the AckStatus is ok, it is indicating that this is a true acknowledgement of
the transaction reply.</p><p>If the AckStatus is {error, Reason}, it is an indication that the
acknowledgement or even the reply (for which this is an acknowledgement) was not
delivered, but there is no point in waiting any longer for it to arrive. This
happens when:</p><ul><li><p><strong><code class="inline">reply_timer</code></strong> - The <code class="inline">reply_timer</code> eventually times out.</p></li><li><p><strong>reply send failure</strong> - When megaco fails to send the reply (see
<a href="#c:handle_trans_reply/5">handle_trans_reply</a>), for whatever reason.</p></li><li><p><strong>cancel</strong> - The user has explicitly cancelled the wait (megaco:cancel/2).</p></li></ul><p>See <a href="#extra_argument">note</a> above about the <code class="inline">Extra</code> argument in
<a href="#c:handle_trans_ack/5"><code class="inline">handle_trans_ack/5</code></a>.</p>
  </section>
</section>
<section class="detail" id="c:handle_trans_long_request/3">

  <div class="detail-header">
    <a href="#c:handle_trans_long_request/3" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">handle_trans_long_request(ConnHandle, ProtocolVersion, ReqData)</h1>

        <span class="note">(optional)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/megaco/src/engine/megaco_user.erl#L359" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> handle_trans_long_request(ConnHandle, ProtocolVersion, ReqData) -> Reply
                                       when
                                           ConnHandle :: <a href="#t:conn_handle/0">conn_handle</a>(),
                                           ProtocolVersion :: <a href="megaco_encoder.html#t:protocol_version/0">megaco_encoder:protocol_version</a>(),
                                           ReqData :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                           Reply ::
                                               {AckAction, ActualReply} |
                                               {AckAction, ActualReply, SendOptions},
                                           AckAction ::
                                               discard_ack |
                                               {handle_ack, AckData} |
                                               {handle_sloppy_ack, AckData},
                                           ActualReply ::
                                               [<a href="megaco_encoder.html#t:action_reply/0">megaco_encoder:action_reply</a>()] | <a href="megaco_encoder.html#t:error_desc/0">megaco_encoder:error_desc</a>(),
                                           AckData :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                           SendOptions :: [SendOption],
                                           SendOption ::
                                               {reply_timer, <a href="#t:megaco_timer/0">megaco_timer</a>()} |
                                               {send_handle, <a href="../../apps/erts/erlang.html#t:term/0">term</a>()} |
                                               {protocol_version, <a href="megaco_encoder.html#t:protocol_version/0">megaco_encoder:protocol_version</a>()}.</pre>

      </div>

<p>Equivalent to <a href="#c:handle_trans_long_request/4"><code class="inline">handle_trans_long_request/4</code></a>.</p>
  </section>
</section>
<section class="detail" id="c:handle_trans_long_request/4">

  <div class="detail-header">
    <a href="#c:handle_trans_long_request/4" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">handle_trans_long_request(ConnHandle, ProtocolVersion, ReqData, Extra)</h1>

        <span class="note">(optional)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/megaco/src/engine/megaco_user.erl#L395" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> handle_trans_long_request(ConnHandle, ProtocolVersion, ReqData, Extra) -> Reply
                                       when
                                           ConnHandle :: <a href="#t:conn_handle/0">conn_handle</a>(),
                                           ProtocolVersion :: <a href="megaco_encoder.html#t:protocol_version/0">megaco_encoder:protocol_version</a>(),
                                           ReqData :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                           Extra :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                           Reply ::
                                               {AckAction, ActualReply} |
                                               {AckAction, ActualReply, SendOptions},
                                           AckAction ::
                                               discard_ack |
                                               {handle_ack, AckData} |
                                               {handle_sloppy_ack, AckData},
                                           ActualReply ::
                                               [<a href="megaco_encoder.html#t:action_reply/0">megaco_encoder:action_reply</a>()] | <a href="megaco_encoder.html#t:error_desc/0">megaco_encoder:error_desc</a>(),
                                           AckData :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                           SendOptions :: [SendOption],
                                           SendOption ::
                                               {reply_timer, <a href="#t:megaco_timer/0">megaco_timer</a>()} |
                                               {send_handle, <a href="../../apps/erts/erlang.html#t:term/0">term</a>()} |
                                               {protocol_version, <a href="megaco_encoder.html#t:protocol_version/0">megaco_encoder:protocol_version</a>()}.</pre>

      </div>

<p>Optionally invoked for a time consuming transaction request</p><p>If this function gets invoked or not is controlled by the reply from the
preceding call to handle_trans_request/3. The handle_trans_request/3 function
may decide to process the action requests itself or to delegate the processing
to this function.</p><p>The req_data() argument to this function is the Erlang term returned by
handle_trans_request/3.</p><p>Any other return values (including exit signals or throw) will result in an
error descriptor with code 500 (internal gateway error) and the module name (of
the callback module) as reason.</p><p>See <a href="#extra_argument">note</a> above about the <code class="inline">Extra</code> argument in
<a href="#c:handle_trans_long_request/4"><code class="inline">handle_trans_long_request/4</code></a>.</p>
  </section>
</section>
<section class="detail" id="c:handle_trans_reply/4">

  <div class="detail-header">
    <a href="#c:handle_trans_reply/4" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">handle_trans_reply(ConnHandle, ProtocolVersion, UserReply, ReplyData)</h1>

        <span class="note">(optional)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/megaco/src/engine/megaco_user.erl#L415" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> handle_trans_reply(ConnHandle, ProtocolVersion, UserReply, ReplyData) -> ok
                                when
                                    ConnHandle :: <a href="#t:conn_handle/0">conn_handle</a>(),
                                    ProtocolVersion :: <a href="megaco_encoder.html#t:protocol_version/0">megaco_encoder:protocol_version</a>(),
                                    UserReply :: Success | Failure,
                                    ReplyData :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                    Success :: {ok, Result},
                                    Result :: TransactionResult | SegmentResult,
                                    TransactionResult :: [<a href="megaco_encoder.html#t:action_reply/0">megaco_encoder:action_reply</a>()],
                                    SegmentResult ::
                                        {<a href="megaco_encoder.html#t:segment_no/0">megaco_encoder:segment_no</a>(),
                                         LastSegment,
                                         [<a href="megaco_encoder.html#t:action_reply/0">megaco_encoder:action_reply</a>()]},
                                    Failure :: {error, Reason} | {error, ReplyNo, Reason},
                                    Reason ::
                                        TransactionReason | SegmentReason | UserCancelReason | SendReason |
                                        OtherReason,
                                    TransactionReason :: <a href="megaco_encoder.html#t:error_desc/0">megaco_encoder:error_desc</a>(),
                                    SegmentReason ::
                                        {<a href="megaco_encoder.html#t:segment_no/0">megaco_encoder:segment_no</a>(),
                                         LastSegment,
                                         <a href="megaco_encoder.html#t:error_desc/0">megaco_encoder:error_desc</a>()},
                                    OtherReason ::
                                        timeout |
                                        {segment_timeout, MissingSegments} |
                                        exceeded_recv_pending_limit |
                                        <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                    LastSegment :: <a href="../../apps/erts/erlang.html#t:boolean/0">boolean</a>(),
                                    MissingSegments :: [<a href="megaco_encoder.html#t:segment_no/0">megaco_encoder:segment_no</a>()],
                                    UserCancelReason :: {user_cancel, ReasonForUserCancel},
                                    ReasonForUserCancel :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                    SendReason :: SendCancelledReason | SendFailedReason,
                                    SendCancelledReason :: {send_message_cancelled, ReasonForSendCancel},
                                    ReasonForSendCancel :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                    SendFailedReason :: {send_message_failed, ReasonForSendFailure},
                                    ReasonForSendFailure :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                    ReplyNo :: <a href="../../apps/erts/erlang.html#t:pos_integer/0">pos_integer</a>().</pre>

      </div>

<p>Equivalent to <a href="#c:handle_trans_reply/5"><code class="inline">handle_trans_reply/5</code></a>.</p>
  </section>
</section>
<section class="detail" id="c:handle_trans_reply/5">

  <div class="detail-header">
    <a href="#c:handle_trans_reply/5" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">handle_trans_reply(ConnHandle, ProtocolVersion, UserReply, ReplyData, Extra)</h1>

        <span class="note">(optional)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/megaco/src/engine/megaco_user.erl#L513" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> handle_trans_reply(ConnHandle, ProtocolVersion, UserReply, ReplyData, Extra) -> ok
                                when
                                    ConnHandle :: <a href="#t:conn_handle/0">conn_handle</a>(),
                                    ProtocolVersion :: <a href="megaco_encoder.html#t:protocol_version/0">megaco_encoder:protocol_version</a>(),
                                    UserReply :: Success | Failure,
                                    ReplyData :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                    Extra :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                    Success :: {ok, Result},
                                    Result :: TransactionResult | SegmentResult,
                                    TransactionResult :: [<a href="megaco_encoder.html#t:action_reply/0">megaco_encoder:action_reply</a>()],
                                    SegmentResult ::
                                        {<a href="megaco_encoder.html#t:segment_no/0">megaco_encoder:segment_no</a>(),
                                         LastSegment,
                                         [<a href="megaco_encoder.html#t:action_reply/0">megaco_encoder:action_reply</a>()]},
                                    Failure :: {error, Reason} | {error, ReplyNo, Reason},
                                    Reason ::
                                        TransactionReason | SegmentReason | UserCancelReason | SendReason |
                                        OtherReason,
                                    TransactionReason :: <a href="megaco_encoder.html#t:error_desc/0">megaco_encoder:error_desc</a>(),
                                    SegmentReason ::
                                        {<a href="megaco_encoder.html#t:segment_no/0">megaco_encoder:segment_no</a>(),
                                         LastSegment,
                                         <a href="megaco_encoder.html#t:error_desc/0">megaco_encoder:error_desc</a>()},
                                    OtherReason ::
                                        timeout |
                                        {segment_timeout, MissingSegments} |
                                        exceeded_recv_pending_limit |
                                        <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                    LastSegment :: <a href="../../apps/erts/erlang.html#t:boolean/0">boolean</a>(),
                                    MissingSegments :: [<a href="megaco_encoder.html#t:segment_no/0">megaco_encoder:segment_no</a>()],
                                    UserCancelReason :: {user_cancel, ReasonForUserCancel},
                                    ReasonForUserCancel :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                    SendReason :: SendCancelledReason | SendFailedReason,
                                    SendCancelledReason :: {send_message_cancelled, ReasonForSendCancel},
                                    ReasonForSendCancel :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                    SendFailedReason :: {send_message_failed, ReasonForSendFailure},
                                    ReasonForSendFailure :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                    ReplyNo :: <a href="../../apps/erts/erlang.html#t:pos_integer/0">pos_integer</a>().</pre>

      </div>

<p>Optionally invoked for a transaction reply</p><p>The sender of a transaction request has the option of deciding, whether the
originating Erlang process should synchronously wait (<a href="megaco.html#call/3"><code class="inline">megaco:call/3</code></a>) for a
reply or if the message should be sent asynchronously (<a href="megaco.html#cast/3"><code class="inline">megaco:cast/3</code></a>) and the
processing of the reply should be delegated this callback function.</p><p>Note that if the reply is segmented (split into several smaller messages;
segments), then some extra info, segment number and an indication if all
segments of a reply has been received or not, is also included in the
<code class="inline">UserReply</code>.</p><p>The <code class="inline">ReplyData</code> defaults to <code class="inline">megaco:lookup(ConnHandle, reply_data)</code>, but may be
explicitly overridden by a <a href="megaco.html#cast/3"><code class="inline">megaco:cast/3</code></a> option in order to forward info about
the calling context of the originating process.</p><p>At <code class="inline">success()</code>, the <code class="inline">UserReply</code> either contains:</p><ul><li>A list of 'ActionReply' records possibly containing error indications.</li><li>A tuple of size three containing: the segment number, the
<code class="inline">last segment indicator</code> and finally a list of 'ActionReply' records possibly
containing error indications. This is of course only possible if the reply was
segmented.</li></ul><p><code class="inline">failure()</code> indicates an local or external error and can be one of the
following:</p><ul><li><p>A <code class="inline">transaction_reason()</code>, indicates that the remote user has replied with an
explicit transactionError.</p></li><li><p>A <code class="inline">segment_reason()</code>, indicates that the remote user has replied with an
explicit transactionError for this segment. This is of course only possible if
the reply was segmented.</p></li><li><p>A <code class="inline">user_cancel_reason()</code>, indicates that the request has been canceled by the
user. <code class="inline">reason_for_user_cancel()</code> is the reason given in the call to the
<a href="megaco.html#cancel/2">cancel</a> function.</p></li><li><p>A <code class="inline">send_reason()</code>, indicates that the transport module
<a href="megaco_transport.html#c:send_message/3">send_message</a> function did not send the
message. The reason for this can be:</p><ul><li><code class="inline">send_cancelled_reason()</code> - the message sending was deliberately cancelled.
<code class="inline">reason_for_send_cancel()</code> is the reason given in the <code class="inline">cancel</code> return from
the <a href="megaco_transport.html#c:send_message/3">send_message</a> function.</li><li><code class="inline">send_failed_reason()</code> - an error occurred while attempting to send the
message.</li></ul></li><li><p>An <code class="inline">other_reason()</code>, indicates some other error such as:</p><ul><li><code class="inline">timeout</code> - the reply failed to arrive before the request timer expired.</li><li><code class="inline">{segment_timeout, missing_segments()}</code> - one or more segments was not
delivered before the expire of the segment timer.</li><li><code class="inline">exceeded_recv_pending_limit</code> - the pending limit was exceeded for this
request.</li></ul></li></ul><p>See <a href="#extra_argument">note</a> above about the <code class="inline">Extra</code> argument in
<a href="#c:handle_trans_reply/5"><code class="inline">handle_trans_reply/5</code></a>.</p>
  </section>
</section>
<section class="detail" id="c:handle_trans_request/3">

  <div class="detail-header">
    <a href="#c:handle_trans_request/3" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">handle_trans_request(ConnHandle, ProtocolVersion, ActionRequests)</h1>

        <span class="note">(optional)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/megaco/src/engine/megaco_user.erl#L250" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> handle_trans_request(ConnHandle, ProtocolVersion, ActionRequests) ->
                                  Pending | Reply | ignore_trans_request
                                  when
                                      ConnHandle :: <a href="#t:conn_handle/0">conn_handle</a>(),
                                      ProtocolVersion :: <a href="megaco_encoder.html#t:protocol_version/0">megaco_encoder:protocol_version</a>(),
                                      ActionRequests :: [<a href="megaco_encoder.html#t:action_request/0">megaco_encoder:action_request</a>()],
                                      Pending :: {pending, ReqData},
                                      ReqData :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                      Reply ::
                                          {AckAction, ActualReply} | {AckAction, ActualReply, SendOptions},
                                      AckAction ::
                                          discard_ack |
                                          {handle_ack, AckData} |
                                          {handle_pending_ack, AckData} |
                                          {handle_sloppy_ack, AckData},
                                      ActualReply ::
                                          [<a href="megaco_encoder.html#t:action_reply/0">megaco_encoder:action_reply</a>()] | <a href="megaco_encoder.html#t:error_desc/0">megaco_encoder:error_desc</a>(),
                                      AckData :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                      SendOptions :: [SendOption],
                                      SendOption ::
                                          {reply_timer, <a href="#t:megaco_timer/0">megaco_timer</a>()} |
                                          {send_handle, <a href="../../apps/erts/erlang.html#t:term/0">term</a>()} |
                                          {protocol_version, <a href="../../apps/erts/erlang.html#t:integer/0">integer</a>()}.</pre>

      </div>

<p>Equivalent to <a href="#c:handle_trans_request/4"><code class="inline">handle_trans_request/4</code></a>.</p>
  </section>
</section>
<section class="detail" id="c:handle_trans_request/4">

  <div class="detail-header">
    <a href="#c:handle_trans_request/4" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">handle_trans_request(ConnHandle, ProtocolVersion, ActionRequests, Extra)</h1>

        <span class="note">(optional)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/megaco/src/engine/megaco_user.erl#L333" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> handle_trans_request(ConnHandle, ProtocolVersion, ActionRequests, Extra) ->
                                  Pending | Reply | ignore_trans_request
                                  when
                                      ConnHandle :: <a href="#t:conn_handle/0">conn_handle</a>(),
                                      ProtocolVersion :: <a href="megaco_encoder.html#t:protocol_version/0">megaco_encoder:protocol_version</a>(),
                                      ActionRequests :: [<a href="megaco_encoder.html#t:action_request/0">megaco_encoder:action_request</a>()],
                                      Extra :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                      Pending :: {pending, ReqData},
                                      ReqData :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                      Reply ::
                                          {AckAction, ActualReply} | {AckAction, ActualReply, SendOptions},
                                      AckAction ::
                                          discard_ack |
                                          {handle_ack, AckData} |
                                          {handle_pending_ack, AckData} |
                                          {handle_sloppy_ack, AckData},
                                      ActualReply ::
                                          [<a href="megaco_encoder.html#t:action_reply/0">megaco_encoder:action_reply</a>()] | <a href="megaco_encoder.html#t:error_desc/0">megaco_encoder:error_desc</a>(),
                                      AckData :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(),
                                      SendOptions :: [SendOption],
                                      SendOption ::
                                          {reply_timer, <a href="#t:megaco_timer/0">megaco_timer</a>()} |
                                          {send_handle, <a href="../../apps/erts/erlang.html#t:term/0">term</a>()} |
                                          {protocol_version, <a href="../../apps/erts/erlang.html#t:integer/0">integer</a>()}.</pre>

      </div>

<p>Invoked for each transaction request</p><p>Incoming messages is delivered by megaco:receive_message/4 and successfully
decoded. Normally a message contains a list of transactions and this function is
invoked for each TransactionRequest in the message.</p><p>This function takes a list of 'ActionRequest' records and has three main
options:</p><ul><li><p><strong><code class="inline">Return ignore_trans_request</code></strong> - Decide that these action requests shall be
ignored completely.</p></li><li><p><strong><code class="inline">Return pending()</code></strong> - Decide that the processing of these action requests
will take a long time and that the originator should get an immediate
'TransactionPending' reply as interim response. The actual processing of these
action requests instead should be delegated to the the
handle_trans_long_request/3 callback function with the req_data() as one of
its arguments.</p></li><li><p><strong><code class="inline">Return reply()</code></strong> - Process the action requests and either return an
error_descr() indicating some fatal error or a list of action replies
(wildcarded or not).</p><p>If for some reason megaco is unable to deliver the reply, the reason for this
will be passed to the user via a call to the callback function
<a href="#c:handle_trans_ack/5">handle_trans_ack</a>, unless
<code class="inline">ack_action() = discard_ack</code>.</p><p>The ack_action() is either:</p><ul><li><p><strong><code class="inline">discard_ack</code></strong> - Meaning that you don't care if the reply is acknowledged
or not.</p></li><li><p><strong><code class="inline">{handle_ack, ack_data()} | {handle_ack, ack_data(), send_options()}</code></strong> -
Meaning that you want an immediate acknowledgement when the other part
receives this transaction reply. When the acknowledgement eventually is
received, the handle_trans_ack/4 callback function will be invoked with the
ack_data() as one of its arguments. ack_data() may be any Erlang term.</p></li><li><p><strong><code class="inline">{handle_pending_ack, ack_data()} | {handle_pending_ack, ack_data(), send_options()}</code></strong> -
This has the same effect as the above, <em>if and only if</em> megaco has sent at
least one pending message for this request (during the processing of the
request). If no pending message has been sent, then immediate
acknowledgement will <em>not</em> be requested.</p><p>Note that this only works as specified if the <code class="inline">sent_pending_limit</code> config
option has been set to an integer value.</p></li><li><p><strong><code class="inline">{handle_sloppy_ack, ack_data()}| {handle_sloppy_ack, ack_data(), send_options()}</code></strong> -
Meaning that you want an acknowledgement <em>sometime</em>. When the
acknowledgement eventually is received, the handle_trans_ack/4 callback
function will be invoked with the ack_data() as one of its arguments.
ack_data() may be any Erlang term.</p></li></ul></li></ul><p>Any other return values (including exit signals or throw) will result in an
error descriptor with code 500 (internal gateway error) and the module name (of
the callback module) as reason.</p><p>See <a href="#extra_argument">note</a> above about the <code class="inline">Extra</code> argument in
<a href="#c:handle_trans_request/4"><code class="inline">handle_trans_request/4</code></a>.</p>
  </section>
</section>
<section class="detail" id="c:handle_trans_request_abort/4">

  <div class="detail-header">
    <a href="#c:handle_trans_request_abort/4" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">handle_trans_request_abort(ConnHandle, ProtocolVersion, TransNo, Pid)</h1>

        <span class="note">(optional)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/megaco/src/engine/megaco_user.erl#L659" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> handle_trans_request_abort(ConnHandle, ProtocolVersion, TransNo, Pid) -> ok
                                        when
                                            ConnHandle :: <a href="#t:conn_handle/0">conn_handle</a>(),
                                            ProtocolVersion :: <a href="megaco_encoder.html#t:protocol_version/0">megaco_encoder:protocol_version</a>(),
                                            TransNo :: <a href="../../apps/erts/erlang.html#t:integer/0">integer</a>(),
                                            Pid :: undefined | <a href="../../apps/erts/erlang.html#t:pid/0">pid</a>().</pre>

      </div>

<p>Equivalent to <a href="#c:handle_trans_request_abort/5"><code class="inline">handle_trans_request_abort/5</code></a>.</p>
  </section>
</section>
<section class="detail" id="c:handle_trans_request_abort/5">

  <div class="detail-header">
    <a href="#c:handle_trans_request_abort/5" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">handle_trans_request_abort(ConnHandle, ProtocolVersion, TransNo, Pid, Extra)</h1>

        <span class="note">(optional)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/megaco/src/engine/megaco_user.erl#L678" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> handle_trans_request_abort(ConnHandle, ProtocolVersion, TransNo, Pid, Extra) -> ok
                                        when
                                            ConnHandle :: <a href="#t:conn_handle/0">conn_handle</a>(),
                                            ProtocolVersion :: <a href="megaco_encoder.html#t:protocol_version/0">megaco_encoder:protocol_version</a>(),
                                            TransNo :: <a href="../../apps/erts/erlang.html#t:integer/0">integer</a>(),
                                            Pid :: undefined | <a href="../../apps/erts/erlang.html#t:pid/0">pid</a>(),
                                            Extra :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Invoked when a transaction request has been aborted</p><p>This function is invoked if the originating pending limit has been exceeded.
This usually means that a request has taken abnormally long time to complete.</p><p>See <a href="#extra_argument">note</a> above about the <code class="inline">Extra</code> argument in
<a href="#c:handle_trans_request_abort/5"><code class="inline">handle_trans_request_abort/5</code></a>.</p>
  </section>
</section>
<section class="detail" id="c:handle_unexpected_trans/3">

  <div class="detail-header">
    <a href="#c:handle_unexpected_trans/3" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">handle_unexpected_trans(ConnHandle, ProtocolVersion, Trans)</h1>

        <span class="note">(optional)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/megaco/src/engine/megaco_user.erl#L629" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> handle_unexpected_trans(ConnHandle, ProtocolVersion, Trans) -> ok
                                     when
                                         ConnHandle :: <a href="#t:conn_handle/0">conn_handle</a>(),
                                         ProtocolVersion :: <a href="megaco_encoder.html#t:protocol_version/0">megaco_encoder:protocol_version</a>(),
                                         Trans ::
                                             <a href="megaco_encoder.html#t:transaction_pending/0">megaco_encoder:transaction_pending</a>() |
                                             <a href="megaco_encoder.html#t:transaction_reply/0">megaco_encoder:transaction_reply</a>() |
                                             <a href="megaco_encoder.html#t:transaction_response_ack/0">megaco_encoder:transaction_response_ack</a>().</pre>

      </div>

<p>Equivalent to <a href="#c:handle_unexpected_trans/4"><code class="inline">handle_unexpected_trans/4</code></a>.</p>
  </section>
</section>
<section class="detail" id="c:handle_unexpected_trans/4">

  <div class="detail-header">
    <a href="#c:handle_unexpected_trans/4" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">handle_unexpected_trans(ConnHandle, ProtocolVersion, Trans, Extra)</h1>

        <span class="note">(optional)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-28.2/lib/megaco/src/engine/megaco_user.erl#L649" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> handle_unexpected_trans(ConnHandle, ProtocolVersion, Trans, Extra) -> ok
                                     when
                                         ConnHandle :: <a href="#t:conn_handle/0">conn_handle</a>(),
                                         ProtocolVersion :: <a href="megaco_encoder.html#t:protocol_version/0">megaco_encoder:protocol_version</a>(),
                                         Trans ::
                                             <a href="megaco_encoder.html#t:transaction_pending/0">megaco_encoder:transaction_pending</a>() |
                                             <a href="megaco_encoder.html#t:transaction_reply/0">megaco_encoder:transaction_reply</a>() |
                                             <a href="megaco_encoder.html#t:transaction_response_ack/0">megaco_encoder:transaction_response_ack</a>(),
                                         Extra :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Invoked when a unexpected message is received</p><p>If a reply to a request is not received in time, the megaco stack removes all
info about the request from its tables. If a reply should arrive after this has
been done the app has no way of knowing where to send this message. The message
is delivered to the &quot;user&quot; by calling this function on the local node (the node
which has the link).</p><p>See <a href="#extra_argument">note</a> above about the <code class="inline">Extra</code> argument in
<a href="#c:handle_unexpected_trans/4"><code class="inline">handle_unexpected_trans/4</code></a>.</p>
  </section>
</section>

    </div>
  </section>

    <footer class="footer">
      <p>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="megaco.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.38.1) for the

          <a href="https://erlang.org" title="Erlang" target="_blank" translate="no">Erlang programming language</a>

      </p>
<p>Copyright Â© 1996-2025 <a href="https://www.ericsson.com">Ericsson AB</a></p>
    </footer>
  </div>
</main>
</div>
  <script defer src="https://cdn.jsdelivr.net/npm/mermaid@11.4.1/dist/mermaid.min.js"></script>
  <script>
  let initialized = false;

  window.addEventListener("exdoc:loaded", () => {
      if (!initialized) {
      mermaid.initialize({
          startOnLoad: false,
          theme: document.body.className.includes("dark") ? "dark" : "default"
      });
      initialized = true;
      }

      let id = 0;
      for (const codeEl of document.querySelectorAll("pre code.mermaid")) {
      const preEl = codeEl.parentElement;
      const graphDefinition = codeEl.textContent;
      const graphEl = document.createElement("div");
      const graphId = "mermaid-graph-" + id++;
      mermaid.render(graphId, graphDefinition).then(({svg, bindFunctions}) => {
          graphEl.innerHTML = svg;
          bindFunctions?.(graphEl);
          preEl.insertAdjacentElement("afterend", graphEl);
          preEl.remove();
      });
      }
  });
  </script>

  </body>
</html>
