<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html xmlns:fn="http://www.w3.org/2005/02/xpath-functions">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" href="../otp_doc.css" type="text/css">
<title>Erlang -- ose</title>
</head>
<body bgcolor="white" text="#000000" link="#0000ff" vlink="#ff00ff" alink="#ff0000"><div id="container">
<script id="js" type="text/javascript" language="JavaScript" src="../js/flipmenu/flipmenu.js"></script><script id="js2" type="text/javascript" src="../js/erlresolvelinks.js"></script><script language="JavaScript" type="text/javascript">
            <!--
              function getWinHeight() {
                var myHeight = 0;
                if( typeof( window.innerHeight ) == 'number' ) {
                  //Non-IE
                  myHeight = window.innerHeight;
                } else if( document.documentElement && ( document.documentElement.clientWidth ||
                                                         document.documentElement.clientHeight ) ) {
                  //IE 6+ in 'standards compliant mode'
                  myHeight = document.documentElement.clientHeight;
                } else if( document.body && ( document.body.clientWidth || document.body.clientHeight ) ) {
                  //IE 4 compatible
                  myHeight = document.body.clientHeight;
                }
                return myHeight;
              }

              function setscrollpos() {
                var objf=document.getElementById('loadscrollpos');
                 document.getElementById("leftnav").scrollTop = objf.offsetTop - getWinHeight()/2;
              }

              function addEvent(obj, evType, fn){
                if (obj.addEventListener){
                obj.addEventListener(evType, fn, true);
                return true;
              } else if (obj.attachEvent){
                var r = obj.attachEvent("on"+evType, fn);
                return r;
              } else {
                return false;
              }
             }

             addEvent(window, 'load', setscrollpos);

             //--></script><div id="leftnav"><div class="innertube">
<img alt="Erlang logo" src="../erlang-logo.png"><br><small><a href="../apps/ose/users_guide.html">User's Guide</a><br><a href="../apps/ose/index.html">Reference Manual</a><br><a href="../apps/ose/release_notes.html">Release Notes</a><br><a href="../apps/ose/ose.pdf">PDF</a><br><a href="../index.html">Top</a></small><p><strong>OSE</strong><br><strong>Reference Manual</strong><br><small>Version 1.1</small></p>
<br><a href="javascript:openAllFlips()">Expand All</a><br><a href="javascript:closeAllFlips()">Contract All</a><p><small><strong>Table of Contents</strong></small></p>
<ul class="flipMenu">
<li title="ose (App)"><a href="ose_app.html">ose (App)
                </a></li>
<li id="loadscrollpos" title="ose " expanded="true">ose<ul>
<li><a href="ose.html">
                  Top of manual page
                </a></li>
<li title="attach-2"><a href="ose.html#attach-2">attach/2</a></li>
<li title="close-1"><a href="ose.html#close-1">close/1</a></li>
<li title="dehunt-2"><a href="ose.html#dehunt-2">dehunt/2</a></li>
<li title="detach-2"><a href="ose.html#detach-2">detach/2</a></li>
<li title="get_id-1"><a href="ose.html#get_id-1">get_id/1</a></li>
<li title="get_name-2"><a href="ose.html#get_name-2">get_name/2</a></li>
<li title="hunt-2"><a href="ose.html#hunt-2">hunt/2</a></li>
<li title="listen-2"><a href="ose.html#listen-2">listen/2</a></li>
<li title="open-1"><a href="ose.html#open-1">open/1</a></li>
<li title="send-4"><a href="ose.html#send-4">send/4</a></li>
<li title="send-5"><a href="ose.html#send-5">send/5</a></li>
</ul>
</li>
<li id="no" title="ose_erl_driver " expanded="false">ose_erl_driver<ul>
<li><a href="ose_erl_driver.html">
                  Top of manual page
                </a></li>
<li title="erl_drv_ose_get_signal"><a href="ose_erl_driver.html#erl_drv_ose_get_signal">erl_drv_ose_get_signal()
                </a></li>
<li title="erl_drv_ose_event_alloc"><a href="ose_erl_driver.html#erl_drv_ose_event_alloc">erl_drv_ose_event_alloc()
                </a></li>
<li title="erl_drv_ose_event_free"><a href="ose_erl_driver.html#erl_drv_ose_event_free">erl_drv_ose_event_free()
                </a></li>
<li title="erl_drv_ose_event_fetch"><a href="ose_erl_driver.html#erl_drv_ose_event_fetch">erl_drv_ose_event_fetch()
                </a></li>
</ul>
</li>
</ul>
</div></div>
<div id="content">
<div class="innertube">
<!-- refpage --><center><h1>ose</h1></center>

<h3>MODULE</h3>
<div class="REFBODY">ose</div>
<h3>MODULE SUMMARY</h3>
<div class="REFBODY">Interface module for OSE messaging and process monitoring from Erlang.</div>
<h3>DESCRIPTION</h3>
<div class="REFBODY"><p>
<p>Interface module for OSE messaging and process monitoring from Erlang</p>
 
  <p>For each mailbox created through <span class="bold_code"><a href="#open-1">open/1</a></span> a OSE phantom process with  
that name is started. Since phantom processes are used the memory footprint  
of each mailbox is quite small.</p>
 
  <p>To receive messages you first have to subscribe to the specific message
  numbers that you are interested in with <span class="bold_code"><a href="#listen-2">listen/2</a></span>. The messages
  will be sent to the Erlang process that created the mailbox.
 </p></p></div>
<h3><a name="id60072">DATA TYPES</a></h3>
<div class="REFBODY">
<a name="types"></a>

<dl>
<dt><strong><span class="code">attach_ref()</span></strong></dt>
<dd>
<a name="type-attach_ref"></a>
<p>  Reference from an attach request.  This term will be included
  in the term returned when the attached mailbox disappears.</p>
</dd>
<dt><strong><span class="code">hunt_ref()</span></strong></dt>
<dd>
<a name="type-hunt_ref"></a>
<p>  Reference from a hunt request.  This term will be included
  in a successful hunt response.</p>
</dd>
<dt><strong><span class="code">mailbox()</span></strong></dt>
<dd>
<a name="type-mailbox"></a>
<p>  Mailbox handle.  Implemented as an erlang port.</p>
</dd>
<dt><strong><span class="code">mailbox_id()</span></strong></dt>
<dd>
<a name="type-mailbox_id"></a>
<p>  Mailbox ID, this is the same as the process id of an OSE process.
  An integer.</p>
</dd>
<dt><strong><span class="code">message_number() = 0..4294967295</span></strong></dt>
<dd>
<a name="type-message_number"></a>
<p>  OSE Signal number</p>
</dd>
</dl>
</div>
<h3>EXPORTS</h3>
<p><a name="attach-2"><span class="bold_code">attach(Port, Pid) -&gt; Ref</span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
<div class="REFTYPES">
<span class="bold_code">Port = mailbox()</span><br>
</div>
<div class="REFTYPES">
<span class="bold_code">Pid = mailbox_id()</span><br>
</div>
<div class="REFTYPES">
<span class="bold_code">Ref = attach_ref()</span><br>
</div>
</div>
<div class="REFBODY"><p><a name="attach-2"></a>

<p>Attach to an OSE process.</p>
 
  <p>Will send <span class="code">{mailbox_down, Port, Ref, MboxId}</span>  
to the calling process if the OSE process exits.</p>
 
  <p>Returns a reference that can be used to cancel the attachment
  using <span class="bold_code"><a href="#detach-2">detach/2</a></span>.</p>
 
  <p>raises: <span class="code">badarg</span> | <span class="code">enomem</span>
 </p>
</p></div>
<p><a name="close-1"><span class="bold_code">close(Port) -&gt; ok</span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
<div class="REFTYPES">
<span class="bold_code">Port = mailbox()</span><br>
</div>
</div>
<div class="REFBODY"><p><a name="close-1"></a>

<p>Close a mailbox</p>
 
  <p>This kills the OSE phantom process associated with this mailbox.</p>
 
  <p>Will also consume any <span class="code">{'EXIT',Port,_}</span> message from the port that comes  
due to the port closing when the calling process traps exits.</p>
 
  <p>raises: <span class="code">badarg</span></p>
</p></div>
<p><a name="dehunt-2"><span class="bold_code">dehunt(Port, Ref) -&gt; ok</span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
<div class="REFTYPES">
<span class="bold_code">Port = mailbox()</span><br>
</div>
<div class="REFTYPES">
<span class="bold_code">Ref = hunt_ref()</span><br>
</div>
</div>
<div class="REFBODY"><p><a name="dehunt-2"></a>

<p>Stop hunting for OSE process.</p>
 
  <p>If a message for this hunt has been sent but not received  
by the calling process, it is removed from the message queue.  
Note that this only works if the same process that did  
the hunt does the dehunt.</p>
 
  <p>raises: <span class="code">badarg</span>
 </p>
<p><strong>See also:</strong> <span class="bold_code"><a href="#hunt-2">hunt/2</a></span>.</p>
</p></div>
<p><a name="detach-2"><span class="bold_code">detach(Port, Ref) -&gt; ok</span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
<div class="REFTYPES">
<span class="bold_code">Port = mailbox()</span><br>
</div>
<div class="REFTYPES">
<span class="bold_code">Ref = attach_ref()</span><br>
</div>
</div>
<div class="REFBODY"><p><a name="detach-2"></a>

<p>Remove attachment to an OSE process.</p>
 
  <p>If a message for this monitor has been sent but not received  
by the calling process, it is removed from the message queue.  
Note that this only works of the same process  
that did the attach does the detach.</p>
 
  <p>raises: <span class="code">badarg</span>
 </p>
<p><strong>See also:</strong> <span class="bold_code"><a href="#attach-2">attach/2</a></span>.</p>
</p></div>
<p><a name="get_id-1"><span class="bold_code">get_id(Port) -&gt; Pid</span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
<div class="REFTYPES">
<span class="bold_code">Port = mailbox()</span><br>
</div>
<div class="REFTYPES">
<span class="bold_code">Pid = mailbox_id()</span><br>
</div>
</div>
<div class="REFBODY"><p><a name="get_id-1"></a>

<p>Get the mailbox id for the given port.</p>
 
  <p>The mailbox id is the same as the OSE process id of the OSE phantom process  
that this mailbox represents.</p>
 
  <p>raises: <span class="code">badarg</span></p>
</p></div>
<p><a name="get_name-2"><span class="bold_code">get_name(Port, Pid) -&gt; Name | undefined</span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
<div class="REFTYPES">
<span class="bold_code">Port = mailbox()</span><br>
</div>
<div class="REFTYPES">
<span class="bold_code">Pid = mailbox_id()</span><br>
</div>
<div class="REFTYPES">
<span class="bold_code">Name = binary()</span><br>
</div>
</div>
<div class="REFBODY"><p><a name="get_name-2"></a>

<p>Get the mailbox name for the given mailbox id.</p>
 
  <p>The mailbox name is the name of the OSE process with process id Pid.</p>
 
  <p>This call will fail with badarg if the underlying system does not support  
getting the name from a process id.</p>
 
  <p>raises: <span class="code">badarg</span></p>
</p></div>
<p><a name="hunt-2"><span class="bold_code">hunt(Port, HuntPath) -&gt; Ref</span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
<div class="REFTYPES">
<span class="bold_code">Port = mailbox()</span><br>
</div>
<div class="REFTYPES">
<span class="bold_code">HuntPath = iodata()</span><br>
</div>
<div class="REFTYPES">
<span class="bold_code">Ref = hunt_ref()</span><br>
</div>
</div>
<div class="REFBODY"><p><a name="hunt-2"></a>

<p>Hunt for OSE process by name.</p>
 
  <p>Will send <span class="code">{mailbox_up, Port, Ref, MboxId}</span>  
to the calling process when the OSE process becomes available.</p>
 
  <p>Returns a reference term that can be used to cancel the hunt
  using <span class="bold_code"><a href="#dehunt-2">dehunt/2</a></span>.</p>
 
  <p>raises: <span class="code">badarg</span>
 </p>
</p></div>
<p><a name="listen-2"><span class="bold_code">listen(Port, SigNos) -&gt; ok</span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
<div class="REFTYPES">
<span class="bold_code">Port = mailbox()</span><br>
</div>
<div class="REFTYPES">
<span class="bold_code">SigNos = [message_number()]</span><br>
</div>
</div>
<div class="REFBODY"><p><a name="listen-2"></a>

<p>Start listening for specified OSE signal numbers.</p>
 
  <p>The mailbox will send <span class="code">{message,Port,{FromMboxId,ToMboxId,MsgNo,MsgData}}</span>
  to the process that created the mailbox when an OSE message with any
  of the specified <span class="code">SigNos</span> arrives.</p>
 
  <p>Repeated calls to listen will replace the current set of signal numbers to  
listen to. i.e</p>
 
  <div class="example"><pre>     1&gt;ose:listen(MsgB,[1234,12345]).
   ok
   2&gt; ose:listen(MsgB,[1234,123456]).
   ok.</pre></div>
 
  <p>The above will first listen for signals with numbers 1234 and 12345, and then  
replace that with only listening to 1234 and 123456.</p>
 
  <p>With the current implementation it is not possible to listen to all signal  
numbers.</p>
 
  <p>raises: <span class="code">badarg</span> | <span class="code">enomem</span>
 </p>
</p></div>
<p><a name="open-1"><span class="bold_code">open(Name) -&gt; Port</span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
<div class="REFTYPES">
<span class="bold_code">Name = iodata()</span><br>
</div>
<div class="REFTYPES">
<span class="bold_code">Port = mailbox()</span><br>
</div>
</div>
<div class="REFBODY"><p><a name="open-1"></a>

<p>Create a mailbox with the given name and return a port that handles  
the mailbox.</p>
 
  <p>An OSE phantom process with the given name will be created that will send any
  messages sent through this mailbox. Any messages sent to the new OSE process
  will automatically be converted to an Erlang message and sent to the Erlang
  process that calls this function. See <span class="bold_code"><a href="#listen-2">listen/2</a></span> for details about the  
format of the message sent.</p>
 
  <p>The caller gets linked to the created mailbox.</p>
 
  <p>raises: <span class="code">badarg</span> | <span class="code">system_limit</span>
 </p>
<p><strong>See also:</strong> <span class="bold_code"><a href="#listen-2">listen/2</a></span>.</p>
</p></div>
<p><a name="send-4"><span class="bold_code">send(Port, Pid, SigNo, SigData) -&gt; ok</span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
<div class="REFTYPES">
<span class="bold_code">Port = mailbox()</span><br>
</div>
<div class="REFTYPES">
<span class="bold_code">Pid = mailbox_id()</span><br>
</div>
<div class="REFTYPES">
<span class="bold_code">SigNo = message_number()</span><br>
</div>
<div class="REFTYPES">
<span class="bold_code">SigData = iodata()</span><br>
</div>
</div>
<div class="REFBODY"><p><a name="send-4"></a>

<p>Send an OSE message.</p>
 
  <p>The message is sent from the OSE process' own ID that is: <span class="code">get_id(Port)</span>.</p>
 
  <p>raises: <span class="code">badarg</span>
 </p>
<p><strong>See also:</strong> <span class="bold_code"><a href="#send-5">send/5</a></span>.</p>
</p></div>
<p><a name="send-5"><span class="bold_code">send(Port, Pid, SenderPid, SigNo, SigData) -&gt; ok</span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
<div class="REFTYPES">
<span class="bold_code">Port = mailbox()</span><br>
</div>
<div class="REFTYPES">
<span class="bold_code">Pid = mailbox_id()</span><br>
</div>
<div class="REFTYPES">
<span class="bold_code">SenderPid = mailbox_id()</span><br>
</div>
<div class="REFTYPES">
<span class="bold_code">SigNo = message_number()</span><br>
</div>
<div class="REFTYPES">
<span class="bold_code">SigData = iodata()</span><br>
</div>
</div>
<div class="REFBODY"><p><a name="send-5"></a>

<p>Send an OSE message with different sender.</p>
 
  <p>As <span class="bold_code"><a href="#send-4">send/4</a></span> but the sender will be <span class="code">SenderPid</span>.</p>
 
  <p>raises: <span class="code">badarg</span>
 </p>
<p><strong>See also:</strong> <span class="bold_code"><a href="#send-4">send/4</a></span>.</p>
</p></div>


 
 </div>
<div class="footer">
<hr>
<p>Copyright © 2014-2016 Ericsson AB. All Rights Reserved.</p>
</div>
</div>
</div></body>
</html>
