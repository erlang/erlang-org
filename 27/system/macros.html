<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.37.3">
    <meta name="project" content="Erlang System Documentation v27.3.4.6">


<meta name="major-vsn" content="27">
<meta name="exdoc:full-text-search-url" content="/doc/search.html?v=27&q=">
<link rel="canonical" href="https://www.erlang.org/doc/system/macros.html" />
    <title>Preprocessor — Erlang System Documentation v27.3.4.6</title>

    <link rel="stylesheet" href="dist/html-erlang-FDBURIED.css" />

    <script defer src="dist/sidebar_items-4A143270.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-ALU6OERS.js"></script>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="../index.html" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="Erlang System Documentation" />
        </a>

      <div>
        <a href="../index.html" class="sidebar-projectName" translate="no">
Erlang System Documentation
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v27.3.4.6
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras=""></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-extra" id="main" data-type="extras">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of Erlang System Documentation</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search" tabindex="-1">
            <i class="ri-search-2-line ri-lg" aria-hidden="true"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>Preprocessor</h1>


      <a href="https://github.com/erlang/otp/blob/OTP-27.3.4.6/system/doc/reference_manual/macros.md#L1" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

  </div>

<h2 id="file-inclusion" class="section-heading">
  <a href="#file-inclusion" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">File Inclusion</span>
</h2>
<p>A file can be included as follows:</p><pre><code class="makeup erlang" translate="no"><span class="p">-</span><span class="na">include</span><span class="p" data-group-id="9089683384-1">(</span><span class="n">File</span><span class="p" data-group-id="9089683384-1">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">include_lib</span><span class="p" data-group-id="9089683384-2">(</span><span class="n">File</span><span class="p" data-group-id="9089683384-2">)</span><span class="p">.</span></code></pre><p><code class="inline">File</code>, a string, is to point out a file. The contents of this file are included
as is, at the position of the directive.</p><p>Include files are typically used for record and macro definitions that are
shared by several modules. It is recommended to use the file name extension
<code class="inline">.hrl</code> for include files.</p><p><code class="inline">File</code> can start with a path component <code class="inline">$VAR</code>, for some string <code class="inline">VAR</code>. If that is
the case, the value of the environment variable <code class="inline">VAR</code> as returned by
<code class="inline">os:getenv(VAR)</code> is substituted for <code class="inline">$VAR</code>. If <code class="inline">os:getenv(VAR)</code> returns <code class="inline">false</code>,
<code class="inline">$VAR</code> is left as is.</p><p>If the filename <code class="inline">File</code> is absolute (possibly after variable substitution), the
include file with that name is included. Otherwise, the specified file is
searched for in the following directories, and in this order:</p><ol><li>The current working directory</li><li>The directory where the module is being compiled</li><li>The directories given by the <code class="inline">include</code> option</li></ol><p>For details, see <a href="../apps/erts/erlc_cmd.html">erlc</a> in ERTS and
<a href="../apps/compiler/compile.html"><code class="inline">compile</code></a> in Compiler.</p><p><em>Examples:</em></p><pre><code class="makeup erlang" translate="no"><span class="p">-</span><span class="na">include</span><span class="p" data-group-id="3306189752-1">(</span><span class="s">&quot;my_records.hrl&quot;</span><span class="p" data-group-id="3306189752-1">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">include</span><span class="p" data-group-id="3306189752-2">(</span><span class="s">&quot;incdir/my_records.hrl&quot;</span><span class="p" data-group-id="3306189752-2">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">include</span><span class="p" data-group-id="3306189752-3">(</span><span class="s">&quot;/home/user/proj/my_records.hrl&quot;</span><span class="p" data-group-id="3306189752-3">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">include</span><span class="p" data-group-id="3306189752-4">(</span><span class="s">&quot;$PROJ_ROOT/my_records.hrl&quot;</span><span class="p" data-group-id="3306189752-4">)</span><span class="p">.</span></code></pre><p><code class="inline">include_lib</code> is similar to <code class="inline">include</code>, but is not to point out an absolute file.
Instead, the first path component (possibly after variable substitution) is
assumed to be the name of an application.</p><p><em>Example:</em></p><pre><code class="makeup erlang" translate="no"><span class="p">-</span><span class="na">include_lib</span><span class="p" data-group-id="3260342220-1">(</span><span class="s">&quot;kernel/include/file.hrl&quot;</span><span class="p" data-group-id="3260342220-1">)</span><span class="p">.</span></code></pre><p>The code server uses <code class="inline">code:lib_dir(kernel)</code> to find the directory of the current
(latest) version of Kernel, and then the subdirectory <code class="inline">include</code> is searched for
the file <code class="inline">file.hrl</code>.</p><h2 id="defining-and-using-macros" class="section-heading">
  <a href="#defining-and-using-macros" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Defining and Using Macros</span>
</h2>
<p>A macro is defined as follows:</p><pre><code class="makeup erlang" translate="no"><span class="p">-</span><span class="na">define</span><span class="p" data-group-id="6614506266-1">(</span><span class="n">Const</span><span class="p">,</span><span class="w"> </span><span class="n">Replacement</span><span class="p" data-group-id="6614506266-1">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">define</span><span class="p" data-group-id="6614506266-2">(</span><span class="n">Func</span><span class="p" data-group-id="6614506266-3">(</span><span class="n">Var1</span><span class="p">,</span><span class="p">.</span><span class="p">.</span><span class="p">.</span><span class="p">,</span><span class="n">VarN</span><span class="p" data-group-id="6614506266-3">)</span><span class="p">,</span><span class="w"> </span><span class="n">Replacement</span><span class="p" data-group-id="6614506266-2">)</span><span class="p">.</span></code></pre><p>A macro definition can be placed anywhere among the attributes and function
declarations of a module, but the definition must come before any usage of the
macro.</p><p>If a macro is used in several modules, it is recommended that the macro
definition is placed in an include file.</p><p>A macro is used as follows:</p><pre><code class="text">?Const
?Func(Arg1,...,ArgN)</code></pre><p>Macros are expanded during compilation. A simple macro <code class="inline">?Const</code> is replaced with
<code class="inline">Replacement</code>.</p><p><em>Example:</em></p><pre><code class="makeup erlang" translate="no"><span class="p">-</span><span class="na">define</span><span class="p" data-group-id="9937423163-1">(</span><span class="n">TIMEOUT</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p" data-group-id="9937423163-1">)</span><span class="p">.</span><span class="w">
</span><span class="p">.</span><span class="p">.</span><span class="p">.</span><span class="w">
</span><span class="nf">call</span><span class="p" data-group-id="9937423163-2">(</span><span class="n">Request</span><span class="p" data-group-id="9937423163-2">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nc">server</span><span class="p">:</span><span class="nf">call</span><span class="p" data-group-id="9937423163-3">(</span><span class="ss">refserver</span><span class="p">,</span><span class="w"> </span><span class="n">Request</span><span class="p">,</span><span class="w"> </span><span class="o">?</span><span class="n">TIMEOUT</span><span class="p" data-group-id="9937423163-3">)</span><span class="p">.</span></code></pre><p>This is expanded to:</p><pre><code class="makeup erlang" translate="no"><span class="nf">call</span><span class="p" data-group-id="3988228428-1">(</span><span class="n">Request</span><span class="p" data-group-id="3988228428-1">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nc">server</span><span class="p">:</span><span class="nf">call</span><span class="p" data-group-id="3988228428-2">(</span><span class="ss">refserver</span><span class="p">,</span><span class="w"> </span><span class="n">Request</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p" data-group-id="3988228428-2">)</span><span class="p">.</span></code></pre><p>A macro <code class="inline">?Func(Arg1,...,ArgN)</code> is replaced with <code class="inline">Replacement</code>, where all
occurrences of a variable <code class="inline">Var</code> from the macro definition are replaced with the
corresponding argument <code class="inline">Arg</code>.</p><p><em>Example:</em></p><pre><code class="makeup erlang" translate="no"><span class="p">-</span><span class="na">define</span><span class="p" data-group-id="3153315865-1">(</span><span class="n">MACRO1</span><span class="p" data-group-id="3153315865-2">(</span><span class="n">X</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="p" data-group-id="3153315865-2">)</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3153315865-3">{</span><span class="ss">a</span><span class="p">,</span><span class="w"> </span><span class="n">X</span><span class="p">,</span><span class="w"> </span><span class="ss">b</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="p" data-group-id="3153315865-3">}</span><span class="p" data-group-id="3153315865-1">)</span><span class="p">.</span><span class="w">
</span><span class="p">.</span><span class="p">.</span><span class="p">.</span><span class="w">
</span><span class="nf">bar</span><span class="p" data-group-id="3153315865-4">(</span><span class="n">X</span><span class="p" data-group-id="3153315865-4">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="o">?</span><span class="n">MACRO1</span><span class="p" data-group-id="3153315865-5">(</span><span class="ss">a</span><span class="p">,</span><span class="w"> </span><span class="ss">b</span><span class="p" data-group-id="3153315865-5">)</span><span class="p">,</span><span class="w">
    </span><span class="o">?</span><span class="n">MACRO1</span><span class="p" data-group-id="3153315865-6">(</span><span class="n">X</span><span class="p">,</span><span class="w"> </span><span class="mi">123</span><span class="p" data-group-id="3153315865-6">)</span></code></pre><p>This is expanded to:</p><pre><code class="makeup erlang" translate="no"><span class="nf">bar</span><span class="p" data-group-id="4079676711-1">(</span><span class="n">X</span><span class="p" data-group-id="4079676711-1">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="p" data-group-id="4079676711-2">{</span><span class="ss">a</span><span class="p">,</span><span class="ss">a</span><span class="p">,</span><span class="ss">b</span><span class="p">,</span><span class="ss">b</span><span class="p" data-group-id="4079676711-2">}</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="4079676711-3">{</span><span class="ss">a</span><span class="p">,</span><span class="n">X</span><span class="p">,</span><span class="ss">b</span><span class="p">,</span><span class="mi">123</span><span class="p" data-group-id="4079676711-3">}</span><span class="p">.</span></code></pre><p>It is good programming practice, but not mandatory, to ensure that a macro
definition is a valid Erlang syntactic form.</p><p>To view the result of macro expansion, a module can be compiled with the <code class="inline">'P'</code>
option. <code class="inline">compile:file(File, ['P'])</code>. This produces a listing of the parsed code
after preprocessing and parse transforms, in the file <code class="inline">File.P</code>.</p><h2 id="predefined-macros" class="section-heading">
  <a href="#predefined-macros" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Predefined Macros</span>
</h2>
<p>The following macros are predefined:</p><ul><li><p><strong><code class="inline">?MODULE</code></strong> - The name of the current module, as an atom.</p></li><li><p><strong><code class="inline">?MODULE_STRING</code></strong> - The name of the current module, as a string.</p></li><li><p><strong><code class="inline">?FILE</code></strong> - The file name of the current module, as a string.</p></li><li><p><strong><code class="inline">?LINE</code></strong> - The current line number, as an integer.</p></li><li><p><strong><code class="inline">?MACHINE</code></strong> - The machine name, <code class="inline">'BEAM'</code>.</p></li><li><p><strong><code class="inline">?FUNCTION_NAME</code></strong> - The name of the current function, as an atom.</p></li><li><p><strong><code class="inline">?FUNCTION_ARITY</code></strong> - The arity (number of arguments) for the current
function, as an integer.</p></li><li><p><strong><code class="inline">?OTP_RELEASE</code></strong> - The OTP release for the runtime system that is
running the compiler, as an integer. For example, when compiling using
Erlang/OTP 27, the macro returns <code class="inline">27</code>.</p><section role="note" class="admonition info"><h4 class="admonition-title info">Note</h4><p>To find out the release at run-time, call
<a href="../apps/erts/erlang.html#system_info/1"><code class="inline">erlang:system_info(otp_release)</code></a>. Note
that it returns the release as a string. For example, when the
release is Erlang/OTP 27, the string <code class="inline">&quot;27&quot;</code> will be returned.</p></section><section role="note" class="admonition info"><h4 class="admonition-title info">Change</h4><p>The <code class="inline">?OTP_RELEASE</code> macro was introduced in Erlang/OTP 21.</p></section></li><li><p><strong><code class="inline">?FEATURE_AVAILABLE(Feature)</code></strong> - Expands to <code class="inline">true</code> if the
<a href="../system/features.html#features">feature</a> <code class="inline">Feature</code> is available. The feature
might or might not be enabled.</p><section role="note" class="admonition info"><h4 class="admonition-title info">Change</h4><p>The <code class="inline">?FEATURE_AVAILABLE()</code> macro was introduced in Erlang/OTP 25.</p></section></li><li><p><strong><code class="inline">?FEATURE_ENABLED(Feature)</code></strong> - Expands to <code class="inline">true</code> if the
<a href="../system/features.html#features">feature</a> <code class="inline">Feature</code> is enabled.</p><section role="note" class="admonition info"><h4 class="admonition-title info">Change</h4><p>The <code class="inline">?FEATURE_ENABLED()</code> macro was introduced in Erlang/OTP 25.</p></section></li></ul><h2 id="macros-overloading" class="section-heading">
  <a href="#macros-overloading" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Macros Overloading</span>
</h2>
<p>It is possible to overload macros, except for predefined macros. An overloaded
macro has more than one definition, each with a different number of arguments.</p><section role="note" class="admonition info"><h4 class="admonition-title info">Change</h4><p>Support for overloading of macros was added in Erlang 5.7.5/OTP R13B04.</p></section><p>A macro <code class="inline">?Func(Arg1,...,ArgN)</code> with a (possibly empty) list of arguments results
in an error message if there is at least one definition of <code class="inline">Func</code> with
arguments, but none with N arguments.</p><p>Assuming these definitions:</p><pre><code class="makeup erlang" translate="no"><span class="p">-</span><span class="na">define</span><span class="p" data-group-id="8029083311-1">(</span><span class="n">F0</span><span class="p" data-group-id="8029083311-2">(</span><span class="p" data-group-id="8029083311-2">)</span><span class="p">,</span><span class="w"> </span><span class="ss">c</span><span class="p" data-group-id="8029083311-1">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">define</span><span class="p" data-group-id="8029083311-3">(</span><span class="n">F1</span><span class="p" data-group-id="8029083311-4">(</span><span class="n">A</span><span class="p" data-group-id="8029083311-4">)</span><span class="p">,</span><span class="w"> </span><span class="n">A</span><span class="p" data-group-id="8029083311-3">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">define</span><span class="p" data-group-id="8029083311-5">(</span><span class="n">C</span><span class="p">,</span><span class="w"> </span><span class="nc">m</span><span class="p">:</span><span class="ss">f</span><span class="p" data-group-id="8029083311-5">)</span><span class="p">.</span></code></pre><p>the following does not work:</p><pre><code class="makeup erlang" translate="no"><span class="nf">f0</span><span class="p" data-group-id="1260033248-1">(</span><span class="p" data-group-id="1260033248-1">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="o">?</span><span class="n">F0</span><span class="p">.</span><span class="w"> </span><span class="c1">% No, an empty list of arguments expected.</span><span class="w">

</span><span class="nf">f1</span><span class="p" data-group-id="1260033248-2">(</span><span class="n">A</span><span class="p" data-group-id="1260033248-2">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="o">?</span><span class="n">F1</span><span class="p" data-group-id="1260033248-3">(</span><span class="n">A</span><span class="p">,</span><span class="w"> </span><span class="n">A</span><span class="p" data-group-id="1260033248-3">)</span><span class="p">.</span><span class="w"> </span><span class="c1">% No, exactly one argument expected.</span></code></pre><p>On the other hand,</p><pre><code class="text">f() -&gt;
    ?C().</code></pre><p>is expanded to</p><pre><code class="makeup erlang" translate="no"><span class="nf">f</span><span class="p" data-group-id="1874570281-1">(</span><span class="p" data-group-id="1874570281-1">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nc">m</span><span class="p">:</span><span class="nf">f</span><span class="p" data-group-id="1874570281-2">(</span><span class="p" data-group-id="1874570281-2">)</span><span class="p">.</span></code></pre><h2 id="removing-a-macro-definition" class="section-heading">
  <a href="#removing-a-macro-definition" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Removing a macro definition</span>
</h2>
<p>A definition of macro can be removed as follows:</p><pre><code class="makeup erlang" translate="no"><span class="p">-</span><span class="na">undef</span><span class="p" data-group-id="7052975243-1">(</span><span class="n">Macro</span><span class="p" data-group-id="7052975243-1">)</span><span class="p">.</span></code></pre><h2 id="conditional-compilation" class="section-heading">
  <a href="#conditional-compilation" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Conditional Compilation</span>
</h2>
<p>The following macro directives support conditional compilation:</p><ul><li><p><strong><code class="inline">-ifdef(Macro).</code></strong> - Evaluate the following lines only if <code class="inline">Macro</code> is
defined.</p></li><li><p><strong><code class="inline">-ifndef(Macro).</code></strong> - Evaluate the following lines only if <code class="inline">Macro</code> is not
defined.</p></li><li><p><strong><code class="inline">-else.</code></strong> - Only allowed after the <code class="inline">ifdef</code>, <code class="inline">ifndef</code>, <code class="inline">if</code>, and <code class="inline">elif</code>
directives. The lines following <code class="inline">else</code> are evaluated if the preceding
directive evaluated to false.</p></li><li><p><strong><code class="inline">-if(Condition).</code></strong> - Evaluates the following lines only if <code class="inline">Condition</code>
evaluates to true.</p></li><li><p><strong><code class="inline">-elif(Condition).</code></strong> - Only allowed after an <code class="inline">if</code> or another <code class="inline">elif</code>
directive. If the preceding <code class="inline">if</code> or <code class="inline">elif</code> directive does not evaluate to
true, and the <code class="inline">Condition</code> evaluates to true, the lines following the <code class="inline">elif</code>
are evaluated instead.</p></li><li><p><strong><code class="inline">-endif.</code></strong> - Specifies the end of a series of control flow directives.</p></li></ul><section role="note" class="admonition info"><h4 class="admonition-title info">Note</h4><p>Macro directives cannot be used inside functions.</p></section><p>Syntactically, the <code class="inline">Condition</code> in <code class="inline">if</code> and <code class="inline">elif</code> must be a
<a href="expressions.html#guard-expressions">guard expression</a>. Other constructs (such as
a <code class="inline">case</code> expression) result in a compilation error.</p><p>As opposed to the standard guard expressions, an expression in an <code class="inline">if</code> and
<code class="inline">elif</code> also supports calling the psuedo-function <code class="inline">defined(Name)</code>, which tests
whether the <code class="inline">Name</code> argument is the name of a previously defined macro.
<code class="inline">defined(Name)</code> evaluates to <code class="inline">true</code> if the macro is defined and <code class="inline">false</code>
otherwise. An attempt to call other functions results in a compilation error.</p><p><em>Example:</em></p><pre><code class="makeup erlang" translate="no"><span class="p">-</span><span class="na">module</span><span class="p" data-group-id="6316499573-1">(</span><span class="ss">m</span><span class="p" data-group-id="6316499573-1">)</span><span class="p">.</span><span class="w">
</span><span class="p">.</span><span class="p">.</span><span class="p">.</span><span class="w">
</span><span class="w">
</span><span class="p">-</span><span class="na">ifdef</span><span class="p" data-group-id="6316499573-2">(</span><span class="ss">debug</span><span class="p" data-group-id="6316499573-2">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">define</span><span class="p" data-group-id="6316499573-3">(</span><span class="n">LOG</span><span class="p" data-group-id="6316499573-4">(</span><span class="n">X</span><span class="p" data-group-id="6316499573-4">)</span><span class="p">,</span><span class="w"> </span><span class="nc">io</span><span class="p">:</span><span class="nf">format</span><span class="p" data-group-id="6316499573-5">(</span><span class="s">&quot;{</span><span class="si">~p</span><span class="s">,</span><span class="si">~p</span><span class="s">}: </span><span class="si">~p</span><span class="si">~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6316499573-6">[</span><span class="o">?</span><span class="n">MODULE</span><span class="p">,</span><span class="o">?</span><span class="n">LINE</span><span class="p">,</span><span class="n">X</span><span class="p" data-group-id="6316499573-6">]</span><span class="p" data-group-id="6316499573-5">)</span><span class="p" data-group-id="6316499573-3">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">else</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">define</span><span class="p" data-group-id="6316499573-7">(</span><span class="n">LOG</span><span class="p" data-group-id="6316499573-8">(</span><span class="n">X</span><span class="p" data-group-id="6316499573-8">)</span><span class="p">,</span><span class="w"> </span><span class="ss">true</span><span class="p" data-group-id="6316499573-7">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">endif</span><span class="p">.</span><span class="w">

</span><span class="p">.</span><span class="p">.</span><span class="p">.</span></code></pre><p>When trace output is desired, <code class="inline">debug</code> is to be defined when the module <code class="inline">m</code> is
compiled:</p><pre><code class="makeup erlang" translate="no"><span class="c1">% erlc -Ddebug m.erl</span><span class="w">

</span><span class="ow">or</span><span class="w">

</span><span class="mi">1</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">c</span><span class="p" data-group-id="6544626294-1">(</span><span class="ss">m</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6544626294-2">{</span><span class="ss">d</span><span class="p">,</span><span class="w"> </span><span class="ss">debug</span><span class="p" data-group-id="6544626294-2">}</span><span class="p" data-group-id="6544626294-1">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="6544626294-3">{</span><span class="ss">ok</span><span class="p">,</span><span class="ss">m</span><span class="p" data-group-id="6544626294-3">}</span></code></pre><p><code class="inline">?LOG(Arg)</code> is then expanded to a call to <a href="../apps/stdlib/io.html#format/2"><code class="inline">io:format/2</code></a> and provide the user
with some simple trace output.</p><p><em>Example:</em></p><pre><code class="makeup erlang" translate="no"><span class="p">-</span><span class="na">module</span><span class="p" data-group-id="4180981705-1">(</span><span class="ss">m</span><span class="p" data-group-id="4180981705-1">)</span><span class="w">
</span><span class="p">.</span><span class="p">.</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">if</span><span class="p" data-group-id="4180981705-2">(</span><span class="o">?</span><span class="n">OTP_RELEASE</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">25</span><span class="p" data-group-id="4180981705-2">)</span><span class="p">.</span><span class="w">
</span><span class="c1">%% Code that will work in OTP 25 or higher</span><span class="w">
</span><span class="p">-</span><span class="na">elif</span><span class="p" data-group-id="4180981705-3">(</span><span class="o">?</span><span class="n">OTP_RELEASE</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">26</span><span class="p" data-group-id="4180981705-3">)</span><span class="p">.</span><span class="w">
</span><span class="c1">%% Code that will work in OTP 26 or higher</span><span class="w">
</span><span class="p">-</span><span class="na">else</span><span class="p">.</span><span class="w">
</span><span class="c1">%% Code that will work in OTP 24 or lower.</span><span class="w">
</span><span class="p">-</span><span class="na">endif</span><span class="p">.</span><span class="w">
</span><span class="p">.</span><span class="p">.</span><span class="p">.</span></code></pre><p>This code uses the <code class="inline">OTP_RELEASE</code> macro to conditionally select code depending on
release.</p><p><em>Example:</em></p><pre><code class="makeup erlang" translate="no"><span class="p">-</span><span class="na">module</span><span class="p" data-group-id="9943350082-1">(</span><span class="ss">m</span><span class="p" data-group-id="9943350082-1">)</span><span class="w">
</span><span class="p">.</span><span class="p">.</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">if</span><span class="p" data-group-id="9943350082-2">(</span><span class="o">?</span><span class="n">OTP_RELEASE</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">26</span><span class="w"> </span><span class="ow">andalso</span><span class="w"> </span><span class="nf">defined</span><span class="p" data-group-id="9943350082-3">(</span><span class="ss">debug</span><span class="p" data-group-id="9943350082-3">)</span><span class="p" data-group-id="9943350082-2">)</span><span class="p">.</span><span class="w">
</span><span class="c1">%% Debugging code that requires OTP 26 or later.</span><span class="w">
</span><span class="p">-</span><span class="na">else</span><span class="p">.</span><span class="w">
</span><span class="c1">%% Non-debug code that works in any release.</span><span class="w">
</span><span class="p">-</span><span class="na">endif</span><span class="p">.</span><span class="w">
</span><span class="p">.</span><span class="p">.</span><span class="p">.</span></code></pre><p>This code uses the <code class="inline">OTP_RELEASE</code> macro and <code class="inline">defined(debug)</code> to compile debug
code only for OTP 26 or later.</p><h2 id="the-feature-directive" class="section-heading">
  <a href="#the-feature-directive" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">The -feature() directive</span>
</h2>
<p><a href="" id="feature-directive"></a></p><p>The directive <code class="inline">-feature(FeatureName, enable | disable)</code> can be used to enable or
disable the <a href="../system/features.html#features">feature</a> <code class="inline">FeatureName</code>. This is
the preferred way of enabling (disabling) features, although it is possible to
do it with options to the compiler as well.</p><p>Note that the <code class="inline">-feature(..)</code> directive may only appear before any syntax is
used. In practice this means it should appear before any <code class="inline">-export(..)</code> or record
definitions.</p><h2 id="error-and-warning-directives" class="section-heading">
  <a href="#error-and-warning-directives" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">-error() and -warning() directives</span>
</h2>
<p>The directive <code class="inline">-error(Term)</code> causes a compilation error.</p><p><em>Example:</em></p><pre><code class="makeup erlang" translate="no"><span class="p">-</span><span class="na">module</span><span class="p" data-group-id="6799387195-1">(</span><span class="ss">t</span><span class="p" data-group-id="6799387195-1">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">export</span><span class="p" data-group-id="6799387195-2">(</span><span class="p" data-group-id="6799387195-3">[</span><span class="ss">version</span><span class="p">/</span><span class="mi">0</span><span class="p" data-group-id="6799387195-3">]</span><span class="p" data-group-id="6799387195-2">)</span><span class="p">.</span><span class="w">
</span><span class="w">
</span><span class="p">-</span><span class="na">ifdef</span><span class="p" data-group-id="6799387195-4">(</span><span class="n">VERSION</span><span class="p" data-group-id="6799387195-4">)</span><span class="p">.</span><span class="w">
</span><span class="nf">version</span><span class="p" data-group-id="6799387195-5">(</span><span class="p" data-group-id="6799387195-5">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">VERSION</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">else</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">error</span><span class="p" data-group-id="6799387195-6">(</span><span class="s">&quot;Macro VERSION must be defined.&quot;</span><span class="p" data-group-id="6799387195-6">)</span><span class="p">.</span><span class="w">
</span><span class="nf">version</span><span class="p" data-group-id="6799387195-7">(</span><span class="p" data-group-id="6799387195-7">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">endif</span><span class="p">.</span></code></pre><p>The error message will look like this:</p><pre><code class="text">% erlc t.erl
t.erl:7: -error(&quot;Macro VERSION must be defined.&quot;).</code></pre><p>The directive <code class="inline">-warning(Term)</code> causes a compilation warning.</p><p><em>Example:</em></p><pre><code class="makeup erlang" translate="no"><span class="p">-</span><span class="na">module</span><span class="p" data-group-id="9661045164-1">(</span><span class="ss">t</span><span class="p" data-group-id="9661045164-1">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">export</span><span class="p" data-group-id="9661045164-2">(</span><span class="p" data-group-id="9661045164-3">[</span><span class="ss">version</span><span class="p">/</span><span class="mi">0</span><span class="p" data-group-id="9661045164-3">]</span><span class="p" data-group-id="9661045164-2">)</span><span class="p">.</span><span class="w">
</span><span class="w">
</span><span class="p">-</span><span class="na">ifndef</span><span class="p" data-group-id="9661045164-4">(</span><span class="n">VERSION</span><span class="p" data-group-id="9661045164-4">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">warning</span><span class="p" data-group-id="9661045164-5">(</span><span class="s">&quot;Macro VERSION not defined -- using default version.&quot;</span><span class="p" data-group-id="9661045164-5">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">define</span><span class="p" data-group-id="9661045164-6">(</span><span class="n">VERSION</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;0&quot;</span><span class="p" data-group-id="9661045164-6">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">endif</span><span class="p">.</span><span class="w">
</span><span class="nf">version</span><span class="p" data-group-id="9661045164-7">(</span><span class="p" data-group-id="9661045164-7">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">VERSION</span><span class="p">.</span></code></pre><p>The warning message will look like this:</p><pre><code class="text">% erlc t.erl
t.erl:5: Warning: -warning(&quot;Macro VERSION not defined -- using default version.&quot;).</code></pre><section role="note" class="admonition info"><h4 class="admonition-title info">Change</h4><p>The <code class="inline">-error()</code> and <code class="inline">-warning()</code> directives were added in Erlang/OTP 19.</p></section><h2 id="stringifying-macro-arguments" class="section-heading">
  <a href="#stringifying-macro-arguments" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Stringifying Macro Arguments</span>
</h2>
<p>The construction <code class="inline">??Arg</code>, where <code class="inline">Arg</code> is a macro argument, is expanded to a
string containing the tokens of the argument. This is similar to the <code class="inline">#arg</code>
stringifying construction in C.</p><p><em>Example:</em></p><pre><code class="makeup erlang" translate="no"><span class="p">-</span><span class="na">define</span><span class="p" data-group-id="7044712744-1">(</span><span class="n">TESTCALL</span><span class="p" data-group-id="7044712744-2">(</span><span class="n">Call</span><span class="p" data-group-id="7044712744-2">)</span><span class="p">,</span><span class="w"> </span><span class="nc">io</span><span class="p">:</span><span class="nf">format</span><span class="p" data-group-id="7044712744-3">(</span><span class="s">&quot;Call </span><span class="si">~s</span><span class="s">: </span><span class="si">~w</span><span class="si">~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7044712744-4">[</span><span class="o">?</span><span class="o">?</span><span class="n">Call</span><span class="p">,</span><span class="w"> </span><span class="n">Call</span><span class="p" data-group-id="7044712744-4">]</span><span class="p" data-group-id="7044712744-3">)</span><span class="p" data-group-id="7044712744-1">)</span><span class="p">.</span><span class="w">

</span><span class="o">?</span><span class="n">TESTCALL</span><span class="p" data-group-id="7044712744-5">(</span><span class="nf">myfunction</span><span class="p" data-group-id="7044712744-6">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p" data-group-id="7044712744-6">)</span><span class="p" data-group-id="7044712744-5">)</span><span class="p">,</span><span class="w">
</span><span class="o">?</span><span class="n">TESTCALL</span><span class="p" data-group-id="7044712744-7">(</span><span class="nc">you</span><span class="p">:</span><span class="nf">function</span><span class="p" data-group-id="7044712744-8">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p" data-group-id="7044712744-8">)</span><span class="p" data-group-id="7044712744-7">)</span><span class="p">.</span></code></pre><p>results in</p><pre><code class="makeup erlang" translate="no"><span class="nc">io</span><span class="p">:</span><span class="nf">format</span><span class="p" data-group-id="0815209864-1">(</span><span class="s">&quot;Call </span><span class="si">~s</span><span class="s">: </span><span class="si">~w</span><span class="si">~n</span><span class="s">&quot;</span><span class="p">,</span><span class="p" data-group-id="0815209864-2">[</span><span class="s">&quot;myfunction ( 1 , 2 )&quot;</span><span class="p">,</span><span class="nf">myfunction</span><span class="p" data-group-id="0815209864-3">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p" data-group-id="0815209864-3">)</span><span class="p" data-group-id="0815209864-2">]</span><span class="p" data-group-id="0815209864-1">)</span><span class="p">,</span><span class="w">
</span><span class="nc">io</span><span class="p">:</span><span class="nf">format</span><span class="p" data-group-id="0815209864-4">(</span><span class="s">&quot;Call </span><span class="si">~s</span><span class="s">: </span><span class="si">~w</span><span class="si">~n</span><span class="s">&quot;</span><span class="p">,</span><span class="p" data-group-id="0815209864-5">[</span><span class="s">&quot;you : function ( 2 , 1 )&quot;</span><span class="p">,</span><span class="nc">you</span><span class="p">:</span><span class="nf">function</span><span class="p" data-group-id="0815209864-6">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p" data-group-id="0815209864-6">)</span><span class="p" data-group-id="0815209864-5">]</span><span class="p" data-group-id="0815209864-4">)</span><span class="p">.</span></code></pre><p>That is, a trace output, with both the function called and the resulting value.</p>
</div>

<div class="bottom-actions" id="bottom-actions">
  <div class="bottom-actions-item">

      <a href="expressions.html" class="bottom-actions-button" rel="prev">
        <span class="subheader">
          ← Previous Page
        </span>
        <span class="title">
Expressions
        </span>
      </a>

  </div>
  <div class="bottom-actions-item">

      <a href="ref_man_records.html" class="bottom-actions-button" rel="next">
        <span class="subheader">
          Next Page →
        </span>
        <span class="title">
Records
        </span>
      </a>

  </div>
</div>
    <footer class="footer">
      <p>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="Erlang System Documentation.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.37.3) for the

          <a href="https://erlang.org" title="Erlang" target="_blank" translate="no">Erlang programming language</a>

      </p>
<p>Copyright © 1996-2025 <a href="https://www.ericsson.com">Ericsson AB</a></p>
    </footer>
  </div>
</main>
</div>
  <script defer src="https://cdn.jsdelivr.net/npm/mermaid@11.4.1/dist/mermaid.min.js"></script>
  <script>
  let initialized = false;

  window.addEventListener("exdoc:loaded", () => {
      if (!initialized) {
      mermaid.initialize({
          startOnLoad: false,
          theme: document.body.className.includes("dark") ? "dark" : "default"
      });
      initialized = true;
      }

      let id = 0;
      for (const codeEl of document.querySelectorAll("pre code.mermaid")) {
      const preEl = codeEl.parentElement;
      const graphDefinition = codeEl.textContent;
      const graphEl = document.createElement("div");
      const graphId = "mermaid-graph-" + id++;
      mermaid.render(graphId, graphDefinition).then(({svg, bindFunctions}) => {
          graphEl.innerHTML = svg;
          bindFunctions?.(graphEl);
          preEl.insertAdjacentElement("afterend", graphEl);
          preEl.remove();
      });
      }
  });
  </script>

  </body>
</html>
