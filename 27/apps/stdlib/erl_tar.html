<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.37.3">
    <meta name="project" content="stdlib v6.2.2.2">


<meta name="major-vsn" content="27">
<meta name="exdoc:full-text-search-url" content="/doc/search.html?v=27&q=">
<link rel="canonical" href="https://www.erlang.org/doc/apps/stdlib/erl_tar.html" />
    <title>erl_tar — stdlib v6.2.2.2</title>

    <link rel="stylesheet" href="dist/html-erlang-FDBURIED.css" />

    <script defer src="dist/sidebar_items-2FA269C1.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-ALU6OERS.js"></script>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="../../index.html" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="stdlib" />
        </a>

      <div>
        <a href="../../index.html" class="sidebar-projectName" translate="no">
stdlib
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v6.2.2.2
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras=""></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-module" id="main" data-type="modules">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of stdlib</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search" tabindex="-1">
            <i class="ri-search-2-line ri-lg" aria-hidden="true"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>
      <span translate="no">erl_tar</span> 
      <small class="app-vsn" translate="no">(stdlib v6.2.2.2)</small>

    </h1>

      <a href="https://github.com/erlang/otp/blob/OTP-27.3.4.6/lib/stdlib/src/erl_tar.erl#L30" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

  </div>


    <section id="moduledoc">
<p>Unix 'tar' utility for reading and writing tar archives.</p><p>This module archives and extract files to and from a tar file. This module
supports reading most common tar formats, namely v7, STAR, USTAR, and PAX, as
well as some of GNU tar's extensions to the USTAR format (sparse files most
notably). It produces tar archives in USTAR format, unless the files being
archived require PAX format due to restrictions in USTAR (such as unicode
metadata, filename length, and more). As such, <code class="inline">erl_tar</code> supports tar archives
produced by most all modern tar utilities, and produces tarballs which should be
similarly portable.</p><p>By convention, the name of a tar file is to end in &quot;<code class="inline">.tar</code>&quot;. To abide to the
convention, add &quot;<code class="inline">.tar</code>&quot; to the name.</p><p>Tar files can be created in one operation using function <a href="#create/2"><code class="inline">create/2</code></a> or
<a href="#create/3"><code class="inline">create/3</code></a>.</p><p>Alternatively, for more control, use functions <a href="#open/2"><code class="inline">open/2</code></a>, <a href="#add/3"><code class="inline">add/3,4</code></a>,
and <a href="#close/1"><code class="inline">close/1</code></a>.</p><p>To extract all files from a tar file, use function <a href="#extract/1"><code class="inline">extract/1</code></a>. To extract only
some files or to be able to specify some more options, use function <a href="#extract/2"><code class="inline">extract/2</code></a>.</p><p>To return a list of the files in a tar file, use function <a href="#table/1"><code class="inline">table/1</code></a> or
<a href="#table/2"><code class="inline">table/2</code></a>. To print a list of files to the Erlang shell, use function <a href="#t/1"><code class="inline">t/1</code></a> or
<a href="#tt/1"><code class="inline">tt/1</code></a>.</p><p>To convert an error term returned from one of the functions above to a readable
message, use function <a href="#format_error/1"><code class="inline">format_error/1</code></a>.</p><h2 id="module-unicode-support" class="section-heading">
  <a href="#module-unicode-support" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Unicode Support</span>
</h2>
<p>If <a href="../../apps/kernel/file.html#native_name_encoding/0"><code class="inline">file:native_name_encoding/0</code></a> returns <code class="inline">utf8</code>, path names are encoded in UTF-8
when creating tar files, and path names are assumed to be encoded in UTF-8 when
extracting tar files.</p><p>If <a href="../../apps/kernel/file.html#native_name_encoding/0"><code class="inline">file:native_name_encoding/0</code></a> returns <code class="inline">latin1</code>, no translation of path names
is done.</p><p>Unicode metadata stored in PAX headers is preserved</p><h2 id="module-other-storage-media" class="section-heading">
  <a href="#module-other-storage-media" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Other Storage Media</span>
</h2>
<p>The <a href="../../apps/ftp/ftp.html"><code class="inline">ftp</code></a> module normally accesses the tar file on disk using the <a href="../../apps/kernel/file.html"><code class="inline">file</code></a>
module. When other needs arise, you can define your own low-level Erlang
functions to perform the writing and reading on the storage media; use function
<a href="#init/3"><code class="inline">init/3</code></a>.</p><p>An example of this is the SFTP support in <a href="../../apps/ssh/ssh_sftp.html#open_tar/3"><code class="inline">ssh_sftp:open_tar/3</code></a>. This function
opens a tar file on a remote machine using an SFTP channel.</p><h2 id="module-limitations" class="section-heading">
  <a href="#module-limitations" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Limitations</span>
</h2>
<ul><li>If you must remain compatible with the USTAR tar format, you must ensure file
paths being stored are less than 255 bytes in total, with a maximum filename
component length of 100 bytes. USTAR uses a header field (prefix) in addition
to the name field, and splits file paths longer than 100 bytes into two parts.
This split is done on a directory boundary, and is done in such a way to make
the best use of the space available in those two fields, but in practice this
will often mean that you have less than 255 bytes for a path. <code class="inline">erl_tar</code> will
automatically upgrade the format to PAX to handle longer filenames, so this is
only an issue if you need to extract the archive with an older implementation
of <code class="inline">erl_tar</code> or <code class="inline">tar</code> which does not support PAX. In this case, the PAX
headers will be extracted as regular files, and you will need to apply them
manually.</li><li>Like the above, if you must remain USTAR compatible, you must also ensure than
paths for symbolic/hard links are no more than 100 bytes, otherwise PAX
headers will be used.</li></ul>
    </section>

</div>

  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Summary</span>
    </h1>
<div class="summary-types summary">
  <h2>
    <a href="#types">Types</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:add_opt/0" data-no-tooltip="" translate="no">add_opt()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:create_opt/0" data-no-tooltip="" translate="no">create_opt()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:extract_opt/0" data-no-tooltip="" translate="no">extract_opt()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:file_op/0" data-no-tooltip="" translate="no">file_op()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:filelist/0" data-no-tooltip="" translate="no">filelist()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:gid/0" data-no-tooltip="" translate="no">gid()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:mode/0" data-no-tooltip="" translate="no">mode()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:name_in_archive/0" data-no-tooltip="" translate="no">name_in_archive()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:open_type/0" data-no-tooltip="" translate="no">open_type()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:tar_descriptor/0" data-no-tooltip="" translate="no">tar_descriptor()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:tar_entry/0" data-no-tooltip="" translate="no">tar_entry()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:tar_time/0" data-no-tooltip="" translate="no">tar_time()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:typeflag/0" data-no-tooltip="" translate="no">typeflag()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:uid/0" data-no-tooltip="" translate="no">uid()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:user_data/0" data-no-tooltip="" translate="no">user_data()</a>

      </div>

    </div>

</div>
<div class="summary-functions summary">
  <h2>
    <a href="#functions">Functions</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#add/3" data-no-tooltip="" translate="no">add(TarDescriptor, Name, Options)</a>

      </div>

        <div class="summary-synopsis"><p>Equivalent to <a href="#add/4"><code class="inline">add/4</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#add/4" data-no-tooltip="" translate="no">add(TarDescriptor, Filename, NameInArchive, Options)</a>

      </div>

        <div class="summary-synopsis"><p>Adds a file to a tar file that has been opened for writing by
<a href="#open/2"><code class="inline">open/1</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#close/1" data-no-tooltip="" translate="no">close(TarDescriptor)</a>

      </div>

        <div class="summary-synopsis"><p>Closes a tar file opened by <a href="#open/2"><code class="inline">open/2</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#create/2" data-no-tooltip="" translate="no">create(Name, FileList)</a>

      </div>

        <div class="summary-synopsis"><p>Creates a tar file and archives the files whose names are specified in
<code class="inline">FileList</code> into it. The files can either be read from disk or be specified as
binaries.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#create/3" data-no-tooltip="" translate="no">create(Name, FileList, Options)</a>

      </div>

        <div class="summary-synopsis"><p>Creates a tar file and archives the files whose names are specified in
<code class="inline">FileList</code> into it. The files can either be read from disk or be specified as
binaries.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#extract/1" data-no-tooltip="" translate="no">extract(Open)</a>

      </div>

        <div class="summary-synopsis"><p>Extracts all files from a tar archive.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#extract/2" data-no-tooltip="" translate="no">extract/2</a>

      </div>

        <div class="summary-synopsis"><p>Extracts files from a tar archive.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#format_error/1" data-no-tooltip="" translate="no">format_error/1</a>

      </div>

        <div class="summary-synopsis"><p>Converts an error reason term to a human-readable error message string.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#init/3" data-no-tooltip="" translate="no">init/3</a>

      </div>

        <div class="summary-synopsis"><p>The <code class="inline">Fun</code> is the definition of what to do when the different storage operations
functions are to be called from the higher tar handling functions (such as
<a href="#add/3"><code class="inline">add/3</code></a>, <a href="#add/4"><code class="inline">add/4</code></a>, and <a href="#close/1"><code class="inline">close/1</code></a>).</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#open/2" data-no-tooltip="" translate="no">open/2</a>

      </div>

        <div class="summary-synopsis"><p>Creates a tar file for writing (any existing file with the same name is
truncated).</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t/1" data-no-tooltip="" translate="no">t(Name)</a>

      </div>

        <div class="summary-synopsis"><p>Prints the names of all files in the tar file <code class="inline">Name</code> to the Erlang shell
(similar to &quot;<code class="inline">tar t</code>&quot;).</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#table/1" data-no-tooltip="" translate="no">table(Open)</a>

      </div>

        <div class="summary-synopsis"><p>Equivalent to <a href="#table/2"><code class="inline">table(Open, [])</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#table/2" data-no-tooltip="" translate="no">table(Name, Opts)</a>

      </div>

        <div class="summary-synopsis"><p>Retrieves the names of all files in the tar file <code class="inline">Name</code>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#tt/1" data-no-tooltip="" translate="no">tt(Name)</a>

      </div>

        <div class="summary-synopsis"><p>Prints names and information about all files in the tar file <code class="inline">Name</code> to the
Erlang shell (similar to &quot;<code class="inline">tar tv</code>&quot;).</p></div>

    </div>

</div>

  </section>


  <section id="types" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#types">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Types</span>
    </h1>
    <div class="types-list">
<section class="detail" id="t:add_opt/0">

  <div class="detail-header">
    <a href="#t:add_opt/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">add_opt()</h1>

        <span class="note">(not exported)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-27.3.4.6/lib/stdlib/src/erl_tar.hrl#L42" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> add_opt() ::
          dereference | verbose |
          {chunks, <a href="../../apps/erts/erlang.html#t:pos_integer/0">pos_integer</a>()} |
          {atime, <a href="../../apps/erts/erlang.html#t:non_neg_integer/0">non_neg_integer</a>()} |
          {mtime, <a href="../../apps/erts/erlang.html#t:non_neg_integer/0">non_neg_integer</a>()} |
          {ctime, <a href="../../apps/erts/erlang.html#t:non_neg_integer/0">non_neg_integer</a>()} |
          {uid, <a href="../../apps/erts/erlang.html#t:non_neg_integer/0">non_neg_integer</a>()} |
          {gid, <a href="../../apps/erts/erlang.html#t:non_neg_integer/0">non_neg_integer</a>()}.</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:create_opt/0">

  <div class="detail-header">
    <a href="#t:create_opt/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">create_opt()</h1>

        <span class="note">(not exported)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-27.3.4.6/lib/stdlib/src/erl_tar.hrl#L61" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> create_opt() :: compressed | cooked | dereference | verbose.</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:extract_opt/0">

  <div class="detail-header">
    <a href="#t:extract_opt/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">extract_opt()</h1>

        <span class="note">(not exported)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-27.3.4.6/lib/stdlib/src/erl_tar.hrl#L53" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> extract_opt() ::
          {cwd, <a href="../../apps/erts/erlang.html#t:string/0">string</a>()} |
          {files, [<a href="#t:name_in_archive/0">name_in_archive</a>()]} |
          compressed | cooked | memory | keep_old_files | verbose.</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:file_op/0">

  <div class="detail-header">
    <a href="#t:file_op/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">file_op()</h1>

        <span class="note">(not exported)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-27.3.4.6/lib/stdlib/src/erl_tar.hrl#L194" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> file_op() ::
          fun((write | close | read2 | position,
               {<a href="#t:user_data/0">user_data</a>(), <a href="../../apps/erts/erlang.html#t:iodata/0">iodata</a>()} |
               <a href="#t:user_data/0">user_data</a>() |
               {<a href="#t:user_data/0">user_data</a>(), <a href="../../apps/erts/erlang.html#t:non_neg_integer/0">non_neg_integer</a>()} |
               {<a href="#t:user_data/0">user_data</a>(), <a href="../../apps/erts/erlang.html#t:non_neg_integer/0">non_neg_integer</a>()}) ->
                  ok | eof | {ok, <a href="../../apps/erts/erlang.html#t:string/0">string</a>() | <a href="../../apps/erts/erlang.html#t:binary/0">binary</a>()} | {ok, <a href="../../apps/erts/erlang.html#t:non_neg_integer/0">non_neg_integer</a>()} | {error, <a href="../../apps/erts/erlang.html#t:term/0">term</a>()}).</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:filelist/0">

  <div class="detail-header">
    <a href="#t:filelist/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">filelist()</h1>

        <span class="note">(not exported)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-27.3.4.6/lib/stdlib/src/erl_tar.hrl#L66" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> filelist() :: [<a href="../../apps/kernel/file.html#t:filename/0">file:filename</a>() | {<a href="#t:name_in_archive/0">name_in_archive</a>(), <a href="../../apps/kernel/file.html#t:filename_all/0">file:filename_all</a>()}].</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:gid/0">

  <div class="detail-header">
    <a href="#t:gid/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">gid()</h1>

        <span class="note">(not exported)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-27.3.4.6/lib/stdlib/src/erl_tar.erl#L386" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> gid() :: <a href="../../apps/erts/erlang.html#t:non_neg_integer/0">non_neg_integer</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:mode/0">

  <div class="detail-header">
    <a href="#t:mode/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">mode()</h1>

        <span class="note">(not exported)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-27.3.4.6/lib/stdlib/src/erl_tar.erl#L384" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> mode() :: <a href="../../apps/erts/erlang.html#t:non_neg_integer/0">non_neg_integer</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:name_in_archive/0">

  <div class="detail-header">
    <a href="#t:name_in_archive/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">name_in_archive()</h1>

        <span class="note">(not exported)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-27.3.4.6/lib/stdlib/src/erl_tar.hrl#L51" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> name_in_archive() :: <a href="../../apps/erts/erlang.html#t:string/0">string</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:open_type/0">

  <div class="detail-header">
    <a href="#t:open_type/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">open_type()</h1>

        <span class="note">(not exported)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-27.3.4.6/lib/stdlib/src/erl_tar.erl#L526" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> open_type() :: <a href="../../apps/kernel/file.html#t:filename_all/0">file:filename_all</a>() | {binary, <a href="../../apps/erts/erlang.html#t:binary/0">binary</a>()} | {file, <a href="../../apps/kernel/file.html#t:io_device/0">file:io_device</a>()}.</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:tar_descriptor/0">

  <div class="detail-header">
    <a href="#t:tar_descriptor/0" class="detail-link" data-no-tooltip="" aria-label="Link to this opaque">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">tar_descriptor()</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-27.3.4.6/lib/stdlib/src/erl_tar.hrl#L166" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-opaque</span> tar_descriptor()</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:tar_entry/0">

  <div class="detail-header">
    <a href="#t:tar_entry/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">tar_entry()</h1>

        <span class="note">(not exported)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-27.3.4.6/lib/stdlib/src/erl_tar.erl#L388" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> tar_entry() ::
          {Name :: <a href="#t:name_in_archive/0">name_in_archive</a>(),
           Type :: <a href="#t:typeflag/0">typeflag</a>(),
           Size :: <a href="../../apps/erts/erlang.html#t:non_neg_integer/0">non_neg_integer</a>(),
           MTime :: <a href="#t:tar_time/0">tar_time</a>(),
           Mode :: <a href="#t:mode/0">mode</a>(),
           Uid :: <a href="#t:uid/0">uid</a>(),
           Gid :: <a href="#t:gid/0">gid</a>()}.</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:tar_time/0">

  <div class="detail-header">
    <a href="#t:tar_time/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">tar_time()</h1>

        <span class="note">(not exported)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-27.3.4.6/lib/stdlib/src/erl_tar.hrl#L69" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> tar_time() :: <a href="../../apps/erts/erlang.html#t:non_neg_integer/0">non_neg_integer</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:typeflag/0">

  <div class="detail-header">
    <a href="#t:typeflag/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">typeflag()</h1>

        <span class="note">(not exported)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-27.3.4.6/lib/stdlib/src/erl_tar.erl#L381" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> typeflag() :: regular | link | symlink | char | block | directory | fifo | reserved | unknown.</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:uid/0">

  <div class="detail-header">
    <a href="#t:uid/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">uid()</h1>

        <span class="note">(not exported)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-27.3.4.6/lib/stdlib/src/erl_tar.erl#L385" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> uid() :: <a href="../../apps/erts/erlang.html#t:non_neg_integer/0">non_neg_integer</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:user_data/0">

  <div class="detail-header">
    <a href="#t:user_data/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">user_data()</h1>

        <span class="note">(not exported)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-27.3.4.6/lib/stdlib/src/erl_tar.hrl#L191" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> user_data() :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>


  </section>
</section>

    </div>
  </section>

  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Functions</span>
    </h1>
    <div class="functions-list">
<section class="detail" id="add/3">

  <div class="detail-header">
    <a href="#add/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">add(TarDescriptor, Name, Options)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-27.3.4.6/lib/stdlib/src/erl_tar.erl#L761" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> add(TarDescriptor, Name, Options) -> ok | {error, <a href="../../apps/erts/erlang.html#t:term/0">term</a>()}
             when
                 TarDescriptor :: <a href="#t:tar_descriptor/0">tar_descriptor</a>(),
                 Name :: <a href="#t:name_in_archive/0">name_in_archive</a>() | {<a href="#t:name_in_archive/0">name_in_archive</a>(), <a href="../../apps/kernel/file.html#t:filename_all/0">file:filename_all</a>()},
                 Options :: [<a href="#t:add_opt/0">add_opt</a>()].</pre>

      </div>

<p>Equivalent to <a href="#add/4"><code class="inline">add/4</code></a>.</p><p>If <code class="inline">Name</code> is <a href="#t:name_in_archive/0"><code class="inline">name_in_archive/0</code></a>, then <a href="#add/4"><code class="inline">add(TarDescriptor, Name, Name, Options)</code></a> is called.</p><p>If <code class="inline">Name</code> is a two tuple then <a href="#add/4"><code class="inline">add(TarDescriptor, NameInArchive, Name, Options)</code></a> is called.</p>
  </section>
</section>
<section class="detail" id="add/4">

  <div class="detail-header">
    <a href="#add/4" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">add(TarDescriptor, Filename, NameInArchive, Options)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-27.3.4.6/lib/stdlib/src/erl_tar.erl#L812" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> add(TarDescriptor, Filename, NameInArchive, Options) -> ok | {error, <a href="../../apps/erts/erlang.html#t:term/0">term</a>()}
             when
                 TarDescriptor :: <a href="#t:tar_descriptor/0">tar_descriptor</a>(),
                 Filename :: <a href="../../apps/kernel/file.html#t:filename_all/0">file:filename_all</a>(),
                 NameInArchive :: <a href="#t:name_in_archive/0">name_in_archive</a>(),
                 Options :: [<a href="#t:add_opt/0">add_opt</a>()].</pre>

      </div>

<p>Adds a file to a tar file that has been opened for writing by
<a href="#open/2"><code class="inline">open/1</code></a>.</p><p><code class="inline">NameInArchive</code> is the name under which the file becomes stored in the tar file.
The file gets this name when it is extracted from the tar file.</p><p>Options:</p><ul><li><p><strong><code class="inline">dereference</code></strong> - By default, symbolic links are stored as symbolic links in
the tar file. To override the default and store the file that the symbolic
link points to into the tar file, use option <code class="inline">dereference</code>.</p></li><li><p><strong><code class="inline">verbose</code></strong> - Prints an informational message about the added file.</p></li><li><p><strong><code class="inline">{chunks,ChunkSize}</code></strong> - Reads data in parts from the file. This is intended
for memory-limited machines that, for example, builds a tar file on a remote
machine over SFTP, see <a href="../../apps/ssh/ssh_sftp.html#open_tar/3"><code class="inline">ssh_sftp:open_tar/3</code></a>.</p></li><li><p><strong><code class="inline">{atime,non_neg_integer()}</code></strong> - Sets the last time, as
<a href="../../apps/erts/time_correction.html#posix-time">POSIX time</a>, when the file was read.
See also <a href="../../apps/kernel/file.html#read_file_info/1"><code class="inline">file:read_file_info/1</code></a>.</p></li><li><p><strong><code class="inline">{mtime,non_neg_integer()}</code></strong> - Sets the last time, as
<a href="../../apps/erts/time_correction.html#posix-time">POSIX time</a>, when the file was
written. See also <a href="../../apps/kernel/file.html#read_file_info/1"><code class="inline">file:read_file_info/1</code></a>.</p></li><li><p><strong><code class="inline">{ctime,non_neg_integer()}</code></strong> - Sets the time, as
<a href="../../apps/erts/time_correction.html#posix-time">POSIX time</a>, when the file was
created. See also <a href="../../apps/kernel/file.html#read_file_info/1"><code class="inline">file:read_file_info/1</code></a>.</p></li><li><p><strong><code class="inline">{uid,non_neg_integer()}</code></strong> - Sets the file owner. <a href="../../apps/kernel/file.html#read_file_info/1"><code class="inline">file:read_file_info/1</code></a>.</p></li><li><p><strong><code class="inline">{gid,non_neg_integer()}</code></strong> - Sets the group that the file owner belongs to.
<a href="../../apps/kernel/file.html#read_file_info/1"><code class="inline">file:read_file_info/1</code></a>.</p></li></ul>
  </section>
</section>
<section class="detail" id="close/1">

  <div class="detail-header">
    <a href="#close/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">close(TarDescriptor)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-27.3.4.6/lib/stdlib/src/erl_tar.erl#L665" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> close(TarDescriptor :: <a href="#t:tar_descriptor/0">tar_descriptor</a>()) -> ok | {error, <a href="../../apps/erts/erlang.html#t:term/0">term</a>()}.</pre>

      </div>

<p>Closes a tar file opened by <a href="#open/2"><code class="inline">open/2</code></a>.</p>
  </section>
</section>
<section class="detail" id="create/2">

  <div class="detail-header">
    <a href="#create/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">create(Name, FileList)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-27.3.4.6/lib/stdlib/src/erl_tar.erl#L691" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> create(<a href="../../apps/kernel/file.html#t:filename_all/0">file:filename_all</a>(), <a href="#t:filelist/0">filelist</a>()) -> ok | {error, {<a href="../../apps/erts/erlang.html#t:string/0">string</a>(), <a href="../../apps/erts/erlang.html#t:term/0">term</a>()}}.</pre>

      </div>

<p>Creates a tar file and archives the files whose names are specified in
<code class="inline">FileList</code> into it. The files can either be read from disk or be specified as
binaries.</p>
  </section>
</section>
<section class="detail" id="create/3">

  <div class="detail-header">
    <a href="#create/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">create(Name, FileList, Options)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-27.3.4.6/lib/stdlib/src/erl_tar.erl#L720" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> create(<a href="../../apps/kernel/file.html#t:filename_all/0">file:filename_all</a>(), <a href="#t:filelist/0">filelist</a>(), [<a href="#t:create_opt/0">create_opt</a>()]) ->
                ok | {error, <a href="../../apps/erts/erlang.html#t:term/0">term</a>()} | {error, {<a href="../../apps/erts/erlang.html#t:string/0">string</a>(), <a href="../../apps/erts/erlang.html#t:term/0">term</a>()}}.</pre>

      </div>

<p>Creates a tar file and archives the files whose names are specified in
<code class="inline">FileList</code> into it. The files can either be read from disk or be specified as
binaries.</p><p>The options in <code class="inline">OptionList</code> modify the defaults as follows:</p><ul><li><p><strong><code class="inline">compressed</code></strong> - The entire tar file is compressed, as if it has been run
through the <code class="inline">gzip</code> program. To abide to the convention that a compressed tar
file is to end in &quot;<code class="inline">.tar.gz</code>&quot; or &quot;<code class="inline">.tgz</code>&quot;, add the appropriate extension.</p></li><li><p><strong><code class="inline">cooked</code></strong> - By default, function <a href="#open/2"><code class="inline">open/2</code></a> opens the tar file in
<code class="inline">raw</code> mode, which is faster but does not allow a remote (Erlang) file server
to be used. Adding <code class="inline">cooked</code> to the mode list overrides the default and opens
the tar file without option <code class="inline">raw</code>.</p></li><li><p><strong><code class="inline">dereference</code></strong> - By default, symbolic links are stored as symbolic links in
the tar file. To override the default and store the file that the symbolic
link points to into the tar file, use option <code class="inline">dereference</code>.</p></li><li><p><strong><code class="inline">verbose</code></strong> - Prints an informational message about each added file.</p></li></ul>
  </section>
</section>
<section class="detail" id="extract/1">

  <div class="detail-header">
    <a href="#extract/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">extract(Open)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-27.3.4.6/lib/stdlib/src/erl_tar.erl#L261" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> extract(Open :: <a href="#t:open_type/0">open_type</a>()) -> ok | {error, <a href="../../apps/erts/erlang.html#t:term/0">term</a>()}.</pre>

      </div>

<p>Extracts all files from a tar archive.</p><p>If argument <code class="inline">Name</code> is specified as <code class="inline">{binary,Binary}</code>, the contents of the binary
is assumed to be a tar archive.</p><p>If argument <code class="inline">Name</code> is specified as <code class="inline">{file,Fd}</code>, <code class="inline">Fd</code> is assumed to be a file
descriptor returned from function <a href="../../apps/kernel/file.html#open/2"><code class="inline">file:open/2</code></a>.</p><p>Otherwise, <code class="inline">Name</code> is to be a filename.</p><section role="note" class="admonition info"><h4 class="admonition-title info">Note</h4><p>Leading slashes in tar member names will be removed before writing the file.
That is, absolute paths will be turned into relative paths. There will be an
info message written to the error logger when paths are changed in this way.</p></section><section role="note" class="admonition warning"><h4 class="admonition-title warning">Warning</h4><p>The <code class="inline">compressed</code> and <code class="inline">cooked</code> flags are invalid when passing a file descriptor
with <code class="inline">{file,Fd}</code>. The file is assumed to have been opened with the appropriate
flags.</p></section>
  </section>
</section>
<section class="detail" id="extract/2">

  <div class="detail-header">
    <a href="#extract/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">extract/2</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-27.3.4.6/lib/stdlib/src/erl_tar.erl#L322" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> extract(Open :: <a href="#t:open_type/0">open_type</a>(), [<a href="#t:extract_opt/0">extract_opt</a>()]) ->
                 {ok, [{<a href="../../apps/erts/erlang.html#t:string/0">string</a>(), <a href="../../apps/erts/erlang.html#t:binary/0">binary</a>()}]} | {error, <a href="../../apps/erts/erlang.html#t:term/0">term</a>()} | ok.</pre>

      </div>

<p>Extracts files from a tar archive.</p><p>If argument <code class="inline">Name</code> is specified as <code class="inline">{binary,Binary}</code>, the contents of the binary
is assumed to be a tar archive.</p><p>If argument <code class="inline">Name</code> is specified as <code class="inline">{file,Fd}</code>, <code class="inline">Fd</code> is assumed to be a file
descriptor returned from function <a href="../../apps/kernel/file.html#open/2"><code class="inline">file:open/2</code></a>.</p><p>Otherwise, <code class="inline">Name</code> is to be a filename.</p><p>The following options modify the defaults for the extraction as follows:</p><ul><li><p><strong><code class="inline">{cwd,Cwd}</code></strong> - Files with relative filenames are by default extracted to
the current working directory. With this option, files are instead extracted
into directory <code class="inline">Cwd</code>.</p></li><li><p><strong><code class="inline">{files,FileList}</code></strong> - By default, all files are extracted from the tar
file. With this option, only those files are extracted whose names are
included in <code class="inline">FileList</code>.</p></li><li><p><strong><code class="inline">compressed</code></strong> - With this option, the file is uncompressed while
extracting. If the tar file is not compressed, this option is ignored.</p></li><li><p><strong><code class="inline">cooked</code></strong> - By default, function <a href="#open/2"><code class="inline">open/2</code></a> function opens the
tar file in <code class="inline">raw</code> mode, which is faster but does not allow a remote (Erlang)
file server to be used. Adding <code class="inline">cooked</code> to the mode list overrides the default
and opens the tar file without option <code class="inline">raw</code>.</p></li><li><p><strong><code class="inline">memory</code></strong> - Instead of extracting to a directory, this option gives the
result as a list of tuples <code class="inline">{Filename, Binary}</code>, where <code class="inline">Binary</code> is a binary
containing the extracted data of the file named <code class="inline">Filename</code> in the tar file.</p></li><li><p><strong><code class="inline">keep_old_files</code></strong> - By default, all existing files with the same name as
files in the tar file are overwritten. With this option, existing files are
not overwriten.</p></li><li><p><strong><code class="inline">verbose</code></strong> - Prints an informational message for each extracted file.</p></li></ul><section role="note" class="admonition warning"><h4 class="admonition-title warning">Warning</h4><p>The <code class="inline">compressed</code> and <code class="inline">cooked</code> flags are invalid when passing a file descriptor
with <code class="inline">{file,Fd}</code>. The file is assumed to have been opened with the appropriate
flags.</p></section>
  </section>
</section>
<section class="detail" id="format_error/1">

  <div class="detail-header">
    <a href="#format_error/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">format_error/1</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-27.3.4.6/lib/stdlib/src/erl_tar.erl#L116" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> format_error(<a href="../../apps/erts/erlang.html#t:term/0">term</a>()) -> <a href="../../apps/erts/erlang.html#t:string/0">string</a>().</pre>

      </div>

<p>Converts an error reason term to a human-readable error message string.</p>
  </section>
</section>
<section class="detail" id="init/3">

  <div class="detail-header">
    <a href="#init/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">init/3</h1>

        <span class="note">(since OTP 17.4)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-27.3.4.6/lib/stdlib/src/erl_tar.erl#L228" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> init(UserData :: <a href="#t:user_data/0">user_data</a>(), write | read, <a href="#t:file_op/0">file_op</a>()) -> {ok, <a href="#t:tar_descriptor/0">tar_descriptor</a>()} | {error, badarg}.</pre>

      </div>

<p>The <code class="inline">Fun</code> is the definition of what to do when the different storage operations
functions are to be called from the higher tar handling functions (such as
<a href="#add/3"><code class="inline">add/3</code></a>, <a href="#add/4"><code class="inline">add/4</code></a>, and <a href="#close/1"><code class="inline">close/1</code></a>).</p><p>The <code class="inline">Fun</code> is called when the tar function wants to do a low-level operation,
like writing a block to a file. The <code class="inline">Fun</code> is called as
<code class="inline">Fun(Op, {UserData,Parameters...})</code>, where <code class="inline">Op</code> is the operation name,
<code class="inline">UserData</code> is the term passed as the first argument to <code class="inline">init/1</code> and
<code class="inline">Parameters...</code> are the data added by the tar function to be passed down to the
storage handling function.</p><p>Parameter <code class="inline">UserData</code> is typically the result of opening a low-level structure
like a file descriptor or an SFTP channel id. The different <code class="inline">Fun</code> clauses
operate on that very term.</p><p>The following are the fun clauses parameter lists:</p><ul><li><p><strong><code class="inline">(write, {UserData,DataToWrite})</code></strong> - Writes term <code class="inline">DataToWrite</code> using
<code class="inline">UserData</code>.</p></li><li><p><strong><code class="inline">(close, UserData)</code></strong> - Closes the access.</p></li><li><p><strong><code class="inline">(read2, {UserData,Size})</code></strong> - Reads using <code class="inline">UserData</code> but only <code class="inline">Size</code> bytes.
Notice that there is only an arity-2 read function, not an arity-1 function.</p></li><li><p><strong><code class="inline">(position,{UserData,Position})</code></strong> - Sets the position of <code class="inline">UserData</code> as
defined for files in <a href="../../apps/kernel/file.html#position/2"><code class="inline">file:position/2</code></a></p></li></ul><p><em>Example:</em></p><p>The following is a complete <code class="inline">Fun</code> parameter for reading and writing on files
using the <a href="../../apps/kernel/file.html"><code class="inline">file</code></a> module:</p><pre><code class="makeup erlang" translate="no"><span class="n">ExampleFun</span><span class="w"> </span><span class="o">=</span><span class="w">
   </span><span class="nf">fun</span><span class="p" data-group-id="2346138808-1">(</span><span class="ss">write</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2346138808-2">{</span><span class="n">Fd</span><span class="p">,</span><span class="n">Data</span><span class="p" data-group-id="2346138808-2">}</span><span class="p" data-group-id="2346138808-1">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">  </span><span class="nc">file</span><span class="p">:</span><span class="nf">write</span><span class="p" data-group-id="2346138808-3">(</span><span class="n">Fd</span><span class="p">,</span><span class="w"> </span><span class="n">Data</span><span class="p" data-group-id="2346138808-3">)</span><span class="p">;</span><span class="w">
      </span><span class="p" data-group-id="2346138808-4">(</span><span class="ss">position</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2346138808-5">{</span><span class="n">Fd</span><span class="p">,</span><span class="n">Pos</span><span class="p" data-group-id="2346138808-5">}</span><span class="p" data-group-id="2346138808-4">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">file</span><span class="p">:</span><span class="nf">position</span><span class="p" data-group-id="2346138808-6">(</span><span class="n">Fd</span><span class="p">,</span><span class="w"> </span><span class="n">Pos</span><span class="p" data-group-id="2346138808-6">)</span><span class="p">;</span><span class="w">
      </span><span class="p" data-group-id="2346138808-7">(</span><span class="ss">read2</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2346138808-8">{</span><span class="n">Fd</span><span class="p">,</span><span class="n">Size</span><span class="p" data-group-id="2346138808-8">}</span><span class="p" data-group-id="2346138808-7">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">file</span><span class="p">:</span><span class="nf">read</span><span class="p" data-group-id="2346138808-9">(</span><span class="n">Fd</span><span class="p">,</span><span class="w"> </span><span class="n">Size</span><span class="p" data-group-id="2346138808-9">)</span><span class="p">;</span><span class="w">
      </span><span class="p" data-group-id="2346138808-10">(</span><span class="ss">close</span><span class="p">,</span><span class="w"> </span><span class="n">Fd</span><span class="p" data-group-id="2346138808-10">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">file</span><span class="p">:</span><span class="nf">close</span><span class="p" data-group-id="2346138808-11">(</span><span class="n">Fd</span><span class="p" data-group-id="2346138808-11">)</span><span class="w">
   </span><span class="k">end</span></code></pre><p>Here <code class="inline">Fd</code> was specified to function <a href="#init/3"><code class="inline">init/3</code></a> as:</p><pre><code class="makeup erlang" translate="no"><span class="p" data-group-id="6255633206-1">{</span><span class="ss">ok</span><span class="p">,</span><span class="n">Fd</span><span class="p" data-group-id="6255633206-1">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">file</span><span class="p">:</span><span class="nf">open</span><span class="p" data-group-id="6255633206-2">(</span><span class="n">Name</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="p">.</span><span class="p">.</span><span class="p" data-group-id="6255633206-2">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="6255633206-3">{</span><span class="ss">ok</span><span class="p">,</span><span class="n">TarDesc</span><span class="p" data-group-id="6255633206-3">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">erl_tar</span><span class="p">:</span><span class="nf">init</span><span class="p" data-group-id="6255633206-4">(</span><span class="n">Fd</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6255633206-5">[</span><span class="ss">write</span><span class="p" data-group-id="6255633206-5">]</span><span class="p">,</span><span class="w"> </span><span class="n">ExampleFun</span><span class="p" data-group-id="6255633206-4">)</span><span class="p">,</span></code></pre><p><code class="inline">TarDesc</code> is then used:</p><pre><code class="makeup erlang" translate="no"><span class="nc">erl_tar</span><span class="p">:</span><span class="nf">add</span><span class="p" data-group-id="8286169536-1">(</span><span class="n">TarDesc</span><span class="p">,</span><span class="w"> </span><span class="n">SomeValueIwantToAdd</span><span class="p">,</span><span class="w"> </span><span class="n">FileNameInTarFile</span><span class="p" data-group-id="8286169536-1">)</span><span class="p">,</span><span class="w">
</span><span class="p">.</span><span class="p">.</span><span class="p">.</span><span class="p">,</span><span class="w">
</span><span class="nc">erl_tar</span><span class="p">:</span><span class="nf">close</span><span class="p" data-group-id="8286169536-2">(</span><span class="n">TarDesc</span><span class="p" data-group-id="8286169536-2">)</span></code></pre><p>When the <code class="inline">erl_tar</code> core wants to, for example, write a piece of <code class="inline">Data</code>, it would
call <code class="inline">ExampleFun(write, {UserData,Data})</code>.</p><section role="note" class="admonition info"><h4 class="admonition-title info">Note</h4><p>This example with the <code class="inline">file</code> module operations is not necessary to use
directly, as that is what function <a href="#open/2"><code class="inline">open/2</code></a> in principle does.</p></section><section role="note" class="admonition warning"><h4 class="admonition-title warning">Warning</h4><p>The <code class="inline">TarDescriptor</code> term is not a file descriptor. You are advised not to rely
on the specific contents of this term, as it can change in future Erlang/OTP
releases when more features are added to this module.</p></section>
  </section>
</section>
<section class="detail" id="open/2">

  <div class="detail-header">
    <a href="#open/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">open/2</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-27.3.4.6/lib/stdlib/src/erl_tar.erl#L564" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> open(Open :: <a href="#t:open_type/0">open_type</a>(), [write | compressed | cooked]) ->
              {ok, <a href="#t:tar_descriptor/0">tar_descriptor</a>()} | {error, <a href="../../apps/erts/erlang.html#t:term/0">term</a>()}.</pre>

      </div>

<p>Creates a tar file for writing (any existing file with the same name is
truncated).</p><p>By convention, the name of a tar file is to end in &quot;<code class="inline">.tar</code>&quot;. To abide to the
convention, add &quot;<code class="inline">.tar</code>&quot; to the name.</p><p>Except for the <code class="inline">write</code> atom, the following atoms can be added to <code class="inline">OpenModeList</code>:</p><ul><li><p><strong><code class="inline">compressed</code></strong> - The entire tar file is compressed, as if it has been run
through the <code class="inline">gzip</code> program. To abide to the convention that a compressed tar
file is to end in &quot;<code class="inline">.tar.gz</code>&quot; or &quot;<code class="inline">.tgz</code>&quot;, add the appropriate extension.</p></li><li><p><strong><code class="inline">cooked</code></strong> - By default, the tar file is opened in <code class="inline">raw</code> mode, which is
faster but does not allow a remote (Erlang) file server to be used. Adding
<code class="inline">cooked</code> to the mode list overrides the default and opens the tar file without
option <code class="inline">raw</code>.</p></li></ul><p>To add one file at the time into an opened tar file, use function
<a href="#add/3"><code class="inline">add/3,4</code></a>. When you are finished adding files, use function <a href="#close/1"><code class="inline">close/1</code></a>
to close the tar file.</p><section role="note" class="admonition warning"><h4 class="admonition-title warning">Warning</h4><p>The <code class="inline">compressed</code> and <code class="inline">cooked</code> flags are invalid when passing a file descriptor
with <code class="inline">{file,Fd}</code>. The file must already be opened with the appropriate flags.</p></section><section role="note" class="admonition warning"><h4 class="admonition-title warning">Warning</h4><p>The <code class="inline">TarDescriptor</code> term is not a file descriptor. You are advised not to rely
on the specific contents of this term, as it can change in future Erlang/OTP
releases when more features are added to this module.</p></section>
  </section>
</section>
<section class="detail" id="t/1">

  <div class="detail-header">
    <a href="#t/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">t(Name)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-27.3.4.6/lib/stdlib/src/erl_tar.erl#L451" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> t(<a href="../../apps/kernel/file.html#t:filename/0">file:filename</a>()) -> ok | {error, <a href="../../apps/erts/erlang.html#t:term/0">term</a>()}.</pre>

      </div>

<p>Prints the names of all files in the tar file <code class="inline">Name</code> to the Erlang shell
(similar to &quot;<code class="inline">tar t</code>&quot;).</p>
  </section>
</section>
<section class="detail" id="table/1">

  <div class="detail-header">
    <a href="#table/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">table(Open)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-27.3.4.6/lib/stdlib/src/erl_tar.erl#L399" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> table(Open :: <a href="#t:open_type/0">open_type</a>()) -> {ok, [<a href="#t:name_in_archive/0">name_in_archive</a>()]} | {error, <a href="../../apps/erts/erlang.html#t:term/0">term</a>()}.</pre>

      </div>

<p>Equivalent to <a href="#table/2"><code class="inline">table(Open, [])</code></a>.</p>
  </section>
</section>
<section class="detail" id="table/2">

  <div class="detail-header">
    <a href="#table/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">table(Name, Opts)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-27.3.4.6/lib/stdlib/src/erl_tar.erl#L407" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> table(Open :: <a href="#t:open_type/0">open_type</a>(), [compressed | verbose | cooked]) ->
               {ok, [<a href="#t:name_in_archive/0">name_in_archive</a>() | <a href="#t:tar_entry/0">tar_entry</a>()]} | {error, <a href="../../apps/erts/erlang.html#t:term/0">term</a>()}.</pre>

      </div>

<p>Retrieves the names of all files in the tar file <code class="inline">Name</code>.</p>
  </section>
</section>
<section class="detail" id="tt/1">

  <div class="detail-header">
    <a href="#tt/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">tt(Name)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-27.3.4.6/lib/stdlib/src/erl_tar.erl#L465" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> tt(<a href="#t:open_type/0">open_type</a>()) -> ok | {error, <a href="../../apps/erts/erlang.html#t:term/0">term</a>()}.</pre>

      </div>

<p>Prints names and information about all files in the tar file <code class="inline">Name</code> to the
Erlang shell (similar to &quot;<code class="inline">tar tv</code>&quot;).</p>
  </section>
</section>

    </div>
  </section>

    <footer class="footer">
      <p>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="stdlib.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.37.3) for the

          <a href="https://erlang.org" title="Erlang" target="_blank" translate="no">Erlang programming language</a>

      </p>
<p>Copyright © 1996-2025 <a href="https://www.ericsson.com">Ericsson AB</a></p>
    </footer>
  </div>
</main>
</div>
  <script defer src="https://cdn.jsdelivr.net/npm/mermaid@11.4.1/dist/mermaid.min.js"></script>
  <script>
  let initialized = false;

  window.addEventListener("exdoc:loaded", () => {
      if (!initialized) {
      mermaid.initialize({
          startOnLoad: false,
          theme: document.body.className.includes("dark") ? "dark" : "default"
      });
      initialized = true;
      }

      let id = 0;
      for (const codeEl of document.querySelectorAll("pre code.mermaid")) {
      const preEl = codeEl.parentElement;
      const graphDefinition = codeEl.textContent;
      const graphEl = document.createElement("div");
      const graphId = "mermaid-graph-" + id++;
      mermaid.render(graphId, graphDefinition).then(({svg, bindFunctions}) => {
          graphEl.innerHTML = svg;
          bindFunctions?.(graphEl);
          preEl.insertAdjacentElement("afterend", graphEl);
          preEl.remove();
      });
      }
  });
  </script>

  </body>
</html>
