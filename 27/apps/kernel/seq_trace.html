<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.37.3">
    <meta name="project" content="kernel v10.2.7.3">


<meta name="major-vsn" content="27">
<meta name="exdoc:full-text-search-url" content="/doc/search.html?v=27&q=">
<link rel="canonical" href="https://www.erlang.org/doc/apps/kernel/seq_trace.html" />
    <title>seq_trace â€” kernel v10.2.7.3</title>

    <link rel="stylesheet" href="dist/html-erlang-FDBURIED.css" />

    <script defer src="dist/sidebar_items-960DC434.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-ALU6OERS.js"></script>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="../../index.html" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="kernel" />
        </a>

      <div>
        <a href="../../index.html" class="sidebar-projectName" translate="no">
kernel
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v10.2.7.3
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras=""></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-module" id="main" data-type="modules">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of kernel</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search" tabindex="-1">
            <i class="ri-search-2-line ri-lg" aria-hidden="true"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>
      <span translate="no">seq_trace</span> 
      <small class="app-vsn" translate="no">(kernel v10.2.7.3)</small>

    </h1>

      <a href="https://github.com/erlang/otp/blob/OTP-27.3.4.6/lib/kernel/src/seq_trace.erl#L21" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

  </div>


    <section id="moduledoc">
<p>Sequential tracing of information transfers.</p><p>Sequential tracing makes it possible to trace information flows between
processes resulting from one initial transfer of information. Sequential tracing
is independent of the ordinary tracing in Erlang, which is controlled by the
<a href="../../apps/erts/erlang.html#trace/3"><code class="inline">erlang:trace/3</code></a> BIF. For more information about what sequential tracing is and
how it can be used, see section <a href="seq_trace.html#whatis">Sequential Tracing</a>.</p><p><code class="inline">seq_trace</code> provides functions that control all aspects of sequential tracing.
There are functions for activation, deactivation, inspection, and for collection
of the trace output.</p><h2 id="module-trace-messages-sent-to-the-system-tracer" class="section-heading">
  <a href="#module-trace-messages-sent-to-the-system-tracer" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Trace Messages Sent to the System Tracer</span>
</h2>
<p>The format of the messages is one of the following, depending on if flag
<code class="inline">timestamp</code> of the trace token is set to <code class="inline">true</code> or <code class="inline">false</code>:</p><pre><code class="text">{seq_trace, Label, SeqTraceInfo, TimeStamp}</code></pre><p>or</p><pre><code class="text">{seq_trace, Label, SeqTraceInfo}</code></pre><p>Where:</p><pre><code class="makeup erlang" translate="no"><span class="n">Label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">int</span><span class="p" data-group-id="4856149728-1">(</span><span class="p" data-group-id="4856149728-1">)</span><span class="w">
</span><span class="n">TimeStamp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="4856149728-2">{</span><span class="n">Seconds</span><span class="p">,</span><span class="w"> </span><span class="n">Milliseconds</span><span class="p">,</span><span class="w"> </span><span class="n">Microseconds</span><span class="p" data-group-id="4856149728-2">}</span><span class="w">
  </span><span class="n">Seconds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Milliseconds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Microseconds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">int</span><span class="p" data-group-id="4856149728-3">(</span><span class="p" data-group-id="4856149728-3">)</span></code></pre><p><code class="inline">SeqTraceInfo</code> can have the following formats:</p><ul><li><p><strong><code class="inline">{send, Serial, From, To, Message}</code></strong> - Used when a process <code class="inline">From</code> with its
trace token flag <code class="inline">send</code> set to <code class="inline">true</code> has sent information. <code class="inline">To</code> may be a
process identifier, a registered name on a node represented as
<code class="inline">{NameAtom, NodeAtom}</code>, or a node name represented as an atom. <code class="inline">From</code> may be a
process identifier or a node name represented as an atom. <code class="inline">Message</code> contains
the information passed along in this information transfer. If the transfer is
done via message passing, it is the actual message.</p></li><li><p><strong><code class="inline">{'receive', Serial, From, To, Message}</code></strong> - Used when a process <code class="inline">To</code>
receives information with a trace token that has flag <code class="inline">'receive'</code> set to
<code class="inline">true</code>. <code class="inline">To</code> may be a process identifier, or a node name represented as an
atom. <code class="inline">From</code> may be a process identifier or a node name represented as an
atom. <code class="inline">Message</code> contains the information passed along in this information
transfer. If the transfer is done via message passing, it is the actual
message.</p></li><li><p><strong><code class="inline">{print, Serial, From, _, Info}</code></strong> - Used when a process <code class="inline">From</code> has called
<code class="inline">seq_trace:print(Label, TraceInfo)</code> and has a trace token with flag <code class="inline">print</code>
set to <code class="inline">true</code>, and <code class="inline">label</code> set to <code class="inline">Label</code>.</p></li></ul><p><code class="inline">Serial</code> is a tuple <code class="inline">{PreviousSerial, ThisSerial}</code>, where:</p><ul><li>Integer <code class="inline">PreviousSerial</code> denotes the serial counter passed in the last
received information that carried a trace token. If the process is the first
in a new sequential trace, <code class="inline">PreviousSerial</code> is set to the value of the process
internal &quot;trace clock&quot;.</li><li>Integer <code class="inline">ThisSerial</code> is the serial counter that a process sets on outgoing
messages. It is based on the process internal &quot;trace clock&quot;, which is
incremented by one before it is attached to the trace token in the message.</li></ul><p><a href="" id="whatis"></a></p><h2 id="module-sequential-tracing" class="section-heading">
  <a href="#module-sequential-tracing" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Sequential Tracing</span>
</h2>
<p>Sequential tracing is a way to trace a sequence of information transfers between
different local or remote processes, where the sequence is initiated by a single
transfer. The typical information transfer is an ordinary Erlang message passed
between two processes, but information is transferred also in other ways. In
short, it works as follows:</p><p>Each process has a <em>trace token</em>, which can be empty or not empty. When not
empty, the trace token can be seen as the tuple <code class="inline">{Label, Flags, Serial, From}</code>.
The trace token is passed invisibly when information is passed between
processes. In most cases the information is passed in ordinary messages between
processes, but information is also passed between processes by other means. For
example, by spawning a new process. An information transfer between two
processes is represented by a send event and a receive event regardless of how
it is passed.</p><p>To start a sequential trace, the user must explicitly set the trace token in the
process that will send the first information in a sequence.</p><p>The trace token of a process is set each time the process receives information.
This is typically when the process matches a message in a receive statement,
according to the trace token carried by the received message, empty or not.</p><p>On each Erlang node, a process can be set as the <em>system tracer</em>. This process
will receive trace messages each time information with a trace token is sent or
received (if the trace token flag <code class="inline">send</code> or <code class="inline">'receive'</code> is set). The system
tracer can then print each trace event, write it to a file, or whatever
suitable.</p><section role="note" class="admonition info"><h4 class="admonition-title info">Note</h4><p>The system tracer only receives those trace events that occur locally within
the Erlang node. To get the whole picture of a sequential trace, involving
processes on many Erlang nodes, the output from the system tracer on each
involved node must be merged (offline).</p></section><p>The following sections describe sequential tracing and its most fundamental
concepts.</p><h2 id="module-different-information-transfers" class="section-heading">
  <a href="#module-different-information-transfers" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Different Information Transfers</span>
</h2>
<p>Information flows between processes in a lot of different ways. Not all flows of
information will be covered by sequential tracing. One example is information
passed via ETS tables. Below is a list of information paths that are covered by
sequential tracing:</p><ul><li><p><strong>Message Passing</strong> - All ordinary messages passed between Erlang processes.</p></li><li><p><strong>Exit signals</strong> - An exit signal is represented as an <code class="inline">{'EXIT', Pid, Reason}</code>
tuple.</p></li><li><p><strong>Process Spawn</strong> - A process spawn is represented as multiple information
transfers. At least one spawn request and one spawn reply. The actual amount
of information transfers depends on what type of spawn it is and may also
change in future implementations. Note that this is more or less an internal
protocol that you are peeking at. The spawn request will be represented as a
tuple with the first element containing the atom <code class="inline">spawn_request</code>, but this is
more or less all that you can depend on.</p></li></ul><section role="note" class="admonition info"><h4 class="admonition-title info">Note</h4><p>If you do ordinary <code class="inline">send</code> or <code class="inline">receive</code> trace on the system, you will only see
ordinary message passing, not the other information transfers listed above.</p></section><section role="note" class="admonition info"><h4 class="admonition-title info">Note</h4><p>When a send event and corresponding receive event do not both correspond to
ordinary Erlang messages, the <code class="inline">Message</code> part of the trace messages may not be
identical. This since all information not necessarily are available when
generating the trace messages.</p></section><h2 id="module-trace-token" class="section-heading">
  <a href="#module-trace-token" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Trace Token</span>
</h2>
<p>Each process has a current trace token which is &quot;invisibly&quot; passed from the
parent process on creation of the process.</p><p>The current token of a process is set in one of the following two ways:</p><ul><li>Explicitly by the process itself, through a call to <code class="inline">seq_trace:set_token/1,2</code></li><li>When information is received. This is typically when a received message is
matched out in a receive expression, but also when information is received in
other ways.</li></ul><p>In both cases, the current token is set. In particular, if the token of a
received message is empty, the current token of the process is set to empty.</p><p>A trace token contains a label and a set of flags. Both the label and the flags
are set in both alternatives above.</p><h2 id="module-serial" class="section-heading">
  <a href="#module-serial" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Serial</span>
</h2>
<p>The trace token contains a component called <code class="inline">serial</code>. It consists of two
integers, <code class="inline">Previous</code> and <code class="inline">Current</code>. The purpose is to uniquely identify each
traced event within a trace sequence, as well as to order the messages
chronologically and in the different branches, if any.</p><p>The algorithm for updating <code class="inline">Serial</code> can be described as follows:</p><p>Let each process have two counters, <code class="inline">prev_cnt</code> and <code class="inline">curr_cnt</code>, both are set to
<code class="inline">0</code> when a process is created outside of a trace sequence. The counters are
updated at the following occasions:</p><ul><li><p><em>When the process is about to pass along information to another process and
the trace token is not empty.</em> This typically occurs when sending a message,
but also, for example, when spawning another process.</p><p>Let the serial of the trace token be <code class="inline">tprev</code> and <code class="inline">tcurr</code>.</p><pre><code class="text">curr_cnt := curr_cnt + 1
tprev := prev_cnt
tcurr := curr_cnt</code></pre><p>The trace token with <code class="inline">tprev</code> and <code class="inline">tcurr</code> is then passed along with the
information passed to the other process.</p></li><li><p><em>When the process calls</em> <code class="inline">seq_trace:print(Label, Info)</code>, <code class="inline">Label</code> <em>matches the
label part of the trace token and the trace token print flag is <code class="inline">true</code>.</em></p><p>The algorithm is the same as for send above.</p></li><li><p><em>When information is received that also contains a non-empty trace token. For
example, when a message is matched out in a receive expression, or when a new
process is spawned.</em></p><p>The process trace token is set to the trace token from the message.</p><p>Let the serial of the trace token be <code class="inline">tprev</code> and <code class="inline">tcurr</code>.</p><pre><code class="text">if (curr_cnt &lt; tcurr )
   curr_cnt := tcurr
prev_cnt := tcurr</code></pre></li></ul><p><code class="inline">curr_cnt</code> of a process is incremented each time the process is involved in a
sequential trace. The counter can reach its limit (27 bits) if a process is very
long-lived and is involved in much sequential tracing. If the counter overflows,
the serial for ordering of the trace events cannot be used. To prevent the
counter from overflowing in the middle of a sequential trace, function
<a href="#reset_trace/0"><code class="inline">seq_trace:reset_trace/0</code></a> can be called to reset <code class="inline">prev_cnt</code> and <code class="inline">curr_cnt</code> of
all processes in the Erlang node. This function also sets all trace tokens in
processes and their message queues to empty, and thus stops all ongoing
sequential tracing.</p><h2 id="module-performance-considerations" class="section-heading">
  <a href="#module-performance-considerations" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Performance Considerations</span>
</h2>
<p>The performance degradation for a system that is enabled for sequential tracing
is negligible as long as no tracing is activated. When tracing is activated,
there is an extra cost for each traced message, but all other messages are
unaffected.</p><h2 id="module-ports" class="section-heading">
  <a href="#module-ports" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Ports</span>
</h2>
<p>Sequential tracing is not performed across ports.</p><p>If the user for some reason wants to pass the trace token to a port, this must
be done manually in the code of the port controlling process. The port
controlling processes have to check the appropriate sequential trace settings
(as obtained from <a href="#get_token/1"><code class="inline">seq_trace:get_token/1</code></a>) and include trace information in the
message data sent to their respective ports.</p><p>Similarly, for messages received from a port, a port controller has to retrieve
trace-specific information, and set appropriate sequential trace flags through
calls to <a href="#set_token/2"><code class="inline">seq_trace:set_token/2</code></a>.</p><h2 id="module-distribution" class="section-heading">
  <a href="#module-distribution" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Distribution</span>
</h2>
<p>Sequential tracing between nodes is performed transparently. This applies to
C-nodes built with <code class="inline">Erl_Interface</code> too. A C-node built with <code class="inline">Erl_Interface</code> only
maintains one trace token, which means that the C-node appears as one process
from the sequential tracing point of view.</p><h2 id="module-example-of-use" class="section-heading">
  <a href="#module-example-of-use" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Example of Use</span>
</h2>
<p>This example gives a rough idea of how the new primitives can be used and what
kind of output it produces.</p><p>Assume that you have an initiating process with <code class="inline">Pid == &lt;0.30.0&gt;</code> like this:</p><pre><code class="makeup erlang" translate="no"><span class="p">-</span><span class="na">module</span><span class="p" data-group-id="8642005127-1">(</span><span class="ss">seqex</span><span class="p" data-group-id="8642005127-1">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">compile</span><span class="p" data-group-id="8642005127-2">(</span><span class="ss">export_all</span><span class="p" data-group-id="8642005127-2">)</span><span class="p">.</span><span class="w">

</span><span class="nf">loop</span><span class="p" data-group-id="8642005127-3">(</span><span class="n">Port</span><span class="p" data-group-id="8642005127-3">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="k">receive</span><span class="w">
        </span><span class="p" data-group-id="8642005127-4">{</span><span class="n">Port</span><span class="p">,</span><span class="n">Message</span><span class="p" data-group-id="8642005127-4">}</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
            </span><span class="nc">seq_trace</span><span class="p">:</span><span class="nf">set_token</span><span class="p" data-group-id="8642005127-5">(</span><span class="ss">label</span><span class="p">,</span><span class="mi">17</span><span class="p" data-group-id="8642005127-5">)</span><span class="p">,</span><span class="w">
            </span><span class="nc">seq_trace</span><span class="p">:</span><span class="nf">set_token</span><span class="p" data-group-id="8642005127-6">(</span><span class="ss">&#39;receive&#39;</span><span class="p">,</span><span class="ss">true</span><span class="p" data-group-id="8642005127-6">)</span><span class="p">,</span><span class="w">
            </span><span class="nc">seq_trace</span><span class="p">:</span><span class="nf">set_token</span><span class="p" data-group-id="8642005127-7">(</span><span class="ss">print</span><span class="p">,</span><span class="ss">true</span><span class="p" data-group-id="8642005127-7">)</span><span class="p">,</span><span class="w">
            </span><span class="nc">seq_trace</span><span class="p">:</span><span class="nf">print</span><span class="p" data-group-id="8642005127-8">(</span><span class="mi">17</span><span class="p">,</span><span class="s">&quot;**** Trace Started ****&quot;</span><span class="p" data-group-id="8642005127-8">)</span><span class="p">,</span><span class="w">
            </span><span class="ss">call_server</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="p" data-group-id="8642005127-9">{</span><span class="nf">self</span><span class="p" data-group-id="8642005127-10">(</span><span class="p" data-group-id="8642005127-10">)</span><span class="p">,</span><span class="ss">the_message</span><span class="p" data-group-id="8642005127-9">}</span><span class="p">;</span><span class="w">
        </span><span class="p" data-group-id="8642005127-11">{</span><span class="ss">ack</span><span class="p">,</span><span class="n">Ack</span><span class="p" data-group-id="8642005127-11">}</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
            </span><span class="ss">ok</span><span class="w">
    </span><span class="k">end</span><span class="p">,</span><span class="w">
    </span><span class="nf">loop</span><span class="p" data-group-id="8642005127-12">(</span><span class="n">Port</span><span class="p" data-group-id="8642005127-12">)</span><span class="p">.</span></code></pre><p>And a registered process <code class="inline">call_server</code> with <code class="inline">Pid == &lt;0.31.0&gt;</code> like this:</p><pre><code class="makeup erlang" translate="no"><span class="nf">loop</span><span class="p" data-group-id="4672010971-1">(</span><span class="p" data-group-id="4672010971-1">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="k">receive</span><span class="w">
        </span><span class="p" data-group-id="4672010971-2">{</span><span class="n">PortController</span><span class="p">,</span><span class="n">Message</span><span class="p" data-group-id="4672010971-2">}</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
            </span><span class="n">Ack</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="4672010971-3">{</span><span class="ss">received</span><span class="p">,</span><span class="w"> </span><span class="n">Message</span><span class="p" data-group-id="4672010971-3">}</span><span class="p">,</span><span class="w">
            </span><span class="nc">seq_trace</span><span class="p">:</span><span class="nf">print</span><span class="p" data-group-id="4672010971-4">(</span><span class="mi">17</span><span class="p">,</span><span class="s">&quot;We are here now&quot;</span><span class="p" data-group-id="4672010971-4">)</span><span class="p">,</span><span class="w">
            </span><span class="n">PortController</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="p" data-group-id="4672010971-5">{</span><span class="ss">ack</span><span class="p">,</span><span class="n">Ack</span><span class="p" data-group-id="4672010971-5">}</span><span class="w">
    </span><span class="k">end</span><span class="p">,</span><span class="w">
    </span><span class="nf">loop</span><span class="p" data-group-id="4672010971-6">(</span><span class="p" data-group-id="4672010971-6">)</span><span class="p">.</span></code></pre><p>A possible output from the system's <code class="inline">sequential_tracer</code> can be like this:</p><pre><code class="makeup erlang" translate="no"><span class="mi">17</span><span class="p">:</span><span class="o">&lt;</span><span class="mf">0.30</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Info</span><span class="w"> </span><span class="p" data-group-id="9224153214-1">{</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p" data-group-id="9224153214-1">}</span><span class="w"> </span><span class="n">WITH</span><span class="w">
</span><span class="s">&quot;**** Trace Started ****&quot;</span><span class="w">
</span><span class="mi">17</span><span class="p">:</span><span class="o">&lt;</span><span class="mf">0.31</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Received</span><span class="w"> </span><span class="p" data-group-id="9224153214-2">{</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p" data-group-id="9224153214-2">}</span><span class="w"> </span><span class="n">FROM</span><span class="w"> </span><span class="o">&lt;</span><span class="mf">0.30</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="w"> </span><span class="n">WITH</span><span class="w">
</span><span class="p" data-group-id="9224153214-3">{</span><span class="o">&lt;</span><span class="mf">0.30</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p">,</span><span class="ss">the_message</span><span class="p" data-group-id="9224153214-3">}</span><span class="w">
</span><span class="mi">17</span><span class="p">:</span><span class="o">&lt;</span><span class="mf">0.31</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Info</span><span class="w"> </span><span class="p" data-group-id="9224153214-4">{</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p" data-group-id="9224153214-4">}</span><span class="w"> </span><span class="n">WITH</span><span class="w">
</span><span class="s">&quot;We are here now&quot;</span><span class="w">
</span><span class="mi">17</span><span class="p">:</span><span class="o">&lt;</span><span class="mf">0.30</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Received</span><span class="w"> </span><span class="p" data-group-id="9224153214-5">{</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p" data-group-id="9224153214-5">}</span><span class="w"> </span><span class="n">FROM</span><span class="w"> </span><span class="o">&lt;</span><span class="mf">0.31</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="w"> </span><span class="n">WITH</span><span class="w">
</span><span class="p" data-group-id="9224153214-6">{</span><span class="ss">ack</span><span class="p">,</span><span class="p" data-group-id="9224153214-7">{</span><span class="ss">received</span><span class="p">,</span><span class="ss">the_message</span><span class="p" data-group-id="9224153214-7">}</span><span class="p" data-group-id="9224153214-6">}</span></code></pre><p>The implementation of a system tracer process that produces this printout can
look like this:</p><pre><code class="makeup erlang" translate="no"><span class="nf">tracer</span><span class="p" data-group-id="9199219805-1">(</span><span class="p" data-group-id="9199219805-1">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="k">receive</span><span class="w">
        </span><span class="p" data-group-id="9199219805-2">{</span><span class="ss">seq_trace</span><span class="p">,</span><span class="n">Label</span><span class="p">,</span><span class="n">TraceInfo</span><span class="p" data-group-id="9199219805-2">}</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
           </span><span class="nf">print_trace</span><span class="p" data-group-id="9199219805-3">(</span><span class="n">Label</span><span class="p">,</span><span class="n">TraceInfo</span><span class="p">,</span><span class="ss">false</span><span class="p" data-group-id="9199219805-3">)</span><span class="p">;</span><span class="w">
        </span><span class="p" data-group-id="9199219805-4">{</span><span class="ss">seq_trace</span><span class="p">,</span><span class="n">Label</span><span class="p">,</span><span class="n">TraceInfo</span><span class="p">,</span><span class="n">Ts</span><span class="p" data-group-id="9199219805-4">}</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
           </span><span class="nf">print_trace</span><span class="p" data-group-id="9199219805-5">(</span><span class="n">Label</span><span class="p">,</span><span class="n">TraceInfo</span><span class="p">,</span><span class="n">Ts</span><span class="p" data-group-id="9199219805-5">)</span><span class="p">;</span><span class="w">
        </span><span class="p">_</span><span class="n">Other</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="ss">ignore</span><span class="w">
    </span><span class="k">end</span><span class="p">,</span><span class="w">
    </span><span class="nf">tracer</span><span class="p" data-group-id="9199219805-6">(</span><span class="p" data-group-id="9199219805-6">)</span><span class="p">.</span><span class="w">

</span><span class="nf">print_trace</span><span class="p" data-group-id="9199219805-7">(</span><span class="n">Label</span><span class="p">,</span><span class="n">TraceInfo</span><span class="p">,</span><span class="ss">false</span><span class="p" data-group-id="9199219805-7">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nc">io</span><span class="p">:</span><span class="nf">format</span><span class="p" data-group-id="9199219805-8">(</span><span class="s">&quot;</span><span class="si">~p</span><span class="s">:&quot;</span><span class="p">,</span><span class="p" data-group-id="9199219805-9">[</span><span class="n">Label</span><span class="p" data-group-id="9199219805-9">]</span><span class="p" data-group-id="9199219805-8">)</span><span class="p">,</span><span class="w">
    </span><span class="nf">print_trace</span><span class="p" data-group-id="9199219805-10">(</span><span class="n">TraceInfo</span><span class="p" data-group-id="9199219805-10">)</span><span class="p">;</span><span class="w">
</span><span class="nf">print_trace</span><span class="p" data-group-id="9199219805-11">(</span><span class="n">Label</span><span class="p">,</span><span class="n">TraceInfo</span><span class="p">,</span><span class="n">Ts</span><span class="p" data-group-id="9199219805-11">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nc">io</span><span class="p">:</span><span class="nf">format</span><span class="p" data-group-id="9199219805-12">(</span><span class="s">&quot;</span><span class="si">~p</span><span class="s"> </span><span class="si">~p</span><span class="s">:&quot;</span><span class="p">,</span><span class="p" data-group-id="9199219805-13">[</span><span class="n">Label</span><span class="p">,</span><span class="n">Ts</span><span class="p" data-group-id="9199219805-13">]</span><span class="p" data-group-id="9199219805-12">)</span><span class="p">,</span><span class="w">
    </span><span class="nf">print_trace</span><span class="p" data-group-id="9199219805-14">(</span><span class="n">TraceInfo</span><span class="p" data-group-id="9199219805-14">)</span><span class="p">.</span><span class="w">

</span><span class="nf">print_trace</span><span class="p" data-group-id="9199219805-15">(</span><span class="p" data-group-id="9199219805-16">{</span><span class="ss">print</span><span class="p">,</span><span class="n">Serial</span><span class="p">,</span><span class="n">From</span><span class="p">,</span><span class="p">_</span><span class="p">,</span><span class="n">Info</span><span class="p" data-group-id="9199219805-16">}</span><span class="p" data-group-id="9199219805-15">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nc">io</span><span class="p">:</span><span class="nf">format</span><span class="p" data-group-id="9199219805-17">(</span><span class="s">&quot;</span><span class="si">~p</span><span class="s"> Info </span><span class="si">~p</span><span class="s"> WITH</span><span class="si">~n</span><span class="si">~p</span><span class="si">~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9199219805-18">[</span><span class="n">From</span><span class="p">,</span><span class="n">Serial</span><span class="p">,</span><span class="n">Info</span><span class="p" data-group-id="9199219805-18">]</span><span class="p" data-group-id="9199219805-17">)</span><span class="p">;</span><span class="w">
</span><span class="nf">print_trace</span><span class="p" data-group-id="9199219805-19">(</span><span class="p" data-group-id="9199219805-20">{</span><span class="ss">&#39;receive&#39;</span><span class="p">,</span><span class="n">Serial</span><span class="p">,</span><span class="n">From</span><span class="p">,</span><span class="n">To</span><span class="p">,</span><span class="n">Message</span><span class="p" data-group-id="9199219805-20">}</span><span class="p" data-group-id="9199219805-19">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nc">io</span><span class="p">:</span><span class="nf">format</span><span class="p" data-group-id="9199219805-21">(</span><span class="s">&quot;</span><span class="si">~p</span><span class="s"> Received </span><span class="si">~p</span><span class="s"> FROM </span><span class="si">~p</span><span class="s"> WITH</span><span class="si">~n</span><span class="si">~p</span><span class="si">~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w">
              </span><span class="p" data-group-id="9199219805-22">[</span><span class="n">To</span><span class="p">,</span><span class="n">Serial</span><span class="p">,</span><span class="n">From</span><span class="p">,</span><span class="n">Message</span><span class="p" data-group-id="9199219805-22">]</span><span class="p" data-group-id="9199219805-21">)</span><span class="p">;</span><span class="w">
</span><span class="nf">print_trace</span><span class="p" data-group-id="9199219805-23">(</span><span class="p" data-group-id="9199219805-24">{</span><span class="nb">send</span><span class="p">,</span><span class="n">Serial</span><span class="p">,</span><span class="n">From</span><span class="p">,</span><span class="n">To</span><span class="p">,</span><span class="n">Message</span><span class="p" data-group-id="9199219805-24">}</span><span class="p" data-group-id="9199219805-23">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nc">io</span><span class="p">:</span><span class="nf">format</span><span class="p" data-group-id="9199219805-25">(</span><span class="s">&quot;</span><span class="si">~p</span><span class="s"> Sent </span><span class="si">~p</span><span class="s"> TO </span><span class="si">~p</span><span class="s"> WITH</span><span class="si">~n</span><span class="si">~p</span><span class="si">~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w">
              </span><span class="p" data-group-id="9199219805-26">[</span><span class="n">From</span><span class="p">,</span><span class="n">Serial</span><span class="p">,</span><span class="n">To</span><span class="p">,</span><span class="n">Message</span><span class="p" data-group-id="9199219805-26">]</span><span class="p" data-group-id="9199219805-25">)</span><span class="p">.</span></code></pre><p>The code that creates a process that runs this tracer function and sets that
process as the system tracer can look like this:</p><pre><code class="makeup erlang" translate="no"><span class="nf">start</span><span class="p" data-group-id="4895941072-1">(</span><span class="p" data-group-id="4895941072-1">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="n">Pid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">spawn</span><span class="p" data-group-id="4895941072-2">(</span><span class="o">?</span><span class="n">MODULE</span><span class="p">,</span><span class="ss">tracer</span><span class="p">,</span><span class="p" data-group-id="4895941072-3">[</span><span class="p" data-group-id="4895941072-3">]</span><span class="p" data-group-id="4895941072-2">)</span><span class="p">,</span><span class="w">
    </span><span class="nc">seq_trace</span><span class="p">:</span><span class="nf">set_system_tracer</span><span class="p" data-group-id="4895941072-4">(</span><span class="n">Pid</span><span class="p" data-group-id="4895941072-4">)</span><span class="p">,</span><span class="w"> </span><span class="c1">% set Pid as the system tracer</span><span class="w">
    </span><span class="ss">ok</span><span class="p">.</span></code></pre><p>With a function like <code class="inline">test/0</code>, the whole example can be started:</p><pre><code class="makeup erlang" translate="no"><span class="nf">test</span><span class="p" data-group-id="9527772414-1">(</span><span class="p" data-group-id="9527772414-1">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="n">P</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">spawn</span><span class="p" data-group-id="9527772414-2">(</span><span class="o">?</span><span class="n">MODULE</span><span class="p">,</span><span class="w"> </span><span class="ss">loop</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9527772414-3">[</span><span class="ss">port</span><span class="p" data-group-id="9527772414-3">]</span><span class="p" data-group-id="9527772414-2">)</span><span class="p">,</span><span class="w">
    </span><span class="nf">register</span><span class="p" data-group-id="9527772414-4">(</span><span class="ss">call_server</span><span class="p">,</span><span class="w"> </span><span class="nf">spawn</span><span class="p" data-group-id="9527772414-5">(</span><span class="o">?</span><span class="n">MODULE</span><span class="p">,</span><span class="w"> </span><span class="ss">loop</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9527772414-6">[</span><span class="p" data-group-id="9527772414-6">]</span><span class="p" data-group-id="9527772414-5">)</span><span class="p" data-group-id="9527772414-4">)</span><span class="p">,</span><span class="w">
    </span><span class="nf">start</span><span class="p" data-group-id="9527772414-7">(</span><span class="p" data-group-id="9527772414-7">)</span><span class="p">,</span><span class="w">
    </span><span class="n">P</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="p" data-group-id="9527772414-8">{</span><span class="ss">port</span><span class="p">,</span><span class="ss">message</span><span class="p" data-group-id="9527772414-8">}</span><span class="p">.</span></code></pre>
    </section>

</div>

  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Summary</span>
    </h1>
<div class="summary-types summary">
  <h2>
    <a href="#types">Types</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:component/0" data-no-tooltip="" translate="no">component()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:flag/0" data-no-tooltip="" translate="no">flag()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:token/0" data-no-tooltip="" translate="no">token()</a>

      </div>

        <div class="summary-synopsis"><p>An opaque term (a tuple) representing a trace token.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:tracer/0" data-no-tooltip="" translate="no">tracer()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:value/0" data-no-tooltip="" translate="no">value()</a>

      </div>

    </div>

</div>
<div class="summary-functions summary">
  <h2>
    <a href="#functions">Functions</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get_system_tracer/0" data-no-tooltip="" translate="no">get_system_tracer()</a>

      </div>

        <div class="summary-synopsis"><p>Returns the pid, port identifier or tracer module of the current system tracer
or <code class="inline">false</code> if no system tracer is activated.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get_token/0" data-no-tooltip="" translate="no">get_token()</a>

      </div>

        <div class="summary-synopsis"><p>Returns the value of the trace token for the calling process. If <code class="inline">[]</code> is
returned, it means that tracing is not active. Any other value returned is the
value of an active trace token. The value returned can be used as input to the
<a href="#set_token/1"><code class="inline">set_token/1</code></a> function.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get_token/1" data-no-tooltip="" translate="no">get_token(Component)</a>

      </div>

        <div class="summary-synopsis"><p>Returns the value of the trace token component <code class="inline">Component</code>. See <a href="#set_token/2"><code class="inline">set_token/2</code></a>
for possible values of <code class="inline">Component</code> and <code class="inline">Val</code>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#print/1" data-no-tooltip="" translate="no">print(TraceInfo)</a>

      </div>

        <div class="summary-synopsis"><p>Puts the Erlang term <code class="inline">TraceInfo</code> into the sequential trace output if the calling
process currently is executing within a sequential trace and the <code class="inline">print</code> flag of
the trace token is set.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#print/2" data-no-tooltip="" translate="no">print(Label, TraceInfo)</a>

      </div>

        <div class="summary-synopsis"><p>Same as <a href="#print/1"><code class="inline">print/1</code></a> with the additional condition that <code class="inline">TraceInfo</code> is
output only if <code class="inline">Label</code> is equal to the label component of the trace token.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#reset_trace/0" data-no-tooltip="" translate="no">reset_trace()</a>

      </div>

        <div class="summary-synopsis"><p>Sets the trace token to empty for all processes on the local node. The process
internal counters used to create the serial of the trace token is set to 0. The
trace token is set to empty for all messages in message queues. Together this
will effectively stop all ongoing sequential tracing in the local node.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#set_system_tracer/1" data-no-tooltip="" translate="no">set_system_tracer(Tracer)</a>

      </div>

        <div class="summary-synopsis"><p>Sets the system tracer. The system tracer can be either a process, port or
<a href="../../apps/erts/erl_tracer.html">tracer module</a> denoted by <code class="inline">Tracer</code>. Returns the previous value
(which can be <code class="inline">false</code> if no system tracer is active).</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#set_token/1" data-no-tooltip="" translate="no">set_token(Token)</a>

      </div>

        <div class="summary-synopsis"><p>Sets the trace token for the calling process to <code class="inline">Token</code>. If <code class="inline">Token == []</code> then
tracing is disabled, otherwise <code class="inline">Token</code> should be an Erlang term returned from
<a href="#get_token/0"><code class="inline">get_token/0</code></a> or <a href="#set_token/1"><code class="inline">set_token/1</code></a>. <a href="#set_token/1"><code class="inline">set_token/1</code></a>
can be used to temporarily exclude message passing from the trace by setting the
trace token to empty like this</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#set_token/2" data-no-tooltip="" translate="no">set_token(Component, Val)</a>

      </div>

        <div class="summary-synopsis"><p>Sets the individual <code class="inline">Component</code> of the trace token to <code class="inline">Val</code>. Returns the
previous value of the component.</p></div>

    </div>

</div>

  </section>


  <section id="types" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#types">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Types</span>
    </h1>
    <div class="types-list">
<section class="detail" id="t:component/0">

  <div class="detail-header">
    <a href="#t:component/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">component()</h1>

        <span class="note">(not exported)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-27.3.4.6/lib/kernel/src/seq_trace.erl#L392" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> component() :: label | serial | <a href="#t:flag/0">flag</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:flag/0">

  <div class="detail-header">
    <a href="#t:flag/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">flag()</h1>

        <span class="note">(not exported)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-27.3.4.6/lib/kernel/src/seq_trace.erl#L390" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> flag() :: send | 'receive' | print | timestamp | monotonic_timestamp | strict_monotonic_timestamp.</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:token/0">

  <div class="detail-header">
    <a href="#t:token/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">token()</h1>

        <span class="note">(not exported)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-27.3.4.6/lib/kernel/src/seq_trace.erl#L401" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> token() :: {<a href="../../apps/erts/erlang.html#t:integer/0">integer</a>(), <a href="../../apps/erts/erlang.html#t:boolean/0">boolean</a>(), _, _, _}.</pre>

      </div>

<p>An opaque term (a tuple) representing a trace token.</p>
  </section>
</section>
<section class="detail" id="t:tracer/0">

  <div class="detail-header">
    <a href="#t:tracer/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">tracer()</h1>

        <span class="note">(not exported)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-27.3.4.6/lib/kernel/src/seq_trace.erl#L556" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> tracer() :: (Pid :: <a href="../../apps/erts/erlang.html#t:pid/0">pid</a>()) | <a href="../../apps/erts/erlang.html#t:port/0">port</a>() | (TracerModule :: {<a href="../../apps/erts/erlang.html#t:module/0">module</a>(), <a href="../../apps/erts/erlang.html#t:term/0">term</a>()}) | false.</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:value/0">

  <div class="detail-header">
    <a href="#t:value/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">value()</h1>

        <span class="note">(not exported)</span>


        <a href="https://github.com/erlang/otp/blob/OTP-27.3.4.6/lib/kernel/src/seq_trace.erl#L393" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> value() ::
          (Label :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()) |
          {Previous :: <a href="../../apps/erts/erlang.html#t:non_neg_integer/0">non_neg_integer</a>(), Current :: <a href="../../apps/erts/erlang.html#t:non_neg_integer/0">non_neg_integer</a>()} |
          (Bool :: <a href="../../apps/erts/erlang.html#t:boolean/0">boolean</a>()).</pre>

      </div>


  </section>
</section>

    </div>
  </section>

  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Functions</span>
    </h1>
    <div class="functions-list">
<section class="detail" id="get_system_tracer/0">

  <div class="detail-header">
    <a href="#get_system_tracer/0" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">get_system_tracer()</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-27.3.4.6/lib/kernel/src/seq_trace.erl#L589" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> get_system_tracer() -> Tracer when Tracer :: <a href="#t:tracer/0">tracer</a>().</pre>

      </div>

<p>Returns the pid, port identifier or tracer module of the current system tracer
or <code class="inline">false</code> if no system tracer is activated.</p>
  </section>
</section>
<section class="detail" id="get_token/0">

  <div class="detail-header">
    <a href="#get_token/0" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">get_token()</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-27.3.4.6/lib/kernel/src/seq_trace.erl#L504" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> get_token() -> [] | <a href="#t:token/0">token</a>().</pre>

      </div>

<p>Returns the value of the trace token for the calling process. If <code class="inline">[]</code> is
returned, it means that tracing is not active. Any other value returned is the
value of an active trace token. The value returned can be used as input to the
<a href="#set_token/1"><code class="inline">set_token/1</code></a> function.</p>
  </section>
</section>
<section class="detail" id="get_token/1">

  <div class="detail-header">
    <a href="#get_token/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">get_token(Component)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-27.3.4.6/lib/kernel/src/seq_trace.erl#L514" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> get_token(Component) -> [] | {Component, Val} when Component :: <a href="#t:component/0">component</a>(), Val :: <a href="#t:value/0">value</a>().</pre>

      </div>

<p>Returns the value of the trace token component <code class="inline">Component</code>. See <a href="#set_token/2"><code class="inline">set_token/2</code></a>
for possible values of <code class="inline">Component</code> and <code class="inline">Val</code>.</p>
  </section>
</section>
<section class="detail" id="print/1">

  <div class="detail-header">
    <a href="#print/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">print(TraceInfo)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-27.3.4.6/lib/kernel/src/seq_trace.erl#L525" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> print(TraceInfo) -> ok when TraceInfo :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Puts the Erlang term <code class="inline">TraceInfo</code> into the sequential trace output if the calling
process currently is executing within a sequential trace and the <code class="inline">print</code> flag of
the trace token is set.</p>
  </section>
</section>
<section class="detail" id="print/2">

  <div class="detail-header">
    <a href="#print/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">print(Label, TraceInfo)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-27.3.4.6/lib/kernel/src/seq_trace.erl#L537" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> print(Label, TraceInfo) -> ok when Label :: <a href="../../apps/erts/erlang.html#t:integer/0">integer</a>(), TraceInfo :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Same as <a href="#print/1"><code class="inline">print/1</code></a> with the additional condition that <code class="inline">TraceInfo</code> is
output only if <code class="inline">Label</code> is equal to the label component of the trace token.</p>
  </section>
</section>
<section class="detail" id="reset_trace/0">

  <div class="detail-header">
    <a href="#reset_trace/0" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">reset_trace()</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-27.3.4.6/lib/kernel/src/seq_trace.erl#L551" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> reset_trace() -> true.</pre>

      </div>

<p>Sets the trace token to empty for all processes on the local node. The process
internal counters used to create the serial of the trace token is set to 0. The
trace token is set to empty for all messages in message queues. Together this
will effectively stop all ongoing sequential tracing in the local node.</p>
  </section>
</section>
<section class="detail" id="set_system_tracer/1">

  <div class="detail-header">
    <a href="#set_system_tracer/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">set_system_tracer(Tracer)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-27.3.4.6/lib/kernel/src/seq_trace.erl#L571" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> set_system_tracer(Tracer) -> OldTracer when Tracer :: <a href="#t:tracer/0">tracer</a>(), OldTracer :: <a href="#t:tracer/0">tracer</a>().</pre>

      </div>

<p>Sets the system tracer. The system tracer can be either a process, port or
<a href="../../apps/erts/erl_tracer.html">tracer module</a> denoted by <code class="inline">Tracer</code>. Returns the previous value
(which can be <code class="inline">false</code> if no system tracer is active).</p><p>Failure: <code class="inline">{badarg, Info}}</code> if <code class="inline">Pid</code> is not an existing local pid.</p>
  </section>
</section>
<section class="detail" id="set_token/1">

  <div class="detail-header">
    <a href="#set_token/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">set_token(Token)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-27.3.4.6/lib/kernel/src/seq_trace.erl#L424" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> set_token(Token) -> PreviousToken | ok when Token :: [] | <a href="#t:token/0">token</a>(), PreviousToken :: [] | <a href="#t:token/0">token</a>().</pre>

      </div>

<p>Sets the trace token for the calling process to <code class="inline">Token</code>. If <code class="inline">Token == []</code> then
tracing is disabled, otherwise <code class="inline">Token</code> should be an Erlang term returned from
<a href="#get_token/0"><code class="inline">get_token/0</code></a> or <a href="#set_token/1"><code class="inline">set_token/1</code></a>. <a href="#set_token/1"><code class="inline">set_token/1</code></a>
can be used to temporarily exclude message passing from the trace by setting the
trace token to empty like this:</p><pre><code class="makeup erlang" translate="no"><span class="n">OldToken</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">seq_trace</span><span class="p">:</span><span class="nf">set_token</span><span class="p" data-group-id="9573630366-1">(</span><span class="p" data-group-id="9573630366-2">[</span><span class="p" data-group-id="9573630366-2">]</span><span class="p" data-group-id="9573630366-1">)</span><span class="p">,</span><span class="w"> </span><span class="c1">% set to empty and save</span><span class="w">
                                    </span><span class="c1">% old value</span><span class="w">
</span><span class="c1">% do something that should not be part of the trace</span><span class="w">
</span><span class="nc">io</span><span class="p">:</span><span class="nf">format</span><span class="p" data-group-id="9573630366-3">(</span><span class="s">&quot;Exclude the signalling caused by this</span><span class="si">~n</span><span class="s">&quot;</span><span class="p" data-group-id="9573630366-3">)</span><span class="p">,</span><span class="w">
</span><span class="nc">seq_trace</span><span class="p">:</span><span class="nf">set_token</span><span class="p" data-group-id="9573630366-4">(</span><span class="n">OldToken</span><span class="p" data-group-id="9573630366-4">)</span><span class="p">,</span><span class="w"> </span><span class="c1">% activate the trace token again</span><span class="w">
</span><span class="p">.</span><span class="p">.</span><span class="p">.</span></code></pre><p>Returns the previous value of the trace token.</p>
  </section>
</section>
<section class="detail" id="set_token/2">

  <div class="detail-header">
    <a href="#set_token/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">set_token(Component, Val)</h1>


        <a href="https://github.com/erlang/otp/blob/OTP-27.3.4.6/lib/kernel/src/seq_trace.erl#L493" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> set_token(Component, Val) -> OldVal
                   when Component :: <a href="#t:component/0">component</a>(), Val :: <a href="#t:value/0">value</a>(), OldVal :: <a href="#t:value/0">value</a>().</pre>

      </div>

<p>Sets the individual <code class="inline">Component</code> of the trace token to <code class="inline">Val</code>. Returns the
previous value of the component.</p><ul><li><p><strong><a href="#set_token/2"><code class="inline">set_token(label, Label)</code></a></strong> - The <code class="inline">label</code> component is a
term which identifies all events belonging to the same sequential trace. If
several sequential traces can be active simultaneously, <code class="inline">label</code> is used to
identify the separate traces. Default is 0.</p><section role="note" class="admonition warning"><h4 class="admonition-title warning">Warning</h4><p>Labels were restricted to small signed integers (28 bits) prior to OTP 21.
The trace token will be silently dropped if it crosses over to a node that
does not support the label.</p></section></li><li><p><strong><a href="#set_token/2"><code class="inline">set_token(serial, SerialValue)</code></a></strong> -
<code class="inline">SerialValue = {Previous, Current}</code>. The <code class="inline">serial</code> component contains counters
which enables the traced messages to be sorted, should never be set explicitly
by the user as these counters are updated automatically. Default is <code class="inline">{0, 0}</code>.</p></li><li><p><strong><a href="#set_token/2"><code class="inline">set_token(send, Bool)</code></a></strong> - A trace token flag
(<code class="inline">true | false</code>) which enables/disables tracing on information sending.
Default is <code class="inline">false</code>.</p></li><li><p><strong><a href="#set_token/2"><code class="inline">set_token('receive', Bool)</code></a></strong> - A trace token flag
(<code class="inline">true | false</code>) which enables/disables tracing on information reception.
Default is <code class="inline">false</code>.</p></li><li><p><strong><a href="#set_token/2"><code class="inline">set_token(print, Bool)</code></a></strong> - A trace token flag
(<code class="inline">true | false</code>) which enables/disables tracing on explicit calls to
<a href="#print/1"><code class="inline">seq_trace:print/1</code></a>. Default is <code class="inline">false</code>.</p></li><li><p><strong><a href="#set_token/2"><code class="inline">set_token(timestamp, Bool)</code></a></strong> - A trace token flag
(<code class="inline">true | false</code>) which enables/disables a timestamp to be generated for each
traced event. Default is <code class="inline">false</code>.</p></li><li><p><strong><a href="#set_token/2"><code class="inline">set_token(strict_monotonic_timestamp, Bool)</code></a></strong> - A trace
token flag (<code class="inline">true | false</code>) which enables/disables a strict monotonic
timestamp to be generated for each traced event. Default is <code class="inline">false</code>.
Timestamps will consist of
<a href="../../apps/erts/time_correction.html#erlang-monotonic-time">Erlang monotonic time</a> and
a monotonically increasing integer. The time-stamp has the same format and
value as produced by
<code class="inline">{erlang:monotonic_time(nanosecond), erlang:unique_integer([monotonic])}</code>.</p></li><li><p><strong><a href="#set_token/2"><code class="inline">set_token(monotonic_timestamp, Bool)</code></a></strong> - A trace token
flag (<code class="inline">true | false</code>) which enables/disables a strict monotonic timestamp to
be generated for each traced event. Default is <code class="inline">false</code>. Timestamps will use
<a href="../../apps/erts/time_correction.html#erlang-monotonic-time">Erlang monotonic time</a>.
The time-stamp has the same format and value as produced by
<code class="inline">erlang:monotonic_time(nanosecond)</code>.</p></li></ul><p>If multiple timestamp flags are passed, <code class="inline">timestamp</code> has precedence over
<code class="inline">strict_monotonic_timestamp</code> which in turn has precedence over
<code class="inline">monotonic_timestamp</code>. All timestamp flags are remembered, so if two are passed
and the one with highest precedence later is disabled the other one will become
active.</p>
  </section>
</section>

    </div>
  </section>

    <footer class="footer">
      <p>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="kernel.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.37.3) for the

          <a href="https://erlang.org" title="Erlang" target="_blank" translate="no">Erlang programming language</a>

      </p>
<p>Copyright Â© 1996-2025 <a href="https://www.ericsson.com">Ericsson AB</a></p>
    </footer>
  </div>
</main>
</div>
  <script defer src="https://cdn.jsdelivr.net/npm/mermaid@11.4.1/dist/mermaid.min.js"></script>
  <script>
  let initialized = false;

  window.addEventListener("exdoc:loaded", () => {
      if (!initialized) {
      mermaid.initialize({
          startOnLoad: false,
          theme: document.body.className.includes("dark") ? "dark" : "default"
      });
      initialized = true;
      }

      let id = 0;
      for (const codeEl of document.querySelectorAll("pre code.mermaid")) {
      const preEl = codeEl.parentElement;
      const graphDefinition = codeEl.textContent;
      const graphEl = document.createElement("div");
      const graphId = "mermaid-graph-" + id++;
      mermaid.render(graphId, graphDefinition).then(({svg, bindFunctions}) => {
          graphEl.innerHTML = svg;
          bindFunctions?.(graphEl);
          preEl.insertAdjacentElement("afterend", graphEl);
          preEl.remove();
      });
      }
  });
  </script>

  </body>
</html>
