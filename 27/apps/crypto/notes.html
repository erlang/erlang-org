<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.37.3">
    <meta name="project" content="crypto v5.5.3">


<meta name="exdoc:full-text-search-url" content="/doc/search.html?v=27&q=">
<meta name="major-vsn" content="27">
<link rel="canonical" href="https://www.erlang.org/docs/27/apps/crypto/notes.html" />
    <title>Crypto Release Notes — crypto v5.5.3</title>

    <link rel="stylesheet" href="dist/html-erlang-FDBURIED.css" />

    <script defer src="dist/sidebar_items-14E9F638.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-ALU6OERS.js"></script>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="../../index.html" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="crypto" />
        </a>

      <div>
        <a href="../../index.html" class="sidebar-projectName" translate="no">
crypto
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v5.5.3
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras=""></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-extra" id="main" data-type="extras">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of crypto</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search" tabindex="-1">
            <i class="ri-search-2-line ri-lg" aria-hidden="true"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>Crypto Release Notes</h1>


      <a href="https://github.com/garazdawi/otp/blob/OTP-27.3.4.1/lib/crypto/doc/notes.md#L1" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

  </div>

<p>This document describes the changes made to the Crypto application.</p><h2 id="crypto-5-5-3" class="section-heading">
  <a href="#crypto-5-5-3" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 5.5.3</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p><code class="inline">crypto</code> will now work when ED25519 and X25519 are available while ED448 and X448 are not, which is the case in LibreSSL. This is necessary for supporting TLS1.3 using LibreSSL.</p><p>Own Id: OTP-19399 Aux Id: <a href="https://github.com/erlang/otp/issues/9000" title="">GH-9000</a>, <a href="https://github.com/erlang/otp/pull/9136" title="">PR-9136</a></p></li></ul><h2 id="crypto-5-5-2" class="section-heading">
  <a href="#crypto-5-5-2" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 5.5.2</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-1" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-1" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p><code class="inline">crypto:strong_rand_bytes/2</code> fixed to work on Ubuntu pro with installed FIPS support.</p><p>Own Id: OTP-19223 Aux Id: <a href="https://github.com/erlang/otp/pull/8800" title="">PR-8800</a>, <a href="https://github.com/erlang/otp/issues/8769" title="">GH-8769</a></p></li><li><p>Fixed <a href="crypto.html#hash_final/1"><code class="inline">crypto:hash_final/1</code></a> for digest types <code class="inline">shake128</code> and <code class="inline">shake256</code> when using OpenSSL 3.4 or newer.</p><p>Own Id: OTP-19329 Aux Id: <a href="https://github.com/erlang/otp/issues/8997" title="">GH-8997</a>, <a href="https://github.com/erlang/otp/pull/9002" title="">PR-9002</a></p></li></ul><h2 id="crypto-5-5-1" class="section-heading">
  <a href="#crypto-5-5-1" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 5.5.1</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-2" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-2" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>crypto built with <code class="inline">--enable-fips</code> will now accept an OpenSSL 3 lib without fips provider as long as fips mode is not enabled.</p><p>Own Id: OTP-19212 Aux Id: <a href="https://github.com/erlang/otp/issues/8562" title="">GH-8562</a></p></li></ul><h3 id="improvements-and-new-features" class="section-heading">
  <a href="#improvements-and-new-features" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>Added a warning in the documentation to avoid calling <a href="crypto.html#start/0"><code class="inline">crypto:start/0</code></a> as it does not work for FIPS mode. Use <code class="inline">application:start(crypto)</code> instead.</p><p>Own Id: OTP-19143</p></li><li><p>Deprecation of RSA encryption functions has been reverted, as there still exists legitimate use cases with other padding modes than PKCS-1.</p><p>While use PCKS-1 padding with some versions of cryptolib could be considered secure, we still recommend using other algorithms that are less sensitive to oracle attacks.</p><p>Own Id: OTP-19163</p></li><li><p>Compiler warnings for some removed functions have been corrected to point out the correct replacement functions.</p><p>Own Id: OTP-19186 Aux Id: <a href="https://github.com/erlang/otp/pull/8709" title="">PR-8709</a></p></li></ul><h2 id="crypto-5-5" class="section-heading">
  <a href="#crypto-5-5" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 5.5</span>
</h2>
<h3 id="improvements-and-new-features-1" class="section-heading">
  <a href="#improvements-and-new-features-1" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>The documentation has been migrated to use Markdown and ExDoc.</p><p>Own Id: OTP-18955 Aux Id: <a href="https://github.com/erlang/otp/pull/8026" title="">PR-8026</a></p></li><li><p>Removed functions <code class="inline">crypto_dyn_iv_init/3</code> and <code class="inline">crypto_dyn_iv_update/3</code> which were marked as deprecated since OTP 25.</p><p>Own Id: OTP-18973</p></li><li><p>Add support for sm3 hash and hmac.</p><p>Own Id: OTP-18975 Aux Id: <a href="https://github.com/erlang/otp/pull/6658" title="">PR-6658</a></p></li><li><p><code class="inline">OPENSSL_thread_stop</code>  is called when <code class="inline">crypto</code> is purged to not leak thread specific data.</p><p>Own Id: OTP-18978 Aux Id: <a href="https://github.com/erlang/otp/pull/7809" title="">PR-7809</a></p></li><li><p>Add SM4 block cipher implemented according to GB/T 32907-2016.</p><p>Own Id: OTP-19005 Aux Id: <a href="https://github.com/erlang/otp/pull/8168" title="">PR-8168</a></p></li><li><p>The existing function <code class="inline">ssl:key_exporter_materials/4</code> is now documented and supported.</p><p><strong><em> POTENTIAL INCOMPATIBILITY </em></strong></p><p>Own Id: OTP-19016 Aux Id: <a href="https://github.com/erlang/otp/pull/8233" title="">PR-8233</a></p></li><li><p>Due to another attack on PKCS #1 v1.5 padding, known as the Marvin attack, about which we were alerted by Hubert Kario from Red Hat. You can find more details about the attack at
<a href="https://people.redhat.com/~hkario/marvin/">https://people.redhat.com/~hkario/marvin/</a>
Functions that may be vulnerable are now deprecated. </p><p>Note that you might mitigate the problem 
by using appropriate versions of OpenSSL together with our software, but we recommend not using them at all. </p><p>Also avoid using TLS versions prior to TLS-1.2 (not supported by default) and
do not enable RSA-key exchange cipher suites (not supported by default).</p><p><strong><em> POTENTIAL INCOMPATIBILITY </em></strong></p><p>Own Id: OTP-19075</p></li></ul><h2 id="crypto-5-4-2-3" class="section-heading">
  <a href="#crypto-5-4-2-3" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 5.4.2.3</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-3" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-3" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Fixed bug that could cause blocking scheduler threads in <code class="inline">crypto:supports(curves)</code> if called the first time by more than one Erlang process. Bug exists only in OTP-26.2.5.4.</p><p>Own Id: OTP-19316 Aux Id: GH-8971, PR-8979</p></li><li><p>Fixed <a href="crypto.html#hash_final/1"><code class="inline">crypto:hash_final/1</code></a> for digest types <code class="inline">shake128</code> and <code class="inline">shake256</code> when using OpenSSL 3.4 or newer.</p><p>Own Id: OTP-19329 Aux Id: GH-8997, PR-9002</p></li></ul><h2 id="crypto-5-4-2-2" class="section-heading">
  <a href="#crypto-5-4-2-2" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 5.4.2.2</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-4" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-4" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>crypto built with <code class="inline">--enable-fips</code> will now accept an OpenSSL 3 lib without fips provider as long as fips mode is not enabled.</p><p>Own Id: OTP-19212 Aux Id: GH-8562, PR-8762</p></li><li><p><code class="inline">crypto:strong_rand_bytes/2</code> fixed to work on Ubuntu pro with installed FIPS support.</p><p>Own Id: OTP-19223 Aux Id: PR-8800, GH-8769</p></li></ul><h2 id="crypto-5-4-2-1" class="section-heading">
  <a href="#crypto-5-4-2-1" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 5.4.2.1</span>
</h2>
<h3 id="improvements-and-new-features-2" class="section-heading">
  <a href="#improvements-and-new-features-2" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>Add warning in documentation to avoid <a href="crypto.html#start/0"><code class="inline">crypto:start/0</code></a> as it does not work for FIPS mode. Use <code class="inline">application:start(crypto)</code> instead.</p><p>Own Id: OTP-19143</p></li></ul><h2 id="crypto-5-4-2" class="section-heading">
  <a href="#crypto-5-4-2" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 5.4.2</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-5" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-5" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Fix building with <code class="inline">--enable-fips</code> with OpenSSL 3 on MacOS.</p><p>Own Id: OTP-19038 Aux Id: GH-8271, PR-8277</p></li></ul><h2 id="crypto-5-4-1" class="section-heading">
  <a href="#crypto-5-4-1" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 5.4.1</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-6" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-6" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Fix compile error when OPENSSL_NO_DES is defined.</p><p>Own Id: OTP-18921</p></li><li><p>The function <code class="inline">crypto:pbkdf2_hmac</code> will no longer block the main schedulers. If the iteration count or block size parameters are such that the function is likely to take a long time to execute, the function will be scheduled to run on a dirty CPU scheduler.</p><p>Own Id: OTP-18996 Aux Id: PR-8173, PR-8174</p></li></ul><h2 id="crypto-5-4" class="section-heading">
  <a href="#crypto-5-4" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 5.4</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-7" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-7" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Fixed some benign compile warnings on Windows.</p><p>Own Id: OTP-18895</p></li></ul><h3 id="improvements-and-new-features-3" class="section-heading">
  <a href="#improvements-and-new-features-3" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>Enable engine support for OpenSSL versions 3.</p><p>Own Id: OTP-18832 Aux Id: PR-7763</p></li></ul><h2 id="crypto-5-3" class="section-heading">
  <a href="#crypto-5-3" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 5.3</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-8" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-8" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Fix VM crash caused by <code class="inline">crypto being</code> purged and reloaded (by init:restart for
example) on OS with musl libc (such as Alpine linux).</p><p>Own Id: OTP-18670 Aux Id: GH-7436, PR-7450</p></li><li><p>Improved understanding of LibreSSL versions. Support chacha20 and
chacha20_poly1305 for LibreSSL 3.7. Reflect removal of support for the DSS/DSA
algorithm which was done in LibreSSL 2.6.1.</p><p>Own Id: OTP-18758 Aux Id: PR-7209</p></li></ul><h3 id="improvements-and-new-features-4" class="section-heading">
  <a href="#improvements-and-new-features-4" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>FIPS supported by <code class="inline">crypto</code> for OpenSSL 3.0.<em> and 3.1.</em>.</p><p>Own Id: OTP-18666 Aux Id: PR-7392</p></li></ul><h2 id="crypto-5-2" class="section-heading">
  <a href="#crypto-5-2" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 5.2</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-9" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-9" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Fix cmac_update aes_128_cbc for LibreSSL.</p><p>Own Id: OTP-18571</p></li></ul><h3 id="improvements-and-new-features-5" class="section-heading">
  <a href="#improvements-and-new-features-5" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>Add support for SHAKE128 and SHAKE256.</p><p>Own Id: OTP-18204 Aux Id: PR-6203</p></li><li><p>Make the <code class="inline">-DOPENSSL_API_COMPAT</code> flag work without warnings.</p><p>Own Id: OTP-18206 Aux Id: PR-6167</p></li><li><p>Replace size/1 with either tuple_size/1 or byte_size/1</p><p>The <a href="../../apps/erts/erlang.html#size/1"><code class="inline">size/1</code></a> BIF is not optimized by the JIT, and its use can
result in worse types for Dialyzer.</p><p>When one knows that the value being tested must be a tuple,
<a href="../../apps/erts/erlang.html#tuple_size/1"><code class="inline">tuple_size/1</code></a> should always be preferred.</p><p>When one knows that the value being tested must be a binary,
<a href="../../apps/erts/erlang.html#byte_size/1"><code class="inline">byte_size/1</code></a> should be preferred. However,
<a href="../../apps/erts/erlang.html#byte_size/1"><code class="inline">byte_size/1</code></a> also accepts a bitstring (rounding up size to a
whole number of bytes), so one must make sure that the call to <code class="inline">byte_size/</code> is
preceded by a call to <a href="../../apps/erts/erlang.html#is_binary/1"><code class="inline">is_binary/1</code></a> to ensure that bitstrings
are rejected. Note that the compiler removes redundant calls to
<a href="../../apps/erts/erlang.html#is_binary/1"><code class="inline">is_binary/1</code></a>, so if one is not sure whether previous code
had made sure that the argument is a binary, it does not harm to add an
<a href="../../apps/erts/erlang.html#is_binary/1"><code class="inline">is_binary/1</code></a> test immediately before the call to
<a href="../../apps/erts/erlang.html#byte_size/1"><code class="inline">byte_size/1</code></a>.</p><p>Own Id: OTP-18405 Aux Id:
GH-6672,PR-6702,PR-6768,PR-6700,PR-6769,PR-6812,PR-6814</p></li><li><p>Handling of <code class="inline">on_load</code> modules during boot has been improved by adding an extra
step in the boot order for embedded mode that runs all <code class="inline">on_load</code> handlers,
instead of relying on explicit invocation of them, later, when the kernel
supervision tree starts.</p><p>This is mostly a code improvement and OTP internal simplification to avoid
future bugs and to simplify code maintenance.</p><p>Own Id: OTP-18447</p></li></ul><h2 id="crypto-5-1-4-3" class="section-heading">
  <a href="#crypto-5-1-4-3" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 5.1.4.3</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-10" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-10" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Fix building with <code class="inline">--enable-fips</code> with OpenSSL 3 on MacOS.</p><p>Own Id: OTP-19038 Aux Id: GH-8271, PR-8277</p></li></ul><h2 id="crypto-5-1-4-2" class="section-heading">
  <a href="#crypto-5-1-4-2" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 5.1.4.2</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-11" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-11" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>The function <code class="inline">crypto:pbkdf2_hmac</code> will no longer block the main schedulers. If the iteration count or block size parameters are such that the function is likely to take a long time to execute, the function will be scheduled to run on a dirty CPU scheduler.</p><p>Own Id: OTP-18996 Aux Id: PR-8173, PR-8174</p></li></ul><h2 id="crypto-5-1-4-1" class="section-heading">
  <a href="#crypto-5-1-4-1" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 5.1.4.1</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-12" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-12" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Fix VM crash caused by <code class="inline">crypto being</code> purged and reloaded (by init:restart for
example) on OS with musl libc (such as Alpine linux).</p><p>Own Id: OTP-18670 Aux Id: GH-7436, PR-7450</p></li></ul><h2 id="crypto-5-1-4" class="section-heading">
  <a href="#crypto-5-1-4" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 5.1.4</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-13" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-13" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>With this change, random errors are fixed for crypto:generate_key calls with
OpenSSL 3.</p><p>Own Id: OTP-18555</p></li></ul><h2 id="crypto-5-1-3" class="section-heading">
  <a href="#crypto-5-1-3" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 5.1.3</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-14" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-14" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>A user defined runtime library path configured using
<code class="inline">--with-ssl-rpath=&lt;PATHS&gt;</code> could fail to be enabled.</p><p>Own Id: OTP-18384 Aux Id: PR-6596</p></li><li><p>Ensure that <code class="inline">configure</code> fails if a user defined runtime library path has been
passed by the user, but cannot set.</p><p>Own Id: OTP-18408</p></li></ul><h2 id="crypto-5-1-2" class="section-heading">
  <a href="#crypto-5-1-2" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 5.1.2</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-15" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-15" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Fix configure with <code class="inline">--with-ssl</code> and <code class="inline">--disable-dynamic-ssl-lib</code> on Windows.</p><p>Own Id: OTP-18147 Aux Id: GH-6024, PR-6056</p></li><li><p>Remove all references correctly in the garbage collection if an engine handle
was not explicit unloaded.</p><p>Own Id: OTP-18152</p></li><li><p>Changed the behaviour of the engine load/unload functions</p><p>The engine load/unload functions have got changed semantics to get a more
consistent behaviour and work correct when variables are garbage collected.</p><p>The load functions now don't register the methods for the engine to replace.
That will now be handled with the new functions
engine_register/engine_unregister if needed.</p><p>Some functions are removed from the documentation and therefor the API, but
they are left in the code for compatibility.</p><ul><li>engine_load/4: is now the same as engine_load/3</li><li>engine_unload/2: is now the same as engine_unload/1</li><li>ensure_engine_loaded/3: is now the same as ensure_engine_loaded/2</li><li>ensure_engine_unloaded/1, ensure_engine_unloaded/2: is now the same as
engine_unload/1</li></ul><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-18172 Aux Id: ERIERL-826</p></li><li><p>Fixed a naming bug for AES-CFB and Blowfish-CFB/OFB when linked with OpenSSL
3.0 cryptolib.</p><p>Own Id: OTP-18200</p></li><li><p>Sign/verify does now behave as in OTP-24 and earlier for eddsa.</p><p>Own Id: OTP-18205 Aux Id: GH-6219</p></li></ul><h3 id="improvements-and-new-features-6" class="section-heading">
  <a href="#improvements-and-new-features-6" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>Pass elliptic curve names from crypto.erl to crypto's nif.</p><p>Own Id: OTP-18037</p></li><li><p>The configure option <code class="inline">--disable-deprecated-warnings</code> is removed. It was used
for some releases when the support for OpenSSL 3.0 was not completed. It is
not needed in OTP 25.</p><p>Own Id: OTP-18133</p></li><li><p>Crypto is now considered to be usable with the OpenSSL 3.0 cryptolib for
production code.</p><p>ENGINE and FIPS are not yet fully functional.</p><p>Own Id: OTP-18153</p></li><li><p>Do not exit if the legacy provider is missing in libcrypto 3.0.</p><p>Own Id: OTP-18217</p></li></ul><h2 id="crypto-5-1-1" class="section-heading">
  <a href="#crypto-5-1-1" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 5.1.1</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-16" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-16" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Note in the documentation that MODP (rfc3526) groups and OpenSSL 3.0 can give
an error if a call to <a href="crypto.html#generate_key/2"><code class="inline">crypto:generate_key/2</code></a> specifies a key length, and that
length is to small.</p><p>Own Id: OTP-18046</p></li></ul><h3 id="improvements-and-new-features-7" class="section-heading">
  <a href="#improvements-and-new-features-7" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>The cmac now uses only the 3.0 API</p><p>Own Id: OTP-18010</p></li><li><p>Documentation is now updated with which OpenSSL cryptolib versions that OTP
currently is tested.</p><p>Own Id: OTP-18132</p></li></ul><h2 id="crypto-5-1" class="section-heading">
  <a href="#crypto-5-1" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 5.1</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-17" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-17" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Fix timing bug in ensure_engine_loaded</p><p>When two ensure_engine_loaded() calls were done in parallel there was a
possibility that a crypto lib function was called by both instead of just one
of them which resulted in an error. This is solved by moving the
implementation from erlang down into a NIF function that uses a mutex to
protect the sensitive part.</p><p>Own Id: OTP-17858 Aux Id: ERIERL-728</p></li><li><p>Remove faulty types <code class="inline">run_time_error()</code> and <code class="inline">descriptive_error()</code>.</p><p>Own Id: OTP-17984</p></li></ul><h3 id="improvements-and-new-features-8" class="section-heading">
  <a href="#improvements-and-new-features-8" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>Input for <code class="inline">configure</code> scripts adapted to <code class="inline">autoconf</code> 2.71.</p><p>Own Id: OTP-17414 Aux Id: PR-4967</p></li><li><p>Add crypto:hash_equals/2</p><p>Own Id: OTP-17471 Aux Id: PR-4750</p></li><li><p>Add /opt/homebrew/opt/openssl to standard locations to search for OpenSSL
cryptolib.</p><p>Own Id: OTP-17561</p></li><li><p><code class="inline">crypto_dyn_iv_init/3</code> and <code class="inline">crypto_dyn_iv_update/3</code> are deprecated.</p><p>Own Id: OTP-17870</p></li><li><p>The information in error messages are increased.</p><p>Previously the error was signaled with en error class exception <code class="inline">badarg</code>,
<code class="inline">notsup</code> or <code class="inline">error</code>, and also in some more ways like an other exception or a
return value in a non-standardized format.</p><p>Now it is an error-class exception
<code class="inline">{notsup|badarg|error, InfoFromCfile, Description::string()}</code>.</p><p>The <code class="inline">InfoFromCfile</code> is a term with name and line number of the C-file where
the error was found. This is primarily intended for a crypto maintainer or an
advanced user to find the cause of complicated errors - maybe in crypto
itself. The contents of that term might be changed in the future.</p><p>The <code class="inline">Description</code> is a clear text string that describes the error. In case of
<code class="inline">badarg</code> and <code class="inline">notsup</code> the intention is that it should help the user to find
the cause (&quot;Bad key size&quot; as an example). Specially for some <code class="inline">error</code> that are
unlikely, the string may not be possible to understand without deep knowledge
of the underlying cryptolib. Such messages are intended for a crypto
maintainer.</p><p>The first element on call stack (the <code class="inline">S</code> in
<code class="inline">try ... catch error:E:S .... end</code>) gives more information like the actual
argument list in the call of crypto and the argument number (if possible) in
the call to the NIF inside crypto.</p><p>The functions in crypto affected by this change are:</p><p>sign/4, sign/5, verify/5, verify/6,</p><p>generate_key/2, generate_key/3, compute_key/4,</p><p>hash/2, hash/4, hash_init/1, hash_update/4, hash_final/1,</p><p>mac/3,4, mac_init/3, mac_update/2, mac_final/2,</p><p>pbkdf2_hmac/5,</p><p>public_encrypt/4, private_decrypt/4, private_encrypt/4, public_decrypt/4</p><p>This schema was introduced earlier in:</p><p>crypto_init/3, crypto_init/4, crypto_update/2, crypto_final/1,
crypto_get_data/1,</p><p>crypto_one_time/4, crypto_one_time/5, crypto_one_time_aead/6,
crypto_one_time_aead/7</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-17965</p></li><li><p>Add Output Feedback mode (OFB) support for AES encryption / decryption for key
sizes of 128, 192 and 256 bits.</p><p>Own Id: OTP-18067 Aux Id: PR-5866</p></li><li><p>The cryptolib API deprecated in OpenSSL 3.0 is now no longer used with a few
exceptions listed below.</p><p>Although OpenSSL 3.0.x itself is stable, its usage in OTP/crypto should still
not be considered suitable for production code.</p><p>The use of ENGINEs is still disabled by default when using 3.0.</p><p>Deprecated functions are still called in the otp_test_engine.c (only used in
tests), in mac.c (EVP_PKEY_new_CMAC_key) and five function calls in ec.c
(EVP_PKEY_assign, EC_KEY_get_conv_form, EVP_PKEY_get1_EC_KEY,
EC_KEY_get0_group and EC_KEY_set_public_key).</p><p>Own Id: OTP-18086 Aux Id: OTP-16282, OTP-16643, OTP-16644, OTP-17701,
OTP-17702, OTP-17704</p></li></ul><h2 id="crypto-5-0-6-5" class="section-heading">
  <a href="#crypto-5-0-6-5" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 5.0.6.5</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-18" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-18" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>The function <code class="inline">crypto:pbkdf2_hmac</code> will no longer block the main schedulers. If the iteration count or block size parameters are such that the function is likely to take a long time to execute, the function will be scheduled to run on a dirty CPU scheduler.</p><p>Own Id: OTP-18996 Aux Id: PR-8173, PR-8174</p></li></ul><h2 id="crypto-5-0-6-4" class="section-heading">
  <a href="#crypto-5-0-6-4" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 5.0.6.4</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-19" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-19" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Fix VM crash caused by <code class="inline">crypto being</code> purged and reloaded (by init:restart for
example) on OS with musl libc (such as Alpine linux).</p><p>Own Id: OTP-18670 Aux Id: GH-7436, PR-7450</p></li></ul><h2 id="crypto-5-0-6-3" class="section-heading">
  <a href="#crypto-5-0-6-3" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 5.0.6.3</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-20" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-20" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Changed the behaviour of the engine load/unload functions</p><p>The engine load/unload functions have got changed semantics to get a more
consistent behaviour and work correct when variables are garbage collected.</p><p>The load functions now don't register the methods for the engine to replace.
That will now be handled with the new functions
engine_register/engine_unregister if needed.</p><p>Some functions functions are removed from the documentation and therefor the
API, but they are left in the code for compatibility.</p><ul><li>engine_load/4: is now the same as engine_load/3</li><li>engine_unload/2: is now the same as engine_unload/1</li><li>ensure_engine_loaded/3: is now the same as ensure_engine_loaded/2</li><li>ensure_engine_unloaded/1, ensure_engine_unloaded/2: is now the same as
engine_unload/1</li></ul><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-18172 Aux Id: ERIERL-826</p></li></ul><h2 id="crypto-5-0-6-2" class="section-heading">
  <a href="#crypto-5-0-6-2" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 5.0.6.2</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-21" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-21" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Fix configure with <code class="inline">--with-ssl</code> and <code class="inline">--disable-dynamic-ssl-lib</code> on Windows.</p><p>Own Id: OTP-18147 Aux Id: GH-6024, PR-6056</p></li></ul><h2 id="crypto-5-0-6-1" class="section-heading">
  <a href="#crypto-5-0-6-1" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 5.0.6.1</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-22" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-22" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Fix timing bug in ensure_engine_loaded</p><p>When two ensure_engine_loaded() calls were done in parallel there was a
possibility that a crypto lib function was called by both instead of just one
of them which resulted in an error. This is solved by moving the
implementation from erlang down into a NIF function that uses a mutex to
protect the sensitive part.</p><p>Own Id: OTP-17858 Aux Id: ERIERL-728</p></li></ul><h2 id="crypto-5-0-6" class="section-heading">
  <a href="#crypto-5-0-6" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 5.0.6</span>
</h2>
<h3 id="improvements-and-new-features-9" class="section-heading">
  <a href="#improvements-and-new-features-9" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>The crypto app in OTP can since OTP-24.2 be compiled, linked and used with the
new OpenSSL 3.0 cryptolib.</p><p>The crypto app has 3.0 support has been improved, but is still **not
recommended** for other usages than experiments and alpha testing. There are
not yet any guaranties that it works, not even together with other OTP
applications like for example SSL and SSH, although there are no known errors.</p><p>Since the previous release, OTP-24.2, the following improvements have been
done:</p><p>- It has been tested during nearly every nightly test on the OTP lab</p><p>- The hash algorithms <code class="inline">md4</code> and <code class="inline">ripemd160</code> have been enabled with OpenSSL
3.0.</p><p>- The ciphers <code class="inline">blowfish_cbc</code>, <code class="inline">blowfish_ecb</code>, <code class="inline">des_cbc</code>, <code class="inline">des_cfb</code>,
<code class="inline">des_ecb</code>, <code class="inline">rc2_cbc</code> and <code class="inline">rc4</code> have been enabled with OpenSSL 3.0.</p><p>Disabled or unsupported with OpenSSL 3.0 are still:</p><p>- ENGINE support</p><p>- FIPS mode</p><p>- Other providers than the built-in ones</p><p>- Compiling and linking with OpenSSL 3.0 cryptolib in compatibility modes
(for example to behave as 1.1.1)</p><p>and, the ciphers <code class="inline">blowfish_cfb64</code> and <code class="inline">blowfish_ofb64</code> are not supported and
will not be either.</p><p>Deprecated functions in the OpenSSL 3.0 cryptolib must not be disabled as
OTP/crypto still uses some of the deprecated API functions. The gcc flag
<code class="inline">-Wno-deprecated-declarations</code> is set to prevent deprecation warnings to be
printed when compiling.</p><p>Own Id: OTP-17812 Aux Id: OTP-16646, OTP-16282</p></li><li><p>Crypto is adapted to LibreSSL 3.5.0 on OpenBSD.</p><p>Own Id: OTP-17941 Aux Id: OTP-17942</p></li><li><p>New configure option ( <code class="inline">--disable-otp-test-engine</code>) to prohibit the build of
the OTP test engine used in some test suites.</p><p>The reason is that the test engine could be hard to compile on for instance
LibreSSL 3.5.0. For that particular cryptolib version (or higher), this
configure option is set automatically.</p><p>Own Id: OTP-17942 Aux Id: OTP-17941</p></li></ul><h2 id="crypto-5-0-5" class="section-heading">
  <a href="#crypto-5-0-5" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 5.0.5</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-23" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-23" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Fixed the C-warning &quot;implicit declaration of function 'OpenSSL_version_num'&quot;
if compiling with an early LibreSSL version.</p><p>Own Id: OTP-17637</p></li><li><p>FIPS availability was not checked correctly for AEAD ciphers.</p><p>Own Id: OTP-17740</p></li><li><p>Fixed that cipher aliases (like aes_cbc etc) could be present even if the
aliased cipher(s) (like aes_128_cbc, aes_256_cbc,... etc) was missing.</p><p>Own Id: OTP-17741</p></li></ul><h3 id="improvements-and-new-features-10" class="section-heading">
  <a href="#improvements-and-new-features-10" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>The crypto app in OTP can now be compiled, linked and used with the new
OpenSSL 3.0 cryptolib.</p><p>It has not yet been extensively tested and is in this release **not
recommended** for other usages than experiments and alpha testing. There are
not yet any guaranties that it works, not even together with other OTP
applications like for example SSL and SSH, although there are no known errors.</p><p>Compiling and linking with OpenSSL 3.0 cryptolib in compatibility modes (for
example to behave as 1.1.1) are not tested. It is not tested with external
providers.</p><p>The support for FIPS mode does not yet work, and is disabled when compiled
with OpenSSL 3.0.</p><p>Deprecated functions in the OpenSSL 3.0 cryptolib must not be disabled as
OTP/crypto still uses some of the deprecated API functions. The gcc flag
<code class="inline">-Wno-deprecated-declarations</code> is set to prevent deprecation warnings to be
printed when compiling.</p><p>The hash algorithms <code class="inline">md4</code> and <code class="inline">ripemd160</code> are disabled temporarily when
compiled with OpenSSL 3.0.</p><p>The ciphers <code class="inline">blowfish_cbc</code>, <code class="inline">blowfish_cfb64</code>, <code class="inline">blowfish_ecb</code>,
<code class="inline">blowfish_ofb64</code>, <code class="inline">des_cbc</code>, <code class="inline">des_cfb</code>, <code class="inline">des_ecb</code>, <code class="inline">rc2_cbc</code> and <code class="inline">rc4</code> are
disabled temporarily when compiled with OpenSSL 3.0.</p><p>Own Id: OTP-16646 Aux Id: OTP-16282</p></li><li><p>The error handling in crypto is partly refactored using the new error
reporting support. Errors earlier propagated like exceptions are still so, but
when the failing function is called from the terminal - for example during
failure hunting - a more descriptive text is produced.</p><p>Own Id: OTP-17241</p></li><li><p>A new function <a href="crypto.html#info/0"><code class="inline">crypto:info/0</code></a> which presents some data about the compilation
and linkage of the crypto nif is added.</p><p>Own Id: OTP-17603</p></li><li><p>Added the <code class="inline">pbkdf2_hmac/5</code> function to the crypto module.</p><p>It calls the <code class="inline">PKCS5_PBKDF2_HMAC</code> function which implements PBKD2 with HMAC in
an efficient way.</p><p>Own Id: OTP-17808 Aux Id: PR-5421</p></li></ul><h2 id="crypto-5-0-4" class="section-heading">
  <a href="#crypto-5-0-4" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 5.0.4</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-24" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-24" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Fixed minor memory leak at <code class="inline">crypto</code> module purge.</p><p>Own Id: OTP-17668 Aux Id: PR-5245</p></li><li><p>Fix possible inconsistency in fips mode when linking with some cryptolibs.</p><p>Own Id: OTP-17672</p></li></ul><h2 id="crypto-5-0-3" class="section-heading">
  <a href="#crypto-5-0-3" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 5.0.3</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-25" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-25" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Fix bug in <code class="inline">crypto:ensure_engine_unloaded</code>. Also fixed minor memory leak
related to engine unloading.</p><p>Own Id: OTP-17593 Aux Id: ERIERL-679</p></li><li><p>Fixes that FIPS enable and disable (or vice versa) on Windows sometimes leads
to core dump at the time of process exit.</p><p>Own Id: OTP-17618 Aux Id: PR-5126, GH-4920</p></li></ul><h3 id="improvements-and-new-features-11" class="section-heading">
  <a href="#improvements-and-new-features-11" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>Disable fips if cryptolib &lt; 1.0.1 and OTP/crypto is configured with
--enable-fips</p><p>If not, there could be compiling or loading problems with antique OpenSSL
versions.</p><p>Own Id: OTP-17389</p></li></ul><h2 id="crypto-5-0-2" class="section-heading">
  <a href="#crypto-5-0-2" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 5.0.2</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-26" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-26" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>EC keys are now zero-padded to the expected length if needed.</p><p>Own Id: OTP-17442 Aux Id: GH-4861</p></li></ul><h2 id="crypto-5-0-1" class="section-heading">
  <a href="#crypto-5-0-1" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 5.0.1</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-27" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-27" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Removed a risk for coredump.</p><p>Own Id: OTP-17391 Aux Id: GH-4810</p></li><li><p>Fixed and documented the <code class="inline">DED_LDFLAGS_CONFTEST</code> configuration variable in
<code class="inline">$ERL_TOP/HOWTO/INSTALL.md</code>.</p><p>Own Id: OTP-17419 Aux Id: GH-4821</p></li><li><p>Commit of generated <code class="inline">configure</code> script.</p><p>Own Id: OTP-17420 Aux Id: OTP-17398, GH-4821</p></li></ul><h2 id="crypto-5-0" class="section-heading">
  <a href="#crypto-5-0" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 5.0</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-28" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-28" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Add <code class="inline">/usr/local/opt/openssl</code> to the openssl configure search path. This path
is where some tools on OS X place openssl.</p><p>Own Id: OTP-16882</p></li><li><p>Fix compiler warnings produced by the clang compiler.</p><p>Own Id: OTP-17105 Aux Id: PR-2872</p></li><li><p>The <code class="inline">configure</code> scripts in <code class="inline">crypto</code> and <code class="inline">erts</code> now fail if a requested feature
cannot be enabled.</p><p>Large parts of the <code class="inline">configure</code> script of <code class="inline">crypto</code> have been rewritten with
various improvements and bug fixes. It is now better at finding usable OpenSSL
libraries, but will in the following cases fail to detect OpenSSL libraries
where it previously sometimes detected the libraries by chance:</p><ul><li>OpenSSL installations with <code class="inline">include</code> directory and <code class="inline">lib</code> directory parts
installed in different base directories. In order to detect such
installations after this change, the user must explicitly specify the
locations using the
<a href="../../system/install.html#advanced-configuration-and-build-of-erlang-otp_configuring"><code class="inline">--with-ssl=&lt;path&gt;</code></a>
and the
<a href="../../system/install.html#advanced-configuration-and-build-of-erlang-otp_configuring"><code class="inline">--with-ssl-incl=&lt;path&gt;</code></a>
<code class="inline">configure</code> command line arguments.</li><li>When building with old <code class="inline">gcc</code> compilers or other compilers on Debian
derivatives with multiarch directories under the <code class="inline">lib</code> directory. In order
to detect such installations after this change, the user must explicitly
specify the multiarch directory name using the
<a href="../../system/install.html#advanced-configuration-and-build-of-erlang-otp_configuring"><code class="inline">--with-ssl-lib-subdir=lib/&lt;multiarch-dir&gt;</code></a>
<code class="inline">configure</code> command line argument.</li></ul><p>Own Id: OTP-17254 Aux Id: ERIERL-618, GH-4230</p></li><li><p>The value 'none' was missing in the specs of crypto:sign/4 and
crypto:verify/6.</p><p>Own Id: OTP-17312 Aux Id: PR-4723</p></li></ul><h3 id="improvements-and-new-features-12" class="section-heading">
  <a href="#improvements-and-new-features-12" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>The functions and cipher names that were deprecated in OTP-23.0 are now
removed.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-16656</p></li><li><p>Removed installed directory priv/obj/ containing superfluous object files.</p><p>Own Id: OTP-17001 Aux Id: PR-2852</p></li><li><p>TLS connections now support EdDSA certificates.</p><p>Own Id: OTP-17142 Aux Id: PR-4756, GH-4637, GH-4650</p></li><li><p>Add prop_aead attribute to map from crypto:cipher_info/1.</p><p>Own Id: OTP-17313 Aux Id: PR-4686</p></li></ul><h2 id="crypto-4-9-0-4" class="section-heading">
  <a href="#crypto-4-9-0-4" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 4.9.0.4</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-29" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-29" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Changed the behaviour of the engine load/unload functions</p><p>The engine load/unload functions have got changed semantics to get a more
consistent behaviour and work correct when variables are garbage collected.</p><p>The load functions now don't register the methods for the engine to replace.
That will now be handled with the new functions
engine_register/engine_unregister if needed.</p><p>Some functions functions are removed from the documentation and therefor the
API, but they are left in the code for compatibility.</p><ul><li>engine_load/4: is now the same as engine_load/3</li><li>engine_unload/2: is now the same as engine_unload/1</li><li>ensure_engine_loaded/3: is now the same as ensure_engine_loaded/2</li><li>ensure_engine_unloaded/1, ensure_engine_unloaded/2: is now the same as
engine_unload/1</li></ul><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-18172 Aux Id: ERIERL-826</p></li></ul><h2 id="crypto-4-9-0-3" class="section-heading">
  <a href="#crypto-4-9-0-3" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 4.9.0.3</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-30" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-30" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Fix timing bug in ensure_engine_loaded</p><p>When two ensure_engine_loaded() calls were done in parallel there was a
possibility that a crypto lib function was called by both instead of just one
of them which resulted in an error. This is solved by moving the
implementation from erlang down into a NIF function that uses a mutex to
protect the sensitive part.</p><p>Own Id: OTP-17858 Aux Id: ERIERL-728</p></li><li><p>Remove all references correctly in the garbage collection if an engine handle
was not explicit unloaded.</p><p>Own Id: OTP-18152</p></li></ul><h2 id="crypto-4-9-0-2" class="section-heading">
  <a href="#crypto-4-9-0-2" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 4.9.0.2</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-31" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-31" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>EC keys are now zero-padded to the expected length if needed.</p><p>Own Id: OTP-17442 Aux Id: GH-4861</p></li></ul><h2 id="crypto-4-9-0-1" class="section-heading">
  <a href="#crypto-4-9-0-1" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 4.9.0.1</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-32" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-32" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Removed a risk for coredump.</p><p>Own Id: OTP-17391 Aux Id: GH-4810</p></li><li><p>Commit of generated <code class="inline">configure</code> script.</p><p>Own Id: OTP-17420 Aux Id: OTP-17398, GH-4821</p></li></ul><h2 id="crypto-4-9" class="section-heading">
  <a href="#crypto-4-9" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 4.9</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-33" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-33" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Fix minor memory leaks in crypto ENGINE and robustify the code.</p><p>Own Id: OTP-17212</p></li><li><p>The otp_test_engine no longer fails if NO_EC* is set in the OpenSSL
configuration.</p><p>Own Id: OTP-17256 Aux Id: PR-4580, GH-4573</p></li></ul><h3 id="improvements-and-new-features-13" class="section-heading">
  <a href="#improvements-and-new-features-13" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>Various address sanitizer support.</p><p>Own Id: OTP-16959 Aux Id: PR-2965</p></li><li><p>EVP is now disabled for OpenSSL cryptolib versions up to and including 1.0.2</p><p>Own Id: OTP-17116 Aux Id: PR-2972</p></li><li><p>Warning for unused C function removed</p><p>Own Id: OTP-17145 Aux Id: OTP-17105, PR-2872</p></li></ul><h2 id="crypto-4-8-3" class="section-heading">
  <a href="#crypto-4-8-3" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 4.8.3</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-34" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-34" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Adding missing flag in BN-calls in SRP.</p><p>Own Id: OTP-17107</p></li></ul><h2 id="crypto-4-8-2" class="section-heading">
  <a href="#crypto-4-8-2" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 4.8.2</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-35" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-35" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Fixed usage of <code class="inline">AC_CONFIG_AUX_DIRS()</code> macros in configure script sources.</p><p>Own Id: OTP-17093 Aux Id: ERL-1447, PR-2948</p></li></ul><h2 id="crypto-4-8-1" class="section-heading">
  <a href="#crypto-4-8-1" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 4.8.1</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-36" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-36" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Build the supported curves cache in the NIF when crypto is loaded, no matter
how it is loaded.</p><p>This prevents a possible problem with different processes starting the crypto
application concurrently.</p><p>Own Id: OTP-16819 Aux Id: PR-2720</p></li><li><p>It is now possible to build with crypto and openssl gprof-enabled and
statically link them into the VM.</p><p>Own Id: OTP-17029</p></li></ul><h3 id="improvements-and-new-features-14" class="section-heading">
  <a href="#improvements-and-new-features-14" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>Fixed performance loss in HMAC when using older OpenSSL due to mutex issues.</p><p>A workaround is implemented to allow fallback from using the EVP API for HMAC
operations. On some architectures this may improve the performance, especially
with old OpenSSL versions. This fallback to low-level functions is always
enabled for openssl versions before 1.0.2.</p><p>Own Id: OTP-17025 Aux Id: ERL-1400, PR-2877</p></li></ul><h2 id="crypto-4-8" class="section-heading">
  <a href="#crypto-4-8" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 4.8</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-37" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-37" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Fix type spec bug in crypto for crypto_init and crypto:one_time</p><p>Own Id: OTP-16658 Aux Id: OTP-15884, ERL-1257</p></li><li><p>The deprecation message for crypto:rand_uniform/2 indicated a non-existent
function. The correct one (rand:uniform/1) is now suggested.</p><p>Own Id: OTP-16846 Aux Id: PR-2741</p></li></ul><h3 id="improvements-and-new-features-15" class="section-heading">
  <a href="#improvements-and-new-features-15" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>Implemented a workaround to allow fallback from using the EVP API for
Diffie-Hellman key generation</p><p>Own Id: OTP-16771 Aux Id: ERIERL-509</p></li><li><p>The internal Diffie-Hellman high level API for key generation was slow in old
and by OpenSSL now unsupported cryptolib versions (1.0.1 and earlier).</p><p>If such a cryptolib is used anyhow, the low-level API is used internally in
the crypto application.</p><p>Own Id: OTP-16774</p></li></ul><h2 id="crypto-4-7" class="section-heading">
  <a href="#crypto-4-7" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 4.7</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-38" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-38" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Crypto reported unsupported elliptic curves as supported on e.g Fedora
distros.</p><p>Own Id: OTP-16579 Aux Id: ERL-825</p></li></ul><h3 id="improvements-and-new-features-16" class="section-heading">
  <a href="#improvements-and-new-features-16" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>Support for ed25519 and ed448 added to <code class="inline">crypto:generate_key</code>.</p><p>Own Id: OTP-15967 Aux Id: PR-2329</p></li><li><p>The <a href="new_api.html#the-new-api">new crypto functions api</a> (crypto_init,
crypto_update and crypto_one_time) has been updated.</p><p>There is now a function <a href="crypto.html#crypto_final/1"><code class="inline">crypto_final/1</code></a> and a
possibility to set options in <a href="crypto.html#crypto_init/3"><code class="inline">crypto_init/3</code></a> and
<a href="crypto.html#crypto_init/4"><code class="inline">crypto_init/4</code></a>. See the manual for details.</p><p>Own Id: OTP-16160</p></li><li><p>As <a href="notes.html#crypto-4-5">announced</a> in OTP 22.0, a New API was introduced in
CRYPTO. See the <a href="new_api.html"><em>New and Old API</em></a> chapter in the CRYPTO User's
Guide for more information and suggested replacement functions.</p><p><a href="new_api.html#the-old-api">The Old API</a> is now deprecated in OTP-23.0 and will
be removed in OTP-24.0.</p><p>This deprecation includes cipher names. See the section
<a href="new_api.html#retired-cipher-names">Retired cipher names</a> in the crypto User's
Guide, chapter <a href="new_api.html#the-old-api">The Old API</a>.</p><p>Own Id: OTP-16232</p></li><li><p>Fix C-compilation without deprecated OpenSSL cryptolib APIs</p><p>Own Id: OTP-16369 Aux Id: PR-2474</p></li><li><p>Refactored the internal handling of deprecated and removed functions.</p><p>Own Id: OTP-16469</p></li><li><p>Added missing 'eddh' to <a href="crypto.html#supports/1">crypto:supports(public_keys)</a>.</p><p>Own Id: OTP-16583</p></li></ul><h2 id="crypto-4-6-5-4" class="section-heading">
  <a href="#crypto-4-6-5-4" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 4.6.5.4</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-39" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-39" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>EC keys are now zero-padded to the expected length if needed.</p><p>Own Id: OTP-17442 Aux Id: GH-4861</p></li></ul><h2 id="crypto-4-6-5-3" class="section-heading">
  <a href="#crypto-4-6-5-3" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 4.6.5.3</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-40" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-40" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Removed a risk for coredump.</p><p>Own Id: OTP-17391 Aux Id: GH-4810</p></li><li><p>Commit of generated <code class="inline">configure</code> script.</p><p>Own Id: OTP-17420 Aux Id: OTP-17398, GH-4821</p></li></ul><h2 id="crypto-4-6-5-2" class="section-heading">
  <a href="#crypto-4-6-5-2" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 4.6.5.2</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-41" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-41" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Adding missing flag in BN-calls in SRP.</p><p>Own Id: OTP-17107</p></li></ul><h2 id="crypto-4-6-5-1" class="section-heading">
  <a href="#crypto-4-6-5-1" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 4.6.5.1</span>
</h2>
<h3 id="improvements-and-new-features-17" class="section-heading">
  <a href="#improvements-and-new-features-17" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>Implemented a workaround to allow fallback from using the EVP API for
Diffie-Hellman key generation</p><p>Own Id: OTP-16771 Aux Id: ERIERL-509</p></li></ul><h2 id="crypto-4-6-5" class="section-heading">
  <a href="#crypto-4-6-5" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 4.6.5</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-42" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-42" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Fixed potential memory leaks involving calls to the crypto ng_api.</p><p>Own Id: OTP-16428 Aux Id: PR-2511</p></li></ul><h2 id="crypto-4-6-4" class="section-heading">
  <a href="#crypto-4-6-4" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 4.6.4</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-43" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-43" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Constant time comparisons added.</p><p>Own Id: OTP-16376</p></li></ul><h2 id="crypto-4-6-3" class="section-heading">
  <a href="#crypto-4-6-3" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 4.6.3</span>
</h2>
<h3 id="improvements-and-new-features-18" class="section-heading">
  <a href="#improvements-and-new-features-18" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>The ciphers aes_cfb8 and aes_cfb128 are now using the EVP interface. The
supported key lengths are 128, 192 and 256 bits.</p><p>Own Id: OTP-16133 Aux Id: PR-2407</p></li><li><p>The ciphers aes_cfb8 and aes_cfb128 are now available in FIPS enabled mode.</p><p>Own Id: OTP-16134 Aux Id: PR-2407</p></li></ul><h2 id="crypto-4-6-2" class="section-heading">
  <a href="#crypto-4-6-2" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 4.6.2</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-44" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-44" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>The AEAD tag was not previously checked on decrypt with chacha20_poly1305</p><p>Own Id: OTP-16242 Aux Id: ERL-1078</p></li></ul><h2 id="crypto-4-6-1" class="section-heading">
  <a href="#crypto-4-6-1" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 4.6.1</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-45" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-45" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>FIxed a bug if the erlang emulator was linked with a very old cryptolib
version (1.0.1 or earlier).</p><p>The bug now fixed could have triggered a core dump if an unknown cipher name
was used in crypto functions.</p><p>Own Id: OTP-16202</p></li></ul><h2 id="crypto-4-6" class="section-heading">
  <a href="#crypto-4-6" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 4.6</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-46" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-46" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>The implementation of <code class="inline">crypto_one_time/4</code> is adjusted to match the type
specification. The spec and the black-box behaviour of the function are
unchanged.</p><p>Some details: Both the spec and the implementation were correct seen
separately. But with both of them combined simultaneously with
<code class="inline">crypto_one_time/5</code> which was called by the implementation of
<code class="inline">crypto_one_time/4</code>, an (obvious) error was detected by a Dialyzer with more
thorough checking than usual.</p><p>Own Id: OTP-15884 Aux Id: ERL-974</p></li><li><p>When using crypto with FIPS mode enabled, the digests were not correctly
handled.</p><p>Own Id: OTP-15911</p></li><li><p>A memory leak in error handling code in <code class="inline">ng_crypto_init_nif</code> is fixed.</p><p>Own Id: OTP-15924</p></li><li><p>Fixed the broken static build of the crypto nifs</p><p>Own Id: OTP-15928 Aux Id: PR-2296</p></li></ul><h3 id="improvements-and-new-features-19" class="section-heading">
  <a href="#improvements-and-new-features-19" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>The Message Authentication Codes (MAC) CMAC, HMAC and Poly1305 are unified
into common functions in the New Crypto API. See the manual for CRYPTO.</p><p>Own Id: OTP-13872</p></li></ul><h2 id="crypto-4-5-1" class="section-heading">
  <a href="#crypto-4-5-1" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 4.5.1</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-47" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-47" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>The cipher aes-ctr was disabled by mistake in crypto:supports for cryptolibs
before 1.0.1. It worked however in the encrypt and decrypt functions.</p><p>Own Id: OTP-15829</p></li></ul><h2 id="crypto-4-5" class="section-heading">
  <a href="#crypto-4-5" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 4.5</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-48" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-48" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Fixed a bug in error return for <code class="inline">crypto:poly1305/2</code>. It returned the atom
<code class="inline">notsup</code> instead of the exception <code class="inline">notsup</code>.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-15677</p></li><li><p>The cipher chacha20 was introduced in OpenSSL 1.1.0. However, it could in a
very odd situation, fail for versions less than OpenSSL 1.1.0d. It is
therefore disabled for those versions.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-15678</p></li></ul><h3 id="improvements-and-new-features-20" class="section-heading">
  <a href="#improvements-and-new-features-20" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>A new <code class="inline">rand</code> module algorithm, <code class="inline">exro928ss</code> (Xoroshiro928**), has been
implemented. It has got a really long period and good statistical quality for
all output bits, while still being only about 50% slower than the default
algorithm.</p><p>The same generator is also used as a long period counter in a new <code class="inline">crypto</code>
plugin for the <code class="inline">rand</code> module, algorithm <code class="inline">crypto_aes</code>. This plugin uses AES-256
to scramble the counter which buries any detectable statistical artifacts.
Scrambling is done in chunks which are cached to get good amortized speed
(about half of the default algorithm).</p><p>Own Id: OTP-14461 Aux Id: PR-1857</p></li><li><p>Crypto's single C-file is split into multiple files. The different coding
styles in the different parts are unified into a single style.</p><p>Own Id: OTP-14732 Aux Id: PR-2068, PR-2095</p></li><li><p>Build configuration of the <code class="inline">crypto</code> application has been moved from the <code class="inline">erts</code>
application into the <code class="inline">crypto</code> application.</p><p>Own Id: OTP-15129</p></li><li><p>Adds two hash functions <code class="inline">blake2b</code> and <code class="inline">blake2s</code> (64 bit hash and 32 bit hash
respectively). These are modern and standard hash functions used in
blockchains and encrypted communication protocols. The hash functions are
available in OpenSSL since version 1.1.1.</p><p>Own Id: OTP-15564 Aux Id: PR-2129</p></li><li><p>A new API is implemented in crypto. See the CRYPTO user's guide, chapter <em>New
and Old API</em> for more information.</p><p>The old api with the <code class="inline">crypto:block_*</code> and <code class="inline">crypto:stream_*</code> interfaces are
kept for compatibility, but implemented with the new api. Please note that
since the error checking is more thorough, there <em>might</em> be arguments with for
example faulty lengths that are no longer accepted.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-15644 Aux Id: OTP-14732 , OTP-15451, PR-1857 , PR-2068, PR-2095</p></li><li><p>The new hash_info/1 and cipher_info/1 functions returns maps with information
about the hash or cipher in the argument.</p><p>Own Id: OTP-15655 Aux Id: PR-2173, ERL-864, PR-2186</p></li><li><p>Obey additional OpenSSL configure flags when compiling the C-part of the
CRYPTO application: <code class="inline">no-bf</code>, <code class="inline">no-blake2</code>, <code class="inline">no-chacha</code>, <code class="inline">no-cmac</code>, <code class="inline">no-dh</code>,
<code class="inline">no-dsa</code>, <code class="inline">no-md4</code>, <code class="inline">no-poly1305</code>, <code class="inline">no-rc2</code>, <code class="inline">no-rc4</code> and <code class="inline">no-rmd160</code>.</p><p>Own Id: OTP-15683</p></li><li><p>A new function <a href="crypto.html#supports/1"><code class="inline">crypto:supports/1</code></a> is introduced. The single argument takes an
atom as argument: <code class="inline">hashes</code>, <code class="inline">public_keys</code>, <code class="inline">ciphers</code>, <code class="inline">macs</code>, <code class="inline">curves</code> or
<code class="inline">rsa_opts</code>. The return value is a list of supported algorithms.</p><p>The difference with the existing <code class="inline">crypto:supports/0</code> is, apart from the
argument and the return value, that the old function reports what is supported
by the old api, and the new function reports algorithms in the new api.</p><p>Own Id: OTP-15771</p></li></ul><h2 id="crypto-4-4-2-3" class="section-heading">
  <a href="#crypto-4-4-2-3" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 4.4.2.3</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-49" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-49" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Adding missing flag in BN-calls in SRP.</p><p>Own Id: OTP-17107</p></li></ul><h2 id="crypto-4-4-2-2" class="section-heading">
  <a href="#crypto-4-4-2-2" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 4.4.2.2</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-50" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-50" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Constant time comparisons added.</p><p>Own Id: OTP-16376</p></li></ul><h2 id="crypto-4-4-2-1" class="section-heading">
  <a href="#crypto-4-4-2-1" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 4.4.2.1</span>
</h2>
<h3 id="improvements-and-new-features-21" class="section-heading">
  <a href="#improvements-and-new-features-21" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>The ciphers aes_cfb8 and aes_cfb128 are now using the EVP interface. The
supported key lengths are 128, 192 and 256 bits.</p><p>Own Id: OTP-16133 Aux Id: PR-2407</p></li><li><p>The ciphers aes_cfb8 and aes_cfb128 are now available in FIPS enabled mode.</p><p>Own Id: OTP-16134 Aux Id: PR-2407</p></li></ul><h2 id="crypto-4-4-2" class="section-heading">
  <a href="#crypto-4-4-2" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 4.4.2</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-51" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-51" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Fixed build link error on Windows. Unresolved symbol 'bcmp'.</p><p>Own Id: OTP-15750 Aux Id: ERL-905</p></li></ul><h2 id="crypto-4-4-1" class="section-heading">
  <a href="#crypto-4-4-1" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 4.4.1</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-52" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-52" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Fixes a bug that caused <code class="inline">crypto:sign</code> and <code class="inline">crypto:verify</code> to return the error
message <code class="inline">badarg</code> instead of <code class="inline">notsup</code> in one case. That case was when signing
or verifying with eddsa keys (that is, ed15519 or ed448), but only when FIPS
was supported and enabled.</p><p>Own Id: OTP-15634</p></li></ul><h3 id="improvements-and-new-features-22" class="section-heading">
  <a href="#improvements-and-new-features-22" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>Added a crypto benchmark test suite.</p><p>Own Id: OTP-15447</p></li></ul><h2 id="crypto-4-4" class="section-heading">
  <a href="#crypto-4-4" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 4.4</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-53" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-53" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Updated the RSA options part in the crypto application's C-code, documentation
and tests.</p><p>Own Id: OTP-15302</p></li></ul><h3 id="improvements-and-new-features-23" class="section-heading">
  <a href="#improvements-and-new-features-23" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>Added ed25519 and ed448 sign/verify.</p><p>Requires OpenSSL 1.1.1 or higher as cryptolib under the OTP application
<code class="inline">crypto</code>.</p><p>Own Id: OTP-15419 Aux Id: OTP-15094</p></li><li><p>Fixed valgrind warnings.</p><p>Own Id: OTP-15467</p></li></ul><h2 id="crypto-4-3-3" class="section-heading">
  <a href="#crypto-4-3-3" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 4.3.3</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-54" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-54" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>The RSA options <code class="inline">rsa_mgf1_md</code>, <code class="inline">rsa_oaep_md</code>, and <code class="inline">rsa_oaep_label</code> were always
disabled. They will now be enabled when a suitable cryptolib is used.</p><p>They are still experimental and may change without prior notice.</p><p>Own Id: OTP-15212 Aux Id: ERL-675, PR1899, PR838</p></li><li><p>The ciphers <code class="inline">aes_ige256</code> and <code class="inline">blowfish_cbc</code> had naming issues in
<code class="inline">crypto:next_iv/2</code>.</p><p>Own Id: OTP-15283</p></li><li><p>the <code class="inline">RSA_SSLV23_PADDING</code> is disabled if LibreSSL is used as cryptlib. This is
due to compilation problems.</p><p>This will be investigated further in the future.</p><p>Own Id: OTP-15303</p></li></ul><h3 id="improvements-and-new-features-24" class="section-heading">
  <a href="#improvements-and-new-features-24" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>The supported named elliptic curves are now reported in <code class="inline">crypto:supports/0</code> in
a new entry tagged by <code class="inline">'curves'</code>.</p><p>The function <a href="crypto.html#ec_curves/0"><code class="inline">crypto:ec_curves/0</code></a> is kept for compatibility.</p><p>Own Id: OTP-14717 Aux Id: OTP-15244</p></li><li><p>The typing in the CRYPTO and PUBLIC_KEY applications are reworked and a few
mistakes are corrected.</p><p>The documentation is now generated from the typing and some clarifications are
made.</p><p>A new chapter on Algorithm Details such as key sizes and availability is added
to the CRYPTO User's Guide.</p><p>Own Id: OTP-15134</p></li><li><p>Support for SHA3 both as a separate hash and in HMAC is now available if
OpenSSL 1.1.1 or higher is used as cryptolib.</p><p>Available lengths are reported in the <code class="inline">'hashs'</code> entry in <code class="inline">crypto:supports/0</code>
as <code class="inline">sha3_*</code>.</p><p>Own Id: OTP-15153</p></li><li><p>The mac algorithm <code class="inline">poly1305</code> and the cipher algorithm <code class="inline">chacha20</code> are now
supported if OpenSSL 1.1.1 or higher is used as cryptolib.</p><p>Own Id: OTP-15164 Aux Id: OTP-15209</p></li><li><p>The key exchange Edward curves <code class="inline">x25519</code> and <code class="inline">x448</code> are now supported if
OpenSSL 1.1.1 or higher is used as cryptolib.</p><p>Own Id: OTP-15240 Aux Id: OTP-15133</p></li><li><p>The supported RSA options for sign/verify and encrypt/decrypt are now reported
in <code class="inline">crypto:supports/0</code> in a new entry tagged by '<code class="inline">rsa_opts</code>'.</p><p>The exakt set is still experimental and may change without prior notice.</p><p>Own Id: OTP-15260</p></li><li><p>The cipher <code class="inline">aes_ccm</code> is added.</p><p>Own Id: OTP-15286</p></li></ul><h2 id="crypto-4-3-2" class="section-heading">
  <a href="#crypto-4-3-2" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 4.3.2</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-55" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-55" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Update the crypto engine functions to handle multiple loads of an engine.</p><p><code class="inline">engine_load/3/4</code> is updated so it doesn't add the engine ID to OpenSSLs
internal list of engines which makes it possible to run the engine_load more
than once if it doesn't contain global data.</p><p>Added <code class="inline">ensure_engine_loaded/2/3</code> which guarantees that the engine just is
loaded once and the following calls just returns a reference to it. This is
done by add the ID to the internal OpenSSL list and check if it is already
registered when the function is called.</p><p>Added <code class="inline">ensure_engine_unloaded/1/2</code> to unload engines loaded with
ensure_engine_loaded.</p><p>Then some more utility functions are added.</p><p><code class="inline">engine_add/1</code>, adds the engine to OpenSSL internal list</p><p><code class="inline">engine_remove/1</code>, remove the engine from OpenSSL internal list</p><p><code class="inline">engine_get_id/1</code>, fetch the engines id</p><p><code class="inline">engine_get_name/1</code>, fetch the engine name</p><p>Own Id: OTP-15233</p></li></ul><h2 id="crypto-4-3-1" class="section-heading">
  <a href="#crypto-4-3-1" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 4.3.1</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-56" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-56" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Fixed a node crash in <code class="inline">crypto:compute_key(ecdh, ...)</code> when passing a wrongly
typed Others argument.</p><p>Own Id: OTP-15194 Aux Id: ERL-673</p></li></ul><h2 id="crypto-4-3" class="section-heading">
  <a href="#crypto-4-3" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 4.3</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-57" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-57" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Removed two undocumented and erroneous functions
(<code class="inline">crypto:dh_generate_parameters/2</code> and <code class="inline">crypto:dh_check/1</code>).</p><p>Own Id: OTP-14956 Aux Id: ERL-579</p></li><li><p>Fixed bug causing VM crash if doing runtime upgrade of a crypto module built
against OpenSSL older than 0.9.8h. Bug exists since OTP-20.2.</p><p>Own Id: OTP-15088</p></li></ul><h3 id="improvements-and-new-features-25" class="section-heading">
  <a href="#improvements-and-new-features-25" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>A new <code class="inline">rand</code> plugin algorithm has been implemented in <code class="inline">crypto</code>, that is:
<code class="inline">crypto_cache</code>. It uses strong random bytes as randomness source and caches
them to get good speed. See <a href="crypto.html#rand_seed_alg/1"><code class="inline">crypto:rand_seed_alg/1</code></a>.</p><p>Own Id: OTP-13370 Aux Id: PR-1573</p></li><li><p>Diffie-Hellman key functions are re-written with the EVP_PKEY api.</p><p>Own Id: OTP-14864</p></li></ul><h2 id="crypto-4-2-2-4" class="section-heading">
  <a href="#crypto-4-2-2-4" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 4.2.2.4</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-58" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-58" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Constant time comparisons added.</p><p>Own Id: OTP-16376</p></li></ul><h2 id="crypto-4-2-2-3" class="section-heading">
  <a href="#crypto-4-2-2-3" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 4.2.2.3</span>
</h2>
<h3 id="improvements-and-new-features-26" class="section-heading">
  <a href="#improvements-and-new-features-26" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>The ciphers aes_cfb8 and aes_cfb128 are now using the EVP interface. The
supported key lengths are 128, 192 and 256 bits.</p><p>Own Id: OTP-16133 Aux Id: PR-2407</p></li></ul><h2 id="crypto-4-2-2-1" class="section-heading">
  <a href="#crypto-4-2-2-1" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 4.2.2.1</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-59" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-59" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Fixed a node crash in <code class="inline">crypto:compute_key(ecdh, ...)</code> when passing a wrongly
typed Others argument.</p><p>Own Id: OTP-15194 Aux Id: ERL-673</p></li></ul><h2 id="crypto-4-2-2" class="section-heading">
  <a href="#crypto-4-2-2" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 4.2.2</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-60" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-60" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>If OPENSSL_NO_EC was set, the compilation of the crypto nifs failed.</p><p>Own Id: OTP-15073</p></li><li><p>C-compile errors for LibreSSL 2.7.0 - 2.7.2 fixed</p><p>Own Id: OTP-15074 Aux Id: ERL-618</p></li></ul><h2 id="crypto-4-2-1" class="section-heading">
  <a href="#crypto-4-2-1" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 4.2.1</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-61" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-61" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Fix build error caused by removed RSA padding functions in LibreSSL &gt;= 2.6.1</p><p>Own Id: OTP-14873</p></li></ul><h2 id="crypto-4-2" class="section-heading">
  <a href="#crypto-4-2" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 4.2</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-62" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-62" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>The compatibility function <code class="inline">void HMAC_CTX_free</code> in <code class="inline">crypto.c</code> erroneously
tried to return a value.</p><p>Own Id: OTP-14720</p></li></ul><h3 id="improvements-and-new-features-27" class="section-heading">
  <a href="#improvements-and-new-features-27" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>Rewrite public and private key encode/decode with EVP api. New RSA padding
options added. This is a modified half of PR-838.</p><p>Own Id: OTP-14446</p></li><li><p>The crypto API is extended to use private/public keys stored in an Engine for
sign/verify or encrypt/decrypt operations.</p><p>The ssl application provides an API to use this new engine concept in TLS.</p><p>Own Id: OTP-14448</p></li><li><p>Add support to plug in alternative implementations for some or all of the
cryptographic operations supported by the OpenSSL Engine API. When configured
appropriately, OpenSSL calls the engine's implementation of these operations
instead of its own.</p><p>Own Id: OTP-14567</p></li><li><p>Replaced a call of the OpenSSL deprecated function <code class="inline">DH_generate_parameters</code> in
<code class="inline">crypto.c</code>.</p><p>Own Id: OTP-14639</p></li><li><p>Documentation added about how to use keys stored in an Engine.</p><p>Own Id: OTP-14735 Aux Id: OTP-14448</p></li><li><p>Add engine_ ctrl_cmd_string/3,4 the OpenSSL Engine support in crypto.</p><p>Own Id: OTP-14801</p></li></ul><h2 id="crypto-4-1" class="section-heading">
  <a href="#crypto-4-1" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 4.1</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-63" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-63" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>On macOS, <code class="inline">crypto</code> would crash if <code class="inline">observer</code> had been started before <code class="inline">crypto</code>.
On the beta for macOS 10.13 (High Sierra), <code class="inline">crypto</code> would crash. Both of those
bugs have been fixed.</p><p>Own Id: OTP-14499 Aux Id: ERL-251 ERL-439</p></li></ul><h3 id="improvements-and-new-features-28" class="section-heading">
  <a href="#improvements-and-new-features-28" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>Extend crypto:sign, crypto:verify, public_key:sign and public_key:verify with:</p><p>* support for RSASSA-PS padding for signatures and for saltlength setting<br/>* X9.31 RSA padding.<br/>* sha, sha224, sha256, sha384, and sha512 for dss signatures as mentioned in
NIST SP 800-57 Part 1.<br/>* ripemd160 to be used for rsa signatures.</p><p>This is a manual merge of half of the pull request 838 by potatosalad from
Sept 2015.</p><p>Own Id: OTP-13704 Aux Id: PR838</p></li><li><p>A new tuple in <code class="inline">crypto:supports/0</code> reports supported MAC algorithms.</p><p>Own Id: OTP-14504</p></li></ul><h2 id="crypto-4-0" class="section-heading">
  <a href="#crypto-4-0" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 4.0</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-64" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-64" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>LibreSSL can now be used by the modernized crypto app.</p><p>Own Id: OTP-14247</p></li><li><p>Add compile option <code class="inline">-compile(no_native)</code> in modules with <code class="inline">on_load</code> directive
which is not yet supported by HiPE.</p><p>Own Id: OTP-14316 Aux Id: PR-1390</p></li><li><p>Fix a bug in aes cfb128 function introduced by the bug fix in GitHub pull
request <a href="https://github.com/erlang/otp/pull/1393">#1393</a>.</p><p>Own Id: OTP-14435 Aux Id: PR-1462, PR-1393, OTP-14313</p></li></ul><h3 id="improvements-and-new-features-29" class="section-heading">
  <a href="#improvements-and-new-features-29" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>Add basic support for CMAC</p><p>Own Id: OTP-13779 Aux Id: ERL-82 PR-1138</p></li><li><p>Removed functions deprecated in crypto-3.0 first released in OTP-R16B01</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-13873</p></li><li><p>The <code class="inline">crypto</code> application now supports OpenSSL 1.1.</p><p>Own Id: OTP-13900</p></li><li><p>Allow Erlang/OTP to use OpenSSL in FIPS-140 mode, in order to satisfy specific
security requirements (mostly by different parts of the US federal
government).</p><p>See the new crypto users guide &quot;FIPS mode&quot; chapter about building and using
the FIPS support which is disabled by default.</p><p>(Thanks to dszoboszlay and legoscia)</p><p>Own Id: OTP-13921 Aux Id: PR-1180</p></li><li><p>Crypto chacha20-poly1305 as in RFC 7539 enabled for OpenSSL &gt;= 1.1.</p><p>Thanks to mururu.</p><p>Own Id: OTP-14092 Aux Id: PR-1291</p></li><li><p>RSA key generation added to <a href="crypto.html#generate_key/2"><code class="inline">crypto:generate_key/2</code></a>. Thanks to wiml.</p><p>An interface is also added to <a href="../../apps/public_key/public_key.html#generate_key/1"><code class="inline">public_key:generate_key/1</code></a>.</p><p>Own Id: OTP-14140 Aux Id: ERL-165, PR-1299</p></li><li><p>Raised minimum requirement for OpenSSL version to OpenSSL-0.9.8.c although we
recommend a much higher version, that is a version that is still maintained
officially by the OpenSSL project. Note that using such an old version may
restrict the crypto algorithms supported.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-14171</p></li><li><p>Deprecate crypto:rand_uniform/2 as it is not cryptographically strong</p><p>Own Id: OTP-14274</p></li><li><p>The Crypto application now supports generation of cryptographically strong
random numbers (floats &lt; 1.0 and integer arbitrary ranges) as a plugin to the
'rand' module.</p><p>Own Id: OTP-14317 Aux Id: PR-1372</p></li><li><p>This replaces the hard coded test values for AES, CMAC and GCM ciphers with
the full validation set from NIST's CAVP program.</p><p>Own Id: OTP-14436 Aux Id: PR-1396</p></li></ul><h2 id="crypto-3-7-4" class="section-heading">
  <a href="#crypto-3-7-4" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 3.7.4</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-65" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-65" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Fix a bug with AES CFB 128 for 192 and 256 bit keys. Thanks to kellymclaughlin
!</p><p>Own Id: OTP-14313 Aux Id: PR-1393</p></li></ul><h2 id="crypto-3-7-3" class="section-heading">
  <a href="#crypto-3-7-3" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 3.7.3</span>
</h2>
<h3 id="improvements-and-new-features-30" class="section-heading">
  <a href="#improvements-and-new-features-30" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>The implementation of the key exchange algorithms
diffie-hellman-group-exchange-sha* are optimized, up to a factor of 11 for
the slowest ( = biggest and safest) group size.</p><p>Own Id: OTP-14169 Aux Id: seq-13261</p></li></ul><h2 id="crypto-3-7-2" class="section-heading">
  <a href="#crypto-3-7-2" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 3.7.2</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-66" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-66" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>The crypto application has been fixed to not use RC2 against OpenSSL built
with RC2 disabled.</p><p>Own Id: OTP-13895 Aux Id: PR-1163</p></li><li><p>The crypto application has been fixed to not use RC4 against OpenSSL built
with RC4 disabled.</p><p>Own Id: OTP-13896 Aux Id: PR-1169</p></li></ul><h3 id="improvements-and-new-features-31" class="section-heading">
  <a href="#improvements-and-new-features-31" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>To ease troubleshooting, <a href="../../apps/erts/erlang.html#load_nif/2"><code class="inline">erlang:load_nif/2</code></a> now includes the return value
from a failed call to load/reload/upgrade in the text part of the error tuple.
The <code class="inline">crypto</code> NIF makes use of this feature by returning the source line
where/if the initialization fails.</p><p>Own Id: OTP-13951</p></li></ul><h2 id="crypto-3-7-1" class="section-heading">
  <a href="#crypto-3-7-1" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 3.7.1</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-67" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-67" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Crypto has been fixed to work against OpenSSL versions with disabled DES
ciphers. Correct spelling of cipher algorithm 'des3_cfb' has been introduced;
the previous misspeling still works.</p><p>Own Id: OTP-13783 Aux Id: ERL-203</p></li><li><p>The size of an internal array in crypto has been fixed to not segfault when
having all possible ciphers. Bug fix by Duncan Overbruck.</p><p>Own Id: OTP-13789 Aux Id: PR-1140</p></li></ul><h2 id="crypto-3-7" class="section-heading">
  <a href="#crypto-3-7" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 3.7</span>
</h2>
<h3 id="improvements-and-new-features-32" class="section-heading">
  <a href="#improvements-and-new-features-32" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>Refactor <code class="inline">crypto</code> to use the EVP interface of OpenSSL, which is the
recommended interface that also enables access to hardware acceleration for
some operations.</p><p>Own Id: OTP-12217</p></li><li><p>Add support for 192-bit keys for the <code class="inline">aes_cbc</code> cipher.</p><p>Own Id: OTP-13206 Aux Id: pr 832</p></li><li><p>Add support for 192-bit keys for <code class="inline">aes_ecb</code>.</p><p>Own Id: OTP-13207 Aux Id: pr829</p></li><li><p>Deprecate the function <code class="inline">crypto:rand_bytes</code> and make sure that
<code class="inline">crypto:strong_rand_bytes</code> is used in all places that are cryptographically
significant.</p><p>Own Id: OTP-13214</p></li><li><p>Enable AES-GCM encryption/decryption to change the tag length between 1 to 16
bytes.</p><p>Own Id: OTP-13483 Aux Id: PR-998</p></li></ul><h2 id="crypto-3-6-3" class="section-heading">
  <a href="#crypto-3-6-3" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 3.6.3</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-68" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-68" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Fix bug for <code class="inline">aes_ecb</code> block crypto when data is larger than 16 bytes.</p><p>Own Id: OTP-13249</p></li><li><p>Improve portability of ECC tests in Crypto and SSL for &quot;exotic&quot; OpenSSL
versions.</p><p>Own Id: OTP-13311</p></li></ul><h2 id="crypto-3-6-2" class="section-heading">
  <a href="#crypto-3-6-2" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 3.6.2</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-69" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-69" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Small documentation fixes</p><p>Own Id: OTP-13017</p></li></ul><h2 id="crypto-3-6-1" class="section-heading">
  <a href="#crypto-3-6-1" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 3.6.1</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-70" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-70" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Make <a href="crypto.html#ec_curves/0"><code class="inline">crypto:ec_curves/0</code></a> return empty list if elliptic curve is not supported
at all.</p><p>Own Id: OTP-12944</p></li></ul><h2 id="crypto-3-6" class="section-heading">
  <a href="#crypto-3-6" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 3.6</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-71" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-71" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Enhance crypto:generate_key to calculate ECC public keys from private key.</p><p>Own Id: OTP-12394</p></li><li><p>Fix bug in <code class="inline">crypto:generate_key</code> for <code class="inline">ecdh</code> that could cause VM crash for
faulty input.</p><p>Own Id: OTP-12733</p></li></ul><h3 id="improvements-and-new-features-33" class="section-heading">
  <a href="#improvements-and-new-features-33" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>Use the EVP API for AES-CBC crypto to enables the use of hardware acceleration
for AES-CBC crypto on newer Intel CPUs (AES-NI), among other platforms.</p><p>Own Id: OTP-12380</p></li><li><p>Add AES ECB block encryption.</p><p>Own Id: OTP-12403</p></li></ul><h2 id="crypto-3-5" class="section-heading">
  <a href="#crypto-3-5" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 3.5</span>
</h2>
<h3 id="improvements-and-new-features-34" class="section-heading">
  <a href="#improvements-and-new-features-34" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>Extend block_encrypt/decrypt for aes_cfb8 and aes_cfb128 to accept keys of
length 128, 192 and 256 bits. Before only 128 bit keys were accepted.</p><p>Own Id: OTP-12467</p></li></ul><h2 id="crypto-3-4-2" class="section-heading">
  <a href="#crypto-3-4-2" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 3.4.2</span>
</h2>
<h3 id="improvements-and-new-features-35" class="section-heading">
  <a href="#improvements-and-new-features-35" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>Add configure option --with-ssl-incl=PATH to support OpenSSL installations
with headers and libraries at different places.</p><p>Own Id: OTP-12215 Aux Id: seq12700</p></li><li><p>Add configure option --with-ssl-rpath to control which runtime library path to
use for dynamic linkage toward OpenSSL.</p><p>Own Id: OTP-12316 Aux Id: seq12753</p></li></ul><h2 id="crypto-3-4-1" class="section-heading">
  <a href="#crypto-3-4-1" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 3.4.1</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-72" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-72" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Make <code class="inline">crypto</code> verify major version number of OpenSSL header files and runtime
library. Loading of <code class="inline">crypto</code> will fail if there is a version mismatch.</p><p>Own Id: OTP-12146 Aux Id: seq12700</p></li></ul><h2 id="crypto-3-4" class="section-heading">
  <a href="#crypto-3-4" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 3.4</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-73" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-73" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Fix memory leak in <code class="inline">crypto:hmac_init/upgrade/final</code> functions for all data and
in <code class="inline">crypto:hmac/3/4</code> for data larger than 20000 bytes. Bug exists since OTP
17.0.</p><p>Own Id: OTP-11953</p></li><li><p>Fix memory leak in <code class="inline">crypto</code> for elliptic curve.</p><p>Own Id: OTP-11999</p></li></ul><h3 id="improvements-and-new-features-36" class="section-heading">
  <a href="#improvements-and-new-features-36" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>Add <code class="inline">aes_cfb8</code> cypher to <code class="inline">crypto:block_encrypt</code> and <code class="inline">block_decrypt</code>.</p><p>Own Id: OTP-11911</p></li></ul><h2 id="crypto-3-3" class="section-heading">
  <a href="#crypto-3-3" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 3.3</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-74" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-74" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Fix memory leaks and invalid deallocations in <code class="inline">mod_pow</code>, <code class="inline">mod_exp</code> and
<code class="inline">generate_key(srp,...)</code> when bad arguments are passed. (Thanks to Florian
Zumbiehi)</p><p>Own Id: OTP-11550</p></li><li><p>Correction of the word 'ChipherText' throughout the documentation (Thanks to
Andrew Tunnell-Jones)</p><p>Own Id: OTP-11609</p></li><li><p>Fix fatal bug when using a hmac context variable in more than one call to
<code class="inline">hmac_update</code> or <code class="inline">hmac_final</code>. The reuse of hmac contexts has never worked as
the underlying OpenSSL implementation does not support it. It is now
documented as having undefined behaviour, but it does not crash or corrupt the
VM anymore.</p><p>Own Id: OTP-11724</p></li><li><p>Crypto handles out-of-memory with a controlled abort instead of
crash/corruption. (Thanks to Florian Zumbiehi)</p><p>Own Id: OTP-11725</p></li><li><p>Application upgrade (appup) files are corrected for the following
applications:</p><p><code class="inline">asn1, common_test, compiler, crypto, debugger, dialyzer, edoc, eldap, erl_docgen, et, eunit, gs, hipe, inets, observer, odbc, os_mon, otp_mibs, parsetools, percept, public_key, reltool, runtime_tools, ssh, syntax_tools, test_server, tools, typer, webtool, wx, xmerl</code></p><p>A new test utility for testing appup files is added to test_server. This is
now used by most applications in OTP.</p><p>(Thanks to Tobias Schlager)</p><p>Own Id: OTP-11744</p></li></ul><h3 id="improvements-and-new-features-37" class="section-heading">
  <a href="#improvements-and-new-features-37" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>By giving --enable-static-{nifs,drivers} to configure it is now possible to
statically linking of nifs and drivers to the main Erlang VM binary. At the
moment only the asn1 and crypto nifs of the Erlang/OTP nifs and drivers have
been prepared to be statically linked. For more details see the Installation
Guide in the System documentation.</p><p>Own Id: OTP-11258</p></li><li><p>Add IGE mode for AES cipher in crypto (Thanks to Yura Beznos).</p><p>Own Id: OTP-11522</p></li><li><p>Moved elliptic curve definition from the crypto NIF/OpenSSL into Erlang code,
adds the RFC-5639 brainpool curves and makes TLS use them (RFC-7027).</p><p>Thanks to Andreas Schultz</p><p>Own Id: OTP-11578</p></li><li><p>Remove all obsolete application processes from crypto and make it into a pure
library application.</p><p>Own Id: OTP-11619</p></li></ul><h2 id="crypto-3-2" class="section-heading">
  <a href="#crypto-3-2" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 3.2</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-75" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-75" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Fix uninitialized pointers in crypto (Thanks to Anthony Ramine)</p><p>Own Id: OTP-11510</p></li></ul><h2 id="crypto-3-1" class="section-heading">
  <a href="#crypto-3-1" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 3.1</span>
</h2>
<h3 id="improvements-and-new-features-38" class="section-heading">
  <a href="#improvements-and-new-features-38" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>Refactor ecdsa cipher to simplify code and improve performance.</p><p>Own Id: OTP-11320</p></li></ul><h2 id="crypto-3-0" class="section-heading">
  <a href="#crypto-3-0" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 3.0</span>
</h2>
<h3 id="improvements-and-new-features-39" class="section-heading">
  <a href="#improvements-and-new-features-39" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>Integrate elliptic curve contribution from Andreas Schultz</p><p>In order to be able to support elliptic curve cipher suites in SSL/TLS,
additions to handle elliptic curve infrastructure has been added to public_key
and crypto.</p><p>This also has resulted in a rewrite of the crypto API to gain consistency and
remove unnecessary overhead. All OTP applications using crypto has been
updated to use the new API.</p><p>Impact: Elliptic curve cryptography (ECC) offers equivalent security with
smaller key sizes than other public key algorithms. Smaller key sizes result
in savings for power, memory, bandwidth, and computational cost that make ECC
especially attractive for constrained environments.</p><p>Own Id: OTP-11009</p></li><li><p>Fixed a spelling mistake in crypto docs. Thanks to Klaus Trainer</p><p>Own Id: OTP-11058</p></li></ul><h3 id="known-bugs-and-problems" class="section-heading">
  <a href="#known-bugs-and-problems" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Known Bugs and Problems</span>
</h3>
<ul><li><p>Make the crypto functions interruptible by chunking input when it is very
large and bumping reductions in the nifs.</p><p>Not yet implemented for block_encrypt|decrypt/4</p><p>Impact: Individual calls to crypto functions may take longer time but over all
system performance should improve as crypto calls will not become throughput
bottlenecks.</p><p>Own Id: OTP-11142</p></li></ul><h2 id="crypto-2-3" class="section-heading">
  <a href="#crypto-2-3" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 2.3</span>
</h2>
<h3 id="improvements-and-new-features-40" class="section-heading">
  <a href="#improvements-and-new-features-40" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>Enable runtime upgrade of crypto including the OpenSSL library used by crypto.</p><p>Own Id: OTP-10596</p></li><li><p>Improve documentation and tests for hmac functions in crypto. Thanks to Daniel
White</p><p>Own Id: OTP-10640</p></li><li><p>Added ripemd160 support to crypto. Thanks to Michael Loftis</p><p>Own Id: OTP-10667</p></li></ul><h2 id="crypto-2-2" class="section-heading">
  <a href="#crypto-2-2" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 2.2</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-76" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-76" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Remove unnecessary dependency to libssl from crypto NIF library. This
dependency was introduced by accident in R14B04.</p><p>Own Id: OTP-10064</p></li></ul><h3 id="improvements-and-new-features-41" class="section-heading">
  <a href="#improvements-and-new-features-41" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>Add crypto and public_key support for the hash functions SHA224, SHA256,
SHA384 and SHA512 and also hmac and rsa_sign/verify support using these hash
functions. Thanks to Andreas Schultz for making a prototype.</p><p>Own Id: OTP-9908</p></li><li><p>Optimize RSA private key handling in <code class="inline">crypto</code> and <code class="inline">public_key</code>.</p><p>Own Id: OTP-10065</p></li><li><p>Make <code class="inline">crypto:aes_cfb_128_encrypt</code> and <code class="inline">crypto:aes_cfb_128_decrypt</code> handle data
and cipher with arbitrary length. (Thanks to Stefan Zegenhagen)</p><p>Own Id: OTP-10136</p></li></ul><h2 id="crypto-2-1" class="section-heading">
  <a href="#crypto-2-1" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 2.1</span>
</h2>
<h3 id="improvements-and-new-features-42" class="section-heading">
  <a href="#improvements-and-new-features-42" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>public_key, ssl and crypto now supports PKCS-8</p><p>Own Id: OTP-9312</p></li><li><p>Erlang/OTP can now be built using parallel make if you limit the number of
jobs, for instance using '<code class="inline">make -j6</code>' or '<code class="inline">make -j10</code>'. '<code class="inline">make -j</code>' does not
work at the moment because of some missing dependencies.</p><p>Own Id: OTP-9451</p></li><li><p>Add DES and Triple DES cipher feedback (CFB) mode functions to <code class="inline">crypto</code>.
(Thanks to Paul Guyot)</p><p>Own Id: OTP-9640</p></li><li><p>Add sha256, sha384 and sha512 support for <code class="inline">crypto:rsa_verify</code>.</p><p>Own Id: OTP-9778</p></li></ul><h2 id="crypto-2-0-4" class="section-heading">
  <a href="#crypto-2-0-4" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 2.0.4</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-77" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-77" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p><code class="inline">crypto:rand_uniform</code> works correctly for negative integers. Fails with
<code class="inline">badarg</code> exception for invalid ranges (when <code class="inline">Hi =&lt; Lo</code>) instead of returning
incorrect output.</p><p>Own Id: OTP-9526</p></li><li><p>Fix win32 OpenSSL static linking (Thanks to Dave Cottlehuber)</p><p>Own Id: OTP-9532</p></li></ul><h2 id="crypto-2-0-3" class="section-heading">
  <a href="#crypto-2-0-3" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 2.0.3</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-78" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-78" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Various small documentation fixes (Thanks to Bernard Duggan)</p><p>Own Id: OTP-9172</p></li></ul><h3 id="improvements-and-new-features-43" class="section-heading">
  <a href="#improvements-and-new-features-43" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>New <code class="inline">crypto</code> support for streaming of AES CTR and HMAC. (Thanks to Travis
Jensen)</p><p>Own Id: OTP-9275</p></li><li><p>Due to standard library DLL mismatches between versions of OpenSSL and
Erlang/OTP, OpenSSL is now linked statically to the crypto driver on Windows.
This fixes problems starting crypto when running Erlang as a service on all
Windows versions.</p><p>Own Id: OTP-9280</p></li></ul><h2 id="crypto-2-0-2-2" class="section-heading">
  <a href="#crypto-2-0-2-2" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 2.0.2.2</span>
</h2>
<h3 id="improvements-and-new-features-44" class="section-heading">
  <a href="#improvements-and-new-features-44" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>Strengthened random number generation. (Thanks to Geoff Cant)</p><p>Own Id: OTP-9225</p></li></ul><h2 id="crypto-2-0-2-1" class="section-heading">
  <a href="#crypto-2-0-2-1" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 2.0.2.1</span>
</h2>
<h3 id="improvements-and-new-features-45" class="section-heading">
  <a href="#improvements-and-new-features-45" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>Misc. Updates.</p><p>Own Id: OTP-9132</p></li></ul><h2 id="crypto-2-0-2" class="section-heading">
  <a href="#crypto-2-0-2" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 2.0.2</span>
</h2>
<h3 id="improvements-and-new-features-46" class="section-heading">
  <a href="#improvements-and-new-features-46" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>AES CTR encryption support in <code class="inline">crypto</code>.</p><p>Own Id: OTP-8752 Aux Id: seq11642</p></li></ul><h2 id="crypto-2-0-1" class="section-heading">
  <a href="#crypto-2-0-1" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 2.0.1</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-79" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-79" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Crypto dialyzer type error in md5_mac and sha_mac.</p><p>Own Id: OTP-8718</p></li><li><p>RC4 stream cipher didn't work. This since the new NIF implementation of
<code class="inline">crypto:rc4_encrypt_with_state/2</code> introduced in <code class="inline">crypto-2.0</code> didn't return an
updated state. (Thanks to Paul Guyot)</p><p>Own Id: OTP-8781</p></li><li><p>A number of memory leaks in the crypto NIF library have been fixed.</p><p>Own Id: OTP-8810</p></li></ul><h3 id="improvements-and-new-features-47" class="section-heading">
  <a href="#improvements-and-new-features-47" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>Added erlang:system_info(build_type) which makes it easier to chose drivers,
NIF libraries, etc based on build type of the runtime system.</p><p>The NIF library for crypto can now be built for valgrind and/or debug as
separate NIF libraries that will be automatically loaded if the runtime system
has been built with a matching build type.</p><p>Own Id: OTP-8760</p></li></ul><h2 id="crypto-2-0" class="section-heading">
  <a href="#crypto-2-0" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 2.0</span>
</h2>
<h3 id="improvements-and-new-features-48" class="section-heading">
  <a href="#improvements-and-new-features-48" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>crypto application changed to use NIFs instead of driver.</p><p>Own Id: OTP-8333</p></li><li><p>des_ecb_encrypt/2 and des_ecb_decrypt/2 has been added to the crypto module.
The crypto:md4/1 function has been documented.</p><p>Own Id: OTP-8551</p></li><li><p>The undocumented, unsupported, and deprecated function <code class="inline">lists:flat_length/1</code>
has been removed.</p><p>Own Id: OTP-8584</p></li><li><p>New variants of <code class="inline">crypto:dss_sign</code> and <code class="inline">crypto:dss_verify</code> with an extra
argument to control how the digest is calculated.</p><p>Own Id: OTP-8700</p></li></ul><h2 id="crypto-1-6-4" class="section-heading">
  <a href="#crypto-1-6-4" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 1.6.4</span>
</h2>
<h3 id="improvements-and-new-features-49" class="section-heading">
  <a href="#improvements-and-new-features-49" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>Cross compilation improvements and other build system improvements.</p><p>Most notable:</p><ul><li>Lots of cross compilation improvements. The old cross compilation support
was more or less non-existing as well as broken. Please, note that the cross
compilation support should still be considered as experimental. Also note
that old cross compilation configurations cannot be used without
modifications. For more information on cross compiling Erlang/OTP see the
<code class="inline">$ERL_TOP/INSTALL-CROSS.md</code> file.</li><li>Support for staged install using
<a href="http://www.gnu.org/prep/standards/html_node/DESTDIR.html">DESTDIR</a>. The old
broken <code class="inline">INSTALL_PREFIX</code> has also been fixed. For more information see the
<code class="inline">$ERL_TOP/INSTALL.md</code> file.</li><li>Documentation of the <code class="inline">release</code> target of the top <code class="inline">Makefile</code>. For more
information see the <code class="inline">$ERL_TOP/INSTALL.md</code> file.</li><li><code class="inline">make install</code> now by default creates relative symbolic links instead of
absolute ones. For more information see the <code class="inline">$ERL_TOP/INSTALL.md</code> file.</li><li><code class="inline">$ERL_TOP/configure --help=recursive</code> now works and prints help for all
applications with <code class="inline">configure</code> scripts.</li><li>Doing <code class="inline">make install</code>, or <code class="inline">make release</code> directly after <code class="inline">make all</code> no longer
triggers miscellaneous rebuilds.</li><li>Existing bootstrap system is now used when doing <code class="inline">make install</code>, or
<code class="inline">make release</code> without a preceding <code class="inline">make all</code>.</li><li>The <code class="inline">crypto</code> and <code class="inline">ssl</code> applications use the same runtime library path when
dynamically linking against <code class="inline">libssl.so</code> and <code class="inline">libcrypto.so</code>. The runtime
library search path has also been extended.</li><li>The <code class="inline">configure</code> scripts of <code class="inline">erl_interface</code> and <code class="inline">odbc</code> now search for thread
libraries and thread library quirks the same way as ERTS do.</li><li>The <code class="inline">configure</code> script of the <code class="inline">odbc</code> application now also looks for odbc
libraries in <code class="inline">lib64</code> and <code class="inline">lib/64</code> directories when building on a 64-bit
system.</li><li>The <code class="inline">config.h.in</code> file in the <code class="inline">erl_interface</code> application is now
automatically generated in instead of statically updated which reduces the
risk of <code class="inline">configure</code> tests without any effect.</li></ul><p>(Thanks to Henrik Riomar for suggestions and testing)</p><p>(Thanks to Winston Smith for the AVR32-Linux cross configuration and testing)</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-8323</p></li><li><p>The crypto module now supports Blowfish in ECB, CBC and OFB modes. (Thanks to
Paul Oliver.)</p><p>Own Id: OTP-8331</p></li><li><p>The documentation is now possible to build in an open source environment after
a number of bugs are fixed and some features are added in the documentation
build process.</p><p>- The arity calculation is updated.</p><p>- The module prefix used in the function names for bif's are removed in the
generated links so the links will look like
&quot;<a href="http://www.erlang.org/doc/man/erlang.html#append_element-2%22">http://www.erlang.org/doc/man/erlang.html#append_element-2&quot;</a> instead of
&quot;<a href="http://www.erlang.org/doc/man/erlang.html#erlang:append_element-2%22">http://www.erlang.org/doc/man/erlang.html#erlang:append_element-2&quot;</a>.</p><p>- Enhanced the menu positioning in the html documentation when a new page is
loaded.</p><p>- A number of corrections in the generation of man pages (thanks to Sergei
Golovan)</p><p>- The legal notice is taken from the xml book file so OTP's build process can
be used for non OTP applications.</p><p>Own Id: OTP-8343</p></li></ul><h2 id="crypto-1-6-3" class="section-heading">
  <a href="#crypto-1-6-3" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 1.6.3</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-80" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-80" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Suppressed false valgrind errors caused by libcrypto using uninitialized data
as entropy.</p><p>Own Id: OTP-8200</p></li></ul><h3 id="improvements-and-new-features-50" class="section-heading">
  <a href="#improvements-and-new-features-50" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>The documentation is now built with open source tools (xsltproc and fop) that
exists on most platforms. One visible change is that the frames are removed.</p><p>Own Id: OTP-8201</p></li><li><p>When the crypto application failed to load the OpenSSL/LibEAY shared object,
error indication was sparse. Now a more specific error message is sent to the
error logger.</p><p>Own Id: OTP-8281</p></li></ul><h2 id="crypto-1-6-2" class="section-heading">
  <a href="#crypto-1-6-2" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 1.6.2</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-81" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-81" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Fixed emulator crash caused by crypto using an old openssl version that did
not cope with large file descriptors.</p><p>Own Id: OTP-8261 Aux Id: seq11434</p></li></ul><h2 id="crypto-1-6-1" class="section-heading">
  <a href="#crypto-1-6-1" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 1.6.1</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-82" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-82" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p><code class="inline">Makefile.in</code> has been updated to use the LDFLAGS environment variable (if
set). (Thanks to Davide Pesavento.)</p><p>Own Id: OTP-8157</p></li></ul><h3 id="improvements-and-new-features-51" class="section-heading">
  <a href="#improvements-and-new-features-51" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>Support for Blowfish cfb64 added to <code class="inline">crypto</code>.</p><p>Own Id: OTP-8096</p></li><li><p>New function <code class="inline">crypto:aes_cbc_ivec</code></p><p>Own Id: OTP-8141</p></li></ul><h2 id="crypto-1-6" class="section-heading">
  <a href="#crypto-1-6" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 1.6</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-83" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-83" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>The <code class="inline">dh_compute_key</code> sometimes returned a SharedSecret of incorrect size.</p><p>Own Id: OTP-7674</p></li></ul><h3 id="improvements-and-new-features-52" class="section-heading">
  <a href="#improvements-and-new-features-52" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>Optimization for drivers by creating small binaries direct on process heap.</p><p>Own Id: OTP-7762</p></li></ul><h2 id="crypto-1-5-3" class="section-heading">
  <a href="#crypto-1-5-3" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 1.5.3</span>
</h2>
<h3 id="improvements-and-new-features-53" class="section-heading">
  <a href="#improvements-and-new-features-53" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>Added new functions: dss_verify/3, rsa_verify/3, rsa_verify/4, dss_sign/2,
rsa_sign/2, rsa_sign/3, rsa_public_encrypt, rsa_private_decrypt/3,
rsa_private_encrypt/3, rsa_public_decrypt/3, dh_generate_key/1,
dh_generate_key/2, dh_compute_key/3.</p><p>Own Id: OTP-7545</p></li></ul><h2 id="crypto-1-5-2-1" class="section-heading">
  <a href="#crypto-1-5-2-1" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 1.5.2.1</span>
</h2>
<h3 id="improvements-and-new-features-54" class="section-heading">
  <a href="#improvements-and-new-features-54" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>Minor performance optimization.</p><p>Own Id: OTP-7521</p></li></ul><h2 id="crypto-1-5-2" class="section-heading">
  <a href="#crypto-1-5-2" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 1.5.2</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-84" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-84" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>./configure has been improved to find 64-bit OpenSSL libraries.</p><p>Own Id: OTP-7270</p></li></ul><h3 id="improvements-and-new-features-55" class="section-heading">
  <a href="#improvements-and-new-features-55" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>crypto and zlib drivers improved to allow concurrent smp access.</p><p>Own Id: OTP-7262</p></li></ul><h2 id="crypto-1-5-1-1" class="section-heading">
  <a href="#crypto-1-5-1-1" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 1.5.1.1</span>
</h2>
<h3 id="improvements-and-new-features-56" class="section-heading">
  <a href="#improvements-and-new-features-56" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>The linked in driver for the crypto application is now linked statically
against the OpenSSL libraries, to avoid installation and runtime problems in
connection to the OpenSSL library locations.</p><p>Own Id: OTP-6680</p></li><li><p>Minor Makefile changes.</p><p>Own Id: OTP-6689</p></li></ul><h2 id="crypto-1-5" class="section-heading">
  <a href="#crypto-1-5" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 1.5</span>
</h2>
<h3 id="improvements-and-new-features-57" class="section-heading">
  <a href="#improvements-and-new-features-57" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>It is now explicitly checked at start-up that the crypto driver is properly
loaded (Thanks to Claes Wikstrom).</p><p>Own Id: OTP-6109</p></li></ul><h2 id="crypto-1-4" class="section-heading">
  <a href="#crypto-1-4" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 1.4</span>
</h2>
<h3 id="improvements-and-new-features-58" class="section-heading">
  <a href="#improvements-and-new-features-58" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>The previously undocumented and UNSUPPORTED <code class="inline">ssh</code> application has been updated
and documented. This release of the <code class="inline">ssh</code> application is still considered to
be a beta release and (if necessary) there could still be changes in its API
before it reaches 1.0.</p><p>Also, more cryptographic algorithms have been added to the <code class="inline">crypto</code>
application.</p><p>*<strong> POTENTIAL INCOMPATIBILITY *</strong></p><p>Own Id: OTP-5631</p></li></ul><h2 id="crypto-1-3" class="section-heading">
  <a href="#crypto-1-3" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 1.3</span>
</h2>
<h3 id="improvements-and-new-features-59" class="section-heading">
  <a href="#improvements-and-new-features-59" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li>Added support for RFC 3826 - The Advanced Encryption Standard (AES) Cipher
Algorithm in the SNMP User-based Security Model.<br/>Martin Björklund</li></ul><h2 id="crypto-1-2-3" class="section-heading">
  <a href="#crypto-1-2-3" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 1.2.3</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-85" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-85" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>Linked in drivers in the crypto, and asn1 applications are now compiled with
the -D_THREAD_SAFE and -D_REENTRANT switches on unix when the emulator has
thread support enabled.</p><p>Linked in drivers on MacOSX are not compiled with the undocumented -lbundle1.o
switch anymore. Thanks to Sean Hinde who sent us a patch.</p><p>Linked in driver in crypto, and port programs in ssl, now compiles on OSF1.</p><p>Minor makefile improvements in runtime_tools.</p><p>Own Id: OTP-5346</p></li></ul><h2 id="crypto-1-2-2" class="section-heading">
  <a href="#crypto-1-2-2" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 1.2.2</span>
</h2>
<h3 id="improvements-and-new-features-60" class="section-heading">
  <a href="#improvements-and-new-features-60" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li><p>Corrected error handling. If the port to the driver that crypto uses is
unexpectedly closed (which should not happen during normal operation of
crypto), crypto will terminate immediately (rather than crashing the next time
crypto is used). Also corrected build problems on Mac OS X.</p><p>Own Id: OTP-5279</p></li></ul><h2 id="crypto-1-2-1" class="section-heading">
  <a href="#crypto-1-2-1" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 1.2.1</span>
</h2>
<h3 id="fixed-bugs-and-malfunctions-86" class="section-heading">
  <a href="#fixed-bugs-and-malfunctions-86" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>It was not possible in R9 to relink the crypto driver. The object file was
missing as well as an example makefile. The crypto driver object file is now
released with the application (installed in priv/obj). An example makefile has
also been added to the priv/obj directory. The makefile serves as an example
of how to relink the driver on Unix (crypto_drv.so) or Windows
(crypto_drv.dll).</p><p>Own Id: OTP-4828 Aux Id: seq8193</p></li></ul><h2 id="crypto-1-2" class="section-heading">
  <a href="#crypto-1-2" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 1.2</span>
</h2>
<h3 id="improvements-and-new-features-61" class="section-heading">
  <a href="#improvements-and-new-features-61" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li>Previous versions of Crypto where delivered with statically linked binaries
based on SSLeay. That is not longer the case. The current version of Crypto
requires dynamically linked OpenSSL libraries that the user has to install.
The library needed is <code class="inline">libcrypto.so</code> (Unix) or <code class="inline">libeay32.[lib|dll]</code> (Win32).
For further details see the crypto(6) application manual page.</li><li>This version of Crypto uses the new DES interface of OpenSSL 0.9.7, which is
not backward compatible with earlier versions of OpenSSL.</li><li>The functions <code class="inline">des_ede3_cbc_encrypt/5</code> and <code class="inline">des_ede3_cbc_decrypt/5</code> have been
renamed to <code class="inline">des3_cbc_encrypt/5</code> and <code class="inline">des3_cbc_decrypt/5</code>, respectively. The
old functions have been retained (they are deprecated and not listed in the
crypto(3) manual page).</li></ul><h3 id="reported-fixed-bugs-and-malfunctions" class="section-heading">
  <a href="#reported-fixed-bugs-and-malfunctions" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Reported Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>The start of crypto failed on Windows, due to erroneous addition of a DES3
algorithm.</p><p>Own Id: OTP-4684<br/>Aux Id: seq7864</p></li></ul><h2 id="crypto-1-1-3" class="section-heading">
  <a href="#crypto-1-1-3" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 1.1.3</span>
</h2>
<h3 id="reported-fixed-bugs-and-malfunctions-1" class="section-heading">
  <a href="#reported-fixed-bugs-and-malfunctions-1" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Reported Fixed Bugs and Malfunctions</span>
</h3>
<ul><li>To obtain backward compatibility with the old SSLeay package, and with earlier
versions of OpenSSL, the macro OPENSSL_DES_LIBDES_COMPATIBILITY has been added
to <code class="inline">crypto_drv.c</code>. This is of importance only for the open source version of
Crypto.</li></ul><h2 id="crypto-1-1-2" class="section-heading">
  <a href="#crypto-1-1-2" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 1.1.2</span>
</h2>
<h3 id="reported-fixed-bugs-and-malfunctions-2" class="section-heading">
  <a href="#reported-fixed-bugs-and-malfunctions-2" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Reported Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>In the manual page <a href="crypto.html"><code class="inline">crypto</code></a> the function names <code class="inline">md5_finish</code> and <code class="inline">sha_finish</code>
have been changed to <code class="inline">md5_final</code> and <code class="inline">sha_final</code> to correctly document the
implementation.</p><p>Own Id: OTP-3409</p></li></ul><h2 id="crypto-1-1-1" class="section-heading">
  <a href="#crypto-1-1-1" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 1.1.1</span>
</h2>
<p>Code replacement in runtime is supported. Upgrade can be done from from version
1.1 and downgrade to version 1.1.</p><h3 id="improvements-and-new-features-62" class="section-heading">
  <a href="#improvements-and-new-features-62" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Improvements and New Features</span>
</h3>
<ul><li>The driver part of the Crypto application has been updated to use the
erl_driver header file. Version 1.1.1 requires emulator version 4.9.1 or
later.</li></ul><h2 id="crypto-1-1" class="section-heading">
  <a href="#crypto-1-1" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 1.1</span>
</h2>
<h3 id="reported-fixed-bugs-and-malfunctions-3" class="section-heading">
  <a href="#reported-fixed-bugs-and-malfunctions-3" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Reported Fixed Bugs and Malfunctions</span>
</h3>
<ul><li><p>On Windows the crypto_drv was incorrectly linked to static run-time libraries
instead of dynamic ones.</p><p>Own Id: OTP-3240</p></li></ul><h2 id="crypto-1-0" class="section-heading">
  <a href="#crypto-1-0" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Crypto 1.0</span>
</h2>
<p>New application.</p>
</div>

<div class="bottom-actions" id="bottom-actions">
  <div class="bottom-actions-item">

      <a href="crypto_app.html" class="bottom-actions-button" rel="prev">
        <span class="subheader">
          ← Previous Page
        </span>
        <span class="title">
Crypto Application
        </span>
      </a>

  </div>
  <div class="bottom-actions-item">

      <a href="licenses.html" class="bottom-actions-button" rel="next">
        <span class="subheader">
          Next Page →
        </span>
        <span class="title">
Licenses
        </span>
      </a>

  </div>
</div>
    <footer class="footer">
      <p>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="crypto.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.37.3) for the

          <a href="https://erlang.org" title="Erlang" target="_blank" translate="no">Erlang programming language</a>

      </p>
<p>Copyright © 1996-2025 <a href="https://www.ericsson.com">Ericsson AB</a></p>
    </footer>
  </div>
</main>
</div>
  <script defer src="https://cdn.jsdelivr.net/npm/mermaid@11.4.1/dist/mermaid.min.js"></script>
  <script>
  let initialized = false;

  window.addEventListener("exdoc:loaded", () => {
      if (!initialized) {
      mermaid.initialize({
          startOnLoad: false,
          theme: document.body.className.includes("dark") ? "dark" : "default"
      });
      initialized = true;
      }

      let id = 0;
      for (const codeEl of document.querySelectorAll("pre code.mermaid")) {
      const preEl = codeEl.parentElement;
      const graphDefinition = codeEl.textContent;
      const graphEl = document.createElement("div");
      const graphId = "mermaid-graph-" + id++;
      mermaid.render(graphId, graphDefinition).then(({svg, bindFunctions}) => {
          graphEl.innerHTML = svg;
          bindFunctions?.(graphEl);
          preEl.insertAdjacentElement("afterend", graphEl);
          preEl.remove();
      });
      }
  });
  </script>

  </body>
</html>
