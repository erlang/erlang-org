<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html xmlns:fn="http://www.w3.org/2005/02/xpath-functions">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" href="../otp_doc.css" type="text/css">
<title>Erlang -- ssh_connection</title>
</head>
<body bgcolor="white" text="#000000" link="#0000ff" vlink="#ff00ff" alink="#ff0000"><div id="container">
<script id="js" type="text/javascript" language="JavaScript" src="../js/flipmenu/flipmenu.js"></script><script id="js2" type="text/javascript" src="../js/erlresolvelinks.js"></script><script language="JavaScript" type="text/javascript">
            <!--
              function getWinHeight() {
                var myHeight = 0;
                if( typeof( window.innerHeight ) == 'number' ) {
                  //Non-IE
                  myHeight = window.innerHeight;
                } else if( document.documentElement && ( document.documentElement.clientWidth ||
                                                         document.documentElement.clientHeight ) ) {
                  //IE 6+ in 'standards compliant mode'
                  myHeight = document.documentElement.clientHeight;
                } else if( document.body && ( document.body.clientWidth || document.body.clientHeight ) ) {
                  //IE 4 compatible
                  myHeight = document.body.clientHeight;
                }
                return myHeight;
              }

              function setscrollpos() {
                var objf=document.getElementById('loadscrollpos');
                 document.getElementById("leftnav").scrollTop = objf.offsetTop - getWinHeight()/2;
              }

              function addEvent(obj, evType, fn){
                if (obj.addEventListener){
                obj.addEventListener(evType, fn, true);
                return true;
              } else if (obj.attachEvent){
                var r = obj.attachEvent("on"+evType, fn);
                return r;
              } else {
                return false;
              }
             }

             addEvent(window, 'load', setscrollpos);

             //--></script><div id="leftnav"><div class="innertube">
<img alt="Erlang logo" src="../erlang-logo.png"><br><small><a href="../apps/ssh/users_guide.html">User's Guide</a><br><a href="../apps/ssh/index.html">Reference Manual</a><br><a href="../apps/ssh/release_notes.html">Release Notes</a><br><a href="../apps/ssh/ssh.pdf">PDF</a><br><a href="../index.html">Top</a></small><p><strong>SSH</strong><br><strong>Reference Manual</strong><br><small>Version 3.2</small></p>
<br><a href="javascript:openAllFlips()">Expand All</a><br><a href="javascript:closeAllFlips()">Contract All</a><p><small><strong>Table of Contents</strong></small></p>
<ul class="flipMenu">
<li title="SSH (App)"><a href="SSH_app.html">SSH (App)
                </a></li>
<li id="no" title="ssh " expanded="false">ssh<ul>
<li><a href="ssh.html">
                  Top of manual page
                </a></li>
<li title="close-1"><a href="ssh.html#close-1">close/1</a></li>
<li title="connect-3"><a href="ssh.html#connect-3">connect/3</a></li>
<li title="connect-4"><a href="ssh.html#connect-4">connect/4</a></li>
<li title="connection_info-2"><a href="ssh.html#connection_info-2">connection_info/2</a></li>
<li title="daemon-1"><a href="ssh.html#daemon-1">daemon/1</a></li>
<li title="daemon-2"><a href="ssh.html#daemon-2">daemon/2</a></li>
<li title="daemon-3"><a href="ssh.html#daemon-3">daemon/3</a></li>
<li title="shell-1"><a href="ssh.html#shell-1">shell/1</a></li>
<li title="shell-2"><a href="ssh.html#shell-2">shell/2</a></li>
<li title="shell-3"><a href="ssh.html#shell-3">shell/3</a></li>
<li title="start-0"><a href="ssh.html#start-0">start/0</a></li>
<li title="start-1"><a href="ssh.html#start-1">start/1</a></li>
<li title="stop-0"><a href="ssh.html#stop-0">stop/0</a></li>
<li title="stop_daemon-1"><a href="ssh.html#stop_daemon-1">stop_daemon/1</a></li>
<li title="stop_daemon-2"><a href="ssh.html#stop_daemon-2">stop_daemon/2</a></li>
<li title="stop_listener-1"><a href="ssh.html#stop_listener-1">stop_listener/1</a></li>
<li title="stop_listener-2"><a href="ssh.html#stop_listener-2">stop_listener/2</a></li>
</ul>
</li>
<li id="no" title="ssh_channel " expanded="false">ssh_channel<ul>
<li><a href="ssh_channel.html">
                  Top of manual page
                </a></li>
<li title="call-2"><a href="ssh_channel.html#call-2">call/2</a></li>
<li title="call-3"><a href="ssh_channel.html#call-3">call/3</a></li>
<li title="cast-2"><a href="ssh_channel.html#cast-2">cast/2</a></li>
<li title="enter_loop-1"><a href="ssh_channel.html#enter_loop-1">enter_loop/1</a></li>
<li title="init-1"><a href="ssh_channel.html#init-1">init/1</a></li>
<li title="reply-2"><a href="ssh_channel.html#reply-2">reply/2</a></li>
<li title="start-4"><a href="ssh_channel.html#start-4">start/4</a></li>
<li title="start_link-4"><a href="ssh_channel.html#start_link-4">start_link/4</a></li>
<li title="Module:code_change-3"><a href="ssh_channel.html#Module:code_change-3">Module:code_change/3</a></li>
<li title="Module:init-1"><a href="ssh_channel.html#Module:init-1">Module:init/1</a></li>
<li title="Module:handle_call-3"><a href="ssh_channel.html#Module:handle_call-3">Module:handle_call/3</a></li>
<li title="Module:handle_cast-2"><a href="ssh_channel.html#Module:handle_cast-2">Module:handle_cast/2</a></li>
<li title="Module:handle_msg-2"><a href="ssh_channel.html#Module:handle_msg-2">Module:handle_msg/2</a></li>
<li title="Module:handle_ssh_msg-2"><a href="ssh_channel.html#Module:handle_ssh_msg-2">Module:handle_ssh_msg/2</a></li>
<li title="Module:terminate-2"><a href="ssh_channel.html#Module:terminate-2">Module:terminate/2</a></li>
</ul>
</li>
<li id="loadscrollpos" title="ssh_connection " expanded="true">ssh_connection<ul>
<li><a href="ssh_connection.html">
                  Top of manual page
                </a></li>
<li title="adjust_window-3"><a href="ssh_connection.html#adjust_window-3">adjust_window/3</a></li>
<li title="close-2"><a href="ssh_connection.html#close-2">close/2</a></li>
<li title="exec-4"><a href="ssh_connection.html#exec-4">exec/4</a></li>
<li title="exit_status-3"><a href="ssh_connection.html#exit_status-3">exit_status/3</a></li>
<li title="ptty_alloc-3"><a href="ssh_connection.html#ptty_alloc-3">ptty_alloc/3</a></li>
<li title="ptty_alloc-4"><a href="ssh_connection.html#ptty_alloc-4">ptty_alloc/4</a></li>
<li title="reply_request-4"><a href="ssh_connection.html#reply_request-4">reply_request/4</a></li>
<li title="send-3"><a href="ssh_connection.html#send-3">send/3</a></li>
<li title="send-4"><a href="ssh_connection.html#send-4">send/4</a></li>
<li title="send-4"><a href="ssh_connection.html#send-4">send/4</a></li>
<li title="send-5"><a href="ssh_connection.html#send-5">send/5</a></li>
<li title="send_eof-2"><a href="ssh_connection.html#send_eof-2">send_eof/2</a></li>
<li title="session_channel-2"><a href="ssh_connection.html#session_channel-2">session_channel/2</a></li>
<li title="session_channel-4"><a href="ssh_connection.html#session_channel-4">session_channel/4</a></li>
<li title="setenv-5"><a href="ssh_connection.html#setenv-5">setenv/5</a></li>
<li title="shell-2"><a href="ssh_connection.html#shell-2">shell/2</a></li>
<li title="subsystem-4"><a href="ssh_connection.html#subsystem-4">subsystem/4</a></li>
</ul>
</li>
<li id="no" title="ssh_client_key_api " expanded="false">ssh_client_key_api<ul>
<li><a href="ssh_client_key_api.html">
                  Top of manual page
                </a></li>
<li title="Module:add_host_key-3"><a href="ssh_client_key_api.html#Module:add_host_key-3">Module:add_host_key/3</a></li>
<li title="Module:is_host_key-4"><a href="ssh_client_key_api.html#Module:is_host_key-4">Module:is_host_key/4</a></li>
<li title="Module:user_key-2"><a href="ssh_client_key_api.html#Module:user_key-2">Module:user_key/2</a></li>
</ul>
</li>
<li id="no" title="ssh_server_key_api " expanded="false">ssh_server_key_api<ul>
<li><a href="ssh_server_key_api.html">
                  Top of manual page
                </a></li>
<li title="Module:host_key-2"><a href="ssh_server_key_api.html#Module:host_key-2">Module:host_key/2</a></li>
<li title="Module:is_auth_key-3"><a href="ssh_server_key_api.html#Module:is_auth_key-3">Module:is_auth_key/3</a></li>
</ul>
</li>
<li id="no" title="ssh_sftp " expanded="false">ssh_sftp<ul>
<li><a href="ssh_sftp.html">
                  Top of manual page
                </a></li>
<li title="start_channel-1"><a href="ssh_sftp.html#start_channel-1">start_channel/1</a></li>
<li title="start_channel-2"><a href="ssh_sftp.html#start_channel-2">start_channel/2</a></li>
<li title="start_channel-2"><a href="ssh_sftp.html#start_channel-2">start_channel/2</a></li>
<li title="start_channel-3"><a href="ssh_sftp.html#start_channel-3">start_channel/3</a></li>
<li title="stop_channel-1"><a href="ssh_sftp.html#stop_channel-1">stop_channel/1</a></li>
<li title="read_file-2"><a href="ssh_sftp.html#read_file-2">read_file/2</a></li>
<li title="read_file-3"><a href="ssh_sftp.html#read_file-3">read_file/3</a></li>
<li title="write_file-3"><a href="ssh_sftp.html#write_file-3">write_file/3</a></li>
<li title="write_file-4"><a href="ssh_sftp.html#write_file-4">write_file/4</a></li>
<li title="list_dir-2"><a href="ssh_sftp.html#list_dir-2">list_dir/2</a></li>
<li title="list_dir-3"><a href="ssh_sftp.html#list_dir-3">list_dir/3</a></li>
<li title="open-3"><a href="ssh_sftp.html#open-3">open/3</a></li>
<li title="open-4"><a href="ssh_sftp.html#open-4">open/4</a></li>
<li title="opendir-2"><a href="ssh_sftp.html#opendir-2">opendir/2</a></li>
<li title="opendir-3"><a href="ssh_sftp.html#opendir-3">opendir/3</a></li>
<li title="open_tar-3"><a href="ssh_sftp.html#open_tar-3">open_tar/3</a></li>
<li title="open_tar-4"><a href="ssh_sftp.html#open_tar-4">open_tar/4</a></li>
<li title="close-2"><a href="ssh_sftp.html#close-2">close/2</a></li>
<li title="close-3"><a href="ssh_sftp.html#close-3">close/3</a></li>
<li title="read-3"><a href="ssh_sftp.html#read-3">read/3</a></li>
<li title="read-4"><a href="ssh_sftp.html#read-4">read/4</a></li>
<li title="pread-4"><a href="ssh_sftp.html#pread-4">pread/4</a></li>
<li title="pread-5"><a href="ssh_sftp.html#pread-5">pread/5</a></li>
<li title="aread-3"><a href="ssh_sftp.html#aread-3">aread/3</a></li>
<li title="apread-4"><a href="ssh_sftp.html#apread-4">apread/4</a></li>
<li title="write-3"><a href="ssh_sftp.html#write-3">write/3</a></li>
<li title="write-4"><a href="ssh_sftp.html#write-4">write/4</a></li>
<li title="pwrite-4"><a href="ssh_sftp.html#pwrite-4">pwrite/4</a></li>
<li title="pwrite-5"><a href="ssh_sftp.html#pwrite-5">pwrite/5</a></li>
<li title="awrite-3"><a href="ssh_sftp.html#awrite-3">awrite/3</a></li>
<li title="apwrite-4"><a href="ssh_sftp.html#apwrite-4">apwrite/4</a></li>
<li title="position-3"><a href="ssh_sftp.html#position-3">position/3</a></li>
<li title="position-4"><a href="ssh_sftp.html#position-4">position/4</a></li>
<li title="read_file_info-2"><a href="ssh_sftp.html#read_file_info-2">read_file_info/2</a></li>
<li title="read_file_info-3"><a href="ssh_sftp.html#read_file_info-3">read_file_info/3</a></li>
<li title="read_link_info-2"><a href="ssh_sftp.html#read_link_info-2">read_link_info/2</a></li>
<li title="read_link_info-3"><a href="ssh_sftp.html#read_link_info-3">read_link_info/3</a></li>
<li title="write_file_info-3"><a href="ssh_sftp.html#write_file_info-3">write_file_info/3</a></li>
<li title="write_file_info-4"><a href="ssh_sftp.html#write_file_info-4">write_file_info/4</a></li>
<li title="read_link-2"><a href="ssh_sftp.html#read_link-2">read_link/2</a></li>
<li title="read_link-3"><a href="ssh_sftp.html#read_link-3">read_link/3</a></li>
<li title="make_symlink-3"><a href="ssh_sftp.html#make_symlink-3">make_symlink/3</a></li>
<li title="make_symlink-4"><a href="ssh_sftp.html#make_symlink-4">make_symlink/4</a></li>
<li title="rename-3"><a href="ssh_sftp.html#rename-3">rename/3</a></li>
<li title="rename-4"><a href="ssh_sftp.html#rename-4">rename/4</a></li>
<li title="delete-2"><a href="ssh_sftp.html#delete-2">delete/2</a></li>
<li title="delete-3"><a href="ssh_sftp.html#delete-3">delete/3</a></li>
<li title="make_dir-2"><a href="ssh_sftp.html#make_dir-2">make_dir/2</a></li>
<li title="make_dir-3"><a href="ssh_sftp.html#make_dir-3">make_dir/3</a></li>
<li title="del_dir-2"><a href="ssh_sftp.html#del_dir-2">del_dir/2</a></li>
<li title="del_dir-3"><a href="ssh_sftp.html#del_dir-3">del_dir/3</a></li>
</ul>
</li>
<li id="no" title="ssh_sftpd " expanded="false">ssh_sftpd<ul>
<li><a href="ssh_sftpd.html">
                  Top of manual page
                </a></li>
<li title="subsystem_spec-1"><a href="ssh_sftpd.html#subsystem_spec-1">subsystem_spec/1</a></li>
</ul>
</li>
</ul>
</div></div>
<div id="content">
<div class="innertube">
<!-- refpage --><center><h1>ssh_connection</h1></center>
  
  <h3>MODULE</h3>
<div class="REFBODY">ssh_connection</div>
  <h3>MODULE SUMMARY</h3>
<div class="REFBODY">This module provides API functions to send <span class="bold_code"><a href="http://www.ietf.org/rfc/rfc4254.txt"> SSH Connection Protocol </a></span>
  events to the other side of an SSH channel.
  </div>

  <h3>DESCRIPTION</h3>
<div class="REFBODY"><p>
    <p>The SSH Connection Protocol is used by clients and servers
    (i.e. SSH channels) to communicate over the SSH connection. The
    API functions in this module sends SSH Connection Protocol events
    that are received as messages by the remote channel.
    In the case that the receiving channel is an Erlang process the
    message will be on the following format
    <span class="code">{ssh_cm, ssh_connection_ref(), ssh_event_msg()}</span>. If the <span class="bold_code"><a href="ssh_channel.html">ssh_channel</a></span> behavior is used to
    implement the channel process these will be handled by
    <span class="bold_code"><a href="ssh_channel.html#Module:handle_ssh_msg-2">handle_ssh_msg/2 </a></span>.</p>
  </p></div>

  <h3><a name="id66885">DATA TYPES </a></h3>
<div class="REFBODY">
    

    <p>Type definitions that are used more than once in this module and/or
    abstractions to indicate the intended use of the data type:</p>

    <p><span class="code">boolean() = true | false </span></p>
    <p><span class="code">string() = list of ASCII characters</span></p>
    <p><span class="code">timeout() =  infinity | integer() - in milliseconds.</span></p>
    <p><span class="code">ssh_connection_ref() - opaque to the user returned by
    ssh:connect/3 or sent to an SSH channel processes</span></p>
    <p><span class="code">ssh_channel_id() = integer() </span></p>
    <p><span class="code">ssh_data_type_code() = 1 ("stderr") | 0 ("normal") are
    currently valid values see</span> <span class="bold_code"><a href="http://www.ietf.org/rfc/rfc4254.txt">RFC 4254  </a></span> section 5.2.</p>
    <p><span class="code">ssh_request_status() = success | failure</span></p>
    <p><span class="code">event() = {ssh_cm, ssh_connection_ref(), ssh_event_msg()} </span></p>
    <p><span class="code">ssh_event_msg()  = data_events() | status_events() | terminal_events() </span></p>
    <p><span class="code">reason() = timeout | closed  </span></p>

    <dl>
      <dt><strong><strong>data_events()</strong></strong></dt>
       <dd>
	 <dl>
	   <dt><strong><span class="code">{data, ssh_channel_id(), ssh_data_type_code(), binary() = Data}</span></strong></dt>
	   <dd> Data has arrived on the channel. This event is sent as
	   result of calling <span class="bold_code"><a href="ssh_connection.html#send-3"> ssh_connection:send/[3,4,5] </a></span>
</dd>

	   <dt><strong><span class="code">{eof, ssh_channel_id()}</span></strong></dt>
	   <dd>Indicates that the other side will not send any more
	   data. This event is sent as result of calling <span class="bold_code"><a href="ssh_connection.html#send_eof-2"> ssh_connection:send_eof/2</a></span>
	   </dd>
	 </dl>
       </dd>

       <dt><strong><strong>status_events()</strong></strong></dt>
       <dd>

      <dl>
	<dt><strong><span class="code">{signal, ssh_channel_id(), ssh_signal()}</span></strong></dt>
	<dd>A signal can be delivered to the remote process/service
	using the following message. Some systems will not support
	signals, in which case they should ignore this message. There is
	currently no funtion to generate this event as the signals
	refered to are on OS-level and not something generated by an
	Erlang program.</dd>

	<dt><strong><span class="code">{exit_signal, ssh_channel_id(), string() = ExitSignal, string() = ErrorMsg,
	string() = LanguageString}</span></strong></dt>

	<dd>A remote execution may terminate violently due to a signal
	then this message may be received. For details on valid string
	values see  <span class="bold_code"><a href="http://www.ietf.org/rfc/rfc4254.txt">RFC 4254</a></span> section 6.10. Special case of the signals
	mentioned above.</dd>

	<dt><strong><span class="code">{exit_status, ssh_channel_id(), integer() = ExitStatus}</span></strong></dt>
	<dd> When the command running at the other end terminates, the
	following message can be sent to return the exit status of the
	command. A zero 'exit_status' usually means that the command
	terminated successfully. This event is sent as result of calling
	<span class="bold_code"><a href="ssh_connection.html#exit_status-3">
	ssh_connection:exit_status/3</a></span>
</dd>

	<dt><strong><span class="code">{closed, ssh_channel_id()}</span></strong></dt>
	<dd> This event is sent as result of calling
	<span class="bold_code"><a href="ssh_connection.html#close-2">ssh_connection:close/2</a></span> Both the handling of this
	event and sending of it will be taken care of by the
	<span class="bold_code"><a href="ssh_channel.html">ssh_channel</a></span> behavior.</dd>

      </dl>
     </dd>

     <dt><strong><strong>terminal_events()</strong></strong></dt>

     <dd>
       <p> Channels implementing a shell and command execution on the
       server side should handle the following messages that may be sent by client channel processes. </p>

      <div class="note">
<div class="label">Note</div>
<div class="content"><p> <p>Events that includes a  <span class="code"> WantReply</span> expects the event handling
       process to call <span class="bold_code"><a href="ssh_connection.html#reply_request-4">ssh_connection:reply_request/4</a></span>
       with the boolean value of <span class="code"> WantReply</span> as the second
       argument.  </p></p></div>
</div>

       <dl>
	 <dt><strong><span class="code">{env, ssh_channel_id(), boolean() = WantReply,
	 string() = Var, string() = Value}</span></strong></dt>
	 <dd> Environment variables may be passed to the shell/command
	 to be started later. This event is sent as result of calling <span class="bold_code"><a href="ssh_connection.html#setenv-5"> ssh_connection:setenv/5</a></span>
	 </dd>

	 <dt><strong><span class="code">{pty, ssh_channel_id(),
	 boolean() = WantReply, {string() = Terminal, integer() = CharWidth,
	 integer() = RowHeight, integer() = PixelWidth, integer() = PixelHeight,
	 [{atom() | integer() = Opcode,
	 integer() = Value}] = TerminalModes}}</span></strong></dt>
	 <dd>A pseudo-terminal has been requested for the
	 session. Terminal is the value of the TERM environment
	 variable value (e.g., vt100). Zero dimension parameters must
	 be ignored.  The character/row dimensions override the pixel
	 dimensions (when nonzero).  Pixel dimensions refer to the
	 drawable area of the window. The <span class="code">Opcode</span> in the
	 <span class="code">TerminalModes</span> list is the mnemonic name, represented
	 as an lowercase erlang atom, defined in
	 <span class="bold_code"><a href="http://www.ietf.org/rfc/rfc4254.txt">RFC 4254  </a></span> section 8.
	 It may also be an opcode if the mnemonic name is not listed in the
	 RFC. Example <span class="code">OP code: 53, mnemonic name ECHO erlang atom:
	 echo</span>.This event is sent as result of calling <span class="bold_code"><a href="ssh_connection.html#ptty_alloc-4">ssh_connection:ptty_alloc/4</a></span>
</dd>

	 <dt><strong><span class="code">{shell, boolean() = WantReply}</span></strong></dt>
	 <dd> This message will request that the user's default shell
	 be started at the other end. This event is sent as result of calling <span class="bold_code"><a href="ssh_connection.html#shell-2"> ssh_connection:shell/2</a></span>
	 </dd>

	 <dt><strong><span class="code">{window_change, ssh_channel_id(), integer() = CharWidth,
	 integer() = RowHeight, integer() = PixWidth, integer() = PixHeight}</span></strong></dt>
	 <dd> When the window (terminal) size changes on the client
	 side, it MAY send a message to the server side to inform it of
	 the new dimensions. There is currently no API function to generate this
	 event.</dd>
     
	 <dt><strong><span class="code">{exec, ssh_channel_id(),
	 boolean() = WantReply, string() = Cmd}</span></strong></dt>
	 <dd> This message will request that the server starts
	 execution of the given command. This event is sent as result of calling <span class="bold_code"><a href="ssh_connection.html#exec-4">ssh_connection:exec/4 </a></span>
	 </dd>
       </dl>
     </dd>
   </dl>
 </div>

  <h3>EXPORTS</h3>
   
   <p><a name="adjust_window-3"><span class="bold_code">adjust_window(ConnectionRef, ChannelId, NumOfBytes) -&gt; ok</span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
       <div class="REFTYPES">
<span class="bold_code"> ConnectionRef = ssh_connection_ref() </span><br>
</div>
       <div class="REFTYPES">
<span class="bold_code"> ChannelId = ssh_channel_id() </span><br>
</div>
       <div class="REFTYPES">
<span class="bold_code"> NumOfBytes = integer()</span><br>
</div>
     </div>
<div class="REFBODY"><p>
	<p>Adjusts the SSH flowcontrol window. This shall be done by both client and server side channel processes.</p>
	
	<div class="note">
<div class="label">Note</div>
<div class="content"><p><p>Channels implemented with the <span class="bold_code"><a href="ssh_channel.html"> ssh_channel
	behavior</a></span> will normaly not need to call this function as flow control
	will be handled by the behavior. The behavior will adjust the window every time
	the callback <span class="bold_code"><a href="ssh_channel.html#Module:handle_ssh_msg-2">
	handle_ssh_msg/2 </a></span> has returned after processing channel data</p> </p></div>
</div>
      </p></div>
   
   <p><a name="close-2"><span class="bold_code">close(ConnectionRef, ChannelId) -&gt; ok</span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
       <div class="REFTYPES">
<span class="bold_code"> ConnectionRef = ssh_connection_ref() </span><br>
</div>
       <div class="REFTYPES">
<span class="bold_code"> ChannelId = ssh_channel_id()</span><br>
</div>
     </div>
<div class="REFBODY"><p>
       <p>A server or client channel process can choose to close their session by sending a close event.
       </p>

       <div class="note">
<div class="label">Note</div>
<div class="content"><p><p>This function will be called by the ssh_channel
       behavior when the channel is terminated see <span class="bold_code"><a href="ssh_channel.html"> ssh_channel(3) </a></span> so channels implemented with the
       behavior should not call this function explicitly.</p></p></div>
</div>
     </p></div>
   
   <p><a name="exec-4"><span class="bold_code">exec(ConnectionRef, ChannelId, Command, TimeOut) -&gt; ssh_request_status() | {error, reason()} </span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
       <div class="REFTYPES">
<span class="bold_code"> ConnectionRef = ssh_connection_ref() </span><br>
</div>
       <div class="REFTYPES">
<span class="bold_code"> ChannelId = ssh_channel_id()</span><br>
</div>
       <div class="REFTYPES">
<span class="bold_code"> Command = string()</span><br>
</div>
       <div class="REFTYPES">
<span class="bold_code">Timeout = timeout() </span><br>
</div>
     </div>
<div class="REFBODY"><p>
       <p>Should be called by a client channel process to request that the server starts execution of the
       given command, the result will be several messages according to the following pattern. Note
       that the last message will be a channel close message, as the exec request is a one time
       execution that closes the channel when it is done.</p>

       <dl>
	 <dt><strong><span class="code"> N x {ssh_cm, ssh_connection_ref(),
	 {data, ssh_channel_id(), ssh_data_type_code(), binary() = Data}} </span></strong></dt>
	 <dd>The result of executing the command may be only one line
	 or thousands of lines depending on the command.</dd>

	 <dt><strong><span class="code">0 or 1 x {ssh_cm, ssh_connection_ref(), {eof, ssh_channel_id()}}</span></strong></dt>
	 <dd>Indicates that no more data will be sent.</dd>

	 <dt><strong><span class="code">0 or 1 x {ssh_cm,
	 ssh_connection_ref(), {exit_signal,
	 ssh_channel_id(), string() = ExitSignal, string() = ErrorMsg, string() = LanguageString}}</span></strong></dt>
	 <dd>Not all systems send signals. For details on valid string
	 values see RFC 4254 section 6.10 </dd>
	 
	  <dt><strong><span class="code">0 or 1 x {ssh_cm, ssh_connection_ref(), {exit_status,
	  ssh_channel_id(), integer() = ExitStatus}}</span></strong></dt>
	  <dd>It is recommended by the <span class="code">ssh connection protocol</span> that this
	  message shall be sent, but that may not always be the case.</dd>

	  <dt><strong><span class="code"> 1 x {ssh_cm, ssh_connection_ref(),
	  {closed, ssh_channel_id()}}</span></strong></dt>
	  <dd>Indicates that the ssh channel started for the
	  execution of the command has now been shutdown.</dd>
       </dl>
     </p></div>

   <p><a name="exit_status-3"><span class="bold_code">exit_status(ConnectionRef, ChannelId, Status) -&gt; ok</span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
       <div class="REFTYPES">
<span class="bold_code"> ConnectionRef = ssh_connection_ref() </span><br>
</div>
       <div class="REFTYPES">
<span class="bold_code"> ChannelId = ssh_channel_id()</span><br>
</div>
       <div class="REFTYPES">
<span class="bold_code"> Status = integer()</span><br>
</div>
     </div>
<div class="REFBODY"><p>
       <p>Should be called by a server channel process to sends the exit status of a command to the client.</p>
     </p></div>
   
   <p><a name="ptty_alloc-3"><span class="bold_code">ptty_alloc(ConnectionRef, ChannelId, Options) -&gt;  </span></a><br><a name="ptty_alloc-4"><span class="bold_code">ptty_alloc(ConnectionRef, ChannelId, Options, Timeout) -&gt;  &gt; ssh_request_status() | {error, reason()}  </span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
	<div class="REFTYPES">
<span class="bold_code"> ConnectionRef = ssh_connection_ref() </span><br>
</div>
	<div class="REFTYPES">
<span class="bold_code"> ChannelId = ssh_channel_id()</span><br>
</div>
	<div class="REFTYPES">
<span class="bold_code"> Options = proplists:proplist()</span><br>
</div>
      </div>
<div class="REFBODY"><p>
	<p> Sends a SSH Connection Protocol pty_req, to allocate a pseudo tty.
	Should be called by a SSH client process.
	Options are:
	</p>

	<dl>
	  <dt><strong>{term, string()}</strong></dt>
	  <dd>
	    Defaults to os:getenv("TERM") or "vt100" if it is undefined. 
	  </dd>
	  <dt><strong>{width, integer()}</strong></dt>
	  <dd>
	    Defaults to 80 if pixel_width is not defined.
	  </dd>
	  <dt><strong>{height, integer()}</strong></dt>
	  <dd>
	    Defaults to 24 if pixel_height is not defined.
	  </dd>
	  <dt><strong>{pixel_width, integer()}</strong></dt>
	  <dd>
	    Is disregarded if width is defined.
	  </dd>
	  <dt><strong>{pixel_height, integer()}</strong></dt>
	  <dd>
	    Is disregarded if height is defined.
	  </dd>
	  <dt><strong>{pty_opts, [{posix_atom(), integer()}]}</strong></dt>
	  <dd>
	    Option may be an empty list, otherwise
	    see possible POSIX names in section 8 in <span class="bold_code"><a href="http://www.ietf.org/rfc/rfc4254.txt"> RFC 4254</a></span>.
	  </dd>
	 </dl>

      </p></div>

   <p><a name="reply_request-4"><span class="bold_code">reply_request(ConnectionRef, WantReply, Status, ChannelId) -&gt; ok</span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
	<div class="REFTYPES">
<span class="bold_code"> ConnectionRef = ssh_connection_ref() </span><br>
</div>
	<div class="REFTYPES">
<span class="bold_code"> WantReply =  boolean()</span><br>
</div>
	<div class="REFTYPES">
<span class="bold_code"> Status = ssh_request_status() </span><br>
</div>
	<div class="REFTYPES">
<span class="bold_code"> ChannelId = ssh_channel_id()</span><br>
</div>
      </div>
<div class="REFBODY"><p>
	<p>Sends status replies to requests where the requester has
	stated that they want a status report e.i .<span class="code"> WantReply = true</span>,
	if <span class="code"> WantReply</span> is false calling this function will be a
	"noop". Should be called while handling an ssh connection
	protocol message containing a <span class="code">WantReply</span> boolean
	value.
	</p>
      </p></div>
    
     <p><a name="send-3"><span class="bold_code">send(ConnectionRef, ChannelId, Data) -&gt;</span></a><br><a name="send-4"><span class="bold_code">send(ConnectionRef, ChannelId, Data, Timeout) -&gt;</span></a><br><a name="send-4"><span class="bold_code">send(ConnectionRef, ChannelId, Type, Data) -&gt;</span></a><br><a name="send-5"><span class="bold_code">send(ConnectionRef, ChannelId, Type, Data, TimeOut) -&gt;
       ok | {error, timeout} | {error, closed}</span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
	<div class="REFTYPES">
<span class="bold_code"> ConnectionRef = ssh_connection_ref() </span><br>
</div>
	<div class="REFTYPES">
<span class="bold_code"> ChannelId = ssh_channel_id()</span><br>
</div>
	<div class="REFTYPES">
<span class="bold_code"> Data = binary()</span><br>
</div>
	<div class="REFTYPES">
<span class="bold_code"> Type = ssh_data_type_code()</span><br>
</div>
	<div class="REFTYPES">
<span class="bold_code"> Timeout = timeout()</span><br>
</div>
       </div>
<div class="REFBODY"><p>
	 <p>Should be called by client- and server channel processes to send data to each other.
	 </p>
       </p></div>
     
     <p><a name="send_eof-2"><span class="bold_code">send_eof(ConnectionRef, ChannelId) -&gt; ok | {error, closed}</span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
	<div class="REFTYPES">
<span class="bold_code"> ConnectionRef = ssh_connection_ref() </span><br>
</div>
	<div class="REFTYPES">
<span class="bold_code"> ChannelId = ssh_channel_id()</span><br>
</div>
       </div>
<div class="REFBODY"><p>
	 <p>Sends eof on the channel <span class="code">ChannelId</span>.
	 </p>
       </p></div>

     <p><a name="session_channel-2"><span class="bold_code">session_channel(ConnectionRef, Timeout) -&gt; </span></a><br><a name="session_channel-4"><span class="bold_code">session_channel(ConnectionRef, InitialWindowSize,
       MaxPacketSize, Timeout) -&gt; {ok, ssh_channel_id()} | {error, reason()}</span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
	 <div class="REFTYPES">
<span class="bold_code"> ConnectionRef = ssh_connection_ref()</span><br>
</div>
	 <div class="REFTYPES">
<span class="bold_code"> InitialWindowSize = integer() </span><br>
</div>
	 <div class="REFTYPES">
<span class="bold_code"> MaxPacketSize = integer() </span><br>
</div>
	 <div class="REFTYPES">
<span class="bold_code"> Timeout = timeout()</span><br>
</div>
	 <div class="REFTYPES">
<span class="bold_code"> Reason = term() </span><br>
</div>
       </div>
<div class="REFBODY"><p>
	 <p>Opens a channel for an SSH session. The channel id returned from this function
	 is the id used as input to the other funtions in this module.
	</p>
       </p></div>

    <p><a name="setenv-5"><span class="bold_code">setenv(ConnectionRef, ChannelId, Var, Value, TimeOut) -&gt; ssh_request_status() | {error, reason()} </span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
	<div class="REFTYPES">
<span class="bold_code"> ConnectionRef = ssh_connection_ref() </span><br>
</div>
	<div class="REFTYPES">
<span class="bold_code"> ChannelId = ssh_channel_id()</span><br>
</div>
	<div class="REFTYPES">
<span class="bold_code"> Var = string()</span><br>
</div>
	<div class="REFTYPES">
<span class="bold_code"> Value = string()</span><br>
</div>
	<div class="REFTYPES">
<span class="bold_code"> Timeout = timeout()</span><br>
</div>
      </div>
<div class="REFBODY"><p>
	<p> Environment variables may be passed before starting the
	shell/command. Should be called by a client channel processes.
	</p>
      </p></div>
    
    <p><a name="shell-2"><span class="bold_code">shell(ConnectionRef, ChannelId) -&gt; ssh_request_status() | {error, closed}
      </span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
	 <div class="REFTYPES">
<span class="bold_code"> ConnectionRef = ssh_connection_ref() </span><br>
</div>
	 <div class="REFTYPES">
<span class="bold_code"> ChannelId = ssh_channel_id()</span><br>
</div>
       </div>
<div class="REFBODY"><p>
	 <p> Should be called by a client channel process to request that the user's default shell (typically
	 defined in /etc/passwd in UNIX systems) shall be executed at the server end.
	 </p>
       </p></div>

    <p><a name="subsystem-4"><span class="bold_code">subsystem(ConnectionRef, ChannelId, Subsystem, Timeout) -&gt; ssh_request_status() | {error, reason()} </span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
	 <div class="REFTYPES">
<span class="bold_code"> ConnectionRef = ssh_connection_ref() </span><br>
</div>
	 <div class="REFTYPES">
<span class="bold_code"> ChannelId = ssh_channel_id()</span><br>
</div>
	 <div class="REFTYPES">
<span class="bold_code"> Subsystem = string()</span><br>
</div>
	 <div class="REFTYPES">
<span class="bold_code"> Timeout = timeout()</span><br>
</div>
       </div>
<div class="REFBODY"><p>
	 <p> Should be called by a client channel process for requesting to execute a predefined subsystem on the server.
	 </p>
       </p></div>
    
  
  
</div>
<div class="footer">
<hr>
<p>Copyright © 2005-2015 Ericsson AB. All Rights Reserved.</p>
</div>
</div>
</div></body>
</html>
