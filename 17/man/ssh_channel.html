<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html xmlns:fn="http://www.w3.org/2005/02/xpath-functions">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" href="../otp_doc.css" type="text/css">
<title>Erlang -- ssh_channel</title>
</head>
<body bgcolor="white" text="#000000" link="#0000ff" vlink="#ff00ff" alink="#ff0000"><div id="container">
<script id="js" type="text/javascript" language="JavaScript" src="../js/flipmenu/flipmenu.js"></script><script id="js2" type="text/javascript" src="../js/erlresolvelinks.js"></script><script language="JavaScript" type="text/javascript">
            <!--
              function getWinHeight() {
                var myHeight = 0;
                if( typeof( window.innerHeight ) == 'number' ) {
                  //Non-IE
                  myHeight = window.innerHeight;
                } else if( document.documentElement && ( document.documentElement.clientWidth ||
                                                         document.documentElement.clientHeight ) ) {
                  //IE 6+ in 'standards compliant mode'
                  myHeight = document.documentElement.clientHeight;
                } else if( document.body && ( document.body.clientWidth || document.body.clientHeight ) ) {
                  //IE 4 compatible
                  myHeight = document.body.clientHeight;
                }
                return myHeight;
              }

              function setscrollpos() {
                var objf=document.getElementById('loadscrollpos');
                 document.getElementById("leftnav").scrollTop = objf.offsetTop - getWinHeight()/2;
              }

              function addEvent(obj, evType, fn){
                if (obj.addEventListener){
                obj.addEventListener(evType, fn, true);
                return true;
              } else if (obj.attachEvent){
                var r = obj.attachEvent("on"+evType, fn);
                return r;
              } else {
                return false;
              }
             }

             addEvent(window, 'load', setscrollpos);

             //--></script><div id="leftnav"><div class="innertube">
<img alt="Erlang logo" src="../erlang-logo.png"><br><small><a href="../apps/ssh/users_guide.html">User's Guide</a><br><a href="../apps/ssh/index.html">Reference Manual</a><br><a href="../apps/ssh/release_notes.html">Release Notes</a><br><a href="../apps/ssh/ssh.pdf">PDF</a><br><a href="../index.html">Top</a></small><p><strong>SSH</strong><br><strong>Reference Manual</strong><br><small>Version 3.2</small></p>
<br><a href="javascript:openAllFlips()">Expand All</a><br><a href="javascript:closeAllFlips()">Contract All</a><p><small><strong>Table of Contents</strong></small></p>
<ul class="flipMenu">
<li title="SSH (App)"><a href="SSH_app.html">SSH (App)
                </a></li>
<li id="no" title="ssh " expanded="false">ssh<ul>
<li><a href="ssh.html">
                  Top of manual page
                </a></li>
<li title="close-1"><a href="ssh.html#close-1">close/1</a></li>
<li title="connect-3"><a href="ssh.html#connect-3">connect/3</a></li>
<li title="connect-4"><a href="ssh.html#connect-4">connect/4</a></li>
<li title="connection_info-2"><a href="ssh.html#connection_info-2">connection_info/2</a></li>
<li title="daemon-1"><a href="ssh.html#daemon-1">daemon/1</a></li>
<li title="daemon-2"><a href="ssh.html#daemon-2">daemon/2</a></li>
<li title="daemon-3"><a href="ssh.html#daemon-3">daemon/3</a></li>
<li title="shell-1"><a href="ssh.html#shell-1">shell/1</a></li>
<li title="shell-2"><a href="ssh.html#shell-2">shell/2</a></li>
<li title="shell-3"><a href="ssh.html#shell-3">shell/3</a></li>
<li title="start-0"><a href="ssh.html#start-0">start/0</a></li>
<li title="start-1"><a href="ssh.html#start-1">start/1</a></li>
<li title="stop-0"><a href="ssh.html#stop-0">stop/0</a></li>
<li title="stop_daemon-1"><a href="ssh.html#stop_daemon-1">stop_daemon/1</a></li>
<li title="stop_daemon-2"><a href="ssh.html#stop_daemon-2">stop_daemon/2</a></li>
<li title="stop_listener-1"><a href="ssh.html#stop_listener-1">stop_listener/1</a></li>
<li title="stop_listener-2"><a href="ssh.html#stop_listener-2">stop_listener/2</a></li>
</ul>
</li>
<li id="loadscrollpos" title="ssh_channel " expanded="true">ssh_channel<ul>
<li><a href="ssh_channel.html">
                  Top of manual page
                </a></li>
<li title="call-2"><a href="ssh_channel.html#call-2">call/2</a></li>
<li title="call-3"><a href="ssh_channel.html#call-3">call/3</a></li>
<li title="cast-2"><a href="ssh_channel.html#cast-2">cast/2</a></li>
<li title="enter_loop-1"><a href="ssh_channel.html#enter_loop-1">enter_loop/1</a></li>
<li title="init-1"><a href="ssh_channel.html#init-1">init/1</a></li>
<li title="reply-2"><a href="ssh_channel.html#reply-2">reply/2</a></li>
<li title="start-4"><a href="ssh_channel.html#start-4">start/4</a></li>
<li title="start_link-4"><a href="ssh_channel.html#start_link-4">start_link/4</a></li>
<li title="Module:code_change-3"><a href="ssh_channel.html#Module:code_change-3">Module:code_change/3</a></li>
<li title="Module:init-1"><a href="ssh_channel.html#Module:init-1">Module:init/1</a></li>
<li title="Module:handle_call-3"><a href="ssh_channel.html#Module:handle_call-3">Module:handle_call/3</a></li>
<li title="Module:handle_cast-2"><a href="ssh_channel.html#Module:handle_cast-2">Module:handle_cast/2</a></li>
<li title="Module:handle_msg-2"><a href="ssh_channel.html#Module:handle_msg-2">Module:handle_msg/2</a></li>
<li title="Module:handle_ssh_msg-2"><a href="ssh_channel.html#Module:handle_ssh_msg-2">Module:handle_ssh_msg/2</a></li>
<li title="Module:terminate-2"><a href="ssh_channel.html#Module:terminate-2">Module:terminate/2</a></li>
</ul>
</li>
<li id="no" title="ssh_connection " expanded="false">ssh_connection<ul>
<li><a href="ssh_connection.html">
                  Top of manual page
                </a></li>
<li title="adjust_window-3"><a href="ssh_connection.html#adjust_window-3">adjust_window/3</a></li>
<li title="close-2"><a href="ssh_connection.html#close-2">close/2</a></li>
<li title="exec-4"><a href="ssh_connection.html#exec-4">exec/4</a></li>
<li title="exit_status-3"><a href="ssh_connection.html#exit_status-3">exit_status/3</a></li>
<li title="ptty_alloc-3"><a href="ssh_connection.html#ptty_alloc-3">ptty_alloc/3</a></li>
<li title="ptty_alloc-4"><a href="ssh_connection.html#ptty_alloc-4">ptty_alloc/4</a></li>
<li title="reply_request-4"><a href="ssh_connection.html#reply_request-4">reply_request/4</a></li>
<li title="send-3"><a href="ssh_connection.html#send-3">send/3</a></li>
<li title="send-4"><a href="ssh_connection.html#send-4">send/4</a></li>
<li title="send-4"><a href="ssh_connection.html#send-4">send/4</a></li>
<li title="send-5"><a href="ssh_connection.html#send-5">send/5</a></li>
<li title="send_eof-2"><a href="ssh_connection.html#send_eof-2">send_eof/2</a></li>
<li title="session_channel-2"><a href="ssh_connection.html#session_channel-2">session_channel/2</a></li>
<li title="session_channel-4"><a href="ssh_connection.html#session_channel-4">session_channel/4</a></li>
<li title="setenv-5"><a href="ssh_connection.html#setenv-5">setenv/5</a></li>
<li title="shell-2"><a href="ssh_connection.html#shell-2">shell/2</a></li>
<li title="subsystem-4"><a href="ssh_connection.html#subsystem-4">subsystem/4</a></li>
</ul>
</li>
<li id="no" title="ssh_client_key_api " expanded="false">ssh_client_key_api<ul>
<li><a href="ssh_client_key_api.html">
                  Top of manual page
                </a></li>
<li title="Module:add_host_key-3"><a href="ssh_client_key_api.html#Module:add_host_key-3">Module:add_host_key/3</a></li>
<li title="Module:is_host_key-4"><a href="ssh_client_key_api.html#Module:is_host_key-4">Module:is_host_key/4</a></li>
<li title="Module:user_key-2"><a href="ssh_client_key_api.html#Module:user_key-2">Module:user_key/2</a></li>
</ul>
</li>
<li id="no" title="ssh_server_key_api " expanded="false">ssh_server_key_api<ul>
<li><a href="ssh_server_key_api.html">
                  Top of manual page
                </a></li>
<li title="Module:host_key-2"><a href="ssh_server_key_api.html#Module:host_key-2">Module:host_key/2</a></li>
<li title="Module:is_auth_key-3"><a href="ssh_server_key_api.html#Module:is_auth_key-3">Module:is_auth_key/3</a></li>
</ul>
</li>
<li id="no" title="ssh_sftp " expanded="false">ssh_sftp<ul>
<li><a href="ssh_sftp.html">
                  Top of manual page
                </a></li>
<li title="start_channel-1"><a href="ssh_sftp.html#start_channel-1">start_channel/1</a></li>
<li title="start_channel-2"><a href="ssh_sftp.html#start_channel-2">start_channel/2</a></li>
<li title="start_channel-2"><a href="ssh_sftp.html#start_channel-2">start_channel/2</a></li>
<li title="start_channel-3"><a href="ssh_sftp.html#start_channel-3">start_channel/3</a></li>
<li title="stop_channel-1"><a href="ssh_sftp.html#stop_channel-1">stop_channel/1</a></li>
<li title="read_file-2"><a href="ssh_sftp.html#read_file-2">read_file/2</a></li>
<li title="read_file-3"><a href="ssh_sftp.html#read_file-3">read_file/3</a></li>
<li title="write_file-3"><a href="ssh_sftp.html#write_file-3">write_file/3</a></li>
<li title="write_file-4"><a href="ssh_sftp.html#write_file-4">write_file/4</a></li>
<li title="list_dir-2"><a href="ssh_sftp.html#list_dir-2">list_dir/2</a></li>
<li title="list_dir-3"><a href="ssh_sftp.html#list_dir-3">list_dir/3</a></li>
<li title="open-3"><a href="ssh_sftp.html#open-3">open/3</a></li>
<li title="open-4"><a href="ssh_sftp.html#open-4">open/4</a></li>
<li title="opendir-2"><a href="ssh_sftp.html#opendir-2">opendir/2</a></li>
<li title="opendir-3"><a href="ssh_sftp.html#opendir-3">opendir/3</a></li>
<li title="open_tar-3"><a href="ssh_sftp.html#open_tar-3">open_tar/3</a></li>
<li title="open_tar-4"><a href="ssh_sftp.html#open_tar-4">open_tar/4</a></li>
<li title="close-2"><a href="ssh_sftp.html#close-2">close/2</a></li>
<li title="close-3"><a href="ssh_sftp.html#close-3">close/3</a></li>
<li title="read-3"><a href="ssh_sftp.html#read-3">read/3</a></li>
<li title="read-4"><a href="ssh_sftp.html#read-4">read/4</a></li>
<li title="pread-4"><a href="ssh_sftp.html#pread-4">pread/4</a></li>
<li title="pread-5"><a href="ssh_sftp.html#pread-5">pread/5</a></li>
<li title="aread-3"><a href="ssh_sftp.html#aread-3">aread/3</a></li>
<li title="apread-4"><a href="ssh_sftp.html#apread-4">apread/4</a></li>
<li title="write-3"><a href="ssh_sftp.html#write-3">write/3</a></li>
<li title="write-4"><a href="ssh_sftp.html#write-4">write/4</a></li>
<li title="pwrite-4"><a href="ssh_sftp.html#pwrite-4">pwrite/4</a></li>
<li title="pwrite-5"><a href="ssh_sftp.html#pwrite-5">pwrite/5</a></li>
<li title="awrite-3"><a href="ssh_sftp.html#awrite-3">awrite/3</a></li>
<li title="apwrite-4"><a href="ssh_sftp.html#apwrite-4">apwrite/4</a></li>
<li title="position-3"><a href="ssh_sftp.html#position-3">position/3</a></li>
<li title="position-4"><a href="ssh_sftp.html#position-4">position/4</a></li>
<li title="read_file_info-2"><a href="ssh_sftp.html#read_file_info-2">read_file_info/2</a></li>
<li title="read_file_info-3"><a href="ssh_sftp.html#read_file_info-3">read_file_info/3</a></li>
<li title="read_link_info-2"><a href="ssh_sftp.html#read_link_info-2">read_link_info/2</a></li>
<li title="read_link_info-3"><a href="ssh_sftp.html#read_link_info-3">read_link_info/3</a></li>
<li title="write_file_info-3"><a href="ssh_sftp.html#write_file_info-3">write_file_info/3</a></li>
<li title="write_file_info-4"><a href="ssh_sftp.html#write_file_info-4">write_file_info/4</a></li>
<li title="read_link-2"><a href="ssh_sftp.html#read_link-2">read_link/2</a></li>
<li title="read_link-3"><a href="ssh_sftp.html#read_link-3">read_link/3</a></li>
<li title="make_symlink-3"><a href="ssh_sftp.html#make_symlink-3">make_symlink/3</a></li>
<li title="make_symlink-4"><a href="ssh_sftp.html#make_symlink-4">make_symlink/4</a></li>
<li title="rename-3"><a href="ssh_sftp.html#rename-3">rename/3</a></li>
<li title="rename-4"><a href="ssh_sftp.html#rename-4">rename/4</a></li>
<li title="delete-2"><a href="ssh_sftp.html#delete-2">delete/2</a></li>
<li title="delete-3"><a href="ssh_sftp.html#delete-3">delete/3</a></li>
<li title="make_dir-2"><a href="ssh_sftp.html#make_dir-2">make_dir/2</a></li>
<li title="make_dir-3"><a href="ssh_sftp.html#make_dir-3">make_dir/3</a></li>
<li title="del_dir-2"><a href="ssh_sftp.html#del_dir-2">del_dir/2</a></li>
<li title="del_dir-3"><a href="ssh_sftp.html#del_dir-3">del_dir/3</a></li>
</ul>
</li>
<li id="no" title="ssh_sftpd " expanded="false">ssh_sftpd<ul>
<li><a href="ssh_sftpd.html">
                  Top of manual page
                </a></li>
<li title="subsystem_spec-1"><a href="ssh_sftpd.html#subsystem_spec-1">subsystem_spec/1</a></li>
</ul>
</li>
</ul>
</div></div>
<div id="content">
<div class="innertube">
<!-- refpage --><center><h1>ssh_channel</h1></center>
  
  <h3>MODULE</h3>
<div class="REFBODY">ssh_channel</div>
  <h3>MODULE SUMMARY</h3>
<div class="REFBODY">-behaviour(ssh_channel).
  </div>
  <h3>DESCRIPTION</h3>
<div class="REFBODY"><p>
    <p>SSH services (clients and servers) are implemented as channels
    that are multiplexed over an SSH connection and communicates via
    the <span class="bold_code"><a href="http://www.ietf.org/rfc/rfc4254.txt"> SSH
    Connection Protocol</a></span>. This module provides a callback API
    that takes care of generic channel aspects such as flow control
    and close messages and lets the callback functions take care of
    the service (application) specific parts. This behavior also ensures
    that the channel process honors the principal of an OTP-process so
    that it can be part of a supervisor tree. This is a requirement of
    channel processes implementing a subsystem that will be added to
    the SSH applications supervisor tree.
    </p>

    <div class="note">
<div class="label">Note</div>
<div class="content"><p> <p>When implementing a SSH subsystem use the
    <span class="code">-behaviour(ssh_daemon_channel).</span> instead of  <span class="code">-behaviour(ssh_channel).</span>
    as the only relevant callback functions for subsystems are
    init/1, handle_ssh_msg/2, handle_msg/2 and terminate/2, so the ssh_daemon_channel
    behaviour is limited version of the ssh_channel behaviour.
    </p> </p></div>
</div>
  </p></div>

  <h3><a name="id65870">DATA TYPES </a></h3>
<div class="REFBODY">
    

    <p>Type definitions that are used more than once in this module
    and/or abstractions to indicate the intended use of the data
    type:</p>
    
    <p><span class="code">boolean() = true | false </span></p>
    <p><span class="code">string() = list of ASCII characters</span></p>
    <p><span class="code">timeout() =  infinity | integer() - in milliseconds.</span></p>
    <p><span class="code">ssh_connection_ref() - opaque to the user returned by
    ssh:connect/3 or sent to an SSH channel process</span></p>
    <p><span class="code">ssh_channel_id() = integer() </span></p>
    <p><span class="code">ssh_data_type_code() = 1 ("stderr") | 0 ("normal") are
    currently valid values see <span class="bold_code"><a href="http://www.ietf.org/rfc/rfc4254.txt">RFC 4254  </a></span> section 5.2.</span></p>
  </div>

  <h3>EXPORTS</h3>
    <p><a name="call-2"><span class="bold_code">call(ChannelRef, Msg) -&gt;</span></a><br><a name="call-3"><span class="bold_code">call(ChannelRef, Msg, Timeout) -&gt; Reply | {error, Reason}</span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
	<div class="REFTYPES">
<span class="bold_code">ChannelRef = pid() </span><br>
</div>
	<div class="REFBODY">As returned by start_link/4 </div>
	<div class="REFTYPES">
<span class="bold_code">Msg = term() </span><br>
</div>
	<div class="REFTYPES">
<span class="bold_code">Timeout = timeout() </span><br>
</div>
	<div class="REFTYPES">
<span class="bold_code">Reply = term() </span><br>
</div>
	<div class="REFTYPES">
<span class="bold_code">Reason = closed | timeout </span><br>
</div>

      </div>
<div class="REFBODY"><p>
	<p>Makes a synchronous call to the channel process by sending
	a message and waiting until a reply arrives or a timeout
	occurs. The channel will call <span class="bold_code"><a href="#Module:handle_call-3">Module:handle_call/3</a></span>
	to handle the message.  If the channel process does not exist
	<span class="code">{error, closed}</span> is returned.
	</p>
      </p></div>
    
    <p><a name="cast-2"><span class="bold_code">cast(ChannelRef, Msg) -&gt; ok </span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
	<div class="REFTYPES">
<span class="bold_code">ChannelRef = pid() </span><br>
</div>
	<div class="REFBODY">As returned by start_link/4 </div>
	<div class="REFTYPES">
<span class="bold_code">Msg = term() </span><br>
</div>
      </div>
<div class="REFBODY"><p>
	<p>Sends an asynchronous message to the channel process and
	returns ok immediately, ignoring if the destination node or
	channel process does not exist. The channel will call
	<span class="bold_code"><a href="#Module:handle_cast-2">Module:handle_cast/2</a></span>
	 to handle the message.
	</p>
      </p></div>

       <p><a name="enter_loop-1"><span class="bold_code">enter_loop(State) -&gt; _ </span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
	<div class="REFTYPES">
<span class="bold_code"> State = term() - as returned by <span class="bold_code"><a href="#init-1">ssh_channel:init/1</a></span></span><br>
</div>
      </div>
<div class="REFBODY"><p>
	<p> Makes an existing process an <span class="code">ssh_channel</span>
	process. Does not return, instead the calling process will
	enter the <span class="code">ssh_channel</span> process receive loop and become an
	<span class="code">ssh_channel process.</span> The process must have been started using
	one of the start functions in proc_lib, see <span class="bold_code"><a href="proc_lib.html">proc_lib(3)</a></span>. The
	user is responsible for any initialization of the process
	and needs to call <span class="bold_code"><a href="#init-1">ssh_channel:init/1</a></span>
	</p>
      </p></div>
    
    <p><a name="init-1"><span class="bold_code">init(Options) -&gt; {ok, State} |  {ok, State, Timeout} | {stop, Reason} </span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
	<div class="REFTYPES">
<span class="bold_code">Options = [{Option, Value}]</span><br>
</div>
	<div class="REFTYPES">
<span class="bold_code">State = term()</span><br>
</div>
	<div class="REFTYPES">
<span class="bold_code">Timeout = timeout() </span><br>
</div>
	<div class="REFTYPES">
<span class="bold_code">Reason = term() </span><br>
</div>
      </div>
<div class="REFBODY"><p>
	<p>
	  The following options must be present:
	</p>
	  <dl>
	  <dt><strong><span class="code">{channel_cb, atom()}</span></strong></dt>
	  <dd>The module that implements the channel behaviour.</dd>
	  
	  <dt><strong><span class="code">{init_args(), list()}</span></strong></dt>
	  <dd> The list of arguments to the callback module's
	  init function.</dd>

	  <dt><strong><span class="code">{cm, connection_ref()}</span></strong></dt>
	  <dd> Reference to the ssh connection as returned by  <span class="bold_code"><a href="ssh.html#connect-3">ssh:connect/3</a></span>
</dd>
	  
	  <dt><strong><span class="code">{channel_id, channel_id()}</span></strong></dt>
	  <dd> Id of the SSH channel.</dd>
	  
	  </dl>

	  <div class="note">
<div class="label">Note</div>
<div class="content"><p><p>This function is normally not called by the
	  user. The user only needs to call if for some reason the
	  channel process needs to be started with help of
	  <span class="code">proc_lib</span> instead of calling
	  <span class="code">ssh_channel:start/4</span> or
	  <span class="code">ssh_channel:start_link/4</span> </p>
	  </p></div>
</div>
      </p></div>

    <p><a name="reply-2"><span class="bold_code">reply(Client, Reply) -&gt; _</span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
        <div class="REFTYPES">
<span class="bold_code">Client - opaque to the user, see explanation below</span><br>
</div>
        <div class="REFTYPES">
<span class="bold_code">Reply = term()</span><br>
</div>
      </div>
<div class="REFBODY"><p>
        <p>This function can be used by a channel to explicitly send a
        reply to a client that called <span class="code">call/[2,3]</span> when the reply
        cannot be defined in the return value of
	<span class="bold_code"><a href="#Module:handle_call-3">Module:handle_call/3</a></span>.</p>
        <p><span class="code">Client</span> must be the <span class="code">From</span> argument provided to
          the callback function <span class="code">handle_call/3</span>.
	  <span class="code">Reply</span> is an arbitrary term,
	  which will be given back to the client as the return value of
          <span class="bold_code"><a href="#call-2">ssh_channel:call/[2,3].</a></span>&gt;</p>
      </p></div>
    
    <p><a name="start-4"><span class="bold_code">start(SshConnection, ChannelId, ChannelCb, CbInitArgs) -&gt; </span></a><br><a name="start_link-4"><span class="bold_code">start_link(SshConnection, ChannelId, ChannelCb, CbInitArgs) -&gt;
      {ok, ChannelRef} | {error, Reason}</span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
	<div class="REFTYPES">
<span class="bold_code">SshConnection = ssh_connection_ref()</span><br>
</div>
	<div class="REFTYPES">
<span class="bold_code">ChannelId = ssh_channel_id() </span><br>
</div>
	<div class="REFBODY"> As returned by cannot be defined in the return value of
	<span class="bold_code"><a href="ssh_connection.html#session_channel-2">ssh_connection:session_channel/[2,4]</a></span>
</div>
	<div class="REFTYPES">
<span class="bold_code">ChannelCb = atom()</span><br>
</div>
	<div class="REFBODY"> The name of the module implementing the service specific parts
	of the channel.</div>
	<div class="REFTYPES">
<span class="bold_code">CbInitArgs = [term()]</span><br>
</div>
	<div class="REFBODY">Argument  list for the init function in the callback module. </div>
	<div class="REFTYPES">
<span class="bold_code">ChannelRef = pid()</span><br>
</div>
      </div>
<div class="REFBODY"><p>
	<p>Starts a processes that handles an SSH channel. It will be
	called internally by the SSH daemon or explicitly by the SSH
	client implementations. The behavior will set the
	<span class="code">trap_exit</span> flag to true.
	</p>
      </p></div>
    
  
  
  <h3><a name="id66321"> CALLBACK TIMEOUTS</a></h3>
<div class="REFBODY">
    <a name="cb_timeouts"></a>
    

    <p>The timeout values that may be returned by the callback functions
    has the same semantics as in a <span class="bold_code"><a href="gen_server.html">gen_server</a></span>
    If the timeout occurs <span class="bold_code"><a href="#Module:handle_msg-2">handle_msg/2</a></span>
    will be called as <span class="code">handle_msg(timeout, State). </span></p>
  </div>

  <h3>EXPORTS</h3>
    <p><a name="Module:code_change-3"><span class="bold_code">Module:code_change(OldVsn, State, Extra) -&gt; {ok,
      NewState}</span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
	<div class="REFTYPES">
<span class="bold_code">OldVsn = term()</span><br>
</div>
	<div class="REFBODY">In the case of an upgrade, <span class="code">OldVsn</span> is <span class="code">Vsn</span>, and
	in the case of a downgrade, <span class="code">OldVsn</span> is
	<span class="code">{down,Vsn}</span>. <span class="code">Vsn</span> is defined by the <span class="code">vsn</span>
	attribute(s) of the old version of the callback module
	<span class="code">Module</span>. If no such attribute is defined, the version is
	the checksum of the BEAM file.</div>
	<div class="REFTYPES">
<span class="bold_code">State = term()</span><br>
</div>
	<div class="REFBODY">The internal state of the channel.</div>
        <div class="REFTYPES">
<span class="bold_code">Extra = term()</span><br>
</div>
	<div class="REFBODY">Passed as-is from the <span class="code">{advanced,Extra}</span>
	part of the update instruction.</div>
      </div>
<div class="REFBODY"><p>
	<p> Converts process state when code is changed.</p>

	<p>This function is called by a client side channel when it
	should update its internal state during a release
	upgrade/downgrade, i.e. when the instruction
	<span class="code">{update,Module,Change,...}</span> where
	<span class="code">Change={advanced,Extra}</span> is given in the <span class="code">appup</span>
	file. See <span class="bold_code"><a href="../design_principles/release_handling.html#instr">OTP
	Design Principles</a></span> for more information.
	</p>

	<div class="note">
<div class="label">Note</div>
<div class="content"><p><p>Soft upgrade according to the OTP release concept
	is not straight forward for the server side, as subsystem
	channel processes are spawned by the SSH application and
	hence added to its supervisor tree. It could be possible to
	upgrade the subsystem channels, when upgrading the user
	application, if the callback functions can handle two
	versions of the state, but this function can not be used in
	the normal way.</p>
	</p></div>
</div>
	  
      </p></div>
    
    <p><a name="Module:init-1"><span class="bold_code">Module:init(Args) -&gt; {ok, State} | {ok, State, timeout()} |
      {stop, Reason}</span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
	<div class="REFTYPES">
<span class="bold_code"> Args = term() </span><br>
</div>
	<div class="REFBODY"> Last argument to ssh_channel:start_link/4.</div>
	<div class="REFTYPES">
<span class="bold_code"> State = term() </span><br>
</div>
	<div class="REFTYPES">
<span class="bold_code"> Reason = term() </span><br>
</div>
      </div>
<div class="REFBODY"><p>
	<p> Makes necessary initializations and returns the initial channel
	state if the initializations succeed.
	</p>
	<p>For more detailed information on timeouts see the section 
	<span class="bold_code"><a href="#cb_timeouts">CALLBACK TIMEOUTS</a></span>. </p>
      </p></div>
   
    <p><a name="Module:handle_call-3"><span class="bold_code">Module:handle_call(Msg, From, State) -&gt; Result</span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
	<div class="REFTYPES">
<span class="bold_code">Msg = term()</span><br>
</div>
	<div class="REFTYPES">
<span class="bold_code">From = opaque to the user should be used as argument to
	ssh_channel:reply/2</span><br>
</div>
	<div class="REFTYPES">
<span class="bold_code">State = term()</span><br>
</div>
	<div class="REFTYPES">
<span class="bold_code">Result = {reply, Reply, NewState} | {reply, Reply, NewState, timeout()}
	| {noreply, NewState} | {noreply , NewState, timeout()}
	| {stop, Reason, Reply, NewState} | {stop, Reason, NewState} </span><br>
</div>
	<div class="REFTYPES">
<span class="bold_code">Reply = term() - will be the return value of ssh_channel:call/[2,3]</span><br>
</div>
	<div class="REFTYPES">
<span class="bold_code">NewState = term()</span><br>
</div>
	<div class="REFTYPES">
<span class="bold_code">Reason = term()</span><br>
</div>
      </div>
<div class="REFBODY"><p>
	<p>Handles messages sent by calling
	<span class="bold_code"><a href="#call-2">ssh_channel:call/[2,3]</a></span>
	</p>
	<p>For more detailed information on timeouts see the section 
	<span class="bold_code"><a href="#cb_timeouts">CALLBACK TIMEOUTS</a></span>. </p>
      </p></div>

    <p><a name="Module:handle_cast-2"><span class="bold_code">Module:handle_cast(Msg, State) -&gt; Result</span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
	<div class="REFTYPES">
<span class="bold_code">Msg = term()</span><br>
</div>
	<div class="REFTYPES">
<span class="bold_code">State = term()</span><br>
</div>
	<div class="REFTYPES">
<span class="bold_code">Result = {noreply, NewState} | {noreply, NewState, timeout()}
	| {stop, Reason, NewState}</span><br>
</div>
	<div class="REFTYPES">
<span class="bold_code">NewState = term() </span><br>
</div>
	<div class="REFTYPES">
<span class="bold_code">Reason = term()</span><br>
</div>
      </div>
<div class="REFBODY"><p>
	<p> Handles messages sent by calling
	<span class="code">ssh_channel:cast/2</span>
	</p>
	<p>For more detailed information on timeouts see the section 
	<span class="bold_code"><a href="#cb_timeouts">CALLBACK TIMEOUTS</a></span>. </p>
      </p></div>
 
    <p><a name="Module:handle_msg-2"><span class="bold_code">Module:handle_msg(Msg, State) -&gt; {ok, State} |
      {stop, ChannelId, State}</span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
	<div class="REFTYPES">
<span class="bold_code">Msg = timeout | term()</span><br>
</div>
	<div class="REFTYPES">
<span class="bold_code">ChannelId = ssh_channel_id()</span><br>
</div>
	<div class="REFTYPES">
<span class="bold_code">State = term() </span><br>
</div>
      </div>
<div class="REFBODY"><p>
	<p>Handle other messages than ssh connection protocol, call or
	cast messages sent to the channel. 
	</p>

	<p> Possible erlang 'EXIT'-messages should be handled by this
	function and all channels should handle the following message.</p>
	
	<dl>
	  <dt><strong><span class="code">{ssh_channel_up, ssh_channel_id(), 
	  ssh_connection_ref()}</span></strong></dt>
	  <dd>This is the first messages that will be received by
	  the channel, it is sent just before the <span class="bold_code"><a href="#init-1">ssh_channel:init/1</a></span> function
	  returns successfully.  This is especially useful if the
	  server wants to send a message to the client without first
	  receiving a message from it. If the message is not
	  useful for your particular scenario just ignore it by
	  immediately returning {ok, State}.
	  </dd>
	</dl>
      </p></div>

    <p><a name="Module:handle_ssh_msg-2"><span class="bold_code">Module:handle_ssh_msg(Msg, State) -&gt; {ok, State} | {stop,
      ChannelId, State}</span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
	<div class="REFTYPES">
<span class="bold_code">Msg = <span class="bold_code"><a href="ssh_connection.html"> ssh_connection:event() </a></span> </span><br>
</div>
	<div class="REFTYPES">
<span class="bold_code">ChannelId = ssh_channel_id()</span><br>
</div>
	<div class="REFTYPES">
<span class="bold_code">State = term()</span><br>
</div>
      </div>
<div class="REFBODY"><p>
	<p> Handles SSH connection protocol messages that may need
	service specific attention.
	</p>
	
	<p> The following message is completely taken care of by the
	SSH channel behavior</p>
	
	<dl>
	  <dt><strong><span class="code">{closed, ssh_channel_id()}</span></strong></dt>
	  <dd> The channel behavior will send a close message to the
	  other side if such a message has not already been sent and
	  then terminate the channel with reason normal.</dd>
	</dl>
      </p></div>

    <p><a name="Module:terminate-2"><span class="bold_code">Module:terminate(Reason, State) -&gt; _</span></a><br></p>
<div class="REFBODY">
<p>Types:</p>
	<div class="REFTYPES">
<span class="bold_code">Reason = term()</span><br>
</div>
	<div class="REFTYPES">
<span class="bold_code">State = term()</span><br>
</div>
      </div>
<div class="REFBODY"><p>
	<p>This function is called by a channel process when it is
	about to terminate. Before this function is called <span class="bold_code"><a href="ssh_connection.html#close-2"> ssh_connection:close/2
	</a></span> will be called if it has not been called earlier.
	This function should do any necessary cleaning
	up. When it returns, the channel process terminates with
	reason <span class="code">Reason</span>. The return value is ignored.
	</p>
      </p></div>
    
  
  
</div>
<div class="footer">
<hr>
<p>Copyright © 2005-2015 Ericsson AB. All Rights Reserved.</p>
</div>
</div>
</div></body>
</html>
